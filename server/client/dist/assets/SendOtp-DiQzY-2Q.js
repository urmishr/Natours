import{a as h,d as j,r,b as v,j as e,m as c,n as w,N as g,L as N,V as b}from"./index-JePda7sN.js";import{v as E}from"./index-DbaFSfWT.js";function A(){const{loading:d,sendOtp:m,error:i,resetError:x,isAuthenticated:u}=h(),p=j(),{emailTyped:t}=p.state||"",[f,o]=r.useState(!1),[s,l]=r.useState(""),a=v();r.useEffect(function(){if(u)return a("/account");x(),t&&l(t.trim())},[t]);async function y(){if(!E.isEmail(s))return b.error("Please enter valid email address!"),o(!0);await m(s)&&a("/forgot-password/verify-otp",{state:{emailTyped:s}})}return e.jsx("section",{className:"my-auto flex w-full flex-col md:items-center",children:e.jsxs(c.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},className:"mx-5 my-14 flex flex-col justify-between space-y-8 rounded-lg bg-white px-5 py-7 shadow-lg md:min-w-[600px] md:p-13 md:shadow-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 space-y-1",children:[e.jsx(w,{className:"text-natours m-0 size-7",onClick:()=>a(-1)}),e.jsx("h1",{className:"natours-gradient-text text-2xl font-bold",children:"Send Verification Code."})]}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("div",{children:e.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Enter your Email Address."})}),e.jsx("input",{type:"text",className:`input-natours w-full text-stone-600 ${f?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"you@example.com",value:s,onChange:n=>{l(n.target.value.trim()),o(!1)}})]}),e.jsx("p",{className:"font-semibold text-red-400",children:i}),i&&e.jsx(g,{to:"/forgot-password/verify-otp",className:"text-natours font-semibold",state:{emailTyped:s},children:"Already Have an Otp? Click here"}),e.jsx("div",{children:e.jsx(c.button,{whileTap:{scale:.7},transition:{type:"keyframes",duration:.01},className:"btn-primary w-1/2 py-3 md:w-1/3",onClick:y,children:d?e.jsx(N,{}):"Send OTP"})})]})})}export{A as default};

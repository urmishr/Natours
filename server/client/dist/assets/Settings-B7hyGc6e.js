import{a as E,r as t,j as e,L as S,A as $,m as F,V as c,G as R,c as M}from"./index-JePda7sN.js";import{v as k}from"./index-DbaFSfWT.js";function D(){const{loading:r,user:l,changeProfile:h}=E(),[v,w]=t.useState(!1),[n,u]=t.useState(""),[i,N]=t.useState(""),[d,P]=t.useState(null),[g,j]=t.useState(!1),[f,C]=t.useState(!1),[m,x]=t.useState(null);t.useEffect(function(){if(!l)return;N(l.name),u(l.email);const s=`/img/users/${l.photo}`;x(s)},[l]);function o(s,a){let p=!0;return a?k.isEmail(a)||(j(!0),c.error("Incorrect email address format!"),p=!1):(j(!0),p=!1),s.trim()?C(!1):(C(!0),c.error("Please enter your full name ."),p=!1),p}const b=s=>{const a=s.target.files[0];if(a.type.split("/")[1]!=="jpeg"&&a.type.split("/")[1]!=="png")return c.error("Please Upload Jpeg or Png image only!");if(a){const p=URL.createObjectURL(a);x(p),P(a)}else x(null)};async function y(s){if(s.preventDefault(),!o(i,n))return;const a=new FormData;a.append("name",i),a.append("email",n),a.append("photo",d),await h(a)}return t.useEffect(()=>{if(!l)return;const s=i!==l.name||n!==l.email||d!==null;w(s)},[i,n,d,l]),r?e.jsx(S,{color:"green"}):e.jsx("form",{className:"w-full md:w-3/4 lg:w-1/2",onSubmit:y,children:e.jsx($,{children:e.jsxs(F.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"my-7 flex flex-col justify-between space-y-8 rounded-lg bg-white px-6 py-7 shadow-lg md:min-w-[600px] md:p-13 md:shadow-xl",children:[e.jsx("div",{className:"flex flex-col space-y-1",children:e.jsx("h1",{className:"natours-gradient-text text-2xl font-bold",children:"Change Your Profile"})}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("div",{children:e.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Full Name"})}),e.jsx("input",{type:"text",className:`input-natours w-full text-stone-600 ${f?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"John Doe",value:i,onChange:s=>{N(s.target.value),C(!1)}})]}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("div",{children:e.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Email Address"})}),e.jsx("input",{type:"text",className:`input-natours w-full text-stone-600 ${g?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"you@example.com",value:n,onChange:s=>{u(s.target.value),j(!1)}})]}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("input",{type:"file",id:"photo-upload",accept:"image/*",name:"photo",className:"hidden",onChange:b}),m&&e.jsx("label",{htmlFor:"photo-upload",className:"font-semibold text-stone-600",children:"Click to choose different photo"}),e.jsx("label",{htmlFor:"photo-upload",className:"hover:border-natours relative size-20 cursor-pointer rounded-full border-3 border-stone-300 bg-stone-100 p-1 transition-colors lg:size-26",children:m?e.jsx("img",{src:m||`/img/users/${l.photo}`,alt:"Profile Preview",className:"h-full w-full rounded-full object-cover"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center text-stone-400",children:e.jsx("span",{className:"text-center text-sm select-none",children:"Choose Photo"})})})]}),e.jsx("div",{children:e.jsx("button",{className:"btn-primary w-1/2 py-3 disabled:cursor-not-allowed md:w-1/3",onClick:y,disabled:r||!v,children:r?e.jsx(S,{}):"Save"})})]})})})}function Z(){const{loading:r,changePassword:l}=E(),[h,v]=t.useState(""),[w,n]=t.useState(""),[u,i]=t.useState(""),[N,d]=t.useState(!1),[P,g]=t.useState(!1),[j,f]=t.useState(!1);function C(o,b,y){let s=!0;return o?g(!1):(g(!0),c.error("Current password is required."),s=!1),b?b.length<8?(d(!0),c.error("New password must be at least 8 characters."),s=!1):d(!1):(d(!0),c.error("New password is required."),s=!1),y?y!==b?(f(!0),c.error("Passwords do not match."),s=!1):f(!1):(f(!0),c.error("Confirm password is required."),s=!1),s}function m(){v(""),n(""),i("")}async function x(o){o.preventDefault(),C(u,h,w)&&(await l(u,h,w),m())}return e.jsx("form",{className:"w-full md:w-3/4 lg:w-1/2",onSubmit:x,children:e.jsxs(F.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},className:"my-7 flex flex-col justify-between space-y-8 rounded-lg bg-white px-6 py-7 shadow-lg md:min-w-[600px] md:p-13 md:shadow-xl",children:[e.jsx("div",{className:"flex flex-col space-y-1",children:e.jsx("h1",{className:"natours-gradient-text text-2xl font-bold",children:"Change Your Password"})}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("label",{htmlFor:"password",className:"font-semibold text-stone-600",children:"Current Password"}),e.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${P?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"••••••••",value:u,onChange:o=>{g(!1),i(o.target.value)}})]}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("label",{htmlFor:"password",className:"font-semibold text-stone-600",children:"Password"}),e.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${N?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"••••••••",name:"password",value:h,onChange:o=>{d(!1),v(o.target.value)}})]}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("label",{htmlFor:"confirm-password",className:"font-semibold text-stone-600",children:"Confirm Password"}),e.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${j?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"•••••••• ",name:"confirmPassword",value:w,onChange:o=>{f(!1),n(o.target.value)}})]}),e.jsx("div",{children:e.jsx("button",{className:"btn-primary w-1/2 py-3 md:w-1/3",onClick:x,disabled:r,children:r?e.jsx(S,{}):"Save"})})]})})}function A(r){return R({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"},child:[]}]})(r)}function q(){const[r,l]=t.useState("profile");return e.jsxs("div",{className:"flex w-full flex-col items-center justify-center",children:[e.jsxs("div",{className:"my-4 flex space-x-5 rounded-full bg-white p-3 shadow-md",children:[e.jsxs("button",{className:`text-natours flex items-center gap-2 ${r==="profile"?"bg-natours flex items-center gap-2 rounded-full px-3 py-0.5 text-white shadow-md":""}`,onClick:()=>l("profile"),children:[e.jsx("span",{children:e.jsx(A,{})}),"Profile"]}),e.jsxs("button",{className:`text-natours flex items-center gap-2 ${r==="security"?"bg-natours rounded-full px-3 py-0.5 text-white shadow-md":""}`,onClick:()=>l("security"),children:[e.jsx("span",{children:e.jsx(M,{})}),"Security"]})]}),r==="profile"&&e.jsx(D,{}),r==="security"&&e.jsx(Z,{})]})}export{q as default};

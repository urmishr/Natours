const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TourMap-Bxv00lY9.js","assets/index-JePda7sN.js","assets/index-Bpa-bkc8.css","assets/TourMap-DcUFdCM5.css","assets/TourImages-DzyaRxEP.js","assets/TourReviews-Ab4V7Zgh.js","assets/index-DMcL_BQd.js","assets/index-DoP08BHp.js"])))=>i.map(i=>d[i]);
import{e as c,a as b,r as o,j as e,L as x,V as p,f as T,g as E,h as _,i as L,F as R,k as P,_ as h}from"./index-JePda7sN.js";import{F as k,a as C}from"./index-DMcL_BQd.js";var N="basil",z=function(t){return t===3?"v3":t},y="https://js.stripe.com",A="".concat(y,"/").concat(N,"/stripe.js"),I=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,G=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var D=function(t){return I.test(t)||G.test(t)},U=function(){for(var t=document.querySelectorAll('script[src^="'.concat(y,'"]')),s=0;s<t.length;s++){var n=t[s];if(D(n.src))return n}return null},g=function(t){var s="",n=document.createElement("script");n.src="".concat(A).concat(s);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(n),n},V=function(t,s){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"7.2.0",startTime:s})},u=null,m=null,f=null,F=function(t){return function(s){t(new Error("Failed to load Stripe.js",{cause:s}))}},O=function(t,s){return function(){window.Stripe?t(window.Stripe):s(new Error("Stripe.js not available"))}},B=function(t){return u!==null?u:(u=new Promise(function(s,n){if(typeof window>"u"||typeof document>"u"){s(null);return}if(window.Stripe){s(window.Stripe);return}try{var a=U();if(!(a&&t)){if(!a)a=g(t);else if(a&&f!==null&&m!==null){var i;a.removeEventListener("load",f),a.removeEventListener("error",m),(i=a.parentNode)===null||i===void 0||i.removeChild(a),a=g(t)}}f=O(s,n),m=F(n),a.addEventListener("load",f),a.addEventListener("error",m)}catch(l){n(l);return}}),u.catch(function(s){return u=null,Promise.reject(s)}))},W=function(t,s,n){if(t===null)return null;var a=s[0],i=a.match(/^pk_test/),l=z(t.version),j=N;i&&l!==j&&console.warn("Stripe.js@".concat(l," was loaded on the page, but @stripe/stripe-js@").concat("7.2.0"," expected Stripe.js@").concat(j,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var v=t.apply(void 0,s);return V(v,n),v},d,w=!1,S=function(){return d||(d=B(null).catch(function(t){return d=null,Promise.reject(t)}),d)};Promise.resolve().then(function(){return S()}).catch(function(r){w||console.warn(r)});var M=function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];w=!0;var a=Date.now();return S().then(function(i){return W(i,s,a)})};const q=M("pk_test_51RGC81EDUE7FyaOzVQA0GjPNpiAihbVqW82AGrsxvNfNlweKRobsfx9yme635KBhoFNyqkrYY8E34tcQ5gUrjd1C00AH5ZWBCT");function Y(){const{currentTour:r}=c(),{isAuthenticated:t}=b(),[s,n]=o.useState(!1),a=async()=>{if(!t)return p.error("You need to log in to book this tour!");try{n(!0);const i=await q,l=await T.get(`/api/v1/bookings/checkout-session/${r._id}`);await i.redirectToCheckout({sessionId:l.data.session.id}),p.success("Purchase Completed")}catch(i){p.error("Something went wrong. Please try again later."),console.error(i)}finally{n(!1)}};return e.jsx("section",{className:"px-5 py-7 md:px-10 lg:px-20",children:e.jsx("div",{className:"relative flex flex-col justify-center overflow-hidden rounded-3xl bg-stone-300/20 py-10 shadow-lg",children:e.jsxs("div",{className:"flex flex-col items-center justify-evenly space-y-5 md:flex-row",children:[e.jsxs("div",{className:"flex flex-col items-center justify-baseline space-y-5 px-5 md:px-10",children:[e.jsx("h1",{className:"natours-gradient-text font-italic text-center text-2xl font-bold md:text-2xl lg:text-4xl",children:"What are you waiting for?"}),e.jsxs("p",{className:"text-center text-stone-800/50 italic",children:[e.jsxs("span",{className:"font-semibold text-stone-600",children:[r.duration," days. 1 adventure"]}),".",e.jsx("br",{}),"Infinite memories. Make it yours today! ",e.jsx("br",{}),e.jsx("br",{}),!t&&e.jsx("span",{className:"text-red-400",children:"Login to book this tour"})]})]}),t&&e.jsx("button",{className:"btn-primary min-w-[200px] px-4 py-2 lg:py-4",onClick:a,disabled:s,children:s?e.jsx(x,{}):"Book Yours Now!"})]})})})}function $(){const{currentTour:r}=c();return e.jsxs("section",{className:"relative",children:[e.jsxs("div",{className:"relative z-2 md:h-[380px] lg:h-[470px]",children:[e.jsx("div",{className:"bg-natours/40 absolute h-full w-full"}),e.jsx("img",{src:`/img/tours/${r.imageCover}`,alt:"scenic image",className:"block h-full w-full object-cover"})]}),e.jsxs("div",{className:"absolute inset-0 z-4 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"natours-gradient-t px-3 py-2 shadow-md",children:e.jsx("span",{className:"text-3xl font-light text-white lg:text-4xl",children:r.name})}),e.jsxs("div",{className:"flex gap-2 p-5 lg:gap-5",children:[e.jsxs("p",{className:"flex items-center gap-2 text-lg text-white",children:[e.jsx("span",{children:e.jsx(E,{})}),r.duration," Days"]}),e.jsxs("p",{className:"flex items-center gap-2 text-lg text-white",children:[e.jsx("span",{children:e.jsx(k,{})}),r.startLocation.description]})]})]})]})}function J(){const{currentTour:r}=c();return e.jsx("div",{className:"flex flex-col bg-stone-300/10 p-10 lg:h-full lg:w-1/2 lg:py-30",children:e.jsxs("div",{className:"flex flex-col justify-center space-y-4",children:[e.jsx("h1",{className:"natours-gradient-text font-italic text-center text-2xl font-bold lg:text-3xl",children:"Discover Your next adventure"}),r.description.split(`
`).map((t,s)=>e.jsx("p",{className:"text-center text-stone-800/50",children:t},s))]})})}function K(){const{currentTour:r}=c(),t=s=>s[0].toUpperCase()+s.slice(1).toLowerCase();return e.jsxs("div",{className:"my-4 items-center justify-center space-y-6",children:[e.jsx("h1",{className:"natours-gradient-text font-italic w-full text-center text-3xl font-bold lg:text-3xl",children:"Tour Facts"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"text-natours size-7"}),e.jsxs("p",{className:"font-semibold text-stone-600",children:["Next Date",e.jsx("span",{className:"ml-3 font-medium text-stone-800/50",children:new Date(r.startDates[0]).toLocaleDateString("en-US",{month:"long",year:"numeric"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"text-natours size-7"}),e.jsxs("p",{className:"font-semibold text-stone-600",children:["Difficulty",e.jsx("span",{className:"ml-3 font-medium text-stone-800/50",children:t(r.difficulty)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"text-natours size-7"}),e.jsxs("p",{className:"font-semibold text-stone-600",children:["Participants",e.jsx("span",{className:"ml-3 font-medium text-stone-800/50",children:r.maxGroupSize})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"text-natours size-7"}),e.jsxs("p",{className:"font-semibold text-stone-600",children:["Ratings",e.jsxs("span",{className:"ml-3 font-medium text-stone-800/50",children:[r.ratingsAverage," / 5"]})]})]})]})}function X({photo:r,guideRole:t,guideName:s}){return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"text-natours size-10 rounded-full",src:r}),e.jsxs("p",{className:"font-semibold text-stone-600",children:[t,e.jsx("span",{className:"ml-3 font-medium text-stone-800/50",children:s})]})]})}function H(){const{currentTour:r}=c(),t=s=>{let n=s;return n==="guide"?n="Tour Guide":(n=n.split("-").map(a=>a[0].toUpperCase()+a.slice(1).toLowerCase()).join(" "),n)};return e.jsxs("div",{className:"my-4 items-center justify-center space-y-6",children:[e.jsx("h1",{className:"natours-gradient-text font-italic w-full text-center text-3xl font-bold lg:text-3xl",children:"Tour Guides"}),r.guides.length===0?e.jsx("h1",{className:"text-stone-600",children:"No guides are available at the moment."}):r.guides.map(s=>e.jsx(X,{photo:`/img/users/${s.photo}`,guideName:s.name,guideRole:t(s.role)},s._id))]})}function Q(){return e.jsxs("section",{className:"flex flex-col items-center justify-center lg:min-h-[500px] lg:flex-row lg:items-start",children:[e.jsx(J,{}),e.jsxs("div",{className:"flex w-full flex-col items-center justify-evenly gap-10 py-10 md:flex-row md:items-baseline lg:h-full lg:w-1/2 lg:flex-col lg:items-center lg:py-5",children:[e.jsx(K,{}),e.jsx(H,{})]})]})}const Z=o.lazy(()=>h(()=>import("./TourMap-Bxv00lY9.js"),__vite__mapDeps([0,1,2,3]))),ee=o.lazy(()=>h(()=>import("./TourImages-DzyaRxEP.js"),__vite__mapDeps([4,1,2]))),te=o.lazy(()=>h(()=>import("./TourReviews-Ab4V7Zgh.js"),__vite__mapDeps([5,1,2,6,7])));function ne(){const{slug:r}=P(),{currentTour:t,loading:s,getCurrentTour:n,myBookings:a}=c();return o.useEffect(()=>{async function i(){await n(r)}i()},[r]),s?e.jsx("div",{className:"flex h-[calc(100vh-10vh)] items-center justify-center",children:e.jsx(x,{className:"size-12",color:"green"})}):Object.keys(t).length===0?e.jsxs("div",{className:"flex h-[calc(100vh-10vh)] flex-col items-center justify-center gap-3",children:[e.jsx(x,{className:"size-12",color:"green"}),e.jsx("p",{className:"text-stone-600 md:text-xl",children:"Loading Tour . . ."})]}):e.jsxs(e.Fragment,{children:[e.jsx($,{}),e.jsx(Q,{}),e.jsx(o.Suspense,{fallback:e.jsx(x,{color:"green",className:"size-12",type:"componant",text:"Tour Images"}),children:e.jsx(ee,{})}),e.jsxs(o.Suspense,{fallback:e.jsx(x,{color:"green",className:"size-12",type:"componant",text:"Map and Review"}),children:[e.jsx(Z,{}),e.jsx(te,{})]}),e.jsx("div",{children:!a.find(i=>t._id===i.tour._id)&&e.jsx(Y,{})})]})}export{ne as default};

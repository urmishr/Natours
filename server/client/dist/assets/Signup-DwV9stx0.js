import{b as k,a as z,r as a,j as e,m as j,N as U,L as J,V as r}from"./index-JePda7sN.js";import{v as V}from"./index-DbaFSfWT.js";function T(){const b=k(),{signup:v,loading:N}=z(),[u,g]=a.useState(null),[m,y]=a.useState(""),[f,P]=a.useState(""),[p,E]=a.useState(""),[x,S]=a.useState(""),[w,C]=a.useState(null),[F,d]=a.useState(!1),[A,n]=a.useState(!1),[L,i]=a.useState(!1),[q,c]=a.useState(!1);function D(t,s,o,h){let l=!0;return!t&&!s&&!o&&!h?(r.error("All fields are required"),d(!0),n(!0),i(!0),c(!0),l=!1):(!t.trim()||t.trim().split(" ").length<2?(d(!0),r.error("Please enter your full name ."),l=!1):d(!1),s?V.isEmail(s)?n(!1):(n(!0),r.error("Invalid email format."),l=!1):(n(!0),r.error("Email is required."),l=!1),o?o.length<8?(i(!0),r.error("Password must be at least 8 characters."),l=!1):i(!1):(i(!0),r.error("Password is required."),l=!1),h?h!==o?(c(!0),r.error("Passwords do not match."),l=!1):c(!1):(c(!0),r.error("Confirm Password is required"),l=!1),l)}async function R(t){t.preventDefault();const s=new FormData;s.append("name",m),s.append("email",f),s.append("password",p),s.append("confirmPassword",x),w&&s.append("photo",w),D(m,f,p,x)&&(await v(s),b("/tours"))}const $=t=>{const s=t.target.files[0];if(s.type.split("/")[1]!=="jpeg"&&s.type.split("/")[1]!=="png")return r.error("Please Upload Jpeg or Png image only!");if(s){const o=URL.createObjectURL(s);g(o),C(s)}else g(null)};return e.jsx("section",{className:"my-10 flex w-full flex-col md:items-center",children:e.jsx("form",{onSubmit:R,children:e.jsxs(j.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},className:"mx-5 flex flex-col justify-between space-y-8 rounded-lg bg-white px-5 py-7 shadow-lg md:min-w-[600px] md:p-13 md:shadow-xl",children:[e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("h1",{className:"natours-gradient-text text-2xl font-bold",children:"Register your Account"}),e.jsxs(U,{to:"/login",className:"font-semibold text-stone-600",children:[e.jsx("span",{className:"mr-2 text-stone-800/50",children:"Already have an Account?"}),"Login"]})]}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Full Name"}),e.jsx("input",{type:"text",className:`input-natours w-full text-stone-600 ${F?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"John Doe",name:"name",value:m,onChange:t=>{d(!1),y(t.target.value)}})]}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Email Address"}),e.jsx("input",{type:"text",className:`input-natours w-full text-stone-600 ${A?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"you@example.com",name:"email",value:f,onChange:t=>{n(!1),P(t.target.value)}})]}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("label",{htmlFor:"password",className:"font-semibold text-stone-600",children:"Password"}),e.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${L?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"••••••••",name:"password",value:p,onChange:t=>{i(!1),E(t.target.value)}})]}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("label",{htmlFor:"confirm-password",className:"font-semibold text-stone-600",children:"Confirm Password"}),e.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${q?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"•••••••• ",name:"confirmPassword",value:x,onChange:t=>{c(!1),S(t.target.value)}})]}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("input",{type:"file",id:"photo-upload",accept:"image/*",name:"photo",className:"hidden",onChange:$}),u&&e.jsx("label",{htmlFor:"photo-upload",className:"font-semibold text-stone-600",children:"Click to choose different photo"}),e.jsx("label",{htmlFor:"photo-upload",className:"hover:border-natours relative size-20 cursor-pointer rounded-full border-3 border-stone-300 bg-stone-100 p-1 transition-colors md:size-24 lg:size-26",children:u?e.jsx("img",{src:u,alt:"Profile Preview",className:"h-full w-full rounded-full object-cover"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx("span",{className:"text-center text-sm text-stone-600 select-none",children:"Choose Photo"})})})]}),e.jsx("div",{children:e.jsx(j.button,{whileTap:{scale:.8},transition:{type:"keyframes",duration:.01},className:"btn-primary w-1/2 py-3 md:w-1/3",children:N?e.jsx(J,{}):"Signup"})})]})})})}export{T as default};

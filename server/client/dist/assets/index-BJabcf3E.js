var DM=Object.defineProperty;var zM=(i,n,d)=>n in i?DM(i,n,{enumerable:!0,configurable:!0,writable:!0,value:d}):i[n]=d;var xi=(i,n,d)=>zM(i,typeof n!="symbol"?n+"":n,d);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))p(_);new MutationObserver(_=>{for(const S of _)if(S.type==="childList")for(const y of S.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&p(y)}).observe(document,{childList:!0,subtree:!0});function d(_){const S={};return _.integrity&&(S.integrity=_.integrity),_.referrerPolicy&&(S.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?S.credentials="include":_.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function p(_){if(_.ep)return;_.ep=!0;const S=d(_);fetch(_.href,S)}})();function bv(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var x0={exports:{}},um={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx;function LM(){if(yx)return um;yx=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function d(p,_,S){var y=null;if(S!==void 0&&(y=""+S),_.key!==void 0&&(y=""+_.key),"key"in _){S={};for(var l in _)l!=="key"&&(S[l]=_[l])}else S=_;return _=S.ref,{$$typeof:i,type:p,key:y,ref:_!==void 0?_:null,props:S}}return um.Fragment=n,um.jsx=d,um.jsxs=d,um}var _x;function A2(){return _x||(_x=1,x0.exports=LM()),x0.exports}var q=A2(),b0={exports:{}},Fr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vx;function kM(){if(vx)return Fr;vx=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),y=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),P=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),O=Symbol.iterator;function L(De){return De===null||typeof De!="object"?null:(De=O&&De[O]||De["@@iterator"],typeof De=="function"?De:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,ee={};function X(De,wt,Zt){this.props=De,this.context=wt,this.refs=ee,this.updater=Zt||F}X.prototype.isReactComponent={},X.prototype.setState=function(De,wt){if(typeof De!="object"&&typeof De!="function"&&De!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,De,wt,"setState")},X.prototype.forceUpdate=function(De){this.updater.enqueueForceUpdate(this,De,"forceUpdate")};function W(){}W.prototype=X.prototype;function pe(De,wt,Zt){this.props=De,this.context=wt,this.refs=ee,this.updater=Zt||F}var me=pe.prototype=new W;me.constructor=pe,G(me,X.prototype),me.isPureReactComponent=!0;var _e=Array.isArray,Se={H:null,A:null,T:null,S:null},ke=Object.prototype.hasOwnProperty;function nt(De,wt,Zt,Ht,zt,er){return Zt=er.ref,{$$typeof:i,type:De,key:wt,ref:Zt!==void 0?Zt:null,props:er}}function Ke(De,wt){return nt(De.type,wt,void 0,void 0,void 0,De.props)}function Ye(De){return typeof De=="object"&&De!==null&&De.$$typeof===i}function ht(De){var wt={"=":"=0",":":"=2"};return"$"+De.replace(/[=:]/g,function(Zt){return wt[Zt]})}var kt=/\/+/g;function sr(De,wt){return typeof De=="object"&&De!==null&&De.key!=null?ht(""+De.key):wt.toString(36)}function ir(){}function Xt(De){switch(De.status){case"fulfilled":return De.value;case"rejected":throw De.reason;default:switch(typeof De.status=="string"?De.then(ir,ir):(De.status="pending",De.then(function(wt){De.status==="pending"&&(De.status="fulfilled",De.value=wt)},function(wt){De.status==="pending"&&(De.status="rejected",De.reason=wt)})),De.status){case"fulfilled":return De.value;case"rejected":throw De.reason}}throw De}function or(De,wt,Zt,Ht,zt){var er=typeof De;(er==="undefined"||er==="boolean")&&(De=null);var nr=!1;if(De===null)nr=!0;else switch(er){case"bigint":case"string":case"number":nr=!0;break;case"object":switch(De.$$typeof){case i:case n:nr=!0;break;case k:return nr=De._init,or(nr(De._payload),wt,Zt,Ht,zt)}}if(nr)return zt=zt(De),nr=Ht===""?"."+sr(De,0):Ht,_e(zt)?(Zt="",nr!=null&&(Zt=nr.replace(kt,"$&/")+"/"),or(zt,wt,Zt,"",function(ti){return ti})):zt!=null&&(Ye(zt)&&(zt=Ke(zt,Zt+(zt.key==null||De&&De.key===zt.key?"":(""+zt.key).replace(kt,"$&/")+"/")+nr)),wt.push(zt)),1;nr=0;var Qr=Ht===""?".":Ht+":";if(_e(De))for(var br=0;br<De.length;br++)Ht=De[br],er=Qr+sr(Ht,br),nr+=or(Ht,wt,Zt,er,zt);else if(br=L(De),typeof br=="function")for(De=br.call(De),br=0;!(Ht=De.next()).done;)Ht=Ht.value,er=Qr+sr(Ht,br++),nr+=or(Ht,wt,Zt,er,zt);else if(er==="object"){if(typeof De.then=="function")return or(Xt(De),wt,Zt,Ht,zt);throw wt=String(De),Error("Objects are not valid as a React child (found: "+(wt==="[object Object]"?"object with keys {"+Object.keys(De).join(", ")+"}":wt)+"). If you meant to render a collection of children, use an array instead.")}return nr}function Ct(De,wt,Zt){if(De==null)return De;var Ht=[],zt=0;return or(De,Ht,"","",function(er){return wt.call(Zt,er,zt++)}),Ht}function Nt(De){if(De._status===-1){var wt=De._result;wt=wt(),wt.then(function(Zt){(De._status===0||De._status===-1)&&(De._status=1,De._result=Zt)},function(Zt){(De._status===0||De._status===-1)&&(De._status=2,De._result=Zt)}),De._status===-1&&(De._status=0,De._result=wt)}if(De._status===1)return De._result.default;throw De._result}var Rt=typeof reportError=="function"?reportError:function(De){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var wt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof De=="object"&&De!==null&&typeof De.message=="string"?String(De.message):String(De),error:De});if(!window.dispatchEvent(wt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",De);return}console.error(De)};function dr(){}return Fr.Children={map:Ct,forEach:function(De,wt,Zt){Ct(De,function(){wt.apply(this,arguments)},Zt)},count:function(De){var wt=0;return Ct(De,function(){wt++}),wt},toArray:function(De){return Ct(De,function(wt){return wt})||[]},only:function(De){if(!Ye(De))throw Error("React.Children.only expected to receive a single React element child.");return De}},Fr.Component=X,Fr.Fragment=d,Fr.Profiler=_,Fr.PureComponent=pe,Fr.StrictMode=p,Fr.Suspense=C,Fr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Se,Fr.act=function(){throw Error("act(...) is not supported in production builds of React.")},Fr.cache=function(De){return function(){return De.apply(null,arguments)}},Fr.cloneElement=function(De,wt,Zt){if(De==null)throw Error("The argument must be a React element, but you passed "+De+".");var Ht=G({},De.props),zt=De.key,er=void 0;if(wt!=null)for(nr in wt.ref!==void 0&&(er=void 0),wt.key!==void 0&&(zt=""+wt.key),wt)!ke.call(wt,nr)||nr==="key"||nr==="__self"||nr==="__source"||nr==="ref"&&wt.ref===void 0||(Ht[nr]=wt[nr]);var nr=arguments.length-2;if(nr===1)Ht.children=Zt;else if(1<nr){for(var Qr=Array(nr),br=0;br<nr;br++)Qr[br]=arguments[br+2];Ht.children=Qr}return nt(De.type,zt,void 0,void 0,er,Ht)},Fr.createContext=function(De){return De={$$typeof:y,_currentValue:De,_currentValue2:De,_threadCount:0,Provider:null,Consumer:null},De.Provider=De,De.Consumer={$$typeof:S,_context:De},De},Fr.createElement=function(De,wt,Zt){var Ht,zt={},er=null;if(wt!=null)for(Ht in wt.key!==void 0&&(er=""+wt.key),wt)ke.call(wt,Ht)&&Ht!=="key"&&Ht!=="__self"&&Ht!=="__source"&&(zt[Ht]=wt[Ht]);var nr=arguments.length-2;if(nr===1)zt.children=Zt;else if(1<nr){for(var Qr=Array(nr),br=0;br<nr;br++)Qr[br]=arguments[br+2];zt.children=Qr}if(De&&De.defaultProps)for(Ht in nr=De.defaultProps,nr)zt[Ht]===void 0&&(zt[Ht]=nr[Ht]);return nt(De,er,void 0,void 0,null,zt)},Fr.createRef=function(){return{current:null}},Fr.forwardRef=function(De){return{$$typeof:l,render:De}},Fr.isValidElement=Ye,Fr.lazy=function(De){return{$$typeof:k,_payload:{_status:-1,_result:De},_init:Nt}},Fr.memo=function(De,wt){return{$$typeof:P,type:De,compare:wt===void 0?null:wt}},Fr.startTransition=function(De){var wt=Se.T,Zt={};Se.T=Zt;try{var Ht=De(),zt=Se.S;zt!==null&&zt(Zt,Ht),typeof Ht=="object"&&Ht!==null&&typeof Ht.then=="function"&&Ht.then(dr,Rt)}catch(er){Rt(er)}finally{Se.T=wt}},Fr.unstable_useCacheRefresh=function(){return Se.H.useCacheRefresh()},Fr.use=function(De){return Se.H.use(De)},Fr.useActionState=function(De,wt,Zt){return Se.H.useActionState(De,wt,Zt)},Fr.useCallback=function(De,wt){return Se.H.useCallback(De,wt)},Fr.useContext=function(De){return Se.H.useContext(De)},Fr.useDebugValue=function(){},Fr.useDeferredValue=function(De,wt){return Se.H.useDeferredValue(De,wt)},Fr.useEffect=function(De,wt){return Se.H.useEffect(De,wt)},Fr.useId=function(){return Se.H.useId()},Fr.useImperativeHandle=function(De,wt,Zt){return Se.H.useImperativeHandle(De,wt,Zt)},Fr.useInsertionEffect=function(De,wt){return Se.H.useInsertionEffect(De,wt)},Fr.useLayoutEffect=function(De,wt){return Se.H.useLayoutEffect(De,wt)},Fr.useMemo=function(De,wt){return Se.H.useMemo(De,wt)},Fr.useOptimistic=function(De,wt){return Se.H.useOptimistic(De,wt)},Fr.useReducer=function(De,wt,Zt){return Se.H.useReducer(De,wt,Zt)},Fr.useRef=function(De){return Se.H.useRef(De)},Fr.useState=function(De){return Se.H.useState(De)},Fr.useSyncExternalStore=function(De,wt,Zt){return Se.H.useSyncExternalStore(De,wt,Zt)},Fr.useTransition=function(){return Se.H.useTransition()},Fr.version="19.0.0",Fr}var xx;function $_(){return xx||(xx=1,b0.exports=kM()),b0.exports}var se=$_();const Ud=bv(se);var w0={exports:{}},cm={},S0={exports:{}},T0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bx;function BM(){return bx||(bx=1,function(i){function n(Ct,Nt){var Rt=Ct.length;Ct.push(Nt);e:for(;0<Rt;){var dr=Rt-1>>>1,De=Ct[dr];if(0<_(De,Nt))Ct[dr]=Nt,Ct[Rt]=De,Rt=dr;else break e}}function d(Ct){return Ct.length===0?null:Ct[0]}function p(Ct){if(Ct.length===0)return null;var Nt=Ct[0],Rt=Ct.pop();if(Rt!==Nt){Ct[0]=Rt;e:for(var dr=0,De=Ct.length,wt=De>>>1;dr<wt;){var Zt=2*(dr+1)-1,Ht=Ct[Zt],zt=Zt+1,er=Ct[zt];if(0>_(Ht,Rt))zt<De&&0>_(er,Ht)?(Ct[dr]=er,Ct[zt]=Rt,dr=zt):(Ct[dr]=Ht,Ct[Zt]=Rt,dr=Zt);else if(zt<De&&0>_(er,Rt))Ct[dr]=er,Ct[zt]=Rt,dr=zt;else break e}}return Nt}function _(Ct,Nt){var Rt=Ct.sortIndex-Nt.sortIndex;return Rt!==0?Rt:Ct.id-Nt.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var S=performance;i.unstable_now=function(){return S.now()}}else{var y=Date,l=y.now();i.unstable_now=function(){return y.now()-l}}var C=[],P=[],k=1,O=null,L=3,F=!1,G=!1,ee=!1,X=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate<"u"?setImmediate:null;function me(Ct){for(var Nt=d(P);Nt!==null;){if(Nt.callback===null)p(P);else if(Nt.startTime<=Ct)p(P),Nt.sortIndex=Nt.expirationTime,n(C,Nt);else break;Nt=d(P)}}function _e(Ct){if(ee=!1,me(Ct),!G)if(d(C)!==null)G=!0,Xt();else{var Nt=d(P);Nt!==null&&or(_e,Nt.startTime-Ct)}}var Se=!1,ke=-1,nt=5,Ke=-1;function Ye(){return!(i.unstable_now()-Ke<nt)}function ht(){if(Se){var Ct=i.unstable_now();Ke=Ct;var Nt=!0;try{e:{G=!1,ee&&(ee=!1,W(ke),ke=-1),F=!0;var Rt=L;try{t:{for(me(Ct),O=d(C);O!==null&&!(O.expirationTime>Ct&&Ye());){var dr=O.callback;if(typeof dr=="function"){O.callback=null,L=O.priorityLevel;var De=dr(O.expirationTime<=Ct);if(Ct=i.unstable_now(),typeof De=="function"){O.callback=De,me(Ct),Nt=!0;break t}O===d(C)&&p(C),me(Ct)}else p(C);O=d(C)}if(O!==null)Nt=!0;else{var wt=d(P);wt!==null&&or(_e,wt.startTime-Ct),Nt=!1}}break e}finally{O=null,L=Rt,F=!1}Nt=void 0}}finally{Nt?kt():Se=!1}}}var kt;if(typeof pe=="function")kt=function(){pe(ht)};else if(typeof MessageChannel<"u"){var sr=new MessageChannel,ir=sr.port2;sr.port1.onmessage=ht,kt=function(){ir.postMessage(null)}}else kt=function(){X(ht,0)};function Xt(){Se||(Se=!0,kt())}function or(Ct,Nt){ke=X(function(){Ct(i.unstable_now())},Nt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Ct){Ct.callback=null},i.unstable_continueExecution=function(){G||F||(G=!0,Xt())},i.unstable_forceFrameRate=function(Ct){0>Ct||125<Ct?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):nt=0<Ct?Math.floor(1e3/Ct):5},i.unstable_getCurrentPriorityLevel=function(){return L},i.unstable_getFirstCallbackNode=function(){return d(C)},i.unstable_next=function(Ct){switch(L){case 1:case 2:case 3:var Nt=3;break;default:Nt=L}var Rt=L;L=Nt;try{return Ct()}finally{L=Rt}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Ct,Nt){switch(Ct){case 1:case 2:case 3:case 4:case 5:break;default:Ct=3}var Rt=L;L=Ct;try{return Nt()}finally{L=Rt}},i.unstable_scheduleCallback=function(Ct,Nt,Rt){var dr=i.unstable_now();switch(typeof Rt=="object"&&Rt!==null?(Rt=Rt.delay,Rt=typeof Rt=="number"&&0<Rt?dr+Rt:dr):Rt=dr,Ct){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=Rt+De,Ct={id:k++,callback:Nt,priorityLevel:Ct,startTime:Rt,expirationTime:De,sortIndex:-1},Rt>dr?(Ct.sortIndex=Rt,n(P,Ct),d(C)===null&&Ct===d(P)&&(ee?(W(ke),ke=-1):ee=!0,or(_e,Rt-dr))):(Ct.sortIndex=De,n(C,Ct),G||F||(G=!0,Xt())),Ct},i.unstable_shouldYield=Ye,i.unstable_wrapCallback=function(Ct){var Nt=L;return function(){var Rt=L;L=Nt;try{return Ct.apply(this,arguments)}finally{L=Rt}}}}(T0)),T0}var wx;function OM(){return wx||(wx=1,S0.exports=BM()),S0.exports}var M0={exports:{}},Na={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx;function jM(){if(Sx)return Na;Sx=1;var i=$_();function n(C){var P="https://react.dev/errors/"+C;if(1<arguments.length){P+="?args[]="+encodeURIComponent(arguments[1]);for(var k=2;k<arguments.length;k++)P+="&args[]="+encodeURIComponent(arguments[k])}return"Minified React error #"+C+"; visit "+P+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(){}var p={d:{f:d,r:function(){throw Error(n(522))},D:d,C:d,L:d,m:d,X:d,S:d,M:d},p:0,findDOMNode:null},_=Symbol.for("react.portal");function S(C,P,k){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:O==null?null:""+O,children:C,containerInfo:P,implementation:k}}var y=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(C,P){if(C==="font")return"";if(typeof P=="string")return P==="use-credentials"?P:""}return Na.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=p,Na.createPortal=function(C,P){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!P||P.nodeType!==1&&P.nodeType!==9&&P.nodeType!==11)throw Error(n(299));return S(C,P,null,k)},Na.flushSync=function(C){var P=y.T,k=p.p;try{if(y.T=null,p.p=2,C)return C()}finally{y.T=P,p.p=k,p.d.f()}},Na.preconnect=function(C,P){typeof C=="string"&&(P?(P=P.crossOrigin,P=typeof P=="string"?P==="use-credentials"?P:"":void 0):P=null,p.d.C(C,P))},Na.prefetchDNS=function(C){typeof C=="string"&&p.d.D(C)},Na.preinit=function(C,P){if(typeof C=="string"&&P&&typeof P.as=="string"){var k=P.as,O=l(k,P.crossOrigin),L=typeof P.integrity=="string"?P.integrity:void 0,F=typeof P.fetchPriority=="string"?P.fetchPriority:void 0;k==="style"?p.d.S(C,typeof P.precedence=="string"?P.precedence:void 0,{crossOrigin:O,integrity:L,fetchPriority:F}):k==="script"&&p.d.X(C,{crossOrigin:O,integrity:L,fetchPriority:F,nonce:typeof P.nonce=="string"?P.nonce:void 0})}},Na.preinitModule=function(C,P){if(typeof C=="string")if(typeof P=="object"&&P!==null){if(P.as==null||P.as==="script"){var k=l(P.as,P.crossOrigin);p.d.M(C,{crossOrigin:k,integrity:typeof P.integrity=="string"?P.integrity:void 0,nonce:typeof P.nonce=="string"?P.nonce:void 0})}}else P==null&&p.d.M(C)},Na.preload=function(C,P){if(typeof C=="string"&&typeof P=="object"&&P!==null&&typeof P.as=="string"){var k=P.as,O=l(k,P.crossOrigin);p.d.L(C,k,{crossOrigin:O,integrity:typeof P.integrity=="string"?P.integrity:void 0,nonce:typeof P.nonce=="string"?P.nonce:void 0,type:typeof P.type=="string"?P.type:void 0,fetchPriority:typeof P.fetchPriority=="string"?P.fetchPriority:void 0,referrerPolicy:typeof P.referrerPolicy=="string"?P.referrerPolicy:void 0,imageSrcSet:typeof P.imageSrcSet=="string"?P.imageSrcSet:void 0,imageSizes:typeof P.imageSizes=="string"?P.imageSizes:void 0,media:typeof P.media=="string"?P.media:void 0})}},Na.preloadModule=function(C,P){if(typeof C=="string")if(P){var k=l(P.as,P.crossOrigin);p.d.m(C,{as:typeof P.as=="string"&&P.as!=="script"?P.as:void 0,crossOrigin:k,integrity:typeof P.integrity=="string"?P.integrity:void 0})}else p.d.m(C)},Na.requestFormReset=function(C){p.d.r(C)},Na.unstable_batchedUpdates=function(C,P){return C(P)},Na.useFormState=function(C,P,k){return y.H.useFormState(C,P,k)},Na.useFormStatus=function(){return y.H.useHostTransitionStatus()},Na.version="19.0.0",Na}var Tx;function C2(){if(Tx)return M0.exports;Tx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),M0.exports=jM(),M0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mx;function NM(){if(Mx)return cm;Mx=1;var i=OM(),n=$_(),d=C2();function p(r){var u="https://react.dev/errors/"+r;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+r+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function _(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}var S=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),F=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),_e=Symbol.for("react.memo_cache_sentinel"),Se=Symbol.iterator;function ke(r){return r===null||typeof r!="object"?null:(r=Se&&r[Se]||r["@@iterator"],typeof r=="function"?r:null)}var nt=Symbol.for("react.client.reference");function Ke(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===nt?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case C:return"Fragment";case l:return"Portal";case k:return"Profiler";case P:return"StrictMode";case ee:return"Suspense";case X:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case F:return(r.displayName||"Context")+".Provider";case L:return(r._context.displayName||"Context")+".Consumer";case G:var u=r.render;return r=r.displayName,r||(r=u.displayName||u.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case W:return u=r.displayName||null,u!==null?u:Ke(r.type)||"Memo";case pe:u=r._payload,r=r._init;try{return Ke(r(u))}catch{}}return null}var Ye=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ht=Object.assign,kt,sr;function ir(r){if(kt===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);kt=u&&u[1]||"",sr=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+kt+r+sr}var Xt=!1;function or(r,u){if(!r||Xt)return"";Xt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(u){var Mt=function(){throw Error()};if(Object.defineProperty(Mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Mt,[])}catch(lt){var et=lt}Reflect.construct(r,[],Mt)}else{try{Mt.call()}catch(lt){et=lt}r.call(Mt.prototype)}}else{try{throw Error()}catch(lt){et=lt}(Mt=r())&&typeof Mt.catch=="function"&&Mt.catch(function(){})}}catch(lt){if(lt&&et&&typeof lt.stack=="string")return[lt.stack,et.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var z=b.DetermineComponentFrameRoot(),Y=z[0],ue=z[1];if(Y&&ue){var Me=Y.split(`
`),Ne=ue.split(`
`);for(E=b=0;b<Me.length&&!Me[b].includes("DetermineComponentFrameRoot");)b++;for(;E<Ne.length&&!Ne[E].includes("DetermineComponentFrameRoot");)E++;if(b===Me.length||E===Ne.length)for(b=Me.length-1,E=Ne.length-1;1<=b&&0<=E&&Me[b]!==Ne[E];)E--;for(;1<=b&&0<=E;b--,E--)if(Me[b]!==Ne[E]){if(b!==1||E!==1)do if(b--,E--,0>E||Me[b]!==Ne[E]){var ft=`
`+Me[b].replace(" at new "," at ");return r.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",r.displayName)),ft}while(1<=b&&0<=E);break}}}finally{Xt=!1,Error.prepareStackTrace=f}return(f=r?r.displayName||r.name:"")?ir(f):""}function Ct(r){switch(r.tag){case 26:case 27:case 5:return ir(r.type);case 16:return ir("Lazy");case 13:return ir("Suspense");case 19:return ir("SuspenseList");case 0:case 15:return r=or(r.type,!1),r;case 11:return r=or(r.type.render,!1),r;case 1:return r=or(r.type,!0),r;default:return""}}function Nt(r){try{var u="";do u+=Ct(r),r=r.return;while(r);return u}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Rt(r){var u=r,f=r;if(r.alternate)for(;u.return;)u=u.return;else{r=u;do u=r,(u.flags&4098)!==0&&(f=u.return),r=u.return;while(r)}return u.tag===3?f:null}function dr(r){if(r.tag===13){var u=r.memoizedState;if(u===null&&(r=r.alternate,r!==null&&(u=r.memoizedState)),u!==null)return u.dehydrated}return null}function De(r){if(Rt(r)!==r)throw Error(p(188))}function wt(r){var u=r.alternate;if(!u){if(u=Rt(r),u===null)throw Error(p(188));return u!==r?null:r}for(var f=r,b=u;;){var E=f.return;if(E===null)break;var z=E.alternate;if(z===null){if(b=E.return,b!==null){f=b;continue}break}if(E.child===z.child){for(z=E.child;z;){if(z===f)return De(E),r;if(z===b)return De(E),u;z=z.sibling}throw Error(p(188))}if(f.return!==b.return)f=E,b=z;else{for(var Y=!1,ue=E.child;ue;){if(ue===f){Y=!0,f=E,b=z;break}if(ue===b){Y=!0,b=E,f=z;break}ue=ue.sibling}if(!Y){for(ue=z.child;ue;){if(ue===f){Y=!0,f=z,b=E;break}if(ue===b){Y=!0,b=z,f=E;break}ue=ue.sibling}if(!Y)throw Error(p(189))}}if(f.alternate!==b)throw Error(p(190))}if(f.tag!==3)throw Error(p(188));return f.stateNode.current===f?r:u}function Zt(r){var u=r.tag;if(u===5||u===26||u===27||u===6)return r;for(r=r.child;r!==null;){if(u=Zt(r),u!==null)return u;r=r.sibling}return null}var Ht=Array.isArray,zt=d.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,er={pending:!1,data:null,method:null,action:null},nr=[],Qr=-1;function br(r){return{current:r}}function ti(r){0>Qr||(r.current=nr[Qr],nr[Qr]=null,Qr--)}function Ur(r,u){Qr++,nr[Qr]=r.current,r.current=u}var li=br(null),Di=br(null),zr=br(null),pr=br(null);function Ki(r,u){switch(Ur(zr,u),Ur(Di,r),Ur(li,null),r=u.nodeType,r){case 9:case 11:u=(u=u.documentElement)&&(u=u.namespaceURI)?Jp(u):0;break;default:if(r=r===8?u.parentNode:u,u=r.tagName,r=r.namespaceURI)r=Jp(r),u=_g(r,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}ti(li),Ur(li,u)}function Fi(){ti(li),ti(Di),ti(zr)}function Yi(r){r.memoizedState!==null&&Ur(pr,r);var u=li.current,f=_g(u,r.type);u!==f&&(Ur(Di,r),Ur(li,f))}function we(r){Di.current===r&&(ti(li),ti(Di)),pr.current===r&&(ti(pr),ye._currentValue=er)}var Re=Object.prototype.hasOwnProperty,We=i.unstable_scheduleCallback,vt=i.unstable_cancelCallback,xt=i.unstable_shouldYield,Et=i.unstable_requestPaint,Ut=i.unstable_now,ur=i.unstable_getCurrentPriorityLevel,_r=i.unstable_ImmediatePriority,qr=i.unstable_UserBlockingPriority,Pi=i.unstable_NormalPriority,Ui=i.unstable_LowPriority,zi=i.unstable_IdlePriority,Rn=i.log,In=i.unstable_setDisableYieldValue,ni=null,ri=null;function je(r){if(ri&&typeof ri.onCommitFiberRoot=="function")try{ri.onCommitFiberRoot(ni,r,void 0,(r.current.flags&128)===128)}catch{}}function ne(r){if(typeof Rn=="function"&&In(r),ri&&typeof ri.setStrictMode=="function")try{ri.setStrictMode(ni,r)}catch{}}var ae=Math.clz32?Math.clz32:oe,he=Math.log,be=Math.LN2;function oe(r){return r>>>=0,r===0?32:31-(he(r)/be|0)|0}var Be=128,Ve=4194304;function Ce(r){var u=r&42;if(u!==0)return u;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ue(r,u){var f=r.pendingLanes;if(f===0)return 0;var b=0,E=r.suspendedLanes,z=r.pingedLanes,Y=r.warmLanes;r=r.finishedLanes!==0;var ue=f&134217727;return ue!==0?(f=ue&~E,f!==0?b=Ce(f):(z&=ue,z!==0?b=Ce(z):r||(Y=ue&~Y,Y!==0&&(b=Ce(Y))))):(ue=f&~E,ue!==0?b=Ce(ue):z!==0?b=Ce(z):r||(Y=f&~Y,Y!==0&&(b=Ce(Y)))),b===0?0:u!==0&&u!==b&&(u&E)===0&&(E=b&-b,Y=u&-u,E>=Y||E===32&&(Y&4194176)!==0)?u:b}function qe(r,u){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&u)===0}function Fe(r,u){switch(r){case 1:case 2:case 4:case 8:return u+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dt(){var r=Be;return Be<<=1,(Be&4194176)===0&&(Be=128),r}function Pt(){var r=Ve;return Ve<<=1,(Ve&62914560)===0&&(Ve=4194304),r}function At(r){for(var u=[],f=0;31>f;f++)u.push(r);return u}function Ft(r,u){r.pendingLanes|=u,u!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function lr(r,u,f,b,E,z){var Y=r.pendingLanes;r.pendingLanes=f,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=f,r.entangledLanes&=f,r.errorRecoveryDisabledLanes&=f,r.shellSuspendCounter=0;var ue=r.entanglements,Me=r.expirationTimes,Ne=r.hiddenUpdates;for(f=Y&~f;0<f;){var ft=31-ae(f),Mt=1<<ft;ue[ft]=0,Me[ft]=-1;var et=Ne[ft];if(et!==null)for(Ne[ft]=null,ft=0;ft<et.length;ft++){var lt=et[ft];lt!==null&&(lt.lane&=-536870913)}f&=~Mt}b!==0&&Je(r,b,0),z!==0&&E===0&&r.tag!==0&&(r.suspendedLanes|=z&~(Y&~u))}function Je(r,u,f){r.pendingLanes|=u,r.suspendedLanes&=~u;var b=31-ae(u);r.entangledLanes|=u,r.entanglements[b]=r.entanglements[b]|1073741824|f&4194218}function Wt(r,u){var f=r.entangledLanes|=u;for(r=r.entanglements;f;){var b=31-ae(f),E=1<<b;E&u|r[b]&u&&(r[b]|=u),f&=~E}}function vr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Vr(){var r=zt.p;return r!==0?r:(r=window.event,r===void 0?32:Yt(r.type))}function Er(r,u){var f=zt.p;try{return zt.p=r,u()}finally{zt.p=f}}var tt=Math.random().toString(36).slice(2),yt="__reactFiber$"+tt,Lt="__reactProps$"+tt,Hr="__reactContainer$"+tt,Vi="__reactEvents$"+tt,si="__reactListeners$"+tt,ar="__reactHandles$"+tt,Za="__reactResources$"+tt,_n="__reactMarker$"+tt;function qa(r){delete r[yt],delete r[Lt],delete r[Vi],delete r[si],delete r[ar]}function $i(r){var u=r[yt];if(u)return u;for(var f=r.parentNode;f;){if(u=f[Hr]||f[yt]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(r=kn(r);r!==null;){if(f=r[yt])return f;r=kn(r)}return u}r=f,f=r.parentNode}return null}function sa(r){if(r=r[yt]||r[Hr]){var u=r.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return r}return null}function bi(r){var u=r.tag;if(u===5||u===26||u===27||u===6)return r.stateNode;throw Error(p(33))}function Rr(r){var u=r[Za];return u||(u=r[Za]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function ut(r){r[_n]=!0}var io=new Set,Bo={};function wr(r,u){Li(r,u),Li(r+"Capture",u)}function Li(r,u){for(Bo[r]=u,r=0;r<u.length;r++)io.add(u[r])}var vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ds=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),no={},oa={};function ao(r){return Re.call(oa,r)?!0:Re.call(no,r)?!1:Ds.test(r)?oa[r]=!0:(no[r]=!0,!1)}function wc(r,u,f){if(ao(u))if(f===null)r.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":r.removeAttribute(u);return;case"boolean":var b=u.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){r.removeAttribute(u);return}}r.setAttribute(u,""+f)}}function Sc(r,u,f){if(f===null)r.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttribute(u,""+f)}}function zs(r,u,f,b){if(b===null)r.removeAttribute(f);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(f);return}r.setAttributeNS(u,f,""+b)}}function fa(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ih(r){var u=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Dh(r){var u=Ih(r)?"checked":"value",f=Object.getOwnPropertyDescriptor(r.constructor.prototype,u),b=""+r[u];if(!r.hasOwnProperty(u)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var E=f.get,z=f.set;return Object.defineProperty(r,u,{configurable:!0,get:function(){return E.call(this)},set:function(Y){b=""+Y,z.call(this,Y)}}),Object.defineProperty(r,u,{enumerable:f.enumerable}),{getValue:function(){return b},setValue:function(Y){b=""+Y},stopTracking:function(){r._valueTracker=null,delete r[u]}}}}function Pl(r){r._valueTracker||(r._valueTracker=Dh(r))}function Tc(r){if(!r)return!1;var u=r._valueTracker;if(!u)return!0;var f=u.getValue(),b="";return r&&(b=Ih(r)?r.checked?"true":"false":r.value),r=b,r!==f?(u.setValue(r),!0):!1}function gs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var zh=/[\n"\\]/g;function Yn(r){return r.replace(zh,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function so(r,u,f,b,E,z,Y,ue){r.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?r.type=Y:r.removeAttribute("type"),u!=null?Y==="number"?(u===0&&r.value===""||r.value!=u)&&(r.value=""+fa(u)):r.value!==""+fa(u)&&(r.value=""+fa(u)):Y!=="submit"&&Y!=="reset"||r.removeAttribute("value"),u!=null?Mc(r,Y,fa(u)):f!=null?Mc(r,Y,fa(f)):b!=null&&r.removeAttribute("value"),E==null&&z!=null&&(r.defaultChecked=!!z),E!=null&&(r.checked=E&&typeof E!="function"&&typeof E!="symbol"),ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?r.name=""+fa(ue):r.removeAttribute("name")}function Oo(r,u,f,b,E,z,Y,ue){if(z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(r.type=z),u!=null||f!=null){if(!(z!=="submit"&&z!=="reset"||u!=null))return;f=f!=null?""+fa(f):"",u=u!=null?""+fa(u):f,ue||u===r.value||(r.value=u),r.defaultValue=u}b=b??E,b=typeof b!="function"&&typeof b!="symbol"&&!!b,r.checked=ue?r.checked:!!b,r.defaultChecked=!!b,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(r.name=Y)}function Mc(r,u,f){u==="number"&&gs(r.ownerDocument)===r||r.defaultValue===""+f||(r.defaultValue=""+f)}function Rl(r,u,f,b){if(r=r.options,u){u={};for(var E=0;E<f.length;E++)u["$"+f[E]]=!0;for(f=0;f<r.length;f++)E=u.hasOwnProperty("$"+r[f].value),r[f].selected!==E&&(r[f].selected=E),E&&b&&(r[f].defaultSelected=!0)}else{for(f=""+fa(f),u=null,E=0;E<r.length;E++){if(r[E].value===f){r[E].selected=!0,b&&(r[E].defaultSelected=!0);return}u!==null||r[E].disabled||(u=r[E])}u!==null&&(u.selected=!0)}}function ys(r,u,f){if(u!=null&&(u=""+fa(u),u!==r.value&&(r.value=u),f==null)){r.defaultValue!==u&&(r.defaultValue=u);return}r.defaultValue=f!=null?""+fa(f):""}function jo(r,u,f,b){if(u==null){if(b!=null){if(f!=null)throw Error(p(92));if(Ht(b)){if(1<b.length)throw Error(p(93));b=b[0]}f=b}f==null&&(f=""),u=f}f=fa(u),r.defaultValue=f,b=r.textContent,b===f&&b!==""&&b!==null&&(r.value=b)}function cr(r,u){if(u){var f=r.firstChild;if(f&&f===r.lastChild&&f.nodeType===3){f.nodeValue=u;return}}r.textContent=u}var Or=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function No(r,u,f){var b=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?b?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="":b?r.setProperty(u,f):typeof f!="number"||f===0||Or.has(u)?u==="float"?r.cssFloat=f:r[u]=(""+f).trim():r[u]=f+"px"}function Ga(r,u,f){if(u!=null&&typeof u!="object")throw Error(p(62));if(r=r.style,f!=null){for(var b in f)!f.hasOwnProperty(b)||u!=null&&u.hasOwnProperty(b)||(b.indexOf("--")===0?r.setProperty(b,""):b==="float"?r.cssFloat="":r[b]="");for(var E in u)b=u[E],u.hasOwnProperty(E)&&f[E]!==b&&No(r,E,b)}else for(var z in u)u.hasOwnProperty(z)&&No(r,z,u[z])}function jn(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ki=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oo(r){return ki.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var cn=null;function Xn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var en=null,pa=null;function Il(r){var u=sa(r);if(u&&(r=u.stateNode)){var f=r[Lt]||null;e:switch(r=u.stateNode,u.type){case"input":if(so(r,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=r;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Yn(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var b=f[u];if(b!==r&&b.form===r.form){var E=b[Lt]||null;if(!E)throw Error(p(90));so(b,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(u=0;u<f.length;u++)b=f[u],b.form===r.form&&Tc(b)}break e;case"textarea":ys(r,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&Rl(r,!!f.multiple,u,!1)}}}var wi=!1;function Ha(r,u,f){if(wi)return r(u,f);wi=!0;try{var b=r(u);return b}finally{if(wi=!1,(en!==null||pa!==null)&&(cc(),en&&(u=en,r=pa,pa=en=null,Il(u),r)))for(u=0;u<r.length;u++)Il(r[u])}}function wa(r,u){var f=r.stateNode;if(f===null)return null;var b=f[Lt]||null;if(b===null)return null;f=b[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(r=r.type,b=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!b;break e;default:r=!1}if(r)return null;if(f&&typeof f!="function")throw Error(p(231,u,typeof f));return f}var Fo=!1;if(vn)try{var Fn={};Object.defineProperty(Fn,"passive",{get:function(){Fo=!0}}),window.addEventListener("test",Fn,Fn),window.removeEventListener("test",Fn,Fn)}catch{Fo=!1}var Sa=null,Wr=null,Dl=null;function $r(){if(Dl)return Dl;var r,u=Wr,f=u.length,b,E="value"in Sa?Sa.value:Sa.textContent,z=E.length;for(r=0;r<f&&u[r]===E[r];r++);var Y=f-r;for(b=1;b<=Y&&u[f-b]===E[z-b];b++);return Dl=E.slice(r,1<b?1-b:void 0)}function hr(r){var u=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&u===13&&(r=13)):r=u,r===10&&(r=13),32<=r||r===13?r:0}function Ls(){return!0}function Lr(){return!1}function xn(r){function u(f,b,E,z,Y){this._reactName=f,this._targetInst=E,this.type=b,this.nativeEvent=z,this.target=Y,this.currentTarget=null;for(var ue in r)r.hasOwnProperty(ue)&&(f=r[ue],this[ue]=f?f(z):z[ue]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?Ls:Lr,this.isPropagationStopped=Lr,this}return ht(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ls)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ls)},persist:function(){},isPersistent:Ls}),u}var Dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ks=xn(Dn),lo=ht({},Dn,{view:0,detail:0}),Ac=xn(lo),uo,Uo,Bs,Eu=ht({},lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kl,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Bs&&(Bs&&r.type==="mousemove"?(uo=r.screenX-Bs.screenX,Uo=r.screenY-Bs.screenY):Uo=uo=0,Bs=r),uo)},movementY:function(r){return"movementY"in r?r.movementY:Uo}}),Pu=xn(Eu),zl=ht({},Eu,{dataTransfer:0}),Un=xn(zl),Cc=ht({},lo,{relatedTarget:0}),Vn=xn(Cc),Ll=ht({},Dn,{animationName:0,elapsedTime:0,pseudoElement:0}),hi=xn(Ll),Ru=ht({},Dn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ec=xn(Ru),Lh=ht({},Dn,{data:0}),Vo=xn(Lh),Pc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rc(r){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(r):(r=dp[r])?!!u[r]:!1}function kl(){return Rc}var Wa=ht({},lo,{key:function(r){if(r.key){var u=Pc[r.key]||r.key;if(u!=="Unidentified")return u}return r.type==="keypress"?(r=hr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?kh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kl,charCode:function(r){return r.type==="keypress"?hr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?hr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Iu=xn(Wa),Bl=ht({},Eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Du=xn(Bl),zu=ht({},lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kl}),Bh=xn(zu),_s=ht({},Dn,{propertyName:0,elapsedTime:0,pseudoElement:0}),fp=xn(_s),Oh=ht({},Eu,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),co=xn(Oh),Lu=ht({},Dn,{newState:0,oldState:0}),Gd=xn(Lu),ku=[9,13,27,32],jh=vn&&"CompositionEvent"in window,Ka=null;vn&&"documentMode"in document&&(Ka=document.documentMode);var pp=vn&&"TextEvent"in window&&!Ka,Nh=vn&&(!jh||Ka&&8<Ka&&11>=Ka),Hd=" ",Fh=!1;function Ic(r,u){switch(r){case"keyup":return ku.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dc(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ho=!1;function Uh(r,u){switch(r){case"compositionend":return Dc(u);case"keypress":return u.which!==32?null:(Fh=!0,Hd);case"textInput":return r=u.data,r===Hd&&Fh?null:r;default:return null}}function Wd(r,u){if(ho)return r==="compositionend"||!jh&&Ic(r,u)?(r=$r(),Dl=Wr=Sa=null,ho=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Nh&&u.locale!=="ko"?null:u.data;default:return null}}var $o={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vh(r){var u=r&&r.nodeName&&r.nodeName.toLowerCase();return u==="input"?!!$o[r.type]:u==="textarea"}function Bu(r,u,f,b){en?pa?pa.push(b):pa=[b]:en=b,u=Td(u,"onChange"),0<u.length&&(f=new ks("onChange","change",null,f,b),r.push({event:f,listeners:u}))}var Os=null,Ou=null;function zc(r){Kp(r,0)}function ju(r){var u=bi(r);if(Tc(u))return r}function $h(r,u){if(r==="change")return u}var Zh=!1;if(vn){var Lc;if(vn){var Nu="oninput"in document;if(!Nu){var Fu=document.createElement("div");Fu.setAttribute("oninput","return;"),Nu=typeof Fu.oninput=="function"}Lc=Nu}else Lc=!1;Zh=Lc&&(!document.documentMode||9<document.documentMode)}function qh(){Os&&(Os.detachEvent("onpropertychange",Uu),Ou=Os=null)}function Uu(r){if(r.propertyName==="value"&&ju(Ou)){var u=[];Bu(u,Ou,r,Xn(r)),Ha(zc,u)}}function js(r,u,f){r==="focusin"?(qh(),Os=u,Ou=f,Os.attachEvent("onpropertychange",Uu)):r==="focusout"&&qh()}function kc(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ju(Ou)}function Gh(r,u){if(r==="click")return ju(u)}function Hh(r,u){if(r==="input"||r==="change")return ju(u)}function Kd(r,u){return r===u&&(r!==0||1/r===1/u)||r!==r&&u!==u}var Qn=typeof Object.is=="function"?Object.is:Kd;function Sr(r,u){if(Qn(r,u))return!0;if(typeof r!="object"||r===null||typeof u!="object"||u===null)return!1;var f=Object.keys(r),b=Object.keys(u);if(f.length!==b.length)return!1;for(b=0;b<f.length;b++){var E=f[b];if(!Re.call(u,E)||!Qn(r[E],u[E]))return!1}return!0}function Bc(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Yd(r,u){var f=Bc(r);r=0;for(var b;f;){if(f.nodeType===3){if(b=r+f.textContent.length,r<=u&&b>=u)return{node:f,offset:u-r};r=b}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Bc(f)}}function Xd(r,u){return r&&u?r===u?!0:r&&r.nodeType===3?!1:u&&u.nodeType===3?Xd(r,u.parentNode):"contains"in r?r.contains(u):r.compareDocumentPosition?!!(r.compareDocumentPosition(u)&16):!1:!1}function Qd(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var u=gs(r.document);u instanceof r.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)r=u.contentWindow;else break;u=gs(r.document)}return u}function Wh(r){var u=r&&r.nodeName&&r.nodeName.toLowerCase();return u&&(u==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||u==="textarea"||r.contentEditable==="true")}function Jd(r,u){var f=Qd(u);u=r.focusedElem;var b=r.selectionRange;if(f!==u&&u&&u.ownerDocument&&Xd(u.ownerDocument.documentElement,u)){if(b!==null&&Wh(u)){if(r=b.start,f=b.end,f===void 0&&(f=r),"selectionStart"in u)u.selectionStart=r,u.selectionEnd=Math.min(f,u.value.length);else if(f=(r=u.ownerDocument||document)&&r.defaultView||window,f.getSelection){f=f.getSelection();var E=u.textContent.length,z=Math.min(b.start,E);b=b.end===void 0?z:Math.min(b.end,E),!f.extend&&z>b&&(E=b,b=z,z=E),E=Yd(u,z);var Y=Yd(u,b);E&&Y&&(f.rangeCount!==1||f.anchorNode!==E.node||f.anchorOffset!==E.offset||f.focusNode!==Y.node||f.focusOffset!==Y.offset)&&(r=r.createRange(),r.setStart(E.node,E.offset),f.removeAllRanges(),z>b?(f.addRange(r),f.extend(Y.node,Y.offset)):(r.setEnd(Y.node,Y.offset),f.addRange(r)))}}for(r=[],f=u;f=f.parentNode;)f.nodeType===1&&r.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<r.length;u++)f=r[u],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var mp=vn&&"documentMode"in document&&11>=document.documentMode,Zo=null,Ol=null,fo=null,jl=!1;function Oc(r,u,f){var b=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;jl||Zo==null||Zo!==gs(b)||(b=Zo,"selectionStart"in b&&Wh(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),fo&&Sr(fo,b)||(fo=b,b=Td(Ol,"onSelect"),0<b.length&&(u=new ks("onSelect","select",null,u,f),r.push({event:u,listeners:b}),u.target=Zo)))}function ma(r,u){var f={};return f[r.toLowerCase()]=u.toLowerCase(),f["Webkit"+r]="webkit"+u,f["Moz"+r]="moz"+u,f}var Ya={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionrun:ma("Transition","TransitionRun"),transitionstart:ma("Transition","TransitionStart"),transitioncancel:ma("Transition","TransitionCancel"),transitionend:ma("Transition","TransitionEnd")},la={},Kh={};vn&&(Kh=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function po(r){if(la[r])return la[r];if(!Ya[r])return r;var u=Ya[r],f;for(f in u)if(u.hasOwnProperty(f)&&f in Kh)return la[r]=u[f];return r}var jc=po("animationend"),mo=po("animationiteration"),Vu=po("animationstart"),Nc=po("transitionrun"),$u=po("transitionstart"),Fc=po("transitioncancel"),Yh=po("transitionend"),qo=new Map,Go="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Ta(r,u){qo.set(r,u),wr(u,[r])}var ua=[],Pr=0,Nl=0;function Uc(){for(var r=Pr,u=Nl=Pr=0;u<r;){var f=ua[u];ua[u++]=null;var b=ua[u];ua[u++]=null;var E=ua[u];ua[u++]=null;var z=ua[u];if(ua[u++]=null,b!==null&&E!==null){var Y=b.pending;Y===null?E.next=E:(E.next=Y.next,Y.next=E),b.pending=E}z!==0&&ef(f,E,z)}}function Ho(r,u,f,b){ua[Pr++]=r,ua[Pr++]=u,ua[Pr++]=f,ua[Pr++]=b,Nl|=b,r.lanes|=b,r=r.alternate,r!==null&&(r.lanes|=b)}function Wo(r,u,f,b){return Ho(r,u,f,b),Fl(r)}function go(r,u){return Ho(r,null,null,u),Fl(r)}function ef(r,u,f){r.lanes|=f;var b=r.alternate;b!==null&&(b.lanes|=f);for(var E=!1,z=r.return;z!==null;)z.childLanes|=f,b=z.alternate,b!==null&&(b.childLanes|=f),z.tag===22&&(r=z.stateNode,r===null||r._visibility&1||(E=!0)),r=z,z=z.return;E&&u!==null&&r.tag===3&&(z=r.stateNode,E=31-ae(f),z=z.hiddenUpdates,r=z[E],r===null?z[E]=[u]:r.push(u),u.lane=f|536870912)}function Fl(r){if(50<vd)throw vd=0,Bp=null,Error(p(185));for(var u=r.return;u!==null;)r=u,u=r.return;return r.tag===3?r.stateNode:null}var Ul={},Vc=new WeakMap;function bn(r,u){if(typeof r=="object"&&r!==null){var f=Vc.get(r);return f!==void 0?f:(u={value:r,source:u,stack:Nt(u)},Vc.set(r,u),u)}return{value:r,source:u,stack:Nt(u)}}var vs=[],yo=0,Vl=null,Zu=0,Jn=[],ea=0,xs=null,bs=1,Xa="";function Ko(r,u){vs[yo++]=Zu,vs[yo++]=Vl,Vl=r,Zu=u}function $c(r,u,f){Jn[ea++]=bs,Jn[ea++]=Xa,Jn[ea++]=xs,xs=r;var b=bs;r=Xa;var E=32-ae(b)-1;b&=~(1<<E),f+=1;var z=32-ae(u)+E;if(30<z){var Y=E-E%5;z=(b&(1<<Y)-1).toString(32),b>>=Y,E-=Y,bs=1<<32-ae(u)+E|f<<E|b,Xa=z+r}else bs=1<<z|f<<E|b,Xa=r}function Yo(r){r.return!==null&&(Ko(r,1),$c(r,1,0))}function $l(r){for(;r===Vl;)Vl=vs[--yo],vs[yo]=null,Zu=vs[--yo],vs[yo]=null;for(;r===xs;)xs=Jn[--ea],Jn[ea]=null,Xa=Jn[--ea],Jn[ea]=null,bs=Jn[--ea],Jn[ea]=null}var zn=null,tn=null,jr=!1,ta=null,ga=!1,Zc=Error(p(519));function ui(r){var u=Error(p(418,""));throw Jo(bn(u,r)),Zc}function _o(r){var u=r.stateNode,f=r.type,b=r.memoizedProps;switch(u[yt]=r,u[Lt]=b,f){case"dialog":Xr("cancel",u),Xr("close",u);break;case"iframe":case"object":case"embed":Xr("load",u);break;case"video":case"audio":for(f=0;f<vh.length;f++)Xr(vh[f],u);break;case"source":Xr("error",u);break;case"img":case"image":case"link":Xr("error",u),Xr("load",u);break;case"details":Xr("toggle",u);break;case"input":Xr("invalid",u),Oo(u,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0),Pl(u);break;case"select":Xr("invalid",u);break;case"textarea":Xr("invalid",u),jo(u,b.value,b.defaultValue,b.children),Pl(u)}f=b.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||b.suppressHydrationWarning===!0||Xp(u.textContent,f)?(b.popover!=null&&(Xr("beforetoggle",u),Xr("toggle",u)),b.onScroll!=null&&Xr("scroll",u),b.onScrollEnd!=null&&Xr("scrollend",u),b.onClick!=null&&(u.onclick=Md),u=!0):u=!1,u||ui(r)}function ya(r){for(zn=r.return;zn;)switch(zn.tag){case 3:case 27:ga=!0;return;case 5:case 13:ga=!1;return;default:zn=zn.return}}function Xo(r){if(r!==zn)return!1;if(!jr)return ya(r),jr=!0,!1;var u=!1,f;if((f=r.tag!==3&&r.tag!==27)&&((f=r.tag===5)&&(f=r.type,f=!(f!=="form"&&f!=="button")||em(r.type,r.memoizedProps)),f=!f),f&&(u=!0),u&&tn&&ui(r),ya(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(p(317));e:{for(r=r.nextSibling,u=0;r;){if(r.nodeType===8)if(f=r.data,f==="/$"){if(u===0){tn=ha(r.nextSibling);break e}u--}else f!=="$"&&f!=="$!"&&f!=="$?"||u++;r=r.nextSibling}tn=null}}else tn=zn?ha(r.stateNode.nextSibling):null;return!0}function Qo(){tn=zn=null,jr=!1}function Jo(r){ta===null?ta=[r]:ta.push(r)}var Qa=Error(p(460)),Ns=Error(p(474)),qu={then:function(){}};function qc(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Zl(){}function Xh(r,u,f){switch(f=r[f],f===void 0?r.push(u):f!==u&&(u.then(Zl,Zl),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw r=u.reason,r===Qa?Error(p(483)):r;default:if(typeof u.status=="string")u.then(Zl,Zl);else{if(r=Ci,r!==null&&100<r.shellSuspendCounter)throw Error(p(482));r=u,r.status="pending",r.then(function(b){if(u.status==="pending"){var E=u;E.status="fulfilled",E.value=b}},function(b){if(u.status==="pending"){var E=u;E.status="rejected",E.reason=b}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw r=u.reason,r===Qa?Error(p(483)):r}throw el=u,Qa}}var el=null;function Gc(){if(el===null)throw Error(p(459));var r=el;return el=null,r}var $n=null,ql=0;function Gu(r){var u=ql;return ql+=1,$n===null&&($n=[]),Xh($n,r,u)}function Gl(r,u){u=u.props.ref,r.ref=u!==void 0?u:null}function Hu(r,u){throw u.$$typeof===S?Error(p(525)):(r=Object.prototype.toString.call(u),Error(p(31,r==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":r)))}function Qh(r){var u=r._init;return u(r._payload)}function Jh(r){function u(Ze,Oe){if(r){var Qe=Ze.deletions;Qe===null?(Ze.deletions=[Oe],Ze.flags|=16):Qe.push(Oe)}}function f(Ze,Oe){if(!r)return null;for(;Oe!==null;)u(Ze,Oe),Oe=Oe.sibling;return null}function b(Ze){for(var Oe=new Map;Ze!==null;)Ze.key!==null?Oe.set(Ze.key,Ze):Oe.set(Ze.index,Ze),Ze=Ze.sibling;return Oe}function E(Ze,Oe){return Ze=du(Ze,Oe),Ze.index=0,Ze.sibling=null,Ze}function z(Ze,Oe,Qe){return Ze.index=Qe,r?(Qe=Ze.alternate,Qe!==null?(Qe=Qe.index,Qe<Oe?(Ze.flags|=33554434,Oe):Qe):(Ze.flags|=33554434,Oe)):(Ze.flags|=1048576,Oe)}function Y(Ze){return r&&Ze.alternate===null&&(Ze.flags|=33554434),Ze}function ue(Ze,Oe,Qe,_t){return Oe===null||Oe.tag!==6?(Oe=Dp(Qe,Ze.mode,_t),Oe.return=Ze,Oe):(Oe=E(Oe,Qe),Oe.return=Ze,Oe)}function Me(Ze,Oe,Qe,_t){var Gt=Qe.type;return Gt===C?ft(Ze,Oe,Qe.props.children,_t,Qe.key):Oe!==null&&(Oe.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===pe&&Qh(Gt)===Oe.type)?(Oe=E(Oe,Qe.props),Gl(Oe,Qe),Oe.return=Ze,Oe):(Oe=fu(Qe.type,Qe.key,Qe.props,null,Ze.mode,_t),Gl(Oe,Qe),Oe.return=Ze,Oe)}function Ne(Ze,Oe,Qe,_t){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==Qe.containerInfo||Oe.stateNode.implementation!==Qe.implementation?(Oe=gf(Qe,Ze.mode,_t),Oe.return=Ze,Oe):(Oe=E(Oe,Qe.children||[]),Oe.return=Ze,Oe)}function ft(Ze,Oe,Qe,_t,Gt){return Oe===null||Oe.tag!==7?(Oe=pl(Qe,Ze.mode,_t,Gt),Oe.return=Ze,Oe):(Oe=E(Oe,Qe),Oe.return=Ze,Oe)}function Mt(Ze,Oe,Qe){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Oe=Dp(""+Oe,Ze.mode,Qe),Oe.return=Ze,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case y:return Qe=fu(Oe.type,Oe.key,Oe.props,null,Ze.mode,Qe),Gl(Qe,Oe),Qe.return=Ze,Qe;case l:return Oe=gf(Oe,Ze.mode,Qe),Oe.return=Ze,Oe;case pe:var _t=Oe._init;return Oe=_t(Oe._payload),Mt(Ze,Oe,Qe)}if(Ht(Oe)||ke(Oe))return Oe=pl(Oe,Ze.mode,Qe,null),Oe.return=Ze,Oe;if(typeof Oe.then=="function")return Mt(Ze,Gu(Oe),Qe);if(Oe.$$typeof===F)return Mt(Ze,nu(Ze,Oe),Qe);Hu(Ze,Oe)}return null}function et(Ze,Oe,Qe,_t){var Gt=Oe!==null?Oe.key:null;if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Gt!==null?null:ue(Ze,Oe,""+Qe,_t);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case y:return Qe.key===Gt?Me(Ze,Oe,Qe,_t):null;case l:return Qe.key===Gt?Ne(Ze,Oe,Qe,_t):null;case pe:return Gt=Qe._init,Qe=Gt(Qe._payload),et(Ze,Oe,Qe,_t)}if(Ht(Qe)||ke(Qe))return Gt!==null?null:ft(Ze,Oe,Qe,_t,null);if(typeof Qe.then=="function")return et(Ze,Oe,Gu(Qe),_t);if(Qe.$$typeof===F)return et(Ze,Oe,nu(Ze,Qe),_t);Hu(Ze,Qe)}return null}function lt(Ze,Oe,Qe,_t,Gt){if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return Ze=Ze.get(Qe)||null,ue(Oe,Ze,""+_t,Gt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case y:return Ze=Ze.get(_t.key===null?Qe:_t.key)||null,Me(Oe,Ze,_t,Gt);case l:return Ze=Ze.get(_t.key===null?Qe:_t.key)||null,Ne(Oe,Ze,_t,Gt);case pe:var Zr=_t._init;return _t=Zr(_t._payload),lt(Ze,Oe,Qe,_t,Gt)}if(Ht(_t)||ke(_t))return Ze=Ze.get(Qe)||null,ft(Oe,Ze,_t,Gt,null);if(typeof _t.then=="function")return lt(Ze,Oe,Qe,Gu(_t),Gt);if(_t.$$typeof===F)return lt(Ze,Oe,Qe,nu(Oe,_t),Gt);Hu(Oe,_t)}return null}function Qt(Ze,Oe,Qe,_t){for(var Gt=null,Zr=null,rr=Oe,Jt=Oe=0,mn=null;rr!==null&&Jt<Qe.length;Jt++){rr.index>Jt?(mn=rr,rr=null):mn=rr.sibling;var ii=et(Ze,rr,Qe[Jt],_t);if(ii===null){rr===null&&(rr=mn);break}r&&rr&&ii.alternate===null&&u(Ze,rr),Oe=z(ii,Oe,Jt),Zr===null?Gt=ii:Zr.sibling=ii,Zr=ii,rr=mn}if(Jt===Qe.length)return f(Ze,rr),jr&&Ko(Ze,Jt),Gt;if(rr===null){for(;Jt<Qe.length;Jt++)rr=Mt(Ze,Qe[Jt],_t),rr!==null&&(Oe=z(rr,Oe,Jt),Zr===null?Gt=rr:Zr.sibling=rr,Zr=rr);return jr&&Ko(Ze,Jt),Gt}for(rr=b(rr);Jt<Qe.length;Jt++)mn=lt(rr,Ze,Jt,Qe[Jt],_t),mn!==null&&(r&&mn.alternate!==null&&rr.delete(mn.key===null?Jt:mn.key),Oe=z(mn,Oe,Jt),Zr===null?Gt=mn:Zr.sibling=mn,Zr=mn);return r&&rr.forEach(function(bu){return u(Ze,bu)}),jr&&Ko(Ze,Jt),Gt}function xr(Ze,Oe,Qe,_t){if(Qe==null)throw Error(p(151));for(var Gt=null,Zr=null,rr=Oe,Jt=Oe=0,mn=null,ii=Qe.next();rr!==null&&!ii.done;Jt++,ii=Qe.next()){rr.index>Jt?(mn=rr,rr=null):mn=rr.sibling;var bu=et(Ze,rr,ii.value,_t);if(bu===null){rr===null&&(rr=mn);break}r&&rr&&bu.alternate===null&&u(Ze,rr),Oe=z(bu,Oe,Jt),Zr===null?Gt=bu:Zr.sibling=bu,Zr=bu,rr=mn}if(ii.done)return f(Ze,rr),jr&&Ko(Ze,Jt),Gt;if(rr===null){for(;!ii.done;Jt++,ii=Qe.next())ii=Mt(Ze,ii.value,_t),ii!==null&&(Oe=z(ii,Oe,Jt),Zr===null?Gt=ii:Zr.sibling=ii,Zr=ii);return jr&&Ko(Ze,Jt),Gt}for(rr=b(rr);!ii.done;Jt++,ii=Qe.next())ii=lt(rr,Ze,Jt,ii.value,_t),ii!==null&&(r&&ii.alternate!==null&&rr.delete(ii.key===null?Jt:ii.key),Oe=z(ii,Oe,Jt),Zr===null?Gt=ii:Zr.sibling=ii,Zr=ii);return r&&rr.forEach(function(v0){return u(Ze,v0)}),jr&&Ko(Ze,Jt),Gt}function ln(Ze,Oe,Qe,_t){if(typeof Qe=="object"&&Qe!==null&&Qe.type===C&&Qe.key===null&&(Qe=Qe.props.children),typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case y:e:{for(var Gt=Qe.key;Oe!==null;){if(Oe.key===Gt){if(Gt=Qe.type,Gt===C){if(Oe.tag===7){f(Ze,Oe.sibling),_t=E(Oe,Qe.props.children),_t.return=Ze,Ze=_t;break e}}else if(Oe.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===pe&&Qh(Gt)===Oe.type){f(Ze,Oe.sibling),_t=E(Oe,Qe.props),Gl(_t,Qe),_t.return=Ze,Ze=_t;break e}f(Ze,Oe);break}else u(Ze,Oe);Oe=Oe.sibling}Qe.type===C?(_t=pl(Qe.props.children,Ze.mode,_t,Qe.key),_t.return=Ze,Ze=_t):(_t=fu(Qe.type,Qe.key,Qe.props,null,Ze.mode,_t),Gl(_t,Qe),_t.return=Ze,Ze=_t)}return Y(Ze);case l:e:{for(Gt=Qe.key;Oe!==null;){if(Oe.key===Gt)if(Oe.tag===4&&Oe.stateNode.containerInfo===Qe.containerInfo&&Oe.stateNode.implementation===Qe.implementation){f(Ze,Oe.sibling),_t=E(Oe,Qe.children||[]),_t.return=Ze,Ze=_t;break e}else{f(Ze,Oe);break}else u(Ze,Oe);Oe=Oe.sibling}_t=gf(Qe,Ze.mode,_t),_t.return=Ze,Ze=_t}return Y(Ze);case pe:return Gt=Qe._init,Qe=Gt(Qe._payload),ln(Ze,Oe,Qe,_t)}if(Ht(Qe))return Qt(Ze,Oe,Qe,_t);if(ke(Qe)){if(Gt=ke(Qe),typeof Gt!="function")throw Error(p(150));return Qe=Gt.call(Qe),xr(Ze,Oe,Qe,_t)}if(typeof Qe.then=="function")return ln(Ze,Oe,Gu(Qe),_t);if(Qe.$$typeof===F)return ln(Ze,Oe,nu(Ze,Qe),_t);Hu(Ze,Qe)}return typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint"?(Qe=""+Qe,Oe!==null&&Oe.tag===6?(f(Ze,Oe.sibling),_t=E(Oe,Qe),_t.return=Ze,Ze=_t):(f(Ze,Oe),_t=Dp(Qe,Ze.mode,_t),_t.return=Ze,Ze=_t),Y(Ze)):f(Ze,Oe)}return function(Ze,Oe,Qe,_t){try{ql=0;var Gt=ln(Ze,Oe,Qe,_t);return $n=null,Gt}catch(rr){if(rr===Qa)throw rr;var Zr=os(29,rr,null,Ze.mode);return Zr.lanes=_t,Zr.return=Ze,Zr}finally{}}}var Ma=Jh(!0),Fs=Jh(!1),hn=br(null),wn=br(0);function Aa(r,u){r=Po,Ur(wn,r),Ur(hn,u),Po=r|u.baseLanes}function Hc(){Ur(wn,Po),Ur(hn,hn.current)}function Ca(){Po=wn.current,ti(hn),ti(wn)}var Xi=br(null),Ja=null;function ws(r){var u=r.alternate;Ur(di,di.current&1),Ur(Xi,r),Ja===null&&(u===null||hn.current!==null||u.memoizedState!==null)&&(Ja=r)}function tf(r){if(r.tag===22){if(Ur(di,di.current),Ur(Xi,r),Ja===null){var u=r.alternate;u!==null&&u.memoizedState!==null&&(Ja=r)}}else Ss()}function Ss(){Ur(di,di.current),Ur(Xi,Xi.current)}function Ts(r){ti(Xi),Ja===r&&(Ja=null),ti(di)}var di=br(0);function Ea(r){for(var u=r;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===r)break;for(;u.sibling===null;){if(u.return===null||u.return===r)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Bt=typeof AbortController<"u"?AbortController:function(){var r=[],u=this.signal={aborted:!1,addEventListener:function(f,b){r.push(b)}};this.abort=function(){u.aborted=!0,r.forEach(function(f){return f()})}},rf=i.unstable_scheduleCallback,ed=i.unstable_NormalPriority,Bi={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tl(){return{controller:new Bt,data:new Map,refCount:0}}function es(r){r.refCount--,r.refCount===0&&rf(ed,function(){r.controller.abort()})}var Us=null,Tr=0,Vs=0,rl=null;function Wc(r,u){if(Us===null){var f=Us=[];Tr=0,Vs=Tf(),rl={status:"pending",value:void 0,then:function(b){f.push(b)}}}return Tr++,u.then(Kc,Kc),u}function Kc(){if(--Tr===0&&Us!==null){rl!==null&&(rl.status="fulfilled");var r=Us;Us=null,Vs=0,rl=null;for(var u=0;u<r.length;u++)(0,r[u])()}}function nf(r,u){var f=[],b={status:"pending",value:null,reason:null,then:function(E){f.push(E)}};return r.then(function(){b.status="fulfilled",b.value=u;for(var E=0;E<f.length;E++)(0,f[E])(u)},function(E){for(b.status="rejected",b.reason=E,E=0;E<f.length;E++)(0,f[E])(void 0)}),b}var td=Ye.S;Ye.S=function(r,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&Wc(r,u),td!==null&&td(r,u)};var Ms=br(null);function Yc(){var r=Ms.current;return r!==null?r:Ci.pooledCache}function Wu(r,u){u===null?Ur(Ms,Ms.current):Ur(Ms,u.pool)}function Xc(){var r=Yc();return r===null?null:{parent:Bi._currentValue,pool:r}}var $s=0,Ir=null,Gr=null,mr=null,vo=!1,Zs=!1,qs=!1,xo=0,Hl=0,bo=null,As=0;function Ri(){throw Error(p(321))}function $t(r,u){if(u===null)return!1;for(var f=0;f<u.length&&f<r.length;f++)if(!Qn(r[f],u[f]))return!1;return!0}function Kt(r,u,f,b,E,z){return $s=z,Ir=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Ye.H=r===null||r.memoizedState===null?kr:Ti,qs=!1,z=f(b,E),qs=!1,Zs&&(z=Qc(u,f,b,E)),Wl(r),z}function Wl(r){Ye.H=Dr;var u=Gr!==null&&Gr.next!==null;if($s=0,mr=Gr=Ir=null,vo=!1,Hl=0,bo=null,u)throw Error(p(300));r===null||Mr||(r=r.dependencies,r!==null&&ah(r)&&(Mr=!0))}function Qc(r,u,f,b){Ir=r;var E=0;do{if(Zs&&(bo=null),Hl=0,Zs=!1,25<=E)throw Error(p(301));if(E+=1,mr=Gr=null,r.updateQueue!=null){var z=r.updateQueue;z.lastEffect=null,z.events=null,z.stores=null,z.memoCache!=null&&(z.memoCache.index=0)}Ye.H=Mi,z=u(f,b)}while(Zs);return z}function rd(){var r=Ye.H,u=r.useState()[0];return u=typeof u.then=="function"?Si(u):u,r=r.useState()[0],(Gr!==null?Gr.memoizedState:null)!==r&&(Ir.flags|=1024),u}function Zn(){var r=xo!==0;return xo=0,r}function Jc(r,u,f){u.updateQueue=r.updateQueue,u.flags&=-2053,r.lanes&=~f}function Pa(r){if(vo){for(r=r.memoizedState;r!==null;){var u=r.queue;u!==null&&(u.pending=null),r=r.next}vo=!1}$s=0,mr=Gr=Ir=null,Zs=!1,Hl=xo=0,bo=null}function dn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mr===null?Ir.memoizedState=mr=r:mr=mr.next=r,mr}function Ii(){if(Gr===null){var r=Ir.alternate;r=r!==null?r.memoizedState:null}else r=Gr.next;var u=mr===null?Ir.memoizedState:mr.next;if(u!==null)mr=u,Gr=r;else{if(r===null)throw Ir.alternate===null?Error(p(467)):Error(p(310));Gr=r,r={memoizedState:Gr.memoizedState,baseState:Gr.baseState,baseQueue:Gr.baseQueue,queue:Gr.queue,next:null},mr===null?Ir.memoizedState=mr=r:mr=mr.next=r}return mr}var yi;yi=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Si(r){var u=Hl;return Hl+=1,bo===null&&(bo=[]),r=Xh(bo,r,u),u=Ir,(mr===null?u.memoizedState:mr.next)===null&&(u=u.alternate,Ye.H=u===null||u.memoizedState===null?kr:Ti),r}function Kl(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Si(r);if(r.$$typeof===F)return Gn(r)}throw Error(p(438,String(r)))}function il(r){var u=null,f=Ir.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var b=Ir.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(u={data:b.data.map(function(E){return E.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=yi(),Ir.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(r),b=0;b<r;b++)f[b]=_e;return u.index++,f}function Ra(r,u){return typeof u=="function"?u(r):u}function Ia(r){var u=Ii();return Yl(u,Gr,r)}function Yl(r,u,f){var b=r.queue;if(b===null)throw Error(p(311));b.lastRenderedReducer=f;var E=r.baseQueue,z=b.pending;if(z!==null){if(E!==null){var Y=E.next;E.next=z.next,z.next=Y}u.baseQueue=E=z,b.pending=null}if(z=r.baseState,E===null)r.memoizedState=z;else{u=E.next;var ue=Y=null,Me=null,Ne=u,ft=!1;do{var Mt=Ne.lane&-536870913;if(Mt!==Ne.lane?(Jr&Mt)===Mt:($s&Mt)===Mt){var et=Ne.revertLane;if(et===0)Me!==null&&(Me=Me.next={lane:0,revertLane:0,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null}),Mt===Vs&&(ft=!0);else if(($s&et)===et){Ne=Ne.next,et===Vs&&(ft=!0);continue}else Mt={lane:0,revertLane:Ne.revertLane,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},Me===null?(ue=Me=Mt,Y=z):Me=Me.next=Mt,Ir.lanes|=et,pu|=et;Mt=Ne.action,qs&&f(z,Mt),z=Ne.hasEagerState?Ne.eagerState:f(z,Mt)}else et={lane:Mt,revertLane:Ne.revertLane,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},Me===null?(ue=Me=et,Y=z):Me=Me.next=et,Ir.lanes|=Mt,pu|=Mt;Ne=Ne.next}while(Ne!==null&&Ne!==u);if(Me===null?Y=z:Me.next=ue,!Qn(z,r.memoizedState)&&(Mr=!0,ft&&(f=rl,f!==null)))throw f;r.memoizedState=z,r.baseState=Y,r.baseQueue=Me,b.lastRenderedState=z}return E===null&&(b.lanes=0),[r.memoizedState,b.dispatch]}function nl(r){var u=Ii(),f=u.queue;if(f===null)throw Error(p(311));f.lastRenderedReducer=r;var b=f.dispatch,E=f.pending,z=u.memoizedState;if(E!==null){f.pending=null;var Y=E=E.next;do z=r(z,Y.action),Y=Y.next;while(Y!==E);Qn(z,u.memoizedState)||(Mr=!0),u.memoizedState=z,u.baseQueue===null&&(u.baseState=z),f.lastRenderedState=z}return[z,b]}function al(r,u,f){var b=Ir,E=Ii(),z=jr;if(z){if(f===void 0)throw Error(p(407));f=f()}else f=u();var Y=!Qn((Gr||E).memoizedState,f);if(Y&&(E.memoizedState=f,Mr=!0),E=E.queue,te(sl.bind(null,b,E,r),[r]),E.getSnapshot!==u||Y||mr!==null&&mr.memoizedState.tag&1){if(b.flags|=2048,D(9,eh.bind(null,b,E,f,u),{destroy:void 0},null),Ci===null)throw Error(p(349));z||($s&60)!==0||Xl(b,u,f)}return f}function Xl(r,u,f){r.flags|=16384,r={getSnapshot:u,value:f},u=Ir.updateQueue,u===null?(u=yi(),Ir.updateQueue=u,u.stores=[r]):(f=u.stores,f===null?u.stores=[r]:f.push(r))}function eh(r,u,f,b){u.value=f,u.getSnapshot=b,wo(u)&&th(r)}function sl(r,u,f){return f(function(){wo(u)&&th(r)})}function wo(r){var u=r.getSnapshot;r=r.value;try{var f=u();return!Qn(r,f)}catch{return!0}}function th(r){var u=go(r,2);u!==null&&na(u,r,2)}function Ql(r){var u=dn();if(typeof r=="function"){var f=r;if(r=f(),qs){ne(!0);try{f()}finally{ne(!1)}}}return u.memoizedState=u.baseState=r,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:r},u}function So(r,u,f,b){return r.baseState=f,Yl(r,Gr,typeof b=="function"?b:Ra)}function id(r,u,f,b,E){if(Kr(r))throw Error(p(485));if(r=u.action,r!==null){var z={payload:E,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){z.listeners.push(Y)}};Ye.T!==null?f(!0):z.isTransition=!1,b(z),f=u.pending,f===null?(z.next=u.pending=z,Ku(u,z)):(z.next=f.next,u.pending=f.next=z)}}function Ku(r,u){var f=u.action,b=u.payload,E=r.state;if(u.isTransition){var z=Ye.T,Y={};Ye.T=Y;try{var ue=f(E,b),Me=Ye.S;Me!==null&&Me(Y,ue),Yu(r,u,ue)}catch(Ne){v(r,u,Ne)}finally{Ye.T=z}}else try{z=f(E,b),Yu(r,u,z)}catch(Ne){v(r,u,Ne)}}function Yu(r,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(b){rh(r,u,b)},function(b){return v(r,u,b)}):rh(r,u,f)}function rh(r,u,f){u.status="fulfilled",u.value=f,e(u),r.state=f,u=r.pending,u!==null&&(f=u.next,f===u?r.pending=null:(f=f.next,u.next=f,Ku(r,f)))}function v(r,u,f){var b=r.pending;if(r.pending=null,b!==null){b=b.next;do u.status="rejected",u.reason=f,e(u),u=u.next;while(u!==b)}r.action=null}function e(r){r=r.listeners;for(var u=0;u<r.length;u++)(0,r[u])()}function a(r,u){return u}function h(r,u){if(jr){var f=Ci.formState;if(f!==null){e:{var b=Ir;if(jr){if(tn){t:{for(var E=tn,z=ga;E.nodeType!==8;){if(!z){E=null;break t}if(E=ha(E.nextSibling),E===null){E=null;break t}}z=E.data,E=z==="F!"||z==="F"?E:null}if(E){tn=ha(E.nextSibling),b=E.data==="F!";break e}}ui(b)}b=!1}b&&(u=f[0])}}return f=dn(),f.memoizedState=f.baseState=u,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:u},f.queue=b,f=gr.bind(null,Ir,b),b.dispatch=f,b=Ql(!1),z=fi.bind(null,Ir,!1,b.queue),b=dn(),E={state:u,dispatch:null,action:r,pending:null},b.queue=E,f=id.bind(null,Ir,E,z,f),E.dispatch=f,b.memoizedState=r,[u,f,!1]}function m(r){var u=Ii();return x(u,Gr,r)}function x(r,u,f){u=Yl(r,u,a)[0],r=Ia(Ra)[0],u=typeof u=="object"&&u!==null&&typeof u.then=="function"?Si(u):u;var b=Ii(),E=b.queue,z=E.dispatch;return f!==b.memoizedState&&(Ir.flags|=2048,D(9,M.bind(null,E,f),{destroy:void 0},null)),[u,z,r]}function M(r,u){r.action=u}function R(r){var u=Ii(),f=Gr;if(f!==null)return x(u,f,r);Ii(),u=u.memoizedState,f=Ii();var b=f.queue.dispatch;return f.memoizedState=r,[u,b,!1]}function D(r,u,f,b){return r={tag:r,create:u,inst:f,deps:b,next:null},u=Ir.updateQueue,u===null&&(u=yi(),Ir.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=r.next=r:(b=f.next,f.next=r,r.next=b,u.lastEffect=r),r}function j(){return Ii().memoizedState}function U(r,u,f,b){var E=dn();Ir.flags|=r,E.memoizedState=D(1|u,f,{destroy:void 0},b===void 0?null:b)}function $(r,u,f,b){var E=Ii();b=b===void 0?null:b;var z=E.memoizedState.inst;Gr!==null&&b!==null&&$t(b,Gr.memoizedState.deps)?E.memoizedState=D(u,f,z,b):(Ir.flags|=r,E.memoizedState=D(1|u,f,z,b))}function Z(r,u){U(8390656,8,r,u)}function te(r,u){$(2048,8,r,u)}function re(r,u){return $(4,2,r,u)}function fe(r,u){return $(4,4,r,u)}function de(r,u){if(typeof u=="function"){r=r();var f=u(r);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return r=r(),u.current=r,function(){u.current=null}}function ge(r,u,f){f=f!=null?f.concat([r]):null,$(4,4,de.bind(null,u,r),f)}function ve(){}function Ae(r,u){var f=Ii();u=u===void 0?null:u;var b=f.memoizedState;return u!==null&&$t(u,b[1])?b[0]:(f.memoizedState=[r,u],r)}function Ee(r,u){var f=Ii();u=u===void 0?null:u;var b=f.memoizedState;if(u!==null&&$t(u,b[1]))return b[0];if(b=r(),qs){ne(!0);try{r()}finally{ne(!1)}}return f.memoizedState=[b,u],b}function Pe(r,u,f){return f===void 0||($s&1073741824)!==0?r.memoizedState=u:(r.memoizedState=f,r=ca(),Ir.lanes|=r,pu|=r,f)}function Le(r,u,f,b){return Qn(f,u)?f:hn.current!==null?(r=Pe(r,f,b),Qn(r,u)||(Mr=!0),r):($s&42)===0?(Mr=!0,r.memoizedState=f):(r=ca(),Ir.lanes|=r,pu|=r,u)}function Ie(r,u,f,b,E){var z=zt.p;zt.p=z!==0&&8>z?z:8;var Y=Ye.T,ue={};Ye.T=ue,fi(r,!1,u,f);try{var Me=E(),Ne=Ye.S;if(Ne!==null&&Ne(ue,Me),Me!==null&&typeof Me=="object"&&typeof Me.then=="function"){var ft=nf(Me,b);tr(r,u,ft,Ba(r))}else tr(r,u,b,Ba(r))}catch(Mt){tr(r,u,{then:function(){},status:"rejected",reason:Mt},Ba())}finally{zt.p=z,Ye.T=Y}}function $e(){}function He(r,u,f,b){if(r.tag!==5)throw Error(p(476));var E=at(r).queue;Ie(r,E,u,er,f===null?$e:function(){return ot(r),f(b)})}function at(r){var u=r.memoizedState;if(u!==null)return u;u={memoizedState:er,baseState:er,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:er},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:f},next:null},r.memoizedState=u,r=r.alternate,r!==null&&(r.memoizedState=u),u}function ot(r){var u=at(r).next.queue;tr(r,u,{},Ba())}function rt(){return Gn(ye)}function It(){return Ii().memoizedState}function Tt(){return Ii().memoizedState}function pt(r){for(var u=r.return;u!==null;){switch(u.tag){case 24:case 3:var f=Ba();r=cl(f);var b=au(u,r,f);b!==null&&(na(b,u,f),dd(b,u,f)),u={cache:tl()},r.payload=u;return}u=u.return}}function Vt(r,u,f){var b=Ba();f={lane:b,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},Kr(r)?_i(u,f):(f=Wo(r,u,f,b),f!==null&&(na(f,r,b),pi(f,u,b)))}function gr(r,u,f){var b=Ba();tr(r,u,f,b)}function tr(r,u,f,b){var E={lane:b,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(Kr(r))_i(u,E);else{var z=r.alternate;if(r.lanes===0&&(z===null||z.lanes===0)&&(z=u.lastRenderedReducer,z!==null))try{var Y=u.lastRenderedState,ue=z(Y,f);if(E.hasEagerState=!0,E.eagerState=ue,Qn(ue,Y))return Ho(r,u,E,0),Ci===null&&Uc(),!1}catch{}finally{}if(f=Wo(r,u,E,b),f!==null)return na(f,r,b),pi(f,u,b),!0}return!1}function fi(r,u,f,b){if(b={lane:2,revertLane:Tf(),action:b,hasEagerState:!1,eagerState:null,next:null},Kr(r)){if(u)throw Error(p(479))}else u=Wo(r,f,b,2),u!==null&&na(u,r,2)}function Kr(r){var u=r.alternate;return r===Ir||u!==null&&u===Ir}function _i(r,u){Zs=vo=!0;var f=r.pending;f===null?u.next=u:(u.next=f.next,f.next=u),r.pending=u}function pi(r,u,f){if((f&4194176)!==0){var b=u.lanes;b&=r.pendingLanes,f|=b,u.lanes=f,Wt(r,f)}}var Dr={readContext:Gn,use:Kl,useCallback:Ri,useContext:Ri,useEffect:Ri,useImperativeHandle:Ri,useLayoutEffect:Ri,useInsertionEffect:Ri,useMemo:Ri,useReducer:Ri,useRef:Ri,useState:Ri,useDebugValue:Ri,useDeferredValue:Ri,useTransition:Ri,useSyncExternalStore:Ri,useId:Ri};Dr.useCacheRefresh=Ri,Dr.useMemoCache=Ri,Dr.useHostTransitionStatus=Ri,Dr.useFormState=Ri,Dr.useActionState=Ri,Dr.useOptimistic=Ri;var kr={readContext:Gn,use:Kl,useCallback:function(r,u){return dn().memoizedState=[r,u===void 0?null:u],r},useContext:Gn,useEffect:Z,useImperativeHandle:function(r,u,f){f=f!=null?f.concat([r]):null,U(4194308,4,de.bind(null,u,r),f)},useLayoutEffect:function(r,u){return U(4194308,4,r,u)},useInsertionEffect:function(r,u){U(4,2,r,u)},useMemo:function(r,u){var f=dn();u=u===void 0?null:u;var b=r();if(qs){ne(!0);try{r()}finally{ne(!1)}}return f.memoizedState=[b,u],b},useReducer:function(r,u,f){var b=dn();if(f!==void 0){var E=f(u);if(qs){ne(!0);try{f(u)}finally{ne(!1)}}}else E=u;return b.memoizedState=b.baseState=E,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:E},b.queue=r,r=r.dispatch=Vt.bind(null,Ir,r),[b.memoizedState,r]},useRef:function(r){var u=dn();return r={current:r},u.memoizedState=r},useState:function(r){r=Ql(r);var u=r.queue,f=gr.bind(null,Ir,u);return u.dispatch=f,[r.memoizedState,f]},useDebugValue:ve,useDeferredValue:function(r,u){var f=dn();return Pe(f,r,u)},useTransition:function(){var r=Ql(!1);return r=Ie.bind(null,Ir,r.queue,!0,!1),dn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,u,f){var b=Ir,E=dn();if(jr){if(f===void 0)throw Error(p(407));f=f()}else{if(f=u(),Ci===null)throw Error(p(349));(Jr&60)!==0||Xl(b,u,f)}E.memoizedState=f;var z={value:f,getSnapshot:u};return E.queue=z,Z(sl.bind(null,b,z,r),[r]),b.flags|=2048,D(9,eh.bind(null,b,z,f,u),{destroy:void 0},null),f},useId:function(){var r=dn(),u=Ci.identifierPrefix;if(jr){var f=Xa,b=bs;f=(b&~(1<<32-ae(b)-1)).toString(32)+f,u=":"+u+"R"+f,f=xo++,0<f&&(u+="H"+f.toString(32)),u+=":"}else f=As++,u=":"+u+"r"+f.toString(32)+":";return r.memoizedState=u},useCacheRefresh:function(){return dn().memoizedState=pt.bind(null,Ir)}};kr.useMemoCache=il,kr.useHostTransitionStatus=rt,kr.useFormState=h,kr.useActionState=h,kr.useOptimistic=function(r){var u=dn();u.memoizedState=u.baseState=r;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=fi.bind(null,Ir,!0,f),f.dispatch=u,[r,u]};var Ti={readContext:Gn,use:Kl,useCallback:Ae,useContext:Gn,useEffect:te,useImperativeHandle:ge,useInsertionEffect:re,useLayoutEffect:fe,useMemo:Ee,useReducer:Ia,useRef:j,useState:function(){return Ia(Ra)},useDebugValue:ve,useDeferredValue:function(r,u){var f=Ii();return Le(f,Gr.memoizedState,r,u)},useTransition:function(){var r=Ia(Ra)[0],u=Ii().memoizedState;return[typeof r=="boolean"?r:Si(r),u]},useSyncExternalStore:al,useId:It};Ti.useCacheRefresh=Tt,Ti.useMemoCache=il,Ti.useHostTransitionStatus=rt,Ti.useFormState=m,Ti.useActionState=m,Ti.useOptimistic=function(r,u){var f=Ii();return So(f,Gr,r,u)};var Mi={readContext:Gn,use:Kl,useCallback:Ae,useContext:Gn,useEffect:te,useImperativeHandle:ge,useInsertionEffect:re,useLayoutEffect:fe,useMemo:Ee,useReducer:nl,useRef:j,useState:function(){return nl(Ra)},useDebugValue:ve,useDeferredValue:function(r,u){var f=Ii();return Gr===null?Pe(f,r,u):Le(f,Gr.memoizedState,r,u)},useTransition:function(){var r=nl(Ra)[0],u=Ii().memoizedState;return[typeof r=="boolean"?r:Si(r),u]},useSyncExternalStore:al,useId:It};Mi.useCacheRefresh=Tt,Mi.useMemoCache=il,Mi.useHostTransitionStatus=rt,Mi.useFormState=R,Mi.useActionState=R,Mi.useOptimistic=function(r,u){var f=Ii();return Gr!==null?So(f,Gr,r,u):(f.baseState=r,[r,f.queue.dispatch])};function fn(r,u,f,b){u=r.memoizedState,f=f(b,u),f=f==null?u:ht({},u,f),r.memoizedState=f,r.lanes===0&&(r.updateQueue.baseState=f)}var Sn={isMounted:function(r){return(r=r._reactInternals)?Rt(r)===r:!1},enqueueSetState:function(r,u,f){r=r._reactInternals;var b=Ba(),E=cl(b);E.payload=u,f!=null&&(E.callback=f),u=au(r,E,b),u!==null&&(na(u,r,b),dd(u,r,b))},enqueueReplaceState:function(r,u,f){r=r._reactInternals;var b=Ba(),E=cl(b);E.tag=1,E.payload=u,f!=null&&(E.callback=f),u=au(r,E,b),u!==null&&(na(u,r,b),dd(u,r,b))},enqueueForceUpdate:function(r,u){r=r._reactInternals;var f=Ba(),b=cl(f);b.tag=2,u!=null&&(b.callback=u),u=au(r,b,f),u!==null&&(na(u,r,f),dd(u,r,f))}};function ts(r,u,f,b,E,z,Y){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(b,z,Y):u.prototype&&u.prototype.isPureReactComponent?!Sr(f,b)||!Sr(E,z):!0}function Gs(r,u,f,b){r=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,b),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,b),u.state!==r&&Sn.enqueueReplaceState(u,u.state,null)}function ra(r,u){var f=u;if("ref"in u){f={};for(var b in u)b!=="ref"&&(f[b]=u[b])}if(r=r.defaultProps){f===u&&(f=ht({},f));for(var E in r)f[E]===void 0&&(f[E]=r[E])}return f}var Da=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function rs(r){Da(r)}function To(r){console.error(r)}function Mo(r){Da(r)}function qn(r,u){try{var f=r.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(b){setTimeout(function(){throw b})}}function Hs(r,u,f){try{var b=r.onCaughtError;b(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function is(r,u,f){return f=cl(f),f.tag=3,f.payload={element:null},f.callback=function(){qn(r,u)},f}function Cs(r){return r=cl(r),r.tag=3,r}function Ai(r,u,f,b){var E=f.type.getDerivedStateFromError;if(typeof E=="function"){var z=b.value;r.payload=function(){return E(z)},r.callback=function(){Hs(u,f,b)}}var Y=f.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(r.callback=function(){Hs(u,f,b),typeof E!="function"&&(mu===null?mu=new Set([this]):mu.add(this));var ue=b.stack;this.componentDidCatch(b.value,{componentStack:ue!==null?ue:""})})}function vi(r,u,f,b,E){if(f.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(u=f.alternate,u!==null&&cd(u,f,E,!0),f=Xi.current,f!==null){switch(f.tag){case 13:return Ja===null?Fp():f.alternate===null&&rn===0&&(rn=3),f.flags&=-257,f.flags|=65536,f.lanes=E,b===qu?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([b]):u.add(b),Io(r,b,E)),!1;case 22:return f.flags|=65536,b===qu?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([b])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([b]):f.add(b)),Io(r,b,E)),!1}throw Error(p(435,f.tag))}return Io(r,b,E),Fp(),!1}if(jr)return u=Xi.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=E,b!==Zc&&(r=Error(p(422),{cause:b}),Jo(bn(r,f)))):(b!==Zc&&(u=Error(p(423),{cause:b}),Jo(bn(u,f))),r=r.current.alternate,r.flags|=65536,E&=-E,r.lanes|=E,b=bn(b,f),E=is(r.stateNode,b,E),vp(r,E),rn!==4&&(rn=2)),!1;var z=Error(p(520),{cause:b});if(z=bn(z,f),_l===null?_l=[z]:_l.push(z),rn!==4&&(rn=2),u===null)return!0;b=bn(b,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,r=E&-E,f.lanes|=r,r=is(f.stateNode,b,r),vp(f,r),!1;case 1:if(u=f.type,z=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(mu===null||!mu.has(z))))return f.flags|=65536,E&=-E,f.lanes|=E,E=Cs(E),Ai(E,r,f,b),vp(f,E),!1}f=f.return}while(f!==null);return!1}var Oi=Error(p(461)),Mr=!1;function Tn(r,u,f,b){u.child=r===null?Fs(u,null,f,b):Ma(u,r.child,f,b)}function Ao(r,u,f,b,E){f=f.render;var z=u.ref;if("ref"in b){var Y={};for(var ue in b)ue!=="ref"&&(Y[ue]=b[ue])}else Y=b;return iu(u),b=Kt(r,u,f,Y,z,E),ue=Zn(),r!==null&&!Mr?(Jc(r,u,E),ol(r,u,E)):(jr&&ue&&Yo(u),u.flags|=1,Tn(r,u,b,E),u.child)}function af(r,u,f,b,E){if(r===null){var z=f.type;return typeof z=="function"&&!oc(z)&&z.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=z,nd(r,u,z,b,E)):(r=fu(f.type,null,b,u,u.mode,E),r.ref=u.ref,r.return=u,u.child=r)}if(z=r.child,!Ju(r,E)){var Y=z.memoizedProps;if(f=f.compare,f=f!==null?f:Sr,f(Y,b)&&r.ref===u.ref)return ol(r,u,E)}return u.flags|=1,r=du(z,b),r.ref=u.ref,r.return=u,u.child=r}function nd(r,u,f,b,E){if(r!==null){var z=r.memoizedProps;if(Sr(z,b)&&r.ref===u.ref)if(Mr=!1,u.pendingProps=b=z,Ju(r,E))(r.flags&131072)!==0&&(Mr=!0);else return u.lanes=r.lanes,ol(r,u,E)}return Es(r,u,f,b,E)}function ih(r,u,f){var b=u.pendingProps,E=b.children,z=(u.stateNode._pendingVisibility&2)!==0,Y=r!==null?r.memoizedState:null;if(Ln(r,u),b.mode==="hidden"||z){if((u.flags&128)!==0){if(b=Y!==null?Y.baseLanes|f:f,r!==null){for(E=u.child=r.child,z=0;E!==null;)z=z|E.lanes|E.childLanes,E=E.sibling;u.childLanes=z&~b}else u.childLanes=0,u.child=null;return ad(r,u,b,f)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},r!==null&&Wu(u,Y!==null?Y.cachePool:null),Y!==null?Aa(u,Y):Hc(),tf(u);else return u.lanes=u.childLanes=536870912,ad(r,u,Y!==null?Y.baseLanes|f:f,f)}else Y!==null?(Wu(u,Y.cachePool),Aa(u,Y),Ss(),u.memoizedState=null):(r!==null&&Wu(u,null),Hc(),Ss());return Tn(r,u,E,f),u.child}function ad(r,u,f,b){var E=Yc();return E=E===null?null:{parent:Bi._currentValue,pool:E},u.memoizedState={baseLanes:f,cachePool:E},r!==null&&Wu(u,null),Hc(),tf(u),r!==null&&cd(r,u,b,!0),null}function Ln(r,u){var f=u.ref;if(f===null)r!==null&&r.ref!==null&&(u.flags|=2097664);else{if(typeof f!="function"&&typeof f!="object")throw Error(p(284));(r===null||r.ref!==f)&&(u.flags|=2097664)}}function Es(r,u,f,b,E){return iu(u),f=Kt(r,u,f,b,void 0,E),b=Zn(),r!==null&&!Mr?(Jc(r,u,E),ol(r,u,E)):(jr&&b&&Yo(u),u.flags|=1,Tn(r,u,f,E),u.child)}function nh(r,u,f,b,E,z){return iu(u),u.updateQueue=null,f=Qc(u,b,f,E),Wl(r),b=Zn(),r!==null&&!Mr?(Jc(r,u,z),ol(r,u,z)):(jr&&b&&Yo(u),u.flags|=1,Tn(r,u,f,z),u.child)}function sd(r,u,f,b,E){if(iu(u),u.stateNode===null){var z=Ul,Y=f.contextType;typeof Y=="object"&&Y!==null&&(z=Gn(Y)),z=new f(b,z),u.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,z.updater=Sn,u.stateNode=z,z._reactInternals=u,z=u.stateNode,z.props=b,z.state=u.memoizedState,z.refs={},hd(u),Y=f.contextType,z.context=typeof Y=="object"&&Y!==null?Gn(Y):Ul,z.state=u.memoizedState,Y=f.getDerivedStateFromProps,typeof Y=="function"&&(fn(u,f,Y,b),z.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(Y=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),Y!==z.state&&Sn.enqueueReplaceState(z,z.state,null),tc(u,b,z,E),ec(),z.state=u.memoizedState),typeof z.componentDidMount=="function"&&(u.flags|=4194308),b=!0}else if(r===null){z=u.stateNode;var ue=u.memoizedProps,Me=ra(f,ue);z.props=Me;var Ne=z.context,ft=f.contextType;Y=Ul,typeof ft=="object"&&ft!==null&&(Y=Gn(ft));var Mt=f.getDerivedStateFromProps;ft=typeof Mt=="function"||typeof z.getSnapshotBeforeUpdate=="function",ue=u.pendingProps!==ue,ft||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(ue||Ne!==Y)&&Gs(u,z,b,Y),ul=!1;var et=u.memoizedState;z.state=et,tc(u,b,z,E),ec(),Ne=u.memoizedState,ue||et!==Ne||ul?(typeof Mt=="function"&&(fn(u,f,Mt,b),Ne=u.memoizedState),(Me=ul||ts(u,f,Me,b,et,Ne,Y))?(ft||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(u.flags|=4194308)):(typeof z.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=b,u.memoizedState=Ne),z.props=b,z.state=Ne,z.context=Y,b=Me):(typeof z.componentDidMount=="function"&&(u.flags|=4194308),b=!1)}else{z=u.stateNode,_p(r,u),Y=u.memoizedProps,ft=ra(f,Y),z.props=ft,Mt=u.pendingProps,et=z.context,Ne=f.contextType,Me=Ul,typeof Ne=="object"&&Ne!==null&&(Me=Gn(Ne)),ue=f.getDerivedStateFromProps,(Ne=typeof ue=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(Y!==Mt||et!==Me)&&Gs(u,z,b,Me),ul=!1,et=u.memoizedState,z.state=et,tc(u,b,z,E),ec();var lt=u.memoizedState;Y!==Mt||et!==lt||ul||r!==null&&r.dependencies!==null&&ah(r.dependencies)?(typeof ue=="function"&&(fn(u,f,ue,b),lt=u.memoizedState),(ft=ul||ts(u,f,ft,b,et,lt,Me)||r!==null&&r.dependencies!==null&&ah(r.dependencies))?(Ne||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(b,lt,Me),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(b,lt,Me)),typeof z.componentDidUpdate=="function"&&(u.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof z.componentDidUpdate!="function"||Y===r.memoizedProps&&et===r.memoizedState||(u.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Y===r.memoizedProps&&et===r.memoizedState||(u.flags|=1024),u.memoizedProps=b,u.memoizedState=lt),z.props=b,z.state=lt,z.context=Me,b=ft):(typeof z.componentDidUpdate!="function"||Y===r.memoizedProps&&et===r.memoizedState||(u.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Y===r.memoizedProps&&et===r.memoizedState||(u.flags|=1024),b=!1)}return z=b,Ln(r,u),b=(u.flags&128)!==0,z||b?(z=u.stateNode,f=b&&typeof f.getDerivedStateFromError!="function"?null:z.render(),u.flags|=1,r!==null&&b?(u.child=Ma(u,r.child,null,E),u.child=Ma(u,null,f,E)):Tn(r,u,f,E),u.memoizedState=z.state,r=u.child):r=ol(r,u,E),r}function Jl(r,u,f,b){return Qo(),u.flags|=256,Tn(r,u,f,b),u.child}var Xu={dehydrated:null,treeContext:null,retryLane:0};function Qu(r){return{baseLanes:r,cachePool:Xc()}}function sf(r,u,f){return r=r!==null?r.childLanes&~f:0,u&&(r|=Ps),r}function Wm(r,u,f){var b=u.pendingProps,E=!1,z=(u.flags&128)!==0,Y;if((Y=z)||(Y=r!==null&&r.memoizedState===null?!1:(di.current&2)!==0),Y&&(E=!0,u.flags&=-129),Y=(u.flags&32)!==0,u.flags&=-33,r===null){if(jr){if(E?ws(u):Ss(),jr){var ue=tn,Me;if(Me=ue){e:{for(Me=ue,ue=ga;Me.nodeType!==8;){if(!ue){ue=null;break e}if(Me=ha(Me.nextSibling),Me===null){ue=null;break e}}ue=Me}ue!==null?(u.memoizedState={dehydrated:ue,treeContext:xs!==null?{id:bs,overflow:Xa}:null,retryLane:536870912},Me=os(18,null,null,0),Me.stateNode=ue,Me.return=u,u.child=Me,zn=u,tn=null,Me=!0):Me=!1}Me||ui(u)}if(ue=u.memoizedState,ue!==null&&(ue=ue.dehydrated,ue!==null))return ue.data==="$!"?u.lanes=16:u.lanes=536870912,null;Ts(u)}return ue=b.children,b=b.fallback,E?(Ss(),E=u.mode,ue=gp({mode:"hidden",children:ue},E),b=pl(b,E,f,null),ue.return=u,b.return=u,ue.sibling=b,u.child=ue,E=u.child,E.memoizedState=Qu(f),E.childLanes=sf(r,Y,f),u.memoizedState=Xu,b):(ws(u),od(u,ue))}if(Me=r.memoizedState,Me!==null&&(ue=Me.dehydrated,ue!==null)){if(z)u.flags&256?(ws(u),u.flags&=-257,u=ld(r,u,f)):u.memoizedState!==null?(Ss(),u.child=r.child,u.flags|=128,u=null):(Ss(),E=b.fallback,ue=u.mode,b=gp({mode:"visible",children:b.children},ue),E=pl(E,ue,f,null),E.flags|=2,b.return=u,E.return=u,b.sibling=E,u.child=b,Ma(u,r.child,null,f),b=u.child,b.memoizedState=Qu(f),b.childLanes=sf(r,Y,f),u.memoizedState=Xu,u=E);else if(ws(u),ue.data==="$!"){if(Y=ue.nextSibling&&ue.nextSibling.dataset,Y)var Ne=Y.dgst;Y=Ne,b=Error(p(419)),b.stack="",b.digest=Y,Jo({value:b,source:null,stack:null}),u=ld(r,u,f)}else if(Mr||cd(r,u,f,!1),Y=(f&r.childLanes)!==0,Mr||Y){if(Y=Ci,Y!==null){if(b=f&-f,(b&42)!==0)b=1;else switch(b){case 2:b=1;break;case 8:b=4;break;case 32:b=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:b=64;break;case 268435456:b=134217728;break;default:b=0}if(b=(b&(Y.suspendedLanes|f))!==0?0:b,b!==0&&b!==Me.retryLane)throw Me.retryLane=b,go(r,b),na(Y,r,b),Oi}ue.data==="$?"||Fp(),u=ld(r,u,f)}else ue.data==="$?"?(u.flags|=128,u.child=r.child,u=d0.bind(null,r),ue._reactRetry=u,u=null):(r=Me.treeContext,tn=ha(ue.nextSibling),zn=u,jr=!0,ta=null,ga=!1,r!==null&&(Jn[ea++]=bs,Jn[ea++]=Xa,Jn[ea++]=xs,bs=r.id,Xa=r.overflow,xs=u),u=od(u,b.children),u.flags|=4096);return u}return E?(Ss(),E=b.fallback,ue=u.mode,Me=r.child,Ne=Me.sibling,b=du(Me,{mode:"hidden",children:b.children}),b.subtreeFlags=Me.subtreeFlags&31457280,Ne!==null?E=du(Ne,E):(E=pl(E,ue,f,null),E.flags|=2),E.return=u,b.return=u,b.sibling=E,u.child=b,b=E,E=u.child,ue=r.child.memoizedState,ue===null?ue=Qu(f):(Me=ue.cachePool,Me!==null?(Ne=Bi._currentValue,Me=Me.parent!==Ne?{parent:Ne,pool:Ne}:Me):Me=Xc(),ue={baseLanes:ue.baseLanes|f,cachePool:Me}),E.memoizedState=ue,E.childLanes=sf(r,Y,f),u.memoizedState=Xu,b):(ws(u),f=r.child,r=f.sibling,f=du(f,{mode:"visible",children:b.children}),f.return=u,f.sibling=null,r!==null&&(Y=u.deletions,Y===null?(u.deletions=[r],u.flags|=16):Y.push(r)),u.child=f,u.memoizedState=null,f)}function od(r,u){return u=gp({mode:"visible",children:u},r.mode),u.return=r,r.child=u}function gp(r,u){return rg(r,u,0,null)}function ld(r,u,f){return Ma(u,r.child,null,f),r=od(u,u.pendingProps.children),r.flags|=2,u.memoizedState=null,r}function yp(r,u,f){r.lanes|=u;var b=r.alternate;b!==null&&(b.lanes|=u),cf(r.return,u,f)}function of(r,u,f,b,E){var z=r.memoizedState;z===null?r.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:b,tail:f,tailMode:E}:(z.isBackwards=u,z.rendering=null,z.renderingStartTime=0,z.last=b,z.tail=f,z.tailMode=E)}function eu(r,u,f){var b=u.pendingProps,E=b.revealOrder,z=b.tail;if(Tn(r,u,b.children,f),b=di.current,(b&2)!==0)b=b&1|2,u.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=u.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&yp(r,f,u);else if(r.tag===19)yp(r,f,u);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===u)break e;for(;r.sibling===null;){if(r.return===null||r.return===u)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}b&=1}switch(Ur(di,b),E){case"forwards":for(f=u.child,E=null;f!==null;)r=f.alternate,r!==null&&Ea(r)===null&&(E=f),f=f.sibling;f=E,f===null?(E=u.child,u.child=null):(E=f.sibling,f.sibling=null),of(u,!1,E,f,z);break;case"backwards":for(f=null,E=u.child,u.child=null;E!==null;){if(r=E.alternate,r!==null&&Ea(r)===null){u.child=E;break}r=E.sibling,E.sibling=f,f=E,E=r}of(u,!0,f,null,z);break;case"together":of(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function ol(r,u,f){if(r!==null&&(u.dependencies=r.dependencies),pu|=u.lanes,(f&u.childLanes)===0)if(r!==null){if(cd(r,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(r!==null&&u.child!==r.child)throw Error(p(153));if(u.child!==null){for(r=u.child,f=du(r,r.pendingProps),u.child=f,f.return=u;r.sibling!==null;)r=r.sibling,f=f.sibling=du(r,r.pendingProps),f.return=u;f.sibling=null}return u.child}function Ju(r,u){return(r.lanes&u)!==0?!0:(r=r.dependencies,!!(r!==null&&ah(r)))}function lf(r,u,f){switch(u.tag){case 3:Ki(u,u.stateNode.containerInfo),ru(u,Bi,r.memoizedState.cache),Qo();break;case 27:case 5:Yi(u);break;case 4:Ki(u,u.stateNode.containerInfo);break;case 10:ru(u,u.type,u.memoizedProps.value);break;case 13:var b=u.memoizedState;if(b!==null)return b.dehydrated!==null?(ws(u),u.flags|=128,null):(f&u.child.childLanes)!==0?Wm(r,u,f):(ws(u),r=ol(r,u,f),r!==null?r.sibling:null);ws(u);break;case 19:var E=(r.flags&128)!==0;if(b=(f&u.childLanes)!==0,b||(cd(r,u,f,!1),b=(f&u.childLanes)!==0),E){if(b)return eu(r,u,f);u.flags|=128}if(E=u.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Ur(di,di.current),b)break;return null;case 22:case 23:return u.lanes=0,ih(r,u,f);case 24:ru(u,Bi,r.memoizedState.cache)}return ol(r,u,f)}function ud(r,u,f){if(r!==null)if(r.memoizedProps!==u.pendingProps)Mr=!0;else{if(!Ju(r,f)&&(u.flags&128)===0)return Mr=!1,lf(r,u,f);Mr=(r.flags&131072)!==0}else Mr=!1,jr&&(u.flags&1048576)!==0&&$c(u,Zu,u.index);switch(u.lanes=0,u.tag){case 16:e:{r=u.pendingProps;var b=u.elementType,E=b._init;if(b=E(b._payload),u.type=b,typeof b=="function")oc(b)?(r=ra(b,r),u.tag=1,u=sd(null,u,b,r,f)):(u.tag=0,u=Es(null,u,b,r,f));else{if(b!=null){if(E=b.$$typeof,E===G){u.tag=11,u=Ao(null,u,b,r,f);break e}else if(E===W){u.tag=14,u=af(null,u,b,r,f);break e}}throw u=Ke(b)||b,Error(p(306,u,""))}}return u;case 0:return Es(r,u,u.type,u.pendingProps,f);case 1:return b=u.type,E=ra(b,u.pendingProps),sd(r,u,b,E,f);case 3:e:{if(Ki(u,u.stateNode.containerInfo),r===null)throw Error(p(387));var z=u.pendingProps;E=u.memoizedState,b=E.element,_p(r,u),tc(u,z,null,f);var Y=u.memoizedState;if(z=Y.cache,ru(u,Bi,z),z!==E.cache&&hf(u,[Bi],f,!0),ec(),z=Y.element,E.isDehydrated)if(E={element:z,isDehydrated:!1,cache:Y.cache},u.updateQueue.baseState=E,u.memoizedState=E,u.flags&256){u=Jl(r,u,z,f);break e}else if(z!==b){b=bn(Error(p(424)),u),Jo(b),u=Jl(r,u,z,f);break e}else for(tn=ha(u.stateNode.containerInfo.firstChild),zn=u,jr=!0,ta=null,ga=!0,f=Fs(u,null,z,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Qo(),z===b){u=ol(r,u,f);break e}Tn(r,u,z,f)}u=u.child}return u;case 26:return Ln(r,u),r===null?(f=Lf(u.type,null,u.pendingProps,null))?u.memoizedState=f:jr||(f=u.type,r=u.pendingProps,b=Ad(zr.current).createElement(f),b[yt]=u,b[Lt]=r,Wn(b,f,r),ut(b),u.stateNode=b):u.memoizedState=Lf(u.type,r.memoizedProps,u.pendingProps,r.memoizedState),null;case 27:return Yi(u),r===null&&jr&&(b=u.stateNode=xl(u.type,u.pendingProps,zr.current),zn=u,ga=!0,tn=ha(b.firstChild)),b=u.pendingProps.children,r!==null||jr?Tn(r,u,b,f):u.child=Ma(u,null,b,f),Ln(r,u),u.child;case 5:return r===null&&jr&&((E=b=tn)&&(b=g0(b,u.type,u.pendingProps,ga),b!==null?(u.stateNode=b,zn=u,tn=ha(b.firstChild),ga=!1,E=!0):E=!1),E||ui(u)),Yi(u),E=u.type,z=u.pendingProps,Y=r!==null?r.memoizedProps:null,b=z.children,em(E,z)?b=null:Y!==null&&em(E,Y)&&(u.flags|=32),u.memoizedState!==null&&(E=Kt(r,u,rd,null,null,f),ye._currentValue=E),Ln(r,u),Tn(r,u,b,f),u.child;case 6:return r===null&&jr&&((r=f=tn)&&(f=y0(f,u.pendingProps,ga),f!==null?(u.stateNode=f,zn=u,tn=null,r=!0):r=!1),r||ui(u)),null;case 13:return Wm(r,u,f);case 4:return Ki(u,u.stateNode.containerInfo),b=u.pendingProps,r===null?u.child=Ma(u,null,b,f):Tn(r,u,b,f),u.child;case 11:return Ao(r,u,u.type,u.pendingProps,f);case 7:return Tn(r,u,u.pendingProps,f),u.child;case 8:return Tn(r,u,u.pendingProps.children,f),u.child;case 12:return Tn(r,u,u.pendingProps.children,f),u.child;case 10:return b=u.pendingProps,ru(u,u.type,b.value),Tn(r,u,b.children,f),u.child;case 9:return E=u.type._context,b=u.pendingProps.children,iu(u),E=Gn(E),b=b(E),u.flags|=1,Tn(r,u,b,f),u.child;case 14:return af(r,u,u.type,u.pendingProps,f);case 15:return nd(r,u,u.type,u.pendingProps,f);case 19:return eu(r,u,f);case 22:return ih(r,u,f);case 24:return iu(u),b=Gn(Bi),r===null?(E=Yc(),E===null&&(E=Ci,z=tl(),E.pooledCache=z,z.refCount++,z!==null&&(E.pooledCacheLanes|=f),E=z),u.memoizedState={parent:b,cache:E},hd(u),ru(u,Bi,E)):((r.lanes&f)!==0&&(_p(r,u),tc(u,null,null,f),ec()),E=r.memoizedState,z=u.memoizedState,E.parent!==b?(E={parent:b,cache:b},u.memoizedState=E,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=E),ru(u,Bi,b)):(b=z.cache,ru(u,Bi,b),b!==E.cache&&hf(u,[Bi],f,!0))),Tn(r,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(p(156,u.tag))}var uf=br(null),tu=null,ll=null;function ru(r,u,f){Ur(uf,u._currentValue),u._currentValue=f}function Co(r){r._currentValue=uf.current,ti(uf)}function cf(r,u,f){for(;r!==null;){var b=r.alternate;if((r.childLanes&u)!==u?(r.childLanes|=u,b!==null&&(b.childLanes|=u)):b!==null&&(b.childLanes&u)!==u&&(b.childLanes|=u),r===f)break;r=r.return}}function hf(r,u,f,b){var E=r.child;for(E!==null&&(E.return=r);E!==null;){var z=E.dependencies;if(z!==null){var Y=E.child;z=z.firstContext;e:for(;z!==null;){var ue=z;z=E;for(var Me=0;Me<u.length;Me++)if(ue.context===u[Me]){z.lanes|=f,ue=z.alternate,ue!==null&&(ue.lanes|=f),cf(z.return,f,r),b||(Y=null);break e}z=ue.next}}else if(E.tag===18){if(Y=E.return,Y===null)throw Error(p(341));Y.lanes|=f,z=Y.alternate,z!==null&&(z.lanes|=f),cf(Y,f,r),Y=null}else Y=E.child;if(Y!==null)Y.return=E;else for(Y=E;Y!==null;){if(Y===r){Y=null;break}if(E=Y.sibling,E!==null){E.return=Y.return,Y=E;break}Y=Y.return}E=Y}}function cd(r,u,f,b){r=null;for(var E=u,z=!1;E!==null;){if(!z){if((E.flags&524288)!==0)z=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var Y=E.alternate;if(Y===null)throw Error(p(387));if(Y=Y.memoizedProps,Y!==null){var ue=E.type;Qn(E.pendingProps.value,Y.value)||(r!==null?r.push(ue):r=[ue])}}else if(E===pr.current){if(Y=E.alternate,Y===null)throw Error(p(387));Y.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(r!==null?r.push(ye):r=[ye])}E=E.return}r!==null&&hf(u,r,f,b),u.flags|=262144}function ah(r){for(r=r.firstContext;r!==null;){if(!Qn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function iu(r){tu=r,ll=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Gn(r){return za(tu,r)}function nu(r,u){return tu===null&&iu(r),za(r,u)}function za(r,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},ll===null){if(r===null)throw Error(p(308));ll=u,r.dependencies={lanes:0,firstContext:u},r.flags|=524288}else ll=ll.next=u;return f}var ul=!1;function hd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _p(r,u){r=r.updateQueue,u.updateQueue===r&&(u.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function cl(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function au(r,u,f){var b=r.updateQueue;if(b===null)return null;if(b=b.shared,(Qi&2)!==0){var E=b.pending;return E===null?u.next=u:(u.next=E.next,E.next=u),b.pending=u,u=Fl(r),ef(r,null,f),u}return Ho(r,b,u,f),Fl(r)}function dd(r,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194176)!==0)){var b=u.lanes;b&=r.pendingLanes,f|=b,u.lanes=f,Wt(r,f)}}function vp(r,u){var f=r.updateQueue,b=r.alternate;if(b!==null&&(b=b.updateQueue,f===b)){var E=null,z=null;if(f=f.firstBaseUpdate,f!==null){do{var Y={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};z===null?E=z=Y:z=z.next=Y,f=f.next}while(f!==null);z===null?E=z=u:z=z.next=u}else E=z=u;f={baseState:b.baseState,firstBaseUpdate:E,lastBaseUpdate:z,shared:b.shared,callbacks:b.callbacks},r.updateQueue=f;return}r=f.lastBaseUpdate,r===null?f.firstBaseUpdate=u:r.next=u,f.lastBaseUpdate=u}var xp=!1;function ec(){if(xp){var r=rl;if(r!==null)throw r}}function tc(r,u,f,b){xp=!1;var E=r.updateQueue;ul=!1;var z=E.firstBaseUpdate,Y=E.lastBaseUpdate,ue=E.shared.pending;if(ue!==null){E.shared.pending=null;var Me=ue,Ne=Me.next;Me.next=null,Y===null?z=Ne:Y.next=Ne,Y=Me;var ft=r.alternate;ft!==null&&(ft=ft.updateQueue,ue=ft.lastBaseUpdate,ue!==Y&&(ue===null?ft.firstBaseUpdate=Ne:ue.next=Ne,ft.lastBaseUpdate=Me))}if(z!==null){var Mt=E.baseState;Y=0,ft=Ne=Me=null,ue=z;do{var et=ue.lane&-536870913,lt=et!==ue.lane;if(lt?(Jr&et)===et:(b&et)===et){et!==0&&et===Vs&&(xp=!0),ft!==null&&(ft=ft.next={lane:0,tag:ue.tag,payload:ue.payload,callback:null,next:null});e:{var Qt=r,xr=ue;et=u;var ln=f;switch(xr.tag){case 1:if(Qt=xr.payload,typeof Qt=="function"){Mt=Qt.call(ln,Mt,et);break e}Mt=Qt;break e;case 3:Qt.flags=Qt.flags&-65537|128;case 0:if(Qt=xr.payload,et=typeof Qt=="function"?Qt.call(ln,Mt,et):Qt,et==null)break e;Mt=ht({},Mt,et);break e;case 2:ul=!0}}et=ue.callback,et!==null&&(r.flags|=64,lt&&(r.flags|=8192),lt=E.callbacks,lt===null?E.callbacks=[et]:lt.push(et))}else lt={lane:et,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},ft===null?(Ne=ft=lt,Me=Mt):ft=ft.next=lt,Y|=et;if(ue=ue.next,ue===null){if(ue=E.shared.pending,ue===null)break;lt=ue,ue=lt.next,lt.next=null,E.lastBaseUpdate=lt,E.shared.pending=null}}while(!0);ft===null&&(Me=Mt),E.baseState=Me,E.firstBaseUpdate=Ne,E.lastBaseUpdate=ft,z===null&&(E.shared.lanes=0),pu|=Y,r.lanes=Y,r.memoizedState=Mt}}function bp(r,u){if(typeof r!="function")throw Error(p(191,r));r.call(u)}function su(r,u){var f=r.callbacks;if(f!==null)for(r.callbacks=null,r=0;r<f.length;r++)bp(f[r],u)}function hl(r,u){try{var f=u.updateQueue,b=f!==null?f.lastEffect:null;if(b!==null){var E=b.next;f=E;do{if((f.tag&r)===r){b=void 0;var z=f.create,Y=f.inst;b=z(),Y.destroy=b}f=f.next}while(f!==E)}}catch(ue){Yr(u,u.return,ue)}}function ou(r,u,f){try{var b=u.updateQueue,E=b!==null?b.lastEffect:null;if(E!==null){var z=E.next;b=z;do{if((b.tag&r)===r){var Y=b.inst,ue=Y.destroy;if(ue!==void 0){Y.destroy=void 0,E=u;var Me=f;try{ue()}catch(Ne){Yr(E,Me,Ne)}}}b=b.next}while(b!==z)}}catch(Ne){Yr(u,u.return,Ne)}}function Km(r){var u=r.updateQueue;if(u!==null){var f=r.stateNode;try{su(u,f)}catch(b){Yr(r,r.return,b)}}}function Ym(r,u,f){f.props=ra(r.type,r.memoizedProps),f.state=r.memoizedState;try{f.componentWillUnmount()}catch(b){Yr(r,u,b)}}function rc(r,u){try{var f=r.ref;if(f!==null){var b=r.stateNode;switch(r.tag){case 26:case 27:case 5:var E=b;break;default:E=b}typeof f=="function"?r.refCleanup=f(E):f.current=E}}catch(z){Yr(r,u,z)}}function ns(r,u){var f=r.ref,b=r.refCleanup;if(f!==null)if(typeof b=="function")try{b()}catch(E){Yr(r,u,E)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(E){Yr(r,u,E)}else f.current=null}function Xm(r){var u=r.type,f=r.memoizedProps,b=r.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&b.focus();break e;case"img":f.src?b.src=f.src:f.srcSet&&(b.srcset=f.srcSet)}}catch(E){Yr(r,r.return,E)}}function Qm(r,u,f){try{var b=r.stateNode;vu(b,r.type,f,u),b[Lt]=u}catch(E){Yr(r,r.return,E)}}function df(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27||r.tag===4}function wp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||df(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==27&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ff(r,u,f){var b=r.tag;if(b===5||b===6)r=r.stateNode,u?f.nodeType===8?f.parentNode.insertBefore(r,u):f.insertBefore(r,u):(f.nodeType===8?(u=f.parentNode,u.insertBefore(r,f)):(u=f,u.appendChild(r)),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=Md));else if(b!==4&&b!==27&&(r=r.child,r!==null))for(ff(r,u,f),r=r.sibling;r!==null;)ff(r,u,f),r=r.sibling}function lu(r,u,f){var b=r.tag;if(b===5||b===6)r=r.stateNode,u?f.insertBefore(r,u):f.appendChild(r);else if(b!==4&&b!==27&&(r=r.child,r!==null))for(lu(r,u,f),r=r.sibling;r!==null;)lu(r,u,f),r=r.sibling}var dl=!1,Ar=!1,uu=!1,Sp=typeof WeakSet=="function"?WeakSet:Set,pn=null,fd=!1;function pd(r,u){if(r=r.containerInfo,Ef=Xe,r=Qd(r),Wh(r)){if("selectionStart"in r)var f={start:r.selectionStart,end:r.selectionEnd};else e:{f=(f=r.ownerDocument)&&f.defaultView||window;var b=f.getSelection&&f.getSelection();if(b&&b.rangeCount!==0){f=b.anchorNode;var E=b.anchorOffset,z=b.focusNode;b=b.focusOffset;try{f.nodeType,z.nodeType}catch{f=null;break e}var Y=0,ue=-1,Me=-1,Ne=0,ft=0,Mt=r,et=null;t:for(;;){for(var lt;Mt!==f||E!==0&&Mt.nodeType!==3||(ue=Y+E),Mt!==z||b!==0&&Mt.nodeType!==3||(Me=Y+b),Mt.nodeType===3&&(Y+=Mt.nodeValue.length),(lt=Mt.firstChild)!==null;)et=Mt,Mt=lt;for(;;){if(Mt===r)break t;if(et===f&&++Ne===E&&(ue=Y),et===z&&++ft===b&&(Me=Y),(lt=Mt.nextSibling)!==null)break;Mt=et,et=Mt.parentNode}Mt=lt}f=ue===-1||Me===-1?null:{start:ue,end:Me}}else f=null}f=f||{start:0,end:0}}else f=null;for(Pf={focusedElem:r,selectionRange:f},Xe=!1,pn=u;pn!==null;)if(u=pn,r=u.child,(u.subtreeFlags&1028)!==0&&r!==null)r.return=u,pn=r;else for(;pn!==null;){switch(u=pn,z=u.alternate,r=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&z!==null){r=void 0,f=u,E=z.memoizedProps,z=z.memoizedState,b=f.stateNode;try{var Qt=ra(f.type,E,f.elementType===f.type);r=b.getSnapshotBeforeUpdate(Qt,z),b.__reactInternalSnapshotBeforeUpdate=r}catch(xr){Yr(f,f.return,xr)}}break;case 3:if((r&1024)!==0){if(r=u.stateNode.containerInfo,f=r.nodeType,f===9)im(r);else if(f===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":im(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(p(163))}if(r=u.sibling,r!==null){r.return=u.return,pn=r;break}pn=u.return}return Qt=fd,fd=!1,Qt}function Tp(r,u,f){var b=f.flags;switch(f.tag){case 0:case 11:case 15:Ws(r,f),b&4&&hl(5,f);break;case 1:if(Ws(r,f),b&4)if(r=f.stateNode,u===null)try{r.componentDidMount()}catch(ue){Yr(f,f.return,ue)}else{var E=ra(f.type,u.memoizedProps);u=u.memoizedState;try{r.componentDidUpdate(E,u,r.__reactInternalSnapshotBeforeUpdate)}catch(ue){Yr(f,f.return,ue)}}b&64&&Km(f),b&512&&rc(f,f.return);break;case 3:if(Ws(r,f),b&64&&(b=f.updateQueue,b!==null)){if(r=null,f.child!==null)switch(f.child.tag){case 27:case 5:r=f.child.stateNode;break;case 1:r=f.child.stateNode}try{su(b,r)}catch(ue){Yr(f,f.return,ue)}}break;case 26:Ws(r,f),b&512&&rc(f,f.return);break;case 27:case 5:Ws(r,f),u===null&&b&4&&Xm(f),b&512&&rc(f,f.return);break;case 12:Ws(r,f);break;case 13:Ws(r,f),b&4&&ic(r,f);break;case 22:if(E=f.memoizedState!==null||dl,!E){u=u!==null&&u.memoizedState!==null||Ar;var z=dl,Y=Ar;dl=E,(Ar=u)&&!Y?fl(r,f,(f.subtreeFlags&8772)!==0):Ws(r,f),dl=z,Ar=Y}b&512&&(f.memoizedProps.mode==="manual"?rc(f,f.return):ns(f,f.return));break;default:Ws(r,f)}}function Mp(r){var u=r.alternate;u!==null&&(r.alternate=null,Mp(u)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(u=r.stateNode,u!==null&&qa(u)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Zi=null,_a=!1;function La(r,u,f){for(f=f.child;f!==null;)md(r,u,f),f=f.sibling}function md(r,u,f){if(ri&&typeof ri.onCommitFiberUnmount=="function")try{ri.onCommitFiberUnmount(ni,f)}catch{}switch(f.tag){case 26:Ar||ns(f,u),La(r,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Ar||ns(f,u);var b=Zi,E=_a;for(Zi=f.stateNode,La(r,u,f),f=f.stateNode,u=f.attributes;u.length;)f.removeAttributeNode(u[0]);qa(f),Zi=b,_a=E;break;case 5:Ar||ns(f,u);case 6:E=Zi;var z=_a;if(Zi=null,La(r,u,f),Zi=E,_a=z,Zi!==null)if(_a)try{r=Zi,b=f.stateNode,r.nodeType===8?r.parentNode.removeChild(b):r.removeChild(b)}catch(Y){Yr(f,u,Y)}else try{Zi.removeChild(f.stateNode)}catch(Y){Yr(f,u,Y)}break;case 18:Zi!==null&&(_a?(u=Zi,f=f.stateNode,u.nodeType===8?wh(u.parentNode,f):u.nodeType===1&&wh(u,f),Hi(u)):wh(Zi,f.stateNode));break;case 4:b=Zi,E=_a,Zi=f.stateNode.containerInfo,_a=!0,La(r,u,f),Zi=b,_a=E;break;case 0:case 11:case 14:case 15:Ar||ou(2,f,u),Ar||ou(4,f,u),La(r,u,f);break;case 1:Ar||(ns(f,u),b=f.stateNode,typeof b.componentWillUnmount=="function"&&Ym(f,u,b)),La(r,u,f);break;case 21:La(r,u,f);break;case 22:Ar||ns(f,u),Ar=(b=Ar)||f.memoizedState!==null,La(r,u,f),Ar=b;break;default:La(r,u,f)}}function ic(r,u){if(u.memoizedState===null&&(r=u.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Hi(r)}catch(f){Yr(u,u.return,f)}}function gd(r){switch(r.tag){case 13:case 19:var u=r.stateNode;return u===null&&(u=r.stateNode=new Sp),u;case 22:return r=r.stateNode,u=r._retryCache,u===null&&(u=r._retryCache=new Sp),u;default:throw Error(p(435,r.tag))}}function Ap(r,u){var f=gd(r);u.forEach(function(b){var E=f0.bind(null,r,b);f.has(b)||(f.add(b),b.then(E,E))})}function as(r,u){var f=u.deletions;if(f!==null)for(var b=0;b<f.length;b++){var E=f[b],z=r,Y=u,ue=Y;e:for(;ue!==null;){switch(ue.tag){case 27:case 5:Zi=ue.stateNode,_a=!1;break e;case 3:Zi=ue.stateNode.containerInfo,_a=!0;break e;case 4:Zi=ue.stateNode.containerInfo,_a=!0;break e}ue=ue.return}if(Zi===null)throw Error(p(160));md(z,Y,E),Zi=null,_a=!1,z=E.alternate,z!==null&&(z.return=null),E.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)Jm(u,r),u=u.sibling}var ia=null;function Jm(r,u){var f=r.alternate,b=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:as(u,r),ss(r),b&4&&(ou(3,r,r.return),hl(3,r),ou(5,r,r.return));break;case 1:as(u,r),ss(r),b&512&&(Ar||f===null||ns(f,f.return)),b&64&&dl&&(r=r.updateQueue,r!==null&&(b=r.callbacks,b!==null&&(f=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=f===null?b:f.concat(b))));break;case 26:var E=ia;if(as(u,r),ss(r),b&512&&(Ar||f===null||ns(f,f.return)),b&4){var z=f!==null?f.memoizedState:null;if(b=r.memoizedState,f===null)if(b===null)if(r.stateNode===null){e:{b=r.type,f=r.memoizedProps,E=E.ownerDocument||E;t:switch(b){case"title":z=E.getElementsByTagName("title")[0],(!z||z[_n]||z[yt]||z.namespaceURI==="http://www.w3.org/2000/svg"||z.hasAttribute("itemprop"))&&(z=E.createElement(b),E.head.insertBefore(z,E.querySelector("head > title"))),Wn(z,b,f),z[yt]=r,ut(z),b=z;break e;case"link":var Y=w("link","href",E).get(b+(f.href||""));if(Y){for(var ue=0;ue<Y.length;ue++)if(z=Y[ue],z.getAttribute("href")===(f.href==null?null:f.href)&&z.getAttribute("rel")===(f.rel==null?null:f.rel)&&z.getAttribute("title")===(f.title==null?null:f.title)&&z.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){Y.splice(ue,1);break t}}z=E.createElement(b),Wn(z,b,f),E.head.appendChild(z);break;case"meta":if(Y=w("meta","content",E).get(b+(f.content||""))){for(ue=0;ue<Y.length;ue++)if(z=Y[ue],z.getAttribute("content")===(f.content==null?null:""+f.content)&&z.getAttribute("name")===(f.name==null?null:f.name)&&z.getAttribute("property")===(f.property==null?null:f.property)&&z.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&z.getAttribute("charset")===(f.charSet==null?null:f.charSet)){Y.splice(ue,1);break t}}z=E.createElement(b),Wn(z,b,f),E.head.appendChild(z);break;default:throw Error(p(468,b))}z[yt]=r,ut(z),b=z}r.stateNode=b}else T(E,r.type,r.stateNode);else r.stateNode=s(E,b,r.memoizedProps);else z!==b?(z===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):z.count--,b===null?T(E,r.type,r.stateNode):s(E,b,r.memoizedProps)):b===null&&r.stateNode!==null&&Qm(r,r.memoizedProps,f.memoizedProps)}break;case 27:if(b&4&&r.alternate===null){E=r.stateNode,z=r.memoizedProps;try{for(var Me=E.firstChild;Me;){var Ne=Me.nextSibling,ft=Me.nodeName;Me[_n]||ft==="HEAD"||ft==="BODY"||ft==="SCRIPT"||ft==="STYLE"||ft==="LINK"&&Me.rel.toLowerCase()==="stylesheet"||E.removeChild(Me),Me=Ne}for(var Mt=r.type,et=E.attributes;et.length;)E.removeAttributeNode(et[0]);Wn(E,Mt,z),E[yt]=r,E[Lt]=z}catch(Qt){Yr(r,r.return,Qt)}}case 5:if(as(u,r),ss(r),b&512&&(Ar||f===null||ns(f,f.return)),r.flags&32){E=r.stateNode;try{cr(E,"")}catch(Qt){Yr(r,r.return,Qt)}}b&4&&r.stateNode!=null&&(E=r.memoizedProps,Qm(r,E,f!==null?f.memoizedProps:E)),b&1024&&(uu=!0);break;case 6:if(as(u,r),ss(r),b&4){if(r.stateNode===null)throw Error(p(162));b=r.memoizedProps,f=r.stateNode;try{f.nodeValue=b}catch(Qt){Yr(r,r.return,Qt)}}break;case 3:if(g=null,E=ia,ia=Ed(u.containerInfo),as(u,r),ia=E,ss(r),b&4&&f!==null&&f.memoizedState.isDehydrated)try{Hi(u.containerInfo)}catch(Qt){Yr(r,r.return,Qt)}uu&&(uu=!1,sh(r));break;case 4:b=ia,ia=Ed(r.stateNode.containerInfo),as(u,r),ss(r),ia=b;break;case 12:as(u,r),ss(r);break;case 13:as(u,r),ss(r),r.child.flags&8192&&r.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(vf=Ut()),b&4&&(b=r.updateQueue,b!==null&&(r.updateQueue=null,Ap(r,b)));break;case 22:if(b&512&&(Ar||f===null||ns(f,f.return)),Me=r.memoizedState!==null,Ne=f!==null&&f.memoizedState!==null,ft=dl,Mt=Ar,dl=ft||Me,Ar=Mt||Ne,as(u,r),Ar=Mt,dl=ft,ss(r),u=r.stateNode,u._current=r,u._visibility&=-3,u._visibility|=u._pendingVisibility&2,b&8192&&(u._visibility=Me?u._visibility&-2:u._visibility|1,Me&&(u=dl||Ar,f===null||Ne||u||nc(r)),r.memoizedProps===null||r.memoizedProps.mode!=="manual"))e:for(f=null,u=r;;){if(u.tag===5||u.tag===26||u.tag===27){if(f===null){Ne=f=u;try{if(E=Ne.stateNode,Me)z=E.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{Y=Ne.stateNode,ue=Ne.memoizedProps.style;var lt=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;Y.style.display=lt==null||typeof lt=="boolean"?"":(""+lt).trim()}}catch(Qt){Yr(Ne,Ne.return,Qt)}}}else if(u.tag===6){if(f===null){Ne=u;try{Ne.stateNode.nodeValue=Me?"":Ne.memoizedProps}catch(Qt){Yr(Ne,Ne.return,Qt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===r)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===r)break e;for(;u.sibling===null;){if(u.return===null||u.return===r)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}b&4&&(b=r.updateQueue,b!==null&&(f=b.retryQueue,f!==null&&(b.retryQueue=null,Ap(r,f))));break;case 19:as(u,r),ss(r),b&4&&(b=r.updateQueue,b!==null&&(r.updateQueue=null,Ap(r,b)));break;case 21:break;default:as(u,r),ss(r)}}function ss(r){var u=r.flags;if(u&2){try{if(r.tag!==27){e:{for(var f=r.return;f!==null;){if(df(f)){var b=f;break e}f=f.return}throw Error(p(160))}switch(b.tag){case 27:var E=b.stateNode,z=wp(r);lu(r,z,E);break;case 5:var Y=b.stateNode;b.flags&32&&(cr(Y,""),b.flags&=-33);var ue=wp(r);lu(r,ue,Y);break;case 3:case 4:var Me=b.stateNode.containerInfo,Ne=wp(r);ff(r,Ne,Me);break;default:throw Error(p(161))}}}catch(ft){Yr(r,r.return,ft)}r.flags&=-3}u&4096&&(r.flags&=-4097)}function sh(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var u=r;sh(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),r=r.sibling}}function Ws(r,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Tp(r,u.alternate,u),u=u.sibling}function nc(r){for(r=r.child;r!==null;){var u=r;switch(u.tag){case 0:case 11:case 14:case 15:ou(4,u,u.return),nc(u);break;case 1:ns(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&Ym(u,u.return,f),nc(u);break;case 26:case 27:case 5:ns(u,u.return),nc(u);break;case 22:ns(u,u.return),u.memoizedState===null&&nc(u);break;default:nc(u)}r=r.sibling}}function fl(r,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var b=u.alternate,E=r,z=u,Y=z.flags;switch(z.tag){case 0:case 11:case 15:fl(E,z,f),hl(4,z);break;case 1:if(fl(E,z,f),b=z,E=b.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(Ne){Yr(b,b.return,Ne)}if(b=z,E=b.updateQueue,E!==null){var ue=b.stateNode;try{var Me=E.shared.hiddenCallbacks;if(Me!==null)for(E.shared.hiddenCallbacks=null,E=0;E<Me.length;E++)bp(Me[E],ue)}catch(Ne){Yr(b,b.return,Ne)}}f&&Y&64&&Km(z),rc(z,z.return);break;case 26:case 27:case 5:fl(E,z,f),f&&b===null&&Y&4&&Xm(z),rc(z,z.return);break;case 12:fl(E,z,f);break;case 13:fl(E,z,f),f&&Y&4&&ic(E,z);break;case 22:z.memoizedState===null&&fl(E,z,f),rc(z,z.return);break;default:fl(E,z,f)}u=u.sibling}}function Cp(r,u){var f=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),r=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(r=u.memoizedState.cachePool.pool),r!==f&&(r!=null&&r.refCount++,f!=null&&es(f))}function Ep(r,u){r=null,u.alternate!==null&&(r=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==r&&(u.refCount++,r!=null&&es(r))}function cu(r,u,f,b){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)eg(r,u,f,b),u=u.sibling}function eg(r,u,f,b){var E=u.flags;switch(u.tag){case 0:case 11:case 15:cu(r,u,f,b),E&2048&&hl(9,u);break;case 3:cu(r,u,f,b),E&2048&&(r=null,u.alternate!==null&&(r=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==r&&(u.refCount++,r!=null&&es(r)));break;case 12:if(E&2048){cu(r,u,f,b),r=u.stateNode;try{var z=u.memoizedProps,Y=z.id,ue=z.onPostCommit;typeof ue=="function"&&ue(Y,u.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(Me){Yr(u,u.return,Me)}}else cu(r,u,f,b);break;case 23:break;case 22:z=u.stateNode,u.memoizedState!==null?z._visibility&4?cu(r,u,f,b):ac(r,u):z._visibility&4?cu(r,u,f,b):(z._visibility|=4,oh(r,u,f,b,(u.subtreeFlags&10256)!==0)),E&2048&&Cp(u.alternate,u);break;case 24:cu(r,u,f,b),E&2048&&Ep(u.alternate,u);break;default:cu(r,u,f,b)}}function oh(r,u,f,b,E){for(E=E&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var z=r,Y=u,ue=f,Me=b,Ne=Y.flags;switch(Y.tag){case 0:case 11:case 15:oh(z,Y,ue,Me,E),hl(8,Y);break;case 23:break;case 22:var ft=Y.stateNode;Y.memoizedState!==null?ft._visibility&4?oh(z,Y,ue,Me,E):ac(z,Y):(ft._visibility|=4,oh(z,Y,ue,Me,E)),E&&Ne&2048&&Cp(Y.alternate,Y);break;case 24:oh(z,Y,ue,Me,E),E&&Ne&2048&&Ep(Y.alternate,Y);break;default:oh(z,Y,ue,Me,E)}u=u.sibling}}function ac(r,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=r,b=u,E=b.flags;switch(b.tag){case 22:ac(f,b),E&2048&&Cp(b.alternate,b);break;case 24:ac(f,b),E&2048&&Ep(b.alternate,b);break;default:ac(f,b)}u=u.sibling}}var lh=8192;function hu(r){if(r.subtreeFlags&lh)for(r=r.child;r!==null;)Pp(r),r=r.sibling}function Pp(r){switch(r.tag){case 26:hu(r),r.flags&lh&&r.memoizedState!==null&&V(ia,r.memoizedState,r.memoizedProps);break;case 5:hu(r);break;case 3:case 4:var u=ia;ia=Ed(r.stateNode.containerInfo),hu(r),ia=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=lh,lh=16777216,hu(r),lh=u):hu(r));break;default:hu(r)}}function pf(r){var u=r.alternate;if(u!==null&&(r=u.child,r!==null)){u.child=null;do u=r.sibling,r.sibling=null,r=u;while(r!==null)}}function uh(r){var u=r.deletions;if((r.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var b=u[f];pn=b,Ip(b,r)}pf(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Rp(r),r=r.sibling}function Rp(r){switch(r.tag){case 0:case 11:case 15:uh(r),r.flags&2048&&ou(9,r,r.return);break;case 3:uh(r);break;case 12:uh(r);break;case 22:var u=r.stateNode;r.memoizedState!==null&&u._visibility&4&&(r.return===null||r.return.tag!==13)?(u._visibility&=-5,sc(r)):uh(r);break;default:uh(r)}}function sc(r){var u=r.deletions;if((r.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var b=u[f];pn=b,Ip(b,r)}pf(r)}for(r=r.child;r!==null;){switch(u=r,u.tag){case 0:case 11:case 15:ou(8,u,u.return),sc(u);break;case 22:f=u.stateNode,f._visibility&4&&(f._visibility&=-5,sc(u));break;default:sc(u)}r=r.sibling}}function Ip(r,u){for(;pn!==null;){var f=pn;switch(f.tag){case 0:case 11:case 15:ou(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var b=f.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:es(f.memoizedState.cache)}if(b=f.child,b!==null)b.return=f,pn=b;else e:for(f=r;pn!==null;){b=pn;var E=b.sibling,z=b.return;if(Mp(b),b===f){pn=null;break e}if(E!==null){E.return=z,pn=E;break e}pn=z}}}function tg(r,u,f,b){this.tag=r,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function os(r,u,f,b){return new tg(r,u,f,b)}function oc(r){return r=r.prototype,!(!r||!r.isReactComponent)}function du(r,u){var f=r.alternate;return f===null?(f=os(r.tag,u,r.key,r.mode),f.elementType=r.elementType,f.type=r.type,f.stateNode=r.stateNode,f.alternate=r,r.alternate=f):(f.pendingProps=u,f.type=r.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=r.flags&31457280,f.childLanes=r.childLanes,f.lanes=r.lanes,f.child=r.child,f.memoizedProps=r.memoizedProps,f.memoizedState=r.memoizedState,f.updateQueue=r.updateQueue,u=r.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=r.sibling,f.index=r.index,f.ref=r.ref,f.refCleanup=r.refCleanup,f}function mf(r,u){r.flags&=31457282;var f=r.alternate;return f===null?(r.childLanes=0,r.lanes=u,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=f.childLanes,r.lanes=f.lanes,r.child=f.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=f.memoizedProps,r.memoizedState=f.memoizedState,r.updateQueue=f.updateQueue,r.type=f.type,u=f.dependencies,r.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),r}function fu(r,u,f,b,E,z){var Y=0;if(b=r,typeof r=="function")oc(r)&&(Y=1);else if(typeof r=="string")Y=A(r,f,li.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case C:return pl(f.children,E,z,u);case P:Y=8,E|=24;break;case k:return r=os(12,f,u,E|2),r.elementType=k,r.lanes=z,r;case ee:return r=os(13,f,u,E),r.elementType=ee,r.lanes=z,r;case X:return r=os(19,f,u,E),r.elementType=X,r.lanes=z,r;case me:return rg(f,E,z,u);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:case F:Y=10;break e;case L:Y=9;break e;case G:Y=11;break e;case W:Y=14;break e;case pe:Y=16,b=null;break e}Y=29,f=Error(p(130,r===null?"null":typeof r,"")),b=null}return u=os(Y,f,u,E),u.elementType=r,u.type=b,u.lanes=z,u}function pl(r,u,f,b){return r=os(7,r,b,u),r.lanes=f,r}function rg(r,u,f,b){r=os(22,r,b,u),r.elementType=me,r.lanes=f;var E={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var z=E._current;if(z===null)throw Error(p(456));if((E._pendingVisibility&2)===0){var Y=go(z,2);Y!==null&&(E._pendingVisibility|=2,na(Y,z,2))}},attach:function(){var z=E._current;if(z===null)throw Error(p(456));if((E._pendingVisibility&2)!==0){var Y=go(z,2);Y!==null&&(E._pendingVisibility&=-3,na(Y,z,2))}}};return r.stateNode=E,r}function Dp(r,u,f){return r=os(6,r,null,u),r.lanes=f,r}function gf(r,u,f){return u=os(4,r.children!==null?r.children:[],r.key,u),u.lanes=f,u.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},u}function Eo(r){r.flags|=4}function ig(r,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!I(u)){if(u=Xi.current,u!==null&&((Jr&4194176)===Jr?Ja!==null:(Jr&62914560)!==Jr&&(Jr&536870912)===0||u!==Ja))throw el=qu,Ns;r.flags|=8192}}function yf(r,u){u!==null&&(r.flags|=4),r.flags&16384&&(u=r.tag!==22?Pt():536870912,r.lanes|=u,ch|=u)}function ml(r,u){if(!jr)switch(r.tailMode){case"hidden":u=r.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?r.tail=null:f.sibling=null;break;case"collapsed":f=r.tail;for(var b=null;f!==null;)f.alternate!==null&&(b=f),f=f.sibling;b===null?u||r.tail===null?r.tail=null:r.tail.sibling=null:b.sibling=null}}function qi(r){var u=r.alternate!==null&&r.alternate.child===r.child,f=0,b=0;if(u)for(var E=r.child;E!==null;)f|=E.lanes|E.childLanes,b|=E.subtreeFlags&31457280,b|=E.flags&31457280,E.return=r,E=E.sibling;else for(E=r.child;E!==null;)f|=E.lanes|E.childLanes,b|=E.subtreeFlags,b|=E.flags,E.return=r,E=E.sibling;return r.subtreeFlags|=b,r.childLanes=f,u}function o0(r,u,f){var b=u.pendingProps;switch($l(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qi(u),null;case 1:return qi(u),null;case 3:return f=u.stateNode,b=null,r!==null&&(b=r.memoizedState.cache),u.memoizedState.cache!==b&&(u.flags|=2048),Co(Bi),Fi(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(Xo(u)?Eo(u):r===null||r.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,ta!==null&&(Ro(ta),ta=null))),qi(u),null;case 26:return f=u.memoizedState,r===null?(Eo(u),f!==null?(qi(u),ig(u,f)):(qi(u),u.flags&=-16777217)):f?f!==r.memoizedState?(Eo(u),qi(u),ig(u,f)):(qi(u),u.flags&=-16777217):(r.memoizedProps!==b&&Eo(u),qi(u),u.flags&=-16777217),null;case 27:we(u),f=zr.current;var E=u.type;if(r!==null&&u.stateNode!=null)r.memoizedProps!==b&&Eo(u);else{if(!b){if(u.stateNode===null)throw Error(p(166));return qi(u),null}r=li.current,Xo(u)?_o(u):(r=xl(E,b,f),u.stateNode=r,Eo(u))}return qi(u),null;case 5:if(we(u),f=u.type,r!==null&&u.stateNode!=null)r.memoizedProps!==b&&Eo(u);else{if(!b){if(u.stateNode===null)throw Error(p(166));return qi(u),null}if(r=li.current,Xo(u))_o(u);else{switch(E=Ad(zr.current),r){case 1:r=E.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:r=E.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":r=E.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":r=E.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":r=E.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof b.is=="string"?E.createElement("select",{is:b.is}):E.createElement("select"),b.multiple?r.multiple=!0:b.size&&(r.size=b.size);break;default:r=typeof b.is=="string"?E.createElement(f,{is:b.is}):E.createElement(f)}}r[yt]=u,r[Lt]=b;e:for(E=u.child;E!==null;){if(E.tag===5||E.tag===6)r.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===u)break e;for(;E.sibling===null;){if(E.return===null||E.return===u)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}u.stateNode=r;e:switch(Wn(r,f,b),f){case"button":case"input":case"select":case"textarea":r=!!b.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Eo(u)}}return qi(u),u.flags&=-16777217,null;case 6:if(r&&u.stateNode!=null)r.memoizedProps!==b&&Eo(u);else{if(typeof b!="string"&&u.stateNode===null)throw Error(p(166));if(r=zr.current,Xo(u)){if(r=u.stateNode,f=u.memoizedProps,b=null,E=zn,E!==null)switch(E.tag){case 27:case 5:b=E.memoizedProps}r[yt]=u,r=!!(r.nodeValue===f||b!==null&&b.suppressHydrationWarning===!0||Xp(r.nodeValue,f)),r||ui(u)}else r=Ad(r).createTextNode(b),r[yt]=u,u.stateNode=r}return qi(u),null;case 13:if(b=u.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(E=Xo(u),b!==null&&b.dehydrated!==null){if(r===null){if(!E)throw Error(p(318));if(E=u.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(p(317));E[yt]=u}else Qo(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;qi(u),E=!1}else ta!==null&&(Ro(ta),ta=null),E=!0;if(!E)return u.flags&256?(Ts(u),u):(Ts(u),null)}if(Ts(u),(u.flags&128)!==0)return u.lanes=f,u;if(f=b!==null,r=r!==null&&r.memoizedState!==null,f){b=u.child,E=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(E=b.alternate.memoizedState.cachePool.pool);var z=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(z=b.memoizedState.cachePool.pool),z!==E&&(b.flags|=2048)}return f!==r&&f&&(u.child.flags|=8192),yf(u,u.updateQueue),qi(u),null;case 4:return Fi(),r===null&&Af(u.stateNode.containerInfo),qi(u),null;case 10:return Co(u.type),qi(u),null;case 19:if(ti(di),E=u.memoizedState,E===null)return qi(u),null;if(b=(u.flags&128)!==0,z=E.rendering,z===null)if(b)ml(E,!1);else{if(rn!==0||r!==null&&(r.flags&128)!==0)for(r=u.child;r!==null;){if(z=Ea(r),z!==null){for(u.flags|=128,ml(E,!1),r=z.updateQueue,u.updateQueue=r,yf(u,r),u.subtreeFlags=0,r=f,f=u.child;f!==null;)mf(f,r),f=f.sibling;return Ur(di,di.current&1|2),u.child}r=r.sibling}E.tail!==null&&Ut()>Gi&&(u.flags|=128,b=!0,ml(E,!1),u.lanes=4194304)}else{if(!b)if(r=Ea(z),r!==null){if(u.flags|=128,b=!0,r=r.updateQueue,u.updateQueue=r,yf(u,r),ml(E,!0),E.tail===null&&E.tailMode==="hidden"&&!z.alternate&&!jr)return qi(u),null}else 2*Ut()-E.renderingStartTime>Gi&&f!==536870912&&(u.flags|=128,b=!0,ml(E,!1),u.lanes=4194304);E.isBackwards?(z.sibling=u.child,u.child=z):(r=E.last,r!==null?r.sibling=z:u.child=z,E.last=z)}return E.tail!==null?(u=E.tail,E.rendering=u,E.tail=u.sibling,E.renderingStartTime=Ut(),u.sibling=null,r=di.current,Ur(di,b?r&1|2:r&1),u):(qi(u),null);case 22:case 23:return Ts(u),Ca(),b=u.memoizedState!==null,r!==null?r.memoizedState!==null!==b&&(u.flags|=8192):b&&(u.flags|=8192),b?(f&536870912)!==0&&(u.flags&128)===0&&(qi(u),u.subtreeFlags&6&&(u.flags|=8192)):qi(u),f=u.updateQueue,f!==null&&yf(u,f.retryQueue),f=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),b=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),b!==f&&(u.flags|=2048),r!==null&&ti(Ms),null;case 24:return f=null,r!==null&&(f=r.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),Co(Bi),qi(u),null;case 25:return null}throw Error(p(156,u.tag))}function l0(r,u){switch($l(u),u.tag){case 1:return r=u.flags,r&65536?(u.flags=r&-65537|128,u):null;case 3:return Co(Bi),Fi(),r=u.flags,(r&65536)!==0&&(r&128)===0?(u.flags=r&-65537|128,u):null;case 26:case 27:case 5:return we(u),null;case 13:if(Ts(u),r=u.memoizedState,r!==null&&r.dehydrated!==null){if(u.alternate===null)throw Error(p(340));Qo()}return r=u.flags,r&65536?(u.flags=r&-65537|128,u):null;case 19:return ti(di),null;case 4:return Fi(),null;case 10:return Co(u.type),null;case 22:case 23:return Ts(u),Ca(),r!==null&&ti(Ms),r=u.flags,r&65536?(u.flags=r&-65537|128,u):null;case 24:return Co(Bi),null;case 25:return null;default:return null}}function ng(r,u){switch($l(u),u.tag){case 3:Co(Bi),Fi();break;case 26:case 27:case 5:we(u);break;case 4:Fi();break;case 13:Ts(u);break;case 19:ti(di);break;case 10:Co(u.type);break;case 22:case 23:Ts(u),Ca(),r!==null&&ti(Ms);break;case 24:Co(Bi)}}var u0={getCacheForType:function(r){var u=Gn(Bi),f=u.data.get(r);return f===void 0&&(f=r(),u.data.set(r,f)),f}},c0=typeof WeakMap=="function"?WeakMap:Map,Qi=0,Ci=null,Nr=null,Jr=0,Ei=0,ka=null,gl=!1,yl=!1,zp=!1,Po=0,rn=0,pu=0,lc=0,_f=0,Ps=0,ch=0,_l=null,Ks=null,yd=!1,vf=0,Gi=1/0,hh=null,mu=null,_d=!1,vl=null,uc=0,Lp=0,kp=null,vd=0,Bp=null;function Ba(){if((Qi&2)!==0&&Jr!==0)return Jr&-Jr;if(Ye.T!==null){var r=Vs;return r!==0?r:Tf()}return Vr()}function ca(){Ps===0&&(Ps=(Jr&536870912)===0||jr?dt():536870912);var r=Xi.current;return r!==null&&(r.flags|=32),Ps}function na(r,u,f){(r===Ci&&Ei===2||r.cancelPendingCommit!==null)&&(fh(r,0),Oa(r,Jr,Ps,!1)),Ft(r,f),((Qi&2)===0||r!==Ci)&&(r===Ci&&((Qi&2)===0&&(lc|=f),rn===4&&Oa(r,Jr,Ps,!1)),Ys(r))}function Op(r,u,f){if((Qi&6)!==0)throw Error(p(327));var b=!f&&(u&60)===0&&(u&r.expiredLanes)===0||qe(r,u),E=b?Up(r,u):xf(r,u,!0),z=b;do{if(E===0){yl&&!b&&Oa(r,u,0,!1);break}else if(E===6)Oa(r,u,0,!gl);else{if(f=r.current.alternate,z&&!bd(f)){E=xf(r,u,!1),z=!1;continue}if(E===2){if(z=u,r.errorRecoveryDisabledLanes&z)var Y=0;else Y=r.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){u=Y;e:{var ue=r;E=_l;var Me=ue.current.memoizedState.isDehydrated;if(Me&&(fh(ue,Y).flags|=256),Y=xf(ue,Y,!1),Y!==2){if(zp&&!Me){ue.errorRecoveryDisabledLanes|=z,lc|=z,E=4;break e}z=Ks,Ks=E,z!==null&&Ro(z)}E=Y}if(z=!1,E!==2)continue}}if(E===1){fh(r,0),Oa(r,u,0,!0);break}e:{switch(b=r,E){case 0:case 1:throw Error(p(345));case 4:if((u&4194176)===u){Oa(b,u,Ps,!gl);break e}break;case 2:Ks=null;break;case 3:case 5:break;default:throw Error(p(329))}if(b.finishedWork=f,b.finishedLanes=u,(u&62914560)===u&&(z=vf+300-Ut(),10<z)){if(Oa(b,u,Ps,!gl),Ue(b,0)!==0)break e;b.timeoutHandle=tm(xd.bind(null,b,f,Ks,hh,yd,u,Ps,lc,ch,gl,2,-0,0),z);break e}xd(b,f,Ks,hh,yd,u,Ps,lc,ch,gl,0,-0,0)}}break}while(!0);Ys(r)}function Ro(r){Ks===null?Ks=r:Ks.push.apply(Ks,r)}function xd(r,u,f,b,E,z,Y,ue,Me,Ne,ft,Mt,et){var lt=u.subtreeFlags;if((lt&8192||(lt&16785408)===16785408)&&(B={stylesheets:null,count:0,unsuspend:N},Pp(u),u=H(),u!==null)){r.cancelPendingCommit=u(ug.bind(null,r,f,b,E,Y,ue,Me,1,Mt,et)),Oa(r,z,Y,!Ne);return}ug(r,f,b,E,Y,ue,Me,ft,Mt,et)}function bd(r){for(var u=r;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var b=0;b<f.length;b++){var E=f[b],z=E.getSnapshot;E=E.value;try{if(!Qn(z(),E))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===r)break;for(;u.sibling===null;){if(u.return===null||u.return===r)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Oa(r,u,f,b){u&=~_f,u&=~lc,r.suspendedLanes|=u,r.pingedLanes&=~u,b&&(r.warmLanes|=u),b=r.expirationTimes;for(var E=u;0<E;){var z=31-ae(E),Y=1<<z;b[z]=-1,E&=~Y}f!==0&&Je(r,f,u)}function cc(){return(Qi&6)===0?(dc(0),!1):!0}function dh(){if(Nr!==null){if(Ei===0)var r=Nr.return;else r=Nr,ll=tu=null,Pa(r),$n=null,ql=0,r=Nr;for(;r!==null;)ng(r.alternate,r),r=r.return;Nr=null}}function fh(r,u){r.finishedWork=null,r.finishedLanes=0;var f=r.timeoutHandle;f!==-1&&(r.timeoutHandle=-1,If(f)),f=r.cancelPendingCommit,f!==null&&(r.cancelPendingCommit=null,f()),dh(),Ci=r,Nr=f=du(r.current,null),Jr=u,Ei=0,ka=null,gl=!1,yl=qe(r,u),zp=!1,ch=Ps=_f=lc=pu=rn=0,Ks=_l=null,yd=!1,(u&8)!==0&&(u|=u&32);var b=r.entangledLanes;if(b!==0)for(r=r.entanglements,b&=u;0<b;){var E=31-ae(b),z=1<<E;u|=r[E],b&=~z}return Po=u,Uc(),f}function ag(r,u){Ir=null,Ye.H=Dr,u===Qa?(u=Gc(),Ei=3):u===Ns?(u=Gc(),Ei=4):Ei=u===Oi?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ka=u,Nr===null&&(rn=1,qn(r,bn(u,r.current)))}function jp(){var r=Ye.H;return Ye.H=Dr,r===null?Dr:r}function Np(){var r=Ye.A;return Ye.A=u0,r}function Fp(){rn=4,gl||(Jr&4194176)!==Jr&&Xi.current!==null||(yl=!0),(pu&134217727)===0&&(lc&134217727)===0||Ci===null||Oa(Ci,Jr,Ps,!1)}function xf(r,u,f){var b=Qi;Qi|=2;var E=jp(),z=Np();(Ci!==r||Jr!==u)&&(hh=null,fh(r,u)),u=!1;var Y=rn;e:do try{if(Ei!==0&&Nr!==null){var ue=Nr,Me=ka;switch(Ei){case 8:dh(),Y=6;break e;case 3:case 2:case 6:Xi.current===null&&(u=!0);var Ne=Ei;if(Ei=0,ka=null,ph(r,ue,Me,Ne),f&&yl){Y=0;break e}break;default:Ne=Ei,Ei=0,ka=null,ph(r,ue,Me,Ne)}}sg(),Y=rn;break}catch(ft){ag(r,ft)}while(!0);return u&&r.shellSuspendCounter++,ll=tu=null,Qi=b,Ye.H=E,Ye.A=z,Nr===null&&(Ci=null,Jr=0,Uc()),Y}function sg(){for(;Nr!==null;)og(Nr)}function Up(r,u){var f=Qi;Qi|=2;var b=jp(),E=Np();Ci!==r||Jr!==u?(hh=null,Gi=Ut()+500,fh(r,u)):yl=qe(r,u);e:do try{if(Ei!==0&&Nr!==null){u=Nr;var z=ka;t:switch(Ei){case 1:Ei=0,ka=null,ph(r,u,z,1);break;case 2:if(qc(z)){Ei=0,ka=null,$p(u);break}u=function(){Ei===2&&Ci===r&&(Ei=7),Ys(r)},z.then(u,u);break e;case 3:Ei=7;break e;case 4:Ei=5;break e;case 7:qc(z)?(Ei=0,ka=null,$p(u)):(Ei=0,ka=null,ph(r,u,z,7));break;case 5:var Y=null;switch(Nr.tag){case 26:Y=Nr.memoizedState;case 5:case 27:var ue=Nr;if(!Y||I(Y)){Ei=0,ka=null;var Me=ue.sibling;if(Me!==null)Nr=Me;else{var Ne=ue.return;Ne!==null?(Nr=Ne,bf(Ne)):Nr=null}break t}}Ei=0,ka=null,ph(r,u,z,5);break;case 6:Ei=0,ka=null,ph(r,u,z,6);break;case 8:dh(),rn=6;break e;default:throw Error(p(462))}}Vp();break}catch(ft){ag(r,ft)}while(!0);return ll=tu=null,Ye.H=b,Ye.A=E,Qi=f,Nr!==null?0:(Ci=null,Jr=0,Uc(),rn)}function Vp(){for(;Nr!==null&&!xt();)og(Nr)}function og(r){var u=ud(r.alternate,r,Po);r.memoizedProps=r.pendingProps,u===null?bf(r):Nr=u}function $p(r){var u=r,f=u.alternate;switch(u.tag){case 15:case 0:u=nh(f,u,u.pendingProps,u.type,void 0,Jr);break;case 11:u=nh(f,u,u.pendingProps,u.type.render,u.ref,Jr);break;case 5:Pa(u);default:ng(f,u),u=Nr=mf(u,Po),u=ud(f,u,Po)}r.memoizedProps=r.pendingProps,u===null?bf(r):Nr=u}function ph(r,u,f,b){ll=tu=null,Pa(u),$n=null,ql=0;var E=u.return;try{if(vi(r,E,u,f,Jr)){rn=1,qn(r,bn(f,r.current)),Nr=null;return}}catch(z){if(E!==null)throw Nr=E,z;rn=1,qn(r,bn(f,r.current)),Nr=null;return}u.flags&32768?(jr||b===1?r=!0:yl||(Jr&536870912)!==0?r=!1:(gl=r=!0,(b===2||b===3||b===6)&&(b=Xi.current,b!==null&&b.tag===13&&(b.flags|=16384))),lg(u,r)):bf(u)}function bf(r){var u=r;do{if((u.flags&32768)!==0){lg(u,gl);return}r=u.return;var f=o0(u.alternate,u,Po);if(f!==null){Nr=f;return}if(u=u.sibling,u!==null){Nr=u;return}Nr=u=r}while(u!==null);rn===0&&(rn=5)}function lg(r,u){do{var f=l0(r.alternate,r);if(f!==null){f.flags&=32767,Nr=f;return}if(f=r.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(r=r.sibling,r!==null)){Nr=r;return}Nr=r=f}while(r!==null);rn=6,Nr=null}function ug(r,u,f,b,E,z,Y,ue,Me,Ne){var ft=Ye.T,Mt=zt.p;try{zt.p=2,Ye.T=null,h0(r,u,f,b,Mt,E,z,Y,ue,Me,Ne)}finally{Ye.T=ft,zt.p=Mt}}function h0(r,u,f,b,E,z,Y,ue){do hc();while(vl!==null);if((Qi&6)!==0)throw Error(p(327));var Me=r.finishedWork;if(b=r.finishedLanes,Me===null)return null;if(r.finishedWork=null,r.finishedLanes=0,Me===r.current)throw Error(p(177));r.callbackNode=null,r.callbackPriority=0,r.cancelPendingCommit=null;var Ne=Me.lanes|Me.childLanes;if(Ne|=Nl,lr(r,b,Ne,z,Y,ue),r===Ci&&(Nr=Ci=null,Jr=0),(Me.subtreeFlags&10256)===0&&(Me.flags&10256)===0||_d||(_d=!0,Lp=Ne,kp=f,Sf(Pi,function(){return hc(),null})),f=(Me.flags&15990)!==0,(Me.subtreeFlags&15990)!==0||f?(f=Ye.T,Ye.T=null,z=zt.p,zt.p=2,Y=Qi,Qi|=4,pd(r,Me),Jm(Me,r),Jd(Pf,r.containerInfo),Xe=!!Ef,Pf=Ef=null,r.current=Me,Tp(r,Me.alternate,Me),Et(),Qi=Y,zt.p=z,Ye.T=f):r.current=Me,_d?(_d=!1,vl=r,uc=b):Zp(r,Ne),Ne=r.pendingLanes,Ne===0&&(mu=null),je(Me.stateNode),Ys(r),u!==null)for(E=r.onRecoverableError,Me=0;Me<u.length;Me++)Ne=u[Me],E(Ne.value,{componentStack:Ne.stack});return(uc&3)!==0&&hc(),Ne=r.pendingLanes,(b&4194218)!==0&&(Ne&42)!==0?r===Bp?vd++:(vd=0,Bp=r):vd=0,dc(0),null}function Zp(r,u){(r.pooledCacheLanes&=u)===0&&(u=r.pooledCache,u!=null&&(r.pooledCache=null,es(u)))}function hc(){if(vl!==null){var r=vl,u=Lp;Lp=0;var f=vr(uc),b=Ye.T,E=zt.p;try{if(zt.p=32>f?32:f,Ye.T=null,vl===null)var z=!1;else{f=kp,kp=null;var Y=vl,ue=uc;if(vl=null,uc=0,(Qi&6)!==0)throw Error(p(331));var Me=Qi;if(Qi|=4,Rp(Y.current),eg(Y,Y.current,ue,f),Qi=Me,dc(0,!1),ri&&typeof ri.onPostCommitFiberRoot=="function")try{ri.onPostCommitFiberRoot(ni,Y)}catch{}z=!0}return z}finally{zt.p=E,Ye.T=b,Zp(r,u)}}return!1}function mh(r,u,f){u=bn(f,u),u=is(r.stateNode,u,2),r=au(r,u,2),r!==null&&(Ft(r,2),Ys(r))}function Yr(r,u,f){if(r.tag===3)mh(r,r,f);else for(;u!==null;){if(u.tag===3){mh(u,r,f);break}else if(u.tag===1){var b=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(mu===null||!mu.has(b))){r=bn(f,r),f=Cs(2),b=au(u,f,2),b!==null&&(Ai(f,b,u,r),Ft(b,2),Ys(b));break}}u=u.return}}function Io(r,u,f){var b=r.pingCache;if(b===null){b=r.pingCache=new c0;var E=new Set;b.set(u,E)}else E=b.get(u),E===void 0&&(E=new Set,b.set(u,E));E.has(f)||(zp=!0,E.add(f),r=cg.bind(null,r,u,f),u.then(r,r))}function cg(r,u,f){var b=r.pingCache;b!==null&&b.delete(u),r.pingedLanes|=r.suspendedLanes&f,r.warmLanes&=~f,Ci===r&&(Jr&f)===f&&(rn===4||rn===3&&(Jr&62914560)===Jr&&300>Ut()-vf?(Qi&2)===0&&fh(r,0):_f|=f,ch===Jr&&(ch=0)),Ys(r)}function wf(r,u){u===0&&(u=Pt()),r=go(r,u),r!==null&&(Ft(r,u),Ys(r))}function d0(r){var u=r.memoizedState,f=0;u!==null&&(f=u.retryLane),wf(r,f)}function f0(r,u){var f=0;switch(r.tag){case 13:var b=r.stateNode,E=r.memoizedState;E!==null&&(f=E.retryLane);break;case 19:b=r.stateNode;break;case 22:b=r.stateNode._retryCache;break;default:throw Error(p(314))}b!==null&&b.delete(u),wf(r,f)}function Sf(r,u){return We(r,u)}var gh=null,yh=null,wd=!1,_h=!1,gu=!1,yu=0;function Ys(r){r!==yh&&r.next===null&&(yh===null?gh=yh=r:yh=yh.next=r),_h=!0,wd||(wd=!0,p0(hg))}function dc(r,u){if(!gu&&_h){gu=!0;do for(var f=!1,b=gh;b!==null;){if(r!==0){var E=b.pendingLanes;if(E===0)var z=0;else{var Y=b.suspendedLanes,ue=b.pingedLanes;z=(1<<31-ae(42|r)+1)-1,z&=E&~(Y&~ue),z=z&201326677?z&201326677|1:z?z|2:0}z!==0&&(f=!0,dg(b,z))}else z=Jr,z=Ue(b,b===Ci?z:0),(z&3)===0||qe(b,z)||(f=!0,dg(b,z));b=b.next}while(f);gu=!1}}function hg(){_h=wd=!1;var r=0;yu!==0&&(Cd()&&(r=yu),yu=0);for(var u=Ut(),f=null,b=gh;b!==null;){var E=b.next,z=Sd(b,u);z===0?(b.next=null,f===null?gh=E:f.next=E,E===null&&(yh=f)):(f=b,(r!==0||(z&3)!==0)&&(_h=!0)),b=E}dc(r)}function Sd(r,u){for(var f=r.suspendedLanes,b=r.pingedLanes,E=r.expirationTimes,z=r.pendingLanes&-62914561;0<z;){var Y=31-ae(z),ue=1<<Y,Me=E[Y];Me===-1?((ue&f)===0||(ue&b)!==0)&&(E[Y]=Fe(ue,u)):Me<=u&&(r.expiredLanes|=ue),z&=~ue}if(u=Ci,f=Jr,f=Ue(r,r===u?f:0),b=r.callbackNode,f===0||r===u&&Ei===2||r.cancelPendingCommit!==null)return b!==null&&b!==null&&vt(b),r.callbackNode=null,r.callbackPriority=0;if((f&3)===0||qe(r,f)){if(u=f&-f,u===r.callbackPriority)return u;switch(b!==null&&vt(b),vr(f)){case 2:case 8:f=qr;break;case 32:f=Pi;break;case 268435456:f=zi;break;default:f=Pi}return b=qp.bind(null,r),f=We(f,b),r.callbackPriority=u,r.callbackNode=f,u}return b!==null&&b!==null&&vt(b),r.callbackPriority=2,r.callbackNode=null,2}function qp(r,u){var f=r.callbackNode;if(hc()&&r.callbackNode!==f)return null;var b=Jr;return b=Ue(r,r===Ci?b:0),b===0?null:(Op(r,b,u),Sd(r,Ut()),r.callbackNode!=null&&r.callbackNode===f?qp.bind(null,r):null)}function dg(r,u){if(hc())return null;Op(r,u,!0)}function p0(r){Df(function(){(Qi&6)!==0?We(_r,r):r()})}function Tf(){return yu===0&&(yu=dt()),yu}function fg(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:oo(""+r)}function pg(r,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,r.id&&f.setAttribute("form",r.id),u.parentNode.insertBefore(f,u),r=new FormData(r),f.parentNode.removeChild(f),r}function m0(r,u,f,b,E){if(u==="submit"&&f&&f.stateNode===E){var z=fg((E[Lt]||null).action),Y=b.submitter;Y&&(u=(u=Y[Lt]||null)?fg(u.formAction):Y.getAttribute("formAction"),u!==null&&(z=u,Y=null));var ue=new ks("action","action",null,b,E);r.push({event:ue,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(yu!==0){var Me=Y?pg(E,Y):new FormData(E);He(f,{pending:!0,data:Me,method:E.method,action:z},null,Me)}}else typeof z=="function"&&(ue.preventDefault(),Me=Y?pg(E,Y):new FormData(E),He(f,{pending:!0,data:Me,method:E.method,action:z},z,Me))},currentTarget:E}]})}}for(var Gp=0;Gp<Go.length;Gp++){var Hp=Go[Gp],Wp=Hp.toLowerCase(),_u=Hp[0].toUpperCase()+Hp.slice(1);Ta(Wp,"on"+_u)}Ta(jc,"onAnimationEnd"),Ta(mo,"onAnimationIteration"),Ta(Vu,"onAnimationStart"),Ta("dblclick","onDoubleClick"),Ta("focusin","onFocus"),Ta("focusout","onBlur"),Ta(Nc,"onTransitionRun"),Ta($u,"onTransitionStart"),Ta(Fc,"onTransitionCancel"),Ta(Yh,"onTransitionEnd"),Li("onMouseEnter",["mouseout","mouseover"]),Li("onMouseLeave",["mouseout","mouseover"]),Li("onPointerEnter",["pointerout","pointerover"]),Li("onPointerLeave",["pointerout","pointerover"]),wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wr("onBeforeInput",["compositionend","keypress","textInput","paste"]),wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vh));function Kp(r,u){u=(u&4)!==0;for(var f=0;f<r.length;f++){var b=r[f],E=b.event;b=b.listeners;e:{var z=void 0;if(u)for(var Y=b.length-1;0<=Y;Y--){var ue=b[Y],Me=ue.instance,Ne=ue.currentTarget;if(ue=ue.listener,Me!==z&&E.isPropagationStopped())break e;z=ue,E.currentTarget=Ne;try{z(E)}catch(ft){Da(ft)}E.currentTarget=null,z=Me}else for(Y=0;Y<b.length;Y++){if(ue=b[Y],Me=ue.instance,Ne=ue.currentTarget,ue=ue.listener,Me!==z&&E.isPropagationStopped())break e;z=ue,E.currentTarget=Ne;try{z(E)}catch(ft){Da(ft)}E.currentTarget=null,z=Me}}}}function Xr(r,u){var f=u[Vi];f===void 0&&(f=u[Vi]=new Set);var b=r+"__bubble";f.has(b)||(bh(u,r,2,!1),f.add(b))}function Mf(r,u,f){var b=0;u&&(b|=4),bh(f,r,b,u)}var xh="_reactListening"+Math.random().toString(36).slice(2);function Af(r){if(!r[xh]){r[xh]=!0,io.forEach(function(f){f!=="selectionchange"&&(mg.has(f)||Mf(f,!1,r),Mf(f,!0,r))});var u=r.nodeType===9?r:r.ownerDocument;u===null||u[xh]||(u[xh]=!0,Mf("selectionchange",!1,u))}}function bh(r,u,f,b){switch(Yt(u)){case 2:var E=it;break;case 8:E=bt;break;default:E=gt}f=E.bind(null,u,f,r),E=void 0,!Fo||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(E=!0),b?E!==void 0?r.addEventListener(u,f,{capture:!0,passive:E}):r.addEventListener(u,f,!0):E!==void 0?r.addEventListener(u,f,{passive:E}):r.addEventListener(u,f,!1)}function Cf(r,u,f,b,E){var z=b;if((u&1)===0&&(u&2)===0&&b!==null)e:for(;;){if(b===null)return;var Y=b.tag;if(Y===3||Y===4){var ue=b.stateNode.containerInfo;if(ue===E||ue.nodeType===8&&ue.parentNode===E)break;if(Y===4)for(Y=b.return;Y!==null;){var Me=Y.tag;if((Me===3||Me===4)&&(Me=Y.stateNode.containerInfo,Me===E||Me.nodeType===8&&Me.parentNode===E))return;Y=Y.return}for(;ue!==null;){if(Y=$i(ue),Y===null)return;if(Me=Y.tag,Me===5||Me===6||Me===26||Me===27){b=z=Y;continue e}ue=ue.parentNode}}b=b.return}Ha(function(){var Ne=z,ft=Xn(f),Mt=[];e:{var et=qo.get(r);if(et!==void 0){var lt=ks,Qt=r;switch(r){case"keypress":if(hr(f)===0)break e;case"keydown":case"keyup":lt=Iu;break;case"focusin":Qt="focus",lt=Vn;break;case"focusout":Qt="blur",lt=Vn;break;case"beforeblur":case"afterblur":lt=Vn;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=Pu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=Un;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=Bh;break;case jc:case mo:case Vu:lt=hi;break;case Yh:lt=fp;break;case"scroll":case"scrollend":lt=Ac;break;case"wheel":lt=co;break;case"copy":case"cut":case"paste":lt=Ec;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=Du;break;case"toggle":case"beforetoggle":lt=Gd}var xr=(u&4)!==0,ln=!xr&&(r==="scroll"||r==="scrollend"),Ze=xr?et!==null?et+"Capture":null:et;xr=[];for(var Oe=Ne,Qe;Oe!==null;){var _t=Oe;if(Qe=_t.stateNode,_t=_t.tag,_t!==5&&_t!==26&&_t!==27||Qe===null||Ze===null||(_t=wa(Oe,Ze),_t!=null&&xr.push(fc(Oe,_t,Qe))),ln)break;Oe=Oe.return}0<xr.length&&(et=new lt(et,Qt,null,f,ft),Mt.push({event:et,listeners:xr}))}}if((u&7)===0){e:{if(et=r==="mouseover"||r==="pointerover",lt=r==="mouseout"||r==="pointerout",et&&f!==cn&&(Qt=f.relatedTarget||f.fromElement)&&($i(Qt)||Qt[Hr]))break e;if((lt||et)&&(et=ft.window===ft?ft:(et=ft.ownerDocument)?et.defaultView||et.parentWindow:window,lt?(Qt=f.relatedTarget||f.toElement,lt=Ne,Qt=Qt?$i(Qt):null,Qt!==null&&(ln=Rt(Qt),xr=Qt.tag,Qt!==ln||xr!==5&&xr!==27&&xr!==6)&&(Qt=null)):(lt=null,Qt=Ne),lt!==Qt)){if(xr=Pu,_t="onMouseLeave",Ze="onMouseEnter",Oe="mouse",(r==="pointerout"||r==="pointerover")&&(xr=Du,_t="onPointerLeave",Ze="onPointerEnter",Oe="pointer"),ln=lt==null?et:bi(lt),Qe=Qt==null?et:bi(Qt),et=new xr(_t,Oe+"leave",lt,f,ft),et.target=ln,et.relatedTarget=Qe,_t=null,$i(ft)===Ne&&(xr=new xr(Ze,Oe+"enter",Qt,f,ft),xr.target=Qe,xr.relatedTarget=ln,_t=xr),ln=_t,lt&&Qt)t:{for(xr=lt,Ze=Qt,Oe=0,Qe=xr;Qe;Qe=Hn(Qe))Oe++;for(Qe=0,_t=Ze;_t;_t=Hn(_t))Qe++;for(;0<Oe-Qe;)xr=Hn(xr),Oe--;for(;0<Qe-Oe;)Ze=Hn(Ze),Qe--;for(;Oe--;){if(xr===Ze||Ze!==null&&xr===Ze.alternate)break t;xr=Hn(xr),Ze=Hn(Ze)}xr=null}else xr=null;lt!==null&&pc(Mt,et,lt,xr,!1),Qt!==null&&ln!==null&&pc(Mt,ln,Qt,xr,!0)}}e:{if(et=Ne?bi(Ne):window,lt=et.nodeName&&et.nodeName.toLowerCase(),lt==="select"||lt==="input"&&et.type==="file")var Gt=$h;else if(Vh(et))if(Zh)Gt=Hh;else{Gt=kc;var Zr=js}else lt=et.nodeName,!lt||lt.toLowerCase()!=="input"||et.type!=="checkbox"&&et.type!=="radio"?Ne&&jn(Ne.elementType)&&(Gt=$h):Gt=Gh;if(Gt&&(Gt=Gt(r,Ne))){Bu(Mt,Gt,f,ft);break e}Zr&&Zr(r,et,Ne),r==="focusout"&&Ne&&et.type==="number"&&Ne.memoizedProps.value!=null&&Mc(et,"number",et.value)}switch(Zr=Ne?bi(Ne):window,r){case"focusin":(Vh(Zr)||Zr.contentEditable==="true")&&(Zo=Zr,Ol=Ne,fo=null);break;case"focusout":fo=Ol=Zo=null;break;case"mousedown":jl=!0;break;case"contextmenu":case"mouseup":case"dragend":jl=!1,Oc(Mt,f,ft);break;case"selectionchange":if(mp)break;case"keydown":case"keyup":Oc(Mt,f,ft)}var rr;if(jh)e:{switch(r){case"compositionstart":var Jt="onCompositionStart";break e;case"compositionend":Jt="onCompositionEnd";break e;case"compositionupdate":Jt="onCompositionUpdate";break e}Jt=void 0}else ho?Ic(r,f)&&(Jt="onCompositionEnd"):r==="keydown"&&f.keyCode===229&&(Jt="onCompositionStart");Jt&&(Nh&&f.locale!=="ko"&&(ho||Jt!=="onCompositionStart"?Jt==="onCompositionEnd"&&ho&&(rr=$r()):(Sa=ft,Wr="value"in Sa?Sa.value:Sa.textContent,ho=!0)),Zr=Td(Ne,Jt),0<Zr.length&&(Jt=new Vo(Jt,r,null,f,ft),Mt.push({event:Jt,listeners:Zr}),rr?Jt.data=rr:(rr=Dc(f),rr!==null&&(Jt.data=rr)))),(rr=pp?Uh(r,f):Wd(r,f))&&(Jt=Td(Ne,"onBeforeInput"),0<Jt.length&&(Zr=new Vo("onBeforeInput","beforeinput",null,f,ft),Mt.push({event:Zr,listeners:Jt}),Zr.data=rr)),m0(Mt,r,Ne,f,ft)}Kp(Mt,u)})}function fc(r,u,f){return{instance:r,listener:u,currentTarget:f}}function Td(r,u){for(var f=u+"Capture",b=[];r!==null;){var E=r,z=E.stateNode;E=E.tag,E!==5&&E!==26&&E!==27||z===null||(E=wa(r,f),E!=null&&b.unshift(fc(r,E,z)),E=wa(r,u),E!=null&&b.push(fc(r,E,z))),r=r.return}return b}function Hn(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function pc(r,u,f,b,E){for(var z=u._reactName,Y=[];f!==null&&f!==b;){var ue=f,Me=ue.alternate,Ne=ue.stateNode;if(ue=ue.tag,Me!==null&&Me===b)break;ue!==5&&ue!==26&&ue!==27||Ne===null||(Me=Ne,E?(Ne=wa(f,z),Ne!=null&&Y.unshift(fc(f,Ne,Me))):E||(Ne=wa(f,z),Ne!=null&&Y.push(fc(f,Ne,Me)))),f=f.return}Y.length!==0&&r.push({event:u,listeners:Y})}var gg=/\r\n?/g,yg=/\u0000|\uFFFD/g;function Yp(r){return(typeof r=="string"?r:""+r).replace(gg,`
`).replace(yg,"")}function Xp(r,u){return u=Yp(u),Yp(r)===u}function Md(){}function mi(r,u,f,b,E,z){switch(f){case"children":typeof b=="string"?u==="body"||u==="textarea"&&b===""||cr(r,b):(typeof b=="number"||typeof b=="bigint")&&u!=="body"&&cr(r,""+b);break;case"className":Sc(r,"class",b);break;case"tabIndex":Sc(r,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":Sc(r,f,b);break;case"style":Ga(r,b,z);break;case"data":if(u!=="object"){Sc(r,"data",b);break}case"src":case"href":if(b===""&&(u!=="a"||f!=="href")){r.removeAttribute(f);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){r.removeAttribute(f);break}b=oo(""+b),r.setAttribute(f,b);break;case"action":case"formAction":if(typeof b=="function"){r.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof z=="function"&&(f==="formAction"?(u!=="input"&&mi(r,u,"name",E.name,E,null),mi(r,u,"formEncType",E.formEncType,E,null),mi(r,u,"formMethod",E.formMethod,E,null),mi(r,u,"formTarget",E.formTarget,E,null)):(mi(r,u,"encType",E.encType,E,null),mi(r,u,"method",E.method,E,null),mi(r,u,"target",E.target,E,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){r.removeAttribute(f);break}b=oo(""+b),r.setAttribute(f,b);break;case"onClick":b!=null&&(r.onclick=Md);break;case"onScroll":b!=null&&Xr("scroll",r);break;case"onScrollEnd":b!=null&&Xr("scrollend",r);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(p(61));if(f=b.__html,f!=null){if(E.children!=null)throw Error(p(60));r.innerHTML=f}}break;case"multiple":r.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":r.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){r.removeAttribute("xlink:href");break}f=oo(""+b),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?r.setAttribute(f,""+b):r.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?r.setAttribute(f,""):r.removeAttribute(f);break;case"capture":case"download":b===!0?r.setAttribute(f,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?r.setAttribute(f,b):r.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?r.setAttribute(f,b):r.removeAttribute(f);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?r.removeAttribute(f):r.setAttribute(f,b);break;case"popover":Xr("beforetoggle",r),Xr("toggle",r),wc(r,"popover",b);break;case"xlinkActuate":zs(r,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":zs(r,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":zs(r,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":zs(r,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":zs(r,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":zs(r,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":zs(r,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":zs(r,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":zs(r,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":wc(r,"is",b);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Nn.get(f)||f,wc(r,f,b))}}function Qp(r,u,f,b,E,z){switch(f){case"style":Ga(r,b,z);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(p(61));if(f=b.__html,f!=null){if(E.children!=null)throw Error(p(60));r.innerHTML=f}}break;case"children":typeof b=="string"?cr(r,b):(typeof b=="number"||typeof b=="bigint")&&cr(r,""+b);break;case"onScroll":b!=null&&Xr("scroll",r);break;case"onScrollEnd":b!=null&&Xr("scrollend",r);break;case"onClick":b!=null&&(r.onclick=Md);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bo.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(E=f.endsWith("Capture"),u=f.slice(2,E?f.length-7:void 0),z=r[Lt]||null,z=z!=null?z[f]:null,typeof z=="function"&&r.removeEventListener(u,z,E),typeof b=="function")){typeof z!="function"&&z!==null&&(f in r?r[f]=null:r.hasAttribute(f)&&r.removeAttribute(f)),r.addEventListener(u,b,E);break e}f in r?r[f]=b:b===!0?r.setAttribute(f,""):wc(r,f,b)}}}function Wn(r,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xr("error",r),Xr("load",r);var b=!1,E=!1,z;for(z in f)if(f.hasOwnProperty(z)){var Y=f[z];if(Y!=null)switch(z){case"src":b=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(p(137,u));default:mi(r,u,z,Y,f,null)}}E&&mi(r,u,"srcSet",f.srcSet,f,null),b&&mi(r,u,"src",f.src,f,null);return;case"input":Xr("invalid",r);var ue=z=Y=E=null,Me=null,Ne=null;for(b in f)if(f.hasOwnProperty(b)){var ft=f[b];if(ft!=null)switch(b){case"name":E=ft;break;case"type":Y=ft;break;case"checked":Me=ft;break;case"defaultChecked":Ne=ft;break;case"value":z=ft;break;case"defaultValue":ue=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(p(137,u));break;default:mi(r,u,b,ft,f,null)}}Oo(r,z,ue,Me,Ne,Y,E,!1),Pl(r);return;case"select":Xr("invalid",r),b=Y=z=null;for(E in f)if(f.hasOwnProperty(E)&&(ue=f[E],ue!=null))switch(E){case"value":z=ue;break;case"defaultValue":Y=ue;break;case"multiple":b=ue;default:mi(r,u,E,ue,f,null)}u=z,f=Y,r.multiple=!!b,u!=null?Rl(r,!!b,u,!1):f!=null&&Rl(r,!!b,f,!0);return;case"textarea":Xr("invalid",r),z=E=b=null;for(Y in f)if(f.hasOwnProperty(Y)&&(ue=f[Y],ue!=null))switch(Y){case"value":b=ue;break;case"defaultValue":E=ue;break;case"children":z=ue;break;case"dangerouslySetInnerHTML":if(ue!=null)throw Error(p(91));break;default:mi(r,u,Y,ue,f,null)}jo(r,b,E,z),Pl(r);return;case"option":for(Me in f)if(f.hasOwnProperty(Me)&&(b=f[Me],b!=null))switch(Me){case"selected":r.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:mi(r,u,Me,b,f,null)}return;case"dialog":Xr("cancel",r),Xr("close",r);break;case"iframe":case"object":Xr("load",r);break;case"video":case"audio":for(b=0;b<vh.length;b++)Xr(vh[b],r);break;case"image":Xr("error",r),Xr("load",r);break;case"details":Xr("toggle",r);break;case"embed":case"source":case"link":Xr("error",r),Xr("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ne in f)if(f.hasOwnProperty(Ne)&&(b=f[Ne],b!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":throw Error(p(137,u));default:mi(r,u,Ne,b,f,null)}return;default:if(jn(u)){for(ft in f)f.hasOwnProperty(ft)&&(b=f[ft],b!==void 0&&Qp(r,u,ft,b,f,void 0));return}}for(ue in f)f.hasOwnProperty(ue)&&(b=f[ue],b!=null&&mi(r,u,ue,b,f,null))}function vu(r,u,f,b){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,z=null,Y=null,ue=null,Me=null,Ne=null,ft=null;for(lt in f){var Mt=f[lt];if(f.hasOwnProperty(lt)&&Mt!=null)switch(lt){case"checked":break;case"value":break;case"defaultValue":Me=Mt;default:b.hasOwnProperty(lt)||mi(r,u,lt,null,b,Mt)}}for(var et in b){var lt=b[et];if(Mt=f[et],b.hasOwnProperty(et)&&(lt!=null||Mt!=null))switch(et){case"type":z=lt;break;case"name":E=lt;break;case"checked":Ne=lt;break;case"defaultChecked":ft=lt;break;case"value":Y=lt;break;case"defaultValue":ue=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(p(137,u));break;default:lt!==Mt&&mi(r,u,et,lt,b,Mt)}}so(r,Y,ue,Me,Ne,ft,z,E);return;case"select":lt=Y=ue=et=null;for(z in f)if(Me=f[z],f.hasOwnProperty(z)&&Me!=null)switch(z){case"value":break;case"multiple":lt=Me;default:b.hasOwnProperty(z)||mi(r,u,z,null,b,Me)}for(E in b)if(z=b[E],Me=f[E],b.hasOwnProperty(E)&&(z!=null||Me!=null))switch(E){case"value":et=z;break;case"defaultValue":ue=z;break;case"multiple":Y=z;default:z!==Me&&mi(r,u,E,z,b,Me)}u=ue,f=Y,b=lt,et!=null?Rl(r,!!f,et,!1):!!b!=!!f&&(u!=null?Rl(r,!!f,u,!0):Rl(r,!!f,f?[]:"",!1));return;case"textarea":lt=et=null;for(ue in f)if(E=f[ue],f.hasOwnProperty(ue)&&E!=null&&!b.hasOwnProperty(ue))switch(ue){case"value":break;case"children":break;default:mi(r,u,ue,null,b,E)}for(Y in b)if(E=b[Y],z=f[Y],b.hasOwnProperty(Y)&&(E!=null||z!=null))switch(Y){case"value":et=E;break;case"defaultValue":lt=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(p(91));break;default:E!==z&&mi(r,u,Y,E,b,z)}ys(r,et,lt);return;case"option":for(var Qt in f)if(et=f[Qt],f.hasOwnProperty(Qt)&&et!=null&&!b.hasOwnProperty(Qt))switch(Qt){case"selected":r.selected=!1;break;default:mi(r,u,Qt,null,b,et)}for(Me in b)if(et=b[Me],lt=f[Me],b.hasOwnProperty(Me)&&et!==lt&&(et!=null||lt!=null))switch(Me){case"selected":r.selected=et&&typeof et!="function"&&typeof et!="symbol";break;default:mi(r,u,Me,et,b,lt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xr in f)et=f[xr],f.hasOwnProperty(xr)&&et!=null&&!b.hasOwnProperty(xr)&&mi(r,u,xr,null,b,et);for(Ne in b)if(et=b[Ne],lt=f[Ne],b.hasOwnProperty(Ne)&&et!==lt&&(et!=null||lt!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(p(137,u));break;default:mi(r,u,Ne,et,b,lt)}return;default:if(jn(u)){for(var ln in f)et=f[ln],f.hasOwnProperty(ln)&&et!==void 0&&!b.hasOwnProperty(ln)&&Qp(r,u,ln,void 0,b,et);for(ft in b)et=b[ft],lt=f[ft],!b.hasOwnProperty(ft)||et===lt||et===void 0&&lt===void 0||Qp(r,u,ft,et,b,lt);return}}for(var Ze in f)et=f[Ze],f.hasOwnProperty(Ze)&&et!=null&&!b.hasOwnProperty(Ze)&&mi(r,u,Ze,null,b,et);for(Mt in b)et=b[Mt],lt=f[Mt],!b.hasOwnProperty(Mt)||et===lt||et==null&&lt==null||mi(r,u,Mt,et,b,lt)}var Ef=null,Pf=null;function Ad(r){return r.nodeType===9?r:r.ownerDocument}function Jp(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _g(r,u){if(r===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&u==="foreignObject"?0:r}function em(r,u){return r==="textarea"||r==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Rf=null;function Cd(){var r=window.event;return r&&r.type==="popstate"?r===Rf?!1:(Rf=r,!0):(Rf=null,!1)}var tm=typeof setTimeout=="function"?setTimeout:void 0,If=typeof clearTimeout=="function"?clearTimeout:void 0,rm=typeof Promise=="function"?Promise:void 0,Df=typeof queueMicrotask=="function"?queueMicrotask:typeof rm<"u"?function(r){return rm.resolve(null).then(r).catch(zf)}:tm;function zf(r){setTimeout(function(){throw r})}function wh(r,u){var f=u,b=0;do{var E=f.nextSibling;if(r.removeChild(f),E&&E.nodeType===8)if(f=E.data,f==="/$"){if(b===0){r.removeChild(E),Hi(u);return}b--}else f!=="$"&&f!=="$?"&&f!=="$!"||b++;f=E}while(f);Hi(u)}function im(r){var u=r.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":im(f),qa(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}r.removeChild(f)}}function g0(r,u,f,b){for(;r.nodeType===1;){var E=f;if(r.nodeName.toLowerCase()!==u.toLowerCase()){if(!b&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(b){if(!r[_n])switch(u){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(z=r.getAttribute("rel"),z==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(z!==E.rel||r.getAttribute("href")!==(E.href==null?null:E.href)||r.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||r.getAttribute("title")!==(E.title==null?null:E.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(z=r.getAttribute("src"),(z!==(E.src==null?null:E.src)||r.getAttribute("type")!==(E.type==null?null:E.type)||r.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&z&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(u==="input"&&r.type==="hidden"){var z=E.name==null?null:""+E.name;if(E.type==="hidden"&&r.getAttribute("name")===z)return r}else return r;if(r=ha(r.nextSibling),r===null)break}return null}function y0(r,u,f){if(u==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!f||(r=ha(r.nextSibling),r===null))return null;return r}function ha(r){for(;r!=null;r=r.nextSibling){var u=r.nodeType;if(u===1||u===3)break;if(u===8){if(u=r.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return r}function kn(r){r=r.previousSibling;for(var u=0;r;){if(r.nodeType===8){var f=r.data;if(f==="$"||f==="$!"||f==="$?"){if(u===0)return r;u--}else f==="/$"&&u++}r=r.previousSibling}return null}function xl(r,u,f){switch(u=Ad(f),r){case"html":if(r=u.documentElement,!r)throw Error(p(452));return r;case"head":if(r=u.head,!r)throw Error(p(453));return r;case"body":if(r=u.body,!r)throw Error(p(454));return r;default:throw Error(p(451))}}var ja=new Map,nm=new Set;function Ed(r){return typeof r.getRootNode=="function"?r.getRootNode():r.ownerDocument}var Xs=zt.d;zt.d={f:_0,r:vg,D:bg,C:am,L:sm,m:wg,X:om,S:Pd,M:Sg};function _0(){var r=Xs.f(),u=cc();return r||u}function vg(r){var u=sa(r);u!==null&&u.tag===5&&u.type==="form"?ot(u):Xs.r(r)}var mc=typeof document>"u"?null:document;function xg(r,u,f){var b=mc;if(b&&typeof u=="string"&&u){var E=Yn(u);E='link[rel="'+r+'"][href="'+E+'"]',typeof f=="string"&&(E+='[crossorigin="'+f+'"]'),nm.has(E)||(nm.add(E),r={rel:r,crossOrigin:f,href:u},b.querySelector(E)===null&&(u=b.createElement("link"),Wn(u,"link",r),ut(u),b.head.appendChild(u)))}}function bg(r){Xs.D(r),xg("dns-prefetch",r,null)}function am(r,u){Xs.C(r,u),xg("preconnect",r,u)}function sm(r,u,f){Xs.L(r,u,f);var b=mc;if(b&&r&&u){var E='link[rel="preload"][as="'+Yn(u)+'"]';u==="image"&&f&&f.imageSrcSet?(E+='[imagesrcset="'+Yn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(E+='[imagesizes="'+Yn(f.imageSizes)+'"]')):E+='[href="'+Yn(r)+'"]';var z=E;switch(u){case"style":z=bl(r);break;case"script":z=xu(r)}ja.has(z)||(r=ht({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:r,as:u},f),ja.set(z,r),b.querySelector(E)!==null||u==="style"&&b.querySelector(wl(z))||u==="script"&&b.querySelector(Rd(z))||(u=b.createElement("link"),Wn(u,"link",r),ut(u),b.head.appendChild(u)))}}function wg(r,u){Xs.m(r,u);var f=mc;if(f&&r){var b=u&&typeof u.as=="string"?u.as:"script",E='link[rel="modulepreload"][as="'+Yn(b)+'"][href="'+Yn(r)+'"]',z=E;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":z=xu(r)}if(!ja.has(z)&&(r=ht({rel:"modulepreload",href:r},u),ja.set(z,r),f.querySelector(E)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Rd(z)))return}b=f.createElement("link"),Wn(b,"link",r),ut(b),f.head.appendChild(b)}}}function Pd(r,u,f){Xs.S(r,u,f);var b=mc;if(b&&r){var E=Rr(b).hoistableStyles,z=bl(r);u=u||"default";var Y=E.get(z);if(!Y){var ue={loading:0,preload:null};if(Y=b.querySelector(wl(z)))ue.loading=5;else{r=ht({rel:"stylesheet",href:r,"data-precedence":u},f),(f=ja.get(z))&&o(r,f);var Me=Y=b.createElement("link");ut(Me),Wn(Me,"link",r),Me._p=new Promise(function(Ne,ft){Me.onload=Ne,Me.onerror=ft}),Me.addEventListener("load",function(){ue.loading|=1}),Me.addEventListener("error",function(){ue.loading|=2}),ue.loading|=4,t(Y,u,b)}Y={type:"stylesheet",instance:Y,count:1,state:ue},E.set(z,Y)}}}function om(r,u){Xs.X(r,u);var f=mc;if(f&&r){var b=Rr(f).hoistableScripts,E=xu(r),z=b.get(E);z||(z=f.querySelector(Rd(E)),z||(r=ht({src:r,async:!0},u),(u=ja.get(E))&&c(r,u),z=f.createElement("script"),ut(z),Wn(z,"link",r),f.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},b.set(E,z))}}function Sg(r,u){Xs.M(r,u);var f=mc;if(f&&r){var b=Rr(f).hoistableScripts,E=xu(r),z=b.get(E);z||(z=f.querySelector(Rd(E)),z||(r=ht({src:r,async:!0,type:"module"},u),(u=ja.get(E))&&c(r,u),z=f.createElement("script"),ut(z),Wn(z,"link",r),f.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},b.set(E,z))}}function Lf(r,u,f,b){var E=(E=zr.current)?Ed(E):null;if(!E)throw Error(p(446));switch(r){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=bl(f.href),f=Rr(E).hoistableStyles,b=f.get(u),b||(b={type:"style",instance:null,count:0,state:null},f.set(u,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){r=bl(f.href);var z=Rr(E).hoistableStyles,Y=z.get(r);if(Y||(E=E.ownerDocument||E,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},z.set(r,Y),(z=E.querySelector(wl(r)))&&!z._p&&(Y.instance=z,Y.state.loading=5),ja.has(r)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},ja.set(r,f),z||lm(E,r,f,Y.state))),u&&b===null)throw Error(p(528,""));return Y}if(u&&b!==null)throw Error(p(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=xu(f),f=Rr(E).hoistableScripts,b=f.get(u),b||(b={type:"script",instance:null,count:0,state:null},f.set(u,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(p(444,r))}}function bl(r){return'href="'+Yn(r)+'"'}function wl(r){return'link[rel="stylesheet"]['+r+"]"}function kf(r){return ht({},r,{"data-precedence":r.precedence,precedence:null})}function lm(r,u,f,b){r.querySelector('link[rel="preload"][as="style"]['+u+"]")?b.loading=1:(u=r.createElement("link"),b.preload=u,u.addEventListener("load",function(){return b.loading|=1}),u.addEventListener("error",function(){return b.loading|=2}),Wn(u,"link",f),ut(u),r.head.appendChild(u))}function xu(r){return'[src="'+Yn(r)+'"]'}function Rd(r){return"script[async]"+r}function s(r,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var b=r.querySelector('style[data-href~="'+Yn(f.href)+'"]');if(b)return u.instance=b,ut(b),b;var E=ht({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return b=(r.ownerDocument||r).createElement("style"),ut(b),Wn(b,"style",E),t(b,f.precedence,r),u.instance=b;case"stylesheet":E=bl(f.href);var z=r.querySelector(wl(E));if(z)return u.state.loading|=4,u.instance=z,ut(z),z;b=kf(f),(E=ja.get(E))&&o(b,E),z=(r.ownerDocument||r).createElement("link"),ut(z);var Y=z;return Y._p=new Promise(function(ue,Me){Y.onload=ue,Y.onerror=Me}),Wn(z,"link",b),u.state.loading|=4,t(z,f.precedence,r),u.instance=z;case"script":return z=xu(f.src),(E=r.querySelector(Rd(z)))?(u.instance=E,ut(E),E):(b=f,(E=ja.get(z))&&(b=ht({},f),c(b,E)),r=r.ownerDocument||r,E=r.createElement("script"),ut(E),Wn(E,"link",b),r.head.appendChild(E),u.instance=E);case"void":return null;default:throw Error(p(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(b=u.instance,u.state.loading|=4,t(b,f.precedence,r));return u.instance}function t(r,u,f){for(var b=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=b.length?b[b.length-1]:null,z=E,Y=0;Y<b.length;Y++){var ue=b[Y];if(ue.dataset.precedence===u)z=ue;else if(z!==E)break}z?z.parentNode.insertBefore(r,z.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(r,u.firstChild))}function o(r,u){r.crossOrigin==null&&(r.crossOrigin=u.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=u.referrerPolicy),r.title==null&&(r.title=u.title)}function c(r,u){r.crossOrigin==null&&(r.crossOrigin=u.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=u.referrerPolicy),r.integrity==null&&(r.integrity=u.integrity)}var g=null;function w(r,u,f){if(g===null){var b=new Map,E=g=new Map;E.set(f,b)}else E=g,b=E.get(f),b||(b=new Map,E.set(f,b));if(b.has(r))return b;for(b.set(r,null),f=f.getElementsByTagName(r),E=0;E<f.length;E++){var z=f[E];if(!(z[_n]||z[yt]||r==="link"&&z.getAttribute("rel")==="stylesheet")&&z.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=z.getAttribute(u)||"";Y=r+Y;var ue=b.get(Y);ue?ue.push(z):b.set(Y,[z])}}return b}function T(r,u,f){r=r.ownerDocument||r,r.head.insertBefore(f,u==="title"?r.querySelector("head > title"):null)}function A(r,u,f){if(f===1||u.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return r=u.disabled,typeof u.precedence=="string"&&r==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function I(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var B=null;function N(){}function V(r,u,f){if(B===null)throw Error(p(475));var b=B;if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var E=bl(f.href),z=r.querySelector(wl(E));if(z){r=z._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(b.count++,b=Q.bind(b),r.then(b,b)),u.state.loading|=4,u.instance=z,ut(z);return}z=r.ownerDocument||r,f=kf(f),(E=ja.get(E))&&o(f,E),z=z.createElement("link"),ut(z);var Y=z;Y._p=new Promise(function(ue,Me){Y.onload=ue,Y.onerror=Me}),Wn(z,"link",f),u.instance=z}b.stylesheets===null&&(b.stylesheets=new Map),b.stylesheets.set(u,r),(r=u.state.preload)&&(u.state.loading&3)===0&&(b.count++,u=Q.bind(b),r.addEventListener("load",u),r.addEventListener("error",u))}}function H(){if(B===null)throw Error(p(475));var r=B;return r.stylesheets&&r.count===0&&ie(r,r.stylesheets),0<r.count?function(u){var f=setTimeout(function(){if(r.stylesheets&&ie(r,r.stylesheets),r.unsuspend){var b=r.unsuspend;r.unsuspend=null,b()}},6e4);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(f)}}:null}function Q(){if(this.count--,this.count===0){if(this.stylesheets)ie(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var J=null;function ie(r,u){r.stylesheets=null,r.unsuspend!==null&&(r.count++,J=new Map,u.forEach(ce,r),J=null,Q.call(r))}function ce(r,u){if(!(u.state.loading&4)){var f=J.get(r);if(f)var b=f.get(null);else{f=new Map,J.set(r,f);for(var E=r.querySelectorAll("link[data-precedence],style[data-precedence]"),z=0;z<E.length;z++){var Y=E[z];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(f.set(Y.dataset.precedence,Y),b=Y)}b&&f.set(null,b)}E=u.instance,Y=E.getAttribute("data-precedence"),z=f.get(Y)||b,z===b&&f.set(null,E),f.set(Y,E),this.count++,b=Q.bind(this),E.addEventListener("load",b),E.addEventListener("error",b),z?z.parentNode.insertBefore(E,z.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(E,r.firstChild)),u.state.loading|=4}}var ye={$$typeof:F,Provider:null,Consumer:null,_currentValue:er,_currentValue2:er,_threadCount:0};function ze(r,u,f,b,E,z,Y,ue){this.tag=1,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=At(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=At(0),this.hiddenUpdates=At(null),this.identifierPrefix=b,this.onUncaughtError=E,this.onCaughtError=z,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function xe(r,u,f,b,E,z,Y,ue,Me,Ne,ft,Mt){return r=new ze(r,u,f,Y,ue,Me,Ne,Mt),u=1,z===!0&&(u|=24),z=os(3,null,null,u),r.current=z,z.stateNode=r,u=tl(),u.refCount++,r.pooledCache=u,u.refCount++,z.memoizedState={element:b,isDehydrated:f,cache:u},hd(z),r}function K(r){return r?(r=Ul,r):Ul}function le(r,u,f,b,E,z){E=K(E),b.context===null?b.context=E:b.pendingContext=E,b=cl(u),b.payload={element:f},z=z===void 0?null:z,z!==null&&(b.callback=z),f=au(r,b,u),f!==null&&(na(f,r,u),dd(f,r,u))}function Te(r,u){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var f=r.retryLane;r.retryLane=f!==0&&f<u?f:u}}function Ge(r,u){Te(r,u),(r=r.alternate)&&Te(r,u)}function mt(r){if(r.tag===13){var u=go(r,67108864);u!==null&&na(u,r,67108864),Ge(r,67108864)}}var Xe=!0;function it(r,u,f,b){var E=Ye.T;Ye.T=null;var z=zt.p;try{zt.p=2,gt(r,u,f,b)}finally{zt.p=z,Ye.T=E}}function bt(r,u,f,b){var E=Ye.T;Ye.T=null;var z=zt.p;try{zt.p=8,gt(r,u,f,b)}finally{zt.p=z,Ye.T=E}}function gt(r,u,f,b){if(Xe){var E=St(b);if(E===null)Cf(r,u,b,st,f),An(r,b);else if(Cn(E,r,u,f,b))b.stopPropagation();else if(An(r,b),u&4&&-1<va.indexOf(r)){for(;E!==null;){var z=sa(E);if(z!==null)switch(z.tag){case 3:if(z=z.stateNode,z.current.memoizedState.isDehydrated){var Y=Ce(z.pendingLanes);if(Y!==0){var ue=z;for(ue.pendingLanes|=2,ue.entangledLanes|=2;Y;){var Me=1<<31-ae(Y);ue.entanglements[1]|=Me,Y&=~Me}Ys(z),(Qi&6)===0&&(Gi=Ut()+500,dc(0))}}break;case 13:ue=go(z,2),ue!==null&&na(ue,z,2),cc(),Ge(z,2)}if(z=St(b),z===null&&Cf(r,u,b,st,f),z===E)break;E=z}E!==null&&b.stopPropagation()}else Cf(r,u,b,null,f)}}function St(r){return r=Xn(r),Ot(r)}var st=null;function Ot(r){if(st=null,r=$i(r),r!==null){var u=Rt(r);if(u===null)r=null;else{var f=u.tag;if(f===13){if(r=dr(u),r!==null)return r;r=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;r=null}else u!==r&&(r=null)}}return st=r,null}function Yt(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ur()){case _r:return 2;case qr:return 8;case Pi:case Ui:return 32;case zi:return 268435456;default:return 32}default:return 32}}var qt=!1,jt=null,fr=null,ai=null,ji=new Map,nn=new Map,Mn=[],va="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function An(r,u){switch(r){case"focusin":case"focusout":jt=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":ji.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":nn.delete(u.pointerId)}}function ci(r,u,f,b,E,z){return r===null||r.nativeEvent!==z?(r={blockedOn:u,domEventName:f,eventSystemFlags:b,nativeEvent:z,targetContainers:[E]},u!==null&&(u=sa(u),u!==null&&mt(u)),r):(r.eventSystemFlags|=b,u=r.targetContainers,E!==null&&u.indexOf(E)===-1&&u.push(E),r)}function Cn(r,u,f,b,E){switch(u){case"focusin":return jt=ci(jt,r,u,f,b,E),!0;case"dragenter":return fr=ci(fr,r,u,f,b,E),!0;case"mouseover":return ai=ci(ai,r,u,f,b,E),!0;case"pointerover":var z=E.pointerId;return ji.set(z,ci(ji.get(z)||null,r,u,f,b,E)),!0;case"gotpointercapture":return z=E.pointerId,nn.set(z,ci(nn.get(z)||null,r,u,f,b,E)),!0}return!1}function En(r){var u=$i(r.target);if(u!==null){var f=Rt(u);if(f!==null){if(u=f.tag,u===13){if(u=dr(f),u!==null){r.blockedOn=u,Er(r.priority,function(){if(f.tag===13){var b=Ba(),E=go(f,b);E!==null&&na(E,f,b),Ge(f,b)}});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){r.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}r.blockedOn=null}function an(r){if(r.blockedOn!==null)return!1;for(var u=r.targetContainers;0<u.length;){var f=St(r.nativeEvent);if(f===null){f=r.nativeEvent;var b=new f.constructor(f.type,f);cn=b,f.target.dispatchEvent(b),cn=null}else return u=sa(f),u!==null&&mt(u),r.blockedOn=f,!1;u.shift()}return!0}function aa(r,u,f){an(r)&&f.delete(u)}function ls(){qt=!1,jt!==null&&an(jt)&&(jt=null),fr!==null&&an(fr)&&(fr=null),ai!==null&&an(ai)&&(ai=null),ji.forEach(aa),nn.forEach(aa)}function Ji(r,u){r.blockedOn===u&&(r.blockedOn=null,qt||(qt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,ls)))}var Kn=null;function sn(r){Kn!==r&&(Kn=r,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Kn===r&&(Kn=null);for(var u=0;u<r.length;u+=3){var f=r[u],b=r[u+1],E=r[u+2];if(typeof b!="function"){if(Ot(b||f)===null)continue;break}var z=sa(f);z!==null&&(r.splice(u,3),u-=3,He(z,{pending:!0,data:E,method:f.method,action:b},b,E))}}))}function Hi(r){function u(Me){return Ji(Me,r)}jt!==null&&Ji(jt,r),fr!==null&&Ji(fr,r),ai!==null&&Ji(ai,r),ji.forEach(u),nn.forEach(u);for(var f=0;f<Mn.length;f++){var b=Mn[f];b.blockedOn===r&&(b.blockedOn=null)}for(;0<Mn.length&&(f=Mn[0],f.blockedOn===null);)En(f),f.blockedOn===null&&Mn.shift();if(f=(r.ownerDocument||r).$$reactFormReplay,f!=null)for(b=0;b<f.length;b+=3){var E=f[b],z=f[b+1],Y=E[Lt]||null;if(typeof z=="function")Y||sn(f);else if(Y){var ue=null;if(z&&z.hasAttribute("formAction")){if(E=z,Y=z[Lt]||null)ue=Y.formAction;else if(Ot(E)!==null)continue}else ue=Y.action;typeof ue=="function"?f[b+1]=ue:(f.splice(b,3),b-=3),sn(f)}}}function on(r){this._internalRoot=r}Ni.prototype.render=on.prototype.render=function(r){var u=this._internalRoot;if(u===null)throw Error(p(409));var f=u.current,b=Ba();le(f,b,r,u,null,null)},Ni.prototype.unmount=on.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var u=r.containerInfo;r.tag===0&&hc(),le(r.current,2,null,r,null,null),cc(),u[Hr]=null}};function Ni(r){this._internalRoot=r}Ni.prototype.unstable_scheduleHydration=function(r){if(r){var u=Vr();r={blockedOn:null,target:r,priority:u};for(var f=0;f<Mn.length&&u!==0&&u<Mn[f].priority;f++);Mn.splice(f,0,r),f===0&&En(r)}};var gi=n.version;if(gi!=="19.0.0")throw Error(p(527,gi,"19.0.0"));zt.findDOMNode=function(r){var u=r._reactInternals;if(u===void 0)throw typeof r.render=="function"?Error(p(188)):(r=Object.keys(r).join(","),Error(p(268,r)));return r=wt(u),r=r!==null?Zt(r):null,r=r===null?null:r.stateNode,r};var Qs={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:Ye,findFiberByHostInstance:$i,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sl.isDisabled&&Sl.supportsFiber)try{ni=Sl.inject(Qs),ri=Sl}catch{}}return cm.createRoot=function(r,u){if(!_(r))throw Error(p(299));var f=!1,b="",E=rs,z=To,Y=Mo,ue=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(z=u.onCaughtError),u.onRecoverableError!==void 0&&(Y=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(ue=u.unstable_transitionCallbacks)),u=xe(r,1,!1,null,null,f,b,E,z,Y,ue,null),r[Hr]=u.current,Af(r.nodeType===8?r.parentNode:r),new on(u)},cm.hydrateRoot=function(r,u,f){if(!_(r))throw Error(p(299));var b=!1,E="",z=rs,Y=To,ue=Mo,Me=null,Ne=null;return f!=null&&(f.unstable_strictMode===!0&&(b=!0),f.identifierPrefix!==void 0&&(E=f.identifierPrefix),f.onUncaughtError!==void 0&&(z=f.onUncaughtError),f.onCaughtError!==void 0&&(Y=f.onCaughtError),f.onRecoverableError!==void 0&&(ue=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(Me=f.unstable_transitionCallbacks),f.formState!==void 0&&(Ne=f.formState)),u=xe(r,1,!0,u,f??null,b,E,z,Y,ue,Me,Ne),u.context=K(null),f=u.current,b=Ba(),E=cl(b),E.callback=null,au(f,E,b),u.current.lanes=b,Ft(u,b),Ys(u),r[Hr]=u.current,Af(r),new Ni(u)},cm.version="19.0.0",cm}var Ax;function FM(){if(Ax)return w0.exports;Ax=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),w0.exports=NM(),w0.exports}var UM=FM(),hm={},Cx;function VM(){if(Cx)return hm;Cx=1,Object.defineProperty(hm,"__esModule",{value:!0}),hm.parse=y,hm.serialize=P;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n=/^[\u0021-\u003A\u003C-\u007E]*$/,d=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,p=/^[\u0020-\u003A\u003D-\u007E]*$/,_=Object.prototype.toString,S=(()=>{const L=function(){};return L.prototype=Object.create(null),L})();function y(L,F){const G=new S,ee=L.length;if(ee<2)return G;const X=(F==null?void 0:F.decode)||k;let W=0;do{const pe=L.indexOf("=",W);if(pe===-1)break;const me=L.indexOf(";",W),_e=me===-1?ee:me;if(pe>_e){W=L.lastIndexOf(";",pe-1)+1;continue}const Se=l(L,W,pe),ke=C(L,pe,Se),nt=L.slice(Se,ke);if(G[nt]===void 0){let Ke=l(L,pe+1,_e),Ye=C(L,_e,Ke);const ht=X(L.slice(Ke,Ye));G[nt]=ht}W=_e+1}while(W<ee);return G}function l(L,F,G){do{const ee=L.charCodeAt(F);if(ee!==32&&ee!==9)return F}while(++F<G);return G}function C(L,F,G){for(;F>G;){const ee=L.charCodeAt(--F);if(ee!==32&&ee!==9)return F+1}return G}function P(L,F,G){const ee=(G==null?void 0:G.encode)||encodeURIComponent;if(!i.test(L))throw new TypeError(`argument name is invalid: ${L}`);const X=ee(F);if(!n.test(X))throw new TypeError(`argument val is invalid: ${F}`);let W=L+"="+X;if(!G)return W;if(G.maxAge!==void 0){if(!Number.isInteger(G.maxAge))throw new TypeError(`option maxAge is invalid: ${G.maxAge}`);W+="; Max-Age="+G.maxAge}if(G.domain){if(!d.test(G.domain))throw new TypeError(`option domain is invalid: ${G.domain}`);W+="; Domain="+G.domain}if(G.path){if(!p.test(G.path))throw new TypeError(`option path is invalid: ${G.path}`);W+="; Path="+G.path}if(G.expires){if(!O(G.expires)||!Number.isFinite(G.expires.valueOf()))throw new TypeError(`option expires is invalid: ${G.expires}`);W+="; Expires="+G.expires.toUTCString()}if(G.httpOnly&&(W+="; HttpOnly"),G.secure&&(W+="; Secure"),G.partitioned&&(W+="; Partitioned"),G.priority)switch(typeof G.priority=="string"?G.priority.toLowerCase():void 0){case"low":W+="; Priority=Low";break;case"medium":W+="; Priority=Medium";break;case"high":W+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${G.priority}`)}if(G.sameSite)switch(typeof G.sameSite=="string"?G.sameSite.toLowerCase():G.sameSite){case!0:case"strict":W+="; SameSite=Strict";break;case"lax":W+="; SameSite=Lax";break;case"none":W+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${G.sameSite}`)}return W}function k(L){if(L.indexOf("%")===-1)return L;try{return decodeURIComponent(L)}catch{return L}}function O(L){return _.call(L)==="[object Date]"}return hm}VM();var Ex="popstate";function $M(i={}){function n(p,_){let{pathname:S,search:y,hash:l}=p.location;return q0("",{pathname:S,search:y,hash:l},_.state&&_.state.usr||null,_.state&&_.state.key||"default")}function d(p,_){return typeof _=="string"?_:Mm(_)}return qM(n,d,null,i)}function un(i,n){if(i===!1||i===null||typeof i>"u")throw new Error(n)}function Al(i,n){if(!i){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function ZM(){return Math.random().toString(36).substring(2,10)}function Px(i,n){return{usr:i.state,key:i.key,idx:n}}function q0(i,n,d=null,p){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof n=="string"?np(n):n,state:d,key:n&&n.key||p||ZM()}}function Mm({pathname:i="/",search:n="",hash:d=""}){return n&&n!=="?"&&(i+=n.charAt(0)==="?"?n:"?"+n),d&&d!=="#"&&(i+=d.charAt(0)==="#"?d:"#"+d),i}function np(i){let n={};if(i){let d=i.indexOf("#");d>=0&&(n.hash=i.substring(d),i=i.substring(0,d));let p=i.indexOf("?");p>=0&&(n.search=i.substring(p),i=i.substring(0,p)),i&&(n.pathname=i)}return n}function qM(i,n,d,p={}){let{window:_=document.defaultView,v5Compat:S=!1}=p,y=_.history,l="POP",C=null,P=k();P==null&&(P=0,y.replaceState({...y.state,idx:P},""));function k(){return(y.state||{idx:null}).idx}function O(){l="POP";let X=k(),W=X==null?null:X-P;P=X,C&&C({action:l,location:ee.location,delta:W})}function L(X,W){l="PUSH";let pe=q0(ee.location,X,W);P=k()+1;let me=Px(pe,P),_e=ee.createHref(pe);try{y.pushState(me,"",_e)}catch(Se){if(Se instanceof DOMException&&Se.name==="DataCloneError")throw Se;_.location.assign(_e)}S&&C&&C({action:l,location:ee.location,delta:1})}function F(X,W){l="REPLACE";let pe=q0(ee.location,X,W);P=k();let me=Px(pe,P),_e=ee.createHref(pe);y.replaceState(me,"",_e),S&&C&&C({action:l,location:ee.location,delta:0})}function G(X){let W=_.location.origin!=="null"?_.location.origin:_.location.href,pe=typeof X=="string"?X:Mm(X);return pe=pe.replace(/ $/,"%20"),un(W,`No window.location.(origin|href) available to create URL for href: ${pe}`),new URL(pe,W)}let ee={get action(){return l},get location(){return i(_,y)},listen(X){if(C)throw new Error("A history only accepts one active listener");return _.addEventListener(Ex,O),C=X,()=>{_.removeEventListener(Ex,O),C=null}},createHref(X){return n(_,X)},createURL:G,encodeLocation(X){let W=G(X);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:L,replace:F,go(X){return y.go(X)}};return ee}function E2(i,n,d="/"){return GM(i,n,d,!1)}function GM(i,n,d,p){let _=typeof n=="string"?np(n):n,S=_c(_.pathname||"/",d);if(S==null)return null;let y=P2(i);HM(y);let l=null;for(let C=0;l==null&&C<y.length;++C){let P=nA(S);l=rA(y[C],P,p)}return l}function P2(i,n=[],d=[],p=""){let _=(S,y,l)=>{let C={relativePath:l===void 0?S.path||"":l,caseSensitive:S.caseSensitive===!0,childrenIndex:y,route:S};C.relativePath.startsWith("/")&&(un(C.relativePath.startsWith(p),`Absolute route path "${C.relativePath}" nested under path "${p}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(p.length));let P=yc([p,C.relativePath]),k=d.concat(C);S.children&&S.children.length>0&&(un(S.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${P}".`),P2(S.children,n,k,P)),!(S.path==null&&!S.index)&&n.push({path:P,score:eA(P,S.index),routesMeta:k})};return i.forEach((S,y)=>{var l;if(S.path===""||!((l=S.path)!=null&&l.includes("?")))_(S,y);else for(let C of R2(S.path))_(S,y,C)}),n}function R2(i){let n=i.split("/");if(n.length===0)return[];let[d,...p]=n,_=d.endsWith("?"),S=d.replace(/\?$/,"");if(p.length===0)return _?[S,""]:[S];let y=R2(p.join("/")),l=[];return l.push(...y.map(C=>C===""?S:[S,C].join("/"))),_&&l.push(...y),l.map(C=>i.startsWith("/")&&C===""?"/":C)}function HM(i){i.sort((n,d)=>n.score!==d.score?d.score-n.score:tA(n.routesMeta.map(p=>p.childrenIndex),d.routesMeta.map(p=>p.childrenIndex)))}var WM=/^:[\w-]+$/,KM=3,YM=2,XM=1,QM=10,JM=-2,Rx=i=>i==="*";function eA(i,n){let d=i.split("/"),p=d.length;return d.some(Rx)&&(p+=JM),n&&(p+=YM),d.filter(_=>!Rx(_)).reduce((_,S)=>_+(WM.test(S)?KM:S===""?XM:QM),p)}function tA(i,n){return i.length===n.length&&i.slice(0,-1).every((p,_)=>p===n[_])?i[i.length-1]-n[n.length-1]:0}function rA(i,n,d=!1){let{routesMeta:p}=i,_={},S="/",y=[];for(let l=0;l<p.length;++l){let C=p[l],P=l===p.length-1,k=S==="/"?n:n.slice(S.length)||"/",O=D_({path:C.relativePath,caseSensitive:C.caseSensitive,end:P},k),L=C.route;if(!O&&P&&d&&!p[p.length-1].route.index&&(O=D_({path:C.relativePath,caseSensitive:C.caseSensitive,end:!1},k)),!O)return null;Object.assign(_,O.params),y.push({params:_,pathname:yc([S,O.pathname]),pathnameBase:lA(yc([S,O.pathnameBase])),route:L}),O.pathnameBase!=="/"&&(S=yc([S,O.pathnameBase]))}return y}function D_(i,n){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[d,p]=iA(i.path,i.caseSensitive,i.end),_=n.match(d);if(!_)return null;let S=_[0],y=S.replace(/(.)\/+$/,"$1"),l=_.slice(1);return{params:p.reduce((P,{paramName:k,isOptional:O},L)=>{if(k==="*"){let G=l[L]||"";y=S.slice(0,S.length-G.length).replace(/(.)\/+$/,"$1")}const F=l[L];return O&&!F?P[k]=void 0:P[k]=(F||"").replace(/%2F/g,"/"),P},{}),pathname:S,pathnameBase:y,pattern:i}}function iA(i,n=!1,d=!0){Al(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let p=[],_="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,l,C)=>(p.push({paramName:l,isOptional:C!=null}),C?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(p.push({paramName:"*"}),_+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):d?_+="\\/*$":i!==""&&i!=="/"&&(_+="(?:(?=\\/|$))"),[new RegExp(_,n?void 0:"i"),p]}function nA(i){try{return i.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Al(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),i}}function _c(i,n){if(n==="/")return i;if(!i.toLowerCase().startsWith(n.toLowerCase()))return null;let d=n.endsWith("/")?n.length-1:n.length,p=i.charAt(d);return p&&p!=="/"?null:i.slice(d)||"/"}function aA(i,n="/"){let{pathname:d,search:p="",hash:_=""}=typeof i=="string"?np(i):i;return{pathname:d?d.startsWith("/")?d:sA(d,n):n,search:uA(p),hash:cA(_)}}function sA(i,n){let d=n.replace(/\/+$/,"").split("/");return i.split("/").forEach(_=>{_===".."?d.length>1&&d.pop():_!=="."&&d.push(_)}),d.length>1?d.join("/"):"/"}function A0(i,n,d,p){return`Cannot include a '${i}' character in a manually specified \`to.${n}\` field [${JSON.stringify(p)}].  Please separate it out to the \`to.${d}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function oA(i){return i.filter((n,d)=>d===0||n.route.path&&n.route.path.length>0)}function wv(i){let n=oA(i);return n.map((d,p)=>p===n.length-1?d.pathname:d.pathnameBase)}function Sv(i,n,d,p=!1){let _;typeof i=="string"?_=np(i):(_={...i},un(!_.pathname||!_.pathname.includes("?"),A0("?","pathname","search",_)),un(!_.pathname||!_.pathname.includes("#"),A0("#","pathname","hash",_)),un(!_.search||!_.search.includes("#"),A0("#","search","hash",_)));let S=i===""||_.pathname==="",y=S?"/":_.pathname,l;if(y==null)l=d;else{let O=n.length-1;if(!p&&y.startsWith("..")){let L=y.split("/");for(;L[0]==="..";)L.shift(),O-=1;_.pathname=L.join("/")}l=O>=0?n[O]:"/"}let C=aA(_,l),P=y&&y!=="/"&&y.endsWith("/"),k=(S||y===".")&&d.endsWith("/");return!C.pathname.endsWith("/")&&(P||k)&&(C.pathname+="/"),C}var yc=i=>i.join("/").replace(/\/\/+/g,"/"),lA=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),uA=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,cA=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function hA(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var I2=["POST","PUT","PATCH","DELETE"];new Set(I2);var dA=["GET",...I2];new Set(dA);var ap=se.createContext(null);ap.displayName="DataRouter";var Z_=se.createContext(null);Z_.displayName="DataRouterState";var D2=se.createContext({isTransitioning:!1});D2.displayName="ViewTransition";var fA=se.createContext(new Map);fA.displayName="Fetchers";var pA=se.createContext(null);pA.displayName="Await";var Cl=se.createContext(null);Cl.displayName="Navigation";var km=se.createContext(null);km.displayName="Location";var ko=se.createContext({outlet:null,matches:[],isDataRoute:!1});ko.displayName="Route";var Tv=se.createContext(null);Tv.displayName="RouteError";function mA(i,{relative:n}={}){un(sp(),"useHref() may be used only in the context of a <Router> component.");let{basename:d,navigator:p}=se.useContext(Cl),{hash:_,pathname:S,search:y}=Bm(i,{relative:n}),l=S;return d!=="/"&&(l=S==="/"?d:yc([d,S])),p.createHref({pathname:l,search:y,hash:_})}function sp(){return se.useContext(km)!=null}function to(){return un(sp(),"useLocation() may be used only in the context of a <Router> component."),se.useContext(km).location}var z2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function L2(i){se.useContext(Cl).static||se.useLayoutEffect(i)}function Cu(){let{isDataRoute:i}=se.useContext(ko);return i?IA():gA()}function gA(){un(sp(),"useNavigate() may be used only in the context of a <Router> component.");let i=se.useContext(ap),{basename:n,navigator:d}=se.useContext(Cl),{matches:p}=se.useContext(ko),{pathname:_}=to(),S=JSON.stringify(wv(p)),y=se.useRef(!1);return L2(()=>{y.current=!0}),se.useCallback((C,P={})=>{if(Al(y.current,z2),!y.current)return;if(typeof C=="number"){d.go(C);return}let k=Sv(C,JSON.parse(S),_,P.relative==="path");i==null&&n!=="/"&&(k.pathname=k.pathname==="/"?n:yc([n,k.pathname])),(P.replace?d.replace:d.push)(k,P.state,P)},[n,d,S,_,i])}var yA=se.createContext(null);function _A(i){let n=se.useContext(ko).outlet;return n&&se.createElement(yA.Provider,{value:i},n)}function vA(){let{matches:i}=se.useContext(ko),n=i[i.length-1];return n?n.params:{}}function Bm(i,{relative:n}={}){let{matches:d}=se.useContext(ko),{pathname:p}=to(),_=JSON.stringify(wv(d));return se.useMemo(()=>Sv(i,JSON.parse(_),p,n==="path"),[i,_,p,n])}function xA(i,n){return k2(i,n)}function k2(i,n,d,p){var pe;un(sp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:_,static:S}=se.useContext(Cl),{matches:y}=se.useContext(ko),l=y[y.length-1],C=l?l.params:{},P=l?l.pathname:"/",k=l?l.pathnameBase:"/",O=l&&l.route;{let me=O&&O.path||"";B2(P,!O||me.endsWith("*")||me.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${P}" (under <Route path="${me}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${me}"> to <Route path="${me==="/"?"*":`${me}/*`}">.`)}let L=to(),F;if(n){let me=typeof n=="string"?np(n):n;un(k==="/"||((pe=me.pathname)==null?void 0:pe.startsWith(k)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${k}" but pathname "${me.pathname}" was given in the \`location\` prop.`),F=me}else F=L;let G=F.pathname||"/",ee=G;if(k!=="/"){let me=k.replace(/^\//,"").split("/");ee="/"+G.replace(/^\//,"").split("/").slice(me.length).join("/")}let X=!S&&d&&d.matches&&d.matches.length>0?d.matches:E2(i,{pathname:ee});Al(O||X!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),Al(X==null||X[X.length-1].route.element!==void 0||X[X.length-1].route.Component!==void 0||X[X.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let W=MA(X&&X.map(me=>Object.assign({},me,{params:Object.assign({},C,me.params),pathname:yc([k,_.encodeLocation?_.encodeLocation(me.pathname).pathname:me.pathname]),pathnameBase:me.pathnameBase==="/"?k:yc([k,_.encodeLocation?_.encodeLocation(me.pathnameBase).pathname:me.pathnameBase])})),y,d,p);return n&&W?se.createElement(km.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},W):W}function bA(){let i=RA(),n=hA(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),d=i instanceof Error?i.stack:null,p="rgba(200,200,200, 0.5)",_={padding:"0.5rem",backgroundColor:p},S={padding:"2px 4px",backgroundColor:p},y=null;return console.error("Error handled by React Router default ErrorBoundary:",i),y=se.createElement(se.Fragment,null,se.createElement("p",null," Hey developer "),se.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",se.createElement("code",{style:S},"ErrorBoundary")," or"," ",se.createElement("code",{style:S},"errorElement")," prop on your route.")),se.createElement(se.Fragment,null,se.createElement("h2",null,"Unexpected Application Error!"),se.createElement("h3",{style:{fontStyle:"italic"}},n),d?se.createElement("pre",{style:_},d):null,y)}var wA=se.createElement(bA,null),SA=class extends se.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,n){return n.location!==i.location||n.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:n.error,location:n.location,revalidation:i.revalidation||n.revalidation}}componentDidCatch(i,n){console.error("React Router caught the following error during render",i,n)}render(){return this.state.error!==void 0?se.createElement(ko.Provider,{value:this.props.routeContext},se.createElement(Tv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function TA({routeContext:i,match:n,children:d}){let p=se.useContext(ap);return p&&p.static&&p.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(p.staticContext._deepestRenderedBoundaryId=n.route.id),se.createElement(ko.Provider,{value:i},d)}function MA(i,n=[],d=null,p=null){if(i==null){if(!d)return null;if(d.errors)i=d.matches;else if(n.length===0&&!d.initialized&&d.matches.length>0)i=d.matches;else return null}let _=i,S=d==null?void 0:d.errors;if(S!=null){let C=_.findIndex(P=>P.route.id&&(S==null?void 0:S[P.route.id])!==void 0);un(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(S).join(",")}`),_=_.slice(0,Math.min(_.length,C+1))}let y=!1,l=-1;if(d)for(let C=0;C<_.length;C++){let P=_[C];if((P.route.HydrateFallback||P.route.hydrateFallbackElement)&&(l=C),P.route.id){let{loaderData:k,errors:O}=d,L=P.route.loader&&!k.hasOwnProperty(P.route.id)&&(!O||O[P.route.id]===void 0);if(P.route.lazy||L){y=!0,l>=0?_=_.slice(0,l+1):_=[_[0]];break}}}return _.reduceRight((C,P,k)=>{let O,L=!1,F=null,G=null;d&&(O=S&&P.route.id?S[P.route.id]:void 0,F=P.route.errorElement||wA,y&&(l<0&&k===0?(B2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,G=null):l===k&&(L=!0,G=P.route.hydrateFallbackElement||null)));let ee=n.concat(_.slice(0,k+1)),X=()=>{let W;return O?W=F:L?W=G:P.route.Component?W=se.createElement(P.route.Component,null):P.route.element?W=P.route.element:W=C,se.createElement(TA,{match:P,routeContext:{outlet:C,matches:ee,isDataRoute:d!=null},children:W})};return d&&(P.route.ErrorBoundary||P.route.errorElement||k===0)?se.createElement(SA,{location:d.location,revalidation:d.revalidation,component:F,error:O,children:X(),routeContext:{outlet:null,matches:ee,isDataRoute:!0}}):X()},null)}function Mv(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AA(i){let n=se.useContext(ap);return un(n,Mv(i)),n}function CA(i){let n=se.useContext(Z_);return un(n,Mv(i)),n}function EA(i){let n=se.useContext(ko);return un(n,Mv(i)),n}function Av(i){let n=EA(i),d=n.matches[n.matches.length-1];return un(d.route.id,`${i} can only be used on routes that contain a unique "id"`),d.route.id}function PA(){return Av("useRouteId")}function RA(){var p;let i=se.useContext(Tv),n=CA("useRouteError"),d=Av("useRouteError");return i!==void 0?i:(p=n.errors)==null?void 0:p[d]}function IA(){let{router:i}=AA("useNavigate"),n=Av("useNavigate"),d=se.useRef(!1);return L2(()=>{d.current=!0}),se.useCallback(async(_,S={})=>{Al(d.current,z2),d.current&&(typeof _=="number"?i.navigate(_):await i.navigate(_,{fromRouteId:n,...S}))},[i,n])}var Ix={};function B2(i,n,d){!n&&!Ix[i]&&(Ix[i]=!0,Al(!1,d))}se.memo(DA);function DA({routes:i,future:n,state:d}){return k2(i,void 0,d,n)}function zA({to:i,replace:n,state:d,relative:p}){un(sp(),"<Navigate> may be used only in the context of a <Router> component.");let{static:_}=se.useContext(Cl);Al(!_,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:S}=se.useContext(ko),{pathname:y}=to(),l=Cu(),C=Sv(i,wv(S),y,p==="path"),P=JSON.stringify(C);return se.useEffect(()=>{l(JSON.parse(P),{replace:n,state:d,relative:p})},[l,P,p,n,d]),null}function O2(i){return _A(i.context)}function Fa(i){un(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function LA({basename:i="/",children:n=null,location:d,navigationType:p="POP",navigator:_,static:S=!1}){un(!sp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=i.replace(/^\/*/,"/"),l=se.useMemo(()=>({basename:y,navigator:_,static:S,future:{}}),[y,_,S]);typeof d=="string"&&(d=np(d));let{pathname:C="/",search:P="",hash:k="",state:O=null,key:L="default"}=d,F=se.useMemo(()=>{let G=_c(C,y);return G==null?null:{location:{pathname:G,search:P,hash:k,state:O,key:L},navigationType:p}},[y,C,P,k,O,L,p]);return Al(F!=null,`<Router basename="${y}"> is not able to match the URL "${C}${P}${k}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:se.createElement(Cl.Provider,{value:l},se.createElement(km.Provider,{children:n,value:F}))}function kA({children:i,location:n}){return xA(G0(i),n)}function G0(i,n=[]){let d=[];return se.Children.forEach(i,(p,_)=>{if(!se.isValidElement(p))return;let S=[...n,_];if(p.type===se.Fragment){d.push.apply(d,G0(p.props.children,S));return}un(p.type===Fa,`[${typeof p.type=="string"?p.type:p.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),un(!p.props.index||!p.props.children,"An index route cannot have child routes.");let y={id:p.props.id||S.join("-"),caseSensitive:p.props.caseSensitive,element:p.props.element,Component:p.props.Component,index:p.props.index,path:p.props.path,loader:p.props.loader,action:p.props.action,hydrateFallbackElement:p.props.hydrateFallbackElement,HydrateFallback:p.props.HydrateFallback,errorElement:p.props.errorElement,ErrorBoundary:p.props.ErrorBoundary,hasErrorBoundary:p.props.hasErrorBoundary===!0||p.props.ErrorBoundary!=null||p.props.errorElement!=null,shouldRevalidate:p.props.shouldRevalidate,handle:p.props.handle,lazy:p.props.lazy};p.props.children&&(y.children=G0(p.props.children,S)),d.push(y)}),d}var w_="get",S_="application/x-www-form-urlencoded";function q_(i){return i!=null&&typeof i.tagName=="string"}function BA(i){return q_(i)&&i.tagName.toLowerCase()==="button"}function OA(i){return q_(i)&&i.tagName.toLowerCase()==="form"}function jA(i){return q_(i)&&i.tagName.toLowerCase()==="input"}function NA(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function FA(i,n){return i.button===0&&(!n||n==="_self")&&!NA(i)}var Tg=null;function UA(){if(Tg===null)try{new FormData(document.createElement("form"),0),Tg=!1}catch{Tg=!0}return Tg}var VA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function C0(i){return i!=null&&!VA.has(i)?(Al(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${S_}"`),null):i}function $A(i,n){let d,p,_,S,y;if(OA(i)){let l=i.getAttribute("action");p=l?_c(l,n):null,d=i.getAttribute("method")||w_,_=C0(i.getAttribute("enctype"))||S_,S=new FormData(i)}else if(BA(i)||jA(i)&&(i.type==="submit"||i.type==="image")){let l=i.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let C=i.getAttribute("formaction")||l.getAttribute("action");if(p=C?_c(C,n):null,d=i.getAttribute("formmethod")||l.getAttribute("method")||w_,_=C0(i.getAttribute("formenctype"))||C0(l.getAttribute("enctype"))||S_,S=new FormData(l,i),!UA()){let{name:P,type:k,value:O}=i;if(k==="image"){let L=P?`${P}.`:"";S.append(`${L}x`,"0"),S.append(`${L}y`,"0")}else P&&S.append(P,O)}}else{if(q_(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');d=w_,p=null,_=S_,y=i}return S&&_==="text/plain"&&(y=S,S=void 0),{action:p,method:d.toLowerCase(),encType:_,formData:S,body:y}}function Cv(i,n){if(i===!1||i===null||typeof i>"u")throw new Error(n)}async function ZA(i,n){if(i.id in n)return n[i.id];try{let d=await import(i.module);return n[i.id]=d,d}catch(d){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(d),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function qA(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function GA(i,n,d){let p=await Promise.all(i.map(async _=>{let S=n.routes[_.route.id];if(S){let y=await ZA(S,d);return y.links?y.links():[]}return[]}));return YA(p.flat(1).filter(qA).filter(_=>_.rel==="stylesheet"||_.rel==="preload").map(_=>_.rel==="stylesheet"?{..._,rel:"prefetch",as:"style"}:{..._,rel:"prefetch"}))}function Dx(i,n,d,p,_,S){let y=(C,P)=>d[P]?C.route.id!==d[P].route.id:!0,l=(C,P)=>{var k;return d[P].pathname!==C.pathname||((k=d[P].route.path)==null?void 0:k.endsWith("*"))&&d[P].params["*"]!==C.params["*"]};return S==="assets"?n.filter((C,P)=>y(C,P)||l(C,P)):S==="data"?n.filter((C,P)=>{var O;let k=p.routes[C.route.id];if(!k||!k.hasLoader)return!1;if(y(C,P)||l(C,P))return!0;if(C.route.shouldRevalidate){let L=C.route.shouldRevalidate({currentUrl:new URL(_.pathname+_.search+_.hash,window.origin),currentParams:((O=d[0])==null?void 0:O.params)||{},nextUrl:new URL(i,window.origin),nextParams:C.params,defaultShouldRevalidate:!0});if(typeof L=="boolean")return L}return!0}):[]}function HA(i,n,{includeHydrateFallback:d}={}){return WA(i.map(p=>{let _=n.routes[p.route.id];if(!_)return[];let S=[_.module];return _.clientActionModule&&(S=S.concat(_.clientActionModule)),_.clientLoaderModule&&(S=S.concat(_.clientLoaderModule)),d&&_.hydrateFallbackModule&&(S=S.concat(_.hydrateFallbackModule)),_.imports&&(S=S.concat(_.imports)),S}).flat(1))}function WA(i){return[...new Set(i)]}function KA(i){let n={},d=Object.keys(i).sort();for(let p of d)n[p]=i[p];return n}function YA(i,n){let d=new Set;return new Set(n),i.reduce((p,_)=>{let S=JSON.stringify(KA(_));return d.has(S)||(d.add(S),p.push({key:S,link:_})),p},[])}var XA=new Set([100,101,204,205]);function QA(i,n){let d=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return d.pathname==="/"?d.pathname="_root.data":n&&_c(d.pathname,n)==="/"?d.pathname=`${n.replace(/\/$/,"")}/_root.data`:d.pathname=`${d.pathname.replace(/\/$/,"")}.data`,d}function j2(){let i=se.useContext(ap);return Cv(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function JA(){let i=se.useContext(Z_);return Cv(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Ev=se.createContext(void 0);Ev.displayName="FrameworkContext";function N2(){let i=se.useContext(Ev);return Cv(i,"You must render this element inside a <HydratedRouter> element"),i}function eC(i,n){let d=se.useContext(Ev),[p,_]=se.useState(!1),[S,y]=se.useState(!1),{onFocus:l,onBlur:C,onMouseEnter:P,onMouseLeave:k,onTouchStart:O}=n,L=se.useRef(null);se.useEffect(()=>{if(i==="render"&&y(!0),i==="viewport"){let ee=W=>{W.forEach(pe=>{y(pe.isIntersecting)})},X=new IntersectionObserver(ee,{threshold:.5});return L.current&&X.observe(L.current),()=>{X.disconnect()}}},[i]),se.useEffect(()=>{if(p){let ee=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(ee)}}},[p]);let F=()=>{_(!0)},G=()=>{_(!1),y(!1)};return d?i!=="intent"?[S,L,{}]:[S,L,{onFocus:dm(l,F),onBlur:dm(C,G),onMouseEnter:dm(P,F),onMouseLeave:dm(k,G),onTouchStart:dm(O,F)}]:[!1,L,{}]}function dm(i,n){return d=>{i&&i(d),d.defaultPrevented||n(d)}}function tC({page:i,...n}){let{router:d}=j2(),p=se.useMemo(()=>E2(d.routes,i,d.basename),[d.routes,i,d.basename]);return p?se.createElement(iC,{page:i,matches:p,...n}):null}function rC(i){let{manifest:n,routeModules:d}=N2(),[p,_]=se.useState([]);return se.useEffect(()=>{let S=!1;return GA(i,n,d).then(y=>{S||_(y)}),()=>{S=!0}},[i,n,d]),p}function iC({page:i,matches:n,...d}){let p=to(),{manifest:_,routeModules:S}=N2(),{basename:y}=j2(),{loaderData:l,matches:C}=JA(),P=se.useMemo(()=>Dx(i,n,C,_,p,"data"),[i,n,C,_,p]),k=se.useMemo(()=>Dx(i,n,C,_,p,"assets"),[i,n,C,_,p]),O=se.useMemo(()=>{if(i===p.pathname+p.search+p.hash)return[];let G=new Set,ee=!1;if(n.forEach(W=>{var me;let pe=_.routes[W.route.id];!pe||!pe.hasLoader||(!P.some(_e=>_e.route.id===W.route.id)&&W.route.id in l&&((me=S[W.route.id])!=null&&me.shouldRevalidate)||pe.hasClientLoader?ee=!0:G.add(W.route.id))}),G.size===0)return[];let X=QA(i,y);return ee&&G.size>0&&X.searchParams.set("_routes",n.filter(W=>G.has(W.route.id)).map(W=>W.route.id).join(",")),[X.pathname+X.search]},[y,l,p,_,P,n,i,S]),L=se.useMemo(()=>HA(k,_),[k,_]),F=rC(k);return se.createElement(se.Fragment,null,O.map(G=>se.createElement("link",{key:G,rel:"prefetch",as:"fetch",href:G,...d})),L.map(G=>se.createElement("link",{key:G,rel:"modulepreload",href:G,...d})),F.map(({key:G,link:ee})=>se.createElement("link",{key:G,...ee})))}function nC(...i){return n=>{i.forEach(d=>{typeof d=="function"?d(n):d!=null&&(d.current=n)})}}var F2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{F2&&(window.__reactRouterVersion="7.5.2")}catch{}function aC({basename:i,children:n,window:d}){let p=se.useRef();p.current==null&&(p.current=$M({window:d,v5Compat:!0}));let _=p.current,[S,y]=se.useState({action:_.action,location:_.location}),l=se.useCallback(C=>{se.startTransition(()=>y(C))},[y]);return se.useLayoutEffect(()=>_.listen(l),[_,l]),se.createElement(LA,{basename:i,children:n,location:S.location,navigationType:S.action,navigator:_})}var U2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,V2=se.forwardRef(function({onClick:n,discover:d="render",prefetch:p="none",relative:_,reloadDocument:S,replace:y,state:l,target:C,to:P,preventScrollReset:k,viewTransition:O,...L},F){let{basename:G}=se.useContext(Cl),ee=typeof P=="string"&&U2.test(P),X,W=!1;if(typeof P=="string"&&ee&&(X=P,F2))try{let Ye=new URL(window.location.href),ht=P.startsWith("//")?new URL(Ye.protocol+P):new URL(P),kt=_c(ht.pathname,G);ht.origin===Ye.origin&&kt!=null?P=kt+ht.search+ht.hash:W=!0}catch{Al(!1,`<Link to="${P}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let pe=mA(P,{relative:_}),[me,_e,Se]=eC(p,L),ke=lC(P,{replace:y,state:l,target:C,preventScrollReset:k,relative:_,viewTransition:O});function nt(Ye){n&&n(Ye),Ye.defaultPrevented||ke(Ye)}let Ke=se.createElement("a",{...L,...Se,href:X||pe,onClick:W||S?n:nt,ref:nC(F,_e),target:C,"data-discover":!ee&&d==="render"?"true":void 0});return me&&!ee?se.createElement(se.Fragment,null,Ke,se.createElement(tC,{page:pe})):Ke});V2.displayName="Link";var ds=se.forwardRef(function({"aria-current":n="page",caseSensitive:d=!1,className:p="",end:_=!1,style:S,to:y,viewTransition:l,children:C,...P},k){let O=Bm(y,{relative:P.relative}),L=to(),F=se.useContext(Z_),{navigator:G,basename:ee}=se.useContext(Cl),X=F!=null&&fC(O)&&l===!0,W=G.encodeLocation?G.encodeLocation(O).pathname:O.pathname,pe=L.pathname,me=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;d||(pe=pe.toLowerCase(),me=me?me.toLowerCase():null,W=W.toLowerCase()),me&&ee&&(me=_c(me,ee)||me);const _e=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let Se=pe===W||!_&&pe.startsWith(W)&&pe.charAt(_e)==="/",ke=me!=null&&(me===W||!_&&me.startsWith(W)&&me.charAt(W.length)==="/"),nt={isActive:Se,isPending:ke,isTransitioning:X},Ke=Se?n:void 0,Ye;typeof p=="function"?Ye=p(nt):Ye=[p,Se?"active":null,ke?"pending":null,X?"transitioning":null].filter(Boolean).join(" ");let ht=typeof S=="function"?S(nt):S;return se.createElement(V2,{...P,"aria-current":Ke,className:Ye,ref:k,style:ht,to:y,viewTransition:l},typeof C=="function"?C(nt):C)});ds.displayName="NavLink";var sC=se.forwardRef(({discover:i="render",fetcherKey:n,navigate:d,reloadDocument:p,replace:_,state:S,method:y=w_,action:l,onSubmit:C,relative:P,preventScrollReset:k,viewTransition:O,...L},F)=>{let G=hC(),ee=dC(l,{relative:P}),X=y.toLowerCase()==="get"?"get":"post",W=typeof l=="string"&&U2.test(l),pe=me=>{if(C&&C(me),me.defaultPrevented)return;me.preventDefault();let _e=me.nativeEvent.submitter,Se=(_e==null?void 0:_e.getAttribute("formmethod"))||y;G(_e||me.currentTarget,{fetcherKey:n,method:Se,navigate:d,replace:_,state:S,relative:P,preventScrollReset:k,viewTransition:O})};return se.createElement("form",{ref:F,method:X,action:ee,onSubmit:p?C:pe,...L,"data-discover":!W&&i==="render"?"true":void 0})});sC.displayName="Form";function oC(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $2(i){let n=se.useContext(ap);return un(n,oC(i)),n}function lC(i,{target:n,replace:d,state:p,preventScrollReset:_,relative:S,viewTransition:y}={}){let l=Cu(),C=to(),P=Bm(i,{relative:S});return se.useCallback(k=>{if(FA(k,n)){k.preventDefault();let O=d!==void 0?d:Mm(C)===Mm(P);l(i,{replace:O,state:p,preventScrollReset:_,relative:S,viewTransition:y})}},[C,l,P,d,p,n,i,_,S,y])}var uC=0,cC=()=>`__${String(++uC)}__`;function hC(){let{router:i}=$2("useSubmit"),{basename:n}=se.useContext(Cl),d=PA();return se.useCallback(async(p,_={})=>{let{action:S,method:y,encType:l,formData:C,body:P}=$A(p,n);if(_.navigate===!1){let k=_.fetcherKey||cC();await i.fetch(k,d,_.action||S,{preventScrollReset:_.preventScrollReset,formData:C,body:P,formMethod:_.method||y,formEncType:_.encType||l,flushSync:_.flushSync})}else await i.navigate(_.action||S,{preventScrollReset:_.preventScrollReset,formData:C,body:P,formMethod:_.method||y,formEncType:_.encType||l,replace:_.replace,state:_.state,fromRouteId:d,flushSync:_.flushSync,viewTransition:_.viewTransition})},[i,n,d])}function dC(i,{relative:n}={}){let{basename:d}=se.useContext(Cl),p=se.useContext(ko);un(p,"useFormAction must be used inside a RouteContext");let[_]=p.matches.slice(-1),S={...Bm(i||".",{relative:n})},y=to();if(i==null){S.search=y.search;let l=new URLSearchParams(S.search),C=l.getAll("index");if(C.some(k=>k==="")){l.delete("index"),C.filter(O=>O).forEach(O=>l.append("index",O));let k=l.toString();S.search=k?`?${k}`:""}}return(!i||i===".")&&_.route.index&&(S.search=S.search?S.search.replace(/^\?/,"?index&"):"?index"),d!=="/"&&(S.pathname=S.pathname==="/"?d:yc([d,S.pathname])),Mm(S)}function fC(i,n={}){let d=se.useContext(D2);un(d!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:p}=$2("useViewTransitionState"),_=Bm(i,{relative:n.relative});if(!d.isTransitioning)return!1;let S=_c(d.currentLocation.pathname,p)||d.currentLocation.pathname,y=_c(d.nextLocation.pathname,p)||d.nextLocation.pathname;return D_(_.pathname,y)!=null||D_(_.pathname,S)!=null}new TextEncoder;[...XA];var G_=C2();const pC="/assets/tour-1-cover-BQ_1IDva.jpg";function mC(){return q.jsxs("section",{className:"flex flex-col items-center justify-center space-y-7 lg:space-y-12",children:[q.jsx("div",{className:"my-5 lg:mt-10",children:q.jsx("h1",{className:"natours-gradient-text font-italic my-5 text-center text-3xl font-bold lg:text-4xl",children:"Discover Your next adventure"})}),q.jsxs("div",{className:"relative mx-4 mt-2 overflow-hidden rounded bg-white p-3 shadow-md md:w-3/4 lg:rounded-lg lg:p-4",children:[q.jsxs("div",{className:"img-clip relative lg:rounded",children:[q.jsx("div",{className:"bg-natours/40 absolute h-full w-full"}),q.jsx("img",{src:pC,alt:"scenic image",className:"lg:shadow"})]}),q.jsx("p",{className:"md:bottom:12 absolute right-5 bottom-5 md:right-7 md:bottom-14 lg:right-16 lg:bottom-16 lg:text-4xl xl:right-15 xl:bottom-20 xl:text-5xl",children:q.jsx("span",{className:"natours-gradient-t px-3 py-2 text-3xl font-light text-white shadow-md",children:"The Forest Hiker"})})]}),q.jsx("div",{className:"my-4 w-3/4",children:q.jsx("p",{className:"text-center text-xl text-stone-500 italic lg:text-2xl",children:'"Book tours with trusted guides worldwide"'})}),q.jsx("div",{className:"flex w-full items-center justify-evenly lg:w-1/2",children:q.jsx(ds,{to:"/tours",className:"btn-primary my-13 rounded-full px-4 py-3 text-xl text-white lg:px-8 lg:py-6",children:"Explore Tours"})})]})}function Z2(i,n){return function(){return i.apply(n,arguments)}}const{toString:gC}=Object.prototype,{getPrototypeOf:Pv}=Object,H_=(i=>n=>{const d=gC.call(n);return i[d]||(i[d]=d.slice(8,-1).toLowerCase())})(Object.create(null)),El=i=>(i=i.toLowerCase(),n=>H_(n)===i),W_=i=>n=>typeof n===i,{isArray:op}=Array,Am=W_("undefined");function yC(i){return i!==null&&!Am(i)&&i.constructor!==null&&!Am(i.constructor)&&eo(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const q2=El("ArrayBuffer");function _C(i){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(i):n=i&&i.buffer&&q2(i.buffer),n}const vC=W_("string"),eo=W_("function"),G2=W_("number"),K_=i=>i!==null&&typeof i=="object",xC=i=>i===!0||i===!1,T_=i=>{if(H_(i)!=="object")return!1;const n=Pv(i);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},bC=El("Date"),wC=El("File"),SC=El("Blob"),TC=El("FileList"),MC=i=>K_(i)&&eo(i.pipe),AC=i=>{let n;return i&&(typeof FormData=="function"&&i instanceof FormData||eo(i.append)&&((n=H_(i))==="formdata"||n==="object"&&eo(i.toString)&&i.toString()==="[object FormData]"))},CC=El("URLSearchParams"),[EC,PC,RC,IC]=["ReadableStream","Request","Response","Headers"].map(El),DC=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Om(i,n,{allOwnKeys:d=!1}={}){if(i===null||typeof i>"u")return;let p,_;if(typeof i!="object"&&(i=[i]),op(i))for(p=0,_=i.length;p<_;p++)n.call(null,i[p],p,i);else{const S=d?Object.getOwnPropertyNames(i):Object.keys(i),y=S.length;let l;for(p=0;p<y;p++)l=S[p],n.call(null,i[l],l,i)}}function H2(i,n){n=n.toLowerCase();const d=Object.keys(i);let p=d.length,_;for(;p-- >0;)if(_=d[p],n===_.toLowerCase())return _;return null}const Od=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,W2=i=>!Am(i)&&i!==Od;function H0(){const{caseless:i}=W2(this)&&this||{},n={},d=(p,_)=>{const S=i&&H2(n,_)||_;T_(n[S])&&T_(p)?n[S]=H0(n[S],p):T_(p)?n[S]=H0({},p):op(p)?n[S]=p.slice():n[S]=p};for(let p=0,_=arguments.length;p<_;p++)arguments[p]&&Om(arguments[p],d);return n}const zC=(i,n,d,{allOwnKeys:p}={})=>(Om(n,(_,S)=>{d&&eo(_)?i[S]=Z2(_,d):i[S]=_},{allOwnKeys:p}),i),LC=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),kC=(i,n,d,p)=>{i.prototype=Object.create(n.prototype,p),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:n.prototype}),d&&Object.assign(i.prototype,d)},BC=(i,n,d,p)=>{let _,S,y;const l={};if(n=n||{},i==null)return n;do{for(_=Object.getOwnPropertyNames(i),S=_.length;S-- >0;)y=_[S],(!p||p(y,i,n))&&!l[y]&&(n[y]=i[y],l[y]=!0);i=d!==!1&&Pv(i)}while(i&&(!d||d(i,n))&&i!==Object.prototype);return n},OC=(i,n,d)=>{i=String(i),(d===void 0||d>i.length)&&(d=i.length),d-=n.length;const p=i.indexOf(n,d);return p!==-1&&p===d},jC=i=>{if(!i)return null;if(op(i))return i;let n=i.length;if(!G2(n))return null;const d=new Array(n);for(;n-- >0;)d[n]=i[n];return d},NC=(i=>n=>i&&n instanceof i)(typeof Uint8Array<"u"&&Pv(Uint8Array)),FC=(i,n)=>{const p=(i&&i[Symbol.iterator]).call(i);let _;for(;(_=p.next())&&!_.done;){const S=_.value;n.call(i,S[0],S[1])}},UC=(i,n)=>{let d;const p=[];for(;(d=i.exec(n))!==null;)p.push(d);return p},VC=El("HTMLFormElement"),$C=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(d,p,_){return p.toUpperCase()+_}),zx=(({hasOwnProperty:i})=>(n,d)=>i.call(n,d))(Object.prototype),ZC=El("RegExp"),K2=(i,n)=>{const d=Object.getOwnPropertyDescriptors(i),p={};Om(d,(_,S)=>{let y;(y=n(_,S,i))!==!1&&(p[S]=y||_)}),Object.defineProperties(i,p)},qC=i=>{K2(i,(n,d)=>{if(eo(i)&&["arguments","caller","callee"].indexOf(d)!==-1)return!1;const p=i[d];if(eo(p)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+d+"'")})}})},GC=(i,n)=>{const d={},p=_=>{_.forEach(S=>{d[S]=!0})};return op(i)?p(i):p(String(i).split(n)),d},HC=()=>{},WC=(i,n)=>i!=null&&Number.isFinite(i=+i)?i:n;function KC(i){return!!(i&&eo(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const YC=i=>{const n=new Array(10),d=(p,_)=>{if(K_(p)){if(n.indexOf(p)>=0)return;if(!("toJSON"in p)){n[_]=p;const S=op(p)?[]:{};return Om(p,(y,l)=>{const C=d(y,_+1);!Am(C)&&(S[l]=C)}),n[_]=void 0,S}}return p};return d(i,0)},XC=El("AsyncFunction"),QC=i=>i&&(K_(i)||eo(i))&&eo(i.then)&&eo(i.catch),Y2=((i,n)=>i?setImmediate:n?((d,p)=>(Od.addEventListener("message",({source:_,data:S})=>{_===Od&&S===d&&p.length&&p.shift()()},!1),_=>{p.push(_),Od.postMessage(d,"*")}))(`axios@${Math.random()}`,[]):d=>setTimeout(d))(typeof setImmediate=="function",eo(Od.postMessage)),JC=typeof queueMicrotask<"u"?queueMicrotask.bind(Od):typeof process<"u"&&process.nextTick||Y2,ct={isArray:op,isArrayBuffer:q2,isBuffer:yC,isFormData:AC,isArrayBufferView:_C,isString:vC,isNumber:G2,isBoolean:xC,isObject:K_,isPlainObject:T_,isReadableStream:EC,isRequest:PC,isResponse:RC,isHeaders:IC,isUndefined:Am,isDate:bC,isFile:wC,isBlob:SC,isRegExp:ZC,isFunction:eo,isStream:MC,isURLSearchParams:CC,isTypedArray:NC,isFileList:TC,forEach:Om,merge:H0,extend:zC,trim:DC,stripBOM:LC,inherits:kC,toFlatObject:BC,kindOf:H_,kindOfTest:El,endsWith:OC,toArray:jC,forEachEntry:FC,matchAll:UC,isHTMLForm:VC,hasOwnProperty:zx,hasOwnProp:zx,reduceDescriptors:K2,freezeMethods:qC,toObjectSet:GC,toCamelCase:$C,noop:HC,toFiniteNumber:WC,findKey:H2,global:Od,isContextDefined:W2,isSpecCompliantForm:KC,toJSONObject:YC,isAsyncFn:XC,isThenable:QC,setImmediate:Y2,asap:JC};function Br(i,n,d,p,_){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",n&&(this.code=n),d&&(this.config=d),p&&(this.request=p),_&&(this.response=_,this.status=_.status?_.status:null)}ct.inherits(Br,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ct.toJSONObject(this.config),code:this.code,status:this.status}}});const X2=Br.prototype,Q2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{Q2[i]={value:i}});Object.defineProperties(Br,Q2);Object.defineProperty(X2,"isAxiosError",{value:!0});Br.from=(i,n,d,p,_,S)=>{const y=Object.create(X2);return ct.toFlatObject(i,y,function(C){return C!==Error.prototype},l=>l!=="isAxiosError"),Br.call(y,i.message,n,d,p,_),y.cause=i,y.name=i.name,S&&Object.assign(y,S),y};const eE=null;function W0(i){return ct.isPlainObject(i)||ct.isArray(i)}function J2(i){return ct.endsWith(i,"[]")?i.slice(0,-2):i}function Lx(i,n,d){return i?i.concat(n).map(function(_,S){return _=J2(_),!d&&S?"["+_+"]":_}).join(d?".":""):n}function tE(i){return ct.isArray(i)&&!i.some(W0)}const rE=ct.toFlatObject(ct,{},null,function(n){return/^is[A-Z]/.test(n)});function Y_(i,n,d){if(!ct.isObject(i))throw new TypeError("target must be an object");n=n||new FormData,d=ct.toFlatObject(d,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ee,X){return!ct.isUndefined(X[ee])});const p=d.metaTokens,_=d.visitor||k,S=d.dots,y=d.indexes,C=(d.Blob||typeof Blob<"u"&&Blob)&&ct.isSpecCompliantForm(n);if(!ct.isFunction(_))throw new TypeError("visitor must be a function");function P(G){if(G===null)return"";if(ct.isDate(G))return G.toISOString();if(!C&&ct.isBlob(G))throw new Br("Blob is not supported. Use a Buffer instead.");return ct.isArrayBuffer(G)||ct.isTypedArray(G)?C&&typeof Blob=="function"?new Blob([G]):Buffer.from(G):G}function k(G,ee,X){let W=G;if(G&&!X&&typeof G=="object"){if(ct.endsWith(ee,"{}"))ee=p?ee:ee.slice(0,-2),G=JSON.stringify(G);else if(ct.isArray(G)&&tE(G)||(ct.isFileList(G)||ct.endsWith(ee,"[]"))&&(W=ct.toArray(G)))return ee=J2(ee),W.forEach(function(me,_e){!(ct.isUndefined(me)||me===null)&&n.append(y===!0?Lx([ee],_e,S):y===null?ee:ee+"[]",P(me))}),!1}return W0(G)?!0:(n.append(Lx(X,ee,S),P(G)),!1)}const O=[],L=Object.assign(rE,{defaultVisitor:k,convertValue:P,isVisitable:W0});function F(G,ee){if(!ct.isUndefined(G)){if(O.indexOf(G)!==-1)throw Error("Circular reference detected in "+ee.join("."));O.push(G),ct.forEach(G,function(W,pe){(!(ct.isUndefined(W)||W===null)&&_.call(n,W,ct.isString(pe)?pe.trim():pe,ee,L))===!0&&F(W,ee?ee.concat(pe):[pe])}),O.pop()}}if(!ct.isObject(i))throw new TypeError("data must be an object");return F(i),n}function kx(i){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(p){return n[p]})}function Rv(i,n){this._pairs=[],i&&Y_(i,this,n)}const eS=Rv.prototype;eS.append=function(n,d){this._pairs.push([n,d])};eS.toString=function(n){const d=n?function(p){return n.call(this,p,kx)}:kx;return this._pairs.map(function(_){return d(_[0])+"="+d(_[1])},"").join("&")};function iE(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function tS(i,n,d){if(!n)return i;const p=d&&d.encode||iE;ct.isFunction(d)&&(d={serialize:d});const _=d&&d.serialize;let S;if(_?S=_(n,d):S=ct.isURLSearchParams(n)?n.toString():new Rv(n,d).toString(p),S){const y=i.indexOf("#");y!==-1&&(i=i.slice(0,y)),i+=(i.indexOf("?")===-1?"?":"&")+S}return i}class Bx{constructor(){this.handlers=[]}use(n,d,p){return this.handlers.push({fulfilled:n,rejected:d,synchronous:p?p.synchronous:!1,runWhen:p?p.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){ct.forEach(this.handlers,function(p){p!==null&&n(p)})}}const rS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nE=typeof URLSearchParams<"u"?URLSearchParams:Rv,aE=typeof FormData<"u"?FormData:null,sE=typeof Blob<"u"?Blob:null,oE={isBrowser:!0,classes:{URLSearchParams:nE,FormData:aE,Blob:sE},protocols:["http","https","file","blob","url","data"]},Iv=typeof window<"u"&&typeof document<"u",K0=typeof navigator=="object"&&navigator||void 0,lE=Iv&&(!K0||["ReactNative","NativeScript","NS"].indexOf(K0.product)<0),uE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",cE=Iv&&window.location.href||"http://localhost",hE=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Iv,hasStandardBrowserEnv:lE,hasStandardBrowserWebWorkerEnv:uE,navigator:K0,origin:cE},Symbol.toStringTag,{value:"Module"})),Va={...hE,...oE};function dE(i,n){return Y_(i,new Va.classes.URLSearchParams,Object.assign({visitor:function(d,p,_,S){return Va.isNode&&ct.isBuffer(d)?(this.append(p,d.toString("base64")),!1):S.defaultVisitor.apply(this,arguments)}},n))}function fE(i){return ct.matchAll(/\w+|\[(\w*)]/g,i).map(n=>n[0]==="[]"?"":n[1]||n[0])}function pE(i){const n={},d=Object.keys(i);let p;const _=d.length;let S;for(p=0;p<_;p++)S=d[p],n[S]=i[S];return n}function iS(i){function n(d,p,_,S){let y=d[S++];if(y==="__proto__")return!0;const l=Number.isFinite(+y),C=S>=d.length;return y=!y&&ct.isArray(_)?_.length:y,C?(ct.hasOwnProp(_,y)?_[y]=[_[y],p]:_[y]=p,!l):((!_[y]||!ct.isObject(_[y]))&&(_[y]=[]),n(d,p,_[y],S)&&ct.isArray(_[y])&&(_[y]=pE(_[y])),!l)}if(ct.isFormData(i)&&ct.isFunction(i.entries)){const d={};return ct.forEachEntry(i,(p,_)=>{n(fE(p),_,d,0)}),d}return null}function mE(i,n,d){if(ct.isString(i))try{return(n||JSON.parse)(i),ct.trim(i)}catch(p){if(p.name!=="SyntaxError")throw p}return(d||JSON.stringify)(i)}const jm={transitional:rS,adapter:["xhr","http","fetch"],transformRequest:[function(n,d){const p=d.getContentType()||"",_=p.indexOf("application/json")>-1,S=ct.isObject(n);if(S&&ct.isHTMLForm(n)&&(n=new FormData(n)),ct.isFormData(n))return _?JSON.stringify(iS(n)):n;if(ct.isArrayBuffer(n)||ct.isBuffer(n)||ct.isStream(n)||ct.isFile(n)||ct.isBlob(n)||ct.isReadableStream(n))return n;if(ct.isArrayBufferView(n))return n.buffer;if(ct.isURLSearchParams(n))return d.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let l;if(S){if(p.indexOf("application/x-www-form-urlencoded")>-1)return dE(n,this.formSerializer).toString();if((l=ct.isFileList(n))||p.indexOf("multipart/form-data")>-1){const C=this.env&&this.env.FormData;return Y_(l?{"files[]":n}:n,C&&new C,this.formSerializer)}}return S||_?(d.setContentType("application/json",!1),mE(n)):n}],transformResponse:[function(n){const d=this.transitional||jm.transitional,p=d&&d.forcedJSONParsing,_=this.responseType==="json";if(ct.isResponse(n)||ct.isReadableStream(n))return n;if(n&&ct.isString(n)&&(p&&!this.responseType||_)){const y=!(d&&d.silentJSONParsing)&&_;try{return JSON.parse(n)}catch(l){if(y)throw l.name==="SyntaxError"?Br.from(l,Br.ERR_BAD_RESPONSE,this,null,this.response):l}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Va.classes.FormData,Blob:Va.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ct.forEach(["delete","get","head","post","put","patch"],i=>{jm.headers[i]={}});const gE=ct.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),yE=i=>{const n={};let d,p,_;return i&&i.split(`
`).forEach(function(y){_=y.indexOf(":"),d=y.substring(0,_).trim().toLowerCase(),p=y.substring(_+1).trim(),!(!d||n[d]&&gE[d])&&(d==="set-cookie"?n[d]?n[d].push(p):n[d]=[p]:n[d]=n[d]?n[d]+", "+p:p)}),n},Ox=Symbol("internals");function fm(i){return i&&String(i).trim().toLowerCase()}function M_(i){return i===!1||i==null?i:ct.isArray(i)?i.map(M_):String(i)}function _E(i){const n=Object.create(null),d=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let p;for(;p=d.exec(i);)n[p[1]]=p[2];return n}const vE=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function E0(i,n,d,p,_){if(ct.isFunction(p))return p.call(this,n,d);if(_&&(n=d),!!ct.isString(n)){if(ct.isString(p))return n.indexOf(p)!==-1;if(ct.isRegExp(p))return p.test(n)}}function xE(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,d,p)=>d.toUpperCase()+p)}function bE(i,n){const d=ct.toCamelCase(" "+n);["get","set","has"].forEach(p=>{Object.defineProperty(i,p+d,{value:function(_,S,y){return this[p].call(this,n,_,S,y)},configurable:!0})})}let Is=class{constructor(n){n&&this.set(n)}set(n,d,p){const _=this;function S(l,C,P){const k=fm(C);if(!k)throw new Error("header name must be a non-empty string");const O=ct.findKey(_,k);(!O||_[O]===void 0||P===!0||P===void 0&&_[O]!==!1)&&(_[O||C]=M_(l))}const y=(l,C)=>ct.forEach(l,(P,k)=>S(P,k,C));if(ct.isPlainObject(n)||n instanceof this.constructor)y(n,d);else if(ct.isString(n)&&(n=n.trim())&&!vE(n))y(yE(n),d);else if(ct.isHeaders(n))for(const[l,C]of n.entries())S(C,l,p);else n!=null&&S(d,n,p);return this}get(n,d){if(n=fm(n),n){const p=ct.findKey(this,n);if(p){const _=this[p];if(!d)return _;if(d===!0)return _E(_);if(ct.isFunction(d))return d.call(this,_,p);if(ct.isRegExp(d))return d.exec(_);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,d){if(n=fm(n),n){const p=ct.findKey(this,n);return!!(p&&this[p]!==void 0&&(!d||E0(this,this[p],p,d)))}return!1}delete(n,d){const p=this;let _=!1;function S(y){if(y=fm(y),y){const l=ct.findKey(p,y);l&&(!d||E0(p,p[l],l,d))&&(delete p[l],_=!0)}}return ct.isArray(n)?n.forEach(S):S(n),_}clear(n){const d=Object.keys(this);let p=d.length,_=!1;for(;p--;){const S=d[p];(!n||E0(this,this[S],S,n,!0))&&(delete this[S],_=!0)}return _}normalize(n){const d=this,p={};return ct.forEach(this,(_,S)=>{const y=ct.findKey(p,S);if(y){d[y]=M_(_),delete d[S];return}const l=n?xE(S):String(S).trim();l!==S&&delete d[S],d[l]=M_(_),p[l]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const d=Object.create(null);return ct.forEach(this,(p,_)=>{p!=null&&p!==!1&&(d[_]=n&&ct.isArray(p)?p.join(", "):p)}),d}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,d])=>n+": "+d).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...d){const p=new this(n);return d.forEach(_=>p.set(_)),p}static accessor(n){const p=(this[Ox]=this[Ox]={accessors:{}}).accessors,_=this.prototype;function S(y){const l=fm(y);p[l]||(bE(_,y),p[l]=!0)}return ct.isArray(n)?n.forEach(S):S(n),this}};Is.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ct.reduceDescriptors(Is.prototype,({value:i},n)=>{let d=n[0].toUpperCase()+n.slice(1);return{get:()=>i,set(p){this[d]=p}}});ct.freezeMethods(Is);function P0(i,n){const d=this||jm,p=n||d,_=Is.from(p.headers);let S=p.data;return ct.forEach(i,function(l){S=l.call(d,S,_.normalize(),n?n.status:void 0)}),_.normalize(),S}function nS(i){return!!(i&&i.__CANCEL__)}function lp(i,n,d){Br.call(this,i??"canceled",Br.ERR_CANCELED,n,d),this.name="CanceledError"}ct.inherits(lp,Br,{__CANCEL__:!0});function aS(i,n,d){const p=d.config.validateStatus;!d.status||!p||p(d.status)?i(d):n(new Br("Request failed with status code "+d.status,[Br.ERR_BAD_REQUEST,Br.ERR_BAD_RESPONSE][Math.floor(d.status/100)-4],d.config,d.request,d))}function wE(i){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return n&&n[1]||""}function SE(i,n){i=i||10;const d=new Array(i),p=new Array(i);let _=0,S=0,y;return n=n!==void 0?n:1e3,function(C){const P=Date.now(),k=p[S];y||(y=P),d[_]=C,p[_]=P;let O=S,L=0;for(;O!==_;)L+=d[O++],O=O%i;if(_=(_+1)%i,_===S&&(S=(S+1)%i),P-y<n)return;const F=k&&P-k;return F?Math.round(L*1e3/F):void 0}}function TE(i,n){let d=0,p=1e3/n,_,S;const y=(P,k=Date.now())=>{d=k,_=null,S&&(clearTimeout(S),S=null),i.apply(null,P)};return[(...P)=>{const k=Date.now(),O=k-d;O>=p?y(P,k):(_=P,S||(S=setTimeout(()=>{S=null,y(_)},p-O)))},()=>_&&y(_)]}const z_=(i,n,d=3)=>{let p=0;const _=SE(50,250);return TE(S=>{const y=S.loaded,l=S.lengthComputable?S.total:void 0,C=y-p,P=_(C),k=y<=l;p=y;const O={loaded:y,total:l,progress:l?y/l:void 0,bytes:C,rate:P||void 0,estimated:P&&l&&k?(l-y)/P:void 0,event:S,lengthComputable:l!=null,[n?"download":"upload"]:!0};i(O)},d)},jx=(i,n)=>{const d=i!=null;return[p=>n[0]({lengthComputable:d,total:i,loaded:p}),n[1]]},Nx=i=>(...n)=>ct.asap(()=>i(...n)),ME=Va.hasStandardBrowserEnv?((i,n)=>d=>(d=new URL(d,Va.origin),i.protocol===d.protocol&&i.host===d.host&&(n||i.port===d.port)))(new URL(Va.origin),Va.navigator&&/(msie|trident)/i.test(Va.navigator.userAgent)):()=>!0,AE=Va.hasStandardBrowserEnv?{write(i,n,d,p,_,S){const y=[i+"="+encodeURIComponent(n)];ct.isNumber(d)&&y.push("expires="+new Date(d).toGMTString()),ct.isString(p)&&y.push("path="+p),ct.isString(_)&&y.push("domain="+_),S===!0&&y.push("secure"),document.cookie=y.join("; ")},read(i){const n=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function CE(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function EE(i,n){return n?i.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):i}function sS(i,n,d){let p=!CE(n);return i&&(p||d==!1)?EE(i,n):n}const Fx=i=>i instanceof Is?{...i}:i;function Zd(i,n){n=n||{};const d={};function p(P,k,O,L){return ct.isPlainObject(P)&&ct.isPlainObject(k)?ct.merge.call({caseless:L},P,k):ct.isPlainObject(k)?ct.merge({},k):ct.isArray(k)?k.slice():k}function _(P,k,O,L){if(ct.isUndefined(k)){if(!ct.isUndefined(P))return p(void 0,P,O,L)}else return p(P,k,O,L)}function S(P,k){if(!ct.isUndefined(k))return p(void 0,k)}function y(P,k){if(ct.isUndefined(k)){if(!ct.isUndefined(P))return p(void 0,P)}else return p(void 0,k)}function l(P,k,O){if(O in n)return p(P,k);if(O in i)return p(void 0,P)}const C={url:S,method:S,data:S,baseURL:y,transformRequest:y,transformResponse:y,paramsSerializer:y,timeout:y,timeoutMessage:y,withCredentials:y,withXSRFToken:y,adapter:y,responseType:y,xsrfCookieName:y,xsrfHeaderName:y,onUploadProgress:y,onDownloadProgress:y,decompress:y,maxContentLength:y,maxBodyLength:y,beforeRedirect:y,transport:y,httpAgent:y,httpsAgent:y,cancelToken:y,socketPath:y,responseEncoding:y,validateStatus:l,headers:(P,k,O)=>_(Fx(P),Fx(k),O,!0)};return ct.forEach(Object.keys(Object.assign({},i,n)),function(k){const O=C[k]||_,L=O(i[k],n[k],k);ct.isUndefined(L)&&O!==l||(d[k]=L)}),d}const oS=i=>{const n=Zd({},i);let{data:d,withXSRFToken:p,xsrfHeaderName:_,xsrfCookieName:S,headers:y,auth:l}=n;n.headers=y=Is.from(y),n.url=tS(sS(n.baseURL,n.url,n.allowAbsoluteUrls),i.params,i.paramsSerializer),l&&y.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let C;if(ct.isFormData(d)){if(Va.hasStandardBrowserEnv||Va.hasStandardBrowserWebWorkerEnv)y.setContentType(void 0);else if((C=y.getContentType())!==!1){const[P,...k]=C?C.split(";").map(O=>O.trim()).filter(Boolean):[];y.setContentType([P||"multipart/form-data",...k].join("; "))}}if(Va.hasStandardBrowserEnv&&(p&&ct.isFunction(p)&&(p=p(n)),p||p!==!1&&ME(n.url))){const P=_&&S&&AE.read(S);P&&y.set(_,P)}return n},PE=typeof XMLHttpRequest<"u",RE=PE&&function(i){return new Promise(function(d,p){const _=oS(i);let S=_.data;const y=Is.from(_.headers).normalize();let{responseType:l,onUploadProgress:C,onDownloadProgress:P}=_,k,O,L,F,G;function ee(){F&&F(),G&&G(),_.cancelToken&&_.cancelToken.unsubscribe(k),_.signal&&_.signal.removeEventListener("abort",k)}let X=new XMLHttpRequest;X.open(_.method.toUpperCase(),_.url,!0),X.timeout=_.timeout;function W(){if(!X)return;const me=Is.from("getAllResponseHeaders"in X&&X.getAllResponseHeaders()),Se={data:!l||l==="text"||l==="json"?X.responseText:X.response,status:X.status,statusText:X.statusText,headers:me,config:i,request:X};aS(function(nt){d(nt),ee()},function(nt){p(nt),ee()},Se),X=null}"onloadend"in X?X.onloadend=W:X.onreadystatechange=function(){!X||X.readyState!==4||X.status===0&&!(X.responseURL&&X.responseURL.indexOf("file:")===0)||setTimeout(W)},X.onabort=function(){X&&(p(new Br("Request aborted",Br.ECONNABORTED,i,X)),X=null)},X.onerror=function(){p(new Br("Network Error",Br.ERR_NETWORK,i,X)),X=null},X.ontimeout=function(){let _e=_.timeout?"timeout of "+_.timeout+"ms exceeded":"timeout exceeded";const Se=_.transitional||rS;_.timeoutErrorMessage&&(_e=_.timeoutErrorMessage),p(new Br(_e,Se.clarifyTimeoutError?Br.ETIMEDOUT:Br.ECONNABORTED,i,X)),X=null},S===void 0&&y.setContentType(null),"setRequestHeader"in X&&ct.forEach(y.toJSON(),function(_e,Se){X.setRequestHeader(Se,_e)}),ct.isUndefined(_.withCredentials)||(X.withCredentials=!!_.withCredentials),l&&l!=="json"&&(X.responseType=_.responseType),P&&([L,G]=z_(P,!0),X.addEventListener("progress",L)),C&&X.upload&&([O,F]=z_(C),X.upload.addEventListener("progress",O),X.upload.addEventListener("loadend",F)),(_.cancelToken||_.signal)&&(k=me=>{X&&(p(!me||me.type?new lp(null,i,X):me),X.abort(),X=null)},_.cancelToken&&_.cancelToken.subscribe(k),_.signal&&(_.signal.aborted?k():_.signal.addEventListener("abort",k)));const pe=wE(_.url);if(pe&&Va.protocols.indexOf(pe)===-1){p(new Br("Unsupported protocol "+pe+":",Br.ERR_BAD_REQUEST,i));return}X.send(S||null)})},IE=(i,n)=>{const{length:d}=i=i?i.filter(Boolean):[];if(n||d){let p=new AbortController,_;const S=function(P){if(!_){_=!0,l();const k=P instanceof Error?P:this.reason;p.abort(k instanceof Br?k:new lp(k instanceof Error?k.message:k))}};let y=n&&setTimeout(()=>{y=null,S(new Br(`timeout ${n} of ms exceeded`,Br.ETIMEDOUT))},n);const l=()=>{i&&(y&&clearTimeout(y),y=null,i.forEach(P=>{P.unsubscribe?P.unsubscribe(S):P.removeEventListener("abort",S)}),i=null)};i.forEach(P=>P.addEventListener("abort",S));const{signal:C}=p;return C.unsubscribe=()=>ct.asap(l),C}},DE=function*(i,n){let d=i.byteLength;if(d<n){yield i;return}let p=0,_;for(;p<d;)_=p+n,yield i.slice(p,_),p=_},zE=async function*(i,n){for await(const d of LE(i))yield*DE(d,n)},LE=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const n=i.getReader();try{for(;;){const{done:d,value:p}=await n.read();if(d)break;yield p}}finally{await n.cancel()}},Ux=(i,n,d,p)=>{const _=zE(i,n);let S=0,y,l=C=>{y||(y=!0,p&&p(C))};return new ReadableStream({async pull(C){try{const{done:P,value:k}=await _.next();if(P){l(),C.close();return}let O=k.byteLength;if(d){let L=S+=O;d(L)}C.enqueue(new Uint8Array(k))}catch(P){throw l(P),P}},cancel(C){return l(C),_.return()}},{highWaterMark:2})},X_=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",lS=X_&&typeof ReadableStream=="function",kE=X_&&(typeof TextEncoder=="function"?(i=>n=>i.encode(n))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),uS=(i,...n)=>{try{return!!i(...n)}catch{return!1}},BE=lS&&uS(()=>{let i=!1;const n=new Request(Va.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!n}),Vx=64*1024,Y0=lS&&uS(()=>ct.isReadableStream(new Response("").body)),L_={stream:Y0&&(i=>i.body)};X_&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!L_[n]&&(L_[n]=ct.isFunction(i[n])?d=>d[n]():(d,p)=>{throw new Br(`Response type '${n}' is not supported`,Br.ERR_NOT_SUPPORT,p)})})})(new Response);const OE=async i=>{if(i==null)return 0;if(ct.isBlob(i))return i.size;if(ct.isSpecCompliantForm(i))return(await new Request(Va.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(ct.isArrayBufferView(i)||ct.isArrayBuffer(i))return i.byteLength;if(ct.isURLSearchParams(i)&&(i=i+""),ct.isString(i))return(await kE(i)).byteLength},jE=async(i,n)=>{const d=ct.toFiniteNumber(i.getContentLength());return d??OE(n)},NE=X_&&(async i=>{let{url:n,method:d,data:p,signal:_,cancelToken:S,timeout:y,onDownloadProgress:l,onUploadProgress:C,responseType:P,headers:k,withCredentials:O="same-origin",fetchOptions:L}=oS(i);P=P?(P+"").toLowerCase():"text";let F=IE([_,S&&S.toAbortSignal()],y),G;const ee=F&&F.unsubscribe&&(()=>{F.unsubscribe()});let X;try{if(C&&BE&&d!=="get"&&d!=="head"&&(X=await jE(k,p))!==0){let Se=new Request(n,{method:"POST",body:p,duplex:"half"}),ke;if(ct.isFormData(p)&&(ke=Se.headers.get("content-type"))&&k.setContentType(ke),Se.body){const[nt,Ke]=jx(X,z_(Nx(C)));p=Ux(Se.body,Vx,nt,Ke)}}ct.isString(O)||(O=O?"include":"omit");const W="credentials"in Request.prototype;G=new Request(n,{...L,signal:F,method:d.toUpperCase(),headers:k.normalize().toJSON(),body:p,duplex:"half",credentials:W?O:void 0});let pe=await fetch(G);const me=Y0&&(P==="stream"||P==="response");if(Y0&&(l||me&&ee)){const Se={};["status","statusText","headers"].forEach(Ye=>{Se[Ye]=pe[Ye]});const ke=ct.toFiniteNumber(pe.headers.get("content-length")),[nt,Ke]=l&&jx(ke,z_(Nx(l),!0))||[];pe=new Response(Ux(pe.body,Vx,nt,()=>{Ke&&Ke(),ee&&ee()}),Se)}P=P||"text";let _e=await L_[ct.findKey(L_,P)||"text"](pe,i);return!me&&ee&&ee(),await new Promise((Se,ke)=>{aS(Se,ke,{data:_e,headers:Is.from(pe.headers),status:pe.status,statusText:pe.statusText,config:i,request:G})})}catch(W){throw ee&&ee(),W&&W.name==="TypeError"&&/fetch/i.test(W.message)?Object.assign(new Br("Network Error",Br.ERR_NETWORK,i,G),{cause:W.cause||W}):Br.from(W,W&&W.code,i,G)}}),X0={http:eE,xhr:RE,fetch:NE};ct.forEach(X0,(i,n)=>{if(i){try{Object.defineProperty(i,"name",{value:n})}catch{}Object.defineProperty(i,"adapterName",{value:n})}});const $x=i=>`- ${i}`,FE=i=>ct.isFunction(i)||i===null||i===!1,cS={getAdapter:i=>{i=ct.isArray(i)?i:[i];const{length:n}=i;let d,p;const _={};for(let S=0;S<n;S++){d=i[S];let y;if(p=d,!FE(d)&&(p=X0[(y=String(d)).toLowerCase()],p===void 0))throw new Br(`Unknown adapter '${y}'`);if(p)break;_[y||"#"+S]=p}if(!p){const S=Object.entries(_).map(([l,C])=>`adapter ${l} `+(C===!1?"is not supported by the environment":"is not available in the build"));let y=n?S.length>1?`since :
`+S.map($x).join(`
`):" "+$x(S[0]):"as no adapter specified";throw new Br("There is no suitable adapter to dispatch the request "+y,"ERR_NOT_SUPPORT")}return p},adapters:X0};function R0(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new lp(null,i)}function Zx(i){return R0(i),i.headers=Is.from(i.headers),i.data=P0.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),cS.getAdapter(i.adapter||jm.adapter)(i).then(function(p){return R0(i),p.data=P0.call(i,i.transformResponse,p),p.headers=Is.from(p.headers),p},function(p){return nS(p)||(R0(i),p&&p.response&&(p.response.data=P0.call(i,i.transformResponse,p.response),p.response.headers=Is.from(p.response.headers))),Promise.reject(p)})}const hS="1.8.4",Q_={};["object","boolean","number","function","string","symbol"].forEach((i,n)=>{Q_[i]=function(p){return typeof p===i||"a"+(n<1?"n ":" ")+i}});const qx={};Q_.transitional=function(n,d,p){function _(S,y){return"[Axios v"+hS+"] Transitional option '"+S+"'"+y+(p?". "+p:"")}return(S,y,l)=>{if(n===!1)throw new Br(_(y," has been removed"+(d?" in "+d:"")),Br.ERR_DEPRECATED);return d&&!qx[y]&&(qx[y]=!0,console.warn(_(y," has been deprecated since v"+d+" and will be removed in the near future"))),n?n(S,y,l):!0}};Q_.spelling=function(n){return(d,p)=>(console.warn(`${p} is likely a misspelling of ${n}`),!0)};function UE(i,n,d){if(typeof i!="object")throw new Br("options must be an object",Br.ERR_BAD_OPTION_VALUE);const p=Object.keys(i);let _=p.length;for(;_-- >0;){const S=p[_],y=n[S];if(y){const l=i[S],C=l===void 0||y(l,S,i);if(C!==!0)throw new Br("option "+S+" must be "+C,Br.ERR_BAD_OPTION_VALUE);continue}if(d!==!0)throw new Br("Unknown option "+S,Br.ERR_BAD_OPTION)}}const A_={assertOptions:UE,validators:Q_},Su=A_.validators;let Vd=class{constructor(n){this.defaults=n,this.interceptors={request:new Bx,response:new Bx}}async request(n,d){try{return await this._request(n,d)}catch(p){if(p instanceof Error){let _={};Error.captureStackTrace?Error.captureStackTrace(_):_=new Error;const S=_.stack?_.stack.replace(/^.+\n/,""):"";try{p.stack?S&&!String(p.stack).endsWith(S.replace(/^.+\n.+\n/,""))&&(p.stack+=`
`+S):p.stack=S}catch{}}throw p}}_request(n,d){typeof n=="string"?(d=d||{},d.url=n):d=n||{},d=Zd(this.defaults,d);const{transitional:p,paramsSerializer:_,headers:S}=d;p!==void 0&&A_.assertOptions(p,{silentJSONParsing:Su.transitional(Su.boolean),forcedJSONParsing:Su.transitional(Su.boolean),clarifyTimeoutError:Su.transitional(Su.boolean)},!1),_!=null&&(ct.isFunction(_)?d.paramsSerializer={serialize:_}:A_.assertOptions(_,{encode:Su.function,serialize:Su.function},!0)),d.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?d.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:d.allowAbsoluteUrls=!0),A_.assertOptions(d,{baseUrl:Su.spelling("baseURL"),withXsrfToken:Su.spelling("withXSRFToken")},!0),d.method=(d.method||this.defaults.method||"get").toLowerCase();let y=S&&ct.merge(S.common,S[d.method]);S&&ct.forEach(["delete","get","head","post","put","patch","common"],G=>{delete S[G]}),d.headers=Is.concat(y,S);const l=[];let C=!0;this.interceptors.request.forEach(function(ee){typeof ee.runWhen=="function"&&ee.runWhen(d)===!1||(C=C&&ee.synchronous,l.unshift(ee.fulfilled,ee.rejected))});const P=[];this.interceptors.response.forEach(function(ee){P.push(ee.fulfilled,ee.rejected)});let k,O=0,L;if(!C){const G=[Zx.bind(this),void 0];for(G.unshift.apply(G,l),G.push.apply(G,P),L=G.length,k=Promise.resolve(d);O<L;)k=k.then(G[O++],G[O++]);return k}L=l.length;let F=d;for(O=0;O<L;){const G=l[O++],ee=l[O++];try{F=G(F)}catch(X){ee.call(this,X);break}}try{k=Zx.call(this,F)}catch(G){return Promise.reject(G)}for(O=0,L=P.length;O<L;)k=k.then(P[O++],P[O++]);return k}getUri(n){n=Zd(this.defaults,n);const d=sS(n.baseURL,n.url,n.allowAbsoluteUrls);return tS(d,n.params,n.paramsSerializer)}};ct.forEach(["delete","get","head","options"],function(n){Vd.prototype[n]=function(d,p){return this.request(Zd(p||{},{method:n,url:d,data:(p||{}).data}))}});ct.forEach(["post","put","patch"],function(n){function d(p){return function(S,y,l){return this.request(Zd(l||{},{method:n,headers:p?{"Content-Type":"multipart/form-data"}:{},url:S,data:y}))}}Vd.prototype[n]=d(),Vd.prototype[n+"Form"]=d(!0)});let VE=class dS{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let d;this.promise=new Promise(function(S){d=S});const p=this;this.promise.then(_=>{if(!p._listeners)return;let S=p._listeners.length;for(;S-- >0;)p._listeners[S](_);p._listeners=null}),this.promise.then=_=>{let S;const y=new Promise(l=>{p.subscribe(l),S=l}).then(_);return y.cancel=function(){p.unsubscribe(S)},y},n(function(S,y,l){p.reason||(p.reason=new lp(S,y,l),d(p.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const d=this._listeners.indexOf(n);d!==-1&&this._listeners.splice(d,1)}toAbortSignal(){const n=new AbortController,d=p=>{n.abort(p)};return this.subscribe(d),n.signal.unsubscribe=()=>this.unsubscribe(d),n.signal}static source(){let n;return{token:new dS(function(_){n=_}),cancel:n}}};function $E(i){return function(d){return i.apply(null,d)}}function ZE(i){return ct.isObject(i)&&i.isAxiosError===!0}const Q0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Q0).forEach(([i,n])=>{Q0[n]=i});function fS(i){const n=new Vd(i),d=Z2(Vd.prototype.request,n);return ct.extend(d,Vd.prototype,n,{allOwnKeys:!0}),ct.extend(d,n,null,{allOwnKeys:!0}),d.create=function(_){return fS(Zd(i,_))},d}const ei=fS(jm);ei.Axios=Vd;ei.CanceledError=lp;ei.CancelToken=VE;ei.isCancel=nS;ei.VERSION=hS;ei.toFormData=Y_;ei.AxiosError=Br;ei.Cancel=ei.CanceledError;ei.all=function(n){return Promise.all(n)};ei.spread=$E;ei.isAxiosError=ZE;ei.mergeConfig=Zd;ei.AxiosHeaders=Is;ei.formToJSON=i=>iS(ct.isHTMLForm(i)?new FormData(i):i);ei.getAdapter=cS.getAdapter;ei.HttpStatusCode=Q0;ei.default=ei;const{Axios:Jz,AxiosError:eL,CanceledError:tL,isCancel:rL,CancelToken:iL,VERSION:nL,all:aL,Cancel:sL,isAxiosError:oL,spread:lL,toFormData:uL,AxiosHeaders:cL,HttpStatusCode:hL,formToJSON:dL,getAdapter:fL,mergeConfig:pL}=ei;let qE={data:""},GE=i=>typeof window=="object"?((i?i.querySelector("#_goober"):window._goober)||Object.assign((i||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:i||qE,HE=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,WE=/\/\*[^]*?\*\/|  +/g,Gx=/\n+/g,Th=(i,n)=>{let d="",p="",_="";for(let S in i){let y=i[S];S[0]=="@"?S[1]=="i"?d=S+" "+y+";":p+=S[1]=="f"?Th(y,S):S+"{"+Th(y,S[1]=="k"?"":n)+"}":typeof y=="object"?p+=Th(y,n?n.replace(/([^,])+/g,l=>S.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,C=>/&/.test(C)?C.replace(/&/g,l):l?l+" "+C:C)):S):y!=null&&(S=/^--/.test(S)?S:S.replace(/[A-Z]/g,"-$&").toLowerCase(),_+=Th.p?Th.p(S,y):S+":"+y+";")}return d+(n&&_?n+"{"+_+"}":_)+p},gc={},pS=i=>{if(typeof i=="object"){let n="";for(let d in i)n+=d+pS(i[d]);return n}return i},KE=(i,n,d,p,_)=>{let S=pS(i),y=gc[S]||(gc[S]=(C=>{let P=0,k=11;for(;P<C.length;)k=101*k+C.charCodeAt(P++)>>>0;return"go"+k})(S));if(!gc[y]){let C=S!==i?i:(P=>{let k,O,L=[{}];for(;k=HE.exec(P.replace(WE,""));)k[4]?L.shift():k[3]?(O=k[3].replace(Gx," ").trim(),L.unshift(L[0][O]=L[0][O]||{})):L[0][k[1]]=k[2].replace(Gx," ").trim();return L[0]})(i);gc[y]=Th(_?{["@keyframes "+y]:C}:C,d?"":"."+y)}let l=d&&gc.g?gc.g:null;return d&&(gc.g=gc[y]),((C,P,k,O)=>{O?P.data=P.data.replace(O,C):P.data.indexOf(C)===-1&&(P.data=k?C+P.data:P.data+C)})(gc[y],n,p,l),y},YE=(i,n,d)=>i.reduce((p,_,S)=>{let y=n[S];if(y&&y.call){let l=y(d),C=l&&l.props&&l.props.className||/^go/.test(l)&&l;y=C?"."+C:l&&typeof l=="object"?l.props?"":Th(l,""):l===!1?"":l}return p+_+(y??"")},"");function J_(i){let n=this||{},d=i.call?i(n.p):i;return KE(d.unshift?d.raw?YE(d,[].slice.call(arguments,1),n.p):d.reduce((p,_)=>Object.assign(p,_&&_.call?_(n.p):_),{}):d,GE(n.target),n.g,n.o,n.k)}let mS,J0,ev;J_.bind({g:1});let vc=J_.bind({k:1});function XE(i,n,d,p){Th.p=n,mS=i,J0=d,ev=p}function Eh(i,n){let d=this||{};return function(){let p=arguments;function _(S,y){let l=Object.assign({},S),C=l.className||_.className;d.p=Object.assign({theme:J0&&J0()},l),d.o=/ *go\d+/.test(C),l.className=J_.apply(d,p)+(C?" "+C:"");let P=i;return i[0]&&(P=l.as||i,delete l.as),ev&&P[0]&&ev(l),mS(P,l)}return _}}var QE=i=>typeof i=="function",k_=(i,n)=>QE(i)?i(n):i,JE=(()=>{let i=0;return()=>(++i).toString()})(),gS=(()=>{let i;return()=>{if(i===void 0&&typeof window<"u"){let n=matchMedia("(prefers-reduced-motion: reduce)");i=!n||n.matches}return i}})(),eP=20,yS=(i,n)=>{switch(n.type){case 0:return{...i,toasts:[n.toast,...i.toasts].slice(0,eP)};case 1:return{...i,toasts:i.toasts.map(S=>S.id===n.toast.id?{...S,...n.toast}:S)};case 2:let{toast:d}=n;return yS(i,{type:i.toasts.find(S=>S.id===d.id)?1:0,toast:d});case 3:let{toastId:p}=n;return{...i,toasts:i.toasts.map(S=>S.id===p||p===void 0?{...S,dismissed:!0,visible:!1}:S)};case 4:return n.toastId===void 0?{...i,toasts:[]}:{...i,toasts:i.toasts.filter(S=>S.id!==n.toastId)};case 5:return{...i,pausedAt:n.time};case 6:let _=n.time-(i.pausedAt||0);return{...i,pausedAt:void 0,toasts:i.toasts.map(S=>({...S,pauseDuration:S.pauseDuration+_}))}}},C_=[],jd={toasts:[],pausedAt:void 0},qd=i=>{jd=yS(jd,i),C_.forEach(n=>{n(jd)})},tP={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},rP=(i={})=>{let[n,d]=se.useState(jd),p=se.useRef(jd);se.useEffect(()=>(p.current!==jd&&d(jd),C_.push(d),()=>{let S=C_.indexOf(d);S>-1&&C_.splice(S,1)}),[]);let _=n.toasts.map(S=>{var y,l,C;return{...i,...i[S.type],...S,removeDelay:S.removeDelay||((y=i[S.type])==null?void 0:y.removeDelay)||(i==null?void 0:i.removeDelay),duration:S.duration||((l=i[S.type])==null?void 0:l.duration)||(i==null?void 0:i.duration)||tP[S.type],style:{...i.style,...(C=i[S.type])==null?void 0:C.style,...S.style}}});return{...n,toasts:_}},iP=(i,n="blank",d)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:n,ariaProps:{role:"status","aria-live":"polite"},message:i,pauseDuration:0,...d,id:(d==null?void 0:d.id)||JE()}),Nm=i=>(n,d)=>{let p=iP(n,i,d);return qd({type:2,toast:p}),p.id},us=(i,n)=>Nm("blank")(i,n);us.error=Nm("error");us.success=Nm("success");us.loading=Nm("loading");us.custom=Nm("custom");us.dismiss=i=>{qd({type:3,toastId:i})};us.remove=i=>qd({type:4,toastId:i});us.promise=(i,n,d)=>{let p=us.loading(n.loading,{...d,...d==null?void 0:d.loading});return typeof i=="function"&&(i=i()),i.then(_=>{let S=n.success?k_(n.success,_):void 0;return S?us.success(S,{id:p,...d,...d==null?void 0:d.success}):us.dismiss(p),_}).catch(_=>{let S=n.error?k_(n.error,_):void 0;S?us.error(S,{id:p,...d,...d==null?void 0:d.error}):us.dismiss(p)}),i};var nP=(i,n)=>{qd({type:1,toast:{id:i,height:n}})},aP=()=>{qd({type:5,time:Date.now()})},vm=new Map,sP=1e3,oP=(i,n=sP)=>{if(vm.has(i))return;let d=setTimeout(()=>{vm.delete(i),qd({type:4,toastId:i})},n);vm.set(i,d)},lP=i=>{let{toasts:n,pausedAt:d}=rP(i);se.useEffect(()=>{if(d)return;let S=Date.now(),y=n.map(l=>{if(l.duration===1/0)return;let C=(l.duration||0)+l.pauseDuration-(S-l.createdAt);if(C<0){l.visible&&us.dismiss(l.id);return}return setTimeout(()=>us.dismiss(l.id),C)});return()=>{y.forEach(l=>l&&clearTimeout(l))}},[n,d]);let p=se.useCallback(()=>{d&&qd({type:6,time:Date.now()})},[d]),_=se.useCallback((S,y)=>{let{reverseOrder:l=!1,gutter:C=8,defaultPosition:P}=y||{},k=n.filter(F=>(F.position||P)===(S.position||P)&&F.height),O=k.findIndex(F=>F.id===S.id),L=k.filter((F,G)=>G<O&&F.visible).length;return k.filter(F=>F.visible).slice(...l?[L+1]:[0,L]).reduce((F,G)=>F+(G.height||0)+C,0)},[n]);return se.useEffect(()=>{n.forEach(S=>{if(S.dismissed)oP(S.id,S.removeDelay);else{let y=vm.get(S.id);y&&(clearTimeout(y),vm.delete(S.id))}})},[n]),{toasts:n,handlers:{updateHeight:nP,startPause:aP,endPause:p,calculateOffset:_}}},uP=vc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,cP=vc`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,hP=vc`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,dP=Eh("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${uP} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${cP} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${i=>i.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${hP} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,fP=vc`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,pP=Eh("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${i=>i.secondary||"#e0e0e0"};
  border-right-color: ${i=>i.primary||"#616161"};
  animation: ${fP} 1s linear infinite;
`,mP=vc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,gP=vc`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,yP=Eh("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${mP} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${gP} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${i=>i.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,_P=Eh("div")`
  position: absolute;
`,vP=Eh("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,xP=vc`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,bP=Eh("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${xP} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,wP=({toast:i})=>{let{icon:n,type:d,iconTheme:p}=i;return n!==void 0?typeof n=="string"?se.createElement(bP,null,n):n:d==="blank"?null:se.createElement(vP,null,se.createElement(pP,{...p}),d!=="loading"&&se.createElement(_P,null,d==="error"?se.createElement(dP,{...p}):se.createElement(yP,{...p})))},SP=i=>`
0% {transform: translate3d(0,${i*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,TP=i=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${i*-150}%,-1px) scale(.6); opacity:0;}
`,MP="0%{opacity:0;} 100%{opacity:1;}",AP="0%{opacity:1;} 100%{opacity:0;}",CP=Eh("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,EP=Eh("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,PP=(i,n)=>{let d=i.includes("top")?1:-1,[p,_]=gS()?[MP,AP]:[SP(d),TP(d)];return{animation:n?`${vc(p)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${vc(_)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},RP=se.memo(({toast:i,position:n,style:d,children:p})=>{let _=i.height?PP(i.position||n||"top-center",i.visible):{opacity:0},S=se.createElement(wP,{toast:i}),y=se.createElement(EP,{...i.ariaProps},k_(i.message,i));return se.createElement(CP,{className:i.className,style:{..._,...d,...i.style}},typeof p=="function"?p({icon:S,message:y}):se.createElement(se.Fragment,null,S,y))});XE(se.createElement);var IP=({id:i,className:n,style:d,onHeightUpdate:p,children:_})=>{let S=se.useCallback(y=>{if(y){let l=()=>{let C=y.getBoundingClientRect().height;p(i,C)};l(),new MutationObserver(l).observe(y,{subtree:!0,childList:!0,characterData:!0})}},[i,p]);return se.createElement("div",{ref:S,className:n,style:d},_)},DP=(i,n)=>{let d=i.includes("top"),p=d?{top:0}:{bottom:0},_=i.includes("center")?{justifyContent:"center"}:i.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:gS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${n*(d?1:-1)}px)`,...p,..._}},zP=J_`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Mg=16,LP=({reverseOrder:i,position:n="top-center",toastOptions:d,gutter:p,children:_,containerStyle:S,containerClassName:y})=>{let{toasts:l,handlers:C}=lP(d);return se.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Mg,left:Mg,right:Mg,bottom:Mg,pointerEvents:"none",...S},className:y,onMouseEnter:C.startPause,onMouseLeave:C.endPause},l.map(P=>{let k=P.position||n,O=C.calculateOffset(P,{reverseOrder:i,gutter:p,defaultPosition:n}),L=DP(k,O);return se.createElement(IP,{id:P.id,key:P.id,onHeightUpdate:C.updateHeight,className:P.visible?zP:"",style:L},P.type==="custom"?k_(P.message,P):_?_(P):se.createElement(RP,{toast:P,position:k}))}))},Cr=us;const _S=se.createContext(),kP={currentUser:null,error:"",loading:!1,isAuthenticated:!1,userInitialized:!1};function BP(i,n){switch(n.type){case"login":return{...i,isAuthenticated:!0,currentUser:n.payload,loading:!1,userInitialized:!0};case"error":return{...i,error:n.payload,loading:!1};case"loading":return{...i,loading:n.payload};case"logout":return{...i,currentUser:null,error:"",isAuthenticated:!1,userInitialized:!0};case"resetError":return{...i,error:""};case"initialize":return{...i,userInitialized:!0};default:return new Error(`Error at ${n.type}`)}}function OP({children:i}){const[{currentUser:n,error:d,loading:p,isAuthenticated:_,userInitialized:S},y]=se.useReducer(BP,kP);se.useEffect(()=>{async function W(){if(!S){y({type:"loading",payload:!0});try{await C()}catch{y({type:"logout"})}finally{y({type:"initialize"}),y({type:"loading",payload:!1})}}}W()},[S]);async function l(W,pe){try{y({type:"loading",payload:!0}),y({type:"resetError"}),await ei({method:"POST",url:"/api/v1/users/login",data:{email:W,password:pe},withCredentials:!0}),await C()}catch(me){Cr.error(me.response.data.message),console.error(me),y({type:"error",payload:me.response.data.message}),y({type:"logout"})}finally{y({type:"loading",payload:!1})}}async function C(){try{y({type:"loading",payload:!0}),y({type:"resetError"});const W=await ei("/api/v1/users/me",{withCredentials:!0}),pe={id:W.data.data.doc._id,name:W.data.data.doc.name,email:W.data.data.doc.email,photo:W.data.data.doc.photo,role:W.data.data.doc.role};y({type:"login",payload:pe}),localStorage.setItem("currentUser",JSON.stringify(pe))}catch(W){console.error(W)}finally{y({type:"loading",payload:!1})}}async function P(W){try{y({type:"loading",payload:!0}),y({type:"resetError"}),await ei.post("/api/v1/users/signup",W,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),Cr.success("Signup successful!"),await C()}catch(pe){Cr.error(pe.response.data.message),y({type:"error",payload:d.response.data.message})}finally{y({type:"loading",payload:!1})}}async function k(){try{y({type:"loading",payload:!0}),y({type:"resetError"}),await ei("/api/v1/users/logout"),y({type:"logout"}),localStorage.removeItem("currentUser"),Cr.success("Logged Out")}catch(W){y({type:"error",payload:W.response.data.message})}finally{y({type:"loading",payload:!1})}}async function O(W,pe,me){try{y({type:"loading",payload:!0}),y({type:"resetError"}),await ei({method:"PATCH",url:"/api/v1/users/update-password",data:{currentPassword:W,newPassword:pe,confirmPassword:me}}),Cr.success("Password Changed Successfully!"),await k()}catch(_e){y({type:"error",payload:_e.response.data.message}),Cr.error(_e.response.data.message)}finally{y({type:"loading",payload:!1})}}async function L(W){try{return y({type:"loading",payload:!0}),y({type:"resetError"}),await ei.post("/api/v1/users/forgot-password/send-otp",{email:W}),Cr.success("Verification code has been sent to your Email",{duration:4e3}),!0}catch(pe){return y({type:"error",payload:pe.response.data.message}),!1}finally{y({type:"loading",payload:!1})}}async function F(W,pe){try{y({type:"loading",payload:!0}),y({type:"resetError"});const me=await ei.post("/api/v1/users/forgot-password/verify-otp",{otp:W,email:pe});return Cr.success(me.data.message),!0}catch(me){return y({type:"error",payload:me.response.data.message}),!1}finally{y({type:"loading",payload:!1})}}async function G(W,pe,me){try{y({type:"loading",payload:!0}),y({type:"resetError"});const _e=await ei.patch("/api/v1/users/reset-password",{email:W,newPassword:pe,confirmPassword:me});return Cr.success(_e.data.message),!0}catch(_e){y({type:"error",payload:_e.response.data.message})}finally{y({type:"loading",payload:!1})}}async function ee(W){var pe,me;try{y({type:"loading",payload:!0}),y({type:"resetError"}),await ei({method:"PATCH",url:"/api/v1/users/update-me",data:W,headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),Cr.success("Profile updated successfully!"),await C()}catch(_e){Cr.error(((me=(pe=_e.response)==null?void 0:pe.data)==null?void 0:me.message)||"Failed to update profile"),y({type:"error",payload:_e.response.data.message})}finally{y({type:"loading",payload:!1})}}function X(){y({type:"resetError"})}return q.jsx(_S.Provider,{value:{login:l,signup:P,changePassword:O,changeProfile:ee,sendOtp:L,verifyOtp:F,loadUser:C,resetPassword:G,resetError:X,error:d,loading:p,user:n,logout:k,isAuthenticated:_,userInitialized:S},children:i})}function ps(){const i=se.useContext(_S);if(i===void 0)throw new Error("Auth context is used outside of the children");return i}function da({color:i="white",className:n}){return i==="white"?q.jsx("span",{className:"loader"}):q.jsx("span",{className:`loaderGreen ${n}`})}var Ag={exports:{}},Cg={exports:{}},Eg={exports:{}},Hx;function Dt(){return Hx||(Hx=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=p;function d(_){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},d(_)}function p(_){var S=typeof _=="string"||_ instanceof String;if(!S){var y=d(_);throw _===null?y="null":y==="object"&&(y=_.constructor.name),new TypeError("Expected a string but received a ".concat(y))}}i.exports=n.default,i.exports.default=n.default}(Eg,Eg.exports)),Eg.exports}var Wx;function Dv(){return Wx||(Wx=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var d=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S){return(0,d.default)(S),S=Date.parse(S),isNaN(S)?null:new Date(S)}i.exports=n.default,i.exports.default=n.default}(Cg,Cg.exports)),Cg.exports}var Pg={exports:{}},Bf={},Rg={exports:{}},Kx;function vS(){return Kx||(Kx=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=d;function d(p){return p==null}i.exports=n.default,i.exports.default=n.default}(Rg,Rg.exports)),Rg.exports}var Bn={},Yx;function Fm(){if(Yx)return Bn;Yx=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.farsiLocales=Bn.englishLocales=Bn.dotDecimal=Bn.decimal=Bn.commaDecimal=Bn.bengaliLocales=Bn.arabicLocales=Bn.alphanumeric=Bn.alpha=void 0;for(var i=Bn.alpha={"en-US":/^[A-Z]+$/i,"az-AZ":/^[A-VXYZ]+$/i,"bg-BG":/^[-]+$/i,"cs-CZ":/^[A-Z]+$/i,"da-DK":/^[A-Z]+$/i,"de-DE":/^[A-Z]+$/i,"el-GR":/^[-]+$/i,"es-ES":/^[A-Z]+$/i,"fa-IR":/^[]+$/i,"fi-FI":/^[A-Z]+$/i,"fr-FR":/^[A-Z]+$/i,"it-IT":/^[A-Z]+$/i,"ja-JP":/^[----]+$/i,"nb-NO":/^[A-Z]+$/i,"nl-NL":/^[A-Z]+$/i,"nn-NO":/^[A-Z]+$/i,"hu-HU":/^[A-Z]+$/i,"pl-PL":/^[A-Z]+$/i,"pt-PT":/^[A-Z]+$/i,"ru-RU":/^[-]+$/i,"kk-KZ":/^[-\u04D8\u04B0\u0406\u04A2\u0492\u04AE\u049A\u04E8\u04BA]+$/i,"sl-SI":/^[A-Z]+$/i,"sk-SK":/^[A-Z]+$/i,"sr-RS@latin":/^[A-Z]+$/i,"sr-RS":/^[-]+$/i,"sv-SE":/^[A-Z]+$/i,"th-TH":/^[-\s]+$/i,"tr-TR":/^[A-Z]+$/i,"uk-UA":/^[-I]+$/i,"vi-VN":/^[A-Z]+$/i,"ko-KR":/^[---]*$/,"ku-IQ":/^[]+$/i,ar:/^[]+$/,he:/^[-]+$/,fa:/^['']+$/i,bn:/^['']+$/,eo:/^[ABCD-GHIJK-PRSTUVZ]+$/i,"hi-IN":/^[\u0900-\u0961]+[\u0972-\u097F]*$/i,"si-LK":/^[\u0D80-\u0DFF]+$/},n=Bn.alphanumeric={"en-US":/^[0-9A-Z]+$/i,"az-AZ":/^[0-9A-VXYZ]+$/i,"bg-BG":/^[0-9-]+$/i,"cs-CZ":/^[0-9A-Z]+$/i,"da-DK":/^[0-9A-Z]+$/i,"de-DE":/^[0-9A-Z]+$/i,"el-GR":/^[0-9-]+$/i,"es-ES":/^[0-9A-Z]+$/i,"fi-FI":/^[0-9A-Z]+$/i,"fr-FR":/^[0-9A-Z]+$/i,"it-IT":/^[0-9A-Z]+$/i,"ja-JP":/^[0-9-----]+$/i,"hu-HU":/^[0-9A-Z]+$/i,"nb-NO":/^[0-9A-Z]+$/i,"nl-NL":/^[0-9A-Z]+$/i,"nn-NO":/^[0-9A-Z]+$/i,"pl-PL":/^[0-9A-Z]+$/i,"pt-PT":/^[0-9A-Z]+$/i,"ru-RU":/^[0-9-]+$/i,"kk-KZ":/^[0-9-\u04D8\u04B0\u0406\u04A2\u0492\u04AE\u049A\u04E8\u04BA]+$/i,"sl-SI":/^[0-9A-Z]+$/i,"sk-SK":/^[0-9A-Z]+$/i,"sr-RS@latin":/^[0-9A-Z]+$/i,"sr-RS":/^[0-9-]+$/i,"sv-SE":/^[0-9A-Z]+$/i,"th-TH":/^[-\s]+$/i,"tr-TR":/^[0-9A-Z]+$/i,"uk-UA":/^[0-9-I]+$/i,"ko-KR":/^[0-9---]*$/,"ku-IQ":/^[0-9]+$/i,"vi-VN":/^[0-9A-Z]+$/i,ar:/^[0-9]+$/,he:/^[0-9-]+$/,fa:/^['0-9']+$/i,bn:/^['']+$/,eo:/^[0-9ABCD-GHIJK-PRSTUVZ]+$/i,"hi-IN":/^[\u0900-\u0963]+[\u0966-\u097F]*$/i,"si-LK":/^[0-9\u0D80-\u0DFF]+$/},d=Bn.decimal={"en-US":".",ar:""},p=Bn.englishLocales=["AU","GB","HK","IN","NZ","ZA","ZM"],_,S=0;S<p.length;S++)_="en-".concat(p[S]),i[_]=i["en-US"],n[_]=n["en-US"],d[_]=d["en-US"];for(var y=Bn.arabicLocales=["AE","BH","DZ","EG","IQ","JO","KW","LB","LY","MA","QM","QA","SA","SD","SY","TN","YE"],l,C=0;C<y.length;C++)l="ar-".concat(y[C]),i[l]=i.ar,n[l]=n.ar,d[l]=d.ar;for(var P=Bn.farsiLocales=["IR","AF"],k,O=0;O<P.length;O++)k="fa-".concat(P[O]),n[k]=n.fa,d[k]=d.ar;for(var L=Bn.bengaliLocales=["BD","IN"],F,G=0;G<L.length;G++)F="bn-".concat(L[G]),i[F]=i.bn,n[F]=n.bn,d[F]=d["en-US"];for(var ee=Bn.dotDecimal=["ar-EG","ar-LB","ar-LY"],X=Bn.commaDecimal=["bg-BG","cs-CZ","da-DK","de-DE","el-GR","en-ZM","eo","es-ES","fr-CA","fr-FR","id-ID","it-IT","ku-IQ","hi-IN","hu-HU","nb-NO","nn-NO","nl-NL","pl-PL","pt-PT","ru-RU","kk-KZ","si-LK","sl-SI","sr-RS@latin","sr-RS","sv-SE","tr-TR","uk-UA","vi-VN"],W=0;W<ee.length;W++)d[ee[W]]=d["en-US"];for(var pe=0;pe<X.length;pe++)d[X[pe]]=",";return i["fr-CA"]=i["fr-FR"],n["fr-CA"]=n["fr-FR"],i["pt-BR"]=i["pt-PT"],n["pt-BR"]=n["pt-PT"],d["pt-BR"]=d["pt-PT"],i["pl-Pl"]=i["pl-PL"],n["pl-Pl"]=n["pl-PL"],d["pl-Pl"]=d["pl-PL"],i["fa-AF"]=i.fa,Bn}var Xx;function xS(){if(Xx)return Bf;Xx=1,Object.defineProperty(Bf,"__esModule",{value:!0}),Bf.default=_,Bf.locales=void 0;var i=p(Dt()),n=p(vS()),d=Fm();function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){(0,i.default)(S),y=y||{};var l=new RegExp("^(?:[-+])?(?:[0-9]+)?(?:\\".concat(y.locale?d.decimal[y.locale]:".","[0-9]*)?(?:[eE][\\+\\-]?(?:[0-9]+))?$"));if(S===""||S==="."||S===","||S==="-"||S==="+")return!1;var C=parseFloat(S.replace(",","."));return l.test(S)&&(!y.hasOwnProperty("min")||(0,n.default)(y.min)||C>=y.min)&&(!y.hasOwnProperty("max")||(0,n.default)(y.max)||C<=y.max)&&(!y.hasOwnProperty("lt")||(0,n.default)(y.lt)||C<y.lt)&&(!y.hasOwnProperty("gt")||(0,n.default)(y.gt)||C>y.gt)}return Bf.locales=Object.keys(d.decimal),Bf}var Qx;function bS(){return Qx||(Qx=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var d=p(xS());function p(S){return S&&S.__esModule?S:{default:S}}function _(S){return(0,d.default)(S)?parseFloat(S):NaN}i.exports=n.default,i.exports.default=n.default}(Pg,Pg.exports)),Pg.exports}var Ig={exports:{}},Jx;function jP(){return Jx||(Jx=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var d=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){return(0,d.default)(S),parseInt(S,y||10)}i.exports=n.default,i.exports.default=n.default}(Ig,Ig.exports)),Ig.exports}var Dg={exports:{}},e1;function NP(){return e1||(e1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var d=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){return(0,d.default)(S),y?S==="1"||/^true$/i.test(S):S!=="0"&&!/^false$/i.test(S)&&S!==""}i.exports=n.default,i.exports.default=n.default}(Dg,Dg.exports)),Dg.exports}var zg={exports:{}},t1;function FP(){return t1||(t1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var d=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){return(0,d.default)(S),S===y}i.exports=n.default,i.exports.default=n.default}(zg,zg.exports)),zg.exports}var Lg={exports:{}},kg={exports:{}},r1;function wS(){return r1||(r1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=p;function d(_){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},d(_)}function p(_){return d(_)==="object"&&_!==null?typeof _.toString=="function"?_=_.toString():_="[object Object]":(_===null||typeof _>"u"||isNaN(_)&&!_.length)&&(_=""),String(_)}i.exports=n.default,i.exports.default=n.default}(kg,kg.exports)),kg.exports}var Bg={exports:{}},i1;function ms(){return i1||(i1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=d;function d(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0;for(var S in _)typeof p[S]>"u"&&(p[S]=_[S]);return p}i.exports=n.default,i.exports.default=n.default}(Bg,Bg.exports)),Bg.exports}var n1;function UP(){return n1||(n1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var d=S(Dt()),p=S(wS()),_=S(ms());function S(C){return C&&C.__esModule?C:{default:C}}var y={ignoreCase:!1,minOccurrences:1};function l(C,P,k){return(0,d.default)(C),k=(0,_.default)(k,y),k.ignoreCase?C.toLowerCase().split((0,p.default)(P).toLowerCase()).length>k.minOccurrences:C.split((0,p.default)(P)).length>k.minOccurrences}i.exports=n.default,i.exports.default=n.default}(Lg,Lg.exports)),Lg.exports}var Og={exports:{}},a1;function VP(){return a1||(a1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var d=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y,l){return(0,d.default)(S),Object.prototype.toString.call(y)!=="[object RegExp]"&&(y=new RegExp(y,l)),!!S.match(y)}i.exports=n.default,i.exports.default=n.default}(Og,Og.exports)),Og.exports}var jg={exports:{}},Ng={exports:{}},s1;function SS(){return s1||(s1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=p;function d(_){return Object.prototype.toString.call(_)==="[object RegExp]"}function p(_,S){for(var y=0;y<S.length;y++){var l=S[y];if(_===l||d(l)&&l.test(_))return!0}return!1}i.exports=n.default,i.exports.default=n.default}(Ng,Ng.exports)),Ng.exports}var Fg={exports:{}},o1;function TS(){return o1||(o1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}function _(y){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},_(y)}function S(y,l){(0,d.default)(y);var C,P;_(l)==="object"?(C=l.min||0,P=l.max):(C=arguments[1],P=arguments[2]);var k=encodeURI(y).split(/%..|./).length-1;return k>=C&&(typeof P>"u"||k<=P)}i.exports=n.default,i.exports.default=n.default}(Fg,Fg.exports)),Fg.exports}var Ug={exports:{}},l1;function zv(){return l1||(l1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=y;var d=_(Dt()),p=_(ms());function _(l){return l&&l.__esModule?l:{default:l}}var S={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function y(l,C){(0,d.default)(l),C=(0,p.default)(C,S),C.allow_trailing_dot&&l[l.length-1]==="."&&(l=l.substring(0,l.length-1)),C.allow_wildcard===!0&&l.indexOf("*.")===0&&(l=l.substring(2));var P=l.split("."),k=P[P.length-1];return C.require_tld&&(P.length<2||!C.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(k)||/\s/.test(k))||!C.allow_numeric_tld&&/^\d+$/.test(k)?!1:P.every(function(O){return!(O.length>63&&!C.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(O)||/[\uff01-\uff5e]/.test(O)||/^-|-$/.test(O)||!C.allow_underscores&&/_/.test(O))})}i.exports=n.default,i.exports.default=n.default}(Ug,Ug.exports)),Ug.exports}var Vg={exports:{}},u1;function e0(){return u1||(u1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=P;var d=p(Dt());function p(k){return k&&k.__esModule?k:{default:k}}var _="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",S="(".concat(_,"[.]){3}").concat(_),y=new RegExp("^".concat(S,"$")),l="(?:[0-9a-fA-F]{1,4})",C=new RegExp("^("+"(?:".concat(l,":){7}(?:").concat(l,"|:)|")+"(?:".concat(l,":){6}(?:").concat(S,"|:").concat(l,"|:)|")+"(?:".concat(l,":){5}(?::").concat(S,"|(:").concat(l,"){1,2}|:)|")+"(?:".concat(l,":){4}(?:(:").concat(l,"){0,1}:").concat(S,"|(:").concat(l,"){1,3}|:)|")+"(?:".concat(l,":){3}(?:(:").concat(l,"){0,2}:").concat(S,"|(:").concat(l,"){1,4}|:)|")+"(?:".concat(l,":){2}(?:(:").concat(l,"){0,3}:").concat(S,"|(:").concat(l,"){1,5}|:)|")+"(?:".concat(l,":){1}(?:(:").concat(l,"){0,4}:").concat(S,"|(:").concat(l,"){1,6}|:)|")+"(?::((?::".concat(l,"){0,5}:").concat(S,"|(?::").concat(l,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function P(k){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(0,d.default)(k),O=String(O),O?O==="4"?y.test(k):O==="6"?C.test(k):!1:P(k,4)||P(k,6)}i.exports=n.default,i.exports.default=n.default}(Vg,Vg.exports)),Vg.exports}var c1;function MS(){return c1||(c1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=pe;var d=C(Dt()),p=C(SS()),_=C(TS()),S=C(zv()),y=C(e0()),l=C(ms());function C(me){return me&&me.__esModule?me:{default:me}}var P={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},k=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,O=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,L=/^[a-z\d]+$/,F=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,G=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,ee=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,X=254;function W(me){var _e=me.replace(/^"(.+)"$/,"$1");if(!_e.trim())return!1;var Se=/[\.";<>]/.test(_e);if(Se){if(_e===me)return!1;var ke=_e.split('"').length===_e.split('\\"').length;if(!ke)return!1}return!0}function pe(me,_e){if((0,d.default)(me),_e=(0,l.default)(_e,P),_e.require_display_name||_e.allow_display_name){var Se=me.match(k);if(Se){var ke=Se[1];if(me=me.replace(ke,"").replace(/(^<|>$)/g,""),ke.endsWith(" ")&&(ke=ke.slice(0,-1)),!W(ke))return!1}else if(_e.require_display_name)return!1}if(!_e.ignore_max_length&&me.length>X)return!1;var nt=me.split("@"),Ke=nt.pop(),Ye=Ke.toLowerCase();if(_e.host_blacklist.length>0&&(0,p.default)(Ye,_e.host_blacklist)||_e.host_whitelist.length>0&&!(0,p.default)(Ye,_e.host_whitelist))return!1;var ht=nt.join("@");if(_e.domain_specific_validation&&(Ye==="gmail.com"||Ye==="googlemail.com")){ht=ht.toLowerCase();var kt=ht.split("+")[0];if(!(0,_.default)(kt.replace(/\./g,""),{min:6,max:30}))return!1;for(var sr=kt.split("."),ir=0;ir<sr.length;ir++)if(!L.test(sr[ir]))return!1}if(_e.ignore_max_length===!1&&(!(0,_.default)(ht,{max:64})||!(0,_.default)(Ke,{max:254})))return!1;if(!(0,S.default)(Ke,{require_tld:_e.require_tld,ignore_max_length:_e.ignore_max_length,allow_underscores:_e.allow_underscores})){if(!_e.allow_ip_domain)return!1;if(!(0,y.default)(Ke)){if(!Ke.startsWith("[")||!Ke.endsWith("]"))return!1;var Xt=Ke.slice(1,-1);if(Xt.length===0||!(0,y.default)(Xt))return!1}}if(_e.blacklisted_chars&&ht.search(new RegExp("[".concat(_e.blacklisted_chars,"]+"),"g"))!==-1)return!1;if(ht[0]==='"'&&ht[ht.length-1]==='"')return ht=ht.slice(1,ht.length-1),_e.allow_utf8_local_part?ee.test(ht):F.test(ht);for(var or=_e.allow_utf8_local_part?G:O,Ct=ht.split("."),Nt=0;Nt<Ct.length;Nt++)if(!or.test(Ct[Nt]))return!1;return!0}i.exports=n.default,i.exports.default=n.default}(jg,jg.exports)),jg.exports}var $g={exports:{}},h1;function $P(){return h1||(h1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=X;var d=l(Dt()),p=l(SS()),_=l(zv()),S=l(e0()),y=l(ms());function l(W){return W&&W.__esModule?W:{default:W}}function C(W,pe){return F(W)||L(W,pe)||k(W,pe)||P()}function P(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k(W,pe){if(W){if(typeof W=="string")return O(W,pe);var me={}.toString.call(W).slice(8,-1);return me==="Object"&&W.constructor&&(me=W.constructor.name),me==="Map"||me==="Set"?Array.from(W):me==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(me)?O(W,pe):void 0}}function O(W,pe){(pe==null||pe>W.length)&&(pe=W.length);for(var me=0,_e=Array(pe);me<pe;me++)_e[me]=W[me];return _e}function L(W,pe){var me=W==null?null:typeof Symbol<"u"&&W[Symbol.iterator]||W["@@iterator"];if(me!=null){var _e,Se,ke,nt,Ke=[],Ye=!0,ht=!1;try{if(ke=(me=me.call(W)).next,pe!==0)for(;!(Ye=(_e=ke.call(me)).done)&&(Ke.push(_e.value),Ke.length!==pe);Ye=!0);}catch(kt){ht=!0,Se=kt}finally{try{if(!Ye&&me.return!=null&&(nt=me.return(),Object(nt)!==nt))return}finally{if(ht)throw Se}}return Ke}}function F(W){if(Array.isArray(W))return W}var G={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0,max_allowed_length:2084},ee=/^\[([^\]]+)\](?::([0-9]+))?$/;function X(W,pe){if((0,d.default)(W),!W||/[\s<>]/.test(W)||W.indexOf("mailto:")===0||(pe=(0,y.default)(pe,G),pe.validate_length&&W.length>pe.max_allowed_length)||!pe.allow_fragments&&W.includes("#")||!pe.allow_query_components&&(W.includes("?")||W.includes("&")))return!1;var me,_e,Se,ke,nt,Ke,Ye,ht;if(Ye=W.split("#"),W=Ye.shift(),Ye=W.split("?"),W=Ye.shift(),Ye=W.split("://"),Ye.length>1){if(me=Ye.shift().toLowerCase(),pe.require_valid_protocol&&pe.protocols.indexOf(me)===-1)return!1}else{if(pe.require_protocol)return!1;if(W.slice(0,2)==="//"){if(!pe.allow_protocol_relative_urls)return!1;Ye[0]=W.slice(2)}}if(W=Ye.join("://"),W==="")return!1;if(Ye=W.split("/"),W=Ye.shift(),W===""&&!pe.require_host)return!0;if(Ye=W.split("@"),Ye.length>1){if(pe.disallow_auth||Ye[0]===""||(_e=Ye.shift(),_e.indexOf(":")>=0&&_e.split(":").length>2))return!1;var kt=_e.split(":"),sr=C(kt,2),ir=sr[0],Xt=sr[1];if(ir===""&&Xt==="")return!1}ke=Ye.join("@"),Ke=null,ht=null;var or=ke.match(ee);if(or?(Se="",ht=or[1],Ke=or[2]||null):(Ye=ke.split(":"),Se=Ye.shift(),Ye.length&&(Ke=Ye.join(":"))),Ke!==null&&Ke.length>0){if(nt=parseInt(Ke,10),!/^[0-9]+$/.test(Ke)||nt<=0||nt>65535)return!1}else if(pe.require_port)return!1;return pe.host_whitelist?(0,p.default)(Se,pe.host_whitelist):Se===""&&!pe.require_host?!0:!(!(0,S.default)(Se)&&!(0,_.default)(Se,pe)&&(!ht||!(0,S.default)(ht,6))||(Se=Se||ht,pe.host_blacklist&&(0,p.default)(Se,pe.host_blacklist)))}i.exports=n.default,i.exports.default=n.default}($g,$g.exports)),$g.exports}var Zg={exports:{}},d1;function ZP(){return d1||(d1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=k;var d=p(Dt());function p(O){return O&&O.__esModule?O:{default:O}}var _=/^(?:[0-9a-fA-F]{2}([-:\s]))([0-9a-fA-F]{2}\1){4}([0-9a-fA-F]{2})$/,S=/^([0-9a-fA-F]){12}$/,y=/^([0-9a-fA-F]{4}\.){2}([0-9a-fA-F]{4})$/,l=/^(?:[0-9a-fA-F]{2}([-:\s]))([0-9a-fA-F]{2}\1){6}([0-9a-fA-F]{2})$/,C=/^([0-9a-fA-F]){16}$/,P=/^([0-9a-fA-F]{4}\.){3}([0-9a-fA-F]{4})$/;function k(O,L){return(0,d.default)(O),L!=null&&L.eui&&(L.eui=String(L.eui)),L!=null&&L.no_colons||L!=null&&L.no_separators?L.eui==="48"?S.test(O):L.eui==="64"?C.test(O):S.test(O)||C.test(O):(L==null?void 0:L.eui)==="48"?_.test(O)||y.test(O):(L==null?void 0:L.eui)==="64"?l.test(O)||P.test(O):k(O,{eui:"48"})||k(O,{eui:"64"})}i.exports=n.default,i.exports.default=n.default}(Zg,Zg.exports)),Zg.exports}var qg={exports:{}},f1;function qP(){return f1||(f1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=C;var d=_(Dt()),p=_(e0());function _(P){return P&&P.__esModule?P:{default:P}}var S=/^\d{1,3}$/,y=32,l=128;function C(P){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";(0,d.default)(P);var O=P.split("/");if(O.length!==2||!S.test(O[1])||O[1].length>1&&O[1].startsWith("0"))return!1;var L=(0,p.default)(O[0],k);if(!L)return!1;var F=null;switch(String(k)){case"4":F=y;break;case"6":F=l;break;default:F=(0,p.default)(O[0],"6")?l:y}return O[1]<=F&&O[1]>=0}i.exports=n.default,i.exports.default=n.default}(qg,qg.exports)),qg.exports}var Gg={exports:{}},p1;function AS(){return p1||(p1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=G;var d=p(ms());function p(ee){return ee&&ee.__esModule?ee:{default:ee}}function _(ee,X){return l(ee)||y(ee,X)||P(ee,X)||S()}function S(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(ee,X){var W=ee==null?null:typeof Symbol<"u"&&ee[Symbol.iterator]||ee["@@iterator"];if(W!=null){var pe,me,_e,Se,ke=[],nt=!0,Ke=!1;try{if(_e=(W=W.call(ee)).next,X!==0)for(;!(nt=(pe=_e.call(W)).done)&&(ke.push(pe.value),ke.length!==X);nt=!0);}catch(Ye){Ke=!0,me=Ye}finally{try{if(!nt&&W.return!=null&&(Se=W.return(),Object(Se)!==Se))return}finally{if(Ke)throw me}}return ke}}function l(ee){if(Array.isArray(ee))return ee}function C(ee,X){var W=typeof Symbol<"u"&&ee[Symbol.iterator]||ee["@@iterator"];if(!W){if(Array.isArray(ee)||(W=P(ee))||X){W&&(ee=W);var pe=0,me=function(){};return{s:me,n:function(){return pe>=ee.length?{done:!0}:{done:!1,value:ee[pe++]}},e:function(Ke){throw Ke},f:me}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _e,Se=!0,ke=!1;return{s:function(){W=W.call(ee)},n:function(){var Ke=W.next();return Se=Ke.done,Ke},e:function(Ke){ke=!0,_e=Ke},f:function(){try{Se||W.return==null||W.return()}finally{if(ke)throw _e}}}}function P(ee,X){if(ee){if(typeof ee=="string")return k(ee,X);var W={}.toString.call(ee).slice(8,-1);return W==="Object"&&ee.constructor&&(W=ee.constructor.name),W==="Map"||W==="Set"?Array.from(ee):W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W)?k(ee,X):void 0}}function k(ee,X){(X==null||X>ee.length)&&(X=ee.length);for(var W=0,pe=Array(X);W<X;W++)pe[W]=ee[W];return pe}var O={format:"YYYY/MM/DD",delimiters:["/","-"],strictMode:!1};function L(ee){return/(^(y{4}|y{2})[.\/-](m{1,2})[.\/-](d{1,2})$)|(^(m{1,2})[.\/-](d{1,2})[.\/-]((y{4}|y{2})$))|(^(d{1,2})[.\/-](m{1,2})[.\/-]((y{4}|y{2})$))/gi.test(ee)}function F(ee,X){for(var W=[],pe=Math.max(ee.length,X.length),me=0;me<pe;me++)W.push([ee[me],X[me]]);return W}function G(ee,X){if(typeof X=="string"?X=(0,d.default)({format:X},O):X=(0,d.default)(X,O),typeof ee=="string"&&L(X.format)){if(X.strictMode&&ee.length!==X.format.length)return!1;var W=X.delimiters.find(function(or){return X.format.indexOf(or)!==-1}),pe=X.strictMode?W:X.delimiters.find(function(or){return ee.indexOf(or)!==-1}),me=F(ee.split(pe),X.format.toLowerCase().split(W)),_e={},Se=C(me),ke;try{for(Se.s();!(ke=Se.n()).done;){var nt=_(ke.value,2),Ke=nt[0],Ye=nt[1];if(!Ke||!Ye||Ke.length!==Ye.length)return!1;_e[Ye.charAt(0)]=Ke}}catch(or){Se.e(or)}finally{Se.f()}var ht=_e.y;if(ht.startsWith("-"))return!1;if(_e.y.length===2){var kt=parseInt(_e.y,10);if(isNaN(kt))return!1;var sr=new Date().getFullYear()%100;kt<sr?ht="20".concat(_e.y):ht="19".concat(_e.y)}var ir=_e.m;_e.m.length===1&&(ir="0".concat(_e.m));var Xt=_e.d;return _e.d.length===1&&(Xt="0".concat(_e.d)),new Date("".concat(ht,"-").concat(ir,"-").concat(Xt,"T00:00:00.000Z")).getUTCDate()===+_e.d}return X.strictMode?!1:Object.prototype.toString.call(ee)==="[object Date]"&&isFinite(ee)}i.exports=n.default,i.exports.default=n.default}(Gg,Gg.exports)),Gg.exports}var Hg={exports:{}},m1;function GP(){return m1||(m1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=y;var d=p(ms());function p(l){return l&&l.__esModule?l:{default:l}}var _={hourFormat:"hour24",mode:"default"},S={hour24:{default:/^([01]?[0-9]|2[0-3]):([0-5][0-9])$/,withSeconds:/^([01]?[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/},hour12:{default:/^(0?[1-9]|1[0-2]):([0-5][0-9]) (A|P)M$/,withSeconds:/^(0?[1-9]|1[0-2]):([0-5][0-9]):([0-5][0-9]) (A|P)M$/}};function y(l,C){return C=(0,d.default)(C,_),typeof l!="string"?!1:S[C.hourFormat][C.mode].test(l)}i.exports=n.default,i.exports.default=n.default}(Hg,Hg.exports)),Hg.exports}var Wg={exports:{}},g1;function HP(){return g1||(g1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var d=p(Dt());function p(C){return C&&C.__esModule?C:{default:C}}var _={loose:!1},S=["true","false","1","0"],y=[].concat(S,["yes","no"]);function l(C){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_;return(0,d.default)(C),P.loose?y.includes(C.toLowerCase()):S.includes(C)}i.exports=n.default,i.exports.default=n.default}(Wg,Wg.exports)),Wg.exports}var Kg={exports:{}},y1;function WP(){return y1||(y1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=pe;var d=p(Dt());function p(me){return me&&me.__esModule?me:{default:me}}var _="([A-Za-z]{3}(-[A-Za-z]{3}){0,2})",S="(([a-zA-Z]{2,3}(-".concat(_,")?)|([a-zA-Z]{5,8}))"),y="([A-Za-z]{4})",l="([A-Za-z]{2}|\\d{3})",C="([A-Za-z0-9]{5,8}|(\\d[A-Z-a-z0-9]{3}))",P="(\\d|[A-W]|[Y-Z]|[a-w]|[y-z])",k="(".concat(P,"(-[A-Za-z0-9]{2,8})+)"),O="(x(-[A-Za-z0-9]{1,8})+)",L="((en-GB-oed)|(i-ami)|(i-bnn)|(i-default)|(i-enochian)|(i-hak)|(i-klingon)|(i-lux)|(i-mingo)|(i-navajo)|(i-pwn)|(i-tao)|(i-tay)|(i-tsu)|(sgn-BE-FR)|(sgn-BE-NL)|(sgn-CH-DE))",F="((art-lojban)|(cel-gaulish)|(no-bok)|(no-nyn)|(zh-guoyu)|(zh-hakka)|(zh-min)|(zh-min-nan)|(zh-xiang))",G="(".concat(L,"|").concat(F,")"),ee="(-|_)",X="".concat(S,"(").concat(ee).concat(y,")?(").concat(ee).concat(l,")?(").concat(ee).concat(C,")*(").concat(ee).concat(k,")*(").concat(ee).concat(O,")?"),W=new RegExp("(^".concat(O,"$)|(^").concat(G,"$)|(^").concat(X,"$)"));function pe(me){return(0,d.default)(me),W.test(me)}i.exports=n.default,i.exports.default=n.default}(Kg,Kg.exports)),Kg.exports}var Yg={exports:{}},_1;function KP(){return _1||(_1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^(?!(1[3-9])|(20)|(3[3-9])|(4[0-9])|(5[0-9])|(60)|(7[3-9])|(8[1-9])|(9[0-2])|(9[3-9]))[0-9]{9}$/;function S(y){if((0,d.default)(y),!_.test(y))return!1;for(var l=0,C=0;C<y.length;C++)C%3===0?l+=y[C]*3:C%3===1?l+=y[C]*7:l+=y[C]*1;return l%10===0}i.exports=n.default,i.exports.default=n.default}(Yg,Yg.exports)),Yg.exports}var Of={},v1;function YP(){if(v1)return Of;v1=1,Object.defineProperty(Of,"__esModule",{value:!0}),Of.default=p,Of.locales=void 0;var i=d(Dt()),n=Fm();function d(_){return _&&_.__esModule?_:{default:_}}function p(_){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-US",y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,i.default)(_);var l=_,C=y.ignore;if(C)if(C instanceof RegExp)l=l.replace(C,"");else if(typeof C=="string")l=l.replace(new RegExp("[".concat(C.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),"]"),"g"),"");else throw new Error("ignore should be instance of a String or RegExp");if(S in n.alpha)return n.alpha[S].test(l);throw new Error("Invalid locale '".concat(S,"'"))}return Of.locales=Object.keys(n.alpha),Of}var jf={},x1;function XP(){if(x1)return jf;x1=1,Object.defineProperty(jf,"__esModule",{value:!0}),jf.default=p,jf.locales=void 0;var i=d(Dt()),n=Fm();function d(_){return _&&_.__esModule?_:{default:_}}function p(_){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-US",y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,i.default)(_);var l=_,C=y.ignore;if(C)if(C instanceof RegExp)l=l.replace(C,"");else if(typeof C=="string")l=l.replace(new RegExp("[".concat(C.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),"]"),"g"),"");else throw new Error("ignore should be instance of a String or RegExp");if(S in n.alphanumeric)return n.alphanumeric[S].test(l);throw new Error("Invalid locale '".concat(S,"'"))}return jf.locales=Object.keys(n.alphanumeric),jf}var Xg={exports:{}},b1;function QP(){return b1||(b1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=y;var d=_(Dt()),p=Fm();function _(l){return l&&l.__esModule?l:{default:l}}var S=/^[0-9]+$/;function y(l,C){return(0,d.default)(l),C&&C.no_symbols?S.test(l):new RegExp("^[+-]?([0-9]*[".concat((C||{}).locale?p.decimal[C.locale]:".","])?[0-9]+$")).test(l)}i.exports=n.default,i.exports.default=n.default}(Xg,Xg.exports)),Xg.exports}var Nf={},w1;function JP(){if(w1)return Nf;w1=1,Object.defineProperty(Nf,"__esModule",{value:!0}),Nf.default=p,Nf.locales=void 0;var i=n(Dt());function n(_){return _&&_.__esModule?_:{default:_}}var d={AM:/^[A-Z]{2}\d{7}$/,AR:/^[A-Z]{3}\d{6}$/,AT:/^[A-Z]\d{7}$/,AU:/^[A-Z]\d{7}$/,AZ:/^[A-Z]{1}\d{8}$/,BE:/^[A-Z]{2}\d{6}$/,BG:/^\d{9}$/,BR:/^[A-Z]{2}\d{6}$/,BY:/^[A-Z]{2}\d{7}$/,CA:/^[A-Z]{2}\d{6}$/,CH:/^[A-Z]\d{7}$/,CN:/^G\d{8}$|^E(?![IO])[A-Z0-9]\d{7}$/,CY:/^[A-Z](\d{6}|\d{8})$/,CZ:/^\d{8}$/,DE:/^[CFGHJKLMNPRTVWXYZ0-9]{9}$/,DK:/^\d{9}$/,DZ:/^\d{9}$/,EE:/^([A-Z]\d{7}|[A-Z]{2}\d{7})$/,ES:/^[A-Z0-9]{2}([A-Z0-9]?)\d{6}$/,FI:/^[A-Z]{2}\d{7}$/,FR:/^\d{2}[A-Z]{2}\d{5}$/,GB:/^\d{9}$/,GR:/^[A-Z]{2}\d{7}$/,HR:/^\d{9}$/,HU:/^[A-Z]{2}(\d{6}|\d{7})$/,IE:/^[A-Z0-9]{2}\d{7}$/,IN:/^[A-Z]{1}-?\d{7}$/,ID:/^[A-C]\d{7}$/,IR:/^[A-Z]\d{8}$/,IS:/^(A)\d{7}$/,IT:/^[A-Z0-9]{2}\d{7}$/,JM:/^[Aa]\d{7}$/,JP:/^[A-Z]{2}\d{7}$/,KR:/^[MS]\d{8}$/,KZ:/^[a-zA-Z]\d{7}$/,LI:/^[a-zA-Z]\d{5}$/,LT:/^[A-Z0-9]{8}$/,LU:/^[A-Z0-9]{8}$/,LV:/^[A-Z0-9]{2}\d{7}$/,LY:/^[A-Z0-9]{8}$/,MT:/^\d{7}$/,MZ:/^([A-Z]{2}\d{7})|(\d{2}[A-Z]{2}\d{5})$/,MY:/^[AHK]\d{8}$/,MX:/^\d{10,11}$/,NL:/^[A-Z]{2}[A-Z0-9]{6}\d$/,NZ:/^([Ll]([Aa]|[Dd]|[Ff]|[Hh])|[Ee]([Aa]|[Pp])|[Nn])\d{6}$/,PH:/^([A-Z](\d{6}|\d{7}[A-Z]))|([A-Z]{2}(\d{6}|\d{7}))$/,PK:/^[A-Z]{2}\d{7}$/,PL:/^[A-Z]{2}\d{7}$/,PT:/^[A-Z]\d{6}$/,RO:/^\d{8,9}$/,RU:/^\d{9}$/,SE:/^\d{8}$/,SL:/^(P)[A-Z]\d{7}$/,SK:/^[0-9A-Z]\d{7}$/,TH:/^[A-Z]{1,2}\d{6,7}$/,TR:/^[A-Z]\d{8}$/,UA:/^[A-Z]{2}\d{6}$/,US:/^\d{9}$/,ZA:/^[TAMD]\d{8}$/};Nf.locales=Object.keys(d);function p(_,S){(0,i.default)(_);var y=_.replace(/\s/g,"").toUpperCase();return S.toUpperCase()in d&&d[S].test(y)}return Nf}var Qg={exports:{}},Jg={exports:{}},S1;function Lv(){return S1||(S1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var d=_(Dt()),p=_(vS());function _(C){return C&&C.__esModule?C:{default:C}}var S=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,y=/^[-+]?[0-9]+$/;function l(C,P){(0,d.default)(C),P=P||{};var k=P.allow_leading_zeroes===!1?S:y,O=!P.hasOwnProperty("min")||(0,p.default)(P.min)||C>=P.min,L=!P.hasOwnProperty("max")||(0,p.default)(P.max)||C<=P.max,F=!P.hasOwnProperty("lt")||(0,p.default)(P.lt)||C<P.lt,G=!P.hasOwnProperty("gt")||(0,p.default)(P.gt)||C>P.gt;return k.test(C)&&O&&L&&F&&G}i.exports=n.default,i.exports.default=n.default}(Jg,Jg.exports)),Jg.exports}var T1;function eR(){return T1||(T1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var d=p(Lv());function p(S){return S&&S.__esModule?S:{default:S}}function _(S){return(0,d.default)(S,{allow_leading_zeroes:!1,min:0,max:65535})}i.exports=n.default,i.exports.default=n.default}(Qg,Qg.exports)),Qg.exports}var ey={exports:{}},M1;function tR(){return M1||(M1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var d=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S){return(0,d.default)(S),S===S.toLowerCase()}i.exports=n.default,i.exports.default=n.default}(ey,ey.exports)),ey.exports}var ty={exports:{}},A1;function rR(){return A1||(A1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var d=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S){return(0,d.default)(S),S===S.toUpperCase()}i.exports=n.default,i.exports.default=n.default}(ty,ty.exports)),ty.exports}var ry={exports:{}},C1;function iR(){return C1||(C1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=y;var d=p(Dt());function p(l){return l&&l.__esModule?l:{default:l}}var _=/^[0-9]{15}$/,S=/^\d{2}-\d{6}-\d{6}-\d{1}$/;function y(l,C){(0,d.default)(l),C=C||{};var P=_;if(C.allow_hyphens&&(P=S),!P.test(l))return!1;l=l.replace(/-/g,"");for(var k=0,O=2,L=14,F=0;F<L;F++){var G=l.substring(L-F-1,L-F),ee=parseInt(G,10)*O;ee>=10?k+=ee%10+1:k+=ee,O===1?O+=1:O-=1}var X=(10-k%10)%10;return X===parseInt(l.substring(14,15),10)}i.exports=n.default,i.exports.default=n.default}(ry,ry.exports)),ry.exports}var iy={exports:{}},E1;function nR(){return E1||(E1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^[\x00-\x7F]+$/;function S(y){return(0,d.default)(y),_.test(y)}i.exports=n.default,i.exports.default=n.default}(iy,iy.exports)),iy.exports}var Ff={},P1;function CS(){if(P1)return Ff;P1=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.default=p,Ff.fullWidth=void 0;var i=n(Dt());function n(_){return _&&_.__esModule?_:{default:_}}var d=Ff.fullWidth=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;function p(_){return(0,i.default)(_),d.test(_)}return Ff}var Uf={},R1;function ES(){if(R1)return Uf;R1=1,Object.defineProperty(Uf,"__esModule",{value:!0}),Uf.default=p,Uf.halfWidth=void 0;var i=n(Dt());function n(_){return _&&_.__esModule?_:{default:_}}var d=Uf.halfWidth=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;function p(_){return(0,i.default)(_),d.test(_)}return Uf}var ny={exports:{}},I1;function aR(){return I1||(I1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=y;var d=S(Dt()),p=CS(),_=ES();function S(l){return l&&l.__esModule?l:{default:l}}function y(l){return(0,d.default)(l),p.fullWidth.test(l)&&_.halfWidth.test(l)}i.exports=n.default,i.exports.default=n.default}(ny,ny.exports)),ny.exports}var ay={exports:{}},D1;function sR(){return D1||(D1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/[^\x00-\x7F]/;function S(y){return(0,d.default)(y),_.test(y)}i.exports=n.default,i.exports.default=n.default}(ay,ay.exports)),ay.exports}var sy={exports:{}},oy={exports:{}},z1;function oR(){return z1||(z1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=d;function d(p,_){var S=p.join("");return new RegExp(S,_)}i.exports=n.default,i.exports.default=n.default}(oy,oy.exports)),oy.exports}var L1;function lR(){return L1||(L1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=y;var d=_(Dt()),p=_(oR());function _(l){return l&&l.__esModule?l:{default:l}}var S=(0,p.default)(["^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)","(?:-((?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*))*))","?(?:\\+([0-9a-z-]+(?:\\.[0-9a-z-]+)*))?$"],"i");function y(l){return(0,d.default)(l),S.test(l)}i.exports=n.default,i.exports.default=n.default}(sy,sy.exports)),sy.exports}var ly={exports:{}},k1;function uR(){return k1||(k1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;function S(y){return(0,d.default)(y),_.test(y)}i.exports=n.default,i.exports.default=n.default}(ly,ly.exports)),ly.exports}var uy={exports:{}},cy={exports:{}},B1;function cR(){return B1||(B1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var d=function(_,S){return _.some(function(y){return S===y})};n.default=d,i.exports=n.default,i.exports.default=n.default}(cy,cy.exports)),cy.exports}var O1;function hR(){return O1||(O1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=k;var d=y(ms()),p=y(Dt()),_=y(cR()),S=Fm();function y(O){return O&&O.__esModule?O:{default:O}}function l(O){var L=new RegExp("^[-+]?([0-9]+)?(\\".concat(S.decimal[O.locale],"[0-9]{").concat(O.decimal_digits,"})").concat(O.force_decimal?"":"?","$"));return L}var C={force_decimal:!1,decimal_digits:"1,",locale:"en-US"},P=["","-","+"];function k(O,L){if((0,p.default)(O),L=(0,d.default)(L,C),L.locale in S.decimal)return!(0,_.default)(P,O.replace(/ /g,""))&&l(L).test(O);throw new Error("Invalid locale '".concat(L.locale,"'"))}i.exports=n.default,i.exports.default=n.default}(uy,uy.exports)),uy.exports}var hy={exports:{}},j1;function PS(){return j1||(j1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^(0x|0h)?[0-9A-F]+$/i;function S(y){return(0,d.default)(y),_.test(y)}i.exports=n.default,i.exports.default=n.default}(hy,hy.exports)),hy.exports}var dy={exports:{}},N1;function dR(){return N1||(N1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^(0o)?[0-7]+$/i;function S(y){return(0,d.default)(y),_.test(y)}i.exports=n.default,i.exports.default=n.default}(dy,dy.exports)),dy.exports}var fy={exports:{}},F1;function fR(){return F1||(F1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=_(Dt()),p=_(bS());function _(y){return y&&y.__esModule?y:{default:y}}function S(y,l){return(0,d.default)(y),(0,p.default)(y)%parseInt(l,10)===0}i.exports=n.default,i.exports.default=n.default}(fy,fy.exports)),fy.exports}var py={exports:{}},U1;function pR(){return U1||(U1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^#?([0-9A-F]{3}|[0-9A-F]{4}|[0-9A-F]{6}|[0-9A-F]{8})$/i;function S(y){return(0,d.default)(y),_.test(y)}i.exports=n.default,i.exports.default=n.default}(py,py.exports)),py.exports}var my={exports:{}},V1;function mR(){return V1||(V1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=k;var d=p(Dt());function p(O){return O&&O.__esModule?O:{default:O}}function _(O){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},_(O)}var S=/^rgb\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){2}([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\)$/,y=/^rgba\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){3}(0?\.\d|1(\.0)?|0(\.0)?)\)$/,l=/^rgb\((([0-9]%|[1-9][0-9]%|100%),){2}([0-9]%|[1-9][0-9]%|100%)\)$/,C=/^rgba\((([0-9]%|[1-9][0-9]%|100%),){3}(0?\.\d|1(\.0)?|0(\.0)?)\)$/,P=/^rgba?/;function k(O,L){(0,d.default)(O);var F=!1,G=!0;if(_(L)!=="object"?arguments.length>=2&&(G=arguments[1]):(F=L.allowSpaces!==void 0?L.allowSpaces:F,G=L.includePercentValues!==void 0?L.includePercentValues:G),F){if(!P.test(O))return!1;O=O.replace(/\s/g,"")}return G?S.test(O)||y.test(O)||l.test(O)||C.test(O):S.test(O)||y.test(O)}i.exports=n.default,i.exports.default=n.default}(my,my.exports)),my.exports}var gy={exports:{}},$1;function gR(){return $1||($1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=y;var d=p(Dt());function p(l){return l&&l.__esModule?l:{default:l}}var _=/^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(,(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}(,((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?))?\)$/i,S=/^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(\s(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}\s?(\/\s((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?)\s?)?\)$/i;function y(l){(0,d.default)(l);var C=l.replace(/\s+/g," ").replace(/\s?(hsla?\(|\)|,)\s?/ig,"$1");return C.indexOf(",")!==-1?_.test(C):S.test(C)}i.exports=n.default,i.exports.default=n.default}(gy,gy.exports)),gy.exports}var yy={exports:{}},Z1;function yR(){return Z1||(Z1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^[A-Z]{2}[0-9A-Z]{3}\d{2}\d{5}$/;function S(y){return(0,d.default)(y),_.test(y)}i.exports=n.default,i.exports.default=n.default}(yy,yy.exports)),yy.exports}var Vf={},q1;function _R(){if(q1)return Vf;q1=1,Object.defineProperty(Vf,"__esModule",{value:!0}),Vf.default=y,Vf.locales=void 0;var i=n(Dt());function n(l){return l&&l.__esModule?l:{default:l}}var d={AD:/^(AD[0-9]{2})\d{8}[A-Z0-9]{12}$/,AE:/^(AE[0-9]{2})\d{3}\d{16}$/,AL:/^(AL[0-9]{2})\d{8}[A-Z0-9]{16}$/,AT:/^(AT[0-9]{2})\d{16}$/,AZ:/^(AZ[0-9]{2})[A-Z0-9]{4}\d{20}$/,BA:/^(BA[0-9]{2})\d{16}$/,BE:/^(BE[0-9]{2})\d{12}$/,BG:/^(BG[0-9]{2})[A-Z]{4}\d{6}[A-Z0-9]{8}$/,BH:/^(BH[0-9]{2})[A-Z]{4}[A-Z0-9]{14}$/,BR:/^(BR[0-9]{2})\d{23}[A-Z]{1}[A-Z0-9]{1}$/,BY:/^(BY[0-9]{2})[A-Z0-9]{4}\d{20}$/,CH:/^(CH[0-9]{2})\d{5}[A-Z0-9]{12}$/,CR:/^(CR[0-9]{2})\d{18}$/,CY:/^(CY[0-9]{2})\d{8}[A-Z0-9]{16}$/,CZ:/^(CZ[0-9]{2})\d{20}$/,DE:/^(DE[0-9]{2})\d{18}$/,DK:/^(DK[0-9]{2})\d{14}$/,DO:/^(DO[0-9]{2})[A-Z]{4}\d{20}$/,DZ:/^(DZ\d{24})$/,EE:/^(EE[0-9]{2})\d{16}$/,EG:/^(EG[0-9]{2})\d{25}$/,ES:/^(ES[0-9]{2})\d{20}$/,FI:/^(FI[0-9]{2})\d{14}$/,FO:/^(FO[0-9]{2})\d{14}$/,FR:/^(FR[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,GB:/^(GB[0-9]{2})[A-Z]{4}\d{14}$/,GE:/^(GE[0-9]{2})[A-Z0-9]{2}\d{16}$/,GI:/^(GI[0-9]{2})[A-Z]{4}[A-Z0-9]{15}$/,GL:/^(GL[0-9]{2})\d{14}$/,GR:/^(GR[0-9]{2})\d{7}[A-Z0-9]{16}$/,GT:/^(GT[0-9]{2})[A-Z0-9]{4}[A-Z0-9]{20}$/,HR:/^(HR[0-9]{2})\d{17}$/,HU:/^(HU[0-9]{2})\d{24}$/,IE:/^(IE[0-9]{2})[A-Z]{4}\d{14}$/,IL:/^(IL[0-9]{2})\d{19}$/,IQ:/^(IQ[0-9]{2})[A-Z]{4}\d{15}$/,IR:/^(IR[0-9]{2})0\d{2}0\d{18}$/,IS:/^(IS[0-9]{2})\d{22}$/,IT:/^(IT[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,JO:/^(JO[0-9]{2})[A-Z]{4}\d{22}$/,KW:/^(KW[0-9]{2})[A-Z]{4}[A-Z0-9]{22}$/,KZ:/^(KZ[0-9]{2})\d{3}[A-Z0-9]{13}$/,LB:/^(LB[0-9]{2})\d{4}[A-Z0-9]{20}$/,LC:/^(LC[0-9]{2})[A-Z]{4}[A-Z0-9]{24}$/,LI:/^(LI[0-9]{2})\d{5}[A-Z0-9]{12}$/,LT:/^(LT[0-9]{2})\d{16}$/,LU:/^(LU[0-9]{2})\d{3}[A-Z0-9]{13}$/,LV:/^(LV[0-9]{2})[A-Z]{4}[A-Z0-9]{13}$/,MA:/^(MA[0-9]{26})$/,MC:/^(MC[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,MD:/^(MD[0-9]{2})[A-Z0-9]{20}$/,ME:/^(ME[0-9]{2})\d{18}$/,MK:/^(MK[0-9]{2})\d{3}[A-Z0-9]{10}\d{2}$/,MR:/^(MR[0-9]{2})\d{23}$/,MT:/^(MT[0-9]{2})[A-Z]{4}\d{5}[A-Z0-9]{18}$/,MU:/^(MU[0-9]{2})[A-Z]{4}\d{19}[A-Z]{3}$/,MZ:/^(MZ[0-9]{2})\d{21}$/,NL:/^(NL[0-9]{2})[A-Z]{4}\d{10}$/,NO:/^(NO[0-9]{2})\d{11}$/,PK:/^(PK[0-9]{2})[A-Z0-9]{4}\d{16}$/,PL:/^(PL[0-9]{2})\d{24}$/,PS:/^(PS[0-9]{2})[A-Z]{4}[A-Z0-9]{21}$/,PT:/^(PT[0-9]{2})\d{21}$/,QA:/^(QA[0-9]{2})[A-Z]{4}[A-Z0-9]{21}$/,RO:/^(RO[0-9]{2})[A-Z]{4}[A-Z0-9]{16}$/,RS:/^(RS[0-9]{2})\d{18}$/,SA:/^(SA[0-9]{2})\d{2}[A-Z0-9]{18}$/,SC:/^(SC[0-9]{2})[A-Z]{4}\d{20}[A-Z]{3}$/,SE:/^(SE[0-9]{2})\d{20}$/,SI:/^(SI[0-9]{2})\d{15}$/,SK:/^(SK[0-9]{2})\d{20}$/,SM:/^(SM[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,SV:/^(SV[0-9]{2})[A-Z0-9]{4}\d{20}$/,TL:/^(TL[0-9]{2})\d{19}$/,TN:/^(TN[0-9]{2})\d{20}$/,TR:/^(TR[0-9]{2})\d{5}[A-Z0-9]{17}$/,UA:/^(UA[0-9]{2})\d{6}[A-Z0-9]{19}$/,VA:/^(VA[0-9]{2})\d{18}$/,VG:/^(VG[0-9]{2})[A-Z]{4}\d{16}$/,XK:/^(XK[0-9]{2})\d{16}$/};function p(l){var C=l.filter(function(P){return!(P in d)});return!(C.length>0)}function _(l,C){var P=l.replace(/[\s\-]+/gi,"").toUpperCase(),k=P.slice(0,2).toUpperCase(),O=k in d;if(C.whitelist){if(!p(C.whitelist))return!1;var L=C.whitelist.includes(k);if(!L)return!1}if(C.blacklist){var F=C.blacklist.includes(k);if(F)return!1}return O&&d[k].test(P)}function S(l){var C=l.replace(/[^A-Z0-9]+/gi,"").toUpperCase(),P=C.slice(4)+C.slice(0,4),k=P.replace(/[A-Z]/g,function(L){return L.charCodeAt(0)-55}),O=k.match(/\d{1,7}/g).reduce(function(L,F){return Number(L+F)%97},"");return O===1}function y(l){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,i.default)(l),_(l,C)&&S(l)}return Vf.locales=Object.keys(d),Vf}var _y={exports:{}},$f={},G1;function RS(){if(G1)return $f;G1=1,Object.defineProperty($f,"__esModule",{value:!0}),$f.CountryCodes=void 0,$f.default=p;var i=n(Dt());function n(_){return _&&_.__esModule?_:{default:_}}var d=new Set(["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"]);function p(_){return(0,i.default)(_),d.has(_.toUpperCase())}return $f.CountryCodes=d,$f}var H1;function vR(){return H1||(H1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=y;var d=_(Dt()),p=RS();function _(l){return l&&l.__esModule?l:{default:l}}var S=/^[A-Za-z]{6}[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/;function y(l){(0,d.default)(l);var C=l.slice(4,6).toUpperCase();return!p.CountryCodes.has(C)&&C!=="XK"?!1:S.test(l)}i.exports=n.default,i.exports.default=n.default}(_y,_y.exports)),_y.exports}var vy={exports:{}},W1;function xR(){return W1||(W1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^[a-f0-9]{32}$/;function S(y){return(0,d.default)(y),_.test(y)}i.exports=n.default,i.exports.default=n.default}(vy,vy.exports)),vy.exports}var xy={exports:{}},K1;function bR(){return K1||(K1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _={md5:32,md4:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8};function S(y,l){(0,d.default)(y);var C=new RegExp("^[a-fA-F0-9]{".concat(_[l],"}$"));return C.test(y)}i.exports=n.default,i.exports.default=n.default}(xy,xy.exports)),xy.exports}var by={exports:{}},wy={exports:{}},Y1;function IS(){return Y1||(Y1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=C;var d=_(Dt()),p=_(ms());function _(P){return P&&P.__esModule?P:{default:P}}var S=/[^A-Z0-9+\/=]/i,y=/^[A-Z0-9_\-]*$/i,l={urlSafe:!1};function C(P,k){(0,d.default)(P),k=(0,p.default)(k,l);var O=P.length;if(k.urlSafe)return y.test(P);if(O%4!==0||S.test(P))return!1;var L=P.indexOf("=");return L===-1||L===O-1||L===O-2&&P[O-1]==="="}i.exports=n.default,i.exports.default=n.default}(wy,wy.exports)),wy.exports}var X1;function wR(){return X1||(X1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=_(Dt()),p=_(IS());function _(y){return y&&y.__esModule?y:{default:y}}function S(y){(0,d.default)(y);var l=y.split("."),C=l.length;return C!==3?!1:l.reduce(function(P,k){return P&&(0,p.default)(k,{urlSafe:!0})},!0)}i.exports=n.default,i.exports.default=n.default}(by,by.exports)),by.exports}var Sy={exports:{}},Q1;function SR(){return Q1||(Q1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var d=_(Dt()),p=_(ms());function _(C){return C&&C.__esModule?C:{default:C}}function S(C){"@babel/helpers - typeof";return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},S(C)}var y={allow_primitives:!1};function l(C,P){(0,d.default)(C);try{P=(0,p.default)(P,y);var k=[];P.allow_primitives&&(k=[null,!1,!0]);var O=JSON.parse(C);return k.includes(O)||!!O&&S(O)==="object"}catch{}return!1}i.exports=n.default,i.exports.default=n.default}(Sy,Sy.exports)),Sy.exports}var Ty={exports:{}},J1;function TR(){return J1||(J1=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=y;var d=_(Dt()),p=_(ms());function _(l){return l&&l.__esModule?l:{default:l}}var S={ignore_whitespace:!1};function y(l,C){return(0,d.default)(l),C=(0,p.default)(C,S),(C.ignore_whitespace?l.trim().length:l.length)===0}i.exports=n.default,i.exports.default=n.default}(Ty,Ty.exports)),Ty.exports}var My={exports:{}},eb;function MR(){return eb||(eb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}function _(y){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},_(y)}function S(y,l){(0,d.default)(y);var C,P;_(l)==="object"?(C=l.min||0,P=l.max):(C=arguments[1]||0,P=arguments[2]);var k=y.match(/(\uFE0F|\uFE0E)/g)||[],O=y.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],L=y.length-k.length-O.length,F=L>=C&&(typeof P>"u"||L<=P);return F&&Array.isArray(l==null?void 0:l.discreteLengths)?l.discreteLengths.some(function(G){return G===L}):F}i.exports=n.default,i.exports.default=n.default}(My,My.exports)),My.exports}var Ay={exports:{}},tb;function AR(){return tb||(tb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var d=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S){return(0,d.default)(S),/^[0-7][0-9A-HJKMNP-TV-Z]{25}$/i.test(S)}i.exports=n.default,i.exports.default=n.default}(Ay,Ay.exports)),Ay.exports}var Cy={exports:{}},rb;function CR(){return rb||(rb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _={1:/^[0-9A-F]{8}-[0-9A-F]{4}-1[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,2:/^[0-9A-F]{8}-[0-9A-F]{4}-2[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,6:/^[0-9A-F]{8}-[0-9A-F]{4}-6[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,7:/^[0-9A-F]{8}-[0-9A-F]{4}-7[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,8:/^[0-9A-F]{8}-[0-9A-F]{4}-8[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,nil:/^00000000-0000-0000-0000-000000000000$/i,max:/^ffffffff-ffff-ffff-ffff-ffffffffffff$/i,all:/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i};function S(y,l){return(0,d.default)(y),l==null&&(l="all"),l in _?_[l].test(y):!1}i.exports=n.default,i.exports.default=n.default}(Cy,Cy.exports)),Cy.exports}var Ey={exports:{}},ib;function ER(){return ib||(ib=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=_(Dt()),p=_(PS());function _(y){return y&&y.__esModule?y:{default:y}}function S(y){return(0,d.default)(y),(0,p.default)(y)&&y.length===24}i.exports=n.default,i.exports.default=n.default}(Ey,Ey.exports)),Ey.exports}var Py={exports:{}},nb;function PR(){return nb||(nb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var d=p(Dv());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){var l=(y==null?void 0:y.comparisonDate)||y||Date().toString(),C=(0,d.default)(l),P=(0,d.default)(S);return!!(P&&C&&P>C)}i.exports=n.default,i.exports.default=n.default}(Py,Py.exports)),Py.exports}var Ry={exports:{}},ab;function RR(){return ab||(ab=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=_(Dt()),p=_(Dv());function _(y){return y&&y.__esModule?y:{default:y}}function S(y){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:String(new Date);(0,d.default)(y);var C=(0,p.default)(l),P=(0,p.default)(y);return!!(P&&C&&P<C)}i.exports=n.default,i.exports.default=n.default}(Ry,Ry.exports)),Ry.exports}var Iy={exports:{}},sb;function IR(){return sb||(sb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=y;var d=_(Dt()),p=_(wS());function _(l){return l&&l.__esModule?l:{default:l}}function S(l){"@babel/helpers - typeof";return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},S(l)}function y(l,C){(0,d.default)(l);var P;if(Object.prototype.toString.call(C)==="[object Array]"){var k=[];for(P in C)({}).hasOwnProperty.call(C,P)&&(k[P]=(0,p.default)(C[P]));return k.indexOf(l)>=0}else{if(S(C)==="object")return C.hasOwnProperty(l);if(C&&typeof C.indexOf=="function")return C.indexOf(l)>=0}return!1}i.exports=n.default,i.exports.default=n.default}(Iy,Iy.exports)),Iy.exports}var Dy={exports:{}},ob;function DS(){return ob||(ob=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var d=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S){(0,d.default)(S);for(var y=S.replace(/[- ]+/g,""),l=0,C,P,k,O=y.length-1;O>=0;O--)C=y.substring(O,O+1),P=parseInt(C,10),k?(P*=2,P>=10?l+=P%10+1:l+=P):l+=P,k=!k;return!!(l%10===0&&y)}i.exports=n.default,i.exports.default=n.default}(Dy,Dy.exports)),Dy.exports}var zy={exports:{}},lb;function DR(){return lb||(lb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var d=_(Dt()),p=_(DS());function _(C){return C&&C.__esModule?C:{default:C}}var S={amex:/^3[47][0-9]{13}$/,dinersclub:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,discover:/^6(?:011|5[0-9][0-9])[0-9]{12,15}$/,jcb:/^(?:2131|1800|35\d{3})\d{11}$/,mastercard:/^5[1-5][0-9]{2}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$/,unionpay:/^(6[27][0-9]{14}|^(81[0-9]{14,17}))$/,visa:/^(?:4[0-9]{12})(?:[0-9]{3,6})?$/},y=function(){var C=[];for(var P in S)S.hasOwnProperty(P)&&C.push(S[P]);return C}();function l(C){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,d.default)(C);var k=P.provider,O=C.replace(/[- ]+/g,"");if(k&&k.toLowerCase()in S){if(!S[k.toLowerCase()].test(O))return!1}else{if(k&&!(k.toLowerCase()in S))throw new Error("".concat(k," is not a valid credit card provider."));if(!y.some(function(L){return L.test(O)}))return!1}return(0,p.default)(C)}i.exports=n.default,i.exports.default=n.default}(zy,zy.exports)),zy.exports}var Ly={exports:{}},ub;function zR(){return ub||(ub=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=y;var d=_(Dt()),p=_(Lv());function _(l){return l&&l.__esModule?l:{default:l}}var S={PL:function(C){(0,d.default)(C);var P={1:1,2:3,3:7,4:9,5:1,6:3,7:7,8:9,9:1,10:3,11:0};if(C!=null&&C.length===11&&(0,p.default)(C,{allow_leading_zeroes:!0})){var k=C.split("").slice(0,-1),O=k.reduce(function(G,ee,X){return G+Number(ee)*P[X+1]},0),L=O%10,F=Number(C.charAt(C.length-1));if(L===0&&F===0||F===10-L)return!0}return!1},ES:function(C){(0,d.default)(C);var P=/^[0-9X-Z][0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKE]$/,k={X:0,Y:1,Z:2},O=["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"],L=C.trim().toUpperCase();if(!P.test(L))return!1;var F=L.slice(0,-1).replace(/[X,Y,Z]/g,function(G){return k[G]});return L.endsWith(O[F%23])},FI:function(C){if((0,d.default)(C),C.length!==11||!C.match(/^\d{6}[\-A\+]\d{3}[0-9ABCDEFHJKLMNPRSTUVWXY]{1}$/))return!1;var P="0123456789ABCDEFHJKLMNPRSTUVWXY",k=parseInt(C.slice(0,6),10)*1e3+parseInt(C.slice(7,10),10),O=k%31,L=P[O];return L===C.slice(10,11)},IN:function(C){var P=/^[1-9]\d{3}\s?\d{4}\s?\d{4}$/,k=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],O=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],L=C.trim();if(!P.test(L))return!1;var F=0,G=L.replace(/\s/g,"").split("").map(Number).reverse();return G.forEach(function(ee,X){F=k[F][O[X%8][ee]]}),F===0},IR:function(C){if(!C.match(/^\d{10}$/)||(C="0000".concat(C).slice(C.length-6),parseInt(C.slice(3,9),10)===0))return!1;for(var P=parseInt(C.slice(9,10),10),k=0,O=0;O<9;O++)k+=parseInt(C.slice(O,O+1),10)*(10-O);return k%=11,k<2&&P===k||k>=2&&P===11-k},IT:function(C){return C.length!==9||C==="CA00000AA"?!1:C.search(/C[A-Z]\d{5}[A-Z]{2}/i)>-1},NO:function(C){var P=C.trim();if(isNaN(Number(P))||P.length!==11||P==="00000000000")return!1;var k=P.split("").map(Number),O=(11-(3*k[0]+7*k[1]+6*k[2]+1*k[3]+8*k[4]+9*k[5]+4*k[6]+5*k[7]+2*k[8])%11)%11,L=(11-(5*k[0]+4*k[1]+3*k[2]+2*k[3]+7*k[4]+6*k[5]+5*k[6]+4*k[7]+3*k[8]+2*O)%11)%11;return!(O!==k[9]||L!==k[10])},TH:function(C){if(!C.match(/^[1-8]\d{12}$/))return!1;for(var P=0,k=0;k<12;k++)P+=parseInt(C[k],10)*(13-k);return C[12]===((11-P%11)%10).toString()},LK:function(C){var P=/^[1-9]\d{8}[vx]$/i,k=/^[1-9]\d{11}$/i;return C.length===10&&P.test(C)?!0:!!(C.length===12&&k.test(C))},"he-IL":function(C){var P=/^\d{9}$/,k=C.trim();if(!P.test(k))return!1;for(var O=k,L=0,F,G=0;G<O.length;G++)F=Number(O[G])*(G%2+1),L+=F>9?F-9:F;return L%10===0},"ar-LY":function(C){var P=/^(1|2)\d{11}$/,k=C.trim();return!!P.test(k)},"ar-TN":function(C){var P=/^\d{8}$/,k=C.trim();return!!P.test(k)},"zh-CN":function(C){var P=["11","12","13","14","15","21","22","23","31","32","33","34","35","36","37","41","42","43","44","45","46","50","51","52","53","54","61","62","63","64","65","71","81","82","91"],k=["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"],O=["1","0","X","9","8","7","6","5","4","3","2"],L=function(_e){return P.includes(_e)},F=function(_e){var Se=parseInt(_e.substring(0,4),10),ke=parseInt(_e.substring(4,6),10),nt=parseInt(_e.substring(6),10),Ke=new Date(Se,ke-1,nt);return Ke>new Date?!1:Ke.getFullYear()===Se&&Ke.getMonth()===ke-1&&Ke.getDate()===nt},G=function(_e){for(var Se=_e.substring(0,17),ke=0,nt=0;nt<17;nt++)ke+=parseInt(Se.charAt(nt),10)*parseInt(k[nt],10);var Ke=ke%11;return O[Ke]},ee=function(_e){return G(_e)===_e.charAt(17).toUpperCase()},X=function(_e){var Se=/^[1-9]\d{7}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}$/.test(_e);if(!Se)return!1;var ke=_e.substring(0,2);if(Se=L(ke),!Se)return!1;var nt="19".concat(_e.substring(6,12));return Se=F(nt),!!Se},W=function(_e){var Se=/^[1-9]\d{5}[1-9]\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}(\d|x|X)$/.test(_e);if(!Se)return!1;var ke=_e.substring(0,2);if(Se=L(ke),!Se)return!1;var nt=_e.substring(6,14);return Se=F(nt),Se?ee(_e):!1},pe=function(_e){var Se=/^\d{15}|(\d{17}(\d|x|X))$/.test(_e);return Se?_e.length===15?X(_e):W(_e):!1};return pe(C)},"zh-HK":function(C){C=C.trim();var P=/^[A-Z]{1,2}[0-9]{6}((\([0-9A]\))|(\[[0-9A]\])|([0-9A]))$/,k=/^[0-9]$/;if(C=C.toUpperCase(),!P.test(C))return!1;C=C.replace(/\[|\]|\(|\)/g,""),C.length===8&&(C="3".concat(C));for(var O=0,L=0;L<=7;L++){var F=void 0;k.test(C[L])?F=C[L]:F=(C[L].charCodeAt(0)-55)%11,O+=F*(9-L)}O%=11;var G;return O===0?G="0":O===1?G="A":G=String(11-O),G===C[C.length-1]},"zh-TW":function(C){var P={A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:34,J:18,K:19,L:20,M:21,N:22,O:35,P:23,Q:24,R:25,S:26,T:27,U:28,V:29,W:32,X:30,Y:31,Z:33},k=C.trim().toUpperCase();return/^[A-Z][0-9]{9}$/.test(k)?Array.from(k).reduce(function(O,L,F){if(F===0){var G=P[L];return G%10*9+Math.floor(G/10)}return F===9?(10-O%10-Number(L))%10===0:O+Number(L)*(9-F)},0):!1},PK:function(C){var P=/^[1-7][0-9]{4}-[0-9]{7}-[1-9]$/,k=C.trim();return P.test(k)}};function y(l,C){if((0,d.default)(l),C in S)return S[C](l);if(C==="any"){for(var P in S)if(S.hasOwnProperty(P)){var k=S[P];if(k(l))return!0}return!1}throw new Error("Invalid locale '".concat(C,"'"))}i.exports=n.default,i.exports.default=n.default}(Ly,Ly.exports)),Ly.exports}var ky={exports:{}},cb;function LR(){return cb||(cb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=P;var d=p(Dt());function p(k){return k&&k.__esModule?k:{default:k}}var _=8,S=14,y=/^(\d{8}|\d{13}|\d{14})$/;function l(k,O){return k===_||k===S?O%2===0?3:1:O%2===0?1:3}function C(k){var O=k.slice(0,-1).split("").map(function(F,G){return Number(F)*l(k.length,G)}).reduce(function(F,G){return F+G},0),L=10-O%10;return L<10?L:0}function P(k){(0,d.default)(k);var O=Number(k.slice(-1));return y.test(k)&&O===C(k)}i.exports=n.default,i.exports.default=n.default}(ky,ky.exports)),ky.exports}var By={exports:{}},hb;function kR(){return hb||(hb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/;function S(y){if((0,d.default)(y),!_.test(y))return!1;for(var l=!0,C=0,P=y.length-2;P>=0;P--)if(y[P]>="A"&&y[P]<="Z")for(var k=y[P].charCodeAt(0)-55,O=k%10,L=Math.trunc(k/10),F=0,G=[O,L];F<G.length;F++){var ee=G[F];l?ee>=5?C+=1+(ee-5)*2:C+=ee*2:C+=ee,l=!l}else{var X=y[P].charCodeAt(0)-48;l?X>=5?C+=1+(X-5)*2:C+=X*2:C+=X,l=!l}var W=Math.trunc((C+9)/10)*10-C;return+y[y.length-1]===W}i.exports=n.default,i.exports.default=n.default}(By,By.exports)),By.exports}var Oy={exports:{}},db;function BR(){return db||(db=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var d=p(Dt());function p(C){return C&&C.__esModule?C:{default:C}}var _=/^(?:[0-9]{9}X|[0-9]{10})$/,S=/^(?:[0-9]{13})$/,y=[1,3];function l(C,P){(0,d.default)(C);var k=String((P==null?void 0:P.version)||P);if(!(P!=null&&P.version||P))return l(C,{version:10})||l(C,{version:13});var O=C.replace(/[\s-]+/g,""),L=0;if(k==="10"){if(!_.test(O))return!1;for(var F=0;F<k-1;F++)L+=(F+1)*O.charAt(F);if(O.charAt(9)==="X"?L+=10*10:L+=10*O.charAt(9),L%11===0)return!0}else if(k==="13"){if(!S.test(O))return!1;for(var G=0;G<12;G++)L+=y[G%2]*O.charAt(G);if(O.charAt(12)-(10-L%10)%10===0)return!0}return!1}i.exports=n.default,i.exports.default=n.default}(Oy,Oy.exports)),Oy.exports}var jy={exports:{}},fb;function OR(){return fb||(fb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _="^\\d{4}-?\\d{3}[\\dX]$";function S(y){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,d.default)(y);var C=_;if(C=l.require_hyphen?C.replace("?",""):C,C=l.case_sensitive?new RegExp(C):new RegExp(C,"i"),!C.test(y))return!1;for(var P=y.replace("-","").toUpperCase(),k=0,O=0;O<P.length;O++){var L=P[O];k+=(L==="X"?10:+L)*(8-O)}return k%11===0}i.exports=n.default,i.exports.default=n.default}(jy,jy.exports)),jy.exports}var Ny={exports:{}},zd={},pb;function zS(){if(pb)return zd;pb=1,Object.defineProperty(zd,"__esModule",{value:!0}),zd.iso7064Check=i,zd.luhnCheck=n,zd.reverseMultiplyAndSum=d,zd.verhoeffCheck=p;function i(_){for(var S=10,y=0;y<_.length-1;y++)S=(parseInt(_[y],10)+S)%10===0?10*2%11:(parseInt(_[y],10)+S)%10*2%11;return S=S===1?0:11-S,S===parseInt(_[10],10)}function n(_){for(var S=0,y=!1,l=_.length-1;l>=0;l--){if(y){var C=parseInt(_[l],10)*2;C>9?S+=C.toString().split("").map(function(P){return parseInt(P,10)}).reduce(function(P,k){return P+k},0):S+=C}else S+=parseInt(_[l],10);y=!y}return S%10===0}function d(_,S){for(var y=0,l=0;l<_.length;l++)y+=_[l]*(S-l);return y}function p(_){for(var S=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],y=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],l=_.split("").reverse().join(""),C=0,P=0;P<l.length;P++)C=S[C][y[P%8][parseInt(l[P],10)]];return C===0}return zd}var mb;function jR(){return mb||(mb=1,function(i,n){function d(we){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Re){return typeof Re}:function(Re){return Re&&typeof Symbol=="function"&&Re.constructor===Symbol&&Re!==Symbol.prototype?"symbol":typeof Re},d(we)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=Yi;var p=C(Dt()),_=l(zS()),S=C(AS());function y(we){if(typeof WeakMap!="function")return null;var Re=new WeakMap,We=new WeakMap;return(y=function(xt){return xt?We:Re})(we)}function l(we,Re){if(we&&we.__esModule)return we;if(we===null||d(we)!="object"&&typeof we!="function")return{default:we};var We=y(Re);if(We&&We.has(we))return We.get(we);var vt={__proto__:null},xt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Et in we)if(Et!=="default"&&{}.hasOwnProperty.call(we,Et)){var Ut=xt?Object.getOwnPropertyDescriptor(we,Et):null;Ut&&(Ut.get||Ut.set)?Object.defineProperty(vt,Et,Ut):vt[Et]=we[Et]}return vt.default=we,We&&We.set(we,vt),vt}function C(we){return we&&we.__esModule?we:{default:we}}function P(we){return F(we)||L(we)||O(we)||k()}function k(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O(we,Re){if(we){if(typeof we=="string")return G(we,Re);var We={}.toString.call(we).slice(8,-1);return We==="Object"&&we.constructor&&(We=we.constructor.name),We==="Map"||We==="Set"?Array.from(we):We==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(We)?G(we,Re):void 0}}function L(we){if(typeof Symbol<"u"&&we[Symbol.iterator]!=null||we["@@iterator"]!=null)return Array.from(we)}function F(we){if(Array.isArray(we))return G(we)}function G(we,Re){(Re==null||Re>we.length)&&(Re=we.length);for(var We=0,vt=Array(Re);We<Re;We++)vt[We]=we[We];return vt}function ee(we){var Re=we.slice(0,2),We=parseInt(we.slice(2,4),10);We>40?(We-=40,Re="20".concat(Re)):We>20?(We-=20,Re="18".concat(Re)):Re="19".concat(Re),We<10&&(We="0".concat(We));var vt="".concat(Re,"/").concat(We,"/").concat(we.slice(4,6));if(!(0,S.default)(vt,"YYYY/MM/DD"))return!1;for(var xt=we.split("").map(function(_r){return parseInt(_r,10)}),Et=[2,4,8,5,10,9,7,3,6],Ut=0,ur=0;ur<Et.length;ur++)Ut+=xt[ur]*Et[ur];return Ut=Ut%11===10?0:Ut%11,Ut===xt[9]}function X(we){var Re=we.split(""),We=Re.filter(function(xt,Et){return Et%2}).map(function(xt){return Number(xt)*2}).join("").split(""),vt=Re.filter(function(xt,Et){return!(Et%2)}).concat(We).map(function(xt){return Number(xt)}).reduce(function(xt,Et){return xt+Et});return vt%10===0}function W(we){we=we.replace(/\W/,"");var Re=parseInt(we.slice(0,2),10);if(we.length===10)Re<54?Re="20".concat(Re):Re="19".concat(Re);else{if(we.slice(6)==="000")return!1;if(Re<54)Re="19".concat(Re);else return!1}Re.length===3&&(Re=[Re.slice(0,2),"0",Re.slice(2)].join(""));var We=parseInt(we.slice(2,4),10);if(We>50&&(We-=50),We>20){if(parseInt(Re,10)<2004)return!1;We-=20}We<10&&(We="0".concat(We));var vt="".concat(Re,"/").concat(We,"/").concat(we.slice(4,6));if(!(0,S.default)(vt,"YYYY/MM/DD"))return!1;if(we.length===10&&parseInt(we,10)%11!==0){var xt=parseInt(we.slice(0,9),10)%11;if(parseInt(Re,10)<1986&&xt===10){if(parseInt(we.slice(9),10)!==0)return!1}else return!1}return!0}function pe(we){return _.luhnCheck(we)}function me(we){for(var Re=we.split("").map(function(_r){return parseInt(_r,10)}),We=[],vt=0;vt<Re.length-1;vt++){We.push("");for(var xt=0;xt<Re.length-1;xt++)Re[vt]===Re[xt]&&(We[vt]+=xt)}if(We=We.filter(function(_r){return _r.length>1}),We.length!==2&&We.length!==3)return!1;if(We[0].length===3){for(var Et=We[0].split("").map(function(_r){return parseInt(_r,10)}),Ut=0,ur=0;ur<Et.length-1;ur++)Et[ur]+1===Et[ur+1]&&(Ut+=1);if(Ut===2)return!1}return _.iso7064Check(we)}function _e(we){we=we.replace(/\W/,"");var Re=parseInt(we.slice(4,6),10),We=we.slice(6,7);switch(We){case"0":case"1":case"2":case"3":Re="19".concat(Re);break;case"4":case"9":Re<37?Re="20".concat(Re):Re="19".concat(Re);break;default:if(Re<37)Re="20".concat(Re);else if(Re>58)Re="18".concat(Re);else return!1;break}Re.length===3&&(Re=[Re.slice(0,2),"0",Re.slice(2)].join(""));var vt="".concat(Re,"/").concat(we.slice(2,4),"/").concat(we.slice(0,2));if(!(0,S.default)(vt,"YYYY/MM/DD"))return!1;for(var xt=we.split("").map(function(_r){return parseInt(_r,10)}),Et=0,Ut=4,ur=0;ur<9;ur++)Et+=xt[ur]*Ut,Ut-=1,Ut===1&&(Ut=7);return Et%=11,Et===1?!1:Et===0?xt[9]===0:xt[9]===11-Et}function Se(we){for(var Re=we.slice(0,8).split("").map(function(Et){return parseInt(Et,10)}),We=0,vt=1;vt<Re.length;vt+=2)We+=Re[vt];for(var xt=0;xt<Re.length;xt+=2)Re[xt]<2?We+=1-Re[xt]:(We+=2*(Re[xt]-2)+5,Re[xt]>4&&(We+=2));return String.fromCharCode(We%26+65)===we.charAt(8)}function ke(we){for(var Re=we.split("").map(function(xt){return parseInt(xt,10)}),We=0,vt=0;vt<8;vt++)We+=Re[vt]*Math.pow(2,8-vt);return We%11%10===Re[8]}function nt(we){var Re=_.reverseMultiplyAndSum(we.split("").slice(0,7).map(function(We){return parseInt(We,10)}),8);return we.length===9&&we[8]!=="W"&&(Re+=(we[8].charCodeAt(0)-64)*9),Re%=23,Re===0?we[7].toUpperCase()==="W":we[7].toUpperCase()===String.fromCharCode(64+Re)}var Ke={andover:["10","12"],atlanta:["60","67"],austin:["50","53"],brookhaven:["01","02","03","04","05","06","11","13","14","16","21","22","23","25","34","51","52","54","55","56","57","58","59","65"],cincinnati:["30","32","35","36","37","38","61"],fresno:["15","24"],internet:["20","26","27","45","46","47"],kansas:["40","44"],memphis:["94","95"],ogden:["80","90"],philadelphia:["33","39","41","42","43","46","48","62","63","64","66","68","71","72","73","74","75","76","77","81","82","83","84","85","86","87","88","91","92","93","98","99"],sba:["31"]};function Ye(){var we=[];for(var Re in Ke)Ke.hasOwnProperty(Re)&&we.push.apply(we,P(Ke[Re]));return we}function ht(we){return Ye().indexOf(we.slice(0,2))!==-1}function kt(we){for(var Re=0,We=we.split(""),vt=parseInt(We.pop(),10),xt=0;xt<We.length;xt++)Re+=We[9-xt]*(2+xt%6);var Et=11-Re%11;return Et===11?Et=0:Et===10&&(Et=9),vt===Et}function sr(we){var Re=we.toUpperCase().split("");if(isNaN(parseInt(Re[0],10))&&Re.length>1){var We=0;switch(Re[0]){case"Y":We=1;break;case"Z":We=2;break}Re.splice(0,1,We)}else for(;Re.length<9;)Re.unshift(0);var vt=["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"];Re=Re.join("");var xt=parseInt(Re.slice(0,8),10)%23;return Re[8]===vt[xt]}function ir(we){var Re=we.slice(1,3),We=we.slice(0,1);switch(We){case"1":case"2":Re="18".concat(Re);break;case"3":case"4":Re="19".concat(Re);break;default:Re="20".concat(Re);break}var vt="".concat(Re,"/").concat(we.slice(3,5),"/").concat(we.slice(5,7));if(!(0,S.default)(vt,"YYYY/MM/DD"))return!1;for(var xt=we.split("").map(function(qr){return parseInt(qr,10)}),Et=0,Ut=1,ur=0;ur<10;ur++)Et+=xt[ur]*Ut,Ut+=1,Ut===10&&(Ut=1);if(Et%11===10){Et=0,Ut=3;for(var _r=0;_r<10;_r++)Et+=xt[_r]*Ut,Ut+=1,Ut===10&&(Ut=1);if(Et%11===10)return xt[10]===0}return Et%11===xt[10]}function Xt(we){var Re=we.slice(4,6),We=we.slice(6,7);switch(We){case"+":Re="18".concat(Re);break;case"-":Re="19".concat(Re);break;default:Re="20".concat(Re);break}var vt="".concat(Re,"/").concat(we.slice(2,4),"/").concat(we.slice(0,2));if(!(0,S.default)(vt,"YYYY/MM/DD"))return!1;var xt=parseInt(we.slice(0,6)+we.slice(7,10),10)%31;if(xt<10)return xt===parseInt(we.slice(10),10);xt-=10;var Et=["A","B","C","D","E","F","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y"];return Et[xt]===we.slice(10)}function or(we){if(we.slice(2,4)!=="00"||we.slice(4,6)!=="00"){var Re="".concat(we.slice(0,2),"/").concat(we.slice(2,4),"/").concat(we.slice(4,6));if(!(0,S.default)(Re,"YY/MM/DD"))return!1}var We=97-parseInt(we.slice(0,9),10)%97,vt=parseInt(we.slice(9,11),10);return!(We!==vt&&(We=97-parseInt("2".concat(we.slice(0,9)),10)%97,We!==vt))}function Ct(we){we=we.replace(/\s/g,"");var Re=parseInt(we.slice(0,10),10)%511,We=parseInt(we.slice(10,13),10);return Re===We}function Nt(we){var Re="".concat(we.slice(0,4),"/").concat(we.slice(4,6),"/").concat(we.slice(6,8));return!(0,S.default)(Re,"YYYY/MM/DD")||!_.luhnCheck(we.slice(0,12))?!1:_.verhoeffCheck("".concat(we.slice(0,11)).concat(we[12]))}function Rt(we){return _.iso7064Check(we)}function dr(we){for(var Re=we.split("").map(function(xt){return parseInt(xt,10)}),We=8,vt=1;vt<9;vt++)We+=Re[vt]*(vt+1);return We%11===Re[9]}function De(we){for(var Re=!1,We=!1,vt=0;vt<3;vt++)if(!Re&&/[AEIOU]/.test(we[vt]))Re=!0;else if(!We&&Re&&we[vt]==="X")We=!0;else if(vt>0&&(Re&&!We&&!/[AEIOU]/.test(we[vt])||We&&!/X/.test(we[vt])))return!1;return!0}function wt(we){var Re=we.toUpperCase().split("");if(!De(Re.slice(0,3))||!De(Re.slice(3,6)))return!1;for(var We=[6,7,9,10,12,13,14],vt={L:"0",M:"1",N:"2",P:"3",Q:"4",R:"5",S:"6",T:"7",U:"8",V:"9"},xt=0,Et=We;xt<Et.length;xt++){var Ut=Et[xt];Re[Ut]in vt&&Re.splice(Ut,1,vt[Re[Ut]])}var ur={A:"01",B:"02",C:"03",D:"04",E:"05",H:"06",L:"07",M:"08",P:"09",R:"10",S:"11",T:"12"},_r=ur[Re[8]],qr=parseInt(Re[9]+Re[10],10);qr>40&&(qr-=40),qr<10&&(qr="0".concat(qr));var Pi="".concat(Re[6]).concat(Re[7],"/").concat(_r,"/").concat(qr);if(!(0,S.default)(Pi,"YY/MM/DD"))return!1;for(var Ui=0,zi=1;zi<Re.length-1;zi+=2){var Rn=parseInt(Re[zi],10);isNaN(Rn)&&(Rn=Re[zi].charCodeAt(0)-65),Ui+=Rn}for(var In={A:1,B:0,C:5,D:7,E:9,F:13,G:15,H:17,I:19,J:21,K:2,L:4,M:18,N:20,O:11,P:3,Q:6,R:8,S:12,T:14,U:16,V:10,W:22,X:25,Y:24,Z:23,0:1,1:0},ni=0;ni<Re.length-1;ni+=2){var ri=0;if(Re[ni]in In)ri=In[Re[ni]];else{var je=parseInt(Re[ni],10);ri=2*je+1,je>4&&(ri+=2)}Ui+=ri}return String.fromCharCode(65+Ui%26)===Re[15]}function Zt(we){we=we.replace(/\W/,"");var Re=we.slice(0,2);if(Re!=="32"){var We=we.slice(2,4);if(We!=="00"){var vt=we.slice(4,6);switch(we[6]){case"0":vt="18".concat(vt);break;case"1":vt="19".concat(vt);break;default:vt="20".concat(vt);break}var xt="".concat(vt,"/").concat(we.slice(2,4),"/").concat(Re);if(!(0,S.default)(xt,"YYYY/MM/DD"))return!1}for(var Et=1101,Ut=[1,6,3,7,9,10,5,8,4,2],ur=0;ur<we.length-1;ur++)Et-=parseInt(we[ur],10)*Ut[ur];return parseInt(we[10],10)===Et%11}return!0}function Ht(we){if(we.length!==9){for(var Re=we.toUpperCase().split("");Re.length<8;)Re.unshift(0);switch(we[7]){case"A":case"P":if(parseInt(Re[6],10)===0)return!1;break;default:{var We=parseInt(Re.join("").slice(0,5),10);if(We>32e3)return!1;var vt=parseInt(Re.join("").slice(5,7),10);if(We===vt)return!1}}}return!0}function zt(we){return _.reverseMultiplyAndSum(we.split("").slice(0,8).map(function(Re){return parseInt(Re,10)}),9)%11===parseInt(we[8],10)}function er(we){if(we.length===10){for(var Re=[6,5,7,2,3,4,5,6,7],We=0,vt=0;vt<Re.length;vt++)We+=parseInt(we[vt],10)*Re[vt];return We%=11,We===10?!1:We===parseInt(we[9],10)}var xt=we.slice(0,2),Et=parseInt(we.slice(2,4),10);Et>80?(xt="18".concat(xt),Et-=80):Et>60?(xt="22".concat(xt),Et-=60):Et>40?(xt="21".concat(xt),Et-=40):Et>20?(xt="20".concat(xt),Et-=20):xt="19".concat(xt),Et<10&&(Et="0".concat(Et));var Ut="".concat(xt,"/").concat(Et,"/").concat(we.slice(4,6));if(!(0,S.default)(Ut,"YYYY/MM/DD"))return!1;for(var ur=0,_r=1,qr=0;qr<we.length-1;qr++)ur+=parseInt(we[qr],10)*_r%10,_r+=2,_r>10?_r=1:_r===5&&(_r+=2);return ur=10-ur%10,ur===parseInt(we[10],10)}function nr(we){if(we.length===11){var Re,We;if(Re=0,we==="11111111111"||we==="22222222222"||we==="33333333333"||we==="44444444444"||we==="55555555555"||we==="66666666666"||we==="77777777777"||we==="88888888888"||we==="99999999999"||we==="00000000000")return!1;for(var vt=1;vt<=9;vt++)Re+=parseInt(we.substring(vt-1,vt),10)*(11-vt);if(We=Re*10%11,We===10&&(We=0),We!==parseInt(we.substring(9,10),10))return!1;Re=0;for(var xt=1;xt<=10;xt++)Re+=parseInt(we.substring(xt-1,xt),10)*(12-xt);return We=Re*10%11,We===10&&(We=0),We===parseInt(we.substring(10,11),10)}if(we==="00000000000000"||we==="11111111111111"||we==="22222222222222"||we==="33333333333333"||we==="44444444444444"||we==="55555555555555"||we==="66666666666666"||we==="77777777777777"||we==="88888888888888"||we==="99999999999999")return!1;for(var Et=we.length-2,Ut=we.substring(0,Et),ur=we.substring(Et),_r=0,qr=Et-7,Pi=Et;Pi>=1;Pi--)_r+=Ut.charAt(Et-Pi)*qr,qr-=1,qr<2&&(qr=9);var Ui=_r%11<2?0:11-_r%11;if(Ui!==parseInt(ur.charAt(0),10))return!1;Et+=1,Ut=we.substring(0,Et),_r=0,qr=Et-7;for(var zi=Et;zi>=1;zi--)_r+=Ut.charAt(Et-zi)*qr,qr-=1,qr<2&&(qr=9);return Ui=_r%11<2?0:11-_r%11,Ui===parseInt(ur.charAt(1),10)}function Qr(we){var Re=11-_.reverseMultiplyAndSum(we.split("").slice(0,8).map(function(We){return parseInt(We,10)}),9)%11;return Re>9?parseInt(we[8],10)===0:Re===parseInt(we[8],10)}function br(we){if(we.slice(0,4)!=="9000"){var Re=we.slice(1,3);switch(we[0]){case"1":case"2":Re="19".concat(Re);break;case"3":case"4":Re="18".concat(Re);break;case"5":case"6":Re="20".concat(Re);break}var We="".concat(Re,"/").concat(we.slice(3,5),"/").concat(we.slice(5,7));if(We.length===8){if(!(0,S.default)(We,"YY/MM/DD"))return!1}else if(!(0,S.default)(We,"YYYY/MM/DD"))return!1;for(var vt=we.split("").map(function(ur){return parseInt(ur,10)}),xt=[2,7,9,1,4,6,3,5,8,2,7,9],Et=0,Ut=0;Ut<xt.length;Ut++)Et+=vt[Ut]*xt[Ut];return Et%11===10?vt[12]===1:vt[12]===Et%11}return!0}function ti(we){if(we.length===9){if(we=we.replace(/\W/,""),we.slice(6)==="000")return!1;var Re=parseInt(we.slice(0,2),10);if(Re>53)return!1;Re<10?Re="190".concat(Re):Re="19".concat(Re);var We=parseInt(we.slice(2,4),10);We>50&&(We-=50),We<10&&(We="0".concat(We));var vt="".concat(Re,"/").concat(We,"/").concat(we.slice(4,6));if(!(0,S.default)(vt,"YYYY/MM/DD"))return!1}return!0}function Ur(we){var Re=11-_.reverseMultiplyAndSum(we.split("").slice(0,7).map(function(We){return parseInt(We,10)}),8)%11;return Re===10?parseInt(we[7],10)===0:Re===parseInt(we[7],10)}function li(we){var Re=we.slice(0);we.length>11&&(Re=Re.slice(2));var We="",vt=Re.slice(2,4),xt=parseInt(Re.slice(4,6),10);if(we.length>11)We=we.slice(0,4);else if(We=we.slice(0,2),we.length===11&&xt<60){var Et=new Date().getFullYear().toString(),Ut=parseInt(Et.slice(0,2),10);if(Et=parseInt(Et,10),we[6]==="-")parseInt("".concat(Ut).concat(We),10)>Et?We="".concat(Ut-1).concat(We):We="".concat(Ut).concat(We);else if(We="".concat(Ut-1).concat(We),Et-parseInt(We,10)<100)return!1}xt>60&&(xt-=60),xt<10&&(xt="0".concat(xt));var ur="".concat(We,"/").concat(vt,"/").concat(xt);if(ur.length===8){if(!(0,S.default)(ur,"YY/MM/DD"))return!1}else if(!(0,S.default)(ur,"YYYY/MM/DD"))return!1;return _.luhnCheck(we.replace(/\W/,""))}function Di(we){for(var Re=we.split("").map(function(Et){return parseInt(Et,10)}),We=[-1,5,7,9,4,6,10,5,7],vt=0,xt=0;xt<We.length;xt++)vt+=Re[xt]*We[xt];return vt%11===10?Re[9]===0:Re[9]===vt%11}var zr={"bg-BG":/^\d{10}$/,"cs-CZ":/^\d{6}\/{0,1}\d{3,4}$/,"de-AT":/^\d{9}$/,"de-DE":/^[1-9]\d{10}$/,"dk-DK":/^\d{6}-{0,1}\d{4}$/,"el-CY":/^[09]\d{7}[A-Z]$/,"el-GR":/^([0-4]|[7-9])\d{8}$/,"en-CA":/^\d{9}$/,"en-GB":/^\d{10}$|^(?!GB|NK|TN|ZZ)(?![DFIQUV])[A-Z](?![DFIQUVO])[A-Z]\d{6}[ABCD ]$/i,"en-IE":/^\d{7}[A-W][A-IW]{0,1}$/i,"en-US":/^\d{2}[- ]{0,1}\d{7}$/,"es-AR":/(20|23|24|27|30|33|34)[0-9]{8}[0-9]/,"es-ES":/^(\d{0,8}|[XYZKLM]\d{7})[A-HJ-NP-TV-Z]$/i,"et-EE":/^[1-6]\d{6}(00[1-9]|0[1-9][0-9]|[1-6][0-9]{2}|70[0-9]|710)\d$/,"fi-FI":/^\d{6}[-+A]\d{3}[0-9A-FHJ-NPR-Y]$/i,"fr-BE":/^\d{11}$/,"fr-FR":/^[0-3]\d{12}$|^[0-3]\d\s\d{2}(\s\d{3}){3}$/,"fr-LU":/^\d{13}$/,"hr-HR":/^\d{11}$/,"hu-HU":/^8\d{9}$/,"it-IT":/^[A-Z]{6}[L-NP-V0-9]{2}[A-EHLMPRST][L-NP-V0-9]{2}[A-ILMZ][L-NP-V0-9]{3}[A-Z]$/i,"lv-LV":/^\d{6}-{0,1}\d{5}$/,"mt-MT":/^\d{3,7}[APMGLHBZ]$|^([1-8])\1\d{7}$/i,"nl-NL":/^\d{9}$/,"pl-PL":/^\d{10,11}$/,"pt-BR":/(?:^\d{11}$)|(?:^\d{14}$)/,"pt-PT":/^\d{9}$/,"ro-RO":/^\d{13}$/,"sk-SK":/^\d{6}\/{0,1}\d{3,4}$/,"sl-SI":/^[1-9]\d{7}$/,"sv-SE":/^(\d{6}[-+]{0,1}\d{4}|(18|19|20)\d{6}[-+]{0,1}\d{4})$/,"uk-UA":/^\d{10}$/};zr["lb-LU"]=zr["fr-LU"],zr["lt-LT"]=zr["et-EE"],zr["nl-BE"]=zr["fr-BE"],zr["fr-CA"]=zr["en-CA"];var pr={"bg-BG":ee,"cs-CZ":W,"de-AT":pe,"de-DE":me,"dk-DK":_e,"el-CY":Se,"el-GR":ke,"en-CA":X,"en-IE":nt,"en-US":ht,"es-AR":kt,"es-ES":sr,"et-EE":ir,"fi-FI":Xt,"fr-BE":or,"fr-FR":Ct,"fr-LU":Nt,"hr-HR":Rt,"hu-HU":dr,"it-IT":wt,"lv-LV":Zt,"mt-MT":Ht,"nl-NL":zt,"pl-PL":er,"pt-BR":nr,"pt-PT":Qr,"ro-RO":br,"sk-SK":ti,"sl-SI":Ur,"sv-SE":li,"uk-UA":Di};pr["lb-LU"]=pr["fr-LU"],pr["lt-LT"]=pr["et-EE"],pr["nl-BE"]=pr["fr-BE"],pr["fr-CA"]=pr["en-CA"];var Ki=/[-\\\/!@#$%\^&\*\(\)\+\=\[\]]+/g,Fi={"de-AT":Ki,"de-DE":/[\/\\]/g,"fr-BE":Ki};Fi["nl-BE"]=Fi["fr-BE"];function Yi(we){var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-US";(0,p.default)(we);var We=we.slice(0);if(Re in zr)return Re in Fi&&(We=We.replace(Fi[Re],"")),zr[Re].test(We)?Re in pr?pr[Re](We):!0:!1;throw new Error("Invalid locale '".concat(Re,"'"))}i.exports=n.default,i.exports.default=n.default}(Ny,Ny.exports)),Ny.exports}var Zf={},gb;function NR(){if(gb)return Zf;gb=1,Object.defineProperty(Zf,"__esModule",{value:!0}),Zf.default=p,Zf.locales=void 0;var i=n(Dt());function n(_){return _&&_.__esModule?_:{default:_}}var d={"am-AM":/^(\+?374|0)(33|4[134]|55|77|88|9[13-689])\d{6}$/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)([569]\d{7}|41\d{6})$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-OM":/^((\+|00)968)?(9[1-9])\d{6}$/,"ar-PS":/^(\+?970|0)5[6|9](\d{7})$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SD":/^((\+?249)|0)?(9[012369]|1[012])\d{7}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(10|5[015]|7[07]|99)\d{7}$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^((\+49|0)1)(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7,9}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)([1-9])\d{1,9}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"dv-MV":/^(\+?960)?(7[2-9]|9[1-9])\d{5}$/,"el-GR":/^(\+?30|0)?6(8[5-9]|9(?![26])[0-9])\d{7}$/,"el-CY":/^(\+?357?)?(9(9|6)\d{6})$/,"en-AI":/^(\+?1|0)264(?:2(35|92)|4(?:6[1-2]|76|97)|5(?:3[6-9]|8[1-4])|7(?:2(4|9)|72))\d{4}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-AG":/^(?:\+1|1)268(?:464|7(?:1[3-9]|[28]\d|3[0246]|64|7[0-689]))\d{4}$/,"en-BM":/^(\+?1)?441(((3|7)\d{6}$)|(5[0-3][0-9]\d{4}$)|(59\d{5}$))/,"en-BS":/^(\+?1[-\s]?|0)?\(?242\)?[-\s]?\d{3}[-\s]?\d{4}$/,"en-GB":/^(\+?44|0)7[1-9]\d{8}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|53|28|55|59)\d{7}$/,"en-GY":/^(\+592|0)6\d{6}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-JM":/^(\+?876)?\d{7}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"fr-CF":/^(\+?236| ?)(70|75|77|72|21|22)\d{6}$/,"en-SS":/^(\+?211|0)(9[1257])\d{7}$/,"en-KI":/^((\+686|686)?)?( )?((6|7)(2|3|8)[0-9]{6})$/,"en-KN":/^(?:\+1|1)869(?:46\d|48[89]|55[6-8]|66\d|76[02-7])\d{4}$/,"en-LS":/^(\+?266)(22|28|57|58|59|27|52)\d{6}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-MW":/^(\+?265|0)(((77|88|31|99|98|21)\d{7})|(((111)|1)\d{6})|(32000\d{4}))$/,"en-NA":/^(\+?264|0)(6|8)\d{7}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PG":/^(\+?675|0)?(7\d|8[18])\d{6}$/,"en-PK":/^((00|\+)?92|0)3[0-6]\d{8}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[3689]\d{7}$/,"en-SL":/^(\+?232|0)\d{8}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?0[79][567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"en-BW":/^(\+?267)?(7[1-8]{1})\d{6}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?3(0(0|1|2|4|5)|1\d|2[0-4]|5(0|1))\d{7}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-CU":/^(\+53|0053)?5\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8|3|2]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-GT":/^(\+?502)?[2|6|7]\d{7}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-NI":/^(\+?505)\d{7,8}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-SV":/^(\+?503)?[67]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"es-VE":/^(\+?58)?(2|4)\d{9}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4[0-6]|50)\s?(\d\s?){4,8}$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-BF":/^(\+226|0)[67]\d{7}$/,"fr-BJ":/^(\+229)\d{8}$/,"fr-CD":/^(\+?243|0)?(8|9)\d{8}$/,"fr-CM":/^(\+?237)6[0-9]{8}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-PF":/^(\+?689)?8[789]\d{6}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"fr-WF":/^(\+681)?\d{6}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36|06)(20|30|31|50|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"ir-IR":/^(\+98|0)?9\d{9}$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(79\d{7}|5\d{8})$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"ky-KG":/^(\+996\s?)?(22[0-9]|50[0-9]|55[0-9]|70[0-9]|75[0-9]|77[0-9]|880|990|995|996|997|998)\s?\d{3}\s?\d{3}$/,"lt-LT":/^(\+370|8)\d{8}$/,"lv-LV":/^(\+?371)2\d{7}$/,"mg-MG":/^((\+?261|0)(2|3)\d)?\d{7}$/,"mn-MN":/^(\+|00|011)?976(77|81|88|91|94|95|96|99)\d{6}$/,"my-MM":/^(\+?959|09|9)(2[5-7]|3[1-2]|4[0-5]|6[6-9]|7[5-9]|9[6-9])[0-9]{7}$/,"ms-MY":/^(\+?60|0)1(([0145](-|\s)?\d{7,8})|([236-9](-|\s)?\d{7}))$/,"mz-MZ":/^(\+?258)?8[234567]\d{7}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nl-AW":/^(\+)?297(56|59|64|73|74|99)\d{5}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?([5-8]\d|45) ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[1-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"pt-AO":/^(\+244)\d{9}$/,"ro-MD":/^(\+?373|0)((6(0|1|2|6|7|8|9))|(7(6|7|8|9)))\d{6}$/,"ro-RO":/^(\+?40|0)\s?7\d{2}(\/|\s|\.|-)?\d{3}(\s|\.|-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"si-LK":/^(?:0|94|\+94)?(7(0|1|2|4|5|6|7|8)( |-)?)\d{7}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"so-SO":/^(\+?252|0)((6[0-9])\d{7}|(7[1-9])\d{7})$/,"sq-AL":/^(\+355|0)6[2-9]\d{7}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"tg-TJ":/^(\+?992)?[5][5]\d{7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"tk-TM":/^(\+993|993|8)\d{8}$/,"uk-UA":/^(\+?38)?0(50|6[36-8]|7[357]|9[1-9])\d{7}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^((\+?84)|0)((3([2-9]))|(5([25689]))|(7([0|6-9]))|(8([1-9]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?(1[3-9]|9[28])\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/,"dz-BT":/^(\+?975|0)?(17|16|77|02)\d{6}$/,"ar-YE":/^(((\+|00)9677|0?7)[0137]\d{7}|((\+|00)967|0)[1-7]\d{6})$/,"ar-EH":/^(\+?212|0)[\s\-]?(5288|5289)[\s\-]?\d{5}$/,"fa-AF":/^(\+93|0)?(2{1}[0-8]{1}|[3-5]{1}[0-4]{1})(\d{7})$/,"mk-MK":/^(\+?389|0)?((?:2[2-9]\d{6}|(?:3[1-4]|4[2-8])\d{6}|500\d{5}|5[2-9]\d{6}|7[0-9][2-9]\d{5}|8[1-9]\d{6}|800\d{5}|8009\d{4}))$/};d["en-CA"]=d["en-US"],d["fr-CA"]=d["en-CA"],d["fr-BE"]=d["nl-BE"],d["zh-HK"]=d["en-HK"],d["zh-MO"]=d["en-MO"],d["ga-IE"]=d["en-IE"],d["fr-CH"]=d["de-CH"],d["it-CH"]=d["fr-CH"];function p(_,S,y){if((0,i.default)(_),y&&y.strictMode&&!_.startsWith("+"))return!1;if(Array.isArray(S))return S.some(function(P){if(d.hasOwnProperty(P)){var k=d[P];if(k.test(_))return!0}return!1});if(S in d)return d[S].test(_);if(!S||S==="any"){for(var l in d)if(d.hasOwnProperty(l)){var C=d[l];if(C.test(_))return!0}return!1}throw new Error("Invalid locale '".concat(S,"'"))}return Zf.locales=Object.keys(d),Zf}var Fy={exports:{}},yb;function FR(){return yb||(yb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^(0x)[0-9a-f]{40}$/i;function S(y){return(0,d.default)(y),_.test(y)}i.exports=n.default,i.exports.default=n.default}(Fy,Fy.exports)),Fy.exports}var Uy={exports:{}},_b;function UR(){return _b||(_b=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var d=_(ms()),p=_(Dt());function _(C){return C&&C.__esModule?C:{default:C}}function S(C){var P="\\d{".concat(C.digits_after_decimal[0],"}");C.digits_after_decimal.forEach(function(pe,me){me!==0&&(P="".concat(P,"|\\d{").concat(pe,"}"))});var k="(".concat(C.symbol.replace(/\W/,function(pe){return"\\".concat(pe)}),")").concat(C.require_symbol?"":"?"),O="-?",L="[1-9]\\d*",F="[1-9]\\d{0,2}(\\".concat(C.thousands_separator,"\\d{3})*"),G=["0",L,F],ee="(".concat(G.join("|"),")?"),X="(\\".concat(C.decimal_separator,"(").concat(P,"))").concat(C.require_decimal?"":"?"),W=ee+(C.allow_decimal||C.require_decimal?X:"");return C.allow_negatives&&!C.parens_for_negatives&&(C.negative_sign_after_digits?W+=O:C.negative_sign_before_digits&&(W=O+W)),C.allow_negative_sign_placeholder?W="( (?!\\-))?".concat(W):C.allow_space_after_symbol?W=" ?".concat(W):C.allow_space_after_digits&&(W+="( (?!$))?"),C.symbol_after_digits?W+=k:W=k+W,C.allow_negatives&&(C.parens_for_negatives?W="(\\(".concat(W,"\\)|").concat(W,")"):C.negative_sign_before_digits||C.negative_sign_after_digits||(W=O+W)),new RegExp("^(?!-? )(?=.*\\d)".concat(W,"$"))}var y={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_decimal:!0,require_decimal:!1,digits_after_decimal:[2],allow_space_after_digits:!1};function l(C,P){return(0,p.default)(C),P=(0,d.default)(P,y),S(P).test(C)}i.exports=n.default,i.exports.default=n.default}(Uy,Uy.exports)),Uy.exports}var Vy={exports:{}},vb;function VR(){return vb||(vb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=y;var d=p(Dt());function p(l){return l&&l.__esModule?l:{default:l}}var _=/^(bc1|tb1|bc1p|tb1p)[ac-hj-np-z02-9]{39,58}$/,S=/^(1|2|3|m)[A-HJ-NP-Za-km-z1-9]{25,39}$/;function y(l){return(0,d.default)(l),_.test(l)||S.test(l)}i.exports=n.default,i.exports.default=n.default}(Vy,Vy.exports)),Vy.exports}var qf={},xb;function $R(){if(xb)return qf;xb=1,Object.defineProperty(qf,"__esModule",{value:!0}),qf.isFreightContainerID=void 0,qf.isISO6346=_;var i=n(Dt());function n(S){return S&&S.__esModule?S:{default:S}}var d=/^[A-Z]{3}(U[0-9]{7})|([J,Z][0-9]{6,7})$/,p=/^[0-9]$/;function _(S){if((0,i.default)(S),S=S.toUpperCase(),!d.test(S))return!1;if(S.length===11){for(var y=0,l=0;l<S.length-1;l++)if(p.test(S[l]))y+=S[l]*Math.pow(2,l);else{var C=void 0,P=S.charCodeAt(l)-55;P<11?C=P:P>=11&&P<=20?C=12+P%11:P>=21&&P<=30?C=23+P%21:C=34+P%31,y+=C*Math.pow(2,l)}var k=y%11;return k===10&&(k=0),Number(S[S.length-1])===k}return!0}return qf.isFreightContainerID=_,qf}var $y={exports:{}},bb;function ZR(){return bb||(bb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=new Set(["aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu"]);function S(y){return(0,d.default)(y),_.has(y)}i.exports=n.default,i.exports.default=n.default}($y,$y.exports)),$y.exports}var Zy={exports:{}},wb;function qR(){return wb||(wb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var d=p(Dt());function p(C){return C&&C.__esModule?C:{default:C}}var _=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,S=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,y=function(P){var k=P.match(/^(\d{4})-?(\d{3})([ T]{1}\.*|$)/);if(k){var O=Number(k[1]),L=Number(k[2]);return O%4===0&&O%100!==0||O%400===0?L<=366:L<=365}var F=P.match(/(\d{4})-?(\d{0,2})-?(\d*)/).map(Number),G=F[1],ee=F[2],X=F[3],W=ee&&"0".concat(ee).slice(-2),pe=X&&"0".concat(X).slice(-2),me=new Date("".concat(G,"-").concat(W||"01","-").concat(pe||"01"));return ee&&X?me.getUTCFullYear()===G&&me.getUTCMonth()+1===ee&&me.getUTCDate()===X:!0};function l(C){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,d.default)(C);var k=P.strictSeparator?S.test(C):_.test(C);return k&&P.strict?y(C):k}i.exports=n.default,i.exports.default=n.default}(Zy,Zy.exports)),Zy.exports}var qy={exports:{}},Sb;function GR(){return Sb||(Sb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=W;var d=p(Dt());function p(pe){return pe&&pe.__esModule?pe:{default:pe}}var _=/[0-9]{4}/,S=/(0[1-9]|1[0-2])/,y=/([12]\d|0[1-9]|3[01])/,l=/([01][0-9]|2[0-3])/,C=/[0-5][0-9]/,P=/([0-5][0-9]|60)/,k=/(\.[0-9]+)?/,O=new RegExp("[-+]".concat(l.source,":").concat(C.source)),L=new RegExp("([zZ]|".concat(O.source,")")),F=new RegExp("".concat(l.source,":").concat(C.source,":").concat(P.source).concat(k.source)),G=new RegExp("".concat(_.source,"-").concat(S.source,"-").concat(y.source)),ee=new RegExp("".concat(F.source).concat(L.source)),X=new RegExp("^".concat(G.source,"[ tT]").concat(ee.source,"$"));function W(pe){return(0,d.default)(pe),X.test(pe)}i.exports=n.default,i.exports.default=n.default}(qy,qy.exports)),qy.exports}var Gf={},Tb;function HR(){if(Tb)return Gf;Tb=1,Object.defineProperty(Gf,"__esModule",{value:!0}),Gf.ScriptCodes=void 0,Gf.default=p;var i=n(Dt());function n(_){return _&&_.__esModule?_:{default:_}}var d=new Set(["Adlm","Afak","Aghb","Ahom","Arab","Aran","Armi","Armn","Avst","Bali","Bamu","Bass","Batk","Beng","Bhks","Blis","Bopo","Brah","Brai","Bugi","Buhd","Cakm","Cans","Cari","Cham","Cher","Chis","Chrs","Cirt","Copt","Cpmn","Cprt","Cyrl","Cyrs","Deva","Diak","Dogr","Dsrt","Dupl","Egyd","Egyh","Egyp","Elba","Elym","Ethi","Gara","Geok","Geor","Glag","Gong","Gonm","Goth","Gran","Grek","Gujr","Gukh","Guru","Hanb","Hang","Hani","Hano","Hans","Hant","Hatr","Hebr","Hira","Hluw","Hmng","Hmnp","Hrkt","Hung","Inds","Ital","Jamo","Java","Jpan","Jurc","Kali","Kana","Kawi","Khar","Khmr","Khoj","Kitl","Kits","Knda","Kore","Kpel","Krai","Kthi","Lana","Laoo","Latf","Latg","Latn","Leke","Lepc","Limb","Lina","Linb","Lisu","Loma","Lyci","Lydi","Mahj","Maka","Mand","Mani","Marc","Maya","Medf","Mend","Merc","Mero","Mlym","Modi","Mong","Moon","Mroo","Mtei","Mult","Mymr","Nagm","Nand","Narb","Nbat","Newa","Nkdb","Nkgb","Nkoo","Nshu","Ogam","Olck","Onao","Orkh","Orya","Osge","Osma","Ougr","Palm","Pauc","Pcun","Pelm","Perm","Phag","Phli","Phlp","Phlv","Phnx","Plrd","Piqd","Prti","Psin","Qaaa","Qaab","Qaac","Qaad","Qaae","Qaaf","Qaag","Qaah","Qaai","Qaaj","Qaak","Qaal","Qaam","Qaan","Qaao","Qaap","Qaaq","Qaar","Qaas","Qaat","Qaau","Qaav","Qaaw","Qaax","Qaay","Qaaz","Qaba","Qabb","Qabc","Qabd","Qabe","Qabf","Qabg","Qabh","Qabi","Qabj","Qabk","Qabl","Qabm","Qabn","Qabo","Qabp","Qabq","Qabr","Qabs","Qabt","Qabu","Qabv","Qabw","Qabx","Ranj","Rjng","Rohg","Roro","Runr","Samr","Sara","Sarb","Saur","Sgnw","Shaw","Shrd","Shui","Sidd","Sidt","Sind","Sinh","Sogd","Sogo","Sora","Soyo","Sund","Sunu","Sylo","Syrc","Syre","Syrj","Syrn","Tagb","Takr","Tale","Talu","Taml","Tang","Tavt","Tayo","Telu","Teng","Tfng","Tglg","Thaa","Thai","Tibt","Tirh","Tnsa","Todr","Tols","Toto","Tutg","Ugar","Vaii","Visp","Vith","Wara","Wcho","Wole","Xpeo","Xsux","Yezi","Yiii","Zanb","Zinh","Zmth","Zsye","Zsym","Zxxx","Zyyy","Zzzz"]);function p(_){return(0,i.default)(_),d.has(_)}return Gf.ScriptCodes=d,Gf}var Gy={exports:{}},Mb;function WR(){return Mb||(Mb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=new Set(["AFG","ALA","ALB","DZA","ASM","AND","AGO","AIA","ATA","ATG","ARG","ARM","ABW","AUS","AUT","AZE","BHS","BHR","BGD","BRB","BLR","BEL","BLZ","BEN","BMU","BTN","BOL","BES","BIH","BWA","BVT","BRA","IOT","BRN","BGR","BFA","BDI","KHM","CMR","CAN","CPV","CYM","CAF","TCD","CHL","CHN","CXR","CCK","COL","COM","COG","COD","COK","CRI","CIV","HRV","CUB","CUW","CYP","CZE","DNK","DJI","DMA","DOM","ECU","EGY","SLV","GNQ","ERI","EST","ETH","FLK","FRO","FJI","FIN","FRA","GUF","PYF","ATF","GAB","GMB","GEO","DEU","GHA","GIB","GRC","GRL","GRD","GLP","GUM","GTM","GGY","GIN","GNB","GUY","HTI","HMD","VAT","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","IMN","ISR","ITA","JAM","JPN","JEY","JOR","KAZ","KEN","KIR","PRK","KOR","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LIE","LTU","LUX","MAC","MKD","MDG","MWI","MYS","MDV","MLI","MLT","MHL","MTQ","MRT","MUS","MYT","MEX","FSM","MDA","MCO","MNG","MNE","MSR","MAR","MOZ","MMR","NAM","NRU","NPL","NLD","NCL","NZL","NIC","NER","NGA","NIU","NFK","MNP","NOR","OMN","PAK","PLW","PSE","PAN","PNG","PRY","PER","PHL","PCN","POL","PRT","PRI","QAT","REU","ROU","RUS","RWA","BLM","SHN","KNA","LCA","MAF","SPM","VCT","WSM","SMR","STP","SAU","SEN","SRB","SYC","SLE","SGP","SXM","SVK","SVN","SLB","SOM","ZAF","SGS","SSD","ESP","LKA","SDN","SUR","SJM","SWZ","SWE","CHE","SYR","TWN","TJK","TZA","THA","TLS","TGO","TKL","TON","TTO","TUN","TUR","TKM","TCA","TUV","UGA","UKR","ARE","GBR","USA","UMI","URY","UZB","VUT","VEN","VNM","VGB","VIR","WLF","ESH","YEM","ZMB","ZWE"]);function S(y){return(0,d.default)(y),_.has(y.toUpperCase())}i.exports=n.default,i.exports.default=n.default}(Gy,Gy.exports)),Gy.exports}var Hy={exports:{}},Ab;function KR(){return Ab||(Ab=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=new Set(["004","008","010","012","016","020","024","028","031","032","036","040","044","048","050","051","052","056","060","064","068","070","072","074","076","084","086","090","092","096","100","104","108","112","116","120","124","132","136","140","144","148","152","156","158","162","166","170","174","175","178","180","184","188","191","192","196","203","204","208","212","214","218","222","226","231","232","233","234","238","239","242","246","248","250","254","258","260","262","266","268","270","275","276","288","292","296","300","304","308","312","316","320","324","328","332","334","336","340","344","348","352","356","360","364","368","372","376","380","384","388","392","398","400","404","408","410","414","417","418","422","426","428","430","434","438","440","442","446","450","454","458","462","466","470","474","478","480","484","492","496","498","499","500","504","508","512","516","520","524","528","531","533","534","535","540","548","554","558","562","566","570","574","578","580","581","583","584","585","586","591","598","600","604","608","612","616","620","624","626","630","634","638","642","643","646","652","654","659","660","662","663","666","670","674","678","682","686","688","690","694","702","703","704","705","706","710","716","724","728","729","732","740","744","748","752","756","760","762","764","768","772","776","780","784","788","792","795","796","798","800","804","807","818","826","831","832","833","834","840","850","854","858","860","862","876","882","887","894"]);function S(y){return(0,d.default)(y),_.has(y)}i.exports=n.default,i.exports.default=n.default}(Hy,Hy.exports)),Hy.exports}var Hf={},Cb;function YR(){if(Cb)return Hf;Cb=1,Object.defineProperty(Hf,"__esModule",{value:!0}),Hf.CurrencyCodes=void 0,Hf.default=p;var i=n(Dt());function n(_){return _&&_.__esModule?_:{default:_}}var d=new Set(["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRU","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLE","SLL","SOS","SRD","SSP","STN","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UYW","UZS","VED","VES","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"]);function p(_){return(0,i.default)(_),d.has(_.toUpperCase())}return Hf.CurrencyCodes=d,Hf}var Wy={exports:{}},Eb;function XR(){return Eb||(Eb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=C;var d=_(Dt()),p=_(ms());function _(P){return P&&P.__esModule?P:{default:P}}var S=/^[A-Z2-7]+=*$/,y=/^[A-HJKMNP-TV-Z0-9]+$/,l={crockford:!1};function C(P,k){if((0,d.default)(P),k=(0,p.default)(k,l),k.crockford)return y.test(P);var O=P.length;return!!(O%8===0&&S.test(P))}i.exports=n.default,i.exports.default=n.default}(Wy,Wy.exports)),Wy.exports}var Ky={exports:{}},Pb;function QR(){return Pb||(Pb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^[A-HJ-NP-Za-km-z1-9]*$/;function S(y){return(0,d.default)(y),!!_.test(y)}i.exports=n.default,i.exports.default=n.default}(Ky,Ky.exports)),Ky.exports}var Yy={exports:{}},Rb;function JR(){return Rb||(Rb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var d=p(Dt());function p(C){return C&&C.__esModule?C:{default:C}}var _=/^[a-z]+\/[a-z0-9\-\+\._]+$/i,S=/^[a-z\-]+=[a-z0-9\-]+$/i,y=/^[a-z0-9!\$&'\(\)\*\+,;=\-\._~:@\/\?%\s]*$/i;function l(C){(0,d.default)(C);var P=C.split(",");if(P.length<2)return!1;var k=P.shift().trim().split(";"),O=k.shift();if(O.slice(0,5)!=="data:")return!1;var L=O.slice(5);if(L!==""&&!_.test(L))return!1;for(var F=0;F<k.length;F++)if(!(F===k.length-1&&k[F].toLowerCase()==="base64")&&!S.test(k[F]))return!1;for(var G=0;G<P.length;G++)if(!y.test(P[G]))return!1;return!0}i.exports=n.default,i.exports.default=n.default}(Yy,Yy.exports)),Yy.exports}var Xy={exports:{}},Ib;function e3(){return Ib||(Ib=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/(?:^magnet:\?|[^?&]&)xt(?:\.1)?=urn:(?:(?:aich|bitprint|btih|ed2k|ed2khash|kzhash|md5|sha1|tree:tiger):[a-z0-9]{32}(?:[a-z0-9]{8})?|btmh:1220[a-z0-9]{64})(?:$|&)/i;function S(y){return(0,d.default)(y),y.indexOf("magnet:?")!==0?!1:_.test(y)}i.exports=n.default,i.exports.default=n.default}(Xy,Xy.exports)),Xy.exports}var Qy={exports:{}},Jy={exports:{}},e_={exports:{}},Db;function LS(){return Db||(Db=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var d=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){if((0,d.default)(S),y){var l=new RegExp("[".concat(y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+$"),"g");return S.replace(l,"")}for(var C=S.length-1;/\s/.test(S.charAt(C));)C-=1;return S.slice(0,C+1)}i.exports=n.default,i.exports.default=n.default}(e_,e_.exports)),e_.exports}var t_={exports:{}},zb;function kS(){return zb||(zb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var d=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){(0,d.default)(S);var l=y?new RegExp("^[".concat(y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+"),"g"):/^\s+/g;return S.replace(l,"")}i.exports=n.default,i.exports.default=n.default}(t_,t_.exports)),t_.exports}var Lb;function BS(){return Lb||(Lb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=_(LS()),p=_(kS());function _(y){return y&&y.__esModule?y:{default:y}}function S(y,l){return(0,d.default)((0,p.default)(y,l),l)}i.exports=n.default,i.exports.default=n.default}(Jy,Jy.exports)),Jy.exports}var kb;function t3(){return kb||(kb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=G;var d=S(BS()),p=S(MS()),_=S(Dt());function S(ee){return ee&&ee.__esModule?ee:{default:ee}}function y(ee,X){return P(ee)||C(ee,X)||O(ee,X)||l()}function l(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C(ee,X){var W=ee==null?null:typeof Symbol<"u"&&ee[Symbol.iterator]||ee["@@iterator"];if(W!=null){var pe,me,_e,Se,ke=[],nt=!0,Ke=!1;try{if(_e=(W=W.call(ee)).next,X!==0)for(;!(nt=(pe=_e.call(W)).done)&&(ke.push(pe.value),ke.length!==X);nt=!0);}catch(Ye){Ke=!0,me=Ye}finally{try{if(!nt&&W.return!=null&&(Se=W.return(),Object(Se)!==Se))return}finally{if(Ke)throw me}}return ke}}function P(ee){if(Array.isArray(ee))return ee}function k(ee,X){var W=typeof Symbol<"u"&&ee[Symbol.iterator]||ee["@@iterator"];if(!W){if(Array.isArray(ee)||(W=O(ee))||X){W&&(ee=W);var pe=0,me=function(){};return{s:me,n:function(){return pe>=ee.length?{done:!0}:{done:!1,value:ee[pe++]}},e:function(Ke){throw Ke},f:me}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _e,Se=!0,ke=!1;return{s:function(){W=W.call(ee)},n:function(){var Ke=W.next();return Se=Ke.done,Ke},e:function(Ke){ke=!0,_e=Ke},f:function(){try{Se||W.return==null||W.return()}finally{if(ke)throw _e}}}}function O(ee,X){if(ee){if(typeof ee=="string")return L(ee,X);var W={}.toString.call(ee).slice(8,-1);return W==="Object"&&ee.constructor&&(W=ee.constructor.name),W==="Map"||W==="Set"?Array.from(ee):W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W)?L(ee,X):void 0}}function L(ee,X){(X==null||X>ee.length)&&(X=ee.length);for(var W=0,pe=Array(X);W<X;W++)pe[W]=ee[W];return pe}function F(ee){var X=new Set(["subject","body","cc","bcc"]),W={cc:"",bcc:""},pe=!1,me=ee.split("&");if(me.length>4)return!1;var _e=k(me),Se;try{for(_e.s();!(Se=_e.n()).done;){var ke=Se.value,nt=ke.split("="),Ke=y(nt,2),Ye=Ke[0],ht=Ke[1];if(Ye&&!X.has(Ye)){pe=!0;break}ht&&(Ye==="cc"||Ye==="bcc")&&(W[Ye]=ht),Ye&&X.delete(Ye)}}catch(kt){_e.e(kt)}finally{_e.f()}return pe?!1:W}function G(ee,X){if((0,_.default)(ee),ee.indexOf("mailto:")!==0)return!1;var W=ee.replace("mailto:","").split("?"),pe=y(W,2),me=pe[0],_e=pe[1],Se=_e===void 0?"":_e;if(!me&&!Se)return!0;var ke=F(Se);return ke?"".concat(me,",").concat(ke.cc,",").concat(ke.bcc).split(",").every(function(nt){return nt=(0,d.default)(nt," "),nt?(0,p.default)(nt,X):!0}):!1}i.exports=n.default,i.exports.default=n.default}(Qy,Qy.exports)),Qy.exports}var r_={exports:{}},Bb;function r3(){return Bb||(Bb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var d=p(Dt());function p(C){return C&&C.__esModule?C:{default:C}}var _=/^(application|audio|font|image|message|model|multipart|text|video)\/[a-zA-Z0-9\.\-\+_]{1,100}$/i,S=/^text\/[a-zA-Z0-9\.\-\+]{1,100};\s?charset=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?$/i,y=/^multipart\/[a-zA-Z0-9\.\-\+]{1,100}(;\s?(boundary|charset)=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?){0,2}$/i;function l(C){return(0,d.default)(C),_.test(C)||S.test(C)||y.test(C)}i.exports=n.default,i.exports.default=n.default}(r_,r_.exports)),r_.exports}var i_={exports:{}},Ob;function i3(){return Ob||(Ob=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=k;var d=_(Dt()),p=_(ms());function _(O){return O&&O.__esModule?O:{default:O}}var S=/^\(?[+-]?(90(\.0+)?|[1-8]?\d(\.\d+)?)$/,y=/^\s?[+-]?(180(\.0+)?|1[0-7]\d(\.\d+)?|\d{1,2}(\.\d+)?)\)?$/,l=/^(([1-8]?\d)\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|90\D+0\D+0)\D+[NSns]?$/i,C=/^\s*([1-7]?\d{1,2}\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|180\D+0\D+0)\D+[EWew]?$/i,P={checkDMS:!1};function k(O,L){if((0,d.default)(O),L=(0,p.default)(L,P),!O.includes(","))return!1;var F=O.split(",");return F[0].startsWith("(")&&!F[1].endsWith(")")||F[1].endsWith(")")&&!F[0].startsWith("(")?!1:L.checkDMS?l.test(F[0])&&C.test(F[1]):S.test(F[0])&&y.test(F[1])}i.exports=n.default,i.exports.default=n.default}(i_,i_.exports)),i_.exports}var Wf={},jb;function n3(){if(jb)return Wf;jb=1,Object.defineProperty(Wf,"__esModule",{value:!0}),Wf.default=l,Wf.locales=void 0;var i=n(Dt());function n(C){return C&&C.__esModule?C:{default:C}}var d=/^\d{3}$/,p=/^\d{4}$/,_=/^\d{5}$/,S=/^\d{6}$/,y={AD:/^AD\d{3}$/,AT:p,AU:p,AZ:/^AZ\d{4}$/,BA:/^([7-8]\d{4}$)/,BE:p,BG:p,BR:/^\d{5}-?\d{3}$/,BY:/^2[1-4]\d{4}$/,CA:/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][\s\-]?\d[ABCEGHJ-NPRSTV-Z]\d$/i,CH:p,CN:/^(0[1-7]|1[012356]|2[0-7]|3[0-6]|4[0-7]|5[1-7]|6[1-7]|7[1-5]|8[1345]|9[09])\d{4}$/,CO:/^(05|08|11|13|15|17|18|19|20|23|25|27|41|44|47|50|52|54|63|66|68|70|73|76|81|85|86|88|91|94|95|97|99)(\d{4})$/,CZ:/^\d{3}\s?\d{2}$/,DE:_,DK:p,DO:_,DZ:_,EE:_,ES:/^(5[0-2]{1}|[0-4]{1}\d{1})\d{3}$/,FI:_,FR:/^\d{2}\s?\d{3}$/,GB:/^(gir\s?0aa|[a-z]{1,2}\d[\da-z]?\s?(\d[a-z]{2})?)$/i,GR:/^\d{3}\s?\d{2}$/,HR:/^([1-5]\d{4}$)/,HT:/^HT\d{4}$/,HU:p,ID:_,IE:/^(?!.*(?:o))[A-Za-z]\d[\dw]\s\w{4}$/i,IL:/^(\d{5}|\d{7})$/,IN:/^((?!10|29|35|54|55|65|66|86|87|88|89)[1-9][0-9]{5})$/,IR:/^(?!(\d)\1{3})[13-9]{4}[1346-9][013-9]{5}$/,IS:d,IT:_,JP:/^\d{3}\-\d{4}$/,KE:_,KR:/^(\d{5}|\d{6})$/,LI:/^(948[5-9]|949[0-7])$/,LT:/^LT\-\d{5}$/,LU:p,LV:/^LV\-\d{4}$/,LK:_,MG:d,MX:_,MT:/^[A-Za-z]{3}\s{0,1}\d{4}$/,MY:_,NL:/^[1-9]\d{3}\s?(?!sa|sd|ss)[a-z]{2}$/i,NO:p,NP:/^(10|21|22|32|33|34|44|45|56|57)\d{3}$|^(977)$/i,NZ:p,PL:/^\d{2}\-\d{3}$/,PR:/^00[679]\d{2}([ -]\d{4})?$/,PT:/^\d{4}\-\d{3}?$/,RO:S,RU:S,SA:_,SE:/^[1-9]\d{2}\s?\d{2}$/,SG:S,SI:p,SK:/^\d{3}\s?\d{2}$/,TH:_,TN:p,TW:/^\d{3}(\d{2})?$/,UA:_,US:/^\d{5}(-\d{4})?$/,ZA:p,ZM:_};Wf.locales=Object.keys(y);function l(C,P){if((0,i.default)(C),P in y)return y[P].test(C);if(P==="any"){for(var k in y)if(y.hasOwnProperty(k)){var O=y[k];if(O.test(C))return!0}return!1}throw new Error("Invalid locale '".concat(P,"'"))}return Wf}var n_={exports:{}},Nb;function a3(){return Nb||(Nb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var d=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S){return(0,d.default)(S),S.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;")}i.exports=n.default,i.exports.default=n.default}(n_,n_.exports)),n_.exports}var a_={exports:{}},Fb;function s3(){return Fb||(Fb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var d=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S){return(0,d.default)(S),S.replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#x2F;/g,"/").replace(/&#x5C;/g,"\\").replace(/&#96;/g,"`").replace(/&amp;/g,"&")}i.exports=n.default,i.exports.default=n.default}(a_,a_.exports)),a_.exports}var s_={exports:{}},o_={exports:{}},Ub;function OS(){return Ub||(Ub=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var d=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){return(0,d.default)(S),S.replace(new RegExp("[".concat(y,"]+"),"g"),"")}i.exports=n.default,i.exports.default=n.default}(o_,o_.exports)),o_.exports}var Vb;function o3(){return Vb||(Vb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=_(Dt()),p=_(OS());function _(y){return y&&y.__esModule?y:{default:y}}function S(y,l){(0,d.default)(y);var C=l?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return(0,p.default)(y,C)}i.exports=n.default,i.exports.default=n.default}(s_,s_.exports)),s_.exports}var l_={exports:{}},$b;function l3(){return $b||($b=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var d=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){return(0,d.default)(S),S.replace(new RegExp("[^".concat(y,"]+"),"g"),"")}i.exports=n.default,i.exports.default=n.default}(l_,l_.exports)),l_.exports}var u_={exports:{}},Zb;function u3(){return Zb||(Zb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var d=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){(0,d.default)(S);for(var l=S.length-1;l>=0;l--)if(y.indexOf(S[l])===-1)return!1;return!0}i.exports=n.default,i.exports.default=n.default}(u_,u_.exports)),u_.exports}var c_={exports:{}},qb;function c3(){return qb||(qb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=k;var d=p(ms());function p(O){return O&&O.__esModule?O:{default:O}}var _={all_lowercase:!0,gmail_lowercase:!0,gmail_remove_dots:!0,gmail_remove_subaddress:!0,gmail_convert_googlemaildotcom:!0,outlookdotcom_lowercase:!0,outlookdotcom_remove_subaddress:!0,yahoo_lowercase:!0,yahoo_remove_subaddress:!0,yandex_lowercase:!0,yandex_convert_yandexru:!0,icloud_lowercase:!0,icloud_remove_subaddress:!0},S=["icloud.com","me.com"],y=["hotmail.at","hotmail.be","hotmail.ca","hotmail.cl","hotmail.co.il","hotmail.co.nz","hotmail.co.th","hotmail.co.uk","hotmail.com","hotmail.com.ar","hotmail.com.au","hotmail.com.br","hotmail.com.gr","hotmail.com.mx","hotmail.com.pe","hotmail.com.tr","hotmail.com.vn","hotmail.cz","hotmail.de","hotmail.dk","hotmail.es","hotmail.fr","hotmail.hu","hotmail.id","hotmail.ie","hotmail.in","hotmail.it","hotmail.jp","hotmail.kr","hotmail.lv","hotmail.my","hotmail.ph","hotmail.pt","hotmail.sa","hotmail.sg","hotmail.sk","live.be","live.co.uk","live.com","live.com.ar","live.com.mx","live.de","live.es","live.eu","live.fr","live.it","live.nl","msn.com","outlook.at","outlook.be","outlook.cl","outlook.co.il","outlook.co.nz","outlook.co.th","outlook.com","outlook.com.ar","outlook.com.au","outlook.com.br","outlook.com.gr","outlook.com.pe","outlook.com.tr","outlook.com.vn","outlook.cz","outlook.de","outlook.dk","outlook.es","outlook.fr","outlook.hu","outlook.id","outlook.ie","outlook.in","outlook.it","outlook.jp","outlook.kr","outlook.lv","outlook.my","outlook.ph","outlook.pt","outlook.sa","outlook.sg","outlook.sk","passport.com"],l=["rocketmail.com","yahoo.ca","yahoo.co.uk","yahoo.com","yahoo.de","yahoo.fr","yahoo.in","yahoo.it","ymail.com"],C=["yandex.ru","yandex.ua","yandex.kz","yandex.com","yandex.by","ya.ru"];function P(O){return O.length>1?O:""}function k(O,L){L=(0,d.default)(L,_);var F=O.split("@"),G=F.pop(),ee=F.join("@"),X=[ee,G];if(X[1]=X[1].toLowerCase(),X[1]==="gmail.com"||X[1]==="googlemail.com"){if(L.gmail_remove_subaddress&&(X[0]=X[0].split("+")[0]),L.gmail_remove_dots&&(X[0]=X[0].replace(/\.+/g,P)),!X[0].length)return!1;(L.all_lowercase||L.gmail_lowercase)&&(X[0]=X[0].toLowerCase()),X[1]=L.gmail_convert_googlemaildotcom?"gmail.com":X[1]}else if(S.indexOf(X[1])>=0){if(L.icloud_remove_subaddress&&(X[0]=X[0].split("+")[0]),!X[0].length)return!1;(L.all_lowercase||L.icloud_lowercase)&&(X[0]=X[0].toLowerCase())}else if(y.indexOf(X[1])>=0){if(L.outlookdotcom_remove_subaddress&&(X[0]=X[0].split("+")[0]),!X[0].length)return!1;(L.all_lowercase||L.outlookdotcom_lowercase)&&(X[0]=X[0].toLowerCase())}else if(l.indexOf(X[1])>=0){if(L.yahoo_remove_subaddress){var W=X[0].split("-");X[0]=W.length>1?W.slice(0,-1).join("-"):W[0]}if(!X[0].length)return!1;(L.all_lowercase||L.yahoo_lowercase)&&(X[0]=X[0].toLowerCase())}else C.indexOf(X[1])>=0?((L.all_lowercase||L.yandex_lowercase)&&(X[0]=X[0].toLowerCase()),X[1]=L.yandex_convert_yandexru?"yandex.ru":X[1]):L.all_lowercase&&(X[0]=X[0].toLowerCase());return X.join("@")}i.exports=n.default,i.exports.default=n.default}(c_,c_.exports)),c_.exports}var h_={exports:{}},Gb;function h3(){return Gb||(Gb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^[^\s-_](?!.*?[-_]{2,})[a-z0-9-\\][^\s]*[^-_\s]$/;function S(y){return(0,d.default)(y),_.test(y)}i.exports=n.default,i.exports.default=n.default}(h_,h_.exports)),h_.exports}var d_={exports:{}},Hb;function d3(){return Hb||(Hb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var d=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _={"cs-CZ":function(l){return/^(([ABCDEFHIJKLMNPRSTUVXYZ]|[0-9])-?){5,8}$/.test(l)},"de-DE":function(l){return/^((A|AA|AB|AC|AE|AH|AK|AM|AN|A|AP|AS|AT|AU|AW|AZ|B|BA|BB|BC|BE|BF|BH|BI|BK|BL|BM|BN|BO|B|BS|BT|BZ|C|CA|CB|CE|CO|CR|CW|D|DA|DD|DE|DH|DI|DL|DM|DN|DO|DU|DW|DZ|E|EA|EB|ED|EE|EF|EG|EH|EI|EL|EM|EN|ER|ES|EU|EW|F|FB|FD|FF|FG|FI|FL|FN|FO|FR|FS|FT|F|FW|FZ|G|GA|GC|GD|GE|GF|GG|GI|GK|GL|GM|GN|G|GP|GR|GS|GT|G|GV|GW|GZ|H|HA|HB|HC|HD|HE|HF|HG|HH|HI|HK|HL|HM|HN|HO|HP|HR|HS|HU|HV|HX|HY|HZ|IK|IL|IN|IZ|J|JE|JL|K|KA|KB|KC|KE|KF|KG|KH|KI|KK|KL|KM|KN|KO|KR|KS|KT|KU|KW|KY|L|LA|LB|LC|LD|LF|LG|LH|LI|LL|LM|LN|L|LP|LR|LU|M|MA|MB|MC|MD|ME|MG|MH|MI|MK|ML|MM|MN|MO|MQ|MR|MS|M|MW|MY|MZ|N|NB|ND|NE|NF|NH|NI|NK|NM|N|NP|NR|NT|NU|NW|NY|NZ|OA|OB|OC|OD|OE|OF|OG|OH|OK|OL|OP|OS|OZ|P|PA|PB|PE|PF|PI|PL|PM|PN|PR|PS|PW|PZ|R|RA|RC|RD|RE|RG|RH|RI|RL|RM|RN|RO|RP|RS|RT|RU|RV|RW|RZ|S|SB|SC|SE|SG|SI|SK|SL|SM|SN|SO|SP|SR|ST|SU|SW|SY|SZ|TE|TF|TG|TO|TP|TR|TS|TT|T|B|UE|UH|UL|UM|UN|V|VB|VG|VK|VR|VS|W|WA|WB|WE|WF|WI|WK|WL|WM|WN|WO|WR|WS|WT|W|WW|WZ|Z|ZE|ZI|ZP|ZR|ZW|ZZ)[- ]?[A-Z]{1,2}[- ]?\d{1,4}|(ABG|ABI|AIB|AIC|ALF|ALZ|ANA|ANG|ANK|APD|ARN|ART|ASL|ASZ|AUR|AZE|BAD|BAR|BBG|BCH|BED|BER|BGD|BGL|BID|BIN|BIR|BIT|BIW|BKS|BLB|BLK|BNA|BOG|BOH|BOR|BOT|BRA|BRB|BRG|BRK|BRL|BRV|BSB|BSK|BTF|BD|BUL|BR|BS|BZ|CAS|CHA|CLP|CLZ|COC|COE|CUX|DAH|DAN|DAU|DBR|DEG|DEL|DGF|DIL|DIN|DIZ|DKB|DLG|DON|DUD|DW|EBE|EBN|EBS|ECK|EIC|EIL|EIN|EIS|EMD|EMS|ERB|ERH|ERK|ERZ|ESB|ESW|FDB|FDS|FEU|FFB|FKB|FL|FOR|FRG|FRI|FRW|FTL|FS|GAN|GAP|GDB|GEL|GEO|GER|GHA|GHC|GLA|GMN|GNT|GOA|GOH|GRA|GRH|GRI|GRM|GRZ|GTH|GUB|GUN|GVM|HAB|HAL|HAM|HAS|HBN|HBS|HCH|HDH|HDL|HEB|HEF|HEI|HER|HET|HGN|HGW|HHM|HIG|HIP|HM|HOG|HOH|HOL|HOM|HOR|HS|HOT|HRO|HSK|HST|HVL|HWI|IGB|ILL|JL|KEH|KEL|KEM|KIB|KLE|KLZ|KN|KT|KZ|KRU|KN|KUS|KYF|LAN|LAU|LBS|LBZ|LDK|LDS|LEO|LER|LEV|LIB|LIF|LIP|LB|LOS|LRO|LSZ|LN|LUP|LWL|MAB|MAI|MAK|MAL|MED|MEG|MEI|MEK|MEL|MER|MET|MGH|MGN|MHL|MIL|MKK|MOD|MOL|MON|MOS|MSE|MSH|MSP|MST|MTK|MTL|MB|MR|MYK|MZG|NAB|NAI|NAU|NDH|NEA|NEB|NEC|NEN|NES|NEW|NMB|NMS|NOH|NOL|NOM|NOR|NVP|NWM|OAL|OBB|OBG|OCH|OHA|HR|OHV|OHZ|OPR|OSL|OVI|OVL|OVP|PAF|PAN|PAR|PCH|PEG|PIR|PL|PR|QFT|QLB|RDG|REG|REH|REI|RID|RIE|ROD|ROF|ROK|ROL|ROS|ROT|ROW|RSL|RD|RG|SAB|SAD|SAN|SAW|SBG|SBK|SCZ|SDH|SDL|SDT|SEB|SEE|SEF|SEL|SFB|SFT|SGH|SHA|SHG|SHK|SHL|SIG|SIM|SLE|SLF|SLK|SLN|SLS|SL|SLZ|SM|SOB|SOG|SOK|SM|SON|SPB|SPN|SRB|SRO|STA|STB|STD|STE|STL|SUL|SW|SWA|SZB|TBB|TDO|TET|TIR|TL|TUT|UEM|UER|UFF|USI|VAI|VEC|VER|VIB|VIE|VIT|VOH|WAF|WAK|WAN|WAR|WAT|WBS|WDA|WEL|WEN|WER|WES|WHV|WIL|WIS|WIT|WIZ|WLG|WMS|WND|WOB|WOH|WOL|WOR|WOS|WRN|WSF|WST|WSW|WTL|WTM|WUG|WM|WUN|WUR|WZL|ZEL|ZIG)[- ]?(([A-Z][- ]?\d{1,4})|([A-Z]{2}[- ]?\d{1,3})))[- ]?(E|H)?$/.test(l)},"de-LI":function(l){return/^FL[- ]?\d{1,5}[UZ]?$/.test(l)},"en-IN":function(l){return/^[A-Z]{2}[ -]?[0-9]{1,2}(?:[ -]?[A-Z])(?:[ -]?[A-Z]*)?[ -]?[0-9]{4}$/.test(l)},"en-SG":function(l){return/^[A-Z]{3}[ -]?[\d]{4}[ -]?[A-Z]{1}$/.test(l)},"es-AR":function(l){return/^(([A-Z]{2} ?[0-9]{3} ?[A-Z]{2})|([A-Z]{3} ?[0-9]{3}))$/.test(l)},"fi-FI":function(l){return/^(?=.{4,7})(([A-Z]{1,3}|[0-9]{1,3})[\s-]?([A-Z]{1,3}|[0-9]{1,5}))$/.test(l)},"hu-HU":function(l){return/^((((?!AAA)(([A-NPRSTVZWXY]{1})([A-PR-Z]{1})([A-HJ-NPR-Z]))|(A[ABC]I)|A[ABC]O|A[A-W]Q|BPI|BPO|UCO|UDO|XAO)-(?!000)\d{3})|(M\d{6})|((CK|DT|CD|HC|H[ABEFIKLMNPRSTVX]|MA|OT|R[A-Z]) \d{2}-\d{2})|(CD \d{3}-\d{3})|(C-(C|X) \d{4})|(X-(A|B|C) \d{4})|(([EPVZ]-\d{5}))|(S A[A-Z]{2} \d{2})|(SP \d{2}-\d{2}))$/.test(l)},"pt-BR":function(l){return/^[A-Z]{3}[ -]?[0-9][A-Z][0-9]{2}|[A-Z]{3}[ -]?[0-9]{4}$/.test(l)},"pt-PT":function(l){return/^([A-Z]{2}|[0-9]{2})[ -]?([A-Z]{2}|[0-9]{2})[ -]?([A-Z]{2}|[0-9]{2})$/.test(l)},"sq-AL":function(l){return/^[A-Z]{2}[- ]?((\d{3}[- ]?(([A-Z]{2})|T))|(R[- ]?\d{3}))$/.test(l)},"sv-SE":function(l){return/^[A-HJ-PR-UW-Z]{3} ?[\d]{2}[A-HJ-PR-UW-Z1-9]$|(^[A-Z ]{2,7}$)/.test(l.trim())},"en-PK":function(l){return/(^[A-Z]{2}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]{3}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]{4}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]((\s|-){0,1})[0-9]{4}((\s|-)[0-9]{2}){0,1}$)/.test(l.trim())}};function S(y,l){if((0,d.default)(y),l in _)return _[l](y);if(l==="any"){for(var C in _){var P=_[C];if(P(y))return!0}return!1}throw new Error("Invalid locale '".concat(l,"'"))}i.exports=n.default,i.exports.default=n.default}(d_,d_.exports)),d_.exports}var f_={exports:{}},Wb;function f3(){return Wb||(Wb=1,function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=F;var d=_(ms()),p=_(Dt());function _(G){return G&&G.__esModule?G:{default:G}}var S=/^[A-Z]$/,y=/^[a-z]$/,l=/^[0-9]$/,C=/^[-#!$@%^&*()_+|~=`{}\[\]:";'<>?,.\/\\ ]$/,P={minLength:8,minLowercase:1,minUppercase:1,minNumbers:1,minSymbols:1,returnScore:!1,pointsPerUnique:1,pointsPerRepeat:.5,pointsForContainingLower:10,pointsForContainingUpper:10,pointsForContainingNumber:10,pointsForContainingSymbol:10};function k(G){var ee={};return Array.from(G).forEach(function(X){var W=ee[X];W?ee[X]+=1:ee[X]=1}),ee}function O(G){var ee=k(G),X={length:G.length,uniqueChars:Object.keys(ee).length,uppercaseCount:0,lowercaseCount:0,numberCount:0,symbolCount:0};return Object.keys(ee).forEach(function(W){S.test(W)?X.uppercaseCount+=ee[W]:y.test(W)?X.lowercaseCount+=ee[W]:l.test(W)?X.numberCount+=ee[W]:C.test(W)&&(X.symbolCount+=ee[W])}),X}function L(G,ee){var X=0;return X+=G.uniqueChars*ee.pointsPerUnique,X+=(G.length-G.uniqueChars)*ee.pointsPerRepeat,G.lowercaseCount>0&&(X+=ee.pointsForContainingLower),G.uppercaseCount>0&&(X+=ee.pointsForContainingUpper),G.numberCount>0&&(X+=ee.pointsForContainingNumber),G.symbolCount>0&&(X+=ee.pointsForContainingSymbol),X}function F(G){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;(0,p.default)(G);var X=O(G);return ee=(0,d.default)(ee||{},P),ee.returnScore?L(X,ee):X.length>=ee.minLength&&X.lowercaseCount>=ee.minLowercase&&X.uppercaseCount>=ee.minUppercase&&X.numberCount>=ee.minNumbers&&X.symbolCount>=ee.minSymbols}i.exports=n.default,i.exports.default=n.default}(f_,f_.exports)),f_.exports}var Kf={},Kb;function p3(){if(Kb)return Kf;Kb=1;function i(O){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},i(O)}Object.defineProperty(Kf,"__esModule",{value:!0}),Kf.default=k,Kf.vatMatchers=void 0;var n=S(Dt()),d=_(zS());function p(O){if(typeof WeakMap!="function")return null;var L=new WeakMap,F=new WeakMap;return(p=function(ee){return ee?F:L})(O)}function _(O,L){if(O&&O.__esModule)return O;if(O===null||i(O)!="object"&&typeof O!="function")return{default:O};var F=p(L);if(F&&F.has(O))return F.get(O);var G={__proto__:null},ee=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var X in O)if(X!=="default"&&{}.hasOwnProperty.call(O,X)){var W=ee?Object.getOwnPropertyDescriptor(O,X):null;W&&(W.get||W.set)?Object.defineProperty(G,X,W):G[X]=O[X]}return G.default=O,F&&F.set(O,G),G}function S(O){return O&&O.__esModule?O:{default:O}}var y=function(L){var F=L.match(/^(AU)?(\d{11})$/);if(!F)return!1;var G=[10,1,3,5,7,9,11,13,15,17,19];L=L.replace(/^AU/,"");for(var ee=(parseInt(L.slice(0,1),10)-1).toString()+L.slice(1),X=0,W=0;W<11;W++)X+=G[W]*ee.charAt(W);return X!==0&&X%89===0},l=function(L){var F=function(ee){var X=ee.pop(),W=[5,4,3,2,7,6,5,4],pe=(11-ee.reduce(function(me,_e,Se){return me+_e*W[Se]},0)%11)%11;return X===pe};return/^(CHE[- ]?)?(\d{9}|(\d{3}\.\d{3}\.\d{3})|(\d{3} \d{3} \d{3})) ?(TVA|MWST|IVA)?$/.test(L)&&F(L.match(/\d/g).map(function(G){return+G}))},C=function(L){var F=L.match(/^(PT)?(\d{9})$/);if(!F)return!1;var G=F[2],ee=11-d.reverseMultiplyAndSum(G.split("").slice(0,8).map(function(X){return parseInt(X,10)}),9)%11;return ee>9?parseInt(G[8],10)===0:ee===parseInt(G[8],10)},P=Kf.vatMatchers={AT:function(L){return/^(AT)?U\d{8}$/.test(L)},BE:function(L){return/^(BE)?\d{10}$/.test(L)},BG:function(L){return/^(BG)?\d{9,10}$/.test(L)},HR:function(L){return/^(HR)?\d{11}$/.test(L)},CY:function(L){return/^(CY)?\w{9}$/.test(L)},CZ:function(L){return/^(CZ)?\d{8,10}$/.test(L)},DK:function(L){return/^(DK)?\d{8}$/.test(L)},EE:function(L){return/^(EE)?\d{9}$/.test(L)},FI:function(L){return/^(FI)?\d{8}$/.test(L)},FR:function(L){return/^(FR)?\w{2}\d{9}$/.test(L)},DE:function(L){return/^(DE)?\d{9}$/.test(L)},EL:function(L){return/^(EL)?\d{9}$/.test(L)},HU:function(L){return/^(HU)?\d{8}$/.test(L)},IE:function(L){return/^(IE)?\d{7}\w{1}(W)?$/.test(L)},IT:function(L){return/^(IT)?\d{11}$/.test(L)},LV:function(L){return/^(LV)?\d{11}$/.test(L)},LT:function(L){return/^(LT)?\d{9,12}$/.test(L)},LU:function(L){return/^(LU)?\d{8}$/.test(L)},MT:function(L){return/^(MT)?\d{8}$/.test(L)},NL:function(L){return/^(NL)?\d{9}B\d{2}$/.test(L)},PL:function(L){return/^(PL)?(\d{10}|(\d{3}-\d{3}-\d{2}-\d{2})|(\d{3}-\d{2}-\d{2}-\d{3}))$/.test(L)},PT:C,RO:function(L){return/^(RO)?\d{2,10}$/.test(L)},SK:function(L){return/^(SK)?\d{10}$/.test(L)},SI:function(L){return/^(SI)?\d{8}$/.test(L)},ES:function(L){return/^(ES)?\w\d{7}[A-Z]$/.test(L)},SE:function(L){return/^(SE)?\d{12}$/.test(L)},AL:function(L){return/^(AL)?\w{9}[A-Z]$/.test(L)},MK:function(L){return/^(MK)?\d{13}$/.test(L)},AU:y,BY:function(L){return/^( )?\d{9}$/.test(L)},CA:function(L){return/^(CA)?\d{9}$/.test(L)},IS:function(L){return/^(IS)?\d{5,6}$/.test(L)},IN:function(L){return/^(IN)?\d{15}$/.test(L)},ID:function(L){return/^(ID)?(\d{15}|(\d{2}.\d{3}.\d{3}.\d{1}-\d{3}.\d{3}))$/.test(L)},IL:function(L){return/^(IL)?\d{9}$/.test(L)},KZ:function(L){return/^(KZ)?\d{12}$/.test(L)},NZ:function(L){return/^(NZ)?\d{9}$/.test(L)},NG:function(L){return/^(NG)?(\d{12}|(\d{8}-\d{4}))$/.test(L)},NO:function(L){return/^(NO)?\d{9}MVA$/.test(L)},PH:function(L){return/^(PH)?(\d{12}|\d{3} \d{3} \d{3} \d{3})$/.test(L)},RU:function(L){return/^(RU)?(\d{10}|\d{12})$/.test(L)},SM:function(L){return/^(SM)?\d{5}$/.test(L)},SA:function(L){return/^(SA)?\d{15}$/.test(L)},RS:function(L){return/^(RS)?\d{9}$/.test(L)},CH:l,TR:function(L){return/^(TR)?\d{10}$/.test(L)},UA:function(L){return/^(UA)?\d{12}$/.test(L)},GB:function(L){return/^GB((\d{3} \d{4} ([0-8][0-9]|9[0-6]))|(\d{9} \d{3})|(((GD[0-4])|(HA[5-9]))[0-9]{2}))$/.test(L)},UZ:function(L){return/^(UZ)?\d{9}$/.test(L)},AR:function(L){return/^(AR)?\d{11}$/.test(L)},BO:function(L){return/^(BO)?\d{7}$/.test(L)},BR:function(L){return/^(BR)?((\d{2}.\d{3}.\d{3}\/\d{4}-\d{2})|(\d{3}.\d{3}.\d{3}-\d{2}))$/.test(L)},CL:function(L){return/^(CL)?\d{8}-\d{1}$/.test(L)},CO:function(L){return/^(CO)?\d{10}$/.test(L)},CR:function(L){return/^(CR)?\d{9,12}$/.test(L)},EC:function(L){return/^(EC)?\d{13}$/.test(L)},SV:function(L){return/^(SV)?\d{4}-\d{6}-\d{3}-\d{1}$/.test(L)},GT:function(L){return/^(GT)?\d{7}-\d{1}$/.test(L)},HN:function(L){return/^(HN)?$/.test(L)},MX:function(L){return/^(MX)?\w{3,4}\d{6}\w{3}$/.test(L)},NI:function(L){return/^(NI)?\d{3}-\d{6}-\d{4}\w{1}$/.test(L)},PA:function(L){return/^(PA)?$/.test(L)},PY:function(L){return/^(PY)?\d{6,8}-\d{1}$/.test(L)},PE:function(L){return/^(PE)?\d{11}$/.test(L)},DO:function(L){return/^(DO)?(\d{11}|(\d{3}-\d{7}-\d{1})|[1,4,5]{1}\d{8}|([1,4,5]{1})-\d{2}-\d{5}-\d{1})$/.test(L)},UY:function(L){return/^(UY)?\d{12}$/.test(L)},VE:function(L){return/^(VE)?[J,G,V,E]{1}-(\d{9}|(\d{8}-\d{1}))$/.test(L)}};function k(O,L){if((0,n.default)(O),(0,n.default)(L),L in P)return P[L](O);throw new Error("Invalid country code: '".concat(L,"'"))}return Kf}var Yb;function m3(){return Yb||(Yb=1,function(i,n){function d(wr){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Li){return typeof Li}:function(Li){return Li&&typeof Symbol=="function"&&Li.constructor===Symbol&&Li!==Symbol.prototype?"symbol":typeof Li},d(wr)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var p=ut(Dv()),_=ut(bS()),S=ut(jP()),y=ut(NP()),l=ut(FP()),C=ut(UP()),P=ut(VP()),k=ut(MS()),O=ut($P()),L=ut(ZP()),F=ut(e0()),G=ut(qP()),ee=ut(zv()),X=ut(AS()),W=ut(GP()),pe=ut(HP()),me=ut(WP()),_e=ut(KP()),Se=Rr(YP()),ke=Rr(XP()),nt=ut(QP()),Ke=Rr(JP()),Ye=ut(eR()),ht=ut(tR()),kt=ut(rR()),sr=ut(iR()),ir=ut(nR()),Xt=ut(CS()),or=ut(ES()),Ct=ut(aR()),Nt=ut(sR()),Rt=ut(lR()),dr=ut(uR()),De=ut(Lv()),wt=Rr(xS()),Zt=ut(hR()),Ht=ut(PS()),zt=ut(dR()),er=ut(fR()),nr=ut(pR()),Qr=ut(mR()),br=ut(gR()),ti=ut(yR()),Ur=Rr(_R()),li=ut(vR()),Di=ut(xR()),zr=ut(bR()),pr=ut(wR()),Ki=ut(SR()),Fi=ut(TR()),Yi=ut(MR()),we=ut(TS()),Re=ut(AR()),We=ut(CR()),vt=ut(ER()),xt=ut(PR()),Et=ut(RR()),Ut=ut(IR()),ur=ut(DS()),_r=ut(DR()),qr=ut(zR()),Pi=ut(LR()),Ui=ut(kR()),zi=ut(BR()),Rn=ut(OR()),In=ut(jR()),ni=Rr(NR()),ri=ut(FR()),je=ut(UR()),ne=ut(VR()),ae=$R(),he=ut(ZR()),be=ut(qR()),oe=ut(GR()),Be=ut(HR()),Ve=ut(RS()),Ce=ut(WR()),Ue=ut(KR()),qe=ut(YR()),Fe=ut(XR()),dt=ut(QR()),Pt=ut(IS()),At=ut(JR()),Ft=ut(e3()),lr=ut(t3()),Je=ut(r3()),Wt=ut(i3()),vr=Rr(n3()),Vr=ut(kS()),Er=ut(LS()),tt=ut(BS()),yt=ut(a3()),Lt=ut(s3()),Hr=ut(o3()),Vi=ut(l3()),si=ut(OS()),ar=ut(u3()),Za=ut(c3()),_n=ut(h3()),qa=ut(d3()),$i=ut(f3()),sa=ut(p3());function bi(wr){if(typeof WeakMap!="function")return null;var Li=new WeakMap,vn=new WeakMap;return(bi=function(no){return no?vn:Li})(wr)}function Rr(wr,Li){if(wr&&wr.__esModule)return wr;if(wr===null||d(wr)!="object"&&typeof wr!="function")return{default:wr};var vn=bi(Li);if(vn&&vn.has(wr))return vn.get(wr);var Ds={__proto__:null},no=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var oa in wr)if(oa!=="default"&&{}.hasOwnProperty.call(wr,oa)){var ao=no?Object.getOwnPropertyDescriptor(wr,oa):null;ao&&(ao.get||ao.set)?Object.defineProperty(Ds,oa,ao):Ds[oa]=wr[oa]}return Ds.default=wr,vn&&vn.set(wr,Ds),Ds}function ut(wr){return wr&&wr.__esModule?wr:{default:wr}}var io="13.15.0",Bo={version:io,toDate:p.default,toFloat:_.default,toInt:S.default,toBoolean:y.default,equals:l.default,contains:C.default,matches:P.default,isEmail:k.default,isURL:O.default,isMACAddress:L.default,isIP:F.default,isIPRange:G.default,isFQDN:ee.default,isBoolean:pe.default,isIBAN:Ur.default,isBIC:li.default,isAbaRouting:_e.default,isAlpha:Se.default,isAlphaLocales:Se.locales,isAlphanumeric:ke.default,isAlphanumericLocales:ke.locales,isNumeric:nt.default,isPassportNumber:Ke.default,passportNumberLocales:Ke.locales,isPort:Ye.default,isLowercase:ht.default,isUppercase:kt.default,isAscii:ir.default,isFullWidth:Xt.default,isHalfWidth:or.default,isVariableWidth:Ct.default,isMultibyte:Nt.default,isSemVer:Rt.default,isSurrogatePair:dr.default,isInt:De.default,isIMEI:sr.default,isFloat:wt.default,isFloatLocales:wt.locales,isDecimal:Zt.default,isHexadecimal:Ht.default,isOctal:zt.default,isDivisibleBy:er.default,isHexColor:nr.default,isRgbColor:Qr.default,isHSL:br.default,isISRC:ti.default,isMD5:Di.default,isHash:zr.default,isJWT:pr.default,isJSON:Ki.default,isEmpty:Fi.default,isLength:Yi.default,isLocale:me.default,isByteLength:we.default,isULID:Re.default,isUUID:We.default,isMongoId:vt.default,isAfter:xt.default,isBefore:Et.default,isIn:Ut.default,isLuhnNumber:ur.default,isCreditCard:_r.default,isIdentityCard:qr.default,isEAN:Pi.default,isISIN:Ui.default,isISBN:zi.default,isISSN:Rn.default,isMobilePhone:ni.default,isMobilePhoneLocales:ni.locales,isPostalCode:vr.default,isPostalCodeLocales:vr.locales,isEthereumAddress:ri.default,isCurrency:je.default,isBtcAddress:ne.default,isISO6346:ae.isISO6346,isFreightContainerID:ae.isFreightContainerID,isISO6391:he.default,isISO8601:be.default,isISO15924:Be.default,isRFC3339:oe.default,isISO31661Alpha2:Ve.default,isISO31661Alpha3:Ce.default,isISO31661Numeric:Ue.default,isISO4217:qe.default,isBase32:Fe.default,isBase58:dt.default,isBase64:Pt.default,isDataURI:At.default,isMagnetURI:Ft.default,isMailtoURI:lr.default,isMimeType:Je.default,isLatLong:Wt.default,ltrim:Vr.default,rtrim:Er.default,trim:tt.default,escape:yt.default,unescape:Lt.default,stripLow:Hr.default,whitelist:Vi.default,blacklist:si.default,isWhitelisted:ar.default,normalizeEmail:Za.default,toString,isSlug:_n.default,isStrongPassword:$i.default,isTaxID:In.default,isDate:X.default,isTime:W.default,isLicensePlate:qa.default,isVAT:sa.default,ibanLocales:Ur.locales};n.default=Bo,i.exports=n.default,i.exports.default=n.default}(Ag,Ag.exports)),Ag.exports}var g3=m3();const t0=bv(g3),kv=se.createContext({});function Bv(i){const n=se.useRef(null);return n.current===null&&(n.current=i()),n.current}const Ov=typeof window<"u",jS=Ov?se.useLayoutEffect:se.useEffect,r0=se.createContext(null),jv=se.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});class y3 extends se.Component{getSnapshotBeforeUpdate(n){const d=this.props.childRef.current;if(d&&n.isPresent&&!this.props.isPresent){const p=d.offsetParent,_=p instanceof HTMLElement&&p.offsetWidth||0,S=this.props.sizeRef.current;S.height=d.offsetHeight||0,S.width=d.offsetWidth||0,S.top=d.offsetTop,S.left=d.offsetLeft,S.right=_-S.width-S.left}return null}componentDidUpdate(){}render(){return this.props.children}}function _3({children:i,isPresent:n,anchorX:d}){const p=se.useId(),_=se.useRef(null),S=se.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:y}=se.useContext(jv);return se.useInsertionEffect(()=>{const{width:l,height:C,top:P,left:k,right:O}=S.current;if(n||!_.current||!l||!C)return;const L=d==="left"?`left: ${k}`:`right: ${O}`;_.current.dataset.motionPopId=p;const F=document.createElement("style");return y&&(F.nonce=y),document.head.appendChild(F),F.sheet&&F.sheet.insertRule(`
          [data-motion-pop-id="${p}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${C}px !important;
            ${L}px !important;
            top: ${P}px !important;
          }
        `),()=>{document.head.removeChild(F)}},[n]),q.jsx(y3,{isPresent:n,childRef:_,sizeRef:S,children:se.cloneElement(i,{ref:_})})}const v3=({children:i,initial:n,isPresent:d,onExitComplete:p,custom:_,presenceAffectsLayout:S,mode:y,anchorX:l})=>{const C=Bv(x3),P=se.useId();let k=!0,O=se.useMemo(()=>(k=!1,{id:P,initial:n,isPresent:d,custom:_,onExitComplete:L=>{C.set(L,!0);for(const F of C.values())if(!F)return;p&&p()},register:L=>(C.set(L,!1),()=>C.delete(L))}),[d,C,p]);return S&&k&&(O={...O}),se.useMemo(()=>{C.forEach((L,F)=>C.set(F,!1))},[d]),se.useEffect(()=>{!d&&!C.size&&p&&p()},[d]),y==="popLayout"&&(i=q.jsx(_3,{isPresent:d,anchorX:l,children:i})),q.jsx(r0.Provider,{value:O,children:i})};function x3(){return new Map}function NS(i=!0){const n=se.useContext(r0);if(n===null)return[!0,null];const{isPresent:d,onExitComplete:p,register:_}=n,S=se.useId();se.useEffect(()=>{if(i)return _(S)},[i]);const y=se.useCallback(()=>i&&p&&p(S),[S,p,i]);return!d&&p?[!1,y]:[!0]}const p_=i=>i.key||"";function Xb(i){const n=[];return se.Children.forEach(i,d=>{se.isValidElement(d)&&n.push(d)}),n}const FS=({children:i,custom:n,initial:d=!0,onExitComplete:p,presenceAffectsLayout:_=!0,mode:S="sync",propagate:y=!1,anchorX:l="left"})=>{const[C,P]=NS(y),k=se.useMemo(()=>Xb(i),[i]),O=y&&!C?[]:k.map(p_),L=se.useRef(!0),F=se.useRef(k),G=Bv(()=>new Map),[ee,X]=se.useState(k),[W,pe]=se.useState(k);jS(()=>{L.current=!1,F.current=k;for(let Se=0;Se<W.length;Se++){const ke=p_(W[Se]);O.includes(ke)?G.delete(ke):G.get(ke)!==!0&&G.set(ke,!1)}},[W,O.length,O.join("-")]);const me=[];if(k!==ee){let Se=[...k];for(let ke=0;ke<W.length;ke++){const nt=W[ke],Ke=p_(nt);O.includes(Ke)||(Se.splice(ke,0,nt),me.push(nt))}return S==="wait"&&me.length&&(Se=me),pe(Xb(Se)),X(k),null}const{forceRender:_e}=se.useContext(kv);return q.jsx(q.Fragment,{children:W.map(Se=>{const ke=p_(Se),nt=y&&!C?!1:k===W||O.includes(ke),Ke=()=>{if(G.has(ke))G.set(ke,!0);else return;let Ye=!0;G.forEach(ht=>{ht||(Ye=!1)}),Ye&&(_e==null||_e(),pe(F.current),y&&(P==null||P()),p&&p())};return q.jsx(v3,{isPresent:nt,initial:!L.current||d?void 0:!1,custom:n,presenceAffectsLayout:_,mode:S,onExitComplete:nt?void 0:Ke,anchorX:l,children:Se},ke)})})},m_=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Qb={value:null};function b3(i,n){let d=new Set,p=new Set,_=!1,S=!1;const y=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},C=0;function P(O){y.has(O)&&(k.schedule(O),i()),C++,O(l)}const k={schedule:(O,L=!1,F=!1)=>{const ee=F&&_?d:p;return L&&y.add(O),ee.has(O)||ee.add(O),O},cancel:O=>{p.delete(O),y.delete(O)},process:O=>{if(l=O,_){S=!0;return}_=!0,[d,p]=[p,d],d.forEach(P),n&&Qb.value&&Qb.value.frameloop[n].push(C),C=0,d.clear(),_=!1,S&&(S=!1,k.process(O))}};return k}const xc={},w3=40;function US(i,n){let d=!1,p=!0;const _={delta:0,timestamp:0,isProcessing:!1},S=()=>d=!0,y=m_.reduce((me,_e)=>(me[_e]=b3(S,n?_e:void 0),me),{}),{setup:l,read:C,resolveKeyframes:P,preUpdate:k,update:O,preRender:L,render:F,postRender:G}=y,ee=()=>{const me=xc.useManualTiming?_.timestamp:performance.now();d=!1,xc.useManualTiming||(_.delta=p?1e3/60:Math.max(Math.min(me-_.timestamp,w3),1)),_.timestamp=me,_.isProcessing=!0,l.process(_),C.process(_),P.process(_),k.process(_),O.process(_),L.process(_),F.process(_),G.process(_),_.isProcessing=!1,d&&n&&(p=!1,i(ee))},X=()=>{d=!0,p=!0,_.isProcessing||i(ee)};return{schedule:m_.reduce((me,_e)=>{const Se=y[_e];return me[_e]=(ke,nt=!1,Ke=!1)=>(d||X(),Se.schedule(ke,nt,Ke)),me},{}),cancel:me=>{for(let _e=0;_e<m_.length;_e++)y[m_[_e]].cancel(me)},state:_,steps:y}}const Lo=i=>i,{schedule:yn,cancel:Ah,state:ba,steps:I0}=US(typeof requestAnimationFrame<"u"?requestAnimationFrame:Lo,!0),VS=se.createContext({strict:!1}),Jb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rp={};for(const i in Jb)rp[i]={isEnabled:n=>Jb[i].some(d=>!!n[d])};function S3(i){for(const n in i)rp[n]={...rp[n],...i[n]}}const T3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function B_(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||T3.has(i)}let $S=i=>!B_(i);function M3(i){i&&($S=n=>n.startsWith("on")?!B_(n):i(n))}try{M3(require("@emotion/is-prop-valid").default)}catch{}function A3(i,n,d){const p={};for(const _ in i)_==="values"&&typeof i.values=="object"||($S(_)||d===!0&&B_(_)||!n&&!B_(_)||i.draggable&&_.startsWith("onDrag"))&&(p[_]=i[_]);return p}function C3(i){if(typeof Proxy>"u")return i;const n=new Map,d=(...p)=>i(...p);return new Proxy(d,{get:(p,_)=>_==="create"?i:(n.has(_)||n.set(_,i(_)),n.get(_))})}const i0=se.createContext({});function n0(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function Cm(i){return typeof i=="string"||Array.isArray(i)}const Nv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Fv=["initial",...Nv];function a0(i){return n0(i.animate)||Fv.some(n=>Cm(i[n]))}function ZS(i){return!!(a0(i)||i.variants)}function E3(i,n){if(a0(i)){const{initial:d,animate:p}=i;return{initial:d===!1||Cm(d)?d:void 0,animate:Cm(p)?p:void 0}}return i.inherit!==!1?n:{}}function P3(i){const{initial:n,animate:d}=E3(i,se.useContext(i0));return se.useMemo(()=>({initial:n,animate:d}),[ew(n),ew(d)])}function ew(i){return Array.isArray(i)?i.join(" "):i}const R3=Symbol.for("motionComponentSymbol");function Yf(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function I3(i,n,d){return se.useCallback(p=>{p&&i.onMount&&i.onMount(p),n&&(p?n.mount(p):n.unmount()),d&&(typeof d=="function"?d(p):Yf(d)&&(d.current=p))},[n])}const Uv=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),D3="framerAppearId",qS="data-"+Uv(D3),GS=se.createContext({}),{schedule:Vv}=US(queueMicrotask,!1);function z3(i,n,d,p,_){var ee,X;const{visualElement:S}=se.useContext(i0),y=se.useContext(VS),l=se.useContext(r0),C=se.useContext(jv).reducedMotion,P=se.useRef(null);p=p||y.renderer,!P.current&&p&&(P.current=p(i,{visualState:n,parent:S,props:d,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:C}));const k=P.current,O=se.useContext(GS);k&&!k.projection&&_&&(k.type==="html"||k.type==="svg")&&L3(P.current,d,_,O);const L=se.useRef(!1);se.useInsertionEffect(()=>{k&&L.current&&k.update(d,l)});const F=d[qS],G=se.useRef(!!F&&!((ee=window.MotionHandoffIsComplete)!=null&&ee.call(window,F))&&((X=window.MotionHasOptimisedAnimation)==null?void 0:X.call(window,F)));return jS(()=>{k&&(L.current=!0,window.MotionIsMounted=!0,k.updateFeatures(),Vv.render(k.render),G.current&&k.animationState&&k.animationState.animateChanges())}),se.useEffect(()=>{k&&(!G.current&&k.animationState&&k.animationState.animateChanges(),G.current&&(queueMicrotask(()=>{var W;(W=window.MotionHandoffMarkAsComplete)==null||W.call(window,F)}),G.current=!1))}),k}function L3(i,n,d,p){const{layoutId:_,layout:S,drag:y,dragConstraints:l,layoutScroll:C,layoutRoot:P,layoutCrossfade:k}=n;i.projection=new d(i.latestValues,n["data-framer-portal-id"]?void 0:HS(i.parent)),i.projection.setOptions({layoutId:_,layout:S,alwaysMeasureLayout:!!y||l&&Yf(l),visualElement:i,animationType:typeof S=="string"?S:"both",initialPromotionConfig:p,crossfade:k,layoutScroll:C,layoutRoot:P})}function HS(i){if(i)return i.options.allowProjection!==!1?i.projection:HS(i.parent)}let $v=()=>{};function k3({preloadedFeatures:i,createVisualElement:n,useRender:d,useVisualState:p,Component:_}){i&&S3(i);function S(l,C){let P;const k={...se.useContext(jv),...l,layoutId:B3(l)},{isStatic:O}=k,L=P3(l),F=p(l,O);if(!O&&Ov){O3();const G=j3(k);P=G.MeasureLayout,L.visualElement=z3(_,F,k,n,G.ProjectionNode)}return q.jsxs(i0.Provider,{value:L,children:[P&&L.visualElement?q.jsx(P,{visualElement:L.visualElement,...k}):null,d(_,l,I3(F,L.visualElement,C),F,O,L.visualElement)]})}S.displayName=`motion.${typeof _=="string"?_:`create(${_.displayName??_.name??""})`}`;const y=se.forwardRef(S);return y[R3]=_,y}function B3({layoutId:i}){const n=se.useContext(kv).id;return n&&i!==void 0?n+"-"+i:i}function O3(i,n){se.useContext(VS).strict}function j3(i){const{drag:n,layout:d}=rp;if(!n&&!d)return{};const p={...n,...d};return{MeasureLayout:n!=null&&n.isEnabled(i)||d!=null&&d.isEnabled(i)?p.MeasureLayout:void 0,ProjectionNode:p.ProjectionNode}}const WS=i=>n=>typeof n=="string"&&n.startsWith(i),Zv=WS("--"),N3=WS("var(--"),qv=i=>N3(i)?F3.test(i.split("/*")[0].trim()):!1,F3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Em={};function U3(i){for(const n in i)Em[n]=i[n],Zv(n)&&(Em[n].isCSSVariable=!0)}const up=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],cp=new Set(up);function KS(i,{layout:n,layoutId:d}){return cp.has(i)||i.startsWith("origin")||(n||d!==void 0)&&(!!Em[i]||i==="opacity")}const $a=i=>!!(i&&i.getVelocity),YS=(i,n)=>n&&typeof i=="number"?n.transform(i):i,bc=(i,n,d)=>d>n?n:d<i?i:d,hp={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},Pm={...hp,transform:i=>bc(0,1,i)},g_={...hp,default:1},tw={...hp,transform:Math.round},Um=i=>({test:n=>typeof n=="string"&&n.endsWith(i)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${i}`}),Sh=Um("deg"),Tu=Um("%"),yr=Um("px"),V3=Um("vh"),$3=Um("vw"),rw={...Tu,parse:i=>Tu.parse(i)/100,transform:i=>Tu.transform(i*100)},Z3={rotate:Sh,rotateX:Sh,rotateY:Sh,rotateZ:Sh,scale:g_,scaleX:g_,scaleY:g_,scaleZ:g_,skew:Sh,skewX:Sh,skewY:Sh,distance:yr,translateX:yr,translateY:yr,translateZ:yr,x:yr,y:yr,z:yr,perspective:yr,transformPerspective:yr,opacity:Pm,originX:rw,originY:rw,originZ:yr},Gv={borderWidth:yr,borderTopWidth:yr,borderRightWidth:yr,borderBottomWidth:yr,borderLeftWidth:yr,borderRadius:yr,radius:yr,borderTopLeftRadius:yr,borderTopRightRadius:yr,borderBottomRightRadius:yr,borderBottomLeftRadius:yr,width:yr,maxWidth:yr,height:yr,maxHeight:yr,top:yr,right:yr,bottom:yr,left:yr,padding:yr,paddingTop:yr,paddingRight:yr,paddingBottom:yr,paddingLeft:yr,margin:yr,marginTop:yr,marginRight:yr,marginBottom:yr,marginLeft:yr,backgroundPositionX:yr,backgroundPositionY:yr,...Z3,zIndex:tw,fillOpacity:Pm,strokeOpacity:Pm,numOctaves:tw},q3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},G3=up.length;function H3(i,n,d){let p="",_=!0;for(let S=0;S<G3;S++){const y=up[S],l=i[y];if(l===void 0)continue;let C=!0;if(typeof l=="number"?C=l===(y.startsWith("scale")?1:0):C=parseFloat(l)===0,!C||d){const P=YS(l,Gv[y]);if(!C){_=!1;const k=q3[y]||y;p+=`${k}(${P}) `}d&&(n[y]=P)}}return p=p.trim(),d?p=d(n,_?"":p):_&&(p="none"),p}function Hv(i,n,d){const{style:p,vars:_,transformOrigin:S}=i;let y=!1,l=!1;for(const C in n){const P=n[C];if(cp.has(C)){y=!0;continue}else if(Zv(C)){_[C]=P;continue}else{const k=YS(P,Gv[C]);C.startsWith("origin")?(l=!0,S[C]=k):p[C]=k}}if(n.transform||(y||d?p.transform=H3(n,i.transform,d):p.transform&&(p.transform="none")),l){const{originX:C="50%",originY:P="50%",originZ:k=0}=S;p.transformOrigin=`${C} ${P} ${k}`}}const Wv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function XS(i,n,d){for(const p in n)!$a(n[p])&&!KS(p,d)&&(i[p]=n[p])}function W3({transformTemplate:i},n){return se.useMemo(()=>{const d=Wv();return Hv(d,n,i),Object.assign({},d.vars,d.style)},[n])}function K3(i,n){const d=i.style||{},p={};return XS(p,d,i),Object.assign(p,W3(i,n)),p}function Y3(i,n){const d={},p=K3(i,n);return i.drag&&i.dragListener!==!1&&(d.draggable=!1,p.userSelect=p.WebkitUserSelect=p.WebkitTouchCallout="none",p.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(d.tabIndex=0),d.style=p,d}const X3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Kv(i){return typeof i!="string"||i.includes("-")?!1:!!(X3.indexOf(i)>-1||/[A-Z]/u.test(i))}const Q3={offset:"stroke-dashoffset",array:"stroke-dasharray"},J3={offset:"strokeDashoffset",array:"strokeDasharray"};function eI(i,n,d=1,p=0,_=!0){i.pathLength=1;const S=_?Q3:J3;i[S.offset]=yr.transform(-p);const y=yr.transform(n),l=yr.transform(d);i[S.array]=`${y} ${l}`}function QS(i,{attrX:n,attrY:d,attrScale:p,pathLength:_,pathSpacing:S=1,pathOffset:y=0,...l},C,P){if(Hv(i,l,P),C){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:k,style:O}=i;k.transform&&(O.transform=k.transform,delete k.transform),(O.transform||k.transformOrigin)&&(O.transformOrigin=k.transformOrigin??"50% 50%",delete k.transformOrigin),O.transform&&(O.transformBox="fill-box",delete k.transformBox),n!==void 0&&(k.x=n),d!==void 0&&(k.y=d),p!==void 0&&(k.scale=p),_!==void 0&&eI(k,_,S,y,!1)}const JS=()=>({...Wv(),attrs:{}}),eT=i=>typeof i=="string"&&i.toLowerCase()==="svg";function tI(i,n,d,p){const _=se.useMemo(()=>{const S=JS();return QS(S,n,eT(p),i.transformTemplate),{...S.attrs,style:{...S.style}}},[n]);if(i.style){const S={};XS(S,i.style,i),_.style={...S,..._.style}}return _}function rI(i=!1){return(d,p,_,{latestValues:S},y)=>{const C=(Kv(d)?tI:Y3)(p,S,y,d),P=A3(p,typeof d=="string",i),k=d!==se.Fragment?{...P,...C,ref:_}:{},{children:O}=p,L=se.useMemo(()=>$a(O)?O.get():O,[O]);return se.createElement(d,{...k,children:L})}}function iw(i){const n=[{},{}];return i==null||i.values.forEach((d,p)=>{n[0][p]=d.get(),n[1][p]=d.getVelocity()}),n}function Yv(i,n,d,p){if(typeof n=="function"){const[_,S]=iw(p);n=n(d!==void 0?d:i.custom,_,S)}if(typeof n=="string"&&(n=i.variants&&i.variants[n]),typeof n=="function"){const[_,S]=iw(p);n=n(d!==void 0?d:i.custom,_,S)}return n}function E_(i){return $a(i)?i.get():i}function iI({scrapeMotionValuesFromProps:i,createRenderState:n},d,p,_){return{latestValues:nI(d,p,_,i),renderState:n()}}const tT=i=>(n,d)=>{const p=se.useContext(i0),_=se.useContext(r0),S=()=>iI(i,n,p,_);return d?S():Bv(S)};function nI(i,n,d,p){const _={},S=p(i,{});for(const L in S)_[L]=E_(S[L]);let{initial:y,animate:l}=i;const C=a0(i),P=ZS(i);n&&P&&!C&&i.inherit!==!1&&(y===void 0&&(y=n.initial),l===void 0&&(l=n.animate));let k=d?d.initial===!1:!1;k=k||y===!1;const O=k?l:y;if(O&&typeof O!="boolean"&&!n0(O)){const L=Array.isArray(O)?O:[O];for(let F=0;F<L.length;F++){const G=Yv(i,L[F]);if(G){const{transitionEnd:ee,transition:X,...W}=G;for(const pe in W){let me=W[pe];if(Array.isArray(me)){const _e=k?me.length-1:0;me=me[_e]}me!==null&&(_[pe]=me)}for(const pe in ee)_[pe]=ee[pe]}}}return _}function Xv(i,n,d){var S;const{style:p}=i,_={};for(const y in p)($a(p[y])||n.style&&$a(n.style[y])||KS(y,i)||((S=d==null?void 0:d.getValue(y))==null?void 0:S.liveStyle)!==void 0)&&(_[y]=p[y]);return _}const aI={useVisualState:tT({scrapeMotionValuesFromProps:Xv,createRenderState:Wv})};function rT(i,n,d){const p=Xv(i,n,d);for(const _ in i)if($a(i[_])||$a(n[_])){const S=up.indexOf(_)!==-1?"attr"+_.charAt(0).toUpperCase()+_.substring(1):_;p[S]=i[_]}return p}const sI={useVisualState:tT({scrapeMotionValuesFromProps:rT,createRenderState:JS})};function oI(i,n){return function(p,{forwardMotionProps:_}={forwardMotionProps:!1}){const y={...Kv(p)?sI:aI,preloadedFeatures:i,useRender:rI(_),createVisualElement:n,Component:p};return k3(y)}}function Rm(i,n,d){const p=i.getProps();return Yv(p,n,d!==void 0?d:p.custom,i)}const tv=i=>Array.isArray(i);let P_;function lI(){P_=void 0}const Rs={now:()=>(P_===void 0&&Rs.set(ba.isProcessing||xc.useManualTiming?ba.timestamp:performance.now()),P_),set:i=>{P_=i,queueMicrotask(lI)}};function Qv(i,n){i.indexOf(n)===-1&&i.push(n)}function Jv(i,n){const d=i.indexOf(n);d>-1&&i.splice(d,1)}class ex{constructor(){this.subscriptions=[]}add(n){return Qv(this.subscriptions,n),()=>Jv(this.subscriptions,n)}notify(n,d,p){const _=this.subscriptions.length;if(_)if(_===1)this.subscriptions[0](n,d,p);else for(let S=0;S<_;S++){const y=this.subscriptions[S];y&&y(n,d,p)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function iT(i,n){return n?i*(1e3/n):0}const nw=30,uI=i=>!isNaN(parseFloat(i));class cI{constructor(n,d={}){this.version="12.9.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(p,_=!0)=>{var y,l;const S=Rs.now();this.updatedAt!==S&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(p),this.current!==this.prev&&((y=this.events.change)==null||y.notify(this.current)),_&&((l=this.events.renderRequest)==null||l.notify(this.current))},this.hasAnimated=!1,this.setCurrent(n),this.owner=d.owner}setCurrent(n){this.current=n,this.updatedAt=Rs.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=uI(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,d){this.events[n]||(this.events[n]=new ex);const p=this.events[n].add(d);return n==="change"?()=>{p(),yn.read(()=>{this.events.change.getSize()||this.stop()})}:p}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,d){this.passiveEffect=n,this.stopPassiveEffect=d}set(n,d=!0){!d||!this.passiveEffect?this.updateAndNotify(n,d):this.passiveEffect(n,this.updateAndNotify)}setWithVelocity(n,d,p){this.set(d),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-p}jump(n,d=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,d&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=Rs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>nw)return 0;const d=Math.min(this.updatedAt-this.prevUpdatedAt,nw);return iT(parseFloat(this.current)-parseFloat(this.prevFrameValue),d)}start(n){return this.stop(),new Promise(d=>{this.hasAnimated=!0,this.animation=n(d),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var n;(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Im(i,n){return new cI(i,n)}function hI(i,n,d){i.hasValue(n)?i.getValue(n).set(d):i.addValue(n,Im(d))}function dI(i){return tv(i)?i[i.length-1]||0:i}function fI(i,n){const d=Rm(i,n);let{transitionEnd:p={},transition:_={},...S}=d||{};S={...S,...p};for(const y in S){const l=dI(S[y]);hI(i,y,l)}}function pI(i){return!!($a(i)&&i.add)}function rv(i,n){const d=i.getValue("willChange");if(pI(d))return d.add(n);if(!d&&xc.WillChange){const p=new xc.WillChange("auto");i.addValue("willChange",p),p.add(n)}}function nT(i){return i.props[qS]}const mI=i=>i!==null;function gI(i,{repeat:n,repeatType:d="loop"},p){const _=i.filter(mI),S=n&&d!=="loop"&&n%2===1?0:_.length-1;return _[S]}const yI={type:"spring",stiffness:500,damping:25,restSpeed:10},_I=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),vI={type:"keyframes",duration:.8},xI={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},bI=(i,{keyframes:n})=>n.length>2?vI:cp.has(i)?i.startsWith("scale")?_I(n[1]):yI:xI;function wI({when:i,delay:n,delayChildren:d,staggerChildren:p,staggerDirection:_,repeat:S,repeatType:y,repeatDelay:l,from:C,elapsed:P,...k}){return!!Object.keys(k).length}function tx(i,n){return(i==null?void 0:i[n])??(i==null?void 0:i.default)??i}const Mu=i=>i*1e3,Au=i=>i/1e3,xm=i=>Math.round(i*1e5)/1e5,rx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function SI(i){return i==null}const TI=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ix=(i,n)=>d=>!!(typeof d=="string"&&TI.test(d)&&d.startsWith(i)||n&&!SI(d)&&Object.prototype.hasOwnProperty.call(d,n)),aT=(i,n,d)=>p=>{if(typeof p!="string")return p;const[_,S,y,l]=p.match(rx);return{[i]:parseFloat(_),[n]:parseFloat(S),[d]:parseFloat(y),alpha:l!==void 0?parseFloat(l):1}},MI=i=>bc(0,255,i),D0={...hp,transform:i=>Math.round(MI(i))},Nd={test:ix("rgb","red"),parse:aT("red","green","blue"),transform:({red:i,green:n,blue:d,alpha:p=1})=>"rgba("+D0.transform(i)+", "+D0.transform(n)+", "+D0.transform(d)+", "+xm(Pm.transform(p))+")"};function AI(i){let n="",d="",p="",_="";return i.length>5?(n=i.substring(1,3),d=i.substring(3,5),p=i.substring(5,7),_=i.substring(7,9)):(n=i.substring(1,2),d=i.substring(2,3),p=i.substring(3,4),_=i.substring(4,5),n+=n,d+=d,p+=p,_+=_),{red:parseInt(n,16),green:parseInt(d,16),blue:parseInt(p,16),alpha:_?parseInt(_,16)/255:1}}const iv={test:ix("#"),parse:AI,transform:Nd.transform},Xf={test:ix("hsl","hue"),parse:aT("hue","saturation","lightness"),transform:({hue:i,saturation:n,lightness:d,alpha:p=1})=>"hsla("+Math.round(i)+", "+Tu.transform(xm(n))+", "+Tu.transform(xm(d))+", "+xm(Pm.transform(p))+")"},Ua={test:i=>Nd.test(i)||iv.test(i)||Xf.test(i),parse:i=>Nd.test(i)?Nd.parse(i):Xf.test(i)?Xf.parse(i):iv.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?Nd.transform(i):Xf.transform(i)},CI=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function EI(i){var n,d;return isNaN(i)&&typeof i=="string"&&(((n=i.match(rx))==null?void 0:n.length)||0)+(((d=i.match(CI))==null?void 0:d.length)||0)>0}const sT="number",oT="color",PI="var",RI="var(",aw="${}",II=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Dm(i){const n=i.toString(),d=[],p={color:[],number:[],var:[]},_=[];let S=0;const l=n.replace(II,C=>(Ua.test(C)?(p.color.push(S),_.push(oT),d.push(Ua.parse(C))):C.startsWith(RI)?(p.var.push(S),_.push(PI),d.push(C)):(p.number.push(S),_.push(sT),d.push(parseFloat(C))),++S,aw)).split(aw);return{values:d,split:l,indexes:p,types:_}}function lT(i){return Dm(i).values}function uT(i){const{split:n,types:d}=Dm(i),p=n.length;return _=>{let S="";for(let y=0;y<p;y++)if(S+=n[y],_[y]!==void 0){const l=d[y];l===sT?S+=xm(_[y]):l===oT?S+=Ua.transform(_[y]):S+=_[y]}return S}}const DI=i=>typeof i=="number"?0:i;function zI(i){const n=lT(i);return uT(i)(n.map(DI))}const Ch={test:EI,parse:lT,createTransformer:uT,getAnimatableNone:zI};function z0(i,n,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?i+(n-i)*6*d:d<1/2?n:d<2/3?i+(n-i)*(2/3-d)*6:i}function LI({hue:i,saturation:n,lightness:d,alpha:p}){i/=360,n/=100,d/=100;let _=0,S=0,y=0;if(!n)_=S=y=d;else{const l=d<.5?d*(1+n):d+n-d*n,C=2*d-l;_=z0(C,l,i+1/3),S=z0(C,l,i),y=z0(C,l,i-1/3)}return{red:Math.round(_*255),green:Math.round(S*255),blue:Math.round(y*255),alpha:p}}function O_(i,n){return d=>d>0?n:i}const gn=(i,n,d)=>i+(n-i)*d,L0=(i,n,d)=>{const p=i*i,_=d*(n*n-p)+p;return _<0?0:Math.sqrt(_)},kI=[iv,Nd,Xf],BI=i=>kI.find(n=>n.test(i));function sw(i){const n=BI(i);if(!n)return!1;let d=n.parse(i);return n===Xf&&(d=LI(d)),d}const ow=(i,n)=>{const d=sw(i),p=sw(n);if(!d||!p)return O_(i,n);const _={...d};return S=>(_.red=L0(d.red,p.red,S),_.green=L0(d.green,p.green,S),_.blue=L0(d.blue,p.blue,S),_.alpha=gn(d.alpha,p.alpha,S),Nd.transform(_))},nv=new Set(["none","hidden"]);function OI(i,n){return nv.has(i)?d=>d<=0?i:n:d=>d>=1?n:i}const jI=(i,n)=>d=>n(i(d)),Vm=(...i)=>i.reduce(jI);function NI(i,n){return d=>gn(i,n,d)}function nx(i){return typeof i=="number"?NI:typeof i=="string"?qv(i)?O_:Ua.test(i)?ow:VI:Array.isArray(i)?cT:typeof i=="object"?Ua.test(i)?ow:FI:O_}function cT(i,n){const d=[...i],p=d.length,_=i.map((S,y)=>nx(S)(S,n[y]));return S=>{for(let y=0;y<p;y++)d[y]=_[y](S);return d}}function FI(i,n){const d={...i,...n},p={};for(const _ in d)i[_]!==void 0&&n[_]!==void 0&&(p[_]=nx(i[_])(i[_],n[_]));return _=>{for(const S in p)d[S]=p[S](_);return d}}function UI(i,n){const d=[],p={color:0,var:0,number:0};for(let _=0;_<n.values.length;_++){const S=n.types[_],y=i.indexes[S][p[S]],l=i.values[y]??0;d[_]=l,p[S]++}return d}const VI=(i,n)=>{const d=Ch.createTransformer(n),p=Dm(i),_=Dm(n);return p.indexes.var.length===_.indexes.var.length&&p.indexes.color.length===_.indexes.color.length&&p.indexes.number.length>=_.indexes.number.length?nv.has(i)&&!_.values.length||nv.has(n)&&!p.values.length?OI(i,n):Vm(cT(UI(p,_),_.values),d):O_(i,n)};function hT(i,n,d){return typeof i=="number"&&typeof n=="number"&&typeof d=="number"?gn(i,n,d):nx(i)(i,n)}const $I=i=>{const n=({timestamp:d})=>i(d);return{start:()=>yn.update(n,!0),stop:()=>Ah(n),now:()=>ba.isProcessing?ba.timestamp:Rs.now()}},dT=(i,n,d=10)=>{let p="";const _=Math.max(Math.round(n/d),2);for(let S=0;S<_;S++)p+=i(S/(_-1))+", ";return`linear(${p.substring(0,p.length-2)})`},j_=2e4;function ax(i){let n=0;const d=50;let p=i.next(n);for(;!p.done&&n<j_;)n+=d,p=i.next(n);return n>=j_?1/0:n}function ZI(i,n=100,d){const p=d({...i,keyframes:[0,n]}),_=Math.min(ax(p),j_);return{type:"keyframes",ease:S=>p.next(_*S).value/n,duration:Au(_)}}const qI=5;function fT(i,n,d){const p=Math.max(n-qI,0);return iT(d-i(p),n-p)}const Pn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},lw=.001;function GI({duration:i=Pn.duration,bounce:n=Pn.bounce,velocity:d=Pn.velocity,mass:p=Pn.mass}){let _,S,y=1-n;y=bc(Pn.minDamping,Pn.maxDamping,y),i=bc(Pn.minDuration,Pn.maxDuration,Au(i)),y<1?(_=P=>{const k=P*y,O=k*i,L=k-d,F=av(P,y),G=Math.exp(-O);return lw-L/F*G},S=P=>{const O=P*y*i,L=O*d+d,F=Math.pow(y,2)*Math.pow(P,2)*i,G=Math.exp(-O),ee=av(Math.pow(P,2),y);return(-_(P)+lw>0?-1:1)*((L-F)*G)/ee}):(_=P=>{const k=Math.exp(-P*i),O=(P-d)*i+1;return-.001+k*O},S=P=>{const k=Math.exp(-P*i),O=(d-P)*(i*i);return k*O});const l=5/i,C=WI(_,S,l);if(i=Mu(i),isNaN(C))return{stiffness:Pn.stiffness,damping:Pn.damping,duration:i};{const P=Math.pow(C,2)*p;return{stiffness:P,damping:y*2*Math.sqrt(p*P),duration:i}}}const HI=12;function WI(i,n,d){let p=d;for(let _=1;_<HI;_++)p=p-i(p)/n(p);return p}function av(i,n){return i*Math.sqrt(1-n*n)}const KI=["duration","bounce"],YI=["stiffness","damping","mass"];function uw(i,n){return n.some(d=>i[d]!==void 0)}function XI(i){let n={velocity:Pn.velocity,stiffness:Pn.stiffness,damping:Pn.damping,mass:Pn.mass,isResolvedFromDuration:!1,...i};if(!uw(i,YI)&&uw(i,KI))if(i.visualDuration){const d=i.visualDuration,p=2*Math.PI/(d*1.2),_=p*p,S=2*bc(.05,1,1-(i.bounce||0))*Math.sqrt(_);n={...n,mass:Pn.mass,stiffness:_,damping:S}}else{const d=GI(i);n={...n,...d,mass:Pn.mass},n.isResolvedFromDuration=!0}return n}function N_(i=Pn.visualDuration,n=Pn.bounce){const d=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:n}:i;let{restSpeed:p,restDelta:_}=d;const S=d.keyframes[0],y=d.keyframes[d.keyframes.length-1],l={done:!1,value:S},{stiffness:C,damping:P,mass:k,duration:O,velocity:L,isResolvedFromDuration:F}=XI({...d,velocity:-Au(d.velocity||0)}),G=L||0,ee=P/(2*Math.sqrt(C*k)),X=y-S,W=Au(Math.sqrt(C/k)),pe=Math.abs(X)<5;p||(p=pe?Pn.restSpeed.granular:Pn.restSpeed.default),_||(_=pe?Pn.restDelta.granular:Pn.restDelta.default);let me;if(ee<1){const Se=av(W,ee);me=ke=>{const nt=Math.exp(-ee*W*ke);return y-nt*((G+ee*W*X)/Se*Math.sin(Se*ke)+X*Math.cos(Se*ke))}}else if(ee===1)me=Se=>y-Math.exp(-W*Se)*(X+(G+W*X)*Se);else{const Se=W*Math.sqrt(ee*ee-1);me=ke=>{const nt=Math.exp(-ee*W*ke),Ke=Math.min(Se*ke,300);return y-nt*((G+ee*W*X)*Math.sinh(Ke)+Se*X*Math.cosh(Ke))/Se}}const _e={calculatedDuration:F&&O||null,next:Se=>{const ke=me(Se);if(F)l.done=Se>=O;else{let nt=Se===0?G:0;ee<1&&(nt=Se===0?Mu(G):fT(me,Se,ke));const Ke=Math.abs(nt)<=p,Ye=Math.abs(y-ke)<=_;l.done=Ke&&Ye}return l.value=l.done?y:ke,l},toString:()=>{const Se=Math.min(ax(_e),j_),ke=dT(nt=>_e.next(Se*nt).value,Se,30);return Se+"ms "+ke},toTransition:()=>{}};return _e}N_.applyToOptions=i=>{const n=ZI(i,100,N_);return i.ease=n.ease,i.duration=Mu(n.duration),i.type="keyframes",i};function sv({keyframes:i,velocity:n=0,power:d=.8,timeConstant:p=325,bounceDamping:_=10,bounceStiffness:S=500,modifyTarget:y,min:l,max:C,restDelta:P=.5,restSpeed:k}){const O=i[0],L={done:!1,value:O},F=Ke=>l!==void 0&&Ke<l||C!==void 0&&Ke>C,G=Ke=>l===void 0?C:C===void 0||Math.abs(l-Ke)<Math.abs(C-Ke)?l:C;let ee=d*n;const X=O+ee,W=y===void 0?X:y(X);W!==X&&(ee=W-O);const pe=Ke=>-ee*Math.exp(-Ke/p),me=Ke=>W+pe(Ke),_e=Ke=>{const Ye=pe(Ke),ht=me(Ke);L.done=Math.abs(Ye)<=P,L.value=L.done?W:ht};let Se,ke;const nt=Ke=>{F(L.value)&&(Se=Ke,ke=N_({keyframes:[L.value,G(L.value)],velocity:fT(me,Ke,L.value),damping:_,stiffness:S,restDelta:P,restSpeed:k}))};return nt(0),{calculatedDuration:null,next:Ke=>{let Ye=!1;return!ke&&Se===void 0&&(Ye=!0,_e(Ke),nt(Ke)),Se!==void 0&&Ke>=Se?ke.next(Ke-Se):(!Ye&&_e(Ke),L)}}}const zm=(i,n,d)=>{const p=n-i;return p===0?1:(d-i)/p};function QI(i,n,d){const p=[],_=d||xc.mix||hT,S=i.length-1;for(let y=0;y<S;y++){let l=_(i[y],i[y+1]);if(n){const C=Array.isArray(n)?n[y]||Lo:n;l=Vm(C,l)}p.push(l)}return p}function JI(i,n,{clamp:d=!0,ease:p,mixer:_}={}){const S=i.length;if($v(S===n.length),S===1)return()=>n[0];if(S===2&&n[0]===n[1])return()=>n[1];const y=i[0]===i[1];i[0]>i[S-1]&&(i=[...i].reverse(),n=[...n].reverse());const l=QI(n,p,_),C=l.length,P=k=>{if(y&&k<i[0])return n[0];let O=0;if(C>1)for(;O<i.length-2&&!(k<i[O+1]);O++);const L=zm(i[O],i[O+1],k);return l[O](L)};return d?k=>P(bc(i[0],i[S-1],k)):P}function eD(i,n){const d=i[i.length-1];for(let p=1;p<=n;p++){const _=zm(0,n,p);i.push(gn(d,1,_))}}function tD(i){const n=[0];return eD(n,i.length-1),n}function rD(i,n){return i.map(d=>d*n)}const pT=(i,n,d)=>(((1-3*d+3*n)*i+(3*d-6*n))*i+3*n)*i,iD=1e-7,nD=12;function aD(i,n,d,p,_){let S,y,l=0;do y=n+(d-n)/2,S=pT(y,p,_)-i,S>0?d=y:n=y;while(Math.abs(S)>iD&&++l<nD);return y}function $m(i,n,d,p){if(i===n&&d===p)return Lo;const _=S=>aD(S,0,1,i,d);return S=>S===0||S===1?S:pT(_(S),n,p)}const sD=$m(.42,0,1,1),oD=$m(0,0,.58,1),mT=$m(.42,0,.58,1),lD=i=>Array.isArray(i)&&typeof i[0]!="number",gT=i=>n=>n<=.5?i(2*n)/2:(2-i(2*(1-n)))/2,yT=i=>n=>1-i(1-n),_T=$m(.33,1.53,.69,.99),sx=yT(_T),vT=gT(sx),xT=i=>(i*=2)<1?.5*sx(i):.5*(2-Math.pow(2,-10*(i-1))),ox=i=>1-Math.sin(Math.acos(i)),bT=yT(ox),wT=gT(ox),ST=i=>Array.isArray(i)&&typeof i[0]=="number",uD={linear:Lo,easeIn:sD,easeInOut:mT,easeOut:oD,circIn:ox,circInOut:wT,circOut:bT,backIn:sx,backInOut:vT,backOut:_T,anticipate:xT},cD=i=>typeof i=="string",cw=i=>{if(ST(i)){$v(i.length===4);const[n,d,p,_]=i;return $m(n,d,p,_)}else if(cD(i))return uD[i];return i};function hD(i,n){return i.map(()=>n||mT).splice(0,i.length-1)}function bm({duration:i=300,keyframes:n,times:d,ease:p="easeInOut"}){const _=lD(p)?p.map(cw):cw(p),S={done:!1,value:n[0]},y=rD(d&&d.length===n.length?d:tD(n),i),l=JI(y,n,{ease:Array.isArray(_)?_:hD(n,_)});return{calculatedDuration:i,next:C=>(S.value=l(C),S.done=C>=i,S)}}const dD=i=>i!==null;function lx(i,{repeat:n,repeatType:d="loop"},p,_=1){const S=i.filter(dD),l=_<0||n&&d!=="loop"&&n%2===1?0:S.length-1;return!l||p===void 0?S[l]:p}const fD={decay:sv,inertia:sv,tween:bm,keyframes:bm,spring:N_};function TT(i){typeof i.type=="string"&&(i.type=fD[i.type])}class ux{constructor(){this.count=0,this.updateFinished()}get finished(){return this._finished}updateFinished(){this.count++,this._finished=new Promise(n=>{this.resolve=n})}notifyFinished(){this.resolve()}then(n,d){return this.finished.then(n,d)}}const pD=i=>i/100;class MT extends ux{constructor(n){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:d}=this.options;if(d&&d.updatedAt!==Rs.now()&&this.tick(Rs.now()),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:p}=this.options;p&&p()},this.options=n,this.initAnimation(),this.play(),n.autoplay===!1&&this.pause()}initAnimation(){const{options:n}=this;TT(n);const{type:d=bm,repeat:p=0,repeatDelay:_=0,repeatType:S,velocity:y=0}=n;let{keyframes:l}=n;const C=d||bm;C!==bm&&typeof l[0]!="number"&&(this.mixKeyframes=Vm(pD,hT(l[0],l[1])),l=[0,100]);const P=C({...n,keyframes:l});S==="mirror"&&(this.mirroredGenerator=C({...n,keyframes:[...l].reverse(),velocity:-y})),P.calculatedDuration===null&&(P.calculatedDuration=ax(P));const{calculatedDuration:k}=P;this.calculatedDuration=k,this.resolvedDuration=k+_,this.totalDuration=this.resolvedDuration*(p+1)-_,this.generator=P}updateTime(n){const d=Math.round(n-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=d}tick(n,d=!1){const{generator:p,totalDuration:_,mixKeyframes:S,mirroredGenerator:y,resolvedDuration:l,calculatedDuration:C}=this;if(this.startTime===null)return p.next(0);const{delay:P=0,keyframes:k,repeat:O,repeatType:L,repeatDelay:F,type:G,onUpdate:ee,finalKeyframe:X}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-_/this.speed,this.startTime)),d?this.currentTime=n:this.updateTime(n);const W=this.currentTime-P*(this.playbackSpeed>=0?1:-1),pe=this.playbackSpeed>=0?W<0:W>_;this.currentTime=Math.max(W,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=_);let me=this.currentTime,_e=p;if(O){const Ke=Math.min(this.currentTime,_)/l;let Ye=Math.floor(Ke),ht=Ke%1;!ht&&Ke>=1&&(ht=1),ht===1&&Ye--,Ye=Math.min(Ye,O+1),!!(Ye%2)&&(L==="reverse"?(ht=1-ht,F&&(ht-=F/l)):L==="mirror"&&(_e=y)),me=bc(0,1,ht)*l}const Se=pe?{done:!1,value:k[0]}:_e.next(me);S&&(Se.value=S(Se.value));let{done:ke}=Se;!pe&&C!==null&&(ke=this.playbackSpeed>=0?this.currentTime>=_:this.currentTime<=0);const nt=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ke);return nt&&G!==sv&&(Se.value=lx(k,this.options,X,this.speed)),ee&&ee(Se.value),nt&&this.finish(),Se}then(n,d){return this.finished.then(n,d)}get duration(){return Au(this.calculatedDuration)}get time(){return Au(this.currentTime)}set time(n){n=Mu(n),this.currentTime=n,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.playbackSpeed)}get speed(){return this.playbackSpeed}set speed(n){this.updateTime(Rs.now());const d=this.playbackSpeed!==n;this.playbackSpeed=n,d&&(this.time=Au(this.currentTime))}play(){if(this.isStopped)return;const{driver:n=$I,onPlay:d,startTime:p}=this.options;this.driver||(this.driver=n(S=>this.tick(S))),d&&d();const _=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=_):this.holdTime!==null?this.startTime=_-this.holdTime:this.startTime||(this.startTime=p??_),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Rs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:n}=this.options;n&&n()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown()}teardown(){this.notifyFinished(),this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}attachTimeline(n){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),n.observe(this)}}function mD(i){for(let n=1;n<i.length;n++)i[n]??(i[n]=i[n-1])}const Fd=i=>i*180/Math.PI,ov=i=>{const n=Fd(Math.atan2(i[1],i[0]));return lv(n)},gD={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate:ov,rotateZ:ov,skewX:i=>Fd(Math.atan(i[1])),skewY:i=>Fd(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},lv=i=>(i=i%360,i<0&&(i+=360),i),hw=ov,dw=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),fw=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),yD={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:dw,scaleY:fw,scale:i=>(dw(i)+fw(i))/2,rotateX:i=>lv(Fd(Math.atan2(i[6],i[5]))),rotateY:i=>lv(Fd(Math.atan2(-i[2],i[0]))),rotateZ:hw,rotate:hw,skewX:i=>Fd(Math.atan(i[4])),skewY:i=>Fd(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function pw(i){return i.includes("scale")?1:0}function uv(i,n){if(!i||i==="none")return pw(n);const d=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let p,_;if(d)p=yD,_=d;else{const l=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);p=gD,_=l}if(!_)return pw(n);const S=p[n],y=_[1].split(",").map(vD);return typeof S=="function"?S(y):y[S]}const _D=(i,n)=>{const{transform:d="none"}=getComputedStyle(i);return uv(d,n)};function vD(i){return parseFloat(i.trim())}const mw=i=>i===hp||i===yr,xD=new Set(["x","y","z"]),bD=up.filter(i=>!xD.has(i));function wD(i){const n=[];return bD.forEach(d=>{const p=i.getValue(d);p!==void 0&&(n.push([d,p.get()]),p.set(d.startsWith("scale")?1:0))}),n}const ip={width:({x:i},{paddingLeft:n="0",paddingRight:d="0"})=>i.max-i.min-parseFloat(n)-parseFloat(d),height:({y:i},{paddingTop:n="0",paddingBottom:d="0"})=>i.max-i.min-parseFloat(n)-parseFloat(d),top:(i,{top:n})=>parseFloat(n),left:(i,{left:n})=>parseFloat(n),bottom:({y:i},{top:n})=>parseFloat(n)+(i.max-i.min),right:({x:i},{left:n})=>parseFloat(n)+(i.max-i.min),x:(i,{transform:n})=>uv(n,"x"),y:(i,{transform:n})=>uv(n,"y")};ip.translateX=ip.x;ip.translateY=ip.y;const $d=new Set;let cv=!1,hv=!1,dv=!1;function AT(){if(hv){const i=Array.from($d).filter(p=>p.needsMeasurement),n=new Set(i.map(p=>p.element)),d=new Map;n.forEach(p=>{const _=wD(p);_.length&&(d.set(p,_),p.render())}),i.forEach(p=>p.measureInitialState()),n.forEach(p=>{p.render();const _=d.get(p);_&&_.forEach(([S,y])=>{var l;(l=p.getValue(S))==null||l.set(y)})}),i.forEach(p=>p.measureEndState()),i.forEach(p=>{p.suspendedScrollY!==void 0&&window.scrollTo(0,p.suspendedScrollY)})}hv=!1,cv=!1,$d.forEach(i=>i.complete(dv)),$d.clear()}function CT(){$d.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(hv=!0)})}function SD(){dv=!0,CT(),AT(),dv=!1}class cx{constructor(n,d,p,_,S,y=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...n],this.onComplete=d,this.name=p,this.motionValue=_,this.element=S,this.isAsync=y}scheduleResolve(){this.isScheduled=!0,this.isAsync?($d.add(this),cv||(cv=!0,yn.read(CT),yn.resolveKeyframes(AT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:d,element:p,motionValue:_}=this;if(n[0]===null){const S=_==null?void 0:_.get(),y=n[n.length-1];if(S!==void 0)n[0]=S;else if(p&&d){const l=p.readValue(d,y);l!=null&&(n[0]=l)}n[0]===void 0&&(n[0]=y),_&&S===void 0&&_.set(n[0])}mD(n)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(n=!1){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,n),$d.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,$d.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const TD=i=>i.startsWith("--");function MD(i,n,d){TD(n)?i.style.setProperty(n,d):i.style[n]=d}function hx(i){let n;return()=>(n===void 0&&(n=i()),n)}const AD=hx(()=>window.ScrollTimeline!==void 0),CD={};function ED(i,n){const d=hx(i);return()=>CD[n]??d()}const ET=ED(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ym=([i,n,d,p])=>`cubic-bezier(${i}, ${n}, ${d}, ${p})`,gw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ym([0,.65,.55,1]),circOut:ym([.55,0,1,.45]),backIn:ym([.31,.01,.66,-.59]),backOut:ym([.33,1.53,.69,.99])};function PT(i,n){if(i)return typeof i=="function"?ET()?dT(i,n):"ease-out":ST(i)?ym(i):Array.isArray(i)?i.map(d=>PT(d,n)||gw.easeOut):gw[i]}function PD(i,n,d,{delay:p=0,duration:_=300,repeat:S=0,repeatType:y="loop",ease:l="easeOut",times:C}={},P=void 0){const k={[n]:d};C&&(k.offset=C);const O=PT(l,_);Array.isArray(O)&&(k.easing=O);const L={delay:p,duration:_,easing:Array.isArray(O)?"linear":O,fill:"both",iterations:S+1,direction:y==="reverse"?"alternate":"normal"};return P&&(L.pseudoElement=P),i.animate(k,L)}function RT(i){return typeof i=="function"&&"applyToOptions"in i}function RD({type:i,...n}){return RT(i)&&ET()?i.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}class ID extends ux{constructor(n){if(super(),this.finishedTime=null,this.isStopped=!1,!n)return;const{element:d,name:p,keyframes:_,pseudoElement:S,allowFlatten:y=!1,finalKeyframe:l,onComplete:C}=n;this.isPseudoElement=!!S,this.allowFlatten=y,this.options=n,$v(typeof n.type!="string");const P=RD(n);this.animation=PD(d,p,_,P,S),P.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!S){const k=lx(_,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(k):MD(d,p,k),this.animation.cancel()}C==null||C(),this.notifyFinished()},this.animation.oncancel=()=>this.notifyFinished()}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var n,d;(d=(n=this.animation).finish)==null||d.call(n)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:n}=this;n==="idle"||n==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,d;this.isPseudoElement||(d=(n=this.animation).commitStyles)==null||d.call(n)}get duration(){var d,p;const n=((p=(d=this.animation.effect)==null?void 0:d.getComputedTiming)==null?void 0:p.call(d).duration)||0;return Au(Number(n))}get time(){return Au(Number(this.animation.currentTime)||0)}set time(n){this.finishedTime=null,this.animation.currentTime=Mu(n)}get speed(){return this.animation.playbackRate}set speed(n){n<0&&(this.finishedTime=null),this.animation.playbackRate=n}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(n){this.animation.startTime=n}attachTimeline({timeline:n,observe:d}){var p;return this.allowFlatten&&((p=this.animation.effect)==null||p.updateTiming({easing:"linear"})),this.animation.onfinish=null,n&&AD()?(this.animation.timeline=n,Lo):d(this)}}const IT={anticipate:xT,backInOut:vT,circInOut:wT};function DD(i){return i in IT}function zD(i){typeof i.ease=="string"&&DD(i.ease)&&(i.ease=IT[i.ease])}const yw=10;class LD extends ID{constructor(n){zD(n),TT(n),super(n),n.startTime&&(this.startTime=n.startTime),this.options=n}updateMotionValue(n){const{motionValue:d,onUpdate:p,onComplete:_,element:S,...y}=this.options;if(!d)return;if(n!==void 0){d.set(n);return}const l=new MT({...y,autoplay:!1}),C=Mu(this.finishedTime??this.time);d.setWithVelocity(l.sample(C-yw).value,l.sample(C).value,yw),l.stop()}}const _w=(i,n)=>n==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(Ch.test(i)||i==="0")&&!i.startsWith("url("));function kD(i){const n=i[0];if(i.length===1)return!0;for(let d=0;d<i.length;d++)if(i[d]!==n)return!0}function BD(i,n,d,p){const _=i[0];if(_===null)return!1;if(n==="display"||n==="visibility")return!0;const S=i[i.length-1],y=_w(_,n),l=_w(S,n);return!y||!l?!1:kD(i)||(d==="spring"||RT(d))&&p}const OD=new Set(["opacity","clipPath","filter","transform"]),jD=hx(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function ND(i){const{motionValue:n,name:d,repeatDelay:p,repeatType:_,damping:S,type:y}=i;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:C}=n.owner.getProps();return jD()&&d&&OD.has(d)&&(d!=="transform"||!C)&&!l&&!p&&_!=="mirror"&&S!==0&&y!=="inertia"}const FD=40;class UD extends ux{constructor({autoplay:n=!0,delay:d=0,type:p="keyframes",repeat:_=0,repeatDelay:S=0,repeatType:y="loop",keyframes:l,name:C,motionValue:P,element:k,...O}){var G;super(),this.stop=()=>{var ee,X;this._animation?(this._animation.stop(),(ee=this.stopTimeline)==null||ee.call(this)):(X=this.keyframeResolver)==null||X.cancel()},this.createdAt=Rs.now();const L={autoplay:n,delay:d,type:p,repeat:_,repeatDelay:S,repeatType:y,name:C,motionValue:P,element:k,...O},F=(k==null?void 0:k.KeyframeResolver)||cx;this.keyframeResolver=new F(l,(ee,X,W)=>this.onKeyframesResolved(ee,X,L,!W),C,P,k),(G=this.keyframeResolver)==null||G.scheduleResolve()}onKeyframesResolved(n,d,p,_){this.keyframeResolver=void 0;const{name:S,type:y,velocity:l,delay:C,isHandoff:P,onUpdate:k}=p;this.resolvedAt=Rs.now(),BD(n,S,y,l)||((xc.instantAnimations||!C)&&(k==null||k(lx(n,p,d))),n[0]=n[n.length-1],p.duration=0,p.repeat=0);const L={startTime:_?this.resolvedAt?this.resolvedAt-this.createdAt>FD?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:d,...p,keyframes:n},F=!P&&ND(L)?new LD({...L,element:L.motionValue.owner.current}):new MT(L);F.finished.then(()=>this.notifyFinished()).catch(Lo),this.pendingTimeline&&(this.stopTimeline=F.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=F}get finished(){return this._animation?this.animation.finished:this._finished}then(n,d){return this.finished.finally(n).then(()=>{})}get animation(){return this._animation||SD(),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(n){this.animation.time=n}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(n){this.animation.speed=n}get startTime(){return this.animation.startTime}attachTimeline(n){return this._animation?this.stopTimeline=this.animation.attachTimeline(n):this.pendingTimeline=n,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this.animation.cancel()}}const dx=(i,n,d,p={},_,S)=>y=>{const l=tx(p,i)||{},C=l.delay||p.delay||0;let{elapsed:P=0}=p;P=P-Mu(C);const k={keyframes:Array.isArray(d)?d:[null,d],ease:"easeOut",velocity:n.getVelocity(),...l,delay:-P,onUpdate:L=>{n.set(L),l.onUpdate&&l.onUpdate(L)},onComplete:()=>{y(),l.onComplete&&l.onComplete()},name:i,motionValue:n,element:S?void 0:_};wI(l)||Object.assign(k,bI(i,k)),k.duration&&(k.duration=Mu(k.duration)),k.repeatDelay&&(k.repeatDelay=Mu(k.repeatDelay)),k.from!==void 0&&(k.keyframes[0]=k.from);let O=!1;if((k.type===!1||k.duration===0&&!k.repeatDelay)&&(k.duration=0,k.delay===0&&(O=!0)),(xc.instantAnimations||xc.skipAnimations)&&(O=!0,k.duration=0,k.delay=0),k.allowFlatten=!l.type&&!l.ease,O&&!S&&n.get()!==void 0){const L=gI(k.keyframes,l);if(L!==void 0){yn.update(()=>{k.onUpdate(L),k.onComplete()});return}}return new UD(k)},DT=new Set(["width","height","top","left","right","bottom",...up]);function VD({protectedKeys:i,needsAnimating:n},d){const p=i.hasOwnProperty(d)&&n[d]!==!0;return n[d]=!1,p}function zT(i,n,{delay:d=0,transitionOverride:p,type:_}={}){let{transition:S=i.getDefaultTransition(),transitionEnd:y,...l}=n;p&&(S=p);const C=[],P=_&&i.animationState&&i.animationState.getState()[_];for(const k in l){const O=i.getValue(k,i.latestValues[k]??null),L=l[k];if(L===void 0||P&&VD(P,k))continue;const F={delay:d,...tx(S||{},k)},G=O.get();if(G!==void 0&&!O.isAnimating&&!Array.isArray(L)&&L===G&&!F.velocity)continue;let ee=!1;if(window.MotionHandoffAnimation){const W=nT(i);if(W){const pe=window.MotionHandoffAnimation(W,k,yn);pe!==null&&(F.startTime=pe,ee=!0)}}rv(i,k),O.start(dx(k,O,L,i.shouldReduceMotion&&DT.has(k)?{type:!1}:F,i,ee));const X=O.animation;X&&C.push(X)}return y&&Promise.all(C).then(()=>{yn.update(()=>{y&&fI(i,y)})}),C}function fv(i,n,d={}){var C;const p=Rm(i,n,d.type==="exit"?(C=i.presenceContext)==null?void 0:C.custom:void 0);let{transition:_=i.getDefaultTransition()||{}}=p||{};d.transitionOverride&&(_=d.transitionOverride);const S=p?()=>Promise.all(zT(i,p,d)):()=>Promise.resolve(),y=i.variantChildren&&i.variantChildren.size?(P=0)=>{const{delayChildren:k=0,staggerChildren:O,staggerDirection:L}=_;return $D(i,n,k+P,O,L,d)}:()=>Promise.resolve(),{when:l}=_;if(l){const[P,k]=l==="beforeChildren"?[S,y]:[y,S];return P().then(()=>k())}else return Promise.all([S(),y(d.delay)])}function $D(i,n,d=0,p=0,_=1,S){const y=[],l=(i.variantChildren.size-1)*p,C=_===1?(P=0)=>P*p:(P=0)=>l-P*p;return Array.from(i.variantChildren).sort(ZD).forEach((P,k)=>{P.notify("AnimationStart",n),y.push(fv(P,n,{...S,delay:d+C(k)}).then(()=>P.notify("AnimationComplete",n)))}),Promise.all(y)}function ZD(i,n){return i.sortNodePosition(n)}function qD(i,n,d={}){i.notify("AnimationStart",n);let p;if(Array.isArray(n)){const _=n.map(S=>fv(i,S,d));p=Promise.all(_)}else if(typeof n=="string")p=fv(i,n,d);else{const _=typeof n=="function"?Rm(i,n,d.custom):n;p=Promise.all(zT(i,_,d))}return p.then(()=>{i.notify("AnimationComplete",n)})}function LT(i,n){if(!Array.isArray(n))return!1;const d=n.length;if(d!==i.length)return!1;for(let p=0;p<d;p++)if(n[p]!==i[p])return!1;return!0}const GD=Fv.length;function kT(i){if(!i)return;if(!i.isControllingVariants){const d=i.parent?kT(i.parent)||{}:{};return i.props.initial!==void 0&&(d.initial=i.props.initial),d}const n={};for(let d=0;d<GD;d++){const p=Fv[d],_=i.props[p];(Cm(_)||_===!1)&&(n[p]=_)}return n}const HD=[...Nv].reverse(),WD=Nv.length;function KD(i){return n=>Promise.all(n.map(({animation:d,options:p})=>qD(i,d,p)))}function YD(i){let n=KD(i),d=vw(),p=!0;const _=C=>(P,k)=>{var L;const O=Rm(i,k,C==="exit"?(L=i.presenceContext)==null?void 0:L.custom:void 0);if(O){const{transition:F,transitionEnd:G,...ee}=O;P={...P,...ee,...G}}return P};function S(C){n=C(i)}function y(C){const{props:P}=i,k=kT(i.parent)||{},O=[],L=new Set;let F={},G=1/0;for(let X=0;X<WD;X++){const W=HD[X],pe=d[W],me=P[W]!==void 0?P[W]:k[W],_e=Cm(me),Se=W===C?pe.isActive:null;Se===!1&&(G=X);let ke=me===k[W]&&me!==P[W]&&_e;if(ke&&p&&i.manuallyAnimateOnMount&&(ke=!1),pe.protectedKeys={...F},!pe.isActive&&Se===null||!me&&!pe.prevProp||n0(me)||typeof me=="boolean")continue;const nt=XD(pe.prevProp,me);let Ke=nt||W===C&&pe.isActive&&!ke&&_e||X>G&&_e,Ye=!1;const ht=Array.isArray(me)?me:[me];let kt=ht.reduce(_(W),{});Se===!1&&(kt={});const{prevResolvedValues:sr={}}=pe,ir={...sr,...kt},Xt=Nt=>{Ke=!0,L.has(Nt)&&(Ye=!0,L.delete(Nt)),pe.needsAnimating[Nt]=!0;const Rt=i.getValue(Nt);Rt&&(Rt.liveStyle=!1)};for(const Nt in ir){const Rt=kt[Nt],dr=sr[Nt];if(F.hasOwnProperty(Nt))continue;let De=!1;tv(Rt)&&tv(dr)?De=!LT(Rt,dr):De=Rt!==dr,De?Rt!=null?Xt(Nt):L.add(Nt):Rt!==void 0&&L.has(Nt)?Xt(Nt):pe.protectedKeys[Nt]=!0}pe.prevProp=me,pe.prevResolvedValues=kt,pe.isActive&&(F={...F,...kt}),p&&i.blockInitialAnimation&&(Ke=!1),Ke&&(!(ke&&nt)||Ye)&&O.push(...ht.map(Nt=>({animation:Nt,options:{type:W}})))}if(L.size){const X={};if(typeof P.initial!="boolean"){const W=Rm(i,Array.isArray(P.initial)?P.initial[0]:P.initial);W&&W.transition&&(X.transition=W.transition)}L.forEach(W=>{const pe=i.getBaseTarget(W),me=i.getValue(W);me&&(me.liveStyle=!0),X[W]=pe??null}),O.push({animation:X})}let ee=!!O.length;return p&&(P.initial===!1||P.initial===P.animate)&&!i.manuallyAnimateOnMount&&(ee=!1),p=!1,ee?n(O):Promise.resolve()}function l(C,P){var O;if(d[C].isActive===P)return Promise.resolve();(O=i.variantChildren)==null||O.forEach(L=>{var F;return(F=L.animationState)==null?void 0:F.setActive(C,P)}),d[C].isActive=P;const k=y(C);for(const L in d)d[L].protectedKeys={};return k}return{animateChanges:y,setActive:l,setAnimateFunction:S,getState:()=>d,reset:()=>{d=vw(),p=!0}}}function XD(i,n){return typeof n=="string"?n!==i:Array.isArray(n)?!LT(n,i):!1}function Ld(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function vw(){return{animate:Ld(!0),whileInView:Ld(),whileHover:Ld(),whileTap:Ld(),whileDrag:Ld(),whileFocus:Ld(),exit:Ld()}}class Ph{constructor(n){this.isMounted=!1,this.node=n}update(){}}class QD extends Ph{constructor(n){super(n),n.animationState||(n.animationState=YD(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();n0(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:d}=this.node.prevProps||{};n!==d&&this.updateAnimationControlsSubscription()}unmount(){var n;this.node.animationState.reset(),(n=this.unmountControls)==null||n.call(this)}}let JD=0;class e5 extends Ph{constructor(){super(...arguments),this.id=JD++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:d}=this.node.presenceContext,{isPresent:p}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===p)return;const _=this.node.animationState.setActive("exit",!n);d&&!n&&_.then(()=>{d(this.id)})}mount(){const{register:n,onExitComplete:d}=this.node.presenceContext||{};d&&d(this.id),n&&(this.unmount=n(this.id))}unmount(){}}const t5={animation:{Feature:QD},exit:{Feature:e5}};function Lm(i,n,d,p={passive:!0}){return i.addEventListener(n,d,p),()=>i.removeEventListener(n,d)}const fx=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1;function Zm(i){return{point:{x:i.pageX,y:i.pageY}}}const r5=i=>n=>fx(n)&&i(n,Zm(n));function wm(i,n,d,p){return Lm(i,n,r5(d),p)}function BT({top:i,left:n,right:d,bottom:p}){return{x:{min:n,max:d},y:{min:i,max:p}}}function i5({x:i,y:n}){return{top:n.min,right:i.max,bottom:n.max,left:i.min}}function n5(i,n){if(!n)return i;const d=n({x:i.left,y:i.top}),p=n({x:i.right,y:i.bottom});return{top:d.y,left:d.x,bottom:p.y,right:p.x}}const OT=1e-4,a5=1-OT,s5=1+OT,jT=.01,o5=0-jT,l5=0+jT;function cs(i){return i.max-i.min}function u5(i,n,d){return Math.abs(i-n)<=d}function xw(i,n,d,p=.5){i.origin=p,i.originPoint=gn(n.min,n.max,i.origin),i.scale=cs(d)/cs(n),i.translate=gn(d.min,d.max,i.origin)-i.originPoint,(i.scale>=a5&&i.scale<=s5||isNaN(i.scale))&&(i.scale=1),(i.translate>=o5&&i.translate<=l5||isNaN(i.translate))&&(i.translate=0)}function Sm(i,n,d,p){xw(i.x,n.x,d.x,p?p.originX:void 0),xw(i.y,n.y,d.y,p?p.originY:void 0)}function bw(i,n,d){i.min=d.min+n.min,i.max=i.min+cs(n)}function c5(i,n,d){bw(i.x,n.x,d.x),bw(i.y,n.y,d.y)}function ww(i,n,d){i.min=n.min-d.min,i.max=i.min+cs(n)}function Tm(i,n,d){ww(i.x,n.x,d.x),ww(i.y,n.y,d.y)}const Sw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Qf=()=>({x:Sw(),y:Sw()}),Tw=()=>({min:0,max:0}),On=()=>({x:Tw(),y:Tw()});function zo(i){return[i("x"),i("y")]}function k0(i){return i===void 0||i===1}function pv({scale:i,scaleX:n,scaleY:d}){return!k0(i)||!k0(n)||!k0(d)}function Bd(i){return pv(i)||NT(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function NT(i){return Mw(i.x)||Mw(i.y)}function Mw(i){return i&&i!=="0%"}function F_(i,n,d){const p=i-d,_=n*p;return d+_}function Aw(i,n,d,p,_){return _!==void 0&&(i=F_(i,_,p)),F_(i,d,p)+n}function mv(i,n=0,d=1,p,_){i.min=Aw(i.min,n,d,p,_),i.max=Aw(i.max,n,d,p,_)}function FT(i,{x:n,y:d}){mv(i.x,n.translate,n.scale,n.originPoint),mv(i.y,d.translate,d.scale,d.originPoint)}const Cw=.999999999999,Ew=1.0000000000001;function h5(i,n,d,p=!1){const _=d.length;if(!_)return;n.x=n.y=1;let S,y;for(let l=0;l<_;l++){S=d[l],y=S.projectionDelta;const{visualElement:C}=S.options;C&&C.props.style&&C.props.style.display==="contents"||(p&&S.options.layoutScroll&&S.scroll&&S!==S.root&&ep(i,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),y&&(n.x*=y.x.scale,n.y*=y.y.scale,FT(i,y)),p&&Bd(S.latestValues)&&ep(i,S.latestValues))}n.x<Ew&&n.x>Cw&&(n.x=1),n.y<Ew&&n.y>Cw&&(n.y=1)}function Jf(i,n){i.min=i.min+n,i.max=i.max+n}function Pw(i,n,d,p,_=.5){const S=gn(i.min,i.max,_);mv(i,n,d,S,p)}function ep(i,n){Pw(i.x,n.x,n.scaleX,n.scale,n.originX),Pw(i.y,n.y,n.scaleY,n.scale,n.originY)}function UT(i,n){return BT(n5(i.getBoundingClientRect(),n))}function d5(i,n,d){const p=UT(i,d),{scroll:_}=n;return _&&(Jf(p.x,_.offset.x),Jf(p.y,_.offset.y)),p}const VT=({current:i})=>i?i.ownerDocument.defaultView:null,Rw=(i,n)=>Math.abs(i-n);function f5(i,n){const d=Rw(i.x,n.x),p=Rw(i.y,n.y);return Math.sqrt(d**2+p**2)}class $T{constructor(n,d,{transformPagePoint:p,contextWindow:_,dragSnapToOrigin:S=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const O=O0(this.lastMoveEventInfo,this.history),L=this.startEvent!==null,F=f5(O.offset,{x:0,y:0})>=3;if(!L&&!F)return;const{point:G}=O,{timestamp:ee}=ba;this.history.push({...G,timestamp:ee});const{onStart:X,onMove:W}=this.handlers;L||(X&&X(this.lastMoveEvent,O),this.startEvent=this.lastMoveEvent),W&&W(this.lastMoveEvent,O)},this.handlePointerMove=(O,L)=>{this.lastMoveEvent=O,this.lastMoveEventInfo=B0(L,this.transformPagePoint),yn.update(this.updatePoint,!0)},this.handlePointerUp=(O,L)=>{this.end();const{onEnd:F,onSessionEnd:G,resumeAnimation:ee}=this.handlers;if(this.dragSnapToOrigin&&ee&&ee(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const X=O0(O.type==="pointercancel"?this.lastMoveEventInfo:B0(L,this.transformPagePoint),this.history);this.startEvent&&F&&F(O,X),G&&G(O,X)},!fx(n))return;this.dragSnapToOrigin=S,this.handlers=d,this.transformPagePoint=p,this.contextWindow=_||window;const y=Zm(n),l=B0(y,this.transformPagePoint),{point:C}=l,{timestamp:P}=ba;this.history=[{...C,timestamp:P}];const{onSessionStart:k}=d;k&&k(n,O0(l,this.history)),this.removeListeners=Vm(wm(this.contextWindow,"pointermove",this.handlePointerMove),wm(this.contextWindow,"pointerup",this.handlePointerUp),wm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),Ah(this.updatePoint)}}function B0(i,n){return n?{point:n(i.point)}:i}function Iw(i,n){return{x:i.x-n.x,y:i.y-n.y}}function O0({point:i},n){return{point:i,delta:Iw(i,ZT(n)),offset:Iw(i,p5(n)),velocity:m5(n,.1)}}function p5(i){return i[0]}function ZT(i){return i[i.length-1]}function m5(i,n){if(i.length<2)return{x:0,y:0};let d=i.length-1,p=null;const _=ZT(i);for(;d>=0&&(p=i[d],!(_.timestamp-p.timestamp>Mu(n)));)d--;if(!p)return{x:0,y:0};const S=Au(_.timestamp-p.timestamp);if(S===0)return{x:0,y:0};const y={x:(_.x-p.x)/S,y:(_.y-p.y)/S};return y.x===1/0&&(y.x=0),y.y===1/0&&(y.y=0),y}function g5(i,{min:n,max:d},p){return n!==void 0&&i<n?i=p?gn(n,i,p.min):Math.max(i,n):d!==void 0&&i>d&&(i=p?gn(d,i,p.max):Math.min(i,d)),i}function Dw(i,n,d){return{min:n!==void 0?i.min+n:void 0,max:d!==void 0?i.max+d-(i.max-i.min):void 0}}function y5(i,{top:n,left:d,bottom:p,right:_}){return{x:Dw(i.x,d,_),y:Dw(i.y,n,p)}}function zw(i,n){let d=n.min-i.min,p=n.max-i.max;return n.max-n.min<i.max-i.min&&([d,p]=[p,d]),{min:d,max:p}}function _5(i,n){return{x:zw(i.x,n.x),y:zw(i.y,n.y)}}function v5(i,n){let d=.5;const p=cs(i),_=cs(n);return _>p?d=zm(n.min,n.max-p,i.min):p>_&&(d=zm(i.min,i.max-_,n.min)),bc(0,1,d)}function x5(i,n){const d={};return n.min!==void 0&&(d.min=n.min-i.min),n.max!==void 0&&(d.max=n.max-i.min),d}const gv=.35;function b5(i=gv){return i===!1?i=0:i===!0&&(i=gv),{x:Lw(i,"left","right"),y:Lw(i,"top","bottom")}}function Lw(i,n,d){return{min:kw(i,n),max:kw(i,d)}}function kw(i,n){return typeof i=="number"?i:i[n]||0}const Ml={x:!1,y:!1};function qT(){return Ml.x||Ml.y}function w5(i){return i==="x"||i==="y"?Ml[i]?null:(Ml[i]=!0,()=>{Ml[i]=!1}):Ml.x||Ml.y?null:(Ml.x=Ml.y=!0,()=>{Ml.x=Ml.y=!1})}const S5=new WeakMap;class T5{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=On(),this.visualElement=n}start(n,{snapToCursor:d=!1}={}){const{presenceContext:p}=this.visualElement;if(p&&p.isPresent===!1)return;const _=k=>{const{dragSnapToOrigin:O}=this.getProps();O?this.pauseAnimation():this.stopAnimation(),d&&this.snapToCursor(Zm(k).point)},S=(k,O)=>{const{drag:L,dragPropagation:F,onDragStart:G}=this.getProps();if(L&&!F&&(this.openDragLock&&this.openDragLock(),this.openDragLock=w5(L),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zo(X=>{let W=this.getAxisMotionValue(X).get()||0;if(Tu.test(W)){const{projection:pe}=this.visualElement;if(pe&&pe.layout){const me=pe.layout.layoutBox[X];me&&(W=cs(me)*(parseFloat(W)/100))}}this.originPoint[X]=W}),G&&yn.postRender(()=>G(k,O)),rv(this.visualElement,"transform");const{animationState:ee}=this.visualElement;ee&&ee.setActive("whileDrag",!0)},y=(k,O)=>{const{dragPropagation:L,dragDirectionLock:F,onDirectionLock:G,onDrag:ee}=this.getProps();if(!L&&!this.openDragLock)return;const{offset:X}=O;if(F&&this.currentDirection===null){this.currentDirection=M5(X),this.currentDirection!==null&&G&&G(this.currentDirection);return}this.updateAxis("x",O.point,X),this.updateAxis("y",O.point,X),this.visualElement.render(),ee&&ee(k,O)},l=(k,O)=>this.stop(k,O),C=()=>zo(k=>{var O;return this.getAnimationState(k)==="paused"&&((O=this.getAxisMotionValue(k).animation)==null?void 0:O.play())}),{dragSnapToOrigin:P}=this.getProps();this.panSession=new $T(n,{onSessionStart:_,onStart:S,onMove:y,onSessionEnd:l,resumeAnimation:C},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:P,contextWindow:VT(this.visualElement)})}stop(n,d){const p=this.isDragging;if(this.cancel(),!p)return;const{velocity:_}=d;this.startAnimation(_);const{onDragEnd:S}=this.getProps();S&&yn.postRender(()=>S(n,d))}cancel(){this.isDragging=!1;const{projection:n,animationState:d}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:p}=this.getProps();!p&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),d&&d.setActive("whileDrag",!1)}updateAxis(n,d,p){const{drag:_}=this.getProps();if(!p||!y_(n,_,this.currentDirection))return;const S=this.getAxisMotionValue(n);let y=this.originPoint[n]+p[n];this.constraints&&this.constraints[n]&&(y=g5(y,this.constraints[n],this.elastic[n])),S.set(y)}resolveConstraints(){var S;const{dragConstraints:n,dragElastic:d}=this.getProps(),p=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(S=this.visualElement.projection)==null?void 0:S.layout,_=this.constraints;n&&Yf(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&p?this.constraints=y5(p.layoutBox,n):this.constraints=!1,this.elastic=b5(d),_!==this.constraints&&p&&this.constraints&&!this.hasMutatedConstraints&&zo(y=>{this.constraints!==!1&&this.getAxisMotionValue(y)&&(this.constraints[y]=x5(p.layoutBox[y],this.constraints[y]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:d}=this.getProps();if(!n||!Yf(n))return!1;const p=n.current,{projection:_}=this.visualElement;if(!_||!_.layout)return!1;const S=d5(p,_.root,this.visualElement.getTransformPagePoint());let y=_5(_.layout.layoutBox,S);if(d){const l=d(i5(y));this.hasMutatedConstraints=!!l,l&&(y=BT(l))}return y}startAnimation(n){const{drag:d,dragMomentum:p,dragElastic:_,dragTransition:S,dragSnapToOrigin:y,onDragTransitionEnd:l}=this.getProps(),C=this.constraints||{},P=zo(k=>{if(!y_(k,d,this.currentDirection))return;let O=C&&C[k]||{};y&&(O={min:0,max:0});const L=_?200:1e6,F=_?40:1e7,G={type:"inertia",velocity:p?n[k]:0,bounceStiffness:L,bounceDamping:F,timeConstant:750,restDelta:1,restSpeed:10,...S,...O};return this.startAxisValueAnimation(k,G)});return Promise.all(P).then(l)}startAxisValueAnimation(n,d){const p=this.getAxisMotionValue(n);return rv(this.visualElement,n),p.start(dx(n,p,0,d,this.visualElement,!1))}stopAnimation(){zo(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){zo(n=>{var d;return(d=this.getAxisMotionValue(n).animation)==null?void 0:d.pause()})}getAnimationState(n){var d;return(d=this.getAxisMotionValue(n).animation)==null?void 0:d.state}getAxisMotionValue(n){const d=`_drag${n.toUpperCase()}`,p=this.visualElement.getProps(),_=p[d];return _||this.visualElement.getValue(n,(p.initial?p.initial[n]:void 0)||0)}snapToCursor(n){zo(d=>{const{drag:p}=this.getProps();if(!y_(d,p,this.currentDirection))return;const{projection:_}=this.visualElement,S=this.getAxisMotionValue(d);if(_&&_.layout){const{min:y,max:l}=_.layout.layoutBox[d];S.set(n[d]-gn(y,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:d}=this.getProps(),{projection:p}=this.visualElement;if(!Yf(d)||!p||!this.constraints)return;this.stopAnimation();const _={x:0,y:0};zo(y=>{const l=this.getAxisMotionValue(y);if(l&&this.constraints!==!1){const C=l.get();_[y]=v5({min:C,max:C},this.constraints[y])}});const{transformTemplate:S}=this.visualElement.getProps();this.visualElement.current.style.transform=S?S({},""):"none",p.root&&p.root.updateScroll(),p.updateLayout(),this.resolveConstraints(),zo(y=>{if(!y_(y,n,null))return;const l=this.getAxisMotionValue(y),{min:C,max:P}=this.constraints[y];l.set(gn(C,P,_[y]))})}addListeners(){if(!this.visualElement.current)return;S5.set(this.visualElement,this);const n=this.visualElement.current,d=wm(n,"pointerdown",C=>{const{drag:P,dragListener:k=!0}=this.getProps();P&&k&&this.start(C)}),p=()=>{const{dragConstraints:C}=this.getProps();Yf(C)&&C.current&&(this.constraints=this.resolveRefConstraints())},{projection:_}=this.visualElement,S=_.addEventListener("measure",p);_&&!_.layout&&(_.root&&_.root.updateScroll(),_.updateLayout()),yn.read(p);const y=Lm(window,"resize",()=>this.scalePositionWithinConstraints()),l=_.addEventListener("didUpdate",({delta:C,hasLayoutChanged:P})=>{this.isDragging&&P&&(zo(k=>{const O=this.getAxisMotionValue(k);O&&(this.originPoint[k]+=C[k].translate,O.set(O.get()+C[k].translate))}),this.visualElement.render())});return()=>{y(),d(),S(),l&&l()}}getProps(){const n=this.visualElement.getProps(),{drag:d=!1,dragDirectionLock:p=!1,dragPropagation:_=!1,dragConstraints:S=!1,dragElastic:y=gv,dragMomentum:l=!0}=n;return{...n,drag:d,dragDirectionLock:p,dragPropagation:_,dragConstraints:S,dragElastic:y,dragMomentum:l}}}function y_(i,n,d){return(n===!0||n===i)&&(d===null||d===i)}function M5(i,n=10){let d=null;return Math.abs(i.y)>n?d="y":Math.abs(i.x)>n&&(d="x"),d}class A5 extends Ph{constructor(n){super(n),this.removeGroupControls=Lo,this.removeListeners=Lo,this.controls=new T5(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Lo}unmount(){this.removeGroupControls(),this.removeListeners()}}const Bw=i=>(n,d)=>{i&&yn.postRender(()=>i(n,d))};class C5 extends Ph{constructor(){super(...arguments),this.removePointerDownListener=Lo}onPointerDown(n){this.session=new $T(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:VT(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:d,onPan:p,onPanEnd:_}=this.node.getProps();return{onSessionStart:Bw(n),onStart:Bw(d),onMove:p,onEnd:(S,y)=>{delete this.session,_&&yn.postRender(()=>_(S,y))}}}mount(){this.removePointerDownListener=wm(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const R_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ow(i,n){return n.max===n.min?0:i/(n.max-n.min)*100}const pm={correct:(i,n)=>{if(!n.target)return i;if(typeof i=="string")if(yr.test(i))i=parseFloat(i);else return i;const d=Ow(i,n.target.x),p=Ow(i,n.target.y);return`${d}% ${p}%`}},E5={correct:(i,{treeScale:n,projectionDelta:d})=>{const p=i,_=Ch.parse(i);if(_.length>5)return p;const S=Ch.createTransformer(i),y=typeof _[0]!="number"?1:0,l=d.x.scale*n.x,C=d.y.scale*n.y;_[0+y]/=l,_[1+y]/=C;const P=gn(l,C,.5);return typeof _[2+y]=="number"&&(_[2+y]/=P),typeof _[3+y]=="number"&&(_[3+y]/=P),S(_)}};class P5 extends se.Component{componentDidMount(){const{visualElement:n,layoutGroup:d,switchLayoutGroup:p,layoutId:_}=this.props,{projection:S}=n;U3(R5),S&&(d.group&&d.group.add(S),p&&p.register&&_&&p.register(S),S.root.didUpdate(),S.addEventListener("animationComplete",()=>{this.safeToRemove()}),S.setOptions({...S.options,onExitComplete:()=>this.safeToRemove()})),R_.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:d,visualElement:p,drag:_,isPresent:S}=this.props,y=p.projection;return y&&(y.isPresent=S,_||n.layoutDependency!==d||d===void 0||n.isPresent!==S?y.willUpdate():this.safeToRemove(),n.isPresent!==S&&(S?y.promote():y.relegate()||yn.postRender(()=>{const l=y.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),Vv.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:d,switchLayoutGroup:p}=this.props,{projection:_}=n;_&&(_.scheduleCheckAfterUnmount(),d&&d.group&&d.group.remove(_),p&&p.deregister&&p.deregister(_))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function GT(i){const[n,d]=NS(),p=se.useContext(kv);return q.jsx(P5,{...i,layoutGroup:p,switchLayoutGroup:se.useContext(GS),isPresent:n,safeToRemove:d})}const R5={borderRadius:{...pm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:pm,borderTopRightRadius:pm,borderBottomLeftRadius:pm,borderBottomRightRadius:pm,boxShadow:E5};function I5(i,n,d){const p=$a(i)?i:Im(i);return p.start(dx("",p,n,d)),p.animation}function D5(i){return i instanceof SVGElement&&i.tagName!=="svg"}const z5=(i,n)=>i.depth-n.depth;class L5{constructor(){this.children=[],this.isDirty=!1}add(n){Qv(this.children,n),this.isDirty=!0}remove(n){Jv(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(z5),this.isDirty=!1,this.children.forEach(n)}}function k5(i,n){const d=Rs.now(),p=({timestamp:_})=>{const S=_-d;S>=n&&(Ah(p),i(S-n))};return yn.setup(p,!0),()=>Ah(p)}const HT=["TopLeft","TopRight","BottomLeft","BottomRight"],B5=HT.length,jw=i=>typeof i=="string"?parseFloat(i):i,Nw=i=>typeof i=="number"||yr.test(i);function O5(i,n,d,p,_,S){_?(i.opacity=gn(0,d.opacity??1,j5(p)),i.opacityExit=gn(n.opacity??1,0,N5(p))):S&&(i.opacity=gn(n.opacity??1,d.opacity??1,p));for(let y=0;y<B5;y++){const l=`border${HT[y]}Radius`;let C=Fw(n,l),P=Fw(d,l);if(C===void 0&&P===void 0)continue;C||(C=0),P||(P=0),C===0||P===0||Nw(C)===Nw(P)?(i[l]=Math.max(gn(jw(C),jw(P),p),0),(Tu.test(P)||Tu.test(C))&&(i[l]+="%")):i[l]=P}(n.rotate||d.rotate)&&(i.rotate=gn(n.rotate||0,d.rotate||0,p))}function Fw(i,n){return i[n]!==void 0?i[n]:i.borderRadius}const j5=WT(0,.5,bT),N5=WT(.5,.95,Lo);function WT(i,n,d){return p=>p<i?0:p>n?1:d(zm(i,n,p))}function Uw(i,n){i.min=n.min,i.max=n.max}function Do(i,n){Uw(i.x,n.x),Uw(i.y,n.y)}function Vw(i,n){i.translate=n.translate,i.scale=n.scale,i.originPoint=n.originPoint,i.origin=n.origin}function $w(i,n,d,p,_){return i-=n,i=F_(i,1/d,p),_!==void 0&&(i=F_(i,1/_,p)),i}function F5(i,n=0,d=1,p=.5,_,S=i,y=i){if(Tu.test(n)&&(n=parseFloat(n),n=gn(y.min,y.max,n/100)-y.min),typeof n!="number")return;let l=gn(S.min,S.max,p);i===S&&(l-=n),i.min=$w(i.min,n,d,l,_),i.max=$w(i.max,n,d,l,_)}function Zw(i,n,[d,p,_],S,y){F5(i,n[d],n[p],n[_],n.scale,S,y)}const U5=["x","scaleX","originX"],V5=["y","scaleY","originY"];function qw(i,n,d,p){Zw(i.x,n,U5,d?d.x:void 0,p?p.x:void 0),Zw(i.y,n,V5,d?d.y:void 0,p?p.y:void 0)}function Gw(i){return i.translate===0&&i.scale===1}function KT(i){return Gw(i.x)&&Gw(i.y)}function Hw(i,n){return i.min===n.min&&i.max===n.max}function $5(i,n){return Hw(i.x,n.x)&&Hw(i.y,n.y)}function Ww(i,n){return Math.round(i.min)===Math.round(n.min)&&Math.round(i.max)===Math.round(n.max)}function YT(i,n){return Ww(i.x,n.x)&&Ww(i.y,n.y)}function Kw(i){return cs(i.x)/cs(i.y)}function Yw(i,n){return i.translate===n.translate&&i.scale===n.scale&&i.originPoint===n.originPoint}class Z5{constructor(){this.members=[]}add(n){Qv(this.members,n),n.scheduleRender()}remove(n){if(Jv(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const d=this.members[this.members.length-1];d&&this.promote(d)}}relegate(n){const d=this.members.findIndex(_=>n===_);if(d===0)return!1;let p;for(let _=d;_>=0;_--){const S=this.members[_];if(S.isPresent!==!1){p=S;break}}return p?(this.promote(p),!0):!1}promote(n,d){const p=this.lead;if(n!==p&&(this.prevLead=p,this.lead=n,n.show(),p)){p.instance&&p.scheduleRender(),n.scheduleRender(),n.resumeFrom=p,d&&(n.resumeFrom.preserveOpacity=!0),p.snapshot&&(n.snapshot=p.snapshot,n.snapshot.latestValues=p.animationValues||p.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:_}=n.options;_===!1&&p.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:d,resumingFrom:p}=n;d.onExitComplete&&d.onExitComplete(),p&&p.options.onExitComplete&&p.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function q5(i,n,d){let p="";const _=i.x.translate/n.x,S=i.y.translate/n.y,y=(d==null?void 0:d.z)||0;if((_||S||y)&&(p=`translate3d(${_}px, ${S}px, ${y}px) `),(n.x!==1||n.y!==1)&&(p+=`scale(${1/n.x}, ${1/n.y}) `),d){const{transformPerspective:P,rotate:k,rotateX:O,rotateY:L,skewX:F,skewY:G}=d;P&&(p=`perspective(${P}px) ${p}`),k&&(p+=`rotate(${k}deg) `),O&&(p+=`rotateX(${O}deg) `),L&&(p+=`rotateY(${L}deg) `),F&&(p+=`skewX(${F}deg) `),G&&(p+=`skewY(${G}deg) `)}const l=i.x.scale*n.x,C=i.y.scale*n.y;return(l!==1||C!==1)&&(p+=`scale(${l}, ${C})`),p||"none"}const j0=["","X","Y","Z"],G5={visibility:"hidden"},Xw=1e3;let H5=0;function N0(i,n,d,p){const{latestValues:_}=n;_[i]&&(d[i]=_[i],n.setStaticValue(i,0),p&&(p[i]=0))}function XT(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:n}=i.options;if(!n)return;const d=nT(n);if(window.MotionHasOptimisedAnimation(d,"transform")){const{layout:_,layoutId:S}=i.options;window.MotionCancelOptimisedAnimation(d,"transform",yn,!(_||S))}const{parent:p}=i;p&&!p.hasCheckedOptimisedAppear&&XT(p)}function QT({attachResizeListener:i,defaultParent:n,measureScroll:d,checkIsScrollRoot:p,resetTransform:_}){return class{constructor(y={},l=n==null?void 0:n()){this.id=H5++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Y5),this.nodes.forEach(t4),this.nodes.forEach(r4),this.nodes.forEach(X5)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=y,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let C=0;C<this.path.length;C++)this.path[C].shouldResetTransform=!0;this.root===this&&(this.nodes=new L5)}addEventListener(y,l){return this.eventHandlers.has(y)||this.eventHandlers.set(y,new ex),this.eventHandlers.get(y).add(l)}notifyListeners(y,...l){const C=this.eventHandlers.get(y);C&&C.notify(...l)}hasListeners(y){return this.eventHandlers.has(y)}mount(y,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=D5(y),this.instance=y;const{layoutId:C,layout:P,visualElement:k}=this.options;if(k&&!k.current&&k.mount(y),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(P||C)&&(this.isLayoutDirty=!0),i){let O;const L=()=>this.root.updateBlockedByResize=!1;i(y,()=>{this.root.updateBlockedByResize=!0,O&&O(),O=k5(L,250),R_.hasAnimatedSinceResize&&(R_.hasAnimatedSinceResize=!1,this.nodes.forEach(Jw))})}C&&this.root.registerSharedNode(C,this),this.options.animate!==!1&&k&&(C||P)&&this.addEventListener("didUpdate",({delta:O,hasLayoutChanged:L,hasRelativeLayoutChanged:F,layout:G})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const ee=this.options.transition||k.getDefaultTransition()||o4,{onLayoutAnimationStart:X,onLayoutAnimationComplete:W}=k.getProps(),pe=!this.targetLayout||!YT(this.targetLayout,G),me=!L&&F;if(this.options.layoutRoot||this.resumeFrom||me||L&&(pe||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(O,me);const _e={...tx(ee,"layout"),onPlay:X,onComplete:W};(k.shouldReduceMotion||this.options.layoutRoot)&&(_e.delay=0,_e.type=!1),this.startAnimation(_e)}else L||Jw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=G})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const y=this.getStack();y&&y.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ah(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(i4),this.animationId++)}getTransformTemplate(){const{visualElement:y}=this.options;return y&&y.getProps().transformTemplate}willUpdate(y=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&XT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let k=0;k<this.path.length;k++){const O=this.path[k];O.shouldResetTransform=!0,O.updateScroll("snapshot"),O.options.layoutRoot&&O.willUpdate(!1)}const{layoutId:l,layout:C}=this.options;if(l===void 0&&!C)return;const P=this.getTransformTemplate();this.prevTransformTemplateValue=P?P(this.latestValues,""):void 0,this.updateSnapshot(),y&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Qw);return}this.isUpdating||this.nodes.forEach(J5),this.isUpdating=!1,this.nodes.forEach(e4),this.nodes.forEach(W5),this.nodes.forEach(K5),this.clearAllSnapshots();const l=Rs.now();ba.delta=bc(0,1e3/60,l-ba.timestamp),ba.timestamp=l,ba.isProcessing=!0,I0.update.process(ba),I0.preRender.process(ba),I0.render.process(ba),ba.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Vv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Q5),this.sharedNodes.forEach(n4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,yn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){yn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!cs(this.snapshot.measuredBox.x)&&!cs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let C=0;C<this.path.length;C++)this.path[C].updateScroll();const y=this.layout;this.layout=this.measure(!1),this.layoutCorrected=On(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,y?y.layoutBox:void 0)}updateScroll(y="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===y&&(l=!1),l){const C=p(this.instance);this.scroll={animationId:this.root.animationId,phase:y,isRoot:C,offset:d(this.instance),wasRoot:this.scroll?this.scroll.isRoot:C}}}resetTransform(){if(!_)return;const y=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!KT(this.projectionDelta),C=this.getTransformTemplate(),P=C?C(this.latestValues,""):void 0,k=P!==this.prevTransformTemplateValue;y&&(l||Bd(this.latestValues)||k)&&(_(this.instance,P),this.shouldResetTransform=!1,this.scheduleRender())}measure(y=!0){const l=this.measurePageBox();let C=this.removeElementScroll(l);return y&&(C=this.removeTransform(C)),l4(C),{animationId:this.root.animationId,measuredBox:l,layoutBox:C,latestValues:{},source:this.id}}measurePageBox(){var P;const{visualElement:y}=this.options;if(!y)return On();const l=y.measureViewportBox();if(!(((P=this.scroll)==null?void 0:P.wasRoot)||this.path.some(u4))){const{scroll:k}=this.root;k&&(Jf(l.x,k.offset.x),Jf(l.y,k.offset.y))}return l}removeElementScroll(y){var C;const l=On();if(Do(l,y),(C=this.scroll)!=null&&C.wasRoot)return l;for(let P=0;P<this.path.length;P++){const k=this.path[P],{scroll:O,options:L}=k;k!==this.root&&O&&L.layoutScroll&&(O.wasRoot&&Do(l,y),Jf(l.x,O.offset.x),Jf(l.y,O.offset.y))}return l}applyTransform(y,l=!1){const C=On();Do(C,y);for(let P=0;P<this.path.length;P++){const k=this.path[P];!l&&k.options.layoutScroll&&k.scroll&&k!==k.root&&ep(C,{x:-k.scroll.offset.x,y:-k.scroll.offset.y}),Bd(k.latestValues)&&ep(C,k.latestValues)}return Bd(this.latestValues)&&ep(C,this.latestValues),C}removeTransform(y){const l=On();Do(l,y);for(let C=0;C<this.path.length;C++){const P=this.path[C];if(!P.instance||!Bd(P.latestValues))continue;pv(P.latestValues)&&P.updateSnapshot();const k=On(),O=P.measurePageBox();Do(k,O),qw(l,P.latestValues,P.snapshot?P.snapshot.layoutBox:void 0,k)}return Bd(this.latestValues)&&qw(l,this.latestValues),l}setTargetDelta(y){this.targetDelta=y,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(y){this.options={...this.options,...y,crossfade:y.crossfade!==void 0?y.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ba.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(y=!1){var L;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const C=!!this.resumingFrom||this!==l;if(!(y||C&&this.isSharedProjectionDirty||this.isProjectionDirty||(L=this.parent)!=null&&L.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:k,layoutId:O}=this.options;if(!(!this.layout||!(k||O))){if(this.resolvedRelativeTargetAt=ba.timestamp,!this.targetDelta&&!this.relativeTarget){const F=this.getClosestProjectingParent();F&&F.layout&&this.animationProgress!==1?(this.relativeParent=F,this.forceRelativeParentToResolveTarget(),this.relativeTarget=On(),this.relativeTargetOrigin=On(),Tm(this.relativeTargetOrigin,this.layout.layoutBox,F.layout.layoutBox),Do(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=On(),this.targetWithTransforms=On()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),c5(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Do(this.target,this.layout.layoutBox),FT(this.target,this.targetDelta)):Do(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const F=this.getClosestProjectingParent();F&&!!F.resumingFrom==!!this.resumingFrom&&!F.options.layoutScroll&&F.target&&this.animationProgress!==1?(this.relativeParent=F,this.forceRelativeParentToResolveTarget(),this.relativeTarget=On(),this.relativeTargetOrigin=On(),Tm(this.relativeTargetOrigin,this.target,F.target),Do(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||pv(this.parent.latestValues)||NT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var G;const y=this.getLead(),l=!!this.resumingFrom||this!==y;let C=!0;if((this.isProjectionDirty||(G=this.parent)!=null&&G.isProjectionDirty)&&(C=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(C=!1),this.resolvedRelativeTargetAt===ba.timestamp&&(C=!1),C)return;const{layout:P,layoutId:k}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(P||k))return;Do(this.layoutCorrected,this.layout.layoutBox);const O=this.treeScale.x,L=this.treeScale.y;h5(this.layoutCorrected,this.treeScale,this.path,l),y.layout&&!y.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(y.target=y.layout.layoutBox,y.targetWithTransforms=On());const{target:F}=y;if(!F){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Vw(this.prevProjectionDelta.x,this.projectionDelta.x),Vw(this.prevProjectionDelta.y,this.projectionDelta.y)),Sm(this.projectionDelta,this.layoutCorrected,F,this.latestValues),(this.treeScale.x!==O||this.treeScale.y!==L||!Yw(this.projectionDelta.x,this.prevProjectionDelta.x)||!Yw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",F))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(y=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),y){const C=this.getStack();C&&C.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Qf(),this.projectionDelta=Qf(),this.projectionDeltaWithTransform=Qf()}setAnimationOrigin(y,l=!1){const C=this.snapshot,P=C?C.latestValues:{},k={...this.latestValues},O=Qf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const L=On(),F=C?C.source:void 0,G=this.layout?this.layout.source:void 0,ee=F!==G,X=this.getStack(),W=!X||X.members.length<=1,pe=!!(ee&&!W&&this.options.crossfade===!0&&!this.path.some(s4));this.animationProgress=0;let me;this.mixTargetDelta=_e=>{const Se=_e/1e3;e2(O.x,y.x,Se),e2(O.y,y.y,Se),this.setTargetDelta(O),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Tm(L,this.layout.layoutBox,this.relativeParent.layout.layoutBox),a4(this.relativeTarget,this.relativeTargetOrigin,L,Se),me&&$5(this.relativeTarget,me)&&(this.isProjectionDirty=!1),me||(me=On()),Do(me,this.relativeTarget)),ee&&(this.animationValues=k,O5(k,P,this.latestValues,Se,pe,W)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Se},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(y){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ah(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=yn.update(()=>{R_.hasAnimatedSinceResize=!0,this.currentAnimation=I5(0,Xw,{...y,onUpdate:l=>{this.mixTargetDelta(l),y.onUpdate&&y.onUpdate(l)},onStop:()=>{},onComplete:()=>{y.onComplete&&y.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const y=this.getStack();y&&y.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Xw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const y=this.getLead();let{targetWithTransforms:l,target:C,layout:P,latestValues:k}=y;if(!(!l||!C||!P)){if(this!==y&&this.layout&&P&&JT(this.options.animationType,this.layout.layoutBox,P.layoutBox)){C=this.target||On();const O=cs(this.layout.layoutBox.x);C.x.min=y.target.x.min,C.x.max=C.x.min+O;const L=cs(this.layout.layoutBox.y);C.y.min=y.target.y.min,C.y.max=C.y.min+L}Do(l,C),ep(l,k),Sm(this.projectionDeltaWithTransform,this.layoutCorrected,l,k)}}registerSharedNode(y,l){this.sharedNodes.has(y)||this.sharedNodes.set(y,new Z5),this.sharedNodes.get(y).add(l);const P=l.options.initialPromotionConfig;l.promote({transition:P?P.transition:void 0,preserveFollowOpacity:P&&P.shouldPreserveFollowOpacity?P.shouldPreserveFollowOpacity(l):void 0})}isLead(){const y=this.getStack();return y?y.lead===this:!0}getLead(){var l;const{layoutId:y}=this.options;return y?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:y}=this.options;return y?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:y}=this.options;if(y)return this.root.sharedNodes.get(y)}promote({needsReset:y,transition:l,preserveFollowOpacity:C}={}){const P=this.getStack();P&&P.promote(this,C),y&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const y=this.getStack();return y?y.relegate(this):!1}resetSkewAndRotation(){const{visualElement:y}=this.options;if(!y)return;let l=!1;const{latestValues:C}=y;if((C.z||C.rotate||C.rotateX||C.rotateY||C.rotateZ||C.skewX||C.skewY)&&(l=!0),!l)return;const P={};C.z&&N0("z",y,P,this.animationValues);for(let k=0;k<j0.length;k++)N0(`rotate${j0[k]}`,y,P,this.animationValues),N0(`skew${j0[k]}`,y,P,this.animationValues);y.render();for(const k in P)y.setStaticValue(k,P[k]),this.animationValues&&(this.animationValues[k]=P[k]);y.scheduleRender()}getProjectionStyles(y){if(!this.instance||this.isSVG)return;if(!this.isVisible)return G5;const l={visibility:""},C=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=E_(y==null?void 0:y.pointerEvents)||"",l.transform=C?C(this.latestValues,""):"none",l;const P=this.getLead();if(!this.projectionDelta||!this.layout||!P.target){const F={};return this.options.layoutId&&(F.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,F.pointerEvents=E_(y==null?void 0:y.pointerEvents)||""),this.hasProjected&&!Bd(this.latestValues)&&(F.transform=C?C({},""):"none",this.hasProjected=!1),F}const k=P.animationValues||P.latestValues;this.applyTransformsToTarget(),l.transform=q5(this.projectionDeltaWithTransform,this.treeScale,k),C&&(l.transform=C(k,l.transform));const{x:O,y:L}=this.projectionDelta;l.transformOrigin=`${O.origin*100}% ${L.origin*100}% 0`,P.animationValues?l.opacity=P===this?k.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:k.opacityExit:l.opacity=P===this?k.opacity!==void 0?k.opacity:"":k.opacityExit!==void 0?k.opacityExit:0;for(const F in Em){if(k[F]===void 0)continue;const{correct:G,applyTo:ee,isCSSVariable:X}=Em[F],W=l.transform==="none"?k[F]:G(k[F],P);if(ee){const pe=ee.length;for(let me=0;me<pe;me++)l[ee[me]]=W}else X?this.options.visualElement.renderState.vars[F]=W:l[F]=W}return this.options.layoutId&&(l.pointerEvents=P===this?E_(y==null?void 0:y.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(y=>{var l;return(l=y.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(Qw),this.root.sharedNodes.clear()}}}function W5(i){i.updateLayout()}function K5(i){var d;const n=((d=i.resumeFrom)==null?void 0:d.snapshot)||i.snapshot;if(i.isLead()&&i.layout&&n&&i.hasListeners("didUpdate")){const{layoutBox:p,measuredBox:_}=i.layout,{animationType:S}=i.options,y=n.source!==i.layout.source;S==="size"?zo(O=>{const L=y?n.measuredBox[O]:n.layoutBox[O],F=cs(L);L.min=p[O].min,L.max=L.min+F}):JT(S,n.layoutBox,p)&&zo(O=>{const L=y?n.measuredBox[O]:n.layoutBox[O],F=cs(p[O]);L.max=L.min+F,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[O].max=i.relativeTarget[O].min+F)});const l=Qf();Sm(l,p,n.layoutBox);const C=Qf();y?Sm(C,i.applyTransform(_,!0),n.measuredBox):Sm(C,p,n.layoutBox);const P=!KT(l);let k=!1;if(!i.resumeFrom){const O=i.getClosestProjectingParent();if(O&&!O.resumeFrom){const{snapshot:L,layout:F}=O;if(L&&F){const G=On();Tm(G,n.layoutBox,L.layoutBox);const ee=On();Tm(ee,p,F.layoutBox),YT(G,ee)||(k=!0),O.options.layoutRoot&&(i.relativeTarget=ee,i.relativeTargetOrigin=G,i.relativeParent=O)}}}i.notifyListeners("didUpdate",{layout:p,snapshot:n,delta:C,layoutDelta:l,hasLayoutChanged:P,hasRelativeLayoutChanged:k})}else if(i.isLead()){const{onExitComplete:p}=i.options;p&&p()}i.options.transition=void 0}function Y5(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function X5(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function Q5(i){i.clearSnapshot()}function Qw(i){i.clearMeasurements()}function J5(i){i.isLayoutDirty=!1}function e4(i){const{visualElement:n}=i.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),i.resetTransform()}function Jw(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function t4(i){i.resolveTargetDelta()}function r4(i){i.calcProjection()}function i4(i){i.resetSkewAndRotation()}function n4(i){i.removeLeadSnapshot()}function e2(i,n,d){i.translate=gn(n.translate,0,d),i.scale=gn(n.scale,1,d),i.origin=n.origin,i.originPoint=n.originPoint}function t2(i,n,d,p){i.min=gn(n.min,d.min,p),i.max=gn(n.max,d.max,p)}function a4(i,n,d,p){t2(i.x,n.x,d.x,p),t2(i.y,n.y,d.y,p)}function s4(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const o4={duration:.45,ease:[.4,0,.1,1]},r2=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),i2=r2("applewebkit/")&&!r2("chrome/")?Math.round:Lo;function n2(i){i.min=i2(i.min),i.max=i2(i.max)}function l4(i){n2(i.x),n2(i.y)}function JT(i,n,d){return i==="position"||i==="preserve-aspect"&&!u5(Kw(n),Kw(d),.2)}function u4(i){var n;return i!==i.root&&((n=i.scroll)==null?void 0:n.wasRoot)}const c4=QT({attachResizeListener:(i,n)=>Lm(i,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),F0={current:void 0},eM=QT({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!F0.current){const i=new c4({});i.mount(window),i.setOptions({layoutScroll:!0}),F0.current=i}return F0.current},resetTransform:(i,n)=>{i.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),h4={pan:{Feature:C5},drag:{Feature:A5,ProjectionNode:eM,MeasureLayout:GT}};function d4(i,n,d){if(i instanceof EventTarget)return[i];if(typeof i=="string"){let p=document;const _=(d==null?void 0:d[i])??p.querySelectorAll(i);return _?Array.from(_):[]}return Array.from(i)}function tM(i,n){const d=d4(i),p=new AbortController,_={passive:!0,...n,signal:p.signal};return[d,_,()=>p.abort()]}function a2(i){return!(i.pointerType==="touch"||qT())}function f4(i,n,d={}){const[p,_,S]=tM(i,d),y=l=>{if(!a2(l))return;const{target:C}=l,P=n(C,l);if(typeof P!="function"||!C)return;const k=O=>{a2(O)&&(P(O),C.removeEventListener("pointerleave",k))};C.addEventListener("pointerleave",k,_)};return p.forEach(l=>{l.addEventListener("pointerenter",y,_)}),S}function s2(i,n,d){const{props:p}=i;i.animationState&&p.whileHover&&i.animationState.setActive("whileHover",d==="Start");const _="onHover"+d,S=p[_];S&&yn.postRender(()=>S(n,Zm(n)))}class p4 extends Ph{mount(){const{current:n}=this.node;n&&(this.unmount=f4(n,(d,p)=>(s2(this.node,p,"Start"),_=>s2(this.node,_,"End"))))}unmount(){}}class m4 extends Ph{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vm(Lm(this.node.current,"focus",()=>this.onFocus()),Lm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const rM=(i,n)=>n?i===n?!0:rM(i,n.parentElement):!1,g4=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function y4(i){return g4.has(i.tagName)||i.tabIndex!==-1}const _m=new WeakSet;function o2(i){return n=>{n.key==="Enter"&&i(n)}}function U0(i,n){i.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const _4=(i,n)=>{const d=i.currentTarget;if(!d)return;const p=o2(()=>{if(_m.has(d))return;U0(d,"down");const _=o2(()=>{U0(d,"up")}),S=()=>U0(d,"cancel");d.addEventListener("keyup",_,n),d.addEventListener("blur",S,n)});d.addEventListener("keydown",p,n),d.addEventListener("blur",()=>d.removeEventListener("keydown",p),n)};function l2(i){return fx(i)&&!qT()}function v4(i,n,d={}){const[p,_,S]=tM(i,d),y=l=>{const C=l.currentTarget;if(!l2(l)||_m.has(C))return;_m.add(C);const P=n(C,l),k=(F,G)=>{window.removeEventListener("pointerup",O),window.removeEventListener("pointercancel",L),!(!l2(F)||!_m.has(C))&&(_m.delete(C),typeof P=="function"&&P(F,{success:G}))},O=F=>{k(F,C===window||C===document||d.useGlobalTarget||rM(C,F.target))},L=F=>{k(F,!1)};window.addEventListener("pointerup",O,_),window.addEventListener("pointercancel",L,_)};return p.forEach(l=>{(d.useGlobalTarget?window:l).addEventListener("pointerdown",y,_),l instanceof HTMLElement&&(l.addEventListener("focus",P=>_4(P,_)),!y4(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),S}function u2(i,n,d){const{props:p}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&p.whileTap&&i.animationState.setActive("whileTap",d==="Start");const _="onTap"+(d==="End"?"":d),S=p[_];S&&yn.postRender(()=>S(n,Zm(n)))}class x4 extends Ph{mount(){const{current:n}=this.node;n&&(this.unmount=v4(n,(d,p)=>(u2(this.node,p,"Start"),(_,{success:S})=>u2(this.node,_,S?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const yv=new WeakMap,V0=new WeakMap,b4=i=>{const n=yv.get(i.target);n&&n(i)},w4=i=>{i.forEach(b4)};function S4({root:i,...n}){const d=i||document;V0.has(d)||V0.set(d,{});const p=V0.get(d),_=JSON.stringify(n);return p[_]||(p[_]=new IntersectionObserver(w4,{root:i,...n})),p[_]}function T4(i,n,d){const p=S4(n);return yv.set(i,d),p.observe(i),()=>{yv.delete(i),p.unobserve(i)}}const M4={some:0,all:1};class A4 extends Ph{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:d,margin:p,amount:_="some",once:S}=n,y={root:d?d.current:void 0,rootMargin:p,threshold:typeof _=="number"?_:M4[_]},l=C=>{const{isIntersecting:P}=C;if(this.isInView===P||(this.isInView=P,S&&!P&&this.hasEnteredView))return;P&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",P);const{onViewportEnter:k,onViewportLeave:O}=this.node.getProps(),L=P?k:O;L&&L(C)};return T4(this.node.current,y,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:d}=this.node;["amount","margin","root"].some(C4(n,d))&&this.startObserver()}unmount(){}}function C4({viewport:i={}},{viewport:n={}}={}){return d=>i[d]!==n[d]}const E4={inView:{Feature:A4},tap:{Feature:x4},focus:{Feature:m4},hover:{Feature:p4}},P4={layout:{ProjectionNode:eM,MeasureLayout:GT}},_v={current:null},iM={current:!1};function R4(){if(iM.current=!0,!!Ov)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),n=()=>_v.current=i.matches;i.addListener(n),n()}else _v.current=!1}const I4=new WeakMap;function D4(i,n,d){for(const p in n){const _=n[p],S=d[p];if($a(_))i.addValue(p,_);else if($a(S))i.addValue(p,Im(_,{owner:i}));else if(S!==_)if(i.hasValue(p)){const y=i.getValue(p);y.liveStyle===!0?y.jump(_):y.hasAnimated||y.set(_)}else{const y=i.getStaticValue(p);i.addValue(p,Im(y!==void 0?y:_,{owner:i}))}}for(const p in d)n[p]===void 0&&i.removeValue(p);return n}const nM=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i),aM=i=>/^0[^.\s]+$/u.test(i),z4={test:i=>i==="auto",parse:i=>i},sM=i=>n=>n.test(i),oM=[hp,yr,Tu,Sh,$3,V3,z4],c2=i=>oM.find(sM(i)),L4=[...oM,Ua,Ch],k4=i=>L4.find(sM(i)),B4=new Set(["brightness","contrast","saturate","opacity"]);function O4(i){const[n,d]=i.slice(0,-1).split("(");if(n==="drop-shadow")return i;const[p]=d.match(rx)||[];if(!p)return i;const _=d.replace(p,"");let S=B4.has(n)?1:0;return p!==d&&(S*=100),n+"("+S+_+")"}const j4=/\b([a-z-]*)\(.*?\)/gu,vv={...Ch,getAnimatableNone:i=>{const n=i.match(j4);return n?n.map(O4).join(" "):i}},N4={...Gv,color:Ua,backgroundColor:Ua,outlineColor:Ua,fill:Ua,stroke:Ua,borderColor:Ua,borderTopColor:Ua,borderRightColor:Ua,borderBottomColor:Ua,borderLeftColor:Ua,filter:vv,WebkitFilter:vv},lM=i=>N4[i];function uM(i,n){let d=lM(i);return d!==vv&&(d=Ch),d.getAnimatableNone?d.getAnimatableNone(n):void 0}const h2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class F4{scrapeMotionValuesFromProps(n,d,p){return{}}constructor({parent:n,props:d,presenceContext:p,reducedMotionConfig:_,blockInitialAnimation:S,visualState:y},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=cx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const L=Rs.now();this.renderScheduledAt<L&&(this.renderScheduledAt=L,yn.render(this.render,!1,!0))};const{latestValues:C,renderState:P}=y;this.latestValues=C,this.baseTarget={...C},this.initialValues=d.initial?{...C}:{},this.renderState=P,this.parent=n,this.props=d,this.presenceContext=p,this.depth=n?n.depth+1:0,this.reducedMotionConfig=_,this.options=l,this.blockInitialAnimation=!!S,this.isControllingVariants=a0(d),this.isVariantNode=ZS(d),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:k,...O}=this.scrapeMotionValuesFromProps(d,{},this);for(const L in O){const F=O[L];C[L]!==void 0&&$a(F)&&F.set(C[L],!1)}}mount(n){this.current=n,I4.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((d,p)=>this.bindToMotionValue(p,d)),iM.current||R4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_v.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ah(this.notifyUpdate),Ah(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const d=this.features[n];d&&(d.unmount(),d.isMounted=!1)}this.current=null}bindToMotionValue(n,d){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const p=cp.has(n);p&&this.onBindTransform&&this.onBindTransform();const _=d.on("change",l=>{this.latestValues[n]=l,this.props.onUpdate&&yn.preRender(this.notifyUpdate),p&&this.projection&&(this.projection.isTransformDirty=!0)}),S=d.on("renderRequest",this.scheduleRender);let y;window.MotionCheckAppearSync&&(y=window.MotionCheckAppearSync(this,n,d)),this.valueSubscriptions.set(n,()=>{_(),S(),y&&y(),d.owner&&d.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in rp){const d=rp[n];if(!d)continue;const{isEnabled:p,Feature:_}=d;if(!this.features[n]&&_&&p(this.props)&&(this.features[n]=new _(this)),this.features[n]){const S=this.features[n];S.isMounted?S.update():(S.mount(),S.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):On()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,d){this.latestValues[n]=d}update(n,d){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=d;for(let p=0;p<h2.length;p++){const _=h2[p];this.propEventSubscriptions[_]&&(this.propEventSubscriptions[_](),delete this.propEventSubscriptions[_]);const S="on"+_,y=n[S];y&&(this.propEventSubscriptions[_]=this.on(_,y))}this.prevMotionValues=D4(this,this.scrapeMotionValuesFromProps(n,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const d=this.getClosestVariantNode();if(d)return d.variantChildren&&d.variantChildren.add(n),()=>d.variantChildren.delete(n)}addValue(n,d){const p=this.values.get(n);d!==p&&(p&&this.removeValue(n),this.bindToMotionValue(n,d),this.values.set(n,d),this.latestValues[n]=d.get())}removeValue(n){this.values.delete(n);const d=this.valueSubscriptions.get(n);d&&(d(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,d){if(this.props.values&&this.props.values[n])return this.props.values[n];let p=this.values.get(n);return p===void 0&&d!==void 0&&(p=Im(d===null?void 0:d,{owner:this}),this.addValue(n,p)),p}readValue(n,d){let p=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:this.getBaseTargetFromProps(this.props,n)??this.readValueFromInstance(this.current,n,this.options);return p!=null&&(typeof p=="string"&&(nM(p)||aM(p))?p=parseFloat(p):!k4(p)&&Ch.test(d)&&(p=uM(n,d)),this.setBaseTarget(n,$a(p)?p.get():p)),$a(p)?p.get():p}setBaseTarget(n,d){this.baseTarget[n]=d}getBaseTarget(n){var S;const{initial:d}=this.props;let p;if(typeof d=="string"||typeof d=="object"){const y=Yv(this.props,d,(S=this.presenceContext)==null?void 0:S.custom);y&&(p=y[n])}if(d&&p!==void 0)return p;const _=this.getBaseTargetFromProps(this.props,n);return _!==void 0&&!$a(_)?_:this.initialValues[n]!==void 0&&p===void 0?void 0:this.baseTarget[n]}on(n,d){return this.events[n]||(this.events[n]=new ex),this.events[n].add(d)}notify(n,...d){this.events[n]&&this.events[n].notify(...d)}}const U4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function V4(i){const n=U4.exec(i);if(!n)return[,];const[,d,p,_]=n;return[`--${d??p}`,_]}function cM(i,n,d=1){const[p,_]=V4(i);if(!p)return;const S=window.getComputedStyle(n).getPropertyValue(p);if(S){const y=S.trim();return nM(y)?parseFloat(y):y}return qv(_)?cM(_,n,d+1):_}function $4(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||aM(i):!0}const Z4=new Set(["auto","none","0"]);function q4(i,n,d){let p=0,_;for(;p<i.length&&!_;){const S=i[p];typeof S=="string"&&!Z4.has(S)&&Dm(S).values.length&&(_=i[p]),p++}if(_&&d)for(const S of n)i[S]=uM(d,_)}class G4 extends cx{constructor(n,d,p,_,S){super(n,d,p,_,S,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:d,name:p}=this;if(!d||!d.current)return;super.readKeyframes();for(let C=0;C<n.length;C++){let P=n[C];if(typeof P=="string"&&(P=P.trim(),qv(P))){const k=cM(P,d.current);k!==void 0&&(n[C]=k),C===n.length-1&&(this.finalKeyframe=P)}}if(this.resolveNoneKeyframes(),!DT.has(p)||n.length!==2)return;const[_,S]=n,y=c2(_),l=c2(S);if(y!==l)if(mw(y)&&mw(l))for(let C=0;C<n.length;C++){const P=n[C];typeof P=="string"&&(n[C]=parseFloat(P))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:d}=this,p=[];for(let _=0;_<n.length;_++)(n[_]===null||$4(n[_]))&&p.push(_);p.length&&q4(n,p,d)}measureInitialState(){const{element:n,unresolvedKeyframes:d,name:p}=this;if(!n||!n.current)return;p==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ip[p](n.measureViewportBox(),window.getComputedStyle(n.current)),d[0]=this.measuredOrigin;const _=d[d.length-1];_!==void 0&&n.getValue(p,_).jump(_,!1)}measureEndState(){var l;const{element:n,name:d,unresolvedKeyframes:p}=this;if(!n||!n.current)return;const _=n.getValue(d);_&&_.jump(this.measuredOrigin,!1);const S=p.length-1,y=p[S];p[S]=ip[d](n.measureViewportBox(),window.getComputedStyle(n.current)),y!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=y),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([C,P])=>{n.getValue(C).set(P)}),this.resolveNoneKeyframes()}}class hM extends F4{constructor(){super(...arguments),this.KeyframeResolver=G4}sortInstanceNodePosition(n,d){return n.compareDocumentPosition(d)&2?1:-1}getBaseTargetFromProps(n,d){return n.style?n.style[d]:void 0}removeValueFromRenderState(n,{vars:d,style:p}){delete d[n],delete p[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;$a(n)&&(this.childSubscription=n.on("change",d=>{this.current&&(this.current.textContent=`${d}`)}))}}function dM(i,{style:n,vars:d},p,_){Object.assign(i.style,n,_&&_.getProjectionStyles(p));for(const S in d)i.style.setProperty(S,d[S])}function H4(i){return window.getComputedStyle(i)}class W4 extends hM{constructor(){super(...arguments),this.type="html",this.renderInstance=dM}readValueFromInstance(n,d){if(cp.has(d))return _D(n,d);{const p=H4(n),_=(Zv(d)?p.getPropertyValue(d):p[d])||0;return typeof _=="string"?_.trim():_}}measureInstanceViewportBox(n,{transformPagePoint:d}){return UT(n,d)}build(n,d,p){Hv(n,d,p.transformTemplate)}scrapeMotionValuesFromProps(n,d,p){return Xv(n,d,p)}}const fM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function K4(i,n,d,p){dM(i,n,void 0,p);for(const _ in n.attrs)i.setAttribute(fM.has(_)?_:Uv(_),n.attrs[_])}class Y4 extends hM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=On}getBaseTargetFromProps(n,d){return n[d]}readValueFromInstance(n,d){if(cp.has(d)){const p=lM(d);return p&&p.default||0}return d=fM.has(d)?d:Uv(d),n.getAttribute(d)}scrapeMotionValuesFromProps(n,d,p){return rT(n,d,p)}build(n,d,p){QS(n,d,this.isSVGTag,p.transformTemplate)}renderInstance(n,d,p,_){K4(n,d,p,_)}mount(n){this.isSVGTag=eT(n.tagName),super.mount(n)}}const X4=(i,n)=>Kv(i)?new Y4(n):new W4(n,{allowProjection:i!==se.Fragment}),Q4=oI({...t5,...E4,...h4,...P4},X4),fs=C3(Q4);function J4(){const{loading:i,login:n,isAuthenticated:d}=ps(),[p,_]=se.useState(!1),[S,y]=se.useState(!1),[l,C]=se.useState(""),[P,k]=se.useState(""),O=Cu();function L(G,ee){let X=!0;return G?t0.isEmail(G)||(_(!0),Cr.error("Incorrect email address format!"),X=!1):(_(!0),X=!1),ee?ee.length<8&&(y(!0),Cr.error("Password length must be at least 8 characters"),X=!1):(y(!0),X=!1),!X&&(!G||!ee)&&Cr.error("Please provide both email and password!"),X}async function F(G){G.preventDefault(),L(l.trim(),P.trim())&&await n(l.trim(),P.trim())}return se.useEffect(()=>{d&&!i&&O("/tours")},[d,i,O]),q.jsx("section",{className:"my-auto flex w-full flex-col md:items-center",children:q.jsx("form",{children:q.jsxs(fs.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},className:"mx-5 my-14 flex flex-col justify-between space-y-8 rounded-lg bg-white px-5 py-7 shadow-lg md:min-w-[600px] md:p-13 md:shadow-xl",children:[q.jsxs("div",{className:"flex flex-col space-y-1",children:[q.jsx("h1",{className:"natours-gradient-text text-2xl font-bold",children:"Log into Your account"}),q.jsxs(ds,{to:"/signup",className:"font-semibold text-stone-600",children:[q.jsx("span",{className:"mr-2 text-stone-800/50",children:"Don't have an Account?"}),"Signup"]})]}),q.jsxs("div",{className:"flex flex-col space-y-3",children:[q.jsx("div",{children:q.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Email Address"})}),q.jsx("input",{type:"text",className:`input-natours w-full text-stone-600 ${p?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"you@example.com",value:l,onChange:G=>{C(G.target.value),_(!1)}})]}),q.jsxs("div",{className:"flex flex-col space-y-3",children:[q.jsx("div",{children:q.jsx("label",{htmlFor:"password",className:"font-semibold text-stone-600",children:"Password"})}),q.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${S&&"border-3 border-red-400 focus:ring-0"}`,placeholder:"",value:P,onChange:G=>{k(G.target.value),y(!1)}})]}),q.jsx("div",{children:q.jsx(ds,{to:"/forgot-password/send-otp",className:"text-natours font-semibold",state:{emailTyped:l},children:"Forgot Password?"})}),q.jsx("div",{children:q.jsx(fs.button,{whileTap:{scale:.8},transition:{type:"keyframes",duration:.01},className:"btn-primary w-1/2 py-3 md:w-1/3",onClick:F,disabled:i,children:i?q.jsx(da,{}):"Login"})})]})})})}function e6(){const i=Cu(),{signup:n,loading:d}=ps(),[p,_]=se.useState(null),[S,y]=se.useState(""),[l,C]=se.useState(""),[P,k]=se.useState(""),[O,L]=se.useState(""),[F,G]=se.useState(null),[ee,X]=se.useState(!1),[W,pe]=se.useState(!1),[me,_e]=se.useState(!1),[Se,ke]=se.useState(!1);function nt(ht,kt,sr,ir){let Xt=!0;return!ht&&!kt&&!sr&&!ir?(Cr.error("All fields are required"),X(!0),pe(!0),_e(!0),ke(!0),Xt=!1):(!ht.trim()||ht.trim().split(" ").length<2?(X(!0),Cr.error("Please enter your full name ."),Xt=!1):X(!1),kt?t0.isEmail(kt)?pe(!1):(pe(!0),Cr.error("Invalid email format."),Xt=!1):(pe(!0),Cr.error("Email is required."),Xt=!1),sr?sr.length<8?(_e(!0),Cr.error("Password must be at least 8 characters."),Xt=!1):_e(!1):(_e(!0),Cr.error("Password is required."),Xt=!1),ir?ir!==sr?(ke(!0),Cr.error("Passwords do not match."),Xt=!1):ke(!1):(ke(!0),Cr.error("Confirm Password id required"),Xt=!1),Xt)}async function Ke(ht){ht.preventDefault();const kt=new FormData;kt.append("name",S),kt.append("email",l),kt.append("password",P),kt.append("confirmPassword",O),F&&kt.append("photo",F),nt(S,l,P,O)&&(await n(kt),i("/tours"))}const Ye=ht=>{const kt=ht.target.files[0];if(kt.type.split("/")[1]!=="jpeg"&&kt.type.split("/")[1]!=="png")return Cr.error("Please Upload Jpeg or Png image only!");if(kt){const sr=URL.createObjectURL(kt);_(sr),G(kt)}else _(null)};return q.jsx("section",{className:"my-10 flex w-full flex-col md:items-center",children:q.jsx("form",{onSubmit:Ke,children:q.jsxs(fs.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},className:"mx-5 flex flex-col justify-between space-y-8 rounded-lg bg-white px-5 py-7 shadow-lg md:min-w-[600px] md:p-13 md:shadow-xl",children:[q.jsxs("div",{className:"flex flex-col space-y-1",children:[q.jsx("h1",{className:"natours-gradient-text text-2xl font-bold",children:"Register your Account"}),q.jsxs(ds,{to:"/login",className:"font-semibold text-stone-600",children:[q.jsx("span",{className:"mr-2 text-stone-800/50",children:"Already have an Account?"}),"Login"]})]}),q.jsxs("div",{className:"flex flex-col space-y-3",children:[q.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Full Name"}),q.jsx("input",{type:"text",className:`input-natours w-full text-stone-600 ${ee?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"John Doe",name:"name",value:S,onChange:ht=>{X(!1),y(ht.target.value)}})]}),q.jsxs("div",{className:"flex flex-col space-y-3",children:[q.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Email Address"}),q.jsx("input",{type:"text",className:`input-natours w-full text-stone-600 ${W?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"you@example.com",name:"email",value:l,onChange:ht=>{pe(!1),C(ht.target.value)}})]}),q.jsxs("div",{className:"flex flex-col space-y-3",children:[q.jsx("label",{htmlFor:"password",className:"font-semibold text-stone-600",children:"Password"}),q.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${me?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"",name:"password",value:P,onChange:ht=>{_e(!1),k(ht.target.value)}})]}),q.jsxs("div",{className:"flex flex-col space-y-3",children:[q.jsx("label",{htmlFor:"confirm-password",className:"font-semibold text-stone-600",children:"Confirm Password"}),q.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${Se?"border-3 border-red-400 focus:ring-0":""}`,placeholder:" ",name:"confirmPassword",value:O,onChange:ht=>{ke(!1),L(ht.target.value)}})]}),q.jsxs("div",{className:"flex flex-col space-y-3",children:[q.jsx("input",{type:"file",id:"photo-upload",accept:"image/*",name:"photo",className:"hidden",onChange:Ye}),p&&q.jsx("label",{htmlFor:"photo-upload",className:"font-semibold text-stone-600",children:"Click to choose different photo"}),q.jsx("label",{htmlFor:"photo-upload",className:"hover:border-natours relative size-20 cursor-pointer rounded-full border-3 border-stone-300 bg-stone-100 p-1 transition-colors md:size-24 lg:size-26",children:p?q.jsx("img",{src:p,alt:"Profile Preview",className:"h-full w-full rounded-full object-cover"}):q.jsx("div",{className:"flex h-full w-full items-center justify-center",children:q.jsx("span",{className:"text-center text-sm text-stone-600 select-none",children:"Choose Photo"})})})]}),q.jsx("div",{children:q.jsx(fs.button,{whileTap:{scale:.8},transition:{type:"keyframes",duration:.01},className:"btn-primary w-1/2 py-3 md:w-1/3",children:d?q.jsx(da,{}):"Signup"})})]})})})}var pM={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},d2=Ud.createContext&&Ud.createContext(pM),t6=["attr","size","title"];function r6(i,n){if(i==null)return{};var d=i6(i,n),p,_;if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(i);for(_=0;_<S.length;_++)p=S[_],!(n.indexOf(p)>=0)&&Object.prototype.propertyIsEnumerable.call(i,p)&&(d[p]=i[p])}return d}function i6(i,n){if(i==null)return{};var d={};for(var p in i)if(Object.prototype.hasOwnProperty.call(i,p)){if(n.indexOf(p)>=0)continue;d[p]=i[p]}return d}function U_(){return U_=Object.assign?Object.assign.bind():function(i){for(var n=1;n<arguments.length;n++){var d=arguments[n];for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&(i[p]=d[p])}return i},U_.apply(this,arguments)}function f2(i,n){var d=Object.keys(i);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(i);n&&(p=p.filter(function(_){return Object.getOwnPropertyDescriptor(i,_).enumerable})),d.push.apply(d,p)}return d}function V_(i){for(var n=1;n<arguments.length;n++){var d=arguments[n]!=null?arguments[n]:{};n%2?f2(Object(d),!0).forEach(function(p){n6(i,p,d[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(d)):f2(Object(d)).forEach(function(p){Object.defineProperty(i,p,Object.getOwnPropertyDescriptor(d,p))})}return i}function n6(i,n,d){return n=a6(n),n in i?Object.defineProperty(i,n,{value:d,enumerable:!0,configurable:!0,writable:!0}):i[n]=d,i}function a6(i){var n=s6(i,"string");return typeof n=="symbol"?n:n+""}function s6(i,n){if(typeof i!="object"||!i)return i;var d=i[Symbol.toPrimitive];if(d!==void 0){var p=d.call(i,n);if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function mM(i){return i&&i.map((n,d)=>Ud.createElement(n.tag,V_({key:d},n.attr),mM(n.child)))}function Wi(i){return n=>Ud.createElement(o6,U_({attr:V_({},i.attr)},n),mM(i.child))}function o6(i){var n=d=>{var{attr:p,size:_,title:S}=i,y=r6(i,t6),l=_||d.size||"1em",C;return d.className&&(C=d.className),i.className&&(C=(C?C+" ":"")+i.className),Ud.createElement("svg",U_({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},d.attr,p,y,{className:C,style:V_(V_({color:i.color||d.color},d.style),i.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),S&&Ud.createElement("title",null,S),i.children)};return d2!==void 0?Ud.createElement(d2.Consumer,null,d=>n(d)):n(pM)}function l6(i){return Wi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 256c0 114.9 93.1 208 208 208s208-93.1 208-208S370.9 48 256 48 48 141.1 48 256zm244.5 0l-81.9-81.1c-7.5-7.5-7.5-19.8 0-27.3s19.8-7.5 27.3 0l95.4 95.7c7.3 7.3 7.5 19.1.6 26.6l-94 94.3c-3.8 3.8-8.7 5.7-13.7 5.7-4.9 0-9.9-1.9-13.6-5.6-7.5-7.5-7.6-19.7 0-27.3l79.9-81z"},child:[]}]})(i)}function u6(i){return Wi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm52.7 283.3L256 278.6l-52.7 52.7c-6.2 6.2-16.4 6.2-22.6 0-3.1-3.1-4.7-7.2-4.7-11.3 0-4.1 1.6-8.2 4.7-11.3l52.7-52.7-52.7-52.7c-3.1-3.1-4.7-7.2-4.7-11.3 0-4.1 1.6-8.2 4.7-11.3 6.2-6.2 16.4-6.2 22.6 0l52.7 52.7 52.7-52.7c6.2-6.2 16.4-6.2 22.6 0 6.2 6.2 6.2 16.4 0 22.6L278.6 256l52.7 52.7c6.2 6.2 6.2 16.4 0 22.6-6.2 6.3-16.4 6.3-22.6 0z"},child:[]}]})(i)}function c6(i){return Wi({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"},child:[]},{tag:"path",attr:{d:"M16 2v4"},child:[]},{tag:"path",attr:{d:"M8 2v4"},child:[]},{tag:"path",attr:{d:"M3 10h5"},child:[]},{tag:"path",attr:{d:"M17.5 17.5 16 16.3V14"},child:[]},{tag:"circle",attr:{cx:"16",cy:"16",r:"6"},child:[]}]})(i)}function h6(i){return Wi({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"4",x2:"20",y1:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"4",x2:"20",y1:"6",y2:"6"},child:[]},{tag:"line",attr:{x1:"4",x2:"20",y1:"18",y2:"18"},child:[]}]})(i)}const d6="/assets/logo-green-Cpft2RYs.png";function f6(i){return Wi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(i)}function p6(i){return Wi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm15.35 6.41-1.77-1.77c-.2-.2-.51-.2-.71 0L6 11.53V14h2.47l6.88-6.88c.2-.19.2-.51 0-.71z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 14v-2.47l6.88-6.88c.2-.2.51-.2.71 0l1.77 1.77c.2.2.2.51 0 .71L8.47 14H6zm12 0h-7.5l2-2H18v2z"},child:[]}]})(i)}function gM(i){return Wi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"},child:[]}]})(i)}function m6(i){return Wi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"},child:[]}]})(i)}function g6(i){return Wi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19.3 16.9c.4-.7.7-1.5.7-2.4 0-2.5-2-4.5-4.5-4.5S11 12 11 14.5s2 4.5 4.5 4.5c.9 0 1.7-.3 2.4-.7l3.2 3.2 1.4-1.4-3.2-3.2zm-3.8.1c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zM12 20v2C6.48 22 2 17.52 2 12S6.48 2 12 2c4.84 0 8.87 3.44 9.8 8h-2.07A8 8 0 0 0 15 4.59V5c0 1.1-.9 2-2 2h-2v2c0 .55-.45 1-1 1H8v2h2v3H9l-4.79-4.79C4.08 10.79 4 11.38 4 12c0 4.41 3.59 8 8 8z"},child:[]}]})(i)}function yM(i){return Wi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 256c0 114.87 93.13 208 208 208s208-93.13 208-208S370.87 48 256 48 48 141.13 48 256zm212.65-91.36a16 16 0 0 1 .09 22.63L208.42 240H342a16 16 0 0 1 0 32H208.42l52.32 52.73A16 16 0 1 1 238 347.27l-79.39-80a16 16 0 0 1 0-22.54l79.39-80a16 16 0 0 1 22.65-.09z"},child:[]}]})(i)}function y6(i){return Wi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M392 80H232a56.06 56.06 0 0 0-56 56v104h153.37l-52.68-52.69a16 16 0 0 1 22.62-22.62l80 80a16 16 0 0 1 0 22.62l-80 80a16 16 0 0 1-22.62-22.62L329.37 272H176v104c0 32.05 33.79 56 64 56h152a56.06 56.06 0 0 0 56-56V136a56.06 56.06 0 0 0-56-56zM80 240a16 16 0 0 0 0 32h96v-32z"},child:[]}]})(i)}function _6(i){return Wi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M160 256a16 16 0 0 1 16-16h144V136c0-32-33.79-56-64-56H104a56.06 56.06 0 0 0-56 56v240a56.06 56.06 0 0 0 56 56h160a56.06 56.06 0 0 0 56-56V272H176a16 16 0 0 1-16-16zm299.31-11.31-80-80a16 16 0 0 0-22.62 22.62L409.37 240H320v32h89.37l-52.68 52.69a16 16 0 1 0 22.62 22.62l80-80a16 16 0 0 0 0-22.62z"},child:[]}]})(i)}function v6(i){return Wi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M352 144h112v112"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m48 368 121.37-121.37a32 32 0 0 1 45.26 0l50.74 50.74a32 32 0 0 0 45.26 0L448 160"},child:[]}]})(i)}function x6(i){return Wi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(i)}function b6(i){return Wi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(i)}function w6(i){return Wi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(i)}function S6(i){return Wi({attr:{viewBox:"0 0 536 512"},child:[{tag:"path",attr:{d:"M508.55 171.51L362.18 150.2 296.77 17.81C290.89 5.98 279.42 0 267.95 0c-11.4 0-22.79 5.9-28.69 17.81l-65.43 132.38-146.38 21.29c-26.25 3.8-36.77 36.09-17.74 54.59l105.89 103-25.06 145.48C86.98 495.33 103.57 512 122.15 512c4.93 0 10-1.17 14.87-3.75l130.95-68.68 130.94 68.7c4.86 2.55 9.92 3.71 14.83 3.71 18.6 0 35.22-16.61 31.66-37.4l-25.03-145.49 105.91-102.98c19.04-18.5 8.52-50.8-17.73-54.6zm-121.74 123.2l-18.12 17.62 4.28 24.88 19.52 113.45-102.13-53.59-22.38-11.74.03-317.19 51.03 103.29 11.18 22.63 25.01 3.64 114.23 16.63-82.65 80.38z"},child:[]}]})(i)}function T6(i){return Wi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(i)}function M6(i){return Wi({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm-48-248c0-17.7-14.3-32-32-32s-32 14.3-32 32 14.3 32 32 32 32-14.3 32-32zm128-32c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32zm-80 112c-35.6 0-88.8 21.3-95.8 61.2-2 11.8 9 21.5 20.5 18.1 31.2-9.6 59.4-15.3 75.3-15.3s44.1 5.7 75.3 15.3c11.4 3.5 22.5-6.3 20.5-18.1-7-39.9-60.2-61.2-95.8-61.2z"},child:[]}]})(i)}function p2({setIsOpen:i}){const{isAuthenticated:n,logout:d,loading:p}=ps(),_=Cu();async function S(){await d(),i(!1),_("/")}return q.jsxs("div",{className:"flex gap-3 md:flex-row md:items-center md:justify-center",children:[!n&&q.jsxs(q.Fragment,{children:[q.jsx("div",{className:"flex items-center",children:q.jsxs(ds,{to:"/login",className:({isActive:y})=>`text-natours flex items-center space-x-2 p-2 font-bold ${y?"border-b":""}`,onClick:()=>{i(!1)},children:[q.jsx(y6,{className:"text-natours size-8"}),q.jsx("span",{children:"Login"})]})}),q.jsx("div",{className:"flex items-center",children:q.jsxs(ds,{to:"/signup",className:({isActive:y})=>`text-natours flex items-center space-x-2 p-2 font-bold ${y?"border-b":""}`,onClick:()=>{i(!1)},children:[q.jsx(T6,{className:"text-natours size-8"}),q.jsx("span",{children:"Signup"})]})})]}),q.jsx("div",{className:"flex items-center",children:q.jsxs(ds,{to:"/tours",className:({isActive:y})=>`text-natours flex items-center space-x-2 p-2 font-bold ${y?"border-b":""}`,onClick:()=>{i(!1)},children:[q.jsx(g6,{className:"text-natours size-8"}),q.jsx("span",{children:"Tours"})]})}),n&&q.jsx("div",{className:"flex items-center",children:q.jsxs("button",{className:"text-natours flex items-center space-x-2 p-2 font-bold hover:cursor-pointer",onClick:S,children:[q.jsx(_6,{className:"text-natours size-8"}),q.jsx("span",{children:"Logout"}),p&&q.jsx("span",{children:q.jsx(da,{color:"green",className:"size-6"})})]})})]})}function A6(){const{user:i}=ps(),n=i&&i.photo?`/img/users/${i.photo}`:"/img/users/default.jpg",[d,p]=se.useState(!1),_=Cu();function S(y){const l=y==null?void 0:y.split(" ").map(C=>(C=C.toLowerCase(),C.charAt(0).toUpperCase()+C.slice(1)));return l==null?void 0:l.join(" ")}return q.jsxs("header",{className:"w-full",children:[q.jsx("nav",{className:"relative w-full bg-stone-800 py-5",children:q.jsxs("div",{className:"mx-5 flex items-center justify-between lg:mx-10",children:[q.jsx("img",{src:d6,alt:"natours_logo_white",className:"h-8",onClick:()=>{_("/"),p(!1)}}),d?q.jsx(u6,{className:"text-natours ml-auto size-8 md:hidden",onClick:()=>p(!d)}):q.jsx(h6,{className:"text-natours group size-8 md:hidden",onClick:()=>p(!d)}),q.jsxs("div",{className:"hidden gap-2 md:flex",children:[q.jsx(p2,{setIsOpen:p}),i&&q.jsxs(ds,{to:"/account",className:({isActive:y})=>`text-natours flex items-center space-x-2 p-2 font-bold ${y?"border-b":""}`,onClick:()=>{p(!1)},children:[q.jsx("img",{src:n,className:"size-8 rounded-full"}),q.jsx("span",{className:"text-xl",children:S(i.name)})]})]})]})}),q.jsx(FS,{children:d&&q.jsxs(fs.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},exit:{opacity:0,y:-30},transition:{type:"tween",duration:.1},className:"border-natours absolute z-50 flex h-fit w-full flex-col bg-stone-800 py-3 shadow-2xl md:hidden",children:[q.jsx("div",{className:"p-3",children:q.jsx("ul",{className:"flex flex-col items-center justify-center space-y-3 text-xl",children:q.jsx(p2,{setIsOpen:p})})}),i&&q.jsx("div",{className:"flex items-end justify-center p-3",children:q.jsxs(ds,{to:"/account",className:({isActive:y})=>`text-natours flex items-center space-x-2 p-2 font-bold ${y?"border-b":""}`,onClick:()=>{p(!1)},children:[q.jsx("img",{src:n,className:"size-12 rounded-full"}),q.jsx("span",{className:"text-xl",children:S(i.name)})]})})]},"navbar")})]})}const C6="/assets/logo-green-round-ClxvHQlP.png";function E6(){return q.jsx("footer",{className:"mt-4 border-t border-stone-400 bg-stone-500/10 lg:mt-8",children:q.jsxs("div",{className:"mx-4 my-8 flex flex-col items-center lg:mx-15 lg:mt-7 lg:flex-row lg:justify-between",children:[q.jsx("img",{src:C6,alt:"natours round logo",className:"size-15"}),q.jsxs("div",{className:"flex flex-col items-center lg:items-end",children:[q.jsxs("ul",{className:"flex space-x-3 p-2 text-center text-[12px] font-semibold text-stone-600/80 md:text-[0.9rem] lg:text-[1rem]",children:[q.jsx("a",{href:"#",children:"About us"}),q.jsx("a",{href:"#",children:"Download app"}),q.jsx("a",{href:"#",children:"Become a guide"}),q.jsx("a",{href:"#",children:"Careers"}),q.jsx("a",{href:"#",children:"Contact"})]}),q.jsxs("p",{className:"my-2 pr-2 text-[12px] text-stone-400 md:text-[0.9rem] lg:text-[1rem]",children:[new Date().getFullYear(),"  By Urmish Ramani. All Rights Reserved"]})]})]})})}function P6(){return q.jsxs("div",{className:"flex min-h-screen flex-col",children:[q.jsx(A6,{}),q.jsx(LP,{}),q.jsx("main",{className:"min-h-[calc(100vh-100px)]",children:q.jsx(O2,{})}),q.jsx(E6,{})]})}function R6(){const{loading:i,user:n,changeProfile:d}=ps(),[p,_]=se.useState(!1),[S,y]=se.useState(""),[l,C]=se.useState(""),[P,k]=se.useState(null),[O,L]=se.useState(!1),[F,G]=se.useState(!1),[ee,X]=se.useState(null);se.useEffect(function(){if(!n)return;C(n.name),y(n.email);const _e=`/img/users/${n.photo}`;X(_e)},[n]);function W(_e,Se){let ke=!0;return Se?t0.isEmail(Se)||(L(!0),Cr.error("Incorrect email address format!"),ke=!1):(L(!0),ke=!1),_e.trim()?G(!1):(G(!0),Cr.error("Please enter your full name ."),ke=!1),ke}const pe=_e=>{const Se=_e.target.files[0];if(Se.type.split("/")[1]!=="jpeg"&&Se.type.split("/")[1]!=="png")return Cr.error("Please Upload Jpeg or Png image only!");if(Se){const ke=URL.createObjectURL(Se);X(ke),k(Se)}else X(null)};async function me(_e){if(_e.preventDefault(),!W(l,S))return;const Se=new FormData;Se.append("name",l),Se.append("email",S),Se.append("photo",P),await d(Se)}return se.useEffect(()=>{if(!n)return;const _e=l!==n.name||S!==n.email||P!==null;_(_e)},[l,S,P,n]),i?q.jsx(da,{color:"green"}):q.jsx("form",{className:"w-full md:w-3/4 lg:w-1/2",onSubmit:me,children:q.jsx(FS,{children:q.jsxs(fs.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"my-7 flex flex-col justify-between space-y-8 rounded-lg bg-white px-6 py-7 shadow-lg md:min-w-[600px] md:p-13 md:shadow-xl",children:[q.jsx("div",{className:"flex flex-col space-y-1",children:q.jsx("h1",{className:"natours-gradient-text text-2xl font-bold",children:"Change Your Profile"})}),q.jsxs("div",{className:"flex flex-col space-y-3",children:[q.jsx("div",{children:q.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Full Name"})}),q.jsx("input",{type:"text",className:`input-natours w-full text-stone-600 ${F?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"John Doe",value:l,onChange:_e=>{C(_e.target.value),G(!1)}})]}),q.jsxs("div",{className:"flex flex-col space-y-3",children:[q.jsx("div",{children:q.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Email Address"})}),q.jsx("input",{type:"text",className:`input-natours w-full text-stone-600 ${O?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"you@example.com",value:S,onChange:_e=>{y(_e.target.value),L(!1)}})]}),q.jsxs("div",{className:"flex flex-col space-y-3",children:[q.jsx("input",{type:"file",id:"photo-upload",accept:"image/*",name:"photo",className:"hidden",onChange:pe}),ee&&q.jsx("label",{htmlFor:"photo-upload",className:"font-semibold text-stone-600",children:"Click to choose different photo"}),q.jsx("label",{htmlFor:"photo-upload",className:"hover:border-natours relative size-20 cursor-pointer rounded-full border-3 border-stone-300 bg-stone-100 p-1 transition-colors lg:size-26",children:ee?q.jsx("img",{src:ee||`/img/users/${n.photo}`,alt:"Profile Preview",className:"h-full w-full rounded-full object-cover"}):q.jsx("div",{className:"flex h-full w-full items-center justify-center text-stone-400",children:q.jsx("span",{className:"text-center text-sm select-none",children:"Choose Photo"})})})]}),q.jsx("div",{children:q.jsx("button",{className:"btn-primary w-1/2 py-3 disabled:cursor-not-allowed md:w-1/3",onClick:me,disabled:i||!p,children:i?q.jsx(da,{}):"Save"})})]})})})}function I6(){const{loading:i,changePassword:n}=ps(),[d,p]=se.useState(""),[_,S]=se.useState(""),[y,l]=se.useState(""),[C,P]=se.useState(!1),[k,O]=se.useState(!1),[L,F]=se.useState(!1);function G(W,pe,me){let _e=!0;return W?O(!1):(O(!0),Cr.error("Current password is required."),_e=!1),pe?pe.length<8?(P(!0),Cr.error("New password must be at least 8 characters."),_e=!1):P(!1):(P(!0),Cr.error("New password is required."),_e=!1),me?me!==pe?(F(!0),Cr.error("Passwords do not match."),_e=!1):F(!1):(F(!0),Cr.error("Confirm password is required."),_e=!1),_e}function ee(){p(""),S(""),l("")}async function X(W){W.preventDefault(),G(y,d,_)&&(await n(y,d,_),ee())}return q.jsx("form",{className:"w-full md:w-3/4 lg:w-1/2",onSubmit:X,children:q.jsxs(fs.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},className:"my-7 flex flex-col justify-between space-y-8 rounded-lg bg-white px-6 py-7 shadow-lg md:min-w-[600px] md:p-13 md:shadow-xl",children:[q.jsx("div",{className:"flex flex-col space-y-1",children:q.jsx("h1",{className:"natours-gradient-text text-2xl font-bold",children:"Change Your Password"})}),q.jsxs("div",{className:"flex flex-col space-y-3",children:[q.jsx("label",{htmlFor:"password",className:"font-semibold text-stone-600",children:"Current Password"}),q.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${k?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"",value:y,onChange:W=>{O(!1),l(W.target.value)}})]}),q.jsxs("div",{className:"flex flex-col space-y-3",children:[q.jsx("label",{htmlFor:"password",className:"font-semibold text-stone-600",children:"Password"}),q.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${C?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"",name:"password",value:d,onChange:W=>{P(!1),p(W.target.value)}})]}),q.jsxs("div",{className:"flex flex-col space-y-3",children:[q.jsx("label",{htmlFor:"confirm-password",className:"font-semibold text-stone-600",children:"Confirm Password"}),q.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${L?"border-3 border-red-400 focus:ring-0":""}`,placeholder:" ",name:"confirmPassword",value:_,onChange:W=>{F(!1),S(W.target.value)}})]}),q.jsx("div",{children:q.jsx("button",{className:"btn-primary w-1/2 py-3 md:w-1/3",onClick:X,disabled:i,children:i?q.jsx(da,{}):"Save"})})]})})}function D6(i){return Wi({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"},child:[]}]})(i)}function z6(){const[i,n]=se.useState("profile");return q.jsxs("div",{className:"flex w-full flex-col items-center justify-center",children:[q.jsxs("div",{className:"my-4 flex space-x-5 rounded-full bg-white p-3 shadow-md",children:[q.jsxs("button",{className:`text-natours flex items-center gap-2 ${i==="profile"?"bg-natours flex items-center gap-2 rounded-full px-3 py-0.5 text-white shadow-md":""}`,onClick:()=>n("profile"),children:[q.jsx("span",{children:q.jsx(D6,{})}),"Profile"]}),q.jsxs("button",{className:`text-natours flex items-center gap-2 ${i==="security"?"bg-natours rounded-full px-3 py-0.5 text-white shadow-md":""}`,onClick:()=>n("security"),children:[q.jsx("span",{children:q.jsx(m6,{})}),"Security"]})]}),i==="profile"&&q.jsx(R6,{}),i==="security"&&q.jsx(I6,{})]})}function L6(){const i=to(),n=se.useRef({});function d(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}return se.useLayoutEffect(()=>{const p=Object.values(n.current).find(_=>_==null?void 0:_.classList.contains("active"));p&&(d()?(p.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}),p.style.webkitTransform="translateZ(0)"):p.scrollIntoView({behavior:"smooth",inline:"center"}))},[i]),q.jsxs("section",{className:"flex flex-col items-center justify-center px-4 py-8",children:[q.jsx("div",{className:"my-5 flex w-full justify-center rounded bg-white whitespace-nowrap shadow-md md:w-fit md:space-x-5 md:overflow-visible",children:q.jsxs("div",{className:"mx-4 my-3 space-x-3 overflow-x-auto p-3",children:[q.jsx(ds,{to:"/account",end:!0,ref:p=>n.current.account=p,className:({isActive:p})=>`text-natours p-3 font-semibold lg:text-lg ${p?"active natours-gradient rounded text-white":""}`,children:"Account Settings"}),q.jsx(ds,{to:"my-bookings",end:!0,ref:p=>n.current.bookings=p,className:({isActive:p})=>`text-natours p-3 text-lg font-semibold lg:text-lg ${p?"active natours-gradient rounded text-white":""}`,children:"Bookings"}),q.jsx(ds,{to:"my-review",ref:p=>n.current.reviews=p,className:({isActive:p})=>`text-natours p-3 text-lg font-semibold lg:text-lg ${p?"active natours-gradient rounded text-white":""}`,children:"Reviews"})]})}),q.jsx(O2,{})]})}const k6=180*60*1e3,B6={tours:[],loading:!1,error:"",currentTour:{},myBookings:[]};function O6(i,n){switch(n.type){case"loadTours":return{...i,loading:!1,tours:n.payload};case"loading":return{...i,loading:n.payload};case"error":return{...i,loading:!1,error:n.payload};case"setCurrentTour":return{...i,currentTour:n.payload};case"loadMyBooking":return{...i,myBookings:n.payload};default:throw new Error(`Error occoured at action type:${n.type}`)}}const _M=se.createContext();function j6({children:i}){const[{tours:n,loading:d,error:p,currentTour:_,myBookings:S,myReviews:y},l]=se.useReducer(O6,B6),{userInitialized:C,isAuthenticated:P,user:k}=ps();se.useEffect(function(){async function X(){const W=L("tours");W?l({type:"loadTours",payload:W}):await F(),!(!C||!P)&&await ee()}X()},[C,P]);function O(X,W){const pe={data:W,timeStamp:Date.now()};localStorage.setItem(X,JSON.stringify(pe))}function L(X){const W=localStorage.getItem(X);if(!W)return null;try{const pe=JSON.parse(W);return Date.now()-pe.timeStamp>k6?(localStorage.removeItem(X),null):pe.data}catch{return localStorage.removeItem(X),null}}async function F(){try{l({type:"loading",payload:!0});const X=await ei.get("/api/v1/tours"),W=X.data.data.docs;O("tours",W),l({type:"loadTours",payload:X.data.data.docs})}catch(X){l({type:"error",payload:X.response})}finally{l({type:"loading",payload:!1})}}async function G(X){try{l({type:"loading",payload:!0});const W=await ei.get(`/api/v1/tours/tour/${X}`);l({type:"setCurrentTour",payload:W.data.data})}catch(W){console.log(W)}finally{l({type:"loading",payload:!1})}}async function ee(){try{l({type:"loading",payload:!0});const X=await ei(`/api/v1/bookings/user/${k.id}`,{withCredential:!0});l({type:"loadMyBooking",payload:X.data.bookings})}catch(X){console.error(X)}finally{l({type:"loading",payload:!1})}}return q.jsx(_M.Provider,{value:{tours:n,loading:d,error:p,getCurrentTour:G,myBookings:S,myReviews:y,currentTour:_},children:i})}function ro(){const i=se.useContext(_M);if(i===void 0)throw new Error("Tour Context is used out side of the children");return i}function N6(){const{myBookings:i,loading:n}=ro(),d=Cu();function p(_){d(`/tour/${_}`)}return q.jsxs("div",{className:"flex w-full flex-col items-center justify-center",children:[n&&q.jsx(da,{color:"green",className:"mt-5 size-12"}),i.length>0&&q.jsx("p",{className:"natours-gradient-text text-[16px]",children:"Your purchased Tours"}),i.length===0&&!n&&q.jsx("p",{className:"natours-gradient-text text-[16px] font-semibold",children:"No tour purchased yet."}),q.jsx("ul",{className:"mx-auto flex w-full flex-col lg:mt-5 lg:grid lg:grid-cols-2 lg:gap-5",children:!n&&[...i].reverse().map((_,S)=>q.jsx("li",{className:"md:mx-auto md:w-1/2 lg:w-full",children:q.jsxs("div",{className:"my-3 flex w-full items-center justify-between gap-4 rounded bg-white p-5 shadow-sm lg:my-2",children:[q.jsxs("div",{className:"flex items-center gap-4",children:[q.jsx("div",{className:"flex size-6 items-center justify-center rounded-full bg-stone-200",children:q.jsx("p",{className:"text-sm font-semibold",children:S+1})}),q.jsx("div",{className:"flex size-12 items-center",children:q.jsx("img",{className:"h-8 rounded shadow-sm",src:`/img/tours/${_.tour.imageCover}`,alt:`${_.tour.name}`})}),q.jsxs("div",{className:"flex flex-col",children:[q.jsx("p",{className:"font-semibold text-stone-800",children:_.tour.name}),q.jsxs("p",{className:"text-stone-800/50",children:["$",_.price]})]})]}),q.jsx("div",{className:"ml-3 flex flex-col items-center",children:q.jsx("button",{onClick:()=>p(_.tour.slug),className:"text-natours cursor-pointer rounded-full px-2 font-semibold",children:q.jsx(l6,{className:"m-0 size-6"})})})]})},S))})]})}var vM="basil",F6=function(n){return n===3?"v3":n},xM="https://js.stripe.com",U6="".concat(xM,"/").concat(vM,"/stripe.js"),V6=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,$6=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var Z6=function(n){return V6.test(n)||$6.test(n)},q6=function(){for(var n=document.querySelectorAll('script[src^="'.concat(xM,'"]')),d=0;d<n.length;d++){var p=n[d];if(Z6(p.src))return p}return null},m2=function(n){var d="",p=document.createElement("script");p.src="".concat(U6).concat(d);var _=document.head||document.body;if(!_)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return _.appendChild(p),p},G6=function(n,d){!n||!n._registerWrapper||n._registerWrapper({name:"stripe-js",version:"7.2.0",startTime:d})},mm=null,__=null,v_=null,H6=function(n){return function(d){n(new Error("Failed to load Stripe.js",{cause:d}))}},W6=function(n,d){return function(){window.Stripe?n(window.Stripe):d(new Error("Stripe.js not available"))}},K6=function(n){return mm!==null?mm:(mm=new Promise(function(d,p){if(typeof window>"u"||typeof document>"u"){d(null);return}if(window.Stripe){d(window.Stripe);return}try{var _=q6();if(!(_&&n)){if(!_)_=m2(n);else if(_&&v_!==null&&__!==null){var S;_.removeEventListener("load",v_),_.removeEventListener("error",__),(S=_.parentNode)===null||S===void 0||S.removeChild(_),_=m2(n)}}v_=W6(d,p),__=H6(p),_.addEventListener("load",v_),_.addEventListener("error",__)}catch(y){p(y);return}}),mm.catch(function(d){return mm=null,Promise.reject(d)}))},Y6=function(n,d,p){if(n===null)return null;var _=d[0],S=_.match(/^pk_test/),y=F6(n.version),l=vM;S&&y!==l&&console.warn("Stripe.js@".concat(y," was loaded on the page, but @stripe/stripe-js@").concat("7.2.0"," expected Stripe.js@").concat(l,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var C=n.apply(void 0,d);return G6(C,p),C},gm,bM=!1,wM=function(){return gm||(gm=K6(null).catch(function(n){return gm=null,Promise.reject(n)}),gm)};Promise.resolve().then(function(){return wM()}).catch(function(i){bM||console.warn(i)});var X6=function(){for(var n=arguments.length,d=new Array(n),p=0;p<n;p++)d[p]=arguments[p];bM=!0;var _=Date.now();return wM().then(function(S){return Y6(S,d,_)})};const Q6=X6("pk_test_51RGC81EDUE7FyaOzVQA0GjPNpiAihbVqW82AGrsxvNfNlweKRobsfx9yme635KBhoFNyqkrYY8E34tcQ5gUrjd1C00AH5ZWBCT");function J6(){const{currentTour:i}=ro(),{isAuthenticated:n}=ps(),[d,p]=se.useState(!1),_=async()=>{if(!n)return Cr.error("You need to log in to book this tour!");try{p(!0);const S=await Q6,y=await ei.get(`/api/v1/bookings/checkout-session/${i._id}`);await S.redirectToCheckout({sessionId:y.data.session.id}),Cr.success("Purchase Completed")}catch(S){Cr.error("Something went wrong. Please try again later."),console.error(S)}finally{p(!1)}};return q.jsx("section",{className:"px-5 py-7 md:px-10 lg:px-20",children:q.jsx("div",{className:"relative flex flex-col justify-center overflow-hidden rounded-3xl bg-stone-300/20 py-10 shadow-lg",children:q.jsxs("div",{className:"flex flex-col items-center justify-evenly space-y-5 md:flex-row",children:[q.jsxs("div",{className:"flex flex-col items-center justify-baseline space-y-5 px-5 md:px-10",children:[q.jsx("h1",{className:"natours-gradient-text font-italic text-center text-2xl font-bold md:text-2xl lg:text-4xl",children:"What are you waiting for?"}),q.jsxs("p",{className:"text-center text-stone-800/50 italic",children:[q.jsxs("span",{className:"font-semibold text-stone-600",children:[i.duration," days. 1 adventure"]}),".",q.jsx("br",{}),"Infinite memories. Make it yours today! ",q.jsx("br",{}),q.jsx("br",{}),!n&&q.jsx("span",{className:"text-red-400",children:"Login to book this tour"})]})]}),n&&q.jsx("button",{className:"btn-primary min-w-[200px] px-4 py-2 lg:py-4",onClick:_,disabled:d,children:d?q.jsx(da,{}):"Book Yours Now!"})]})})})}function ez(){const{currentTour:i}=ro();return q.jsx("section",{className:"flex flex-col lg:my-10 lg:flex-row",children:q.jsx("div",{className:"flex w-full flex-col lg:flex-row lg:overflow-auto",children:i.images.map((n,d)=>q.jsx("img",{src:`/img/tours/${n}`,alt:"tour Image 1",className:"mx-6 my-5 rounded object-cover shadow-xl md:mx-12 md:my-10 lg:mx-6 lg:my-8 lg:w-[40vw] lg:transition-all lg:hover:scale-105"},d))})})}function SM(i){return Wi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M429.6 92.1c4.9-11.9 2.1-25.6-7-34.7s-22.8-11.9-34.7-7l-352 144c-14.2 5.8-22.2 20.8-19.3 35.8s16.1 25.8 31.4 25.8l176 0 0 176c0 15.3 10.8 28.4 25.8 31.4s30-5.1 35.8-19.3l144-352z"},child:[]}]})(i)}function tz(i){return Wi({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M16 144a144 144 0 1 1 288 0A144 144 0 1 1 16 144zM160 80c8.8 0 16-7.2 16-16s-7.2-16-16-16c-53 0-96 43-96 96c0 8.8 7.2 16 16 16s16-7.2 16-16c0-35.3 28.7-64 64-64zM128 480l0-162.9c10.4 1.9 21.1 2.9 32 2.9s21.6-1 32-2.9L192 480c0 17.7-14.3 32-32 32s-32-14.3-32-32z"},child:[]}]})(i)}function TM(i){return Wi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M72 88a56 56 0 1 1 112 0A56 56 0 1 1 72 88zM64 245.7C54 256.9 48 271.8 48 288s6 31.1 16 42.3l0-84.7zm144.4-49.3C178.7 222.7 160 261.2 160 304c0 34.3 12 65.8 32 90.5l0 21.5c0 17.7-14.3 32-32 32l-64 0c-17.7 0-32-14.3-32-32l0-26.8C26.2 371.2 0 332.7 0 288c0-61.9 50.1-112 112-112l32 0c24 0 46.2 7.5 64.4 20.3zM448 416l0-21.5c20-24.7 32-56.2 32-90.5c0-42.8-18.7-81.3-48.4-107.7C449.8 183.5 472 176 496 176l32 0c61.9 0 112 50.1 112 112c0 44.7-26.2 83.2-64 101.2l0 26.8c0 17.7-14.3 32-32 32l-64 0c-17.7 0-32-14.3-32-32zm8-328a56 56 0 1 1 112 0A56 56 0 1 1 456 88zM576 245.7l0 84.7c10-11.3 16-26.1 16-42.3s-6-31.1-16-42.3zM320 32a64 64 0 1 1 0 128 64 64 0 1 1 0-128zM240 304c0 16.2 6 31 16 42.3l0-84.7c-10 11.3-16 26.1-16 42.3zm144-42.3l0 84.7c10-11.3 16-26.1 16-42.3s-6-31.1-16-42.3zM448 304c0 44.7-26.2 83.2-64 101.2l0 42.8c0 17.7-14.3 32-32 32l-64 0c-17.7 0-32-14.3-32-32l0-42.8c-37.8-18-64-56.5-64-101.2c0-61.9 50.1-112 112-112l32 0c61.9 0 112 50.1 112 112z"},child:[]}]})(i)}function rz(i){return Wi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M323.8 477.2c-38.2 10.9-78.1-11.2-89-49.4l-5.7-20c-3.7-13-10.4-25-19.5-35l-51.3-56.4c-8.9-9.8-8.2-25 1.6-33.9s25-8.2 33.9 1.6l51.3 56.4c14.1 15.5 24.4 34 30.1 54.1l5.7 20c3.6 12.7 16.9 20.1 29.7 16.5s20.1-16.9 16.5-29.7l-5.7-20c-5.7-19.9-14.7-38.7-26.6-55.5c-5.2-7.3-5.8-16.9-1.7-24.9s12.3-13 21.3-13L448 288c8.8 0 16-7.2 16-16c0-6.8-4.3-12.7-10.4-15c-7.4-2.8-13-9-14.9-16.7s.1-15.8 5.3-21.7c2.5-2.8 4-6.5 4-10.6c0-7.8-5.6-14.3-13-15.7c-8.2-1.6-15.1-7.3-18-15.2s-1.6-16.7 3.6-23.3c2.1-2.7 3.4-6.1 3.4-9.9c0-6.7-4.2-12.6-10.2-14.9c-11.5-4.5-17.7-16.9-14.4-28.8c.4-1.3 .6-2.8 .6-4.3c0-8.8-7.2-16-16-16l-97.5 0c-12.6 0-25 3.7-35.5 10.7l-61.7 41.1c-11 7.4-25.9 4.4-33.3-6.7s-4.4-25.9 6.7-33.3l61.7-41.1c18.4-12.3 40-18.8 62.1-18.8L384 32c34.7 0 62.9 27.6 64 62c14.6 11.7 24 29.7 24 50c0 4.5-.5 8.8-1.3 13c15.4 11.7 25.3 30.2 25.3 51c0 6.5-1 12.8-2.8 18.7C504.8 238.3 512 254.3 512 272c0 35.3-28.6 64-64 64l-92.3 0c4.7 10.4 8.7 21.2 11.8 32.2l5.7 20c10.9 38.2-11.2 78.1-49.4 89zM32 384c-17.7 0-32-14.3-32-32L0 128c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224c0 17.7-14.3 32-32 32l-64 0z"},child:[]}]})(i)}function iz(){const{currentTour:i}=ro();return q.jsxs("section",{className:"relative",children:[q.jsxs("div",{className:"relative z-2 md:h-[380px] lg:h-[470px]",children:[q.jsx("div",{className:"bg-natours/40 absolute h-full w-full"}),q.jsx("img",{src:`/img/tours/${i.imageCover}`,alt:"scenic image",className:"block h-full w-full object-cover"})]}),q.jsxs("div",{className:"absolute inset-0 z-4 flex flex-col items-center justify-center",children:[q.jsx("div",{className:"natours-gradient-t px-3 py-2 shadow-md",children:q.jsx("span",{className:"text-3xl font-light text-white lg:text-4xl",children:i.name})}),q.jsxs("div",{className:"flex gap-2 p-5 lg:gap-5",children:[q.jsxs("p",{className:"flex items-center gap-2 text-lg text-white",children:[q.jsx("span",{children:q.jsx(c6,{})}),i.duration," Days"]}),q.jsxs("p",{className:"flex items-center gap-2 text-lg text-white",children:[q.jsx("span",{children:q.jsx(SM,{})}),i.startLocation.description]})]})]})]})}function nz(){const{currentTour:i}=ro();return q.jsx("div",{className:"flex flex-col bg-stone-300/10 p-10 lg:h-full lg:w-1/2 lg:py-30",children:q.jsxs("div",{className:"flex flex-col justify-center space-y-4",children:[q.jsx("h1",{className:"natours-gradient-text font-italic text-center text-2xl font-bold lg:text-3xl",children:"Discover Your next adventure"}),i.description.split(`
`).map((n,d)=>q.jsx("p",{className:"text-center text-stone-800/50",children:n},d))]})})}function az(){const{currentTour:i}=ro(),n=d=>d[0].toUpperCase()+d.slice(1).toLowerCase();return q.jsxs("div",{className:"my-4 items-center justify-center space-y-6",children:[q.jsx("h1",{className:"natours-gradient-text font-italic w-full text-center text-3xl font-bold lg:text-3xl",children:"Tour Facts"}),q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx(gM,{className:"text-natours size-7"}),q.jsxs("p",{className:"font-semibold text-stone-600",children:["Next Date",q.jsx("span",{className:"ml-3 font-medium text-stone-800/50",children:new Date(i.startDates[0]).toLocaleDateString("en-US",{month:"long",year:"numeric"})})]})]}),q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx(v6,{className:"text-natours size-7"}),q.jsxs("p",{className:"font-semibold text-stone-600",children:["Difficulty",q.jsx("span",{className:"ml-3 font-medium text-stone-800/50",children:n(i.difficulty)})]})]}),q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx(TM,{className:"text-natours size-7"}),q.jsxs("p",{className:"font-semibold text-stone-600",children:["Participants",q.jsx("span",{className:"ml-3 font-medium text-stone-800/50",children:i.maxGroupSize})]})]}),q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx(S6,{className:"text-natours size-7"}),q.jsxs("p",{className:"font-semibold text-stone-600",children:["Ratings",q.jsxs("span",{className:"ml-3 font-medium text-stone-800/50",children:[i.ratingsAverage," / 5"]})]})]})]})}function sz({photo:i,guideRole:n,guideName:d}){return q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("img",{className:"text-natours size-10 rounded-full",src:i}),q.jsxs("p",{className:"font-semibold text-stone-600",children:[n,q.jsx("span",{className:"ml-3 font-medium text-stone-800/50",children:d})]})]})}function oz(){const{currentTour:i}=ro(),n=d=>{let p=d;return p==="guide"?p="Tour Guide":(p=p.split("-").map(_=>_[0].toUpperCase()+_.slice(1).toLowerCase()).join(" "),p)};return q.jsxs("div",{className:"my-4 items-center justify-center space-y-6",children:[q.jsx("h1",{className:"natours-gradient-text font-italic w-full text-center text-3xl font-bold lg:text-3xl",children:"Tour Guides"}),i.guides.length===0?q.jsx("h1",{className:"text-stone-600",children:"No guides are available at the moment."}):i.guides.map(d=>q.jsx(sz,{photo:`/img/users/${d.photo}`,guideName:d.name,guideRole:n(d.role)},d._id))]})}function lz(){return q.jsxs("section",{className:"flex flex-col items-center justify-center lg:min-h-[500px] lg:flex-row lg:items-start",children:[q.jsx(nz,{}),q.jsxs("div",{className:"flex w-full flex-col items-center justify-evenly gap-10 py-10 md:flex-row md:items-baseline lg:h-full lg:w-1/2 lg:flex-col lg:items-center lg:py-5",children:[q.jsx(az,{}),q.jsx(oz,{})]})]})}var I_={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.4.0/LICENSE.txt
 */var uz=I_.exports,g2;function cz(){return g2||(g2=1,function(i,n){(function(d,p){i.exports=p()})(uz,function(){var d={},p={};function _(y,l,C){if(p[y]=C,y==="index"){var P="var sharedModule = {}; ("+p.shared+")(sharedModule); ("+p.worker+")(sharedModule);",k={};return p.shared(k),p.index(d,k),typeof window<"u"&&d.setWorkerUrl(window.URL.createObjectURL(new Blob([P],{type:"text/javascript"}))),d}}_("shared",["exports"],function(y){function l(s,t,o,c){return new(o||(o=Promise))(function(g,w){function T(B){try{I(c.next(B))}catch(N){w(N)}}function A(B){try{I(c.throw(B))}catch(N){w(N)}}function I(B){var N;B.done?g(B.value):(N=B.value,N instanceof o?N:new o(function(V){V(N)})).then(T,A)}I((c=c.apply(s,t||[])).next())})}function C(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var P,k;function O(){if(k)return P;function s(t,o){this.x=t,this.y=o}return k=1,P=s,s.prototype={clone:function(){return new s(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,o){return this.clone()._rotateAround(t,o)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var o=t.x-this.x,c=t.y-this.y;return o*o+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,o){return Math.atan2(this.x*o-this.y*t,this.x*t+this.y*o)},_matMult:function(t){var o=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=o,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var o=Math.cos(t),c=Math.sin(t),g=c*this.x+o*this.y;return this.x=o*this.x-c*this.y,this.y=g,this},_rotateAround:function(t,o){var c=Math.cos(t),g=Math.sin(t),w=o.y+g*(this.x-o.x)+c*(this.y-o.y);return this.x=o.x+c*(this.x-o.x)-g*(this.y-o.y),this.y=w,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},s.convert=function(t){return t instanceof s?t:Array.isArray(t)?new s(t[0],t[1]):t},P}typeof SuppressedError=="function"&&SuppressedError;var L,F,G=C(O()),ee=function(){if(F)return L;function s(t,o,c,g){this.cx=3*t,this.bx=3*(c-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(g-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=o,this.p2x=c,this.p2y=g}return F=1,L=s,s.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,o){if(o===void 0&&(o=1e-6),t<0)return 0;if(t>1)return 1;for(var c=t,g=0;g<8;g++){var w=this.sampleCurveX(c)-t;if(Math.abs(w)<o)return c;var T=this.sampleCurveDerivativeX(c);if(Math.abs(T)<1e-6)break;c-=w/T}var A=0,I=1;for(c=t,g=0;g<20&&(w=this.sampleCurveX(c),!(Math.abs(w-t)<o));g++)t>w?A=c:I=c,c=.5*(I-A)+A;return c},solve:function(t,o){return this.sampleCurveY(this.solveCurveX(t,o))}},L}(),X=C(ee);let W,pe;function me(){return W==null&&(W=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),W}function _e(){if(pe==null&&(pe=!1,me())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let c=0;c<5*5;c++){const g=4*c;t.fillStyle=`rgb(${g},${g+1},${g+2})`,t.fillRect(c%5,Math.floor(c/5),1,1)}const o=t.getImageData(0,0,5,5).data;for(let c=0;c<5*5*4;c++)if(c%4!=3&&o[c]!==c){pe=!0;break}}}return pe||!1}var Se=1e-6,ke=typeof Float32Array<"u"?Float32Array:Array;function nt(){var s=new ke(9);return ke!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function Ke(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Ye(){var s=new ke(3);return ke!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function ht(s){return Math.hypot(s[0],s[1],s[2])}function kt(s,t,o){var c=new ke(3);return c[0]=s,c[1]=t,c[2]=o,c}Math.hypot||(Math.hypot=function(){for(var s=0,t=arguments.length;t--;)s+=arguments[t]*arguments[t];return Math.sqrt(s)});var sr,ir=ht;function Xt(s,t,o){var c=t[0],g=t[1],w=t[2],T=t[3];return s[0]=o[0]*c+o[4]*g+o[8]*w+o[12]*T,s[1]=o[1]*c+o[5]*g+o[9]*w+o[13]*T,s[2]=o[2]*c+o[6]*g+o[10]*w+o[14]*T,s[3]=o[3]*c+o[7]*g+o[11]*w+o[15]*T,s}function or(){var s=new ke(4);return ke!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function Ct(){var s=new ke(2);return ke!=Float32Array&&(s[0]=0,s[1]=0),s}function Nt(s,t){var o=new ke(2);return o[0]=s,o[1]=t,o}Ye(),sr=new ke(4),ke!=Float32Array&&(sr[0]=0,sr[1]=0,sr[2]=0,sr[3]=0),Ye(),kt(1,0,0),kt(0,1,0),or(),or(),nt(),Ct();const Rt=8192;function dr(s,t,o){return t*(Rt/(s.tileSize*Math.pow(2,o-s.tileID.overscaledZ)))}function De(s,t){return(s%t+t)%t}function wt(s,t,o){return s*(1-o)+t*o}function Zt(s){if(s<=0)return 0;if(s>=1)return 1;const t=s*s,o=t*s;return 4*(s<.5?o:3*(s-t)+o-.75)}function Ht(s,t,o,c){const g=new X(s,t,o,c);return w=>g.solve(w)}const zt=Ht(.25,.1,.25,1);function er(s,t,o){return Math.min(o,Math.max(t,s))}function nr(s,t,o){const c=o-t,g=((s-t)%c+c)%c+t;return g===t?o:g}function Qr(s,...t){for(const o of t)for(const c in o)s[c]=o[c];return s}let br=1;function ti(s,t,o){const c={};for(const g in s)c[g]=t.call(this,s[g],g,s);return c}function Ur(s,t,o){const c={};for(const g in s)t.call(this,s[g],g,s)&&(c[g]=s[g]);return c}function li(s){return Array.isArray(s)?s.map(li):typeof s=="object"&&s?ti(s,li):s}const Di={};function zr(s){Di[s]||(typeof console<"u"&&console.warn(s),Di[s]=!0)}function pr(s,t,o){return(o.y-s.y)*(t.x-s.x)>(t.y-s.y)*(o.x-s.x)}function Ki(s){return typeof WorkerGlobalScope<"u"&&s!==void 0&&s instanceof WorkerGlobalScope}let Fi=null;function Yi(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const we="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Re(s,t,o,c,g){return l(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const w=new VideoFrame(s,{timestamp:0});try{const T=w==null?void 0:w.format;if(!T||!T.startsWith("BGR")&&!T.startsWith("RGB"))throw new Error(`Unrecognized format ${T}`);const A=T.startsWith("BGR"),I=new Uint8ClampedArray(c*g*4);if(yield w.copyTo(I,function(B,N,V,H,Q){const J=4*Math.max(1,0),ie=(Math.max(0,V)-V)*H*4+J,ce=4*H,ye=Math.max(0,N),ze=Math.max(0,V);return{rect:{x:ye,y:ze,width:Math.min(B.width,N+H)-ye,height:Math.min(B.height,V+Q)-ze},layout:[{offset:ie,stride:ce}]}}(s,t,o,c,g)),A)for(let B=0;B<I.length;B+=4){const N=I[B];I[B]=I[B+2],I[B+2]=N}return I}finally{w.close()}})}let We,vt;function xt(s,t,o,c){return s.addEventListener(t,o,c),{unsubscribe:()=>{s.removeEventListener(t,o,c)}}}function Et(s){return s/Math.PI*180}const Ut={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},ur={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},_r="AbortError";function qr(){return new Error(_r)}const Pi={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ui(s){return Pi.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}const zi="global-dispatcher";class Rn extends Error{constructor(t,o,c,g){super(`AJAXError: ${o} (${t}): ${c}`),this.status=t,this.statusText=o,this.url=c,this.body=g}}const In=()=>Ki(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ni=function(s,t){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){const c=Ui(s.url);if(c)return c(s,t);if(Ki(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:zi},t)}if(!(/^file:/.test(o=s.url)||/^file:/.test(In())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(c,g){return l(this,void 0,void 0,function*(){const w=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,cache:c.cache,referrer:In(),signal:g.signal});let T,A;c.type!=="json"||w.headers.has("Accept")||w.headers.set("Accept","application/json");try{T=yield fetch(w)}catch(B){throw new Rn(0,B.message,c.url,new Blob)}if(!T.ok){const B=yield T.blob();throw new Rn(T.status,T.statusText,c.url,B)}A=c.type==="arrayBuffer"||c.type==="image"?T.arrayBuffer():c.type==="json"?T.json():T.text();const I=yield A;if(g.signal.aborted)throw qr();return{data:I,cacheControl:T.headers.get("Cache-Control"),expires:T.headers.get("Expires")}})}(s,t);if(Ki(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:zi},t)}var o;return function(c,g){return new Promise((w,T)=>{var A;const I=new XMLHttpRequest;I.open(c.method||"GET",c.url,!0),c.type!=="arrayBuffer"&&c.type!=="image"||(I.responseType="arraybuffer");for(const B in c.headers)I.setRequestHeader(B,c.headers[B]);c.type==="json"&&(I.responseType="text",!((A=c.headers)===null||A===void 0)&&A.Accept||I.setRequestHeader("Accept","application/json")),I.withCredentials=c.credentials==="include",I.onerror=()=>{T(new Error(I.statusText))},I.onload=()=>{if(!g.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let B=I.response;if(c.type==="json")try{B=JSON.parse(I.response)}catch(N){return void T(N)}w({data:B,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{const B=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});T(new Rn(I.status,I.statusText,c.url,B))}},g.signal.addEventListener("abort",()=>{I.abort(),T(qr())}),I.send(c.body)})}(s,t)};function ri(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const t=new URL(s),o=window.location;return t.protocol===o.protocol&&t.host===o.host}function je(s,t,o){o[s]&&o[s].indexOf(t)!==-1||(o[s]=o[s]||[],o[s].push(t))}function ne(s,t,o){if(o&&o[s]){const c=o[s].indexOf(t);c!==-1&&o[s].splice(c,1)}}class ae{constructor(t,o={}){Qr(this,o),this.type=t}}class he extends ae{constructor(t,o={}){super("error",Qr({error:t},o))}}class be{on(t,o){return this._listeners=this._listeners||{},je(t,o,this._listeners),{unsubscribe:()=>{this.off(t,o)}}}off(t,o){return ne(t,o,this._listeners),ne(t,o,this._oneTimeListeners),this}once(t,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},je(t,o,this._oneTimeListeners),this):new Promise(c=>this.once(t,c))}fire(t,o){typeof t=="string"&&(t=new ae(t,o||{}));const c=t.type;if(this.listens(c)){t.target=this;const g=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];for(const A of g)A.call(this,t);const w=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];for(const A of w)ne(c,A,this._oneTimeListeners),A.call(this,t);const T=this._eventedParent;T&&(Qr(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(t))}else t instanceof he&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,o){return this._eventedParent=t,this._eventedParentData=o,this}}var oe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Be=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ve(s,t){const o={};for(const c in s)c!=="ref"&&(o[c]=s[c]);return Be.forEach(c=>{c in t&&(o[c]=t[c])}),o}function Ce(s,t){if(Array.isArray(s)){if(!Array.isArray(t)||s.length!==t.length)return!1;for(let o=0;o<s.length;o++)if(!Ce(s[o],t[o]))return!1;return!0}if(typeof s=="object"&&s!==null&&t!==null){if(typeof t!="object"||Object.keys(s).length!==Object.keys(t).length)return!1;for(const o in s)if(!Ce(s[o],t[o]))return!1;return!0}return s===t}function Ue(s,t){s.push(t)}function qe(s,t,o){Ue(o,{command:"addSource",args:[s,t[s]]})}function Fe(s,t,o){Ue(t,{command:"removeSource",args:[s]}),o[s]=!0}function dt(s,t,o,c){Fe(s,o,c),qe(s,t,o)}function Pt(s,t,o){let c;for(c in s[o])if(Object.prototype.hasOwnProperty.call(s[o],c)&&c!=="data"&&!Ce(s[o][c],t[o][c]))return!1;for(c in t[o])if(Object.prototype.hasOwnProperty.call(t[o],c)&&c!=="data"&&!Ce(s[o][c],t[o][c]))return!1;return!0}function At(s,t,o,c,g,w){s=s||{},t=t||{};for(const T in s)Object.prototype.hasOwnProperty.call(s,T)&&(Ce(s[T],t[T])||o.push({command:w,args:[c,T,t[T],g]}));for(const T in t)Object.prototype.hasOwnProperty.call(t,T)&&!Object.prototype.hasOwnProperty.call(s,T)&&(Ce(s[T],t[T])||o.push({command:w,args:[c,T,t[T],g]}))}function Ft(s){return s.id}function lr(s,t){return s[t.id]=t,s}class Je{constructor(t,o,c,g){this.message=(t?`${t}: `:"")+c,g&&(this.identifier=g),o!=null&&o.__line__&&(this.line=o.__line__)}}function Wt(s,...t){for(const o of t)for(const c in o)s[c]=o[c];return s}class vr extends Error{constructor(t,o){super(o),this.message=o,this.key=t}}class Vr{constructor(t,o=[]){this.parent=t,this.bindings={};for(const[c,g]of o)this.bindings[c]=g}concat(t){return new Vr(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const Er={kind:"null"},tt={kind:"number"},yt={kind:"string"},Lt={kind:"boolean"},Hr={kind:"color"},Vi={kind:"projectionDefinition"},si={kind:"object"},ar={kind:"value"},Za={kind:"collator"},_n={kind:"formatted"},qa={kind:"padding"},$i={kind:"resolvedImage"},sa={kind:"variableAnchorOffsetCollection"};function bi(s,t){return{kind:"array",itemType:s,N:t}}function Rr(s){if(s.kind==="array"){const t=Rr(s.itemType);return typeof s.N=="number"?`array<${t}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${t}>`}return s.kind}const ut=[Er,tt,yt,Lt,Hr,Vi,_n,si,bi(ar),qa,$i,sa];function io(s,t){if(t.kind==="error")return null;if(s.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!io(s.itemType,t.itemType))&&(typeof s.N!="number"||s.N===t.N))return null}else{if(s.kind===t.kind)return null;if(s.kind==="value"){for(const o of ut)if(!io(o,t))return null}}return`Expected ${Rr(s)} but found ${Rr(t)} instead.`}function Bo(s,t){return t.some(o=>o.kind===s.kind)}function wr(s,t){return t.some(o=>o==="null"?s===null:o==="array"?Array.isArray(s):o==="object"?s&&!Array.isArray(s)&&typeof s=="object":o===typeof s)}function Li(s,t){return s.kind==="array"&&t.kind==="array"?s.itemType.kind===t.itemType.kind&&typeof s.N=="number":s.kind===t.kind}const vn=.96422,Ds=.82521,no=4/29,oa=6/29,ao=3*oa*oa,wc=oa*oa*oa,Sc=Math.PI/180,zs=180/Math.PI;function fa(s){return(s%=360)<0&&(s+=360),s}function Ih([s,t,o,c]){let g,w;const T=Pl((.2225045*(s=Dh(s))+.7168786*(t=Dh(t))+.0606169*(o=Dh(o)))/1);s===t&&t===o?g=w=T:(g=Pl((.4360747*s+.3850649*t+.1430804*o)/vn),w=Pl((.0139322*s+.0971045*t+.7141733*o)/Ds));const A=116*T-16;return[A<0?0:A,500*(g-T),200*(T-w),c]}function Dh(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Pl(s){return s>wc?Math.pow(s,1/3):s/ao+no}function Tc([s,t,o,c]){let g=(s+16)/116,w=isNaN(t)?g:g+t/500,T=isNaN(o)?g:g-o/200;return g=1*zh(g),w=vn*zh(w),T=Ds*zh(T),[gs(3.1338561*w-1.6168667*g-.4906146*T),gs(-.9787684*w+1.9161415*g+.033454*T),gs(.0719453*w-.2289914*g+1.4052427*T),c]}function gs(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function zh(s){return s>oa?s*s*s:ao*(s-no)}function Yn(s){return parseInt(s.padEnd(2,s),16)/255}function so(s,t){return Oo(t?s/100:s,0,1)}function Oo(s,t,o){return Math.min(Math.max(t,s),o)}function Mc(s){return!s.some(Number.isNaN)}const Rl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ys(s,t,o){return s+o*(t-s)}function jo(s,t,o){return s.map((c,g)=>ys(c,t[g],o))}class cr{constructor(t,o,c,g=1,w=!0){this.r=t,this.g=o,this.b=c,this.a=g,w||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[t,o,c,g]))}static parse(t){if(t instanceof cr)return t;if(typeof t!="string")return;const o=function(c){if((c=c.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=Rl[c];if(g){const[T,A,I]=g;return[T/255,A/255,I/255,1]}if(c.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(c)){const T=c.length<6?1:2;let A=1;return[Yn(c.slice(A,A+=T)),Yn(c.slice(A,A+=T)),Yn(c.slice(A,A+=T)),Yn(c.slice(A,A+T)||"ff")]}if(c.startsWith("rgb")){const T=c.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[A,I,B,N,V,H,Q,J,ie,ce,ye,ze]=T,xe=[N||" ",Q||" ",ce].join("");if(xe==="  "||xe==="  /"||xe===",,"||xe===",,,"){const K=[B,H,ie].join(""),le=K==="%%%"?100:K===""?255:0;if(le){const Te=[Oo(+I/le,0,1),Oo(+V/le,0,1),Oo(+J/le,0,1),ye?so(+ye,ze):1];if(Mc(Te))return Te}}return}}const w=c.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[T,A,I,B,N,V,H,Q,J]=w,ie=[I||" ",N||" ",H].join("");if(ie==="  "||ie==="  /"||ie===",,"||ie===",,,"){const ce=[+A,Oo(+B,0,100),Oo(+V,0,100),Q?so(+Q,J):1];if(Mc(ce))return function([ye,ze,xe,K]){function le(Te){const Ge=(Te+ye/30)%12,mt=ze*Math.min(xe,1-xe);return xe-mt*Math.max(-1,Math.min(Ge-3,9-Ge,1))}return ye=fa(ye),ze/=100,xe/=100,[le(0),le(8),le(4),K]}(ce)}}}(t);return o?new cr(...o,!1):void 0}get rgb(){const{r:t,g:o,b:c,a:g}=this,w=g||1/0;return this.overwriteGetter("rgb",[t/w,o/w,c/w,g])}get hcl(){return this.overwriteGetter("hcl",function(t){const[o,c,g,w]=Ih(t),T=Math.sqrt(c*c+g*g);return[Math.round(1e4*T)?fa(Math.atan2(g,c)*zs):NaN,T,o,w]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ih(this.rgb))}overwriteGetter(t,o){return Object.defineProperty(this,t,{value:o}),o}toString(){const[t,o,c,g]=this.rgb;return`rgba(${[t,o,c].map(w=>Math.round(255*w)).join(",")},${g})`}static interpolate(t,o,c,g="rgb"){switch(g){case"rgb":{const[w,T,A,I]=jo(t.rgb,o.rgb,c);return new cr(w,T,A,I,!1)}case"hcl":{const[w,T,A,I]=t.hcl,[B,N,V,H]=o.hcl;let Q,J;if(isNaN(w)||isNaN(B))isNaN(w)?isNaN(B)?Q=NaN:(Q=B,A!==1&&A!==0||(J=N)):(Q=w,V!==1&&V!==0||(J=T));else{let xe=B-w;B>w&&xe>180?xe-=360:B<w&&w-B>180&&(xe+=360),Q=w+c*xe}const[ie,ce,ye,ze]=function([xe,K,le,Te]){return xe=isNaN(xe)?0:xe*Sc,Tc([le,Math.cos(xe)*K,Math.sin(xe)*K,Te])}([Q,J??ys(T,N,c),ys(A,V,c),ys(I,H,c)]);return new cr(ie,ce,ye,ze,!1)}case"lab":{const[w,T,A,I]=Tc(jo(t.lab,o.lab,c));return new cr(w,T,A,I,!1)}}}}cr.black=new cr(0,0,0,1),cr.white=new cr(1,1,1,1),cr.transparent=new cr(0,0,0,0),cr.red=new cr(1,0,0,1);class Or{constructor(t,o,c){this.sensitivity=t?o?"variant":"case":o?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,o){return this.collator.compare(t,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const No=["bottom","center","top"];class Ga{constructor(t,o,c,g,w,T){this.text=t,this.image=o,this.scale=c,this.fontStack=g,this.textColor=w,this.verticalAlign=T}}class jn{constructor(t){this.sections=t}static fromString(t){return new jn([new Ga(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof jn?t:jn.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class Nn{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Nn)return t;if(typeof t=="number")return new Nn([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const o of t)if(typeof o!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new Nn(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,o,c){return new Nn(jo(t.values,o.values,c))}}class ki{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const oo=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class cn{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof cn)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let o=0;o<t.length;o+=2){const c=t[o],g=t[o+1];if(typeof c!="string"||!oo.has(c)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new cn(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,o,c){const g=t.values,w=o.values;if(g.length!==w.length)throw new ki(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${o.toString()}`);const T=[];for(let A=0;A<g.length;A+=2){if(g[A]!==w[A])throw new ki(`Cannot interpolate values containing mismatched anchors. from[${A}]: ${g[A]}, to[${A}]: ${w[A]}`);T.push(g[A]);const[I,B]=g[A+1],[N,V]=w[A+1];T.push([ys(I,N,c),ys(B,V,c)])}return new cn(T)}}class Xn{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Xn({name:t,available:!1}):null}}class en{constructor(t,o,c){this.from=t,this.to=o,this.transition=c}static interpolate(t,o,c){return new en(t,o,c)}static parse(t){return t instanceof en?t:Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number"?new en(t[0],t[1],t[2]):typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number"?new en(t.from,t.to,t.transition):typeof t=="string"?new en(t,t,1):void 0}}function pa(s,t,o,c){return typeof s=="number"&&s>=0&&s<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof o=="number"&&o>=0&&o<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:`Invalid rgba value [${[s,t,o,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof c=="number"?[s,t,o,c]:[s,t,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Il(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof en||s instanceof cr||s instanceof Or||s instanceof jn||s instanceof Nn||s instanceof cn||s instanceof Xn)return!0;if(Array.isArray(s)){for(const t of s)if(!Il(t))return!1;return!0}if(typeof s=="object"){for(const t in s)if(!Il(s[t]))return!1;return!0}return!1}function wi(s){if(s===null)return Er;if(typeof s=="string")return yt;if(typeof s=="boolean")return Lt;if(typeof s=="number")return tt;if(s instanceof cr)return Hr;if(s instanceof en)return Vi;if(s instanceof Or)return Za;if(s instanceof jn)return _n;if(s instanceof Nn)return qa;if(s instanceof cn)return sa;if(s instanceof Xn)return $i;if(Array.isArray(s)){const t=s.length;let o;for(const c of s){const g=wi(c);if(o){if(o===g)continue;o=ar;break}o=g}return bi(o||ar,t)}return si}function Ha(s){const t=typeof s;return s===null?"":t==="string"||t==="number"||t==="boolean"?String(s):s instanceof cr||s instanceof en||s instanceof jn||s instanceof Nn||s instanceof cn||s instanceof Xn?s.toString():JSON.stringify(s)}class wa{constructor(t,o){this.type=t,this.value=o}static parse(t,o){if(t.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Il(t[1]))return o.error("invalid value");const c=t[1];let g=wi(c);const w=o.expectedType;return g.kind!=="array"||g.N!==0||!w||w.kind!=="array"||typeof w.N=="number"&&w.N!==0||(g=w),new wa(g,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Fo={string:yt,number:tt,boolean:Lt,object:si};class Fn{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");let c,g=1;const w=t[0];if(w==="array"){let A,I;if(t.length>2){const B=t[1];if(typeof B!="string"||!(B in Fo)||B==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);A=Fo[B],g++}else A=ar;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return o.error('The length argument to "array" must be a positive integer literal',2);I=t[2],g++}c=bi(A,I)}else{if(!Fo[w])throw new Error(`Types doesn't contain name = ${w}`);c=Fo[w]}const T=[];for(;g<t.length;g++){const A=o.parse(t[g],g,ar);if(!A)return null;T.push(A)}return new Fn(c,T)}evaluate(t){for(let o=0;o<this.args.length;o++){const c=this.args[o].evaluate(t);if(!io(this.type,wi(c)))return c;if(o===this.args.length-1)throw new ki(`Expected value to be of type ${Rr(this.type)}, but found ${Rr(wi(c))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Sa={"to-boolean":Lt,"to-color":Hr,"to-number":tt,"to-string":yt};class Wr{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const c=t[0];if(!Sa[c])throw new Error(`Can't parse ${c} as it is not part of the known types`);if((c==="to-boolean"||c==="to-string")&&t.length!==2)return o.error("Expected one argument.");const g=Sa[c],w=[];for(let T=1;T<t.length;T++){const A=o.parse(t[T],T,ar);if(!A)return null;w.push(A)}return new Wr(g,w)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let o,c;for(const g of this.args){if(o=g.evaluate(t),c=null,o instanceof cr)return o;if(typeof o=="string"){const w=t.parseColor(o);if(w)return w}else if(Array.isArray(o)&&(c=o.length<3||o.length>4?`Invalid rgba value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:pa(o[0],o[1],o[2],o[3]),!c))return new cr(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new ki(c||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"padding":{let o;for(const c of this.args){o=c.evaluate(t);const g=Nn.parse(o);if(g)return g}throw new ki(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"variableAnchorOffsetCollection":{let o;for(const c of this.args){o=c.evaluate(t);const g=cn.parse(o);if(g)return g}throw new ki(`Could not parse variableAnchorOffsetCollection from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"number":{let o=null;for(const c of this.args){if(o=c.evaluate(t),o===null)return 0;const g=Number(o);if(!isNaN(g))return g}throw new ki(`Could not convert ${JSON.stringify(o)} to number.`)}case"formatted":return jn.fromString(Ha(this.args[0].evaluate(t)));case"resolvedImage":return Xn.fromString(Ha(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return Ha(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Dl=["Unknown","Point","LineString","Polygon"];class $r{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Dl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let o=this._parseColorCache[t];return o||(o=this._parseColorCache[t]=cr.parse(t)),o}}class hr{constructor(t,o,c=[],g,w=new Vr,T=[]){this.registry=t,this.path=c,this.key=c.map(A=>`[${A}]`).join(""),this.scope=w,this.errors=T,this.expectedType=g,this._isConstant=o}parse(t,o,c,g,w={}){return o?this.concat(o,c,g)._parse(t,w):this._parse(t,w)}_parse(t,o){function c(g,w,T){return T==="assert"?new Fn(w,[g]):T==="coerce"?new Wr(w,[g]):g}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=t[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const w=this.registry[g];if(w){let T=w.parse(t,this);if(!T)return null;if(this.expectedType){const A=this.expectedType,I=T.type;if(A.kind!=="string"&&A.kind!=="number"&&A.kind!=="boolean"&&A.kind!=="object"&&A.kind!=="array"||I.kind!=="value")if(A.kind!=="projectionDefinition"||I.kind!=="string"&&I.kind!=="array")if(A.kind!=="color"&&A.kind!=="formatted"&&A.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string")if(A.kind!=="padding"||I.kind!=="value"&&I.kind!=="number"&&I.kind!=="array")if(A.kind!=="variableAnchorOffsetCollection"||I.kind!=="value"&&I.kind!=="array"){if(this.checkSubtype(A,I))return null}else T=c(T,A,o.typeAnnotation||"coerce");else T=c(T,A,o.typeAnnotation||"coerce");else T=c(T,A,o.typeAnnotation||"coerce");else T=c(T,A,o.typeAnnotation||"coerce");else T=c(T,A,o.typeAnnotation||"assert")}if(!(T instanceof wa)&&T.type.kind!=="resolvedImage"&&this._isConstant(T)){const A=new $r;try{T=new wa(T.type,T.evaluate(A))}catch(I){return this.error(I.message),null}}return T}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,o,c){const g=typeof t=="number"?this.path.concat(t):this.path,w=c?this.scope.concat(c):this.scope;return new hr(this.registry,this._isConstant,g,o||null,w,this.errors)}error(t,...o){const c=`${this.key}${o.map(g=>`[${g}]`).join("")}`;this.errors.push(new vr(c,t))}checkSubtype(t,o){const c=io(t,o);return c&&this.error(c),c}}class Ls{constructor(t,o){this.type=o.type,this.bindings=[].concat(t),this.result=o}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const o of this.bindings)t(o[1]);t(this.result)}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const c=[];for(let w=1;w<t.length-1;w+=2){const T=t[w];if(typeof T!="string")return o.error(`Expected string, but found ${typeof T} instead.`,w);if(/[^a-zA-Z0-9_]/.test(T))return o.error("Variable names must contain only alphanumeric characters or '_'.",w);const A=o.parse(t[w+1],w+1);if(!A)return null;c.push([T,A])}const g=o.parse(t[t.length-1],t.length-1,o.expectedType,c);return g?new Ls(c,g):null}outputDefined(){return this.result.outputDefined()}}class Lr{constructor(t,o){this.type=o.type,this.name=t,this.boundExpression=o}static parse(t,o){if(t.length!==2||typeof t[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const c=t[1];return o.scope.has(c)?new Lr(c,o.scope.get(c)):o.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class xn{constructor(t,o,c){this.type=t,this.index=o,this.input=c}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,tt),g=o.parse(t[2],2,bi(o.expectedType||ar));return c&&g?new xn(g.type.itemType,c,g):null}evaluate(t){const o=this.index.evaluate(t),c=this.input.evaluate(t);if(o<0)throw new ki(`Array index out of bounds: ${o} < 0.`);if(o>=c.length)throw new ki(`Array index out of bounds: ${o} > ${c.length-1}.`);if(o!==Math.floor(o))throw new ki(`Array index must be an integer, but found ${o} instead.`);return c[o]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class Dn{constructor(t,o){this.type=Lt,this.needle=t,this.haystack=o}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,ar),g=o.parse(t[2],2,ar);return c&&g?Bo(c.type,[Lt,yt,tt,Er,ar])?new Dn(c,g):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Rr(c.type)} instead`):null}evaluate(t){const o=this.needle.evaluate(t),c=this.haystack.evaluate(t);if(!c)return!1;if(!wr(o,["boolean","string","number","null"]))throw new ki(`Expected first argument to be of type boolean, string, number or null, but found ${Rr(wi(o))} instead.`);if(!wr(c,["string","array"]))throw new ki(`Expected second argument to be of type array or string, but found ${Rr(wi(c))} instead.`);return c.indexOf(o)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class ks{constructor(t,o,c){this.type=tt,this.needle=t,this.haystack=o,this.fromIndex=c}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,ar),g=o.parse(t[2],2,ar);if(!c||!g)return null;if(!Bo(c.type,[Lt,yt,tt,Er,ar]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Rr(c.type)} instead`);if(t.length===4){const w=o.parse(t[3],3,tt);return w?new ks(c,g,w):null}return new ks(c,g)}evaluate(t){const o=this.needle.evaluate(t),c=this.haystack.evaluate(t);if(!wr(o,["boolean","string","number","null"]))throw new ki(`Expected first argument to be of type boolean, string, number or null, but found ${Rr(wi(o))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(t)),wr(c,["string"])){const w=c.indexOf(o,g);return w===-1?-1:[...c.slice(0,w)].length}if(wr(c,["array"]))return c.indexOf(o,g);throw new ki(`Expected second argument to be of type array or string, but found ${Rr(wi(c))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class lo{constructor(t,o,c,g,w,T){this.inputType=t,this.type=o,this.input=c,this.cases=g,this.outputs=w,this.otherwise=T}static parse(t,o){if(t.length<5)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return o.error("Expected an even number of arguments.");let c,g;o.expectedType&&o.expectedType.kind!=="value"&&(g=o.expectedType);const w={},T=[];for(let B=2;B<t.length-1;B+=2){let N=t[B];const V=t[B+1];Array.isArray(N)||(N=[N]);const H=o.concat(B);if(N.length===0)return H.error("Expected at least one branch label.");for(const J of N){if(typeof J!="number"&&typeof J!="string")return H.error("Branch labels must be numbers or strings.");if(typeof J=="number"&&Math.abs(J)>Number.MAX_SAFE_INTEGER)return H.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof J=="number"&&Math.floor(J)!==J)return H.error("Numeric branch labels must be integer values.");if(c){if(H.checkSubtype(c,wi(J)))return null}else c=wi(J);if(w[String(J)]!==void 0)return H.error("Branch labels must be unique.");w[String(J)]=T.length}const Q=o.parse(V,B,g);if(!Q)return null;g=g||Q.type,T.push(Q)}const A=o.parse(t[1],1,ar);if(!A)return null;const I=o.parse(t[t.length-1],t.length-1,g);return I?A.type.kind!=="value"&&o.concat(1).checkSubtype(c,A.type)?null:new lo(c,g,A,w,T,I):null}evaluate(t){const o=this.input.evaluate(t);return(wi(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class Ac{constructor(t,o,c){this.type=t,this.branches=o,this.otherwise=c}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return o.error("Expected an odd number of arguments.");let c;o.expectedType&&o.expectedType.kind!=="value"&&(c=o.expectedType);const g=[];for(let T=1;T<t.length-1;T+=2){const A=o.parse(t[T],T,Lt);if(!A)return null;const I=o.parse(t[T+1],T+1,c);if(!I)return null;g.push([A,I]),c=c||I.type}const w=o.parse(t[t.length-1],t.length-1,c);if(!w)return null;if(!c)throw new Error("Can't infer output type");return new Ac(c,g,w)}evaluate(t){for(const[o,c]of this.branches)if(o.evaluate(t))return c.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[o,c]of this.branches)t(o),t(c);t(this.otherwise)}outputDefined(){return this.branches.every(([t,o])=>o.outputDefined())&&this.otherwise.outputDefined()}}class uo{constructor(t,o,c,g){this.type=t,this.input=o,this.beginIndex=c,this.endIndex=g}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,ar),g=o.parse(t[2],2,tt);if(!c||!g)return null;if(!Bo(c.type,[bi(ar),yt,ar]))return o.error(`Expected first argument to be of type array or string, but found ${Rr(c.type)} instead`);if(t.length===4){const w=o.parse(t[3],3,tt);return w?new uo(c.type,c,g,w):null}return new uo(c.type,c,g)}evaluate(t){const o=this.input.evaluate(t),c=this.beginIndex.evaluate(t);let g;if(this.endIndex&&(g=this.endIndex.evaluate(t)),wr(o,["string"]))return[...o].slice(c,g).join("");if(wr(o,["array"]))return o.slice(c,g);throw new ki(`Expected first argument to be of type array or string, but found ${Rr(wi(o))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function Uo(s,t){const o=s.length-1;let c,g,w=0,T=o,A=0;for(;w<=T;)if(A=Math.floor((w+T)/2),c=s[A],g=s[A+1],c<=t){if(A===o||t<g)return A;w=A+1}else{if(!(c>t))throw new ki("Input is not a number.");T=A-1}return 0}class Bs{constructor(t,o,c){this.type=t,this.input=o,this.labels=[],this.outputs=[];for(const[g,w]of c)this.labels.push(g),this.outputs.push(w)}static parse(t,o){if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");const c=o.parse(t[1],1,tt);if(!c)return null;const g=[];let w=null;o.expectedType&&o.expectedType.kind!=="value"&&(w=o.expectedType);for(let T=1;T<t.length;T+=2){const A=T===1?-1/0:t[T],I=t[T+1],B=T,N=T+1;if(typeof A!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(g.length&&g[g.length-1][0]>=A)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',B);const V=o.parse(I,N,w);if(!V)return null;w=w||V.type,g.push([A,V])}return new Bs(w,c,g)}evaluate(t){const o=this.labels,c=this.outputs;if(o.length===1)return c[0].evaluate(t);const g=this.input.evaluate(t);if(g<=o[0])return c[0].evaluate(t);const w=o.length;return g>=o[w-1]?c[w-1].evaluate(t):c[Uo(o,g)].evaluate(t)}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Eu(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Pu,zl,Un=function(){if(zl)return Pu;function s(t,o,c,g){this.cx=3*t,this.bx=3*(c-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(g-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=o,this.p2x=c,this.p2y=g}return zl=1,Pu=s,s.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,o){if(o===void 0&&(o=1e-6),t<0)return 0;if(t>1)return 1;for(var c=t,g=0;g<8;g++){var w=this.sampleCurveX(c)-t;if(Math.abs(w)<o)return c;var T=this.sampleCurveDerivativeX(c);if(Math.abs(T)<1e-6)break;c-=w/T}var A=0,I=1;for(c=t,g=0;g<20&&(w=this.sampleCurveX(c),!(Math.abs(w-t)<o));g++)t>w?A=c:I=c,c=.5*(I-A)+A;return c},solve:function(t,o){return this.sampleCurveY(this.solveCurveX(t,o))}},Pu}(),Cc=Eu(Un);class Vn{constructor(t,o,c,g,w){this.type=t,this.operator=o,this.interpolation=c,this.input=g,this.labels=[],this.outputs=[];for(const[T,A]of w)this.labels.push(T),this.outputs.push(A)}static interpolationFactor(t,o,c,g){let w=0;if(t.name==="exponential")w=Ll(o,t.base,c,g);else if(t.name==="linear")w=Ll(o,1,c,g);else if(t.name==="cubic-bezier"){const T=t.controlPoints;w=new Cc(T[0],T[1],T[2],T[3]).solve(Ll(o,1,c,g))}return w}static parse(t,o){let[c,g,w,...T]=t;if(!Array.isArray(g)||g.length===0)return o.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const B=g[1];if(typeof B!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:B}}else{if(g[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const B=g.slice(1);if(B.length!==4||B.some(N=>typeof N!="number"||N<0||N>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:B}}}if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(w=o.parse(w,2,tt),!w)return null;const A=[];let I=null;c==="interpolate-hcl"||c==="interpolate-lab"?I=Hr:o.expectedType&&o.expectedType.kind!=="value"&&(I=o.expectedType);for(let B=0;B<T.length;B+=2){const N=T[B],V=T[B+1],H=B+3,Q=B+4;if(typeof N!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(A.length&&A[A.length-1][0]>=N)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',H);const J=o.parse(V,Q,I);if(!J)return null;I=I||J.type,A.push([N,J])}return Li(I,tt)||Li(I,Vi)||Li(I,Hr)||Li(I,qa)||Li(I,sa)||Li(I,bi(tt))?new Vn(I,c,g,w,A):o.error(`Type ${Rr(I)} is not interpolatable.`)}evaluate(t){const o=this.labels,c=this.outputs;if(o.length===1)return c[0].evaluate(t);const g=this.input.evaluate(t);if(g<=o[0])return c[0].evaluate(t);const w=o.length;if(g>=o[w-1])return c[w-1].evaluate(t);const T=Uo(o,g),A=Vn.interpolationFactor(this.interpolation,g,o[T],o[T+1]),I=c[T].evaluate(t),B=c[T+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ys(I,B,A);case"color":return cr.interpolate(I,B,A);case"padding":return Nn.interpolate(I,B,A);case"variableAnchorOffsetCollection":return cn.interpolate(I,B,A);case"array":return jo(I,B,A);case"projectionDefinition":return en.interpolate(I,B,A)}case"interpolate-hcl":return cr.interpolate(I,B,A,"hcl");case"interpolate-lab":return cr.interpolate(I,B,A,"lab")}}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Ll(s,t,o,c){const g=c-o,w=s-o;return g===0?0:t===1?w/g:(Math.pow(t,w)-1)/(Math.pow(t,g)-1)}const hi={color:cr.interpolate,number:ys,padding:Nn.interpolate,variableAnchorOffsetCollection:cn.interpolate,array:jo};class Ru{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");let c=null;const g=o.expectedType;g&&g.kind!=="value"&&(c=g);const w=[];for(const A of t.slice(1)){const I=o.parse(A,1+w.length,c,void 0,{typeAnnotation:"omit"});if(!I)return null;c=c||I.type,w.push(I)}if(!c)throw new Error("No output type");const T=g&&w.some(A=>io(g,A.type));return new Ru(T?ar:c,w)}evaluate(t){let o,c=null,g=0;for(const w of this.args)if(g++,c=w.evaluate(t),c&&c instanceof Xn&&!c.available&&(o||(o=c.name),c=null,g===this.args.length&&(c=o)),c!==null)break;return c}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function Ec(s,t){return s==="=="||s==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Lh(s,t,o,c){return c.compare(t,o)===0}function Vo(s,t,o){const c=s!=="=="&&s!=="!=";return class MM{constructor(w,T,A){this.type=Lt,this.lhs=w,this.rhs=T,this.collator=A,this.hasUntypedArgument=w.type.kind==="value"||T.type.kind==="value"}static parse(w,T){if(w.length!==3&&w.length!==4)return T.error("Expected two or three arguments.");const A=w[0];let I=T.parse(w[1],1,ar);if(!I)return null;if(!Ec(A,I.type))return T.concat(1).error(`"${A}" comparisons are not supported for type '${Rr(I.type)}'.`);let B=T.parse(w[2],2,ar);if(!B)return null;if(!Ec(A,B.type))return T.concat(2).error(`"${A}" comparisons are not supported for type '${Rr(B.type)}'.`);if(I.type.kind!==B.type.kind&&I.type.kind!=="value"&&B.type.kind!=="value")return T.error(`Cannot compare types '${Rr(I.type)}' and '${Rr(B.type)}'.`);c&&(I.type.kind==="value"&&B.type.kind!=="value"?I=new Fn(B.type,[I]):I.type.kind!=="value"&&B.type.kind==="value"&&(B=new Fn(I.type,[B])));let N=null;if(w.length===4){if(I.type.kind!=="string"&&B.type.kind!=="string"&&I.type.kind!=="value"&&B.type.kind!=="value")return T.error("Cannot use collator to compare non-string types.");if(N=T.parse(w[3],3,Za),!N)return null}return new MM(I,B,N)}evaluate(w){const T=this.lhs.evaluate(w),A=this.rhs.evaluate(w);if(c&&this.hasUntypedArgument){const I=wi(T),B=wi(A);if(I.kind!==B.kind||I.kind!=="string"&&I.kind!=="number")throw new ki(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${I.kind}, ${B.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const I=wi(T),B=wi(A);if(I.kind!=="string"||B.kind!=="string")return t(w,T,A)}return this.collator?o(w,T,A,this.collator.evaluate(w)):t(w,T,A)}eachChild(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)}outputDefined(){return!0}}}const Pc=Vo("==",function(s,t,o){return t===o},Lh),kh=Vo("!=",function(s,t,o){return t!==o},function(s,t,o,c){return!Lh(0,t,o,c)}),dp=Vo("<",function(s,t,o){return t<o},function(s,t,o,c){return c.compare(t,o)<0}),Rc=Vo(">",function(s,t,o){return t>o},function(s,t,o,c){return c.compare(t,o)>0}),kl=Vo("<=",function(s,t,o){return t<=o},function(s,t,o,c){return c.compare(t,o)<=0}),Wa=Vo(">=",function(s,t,o){return t>=o},function(s,t,o,c){return c.compare(t,o)>=0});class Iu{constructor(t,o,c){this.type=Za,this.locale=c,this.caseSensitive=t,this.diacriticSensitive=o}static parse(t,o){if(t.length!==2)return o.error("Expected one argument.");const c=t[1];if(typeof c!="object"||Array.isArray(c))return o.error("Collator options argument must be an object.");const g=o.parse(c["case-sensitive"]!==void 0&&c["case-sensitive"],1,Lt);if(!g)return null;const w=o.parse(c["diacritic-sensitive"]!==void 0&&c["diacritic-sensitive"],1,Lt);if(!w)return null;let T=null;return c.locale&&(T=o.parse(c.locale,1,yt),!T)?null:new Iu(g,w,T)}evaluate(t){return new Or(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class Bl{constructor(t,o,c,g,w){this.type=yt,this.number=t,this.locale=o,this.currency=c,this.minFractionDigits=g,this.maxFractionDigits=w}static parse(t,o){if(t.length!==3)return o.error("Expected two arguments.");const c=o.parse(t[1],1,tt);if(!c)return null;const g=t[2];if(typeof g!="object"||Array.isArray(g))return o.error("NumberFormat options argument must be an object.");let w=null;if(g.locale&&(w=o.parse(g.locale,1,yt),!w))return null;let T=null;if(g.currency&&(T=o.parse(g.currency,1,yt),!T))return null;let A=null;if(g["min-fraction-digits"]&&(A=o.parse(g["min-fraction-digits"],1,tt),!A))return null;let I=null;return g["max-fraction-digits"]&&(I=o.parse(g["max-fraction-digits"],1,tt),!I)?null:new Bl(c,w,T,A,I)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class Du{constructor(t){this.type=_n,this.sections=t}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const c=t[1];if(!Array.isArray(c)&&typeof c=="object")return o.error("First argument must be an image or text section.");const g=[];let w=!1;for(let T=1;T<=t.length-1;++T){const A=t[T];if(w&&typeof A=="object"&&!Array.isArray(A)){w=!1;let I=null;if(A["font-scale"]&&(I=o.parse(A["font-scale"],1,tt),!I))return null;let B=null;if(A["text-font"]&&(B=o.parse(A["text-font"],1,bi(yt)),!B))return null;let N=null;if(A["text-color"]&&(N=o.parse(A["text-color"],1,Hr),!N))return null;let V=null;if(A["vertical-align"]){if(typeof A["vertical-align"]=="string"&&!No.includes(A["vertical-align"]))return o.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${A["vertical-align"]}' instead.`);if(V=o.parse(A["vertical-align"],1,yt),!V)return null}const H=g[g.length-1];H.scale=I,H.font=B,H.textColor=N,H.verticalAlign=V}else{const I=o.parse(t[T],1,ar);if(!I)return null;const B=I.type.kind;if(B!=="string"&&B!=="value"&&B!=="null"&&B!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,g.push({content:I,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Du(g)}evaluate(t){return new jn(this.sections.map(o=>{const c=o.content.evaluate(t);return wi(c)===$i?new Ga("",c,null,null,null,o.verticalAlign?o.verticalAlign.evaluate(t):null):new Ga(Ha(c),null,o.scale?o.scale.evaluate(t):null,o.font?o.font.evaluate(t).join(","):null,o.textColor?o.textColor.evaluate(t):null,o.verticalAlign?o.verticalAlign.evaluate(t):null)}))}eachChild(t){for(const o of this.sections)t(o.content),o.scale&&t(o.scale),o.font&&t(o.font),o.textColor&&t(o.textColor),o.verticalAlign&&t(o.verticalAlign)}outputDefined(){return!1}}class zu{constructor(t){this.type=$i,this.input=t}static parse(t,o){if(t.length!==2)return o.error("Expected two arguments.");const c=o.parse(t[1],1,yt);return c?new zu(c):o.error("No image name provided.")}evaluate(t){const o=this.input.evaluate(t),c=Xn.fromString(o);return c&&t.availableImages&&(c.available=t.availableImages.indexOf(o)>-1),c}eachChild(t){t(this.input)}outputDefined(){return!1}}class Bh{constructor(t){this.type=tt,this.input=t}static parse(t,o){if(t.length!==2)return o.error(`Expected 1 argument, but found ${t.length-1} instead.`);const c=o.parse(t[1],1);return c?c.type.kind!=="array"&&c.type.kind!=="string"&&c.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${Rr(c.type)} instead.`):new Bh(c):null}evaluate(t){const o=this.input.evaluate(t);if(typeof o=="string")return[...o].length;if(Array.isArray(o))return o.length;throw new ki(`Expected value to be of type string or array, but found ${Rr(wi(o))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const _s=8192;function fp(s,t){const o=(180+s[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,g=Math.pow(2,t.z);return[Math.round(o*g*_s),Math.round(c*g*_s)]}function Oh(s,t){const o=Math.pow(2,t.z);return[(g=(s[0]/_s+t.x)/o,360*g-180),(c=(s[1]/_s+t.y)/o,360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90)];var c,g}function co(s,t){s[0]=Math.min(s[0],t[0]),s[1]=Math.min(s[1],t[1]),s[2]=Math.max(s[2],t[0]),s[3]=Math.max(s[3],t[1])}function Lu(s,t){return!(s[0]<=t[0]||s[2]>=t[2]||s[1]<=t[1]||s[3]>=t[3])}function Gd(s,t,o){const c=s[0]-t[0],g=s[1]-t[1],w=s[0]-o[0],T=s[1]-o[1];return c*T-w*g==0&&c*w<=0&&g*T<=0}function ku(s,t,o,c){return(g=[c[0]-o[0],c[1]-o[1]])[0]*(w=[t[0]-s[0],t[1]-s[1]])[1]-g[1]*w[0]!=0&&!(!Fh(s,t,o,c)||!Fh(o,c,s,t));var g,w}function jh(s,t,o){for(const c of o)for(let g=0;g<c.length-1;++g)if(ku(s,t,c[g],c[g+1]))return!0;return!1}function Ka(s,t,o=!1){let c=!1;for(const A of t)for(let I=0;I<A.length-1;I++){if(Gd(s,A[I],A[I+1]))return o;(w=A[I])[1]>(g=s)[1]!=(T=A[I+1])[1]>g[1]&&g[0]<(T[0]-w[0])*(g[1]-w[1])/(T[1]-w[1])+w[0]&&(c=!c)}var g,w,T;return c}function pp(s,t){for(const o of t)if(Ka(s,o))return!0;return!1}function Nh(s,t){for(const o of s)if(!Ka(o,t))return!1;for(let o=0;o<s.length-1;++o)if(jh(s[o],s[o+1],t))return!1;return!0}function Hd(s,t){for(const o of t)if(Nh(s,o))return!0;return!1}function Fh(s,t,o,c){const g=c[0]-o[0],w=c[1]-o[1],T=(s[0]-o[0])*w-g*(s[1]-o[1]),A=(t[0]-o[0])*w-g*(t[1]-o[1]);return T>0&&A<0||T<0&&A>0}function Ic(s,t,o){const c=[];for(let g=0;g<s.length;g++){const w=[];for(let T=0;T<s[g].length;T++){const A=fp(s[g][T],o);co(t,A),w.push(A)}c.push(w)}return c}function Dc(s,t,o){const c=[];for(let g=0;g<s.length;g++){const w=Ic(s[g],t,o);c.push(w)}return c}function ho(s,t,o,c){if(s[0]<o[0]||s[0]>o[2]){const g=.5*c;let w=s[0]-o[0]>g?-c:o[0]-s[0]>g?c:0;w===0&&(w=s[0]-o[2]>g?-c:o[2]-s[0]>g?c:0),s[0]+=w}co(t,s)}function Uh(s,t,o,c){const g=Math.pow(2,c.z)*_s,w=[c.x*_s,c.y*_s],T=[];for(const A of s)for(const I of A){const B=[I.x+w[0],I.y+w[1]];ho(B,t,o,g),T.push(B)}return T}function Wd(s,t,o,c){const g=Math.pow(2,c.z)*_s,w=[c.x*_s,c.y*_s],T=[];for(const I of s){const B=[];for(const N of I){const V=[N.x+w[0],N.y+w[1]];co(t,V),B.push(V)}T.push(B)}if(t[2]-t[0]<=g/2){(A=t)[0]=A[1]=1/0,A[2]=A[3]=-1/0;for(const I of T)for(const B of I)ho(B,t,o,g)}var A;return T}class $o{constructor(t,o){this.type=Lt,this.geojson=t,this.geometries=o}static parse(t,o){if(t.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Il(t[1])){const c=t[1];if(c.type==="FeatureCollection"){const g=[];for(const w of c.features){const{type:T,coordinates:A}=w.geometry;T==="Polygon"&&g.push(A),T==="MultiPolygon"&&g.push(...A)}if(g.length)return new $o(c,{type:"MultiPolygon",coordinates:g})}else if(c.type==="Feature"){const g=c.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new $o(c,c.geometry)}else if(c.type==="Polygon"||c.type==="MultiPolygon")return new $o(c,c)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(o,c){const g=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],T=o.canonicalID();if(c.type==="Polygon"){const A=Ic(c.coordinates,w,T),I=Uh(o.geometry(),g,w,T);if(!Lu(g,w))return!1;for(const B of I)if(!Ka(B,A))return!1}if(c.type==="MultiPolygon"){const A=Dc(c.coordinates,w,T),I=Uh(o.geometry(),g,w,T);if(!Lu(g,w))return!1;for(const B of I)if(!pp(B,A))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(o,c){const g=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],T=o.canonicalID();if(c.type==="Polygon"){const A=Ic(c.coordinates,w,T),I=Wd(o.geometry(),g,w,T);if(!Lu(g,w))return!1;for(const B of I)if(!Nh(B,A))return!1}if(c.type==="MultiPolygon"){const A=Dc(c.coordinates,w,T),I=Wd(o.geometry(),g,w,T);if(!Lu(g,w))return!1;for(const B of I)if(!Hd(B,A))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Vh=class{constructor(s=[],t=(o,c)=>o<c?-1:o>c?1:0){if(this.data=s,this.length=this.data.length,this.compare=t,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:t,compare:o}=this,c=t[s];for(;s>0;){const g=s-1>>1,w=t[g];if(o(c,w)>=0)break;t[s]=w,s=g}t[s]=c}_down(s){const{data:t,compare:o}=this,c=this.length>>1,g=t[s];for(;s<c;){let w=1+(s<<1);const T=w+1;if(T<this.length&&o(t[T],t[w])<0&&(w=T),o(t[w],g)>=0)break;t[s]=t[w],s=w}t[s]=g}};function Bu(s,t,o=0,c=s.length-1,g=Ou){for(;c>o;){if(c-o>600){const I=c-o+1,B=t-o+1,N=Math.log(I),V=.5*Math.exp(2*N/3),H=.5*Math.sqrt(N*V*(I-V)/I)*(B-I/2<0?-1:1);Bu(s,t,Math.max(o,Math.floor(t-B*V/I+H)),Math.min(c,Math.floor(t+(I-B)*V/I+H)),g)}const w=s[t];let T=o,A=c;for(Os(s,o,t),g(s[c],w)>0&&Os(s,o,c);T<A;){for(Os(s,T,A),T++,A--;g(s[T],w)<0;)T++;for(;g(s[A],w)>0;)A--}g(s[o],w)===0?Os(s,o,A):(A++,Os(s,A,c)),A<=t&&(o=A+1),t<=A&&(c=A-1)}}function Os(s,t,o){const c=s[t];s[t]=s[o],s[o]=c}function Ou(s,t){return s<t?-1:s>t?1:0}function zc(s,t){if(s.length<=1)return[s];const o=[];let c,g;for(const w of s){const T=$h(w);T!==0&&(w.area=Math.abs(T),g===void 0&&(g=T<0),g===T<0?(c&&o.push(c),c=[w]):c.push(w))}if(c&&o.push(c),t>1)for(let w=0;w<o.length;w++)o[w].length<=t||(Bu(o[w],t,1,o[w].length-1,ju),o[w]=o[w].slice(0,t));return o}function ju(s,t){return t.area-s.area}function $h(s){let t=0;for(let o,c,g=0,w=s.length,T=w-1;g<w;T=g++)o=s[g],c=s[T],t+=(c.x-o.x)*(o.y+c.y);return t}const Zh=1/298.257223563,Lc=Zh*(2-Zh),Nu=Math.PI/180;class Fu{constructor(t){const o=6378.137*Nu*1e3,c=Math.cos(t*Nu),g=1/(1-Lc*(1-c*c)),w=Math.sqrt(g);this.kx=o*w*c,this.ky=o*w*g*(1-Lc)}distance(t,o){const c=this.wrap(t[0]-o[0])*this.kx,g=(t[1]-o[1])*this.ky;return Math.sqrt(c*c+g*g)}pointOnLine(t,o){let c,g,w,T,A=1/0;for(let I=0;I<t.length-1;I++){let B=t[I][0],N=t[I][1],V=this.wrap(t[I+1][0]-B)*this.kx,H=(t[I+1][1]-N)*this.ky,Q=0;V===0&&H===0||(Q=(this.wrap(o[0]-B)*this.kx*V+(o[1]-N)*this.ky*H)/(V*V+H*H),Q>1?(B=t[I+1][0],N=t[I+1][1]):Q>0&&(B+=V/this.kx*Q,N+=H/this.ky*Q)),V=this.wrap(o[0]-B)*this.kx,H=(o[1]-N)*this.ky;const J=V*V+H*H;J<A&&(A=J,c=B,g=N,w=I,T=Q)}return{point:[c,g],index:w,t:Math.max(0,Math.min(1,T))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function qh(s,t){return t[0]-s[0]}function Uu(s){return s[1]-s[0]+1}function js(s,t){return s[1]>=s[0]&&s[1]<t}function kc(s,t){if(s[0]>s[1])return[null,null];const o=Uu(s);if(t){if(o===2)return[s,null];const g=Math.floor(o/2);return[[s[0],s[0]+g],[s[0]+g,s[1]]]}if(o===1)return[s,null];const c=Math.floor(o/2)-1;return[[s[0],s[0]+c],[s[0]+c+1,s[1]]]}function Gh(s,t){if(!js(t,s.length))return[1/0,1/0,-1/0,-1/0];const o=[1/0,1/0,-1/0,-1/0];for(let c=t[0];c<=t[1];++c)co(o,s[c]);return o}function Hh(s){const t=[1/0,1/0,-1/0,-1/0];for(const o of s)for(const c of o)co(t,c);return t}function Kd(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function Qn(s,t,o){if(!Kd(s)||!Kd(t))return NaN;let c=0,g=0;return s[2]<t[0]&&(c=t[0]-s[2]),s[0]>t[2]&&(c=s[0]-t[2]),s[1]>t[3]&&(g=s[1]-t[3]),s[3]<t[1]&&(g=t[1]-s[3]),o.distance([0,0],[c,g])}function Sr(s,t,o){const c=o.pointOnLine(t,s);return o.distance(s,c.point)}function Bc(s,t,o,c,g){const w=Math.min(Sr(s,[o,c],g),Sr(t,[o,c],g)),T=Math.min(Sr(o,[s,t],g),Sr(c,[s,t],g));return Math.min(w,T)}function Yd(s,t,o,c,g){if(!js(t,s.length)||!js(c,o.length))return 1/0;let w=1/0;for(let T=t[0];T<t[1];++T){const A=s[T],I=s[T+1];for(let B=c[0];B<c[1];++B){const N=o[B],V=o[B+1];if(ku(A,I,N,V))return 0;w=Math.min(w,Bc(A,I,N,V,g))}}return w}function Xd(s,t,o,c,g){if(!js(t,s.length)||!js(c,o.length))return NaN;let w=1/0;for(let T=t[0];T<=t[1];++T)for(let A=c[0];A<=c[1];++A)if(w=Math.min(w,g.distance(s[T],o[A])),w===0)return w;return w}function Qd(s,t,o){if(Ka(s,t,!0))return 0;let c=1/0;for(const g of t){const w=g[0],T=g[g.length-1];if(w!==T&&(c=Math.min(c,Sr(s,[T,w],o)),c===0))return c;const A=o.pointOnLine(g,s);if(c=Math.min(c,o.distance(s,A.point)),c===0)return c}return c}function Wh(s,t,o,c){if(!js(t,s.length))return NaN;for(let w=t[0];w<=t[1];++w)if(Ka(s[w],o,!0))return 0;let g=1/0;for(let w=t[0];w<t[1];++w){const T=s[w],A=s[w+1];for(const I of o)for(let B=0,N=I.length,V=N-1;B<N;V=B++){const H=I[V],Q=I[B];if(ku(T,A,H,Q))return 0;g=Math.min(g,Bc(T,A,H,Q,c))}}return g}function Jd(s,t){for(const o of s)for(const c of o)if(Ka(c,t,!0))return!0;return!1}function mp(s,t,o,c=1/0){const g=Hh(s),w=Hh(t);if(c!==1/0&&Qn(g,w,o)>=c)return c;if(Lu(g,w)){if(Jd(s,t))return 0}else if(Jd(t,s))return 0;let T=1/0;for(const A of s)for(let I=0,B=A.length,N=B-1;I<B;N=I++){const V=A[N],H=A[I];for(const Q of t)for(let J=0,ie=Q.length,ce=ie-1;J<ie;ce=J++){const ye=Q[ce],ze=Q[J];if(ku(V,H,ye,ze))return 0;T=Math.min(T,Bc(V,H,ye,ze,o))}}return T}function Zo(s,t,o,c,g,w){if(!w)return;const T=Qn(Gh(c,w),g,o);T<t&&s.push([T,w,[0,0]])}function Ol(s,t,o,c,g,w,T){if(!w||!T)return;const A=Qn(Gh(c,w),Gh(g,T),o);A<t&&s.push([A,w,T])}function fo(s,t,o,c,g=1/0){let w=Math.min(c.distance(s[0],o[0][0]),g);if(w===0)return w;const T=new Vh([[0,[0,s.length-1],[0,0]]],qh),A=Hh(o);for(;T.length>0;){const I=T.pop();if(I[0]>=w)continue;const B=I[1],N=t?50:100;if(Uu(B)<=N){if(!js(B,s.length))return NaN;if(t){const V=Wh(s,B,o,c);if(isNaN(V)||V===0)return V;w=Math.min(w,V)}else for(let V=B[0];V<=B[1];++V){const H=Qd(s[V],o,c);if(w=Math.min(w,H),w===0)return 0}}else{const V=kc(B,t);Zo(T,w,c,s,A,V[0]),Zo(T,w,c,s,A,V[1])}}return w}function jl(s,t,o,c,g,w=1/0){let T=Math.min(w,g.distance(s[0],o[0]));if(T===0)return T;const A=new Vh([[0,[0,s.length-1],[0,o.length-1]]],qh);for(;A.length>0;){const I=A.pop();if(I[0]>=T)continue;const B=I[1],N=I[2],V=t?50:100,H=c?50:100;if(Uu(B)<=V&&Uu(N)<=H){if(!js(B,s.length)&&js(N,o.length))return NaN;let Q;if(t&&c)Q=Yd(s,B,o,N,g),T=Math.min(T,Q);else if(t&&!c){const J=s.slice(B[0],B[1]+1);for(let ie=N[0];ie<=N[1];++ie)if(Q=Sr(o[ie],J,g),T=Math.min(T,Q),T===0)return T}else if(!t&&c){const J=o.slice(N[0],N[1]+1);for(let ie=B[0];ie<=B[1];++ie)if(Q=Sr(s[ie],J,g),T=Math.min(T,Q),T===0)return T}else Q=Xd(s,B,o,N,g),T=Math.min(T,Q)}else{const Q=kc(B,t),J=kc(N,c);Ol(A,T,g,s,o,Q[0],J[0]),Ol(A,T,g,s,o,Q[0],J[1]),Ol(A,T,g,s,o,Q[1],J[0]),Ol(A,T,g,s,o,Q[1],J[1])}}return T}function Oc(s){return s.type==="MultiPolygon"?s.coordinates.map(t=>({type:"Polygon",coordinates:t})):s.type==="MultiLineString"?s.coordinates.map(t=>({type:"LineString",coordinates:t})):s.type==="MultiPoint"?s.coordinates.map(t=>({type:"Point",coordinates:t})):[s]}class ma{constructor(t,o){this.type=tt,this.geojson=t,this.geometries=o}static parse(t,o){if(t.length!==2)return o.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Il(t[1])){const c=t[1];if(c.type==="FeatureCollection")return new ma(c,c.features.map(g=>Oc(g.geometry)).flat());if(c.type==="Feature")return new ma(c,Oc(c.geometry));if("type"in c&&"coordinates"in c)return new ma(c,Oc(c))}return o.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(o,c){const g=o.geometry(),w=g.flat().map(I=>Oh([I.x,I.y],o.canonical));if(g.length===0)return NaN;const T=new Fu(w[0][1]);let A=1/0;for(const I of c){switch(I.type){case"Point":A=Math.min(A,jl(w,!1,[I.coordinates],!1,T,A));break;case"LineString":A=Math.min(A,jl(w,!1,I.coordinates,!0,T,A));break;case"Polygon":A=Math.min(A,fo(w,!1,I.coordinates,T,A))}if(A===0)return A}return A}(t,this.geometries);if(t.geometryType()==="LineString")return function(o,c){const g=o.geometry(),w=g.flat().map(I=>Oh([I.x,I.y],o.canonical));if(g.length===0)return NaN;const T=new Fu(w[0][1]);let A=1/0;for(const I of c){switch(I.type){case"Point":A=Math.min(A,jl(w,!0,[I.coordinates],!1,T,A));break;case"LineString":A=Math.min(A,jl(w,!0,I.coordinates,!0,T,A));break;case"Polygon":A=Math.min(A,fo(w,!0,I.coordinates,T,A))}if(A===0)return A}return A}(t,this.geometries);if(t.geometryType()==="Polygon")return function(o,c){const g=o.geometry();if(g.length===0||g[0].length===0)return NaN;const w=zc(g,0).map(I=>I.map(B=>B.map(N=>Oh([N.x,N.y],o.canonical)))),T=new Fu(w[0][0][0][1]);let A=1/0;for(const I of c)for(const B of w){switch(I.type){case"Point":A=Math.min(A,fo([I.coordinates],!1,B,T,A));break;case"LineString":A=Math.min(A,fo(I.coordinates,!0,B,T,A));break;case"Polygon":A=Math.min(A,mp(B,I.coordinates,T,A))}if(A===0)return A}return A}(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Ya={"==":Pc,"!=":kh,">":Rc,"<":dp,">=":Wa,"<=":kl,array:Fn,at:xn,boolean:Fn,case:Ac,coalesce:Ru,collator:Iu,format:Du,image:zu,in:Dn,"index-of":ks,interpolate:Vn,"interpolate-hcl":Vn,"interpolate-lab":Vn,length:Bh,let:Ls,literal:wa,match:lo,number:Fn,"number-format":Bl,object:Fn,slice:uo,step:Bs,string:Fn,"to-boolean":Wr,"to-color":Wr,"to-number":Wr,"to-string":Wr,var:Lr,within:$o,distance:ma};class la{constructor(t,o,c,g){this.name=t,this.type=o,this._evaluate=c,this.args=g}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,o){const c=t[0],g=la.definitions[c];if(!g)return o.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const w=Array.isArray(g)?g[0]:g.type,T=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,A=T.filter(([B])=>!Array.isArray(B)||B.length===t.length-1);let I=null;for(const[B,N]of A){I=new hr(o.registry,Vu,o.path,null,o.scope);const V=[];let H=!1;for(let Q=1;Q<t.length;Q++){const J=t[Q],ie=Array.isArray(B)?B[Q-1]:B.type,ce=I.parse(J,1+V.length,ie);if(!ce){H=!0;break}V.push(ce)}if(!H)if(Array.isArray(B)&&B.length!==V.length)I.error(`Expected ${B.length} arguments, but found ${V.length} instead.`);else{for(let Q=0;Q<V.length;Q++){const J=Array.isArray(B)?B[Q]:B.type,ie=V[Q];I.concat(Q+1).checkSubtype(J,ie.type)}if(I.errors.length===0)return new la(c,w,N,V)}}if(A.length===1)o.errors.push(...I.errors);else{const B=(A.length?A:T).map(([V])=>{return H=V,Array.isArray(H)?`(${H.map(Rr).join(", ")})`:`(${Rr(H.type)}...)`;var H}).join(" | "),N=[];for(let V=1;V<t.length;V++){const H=o.parse(t[V],1+N.length);if(!H)return null;N.push(Rr(H.type))}o.error(`Expected arguments of type ${B}, but found (${N.join(", ")}) instead.`)}return null}static register(t,o){la.definitions=o;for(const c in o)t[c]=la}}function Kh(s,[t,o,c,g]){t=t.evaluate(s),o=o.evaluate(s),c=c.evaluate(s);const w=g?g.evaluate(s):1,T=pa(t,o,c,w);if(T)throw new ki(T);return new cr(t/255,o/255,c/255,w,!1)}function po(s,t){return s in t}function jc(s,t){const o=t[s];return o===void 0?null:o}function mo(s){return{type:s}}function Vu(s){if(s instanceof Lr)return Vu(s.boundExpression);if(s instanceof la&&s.name==="error"||s instanceof Iu||s instanceof $o||s instanceof ma)return!1;const t=s instanceof Wr||s instanceof Fn;let o=!0;return s.eachChild(c=>{o=t?o&&Vu(c):o&&c instanceof wa}),!!o&&Nc(s)&&Fc(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Nc(s){if(s instanceof la&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof $o||s instanceof ma)return!1;let t=!0;return s.eachChild(o=>{t&&!Nc(o)&&(t=!1)}),t}function $u(s){if(s instanceof la&&s.name==="feature-state")return!1;let t=!0;return s.eachChild(o=>{t&&!$u(o)&&(t=!1)}),t}function Fc(s,t){if(s instanceof la&&t.indexOf(s.name)>=0)return!1;let o=!0;return s.eachChild(c=>{o&&!Fc(c,t)&&(o=!1)}),o}function Yh(s){return{result:"success",value:s}}function qo(s){return{result:"error",value:s}}function Go(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function Ta(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function ua(s){return!!s.expression&&s.expression.interpolated}function Pr(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function Nl(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function Uc(s){return s}function Ho(s,t){const o=t.type==="color",c=s.stops&&typeof s.stops[0][0]=="object",g=c||!(c||s.property!==void 0),w=s.type||(ua(t)?"exponential":"interval");if(o||t.type==="padding"){const N=o?cr.parse:Nn.parse;(s=Wt({},s)).stops&&(s.stops=s.stops.map(V=>[V[0],N(V[1])])),s.default=N(s.default?s.default:t.default)}if(s.colorSpace&&(T=s.colorSpace)!=="rgb"&&T!=="hcl"&&T!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var T;let A,I,B;if(w==="exponential")A=Fl;else if(w==="interval")A=ef;else if(w==="categorical"){A=go,I=Object.create(null);for(const N of s.stops)I[N[0]]=N[1];B=typeof s.stops[0][0]}else{if(w!=="identity")throw new Error(`Unknown function type "${w}"`);A=Ul}if(c){const N={},V=[];for(let J=0;J<s.stops.length;J++){const ie=s.stops[J],ce=ie[0].zoom;N[ce]===void 0&&(N[ce]={zoom:ce,type:s.type,property:s.property,default:s.default,stops:[]},V.push(ce)),N[ce].stops.push([ie[0].value,ie[1]])}const H=[];for(const J of V)H.push([N[J].zoom,Ho(N[J],t)]);const Q={name:"linear"};return{kind:"composite",interpolationType:Q,interpolationFactor:Vn.interpolationFactor.bind(void 0,Q),zoomStops:H.map(J=>J[0]),evaluate:({zoom:J},ie)=>Fl({stops:H,base:s.base},t,J).evaluate(J,ie)}}if(g){const N=w==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:N,interpolationFactor:Vn.interpolationFactor.bind(void 0,N),zoomStops:s.stops.map(V=>V[0]),evaluate:({zoom:V})=>A(s,t,V,I,B)}}return{kind:"source",evaluate(N,V){const H=V&&V.properties?V.properties[s.property]:void 0;return H===void 0?Wo(s.default,t.default):A(s,t,H,I,B)}}}function Wo(s,t,o){return s!==void 0?s:t!==void 0?t:o!==void 0?o:void 0}function go(s,t,o,c,g){return Wo(typeof o===g?c[o]:void 0,s.default,t.default)}function ef(s,t,o){if(Pr(o)!=="number")return Wo(s.default,t.default);const c=s.stops.length;if(c===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[c-1][0])return s.stops[c-1][1];const g=Uo(s.stops.map(w=>w[0]),o);return s.stops[g][1]}function Fl(s,t,o){const c=s.base!==void 0?s.base:1;if(Pr(o)!=="number")return Wo(s.default,t.default);const g=s.stops.length;if(g===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[g-1][0])return s.stops[g-1][1];const w=Uo(s.stops.map(N=>N[0]),o),T=function(N,V,H,Q){const J=Q-H,ie=N-H;return J===0?0:V===1?ie/J:(Math.pow(V,ie)-1)/(Math.pow(V,J)-1)}(o,c,s.stops[w][0],s.stops[w+1][0]),A=s.stops[w][1],I=s.stops[w+1][1],B=hi[t.type]||Uc;return typeof A.evaluate=="function"?{evaluate(...N){const V=A.evaluate.apply(void 0,N),H=I.evaluate.apply(void 0,N);if(V!==void 0&&H!==void 0)return B(V,H,T,s.colorSpace)}}:B(A,I,T,s.colorSpace)}function Ul(s,t,o){switch(t.type){case"color":o=cr.parse(o);break;case"formatted":o=jn.fromString(o.toString());break;case"resolvedImage":o=Xn.fromString(o.toString());break;case"padding":o=Nn.parse(o);break;default:Pr(o)===t.type||t.type==="enum"&&t.values[o]||(o=void 0)}return Wo(o,s.default,t.default)}la.register(Ya,{error:[{kind:"error"},[yt],(s,[t])=>{throw new ki(t.evaluate(s))}],typeof:[yt,[ar],(s,[t])=>Rr(wi(t.evaluate(s)))],"to-rgba":[bi(tt,4),[Hr],(s,[t])=>{const[o,c,g,w]=t.evaluate(s).rgb;return[255*o,255*c,255*g,w]}],rgb:[Hr,[tt,tt,tt],Kh],rgba:[Hr,[tt,tt,tt,tt],Kh],has:{type:Lt,overloads:[[[yt],(s,[t])=>po(t.evaluate(s),s.properties())],[[yt,si],(s,[t,o])=>po(t.evaluate(s),o.evaluate(s))]]},get:{type:ar,overloads:[[[yt],(s,[t])=>jc(t.evaluate(s),s.properties())],[[yt,si],(s,[t,o])=>jc(t.evaluate(s),o.evaluate(s))]]},"feature-state":[ar,[yt],(s,[t])=>jc(t.evaluate(s),s.featureState||{})],properties:[si,[],s=>s.properties()],"geometry-type":[yt,[],s=>s.geometryType()],id:[ar,[],s=>s.id()],zoom:[tt,[],s=>s.globals.zoom],"heatmap-density":[tt,[],s=>s.globals.heatmapDensity||0],"line-progress":[tt,[],s=>s.globals.lineProgress||0],accumulated:[ar,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[tt,mo(tt),(s,t)=>{let o=0;for(const c of t)o+=c.evaluate(s);return o}],"*":[tt,mo(tt),(s,t)=>{let o=1;for(const c of t)o*=c.evaluate(s);return o}],"-":{type:tt,overloads:[[[tt,tt],(s,[t,o])=>t.evaluate(s)-o.evaluate(s)],[[tt],(s,[t])=>-t.evaluate(s)]]},"/":[tt,[tt,tt],(s,[t,o])=>t.evaluate(s)/o.evaluate(s)],"%":[tt,[tt,tt],(s,[t,o])=>t.evaluate(s)%o.evaluate(s)],ln2:[tt,[],()=>Math.LN2],pi:[tt,[],()=>Math.PI],e:[tt,[],()=>Math.E],"^":[tt,[tt,tt],(s,[t,o])=>Math.pow(t.evaluate(s),o.evaluate(s))],sqrt:[tt,[tt],(s,[t])=>Math.sqrt(t.evaluate(s))],log10:[tt,[tt],(s,[t])=>Math.log(t.evaluate(s))/Math.LN10],ln:[tt,[tt],(s,[t])=>Math.log(t.evaluate(s))],log2:[tt,[tt],(s,[t])=>Math.log(t.evaluate(s))/Math.LN2],sin:[tt,[tt],(s,[t])=>Math.sin(t.evaluate(s))],cos:[tt,[tt],(s,[t])=>Math.cos(t.evaluate(s))],tan:[tt,[tt],(s,[t])=>Math.tan(t.evaluate(s))],asin:[tt,[tt],(s,[t])=>Math.asin(t.evaluate(s))],acos:[tt,[tt],(s,[t])=>Math.acos(t.evaluate(s))],atan:[tt,[tt],(s,[t])=>Math.atan(t.evaluate(s))],min:[tt,mo(tt),(s,t)=>Math.min(...t.map(o=>o.evaluate(s)))],max:[tt,mo(tt),(s,t)=>Math.max(...t.map(o=>o.evaluate(s)))],abs:[tt,[tt],(s,[t])=>Math.abs(t.evaluate(s))],round:[tt,[tt],(s,[t])=>{const o=t.evaluate(s);return o<0?-Math.round(-o):Math.round(o)}],floor:[tt,[tt],(s,[t])=>Math.floor(t.evaluate(s))],ceil:[tt,[tt],(s,[t])=>Math.ceil(t.evaluate(s))],"filter-==":[Lt,[yt,ar],(s,[t,o])=>s.properties()[t.value]===o.value],"filter-id-==":[Lt,[ar],(s,[t])=>s.id()===t.value],"filter-type-==":[Lt,[yt],(s,[t])=>s.geometryType()===t.value],"filter-<":[Lt,[yt,ar],(s,[t,o])=>{const c=s.properties()[t.value],g=o.value;return typeof c==typeof g&&c<g}],"filter-id-<":[Lt,[ar],(s,[t])=>{const o=s.id(),c=t.value;return typeof o==typeof c&&o<c}],"filter->":[Lt,[yt,ar],(s,[t,o])=>{const c=s.properties()[t.value],g=o.value;return typeof c==typeof g&&c>g}],"filter-id->":[Lt,[ar],(s,[t])=>{const o=s.id(),c=t.value;return typeof o==typeof c&&o>c}],"filter-<=":[Lt,[yt,ar],(s,[t,o])=>{const c=s.properties()[t.value],g=o.value;return typeof c==typeof g&&c<=g}],"filter-id-<=":[Lt,[ar],(s,[t])=>{const o=s.id(),c=t.value;return typeof o==typeof c&&o<=c}],"filter->=":[Lt,[yt,ar],(s,[t,o])=>{const c=s.properties()[t.value],g=o.value;return typeof c==typeof g&&c>=g}],"filter-id->=":[Lt,[ar],(s,[t])=>{const o=s.id(),c=t.value;return typeof o==typeof c&&o>=c}],"filter-has":[Lt,[ar],(s,[t])=>t.value in s.properties()],"filter-has-id":[Lt,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[Lt,[bi(yt)],(s,[t])=>t.value.indexOf(s.geometryType())>=0],"filter-id-in":[Lt,[bi(ar)],(s,[t])=>t.value.indexOf(s.id())>=0],"filter-in-small":[Lt,[yt,bi(ar)],(s,[t,o])=>o.value.indexOf(s.properties()[t.value])>=0],"filter-in-large":[Lt,[yt,bi(ar)],(s,[t,o])=>function(c,g,w,T){for(;w<=T;){const A=w+T>>1;if(g[A]===c)return!0;g[A]>c?T=A-1:w=A+1}return!1}(s.properties()[t.value],o.value,0,o.value.length-1)],all:{type:Lt,overloads:[[[Lt,Lt],(s,[t,o])=>t.evaluate(s)&&o.evaluate(s)],[mo(Lt),(s,t)=>{for(const o of t)if(!o.evaluate(s))return!1;return!0}]]},any:{type:Lt,overloads:[[[Lt,Lt],(s,[t,o])=>t.evaluate(s)||o.evaluate(s)],[mo(Lt),(s,t)=>{for(const o of t)if(o.evaluate(s))return!0;return!1}]]},"!":[Lt,[Lt],(s,[t])=>!t.evaluate(s)],"is-supported-script":[Lt,[yt],(s,[t])=>{const o=s.globals&&s.globals.isSupportedScript;return!o||o(t.evaluate(s))}],upcase:[yt,[yt],(s,[t])=>t.evaluate(s).toUpperCase()],downcase:[yt,[yt],(s,[t])=>t.evaluate(s).toLowerCase()],concat:[yt,mo(ar),(s,t)=>t.map(o=>Ha(o.evaluate(s))).join("")],"resolved-locale":[yt,[Za],(s,[t])=>t.evaluate(s).resolvedLocale()]});class Vc{constructor(t,o){var c;this.expression=t,this._warningHistory={},this._evaluator=new $r,this._defaultValue=o?(c=o).type==="color"&&Nl(c.default)?new cr(0,0,0,0):c.type==="color"?cr.parse(c.default)||null:c.type==="padding"?Nn.parse(c.default)||null:c.type==="variableAnchorOffsetCollection"?cn.parse(c.default)||null:c.type==="projectionDefinition"?en.parse(c.default)||null:c.default===void 0?null:c.default:null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(t,o,c,g,w,T){return this._evaluator.globals=t,this._evaluator.feature=o,this._evaluator.featureState=c,this._evaluator.canonical=g,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=T,this.expression.evaluate(this._evaluator)}evaluate(t,o,c,g,w,T){this._evaluator.globals=t,this._evaluator.feature=o||null,this._evaluator.featureState=c||null,this._evaluator.canonical=g,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=T||null;try{const A=this.expression.evaluate(this._evaluator);if(A==null||typeof A=="number"&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new ki(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(A)} instead.`);return A}catch(A){return this._warningHistory[A.message]||(this._warningHistory[A.message]=!0,typeof console<"u"&&console.warn(A.message)),this._defaultValue}}}function bn(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in Ya}function vs(s,t){const o=new hr(Ya,Vu,[],t?function(g){const w={color:Hr,string:yt,number:tt,enum:yt,boolean:Lt,formatted:_n,padding:qa,projectionDefinition:Vi,resolvedImage:$i,variableAnchorOffsetCollection:sa};return g.type==="array"?bi(w[g.value]||ar,g.length):w[g.type]}(t):void 0),c=o.parse(s,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return c?Yh(new Vc(c,t)):qo(o.errors)}class yo{constructor(t,o){this.kind=t,this._styleExpression=o,this.isStateDependent=t!=="constant"&&!$u(o.expression)}evaluateWithoutErrorHandling(t,o,c,g,w,T){return this._styleExpression.evaluateWithoutErrorHandling(t,o,c,g,w,T)}evaluate(t,o,c,g,w,T){return this._styleExpression.evaluate(t,o,c,g,w,T)}}class Vl{constructor(t,o,c,g){this.kind=t,this.zoomStops=c,this._styleExpression=o,this.isStateDependent=t!=="camera"&&!$u(o.expression),this.interpolationType=g}evaluateWithoutErrorHandling(t,o,c,g,w,T){return this._styleExpression.evaluateWithoutErrorHandling(t,o,c,g,w,T)}evaluate(t,o,c,g,w,T){return this._styleExpression.evaluate(t,o,c,g,w,T)}interpolationFactor(t,o,c){return this.interpolationType?Vn.interpolationFactor(this.interpolationType,t,o,c):0}}function Zu(s,t){const o=vs(s,t);if(o.result==="error")return o;const c=o.value.expression,g=Nc(c);if(!g&&!Go(t))return qo([new vr("","data expressions not supported")]);const w=Fc(c,["zoom"]);if(!w&&!Ta(t))return qo([new vr("","zoom expressions not supported")]);const T=ea(c);return T||w?T instanceof vr?qo([T]):T instanceof Vn&&!ua(t)?qo([new vr("",'"interpolate" expressions cannot be used with this property')]):Yh(T?new Vl(g?"camera":"composite",o.value,T.labels,T instanceof Vn?T.interpolation:void 0):new yo(g?"constant":"source",o.value)):qo([new vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Jn{constructor(t,o){this._parameters=t,this._specification=o,Wt(this,Ho(this._parameters,this._specification))}static deserialize(t){return new Jn(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function ea(s){let t=null;if(s instanceof Ls)t=ea(s.result);else if(s instanceof Ru){for(const o of s.args)if(t=ea(o),t)break}else(s instanceof Bs||s instanceof Vn)&&s.input instanceof la&&s.input.name==="zoom"&&(t=s);return t instanceof vr||s.eachChild(o=>{const c=ea(o);c instanceof vr?t=c:!t&&c?t=new vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&c&&t!==c&&(t=new vr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function xs(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const t of s.slice(1))if(!xs(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const bs={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Xa(s){if(s==null)return{filter:()=>!0,needGeometry:!1};xs(s)||(s=Yo(s));const t=vs(s,bs);if(t.result==="error")throw new Error(t.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,c,g)=>t.value.evaluate(o,c,{},g),needGeometry:$c(s)}}function Ko(s,t){return s<t?-1:s>t?1:0}function $c(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let t=1;t<s.length;t++)if($c(s[t]))return!0;return!1}function Yo(s){if(!s)return!0;const t=s[0];return s.length<=1?t!=="any":t==="=="?$l(s[1],s[2],"=="):t==="!="?jr($l(s[1],s[2],"==")):t==="<"||t===">"||t==="<="||t===">="?$l(s[1],s[2],t):t==="any"?(o=s.slice(1),["any"].concat(o.map(Yo))):t==="all"?["all"].concat(s.slice(1).map(Yo)):t==="none"?["all"].concat(s.slice(1).map(Yo).map(jr)):t==="in"?zn(s[1],s.slice(2)):t==="!in"?jr(zn(s[1],s.slice(2))):t==="has"?tn(s[1]):t!=="!has"||jr(tn(s[1]));var o}function $l(s,t,o){switch(s){case"$type":return[`filter-type-${o}`,t];case"$id":return[`filter-id-${o}`,t];default:return[`filter-${o}`,s,t]}}function zn(s,t){if(t.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(o=>typeof o!=typeof t[0])?["filter-in-large",s,["literal",t.sort(Ko)]]:["filter-in-small",s,["literal",t]]}}function tn(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function jr(s){return["!",s]}function ta(s){const t=typeof s;if(t==="number"||t==="boolean"||t==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let g="[";for(const w of s)g+=`${ta(w)},`;return`${g}]`}const o=Object.keys(s).sort();let c="{";for(let g=0;g<o.length;g++)c+=`${JSON.stringify(o[g])}:${ta(s[o[g]])},`;return`${c}}`}function ga(s){let t="";for(const o of Be)t+=`/${ta(s[o])}`;return t}function Zc(s){const t=s.value;return t?[new Je(s.key,t,"constants have been deprecated as of v8")]:[]}function ui(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function _o(s){if(Array.isArray(s))return s.map(_o);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const t={};for(const o in s)t[o]=_o(s[o]);return t}return ui(s)}function ya(s){const t=s.key,o=s.value,c=s.valueSpec||{},g=s.objectElementValidators||{},w=s.style,T=s.styleSpec,A=s.validateSpec;let I=[];const B=Pr(o);if(B!=="object")return[new Je(t,o,`object expected, ${B} found`)];for(const N in o){const V=N.split(".")[0],H=c[V]||c["*"];let Q;if(g[V])Q=g[V];else if(c[V])Q=A;else if(g["*"])Q=g["*"];else{if(!c["*"]){I.push(new Je(t,o[N],`unknown property "${N}"`));continue}Q=A}I=I.concat(Q({key:(t&&`${t}.`)+N,value:o[N],valueSpec:H,style:w,styleSpec:T,object:o,objectKey:N,validateSpec:A},o))}for(const N in c)g[N]||c[N].required&&c[N].default===void 0&&o[N]===void 0&&I.push(new Je(t,o,`missing required property "${N}"`));return I}function Xo(s){const t=s.value,o=s.valueSpec,c=s.style,g=s.styleSpec,w=s.key,T=s.arrayElementValidator||s.validateSpec;if(Pr(t)!=="array")return[new Je(w,t,`array expected, ${Pr(t)} found`)];if(o.length&&t.length!==o.length)return[new Je(w,t,`array length ${o.length} expected, length ${t.length} found`)];if(o["min-length"]&&t.length<o["min-length"])return[new Je(w,t,`array length at least ${o["min-length"]} expected, length ${t.length} found`)];let A={type:o.value,values:o.values};g.$version<7&&(A.function=o.function),Pr(o.value)==="object"&&(A=o.value);let I=[];for(let B=0;B<t.length;B++)I=I.concat(T({array:t,arrayIndex:B,value:t[B],valueSpec:A,validateSpec:s.validateSpec,style:c,styleSpec:g,key:`${w}[${B}]`}));return I}function Qo(s){const t=s.key,o=s.value,c=s.valueSpec;let g=Pr(o);return g==="number"&&o!=o&&(g="NaN"),g!=="number"?[new Je(t,o,`number expected, ${g} found`)]:"minimum"in c&&o<c.minimum?[new Je(t,o,`${o} is less than the minimum value ${c.minimum}`)]:"maximum"in c&&o>c.maximum?[new Je(t,o,`${o} is greater than the maximum value ${c.maximum}`)]:[]}function Jo(s){const t=s.valueSpec,o=ui(s.value.type);let c,g,w,T={};const A=o!=="categorical"&&s.value.property===void 0,I=!A,B=Pr(s.value.stops)==="array"&&Pr(s.value.stops[0])==="array"&&Pr(s.value.stops[0][0])==="object",N=ya({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(Q){if(o==="identity")return[new Je(Q.key,Q.value,'identity function may not have a "stops" property')];let J=[];const ie=Q.value;return J=J.concat(Xo({key:Q.key,value:ie,valueSpec:Q.valueSpec,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,arrayElementValidator:V})),Pr(ie)==="array"&&ie.length===0&&J.push(new Je(Q.key,ie,"array must have at least one stop")),J},default:function(Q){return Q.validateSpec({key:Q.key,value:Q.value,valueSpec:t,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec})}}});return o==="identity"&&A&&N.push(new Je(s.key,s.value,'missing required property "property"')),o==="identity"||s.value.stops||N.push(new Je(s.key,s.value,'missing required property "stops"')),o==="exponential"&&s.valueSpec.expression&&!ua(s.valueSpec)&&N.push(new Je(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(I&&!Go(s.valueSpec)?N.push(new Je(s.key,s.value,"property functions not supported")):A&&!Ta(s.valueSpec)&&N.push(new Je(s.key,s.value,"zoom functions not supported"))),o!=="categorical"&&!B||s.value.property!==void 0||N.push(new Je(s.key,s.value,'"property" property is required')),N;function V(Q){let J=[];const ie=Q.value,ce=Q.key;if(Pr(ie)!=="array")return[new Je(ce,ie,`array expected, ${Pr(ie)} found`)];if(ie.length!==2)return[new Je(ce,ie,`array length 2 expected, length ${ie.length} found`)];if(B){if(Pr(ie[0])!=="object")return[new Je(ce,ie,`object expected, ${Pr(ie[0])} found`)];if(ie[0].zoom===void 0)return[new Je(ce,ie,"object stop key must have zoom")];if(ie[0].value===void 0)return[new Je(ce,ie,"object stop key must have value")];if(w&&w>ui(ie[0].zoom))return[new Je(ce,ie[0].zoom,"stop zoom values must appear in ascending order")];ui(ie[0].zoom)!==w&&(w=ui(ie[0].zoom),g=void 0,T={}),J=J.concat(ya({key:`${ce}[0]`,value:ie[0],valueSpec:{zoom:{}},validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{zoom:Qo,value:H}}))}else J=J.concat(H({key:`${ce}[0]`,value:ie[0],validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec},ie));return bn(_o(ie[1]))?J.concat([new Je(`${ce}[1]`,ie[1],"expressions are not allowed in function stops.")]):J.concat(Q.validateSpec({key:`${ce}[1]`,value:ie[1],valueSpec:t,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec}))}function H(Q,J){const ie=Pr(Q.value),ce=ui(Q.value),ye=Q.value!==null?Q.value:J;if(c){if(ie!==c)return[new Je(Q.key,ye,`${ie} stop domain type must match previous stop domain type ${c}`)]}else c=ie;if(ie!=="number"&&ie!=="string"&&ie!=="boolean")return[new Je(Q.key,ye,"stop domain value must be a number, string, or boolean")];if(ie!=="number"&&o!=="categorical"){let ze=`number expected, ${ie} found`;return Go(t)&&o===void 0&&(ze+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Je(Q.key,ye,ze)]}return o!=="categorical"||ie!=="number"||isFinite(ce)&&Math.floor(ce)===ce?o!=="categorical"&&ie==="number"&&g!==void 0&&ce<g?[new Je(Q.key,ye,"stop domain values must appear in ascending order")]:(g=ce,o==="categorical"&&ce in T?[new Je(Q.key,ye,"stop domain values must be unique")]:(T[ce]=!0,[])):[new Je(Q.key,ye,`integer expected, found ${ce}`)]}}function Qa(s){const t=(s.expressionContext==="property"?Zu:vs)(_o(s.value),s.valueSpec);if(t.result==="error")return t.value.map(c=>new Je(`${s.key}${c.key}`,s.value,c.message));const o=t.value.expression||t.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!o.outputDefined())return[new Je(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!$u(o))return[new Je(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!$u(o))return[new Je(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!Fc(o,["zoom","feature-state"]))return[new Je(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!Nc(o))return[new Je(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ns(s){const t=s.key,o=s.value,c=s.valueSpec,g=[];return Array.isArray(c.values)?c.values.indexOf(ui(o))===-1&&g.push(new Je(t,o,`expected one of [${c.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(c.values).indexOf(ui(o))===-1&&g.push(new Je(t,o,`expected one of [${Object.keys(c.values).join(", ")}], ${JSON.stringify(o)} found`)),g}function qu(s){return xs(_o(s.value))?Qa(Wt({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):qc(s)}function qc(s){const t=s.value,o=s.key;if(Pr(t)!=="array")return[new Je(o,t,`array expected, ${Pr(t)} found`)];const c=s.styleSpec;let g,w=[];if(t.length<1)return[new Je(o,t,"filter array must have at least 1 element")];switch(w=w.concat(Ns({key:`${o}[0]`,value:t[0],valueSpec:c.filter_operator,style:s.style,styleSpec:s.styleSpec})),ui(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&ui(t[1])==="$type"&&w.push(new Je(o,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&w.push(new Je(o,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(g=Pr(t[1]),g!=="string"&&w.push(new Je(`${o}[1]`,t[1],`string expected, ${g} found`)));for(let T=2;T<t.length;T++)g=Pr(t[T]),ui(t[1])==="$type"?w=w.concat(Ns({key:`${o}[${T}]`,value:t[T],valueSpec:c.geometry_type,style:s.style,styleSpec:s.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&w.push(new Je(`${o}[${T}]`,t[T],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let T=1;T<t.length;T++)w=w.concat(qc({key:`${o}[${T}]`,value:t[T],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":g=Pr(t[1]),t.length!==2?w.push(new Je(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):g!=="string"&&w.push(new Je(`${o}[1]`,t[1],`string expected, ${g} found`))}return w}function Zl(s,t){const o=s.key,c=s.validateSpec,g=s.style,w=s.styleSpec,T=s.value,A=s.objectKey,I=w[`${t}_${s.layerType}`];if(!I)return[];const B=A.match(/^(.*)-transition$/);if(t==="paint"&&B&&I[B[1]]&&I[B[1]].transition)return c({key:o,value:T,valueSpec:w.transition,style:g,styleSpec:w});const N=s.valueSpec||I[A];if(!N)return[new Je(o,T,`unknown property "${A}"`)];let V;if(Pr(T)==="string"&&Go(N)&&!N.tokens&&(V=/^{([^}]+)}$/.exec(T)))return[new Je(o,T,`"${A}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(V[1])} }\`.`)];const H=[];return s.layerType==="symbol"&&(A==="text-field"&&g&&!g.glyphs&&H.push(new Je(o,T,'use of "text-field" requires a style "glyphs" property')),A==="text-font"&&Nl(_o(T))&&ui(T.type)==="identity"&&H.push(new Je(o,T,'"text-font" does not support identity functions'))),H.concat(c({key:s.key,value:T,valueSpec:N,style:g,styleSpec:w,expressionContext:"property",propertyType:t,propertyKey:A}))}function Xh(s){return Zl(s,"paint")}function el(s){return Zl(s,"layout")}function Gc(s){let t=[];const o=s.value,c=s.key,g=s.style,w=s.styleSpec;o.type||o.ref||t.push(new Je(c,o,'either "type" or "ref" is required'));let T=ui(o.type);const A=ui(o.ref);if(o.id){const I=ui(o.id);for(let B=0;B<s.arrayIndex;B++){const N=g.layers[B];ui(N.id)===I&&t.push(new Je(c,o.id,`duplicate layer id "${o.id}", previously used at line ${N.id.__line__}`))}}if("ref"in o){let I;["type","source","source-layer","filter","layout"].forEach(B=>{B in o&&t.push(new Je(c,o[B],`"${B}" is prohibited for ref layers`))}),g.layers.forEach(B=>{ui(B.id)===A&&(I=B)}),I?I.ref?t.push(new Je(c,o.ref,"ref cannot reference another ref layer")):T=ui(I.type):t.push(new Je(c,o.ref,`ref layer "${A}" not found`))}else if(T!=="background")if(o.source){const I=g.sources&&g.sources[o.source],B=I&&ui(I.type);I?B==="vector"&&T==="raster"?t.push(new Je(c,o.source,`layer "${o.id}" requires a raster source`)):B!=="raster-dem"&&T==="hillshade"?t.push(new Je(c,o.source,`layer "${o.id}" requires a raster-dem source`)):B==="raster"&&T!=="raster"?t.push(new Je(c,o.source,`layer "${o.id}" requires a vector source`)):B!=="vector"||o["source-layer"]?B==="raster-dem"&&T!=="hillshade"?t.push(new Je(c,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):T!=="line"||!o.paint||!o.paint["line-gradient"]||B==="geojson"&&I.lineMetrics||t.push(new Je(c,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Je(c,o,`layer "${o.id}" must specify a "source-layer"`)):t.push(new Je(c,o.source,`source "${o.source}" not found`))}else t.push(new Je(c,o,'missing required property "source"'));return t=t.concat(ya({key:c,value:o,valueSpec:w.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${c}.type`,value:o.type,valueSpec:w.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:o,objectKey:"type"}),filter:qu,layout:I=>ya({layer:o,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":B=>el(Wt({layerType:T},B))}}),paint:I=>ya({layer:o,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":B=>Xh(Wt({layerType:T},B))}})}})),t}function $n(s){const t=s.value,o=s.key,c=Pr(t);return c!=="string"?[new Je(o,t,`string expected, ${c} found`)]:[]}const ql={promoteId:function({key:s,value:t}){if(Pr(t)==="string")return $n({key:s,value:t});{const o=[];for(const c in t)o.push(...$n({key:`${s}.${c}`,value:t[c]}));return o}}};function Gu(s){const t=s.value,o=s.key,c=s.styleSpec,g=s.style,w=s.validateSpec;if(!t.type)return[new Je(o,t,'"type" is required')];const T=ui(t.type);let A;switch(T){case"vector":case"raster":return A=ya({key:o,value:t,valueSpec:c[`source_${T.replace("-","_")}`],style:s.style,styleSpec:c,objectElementValidators:ql,validateSpec:w}),A;case"raster-dem":return A=function(I){var B;const N=(B=I.sourceName)!==null&&B!==void 0?B:"",V=I.value,H=I.styleSpec,Q=H.source_raster_dem,J=I.style;let ie=[];const ce=Pr(V);if(V===void 0)return ie;if(ce!=="object")return ie.push(new Je("source_raster_dem",V,`object expected, ${ce} found`)),ie;const ye=ui(V.encoding)==="custom",ze=["redFactor","greenFactor","blueFactor","baseShift"],xe=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const K in V)!ye&&ze.includes(K)?ie.push(new Je(K,V[K],`In "${N}": "${K}" is only valid when "encoding" is set to "custom". ${xe} encoding found`)):Q[K]?ie=ie.concat(I.validateSpec({key:K,value:V[K],valueSpec:Q[K],validateSpec:I.validateSpec,style:J,styleSpec:H})):ie.push(new Je(K,V[K],`unknown property "${K}"`));return ie}({sourceName:o,value:t,style:s.style,styleSpec:c,validateSpec:w}),A;case"geojson":if(A=ya({key:o,value:t,valueSpec:c.source_geojson,style:g,styleSpec:c,validateSpec:w,objectElementValidators:ql}),t.cluster)for(const I in t.clusterProperties){const[B,N]=t.clusterProperties[I],V=typeof B=="string"?[B,["accumulated"],["get",I]]:B;A.push(...Qa({key:`${o}.${I}.map`,value:N,expressionContext:"cluster-map"})),A.push(...Qa({key:`${o}.${I}.reduce`,value:V,expressionContext:"cluster-reduce"}))}return A;case"video":return ya({key:o,value:t,valueSpec:c.source_video,style:g,validateSpec:w,styleSpec:c});case"image":return ya({key:o,value:t,valueSpec:c.source_image,style:g,validateSpec:w,styleSpec:c});case"canvas":return[new Je(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ns({key:`${o}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Gl(s){const t=s.value,o=s.styleSpec,c=o.light,g=s.style;let w=[];const T=Pr(t);if(t===void 0)return w;if(T!=="object")return w=w.concat([new Je("light",t,`object expected, ${T} found`)]),w;for(const A in t){const I=A.match(/^(.*)-transition$/);w=w.concat(I&&c[I[1]]&&c[I[1]].transition?s.validateSpec({key:A,value:t[A],valueSpec:o.transition,validateSpec:s.validateSpec,style:g,styleSpec:o}):c[A]?s.validateSpec({key:A,value:t[A],valueSpec:c[A],validateSpec:s.validateSpec,style:g,styleSpec:o}):[new Je(A,t[A],`unknown property "${A}"`)])}return w}function Hu(s){const t=s.value,o=s.styleSpec,c=o.sky,g=s.style,w=Pr(t);if(t===void 0)return[];if(w!=="object")return[new Je("sky",t,`object expected, ${w} found`)];let T=[];for(const A in t)T=T.concat(c[A]?s.validateSpec({key:A,value:t[A],valueSpec:c[A],style:g,styleSpec:o}):[new Je(A,t[A],`unknown property "${A}"`)]);return T}function Qh(s){const t=s.value,o=s.styleSpec,c=o.terrain,g=s.style;let w=[];const T=Pr(t);if(t===void 0)return w;if(T!=="object")return w=w.concat([new Je("terrain",t,`object expected, ${T} found`)]),w;for(const A in t)w=w.concat(c[A]?s.validateSpec({key:A,value:t[A],valueSpec:c[A],validateSpec:s.validateSpec,style:g,styleSpec:o}):[new Je(A,t[A],`unknown property "${A}"`)]);return w}function Jh(s){let t=[];const o=s.value,c=s.key;if(Array.isArray(o)){const g=[],w=[];for(const T in o)o[T].id&&g.includes(o[T].id)&&t.push(new Je(c,o,`all the sprites' ids must be unique, but ${o[T].id} is duplicated`)),g.push(o[T].id),o[T].url&&w.includes(o[T].url)&&t.push(new Je(c,o,`all the sprites' URLs must be unique, but ${o[T].url} is duplicated`)),w.push(o[T].url),t=t.concat(ya({key:`${c}[${T}]`,value:o[T],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return t}return $n({key:c,value:o})}const Ma={"*":()=>[],array:Xo,boolean:function(s){const t=s.value,o=s.key,c=Pr(t);return c!=="boolean"?[new Je(o,t,`boolean expected, ${c} found`)]:[]},number:Qo,color:function(s){const t=s.key,o=s.value,c=Pr(o);return c!=="string"?[new Je(t,o,`color expected, ${c} found`)]:cr.parse(String(o))?[]:[new Je(t,o,`color expected, "${o}" found`)]},constants:Zc,enum:Ns,filter:qu,function:Jo,layer:Gc,object:ya,source:Gu,light:Gl,sky:Hu,terrain:Qh,projection:function(s){const t=s.value,o=s.styleSpec,c=o.projection,g=s.style,w=Pr(t);if(t===void 0)return[];if(w!=="object")return[new Je("projection",t,`object expected, ${w} found`)];let T=[];for(const A in t)T=T.concat(c[A]?s.validateSpec({key:A,value:t[A],valueSpec:c[A],style:g,styleSpec:o}):[new Je(A,t[A],`unknown property "${A}"`)]);return T},projectionDefinition:function(s){const t=s.key;let o=s.value;o=o instanceof String?o.valueOf():o;const c=Pr(o);return c!=="array"||function(g){return Array.isArray(g)&&g.length===3&&typeof g[0]=="string"&&typeof g[1]=="string"&&typeof g[2]=="number"}(o)||function(g){return!!["interpolate","step","literal"].includes(g[0])}(o)?["array","string"].includes(c)?[]:[new Je(t,o,`projection expected, invalid type "${c}" found`)]:[new Je(t,o,`projection expected, invalid array ${JSON.stringify(o)} found`)]},string:$n,formatted:function(s){return $n(s).length===0?[]:Qa(s)},resolvedImage:function(s){return $n(s).length===0?[]:Qa(s)},padding:function(s){const t=s.key,o=s.value;if(Pr(o)==="array"){if(o.length<1||o.length>4)return[new Je(t,o,`padding requires 1 to 4 values; ${o.length} values found`)];const c={type:"number"};let g=[];for(let w=0;w<o.length;w++)g=g.concat(s.validateSpec({key:`${t}[${w}]`,value:o[w],validateSpec:s.validateSpec,valueSpec:c}));return g}return Qo({key:t,value:o,valueSpec:{}})},variableAnchorOffsetCollection:function(s){const t=s.key,o=s.value,c=Pr(o),g=s.styleSpec;if(c!=="array"||o.length<1||o.length%2!=0)return[new Je(t,o,"variableAnchorOffsetCollection requires a non-empty array of even length")];let w=[];for(let T=0;T<o.length;T+=2)w=w.concat(Ns({key:`${t}[${T}]`,value:o[T],valueSpec:g.layout_symbol["text-anchor"]})),w=w.concat(Xo({key:`${t}[${T+1}]`,value:o[T+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:g}));return w},sprite:Jh};function Fs(s){const t=s.value,o=s.valueSpec,c=s.styleSpec;return s.validateSpec=Fs,o.expression&&Nl(ui(t))?Jo(s):o.expression&&bn(_o(t))?Qa(s):o.type&&Ma[o.type]?Ma[o.type](s):ya(Wt({},s,{valueSpec:o.type?c[o.type]:o}))}function hn(s){const t=s.value,o=s.key,c=$n(s);return c.length||(t.indexOf("{fontstack}")===-1&&c.push(new Je(o,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&c.push(new Je(o,t,'"glyphs" url must include a "{range}" token'))),c}function wn(s,t=oe){let o=[];return o=o.concat(Fs({key:"",value:s,valueSpec:t.$root,styleSpec:t,style:s,validateSpec:Fs,objectElementValidators:{glyphs:hn,"*":()=>[]}})),s.constants&&(o=o.concat(Zc({key:"constants",value:s.constants}))),Hc(o)}function Aa(s){return function(t){return s({...t,validateSpec:Fs})}}function Hc(s){return[].concat(s).sort((t,o)=>t.line-o.line)}function Ca(s){return function(...t){return Hc(s.apply(this,t))}}wn.source=Ca(Aa(Gu)),wn.sprite=Ca(Aa(Jh)),wn.glyphs=Ca(Aa(hn)),wn.light=Ca(Aa(Gl)),wn.sky=Ca(Aa(Hu)),wn.terrain=Ca(Aa(Qh)),wn.layer=Ca(Aa(Gc)),wn.filter=Ca(Aa(qu)),wn.paintProperty=Ca(Aa(Xh)),wn.layoutProperty=Ca(Aa(el));const Xi=wn,Ja=Xi.light,ws=Xi.sky,tf=Xi.paintProperty,Ss=Xi.layoutProperty;function Ts(s,t){let o=!1;if(t&&t.length)for(const c of t)s.fire(new he(new Error(c.message))),o=!0;return o}class di{constructor(t,o,c){const g=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const T=new Int32Array(this.arrayBuffer);t=T[0],this.d=(o=T[1])+2*(c=T[2]);for(let I=0;I<this.d*this.d;I++){const B=T[3+I],N=T[3+I+1];g.push(B===N?null:T.subarray(B,N))}const A=T[3+g.length+1];this.keys=T.subarray(T[3+g.length],A),this.bboxes=T.subarray(A),this.insert=this._insertReadonly}else{this.d=o+2*c;for(let T=0;T<this.d*this.d;T++)g.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=t,this.padding=c,this.scale=o/t,this.uid=0;const w=c/o*t;this.min=-w,this.max=t+w}insert(t,o,c,g,w){this._forEachCell(o,c,g,w,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(o),this.bboxes.push(c),this.bboxes.push(g),this.bboxes.push(w)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,o,c,g,w,T){this.cells[w].push(T)}query(t,o,c,g,w){const T=this.min,A=this.max;if(t<=T&&o<=T&&A<=c&&A<=g&&!w)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(t,o,c,g,this._queryCell,I,{},w),I}}_queryCell(t,o,c,g,w,T,A,I){const B=this.cells[w];if(B!==null){const N=this.keys,V=this.bboxes;for(let H=0;H<B.length;H++){const Q=B[H];if(A[Q]===void 0){const J=4*Q;(I?I(V[J+0],V[J+1],V[J+2],V[J+3]):t<=V[J+2]&&o<=V[J+3]&&c>=V[J+0]&&g>=V[J+1])?(A[Q]=!0,T.push(N[Q])):A[Q]=!1}}}}_forEachCell(t,o,c,g,w,T,A,I){const B=this._convertToCellCoord(t),N=this._convertToCellCoord(o),V=this._convertToCellCoord(c),H=this._convertToCellCoord(g);for(let Q=B;Q<=V;Q++)for(let J=N;J<=H;J++){const ie=this.d*J+Q;if((!I||I(this._convertFromCellCoord(Q),this._convertFromCellCoord(J),this._convertFromCellCoord(Q+1),this._convertFromCellCoord(J+1)))&&w.call(this,t,o,c,g,ie,T,A,I))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,o=3+this.cells.length+1+1;let c=0;for(let T=0;T<this.cells.length;T++)c+=this.cells[T].length;const g=new Int32Array(o+c+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let w=o;for(let T=0;T<t.length;T++){const A=t[T];g[3+T]=w,g.set(A,w),w+=A.length}return g[3+t.length]=w,g.set(this.keys,w),w+=this.keys.length,g[3+t.length+1]=w,g.set(this.bboxes,w),w+=this.bboxes.length,g.buffer}static serialize(t,o){const c=t.toArrayBuffer();return o&&o.push(c),{buffer:c}}static deserialize(t){return new di(t.buffer)}}const Ea={};function Bt(s,t,o={}){if(Ea[s])throw new Error(`${s} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:s,writeable:!1}),Ea[s]={klass:t,omit:o.omit||[],shallow:o.shallow||[]}}Bt("Object",Object),Bt("TransferableGridIndex",di),Bt("Color",cr),Bt("Error",Error),Bt("AJAXError",Rn),Bt("ResolvedImage",Xn),Bt("StylePropertyFunction",Jn),Bt("StyleExpression",Vc,{omit:["_evaluator"]}),Bt("ZoomDependentExpression",Vl),Bt("ZoomConstantExpression",yo),Bt("CompoundExpression",la,{omit:["_evaluate"]});for(const s in Ya)Ya[s]._classRegistryKey||Bt(`Expression_${s}`,Ya[s]);function rf(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function ed(s){return s.$name||s.constructor._classRegistryKey}function Bi(s){return!function(t){if(t===null||typeof t!="object")return!1;const o=ed(t);return!(!o||o==="Object")}(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||rf(s)||Yi(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function tl(s,t){if(Bi(s))return(rf(s)||Yi(s))&&t&&t.push(s),ArrayBuffer.isView(s)&&t&&t.push(s.buffer),s instanceof ImageData&&t&&t.push(s.data.buffer),s;if(Array.isArray(s)){const w=[];for(const T of s)w.push(tl(T,t));return w}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);const o=ed(s);if(!o)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!Ea[o])throw new Error(`${o} is not registered.`);const{klass:c}=Ea[o],g=c.serialize?c.serialize(s,t):{};if(c.serialize){if(t&&g===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const w in s){if(!s.hasOwnProperty(w)||Ea[o].omit.indexOf(w)>=0)continue;const T=s[w];g[w]=Ea[o].shallow.indexOf(w)>=0?T:tl(T,t)}s instanceof Error&&(g.message=s.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(g.$name=o),g}function es(s){if(Bi(s))return s;if(Array.isArray(s))return s.map(es);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);const t=ed(s)||"Object";if(!Ea[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:o}=Ea[t];if(!o)throw new Error(`can't deserialize unregistered class ${t}`);if(o.deserialize)return o.deserialize(s);const c=Object.create(o.prototype);for(const g of Object.keys(s)){if(g==="$name")continue;const w=s[g];c[g]=Ea[t].shallow.indexOf(g)>=0?w:es(w)}return c}class Us{constructor(){this.first=!0}update(t,o){const c=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=c,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=c,!0):(this.lastFloorZoom>c?(this.lastIntegerZoom=c+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<c&&(this.lastIntegerZoom=c,this.lastIntegerZoomTime=o),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=c,!0))}}const Tr={"Latin-1 Supplement":s=>s>=128&&s<=255,"Hangul Jamo":s=>s>=4352&&s<=4607,Khmer:s=>s>=6016&&s<=6143,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Hiragana:s=>s>=12352&&s<=12447,Katakana:s=>s>=12448&&s<=12543,Kanbun:s=>s>=12688&&s<=12703,"CJK Strokes":s=>s>=12736&&s<=12783,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"CJK Unified Ideographs":s=>s>=19968&&s<=40959,"Hangul Syllables":s=>s>=44032&&s<=55215,"Private Use Area":s=>s>=57344&&s<=63743,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function Vs(s){for(const t of s)if(Ms(t.charCodeAt(0)))return!0;return!1}function rl(s){for(const t of s)if(!nf(t.charCodeAt(0)))return!1;return!0}function Wc(s){const t=s.map(o=>{try{return new RegExp(`\\p{sc=${o}}`,"u").source}catch{return null}}).filter(o=>o);return new RegExp(t.join("|"),"u")}const Kc=Wc(["Arab","Dupl","Mong","Ougr","Syrc"]);function nf(s){return!Kc.test(String.fromCodePoint(s))}const td=Wc(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Ms(s){return!(s!==746&&s!==747&&(s<4352||!(Tr["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||Tr["CJK Compatibility"](s)||Tr["CJK Strokes"](s)||!(!Tr["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||Tr["Enclosed CJK Letters and Months"](s)||Tr["Ideographic Description Characters"](s)||Tr.Kanbun(s)||Tr.Katakana(s)&&s!==12540||!(!Tr["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!Tr["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||Tr["Vertical Forms"](s)||Tr["Yijing Hexagram Symbols"](s)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(s))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(s))||td.test(String.fromCodePoint(s)))))}function Yc(s){return!(Ms(s)||function(t){return!!(Tr["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||Tr["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||Tr["Letterlike Symbols"](t)||Tr["Number Forms"](t)||Tr["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||Tr["Control Pictures"](t)&&t!==9251||Tr["Optical Character Recognition"](t)||Tr["Enclosed Alphanumerics"](t)||Tr["Geometric Shapes"](t)||Tr["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Tr["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Tr["CJK Symbols and Punctuation"](t)||Tr.Katakana(t)||Tr["Private Use Area"](t)||Tr["CJK Compatibility Forms"](t)||Tr["Small Form Variants"](t)||Tr["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(s))}const Wu=Wc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Xc(s){return Wu.test(String.fromCodePoint(s))}function $s(s,t){return!(!t&&Xc(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||Tr.Khmer(s))}function Ir(s){for(const t of s)if(Xc(t.charCodeAt(0)))return!0;return!1}const Gr=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){if(Gr.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(s,t){return l(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(s.pluginStatus!=="loading")return this.setState(s),s;const o=s.pluginURL,c=new Promise(w=>{this.loadScriptResolve=w});t(o);const g=new Promise(w=>setTimeout(()=>w(),this.TIMEOUT));if(yield Promise.race([c,g]),this.isParsed()){const w={pluginStatus:"loaded",pluginURL:o};return this.setState(w),w}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${o}`)})}};class mr{constructor(t,o){this.zoom=t,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Us,this.transition={})}isSupportedScript(t){return function(o,c){for(const g of o)if(!$s(g.charCodeAt(0),c))return!1;return!0}(t,Gr.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,o=t-Math.floor(t),c=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*c}:{fromScale:.5,toScale:1,t:1-(1-c)*o}}}class vo{constructor(t,o){this.property=t,this.value=o,this.expression=function(c,g){if(Nl(c))return new Jn(c,g);if(bn(c)){const w=Zu(c,g);if(w.result==="error")throw new Error(w.value.map(T=>`${T.key}: ${T.message}`).join(", "));return w.value}{let w=c;return g.type==="color"&&typeof c=="string"?w=cr.parse(c):g.type!=="padding"||typeof c!="number"&&!Array.isArray(c)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(c)?w=cn.parse(c):g.type==="projectionDefinition"&&typeof c=="string"&&(w=en.parse(c)):w=Nn.parse(c),{kind:"constant",evaluate:()=>w}}}(o===void 0?t.specification.default:o,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,o,c){return this.property.possiblyEvaluate(this,t,o,c)}}class Zs{constructor(t){this.property=t,this.value=new vo(t,void 0)}transitioned(t,o){return new xo(this.property,this.value,o,Qr({},t.transition,this.transition),t.now)}untransitioned(){return new xo(this.property,this.value,null,{},0)}}class qs{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return li(this._values[t].value.value)}setValue(t,o){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Zs(this._values[t].property)),this._values[t].value=new vo(this._values[t].property,o===null?void 0:li(o))}getTransition(t){return li(this._values[t].transition)}setTransition(t,o){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Zs(this._values[t].property)),this._values[t].transition=li(o)||void 0}serialize(){const t={};for(const o of Object.keys(this._values)){const c=this.getValue(o);c!==void 0&&(t[o]=c);const g=this.getTransition(o);g!==void 0&&(t[`${o}-transition`]=g)}return t}transitioned(t,o){const c=new Hl(this._properties);for(const g of Object.keys(this._values))c._values[g]=this._values[g].transitioned(t,o._values[g]);return c}untransitioned(){const t=new Hl(this._properties);for(const o of Object.keys(this._values))t._values[o]=this._values[o].untransitioned();return t}}class xo{constructor(t,o,c,g,w){this.property=t,this.value=o,this.begin=w+g.delay||0,this.end=this.begin+g.duration||0,t.specification.transition&&(g.delay||g.duration)&&(this.prior=c)}possiblyEvaluate(t,o,c){const g=t.now||0,w=this.value.possiblyEvaluate(t,o,c),T=this.prior;if(T){if(g>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(g<this.begin)return T.possiblyEvaluate(t,o,c);{const A=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(T.possiblyEvaluate(t,o,c),w,Zt(A))}}return w}}class Hl{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,o,c){const g=new Ri(this._properties);for(const w of Object.keys(this._values))g._values[w]=this._values[w].possiblyEvaluate(t,o,c);return g}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class bo{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return this._values[t].value!==void 0}getValue(t){return li(this._values[t].value)}setValue(t,o){this._values[t]=new vo(this._values[t].property,o===null?void 0:li(o))}serialize(){const t={};for(const o of Object.keys(this._values)){const c=this.getValue(o);c!==void 0&&(t[o]=c)}return t}possiblyEvaluate(t,o,c){const g=new Ri(this._properties);for(const w of Object.keys(this._values))g._values[w]=this._values[w].possiblyEvaluate(t,o,c);return g}}class As{constructor(t,o,c){this.property=t,this.value=o,this.parameters=c}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,o,c,g){return this.property.evaluate(this.value,this.parameters,t,o,c,g)}}class Ri{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class $t{constructor(t){this.specification=t}possiblyEvaluate(t,o){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(o)}interpolate(t,o,c){const g=hi[this.specification.type];return g?g(t,o,c):t}}class Kt{constructor(t,o){this.specification=t,this.overrides=o}possiblyEvaluate(t,o,c,g){return new As(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(o,null,{},c,g)}:t.expression,o)}interpolate(t,o,c){if(t.value.kind!=="constant"||o.value.kind!=="constant")return t;if(t.value.value===void 0||o.value.value===void 0)return new As(this,{kind:"constant",value:void 0},t.parameters);const g=hi[this.specification.type];if(g){const w=g(t.value.value,o.value.value,c);return new As(this,{kind:"constant",value:w},t.parameters)}return t}evaluate(t,o,c,g,w,T){return t.kind==="constant"?t.value:t.evaluate(o,c,g,w,T)}}class Wl extends Kt{possiblyEvaluate(t,o,c,g){if(t.value===void 0)return new As(this,{kind:"constant",value:void 0},o);if(t.expression.kind==="constant"){const w=t.expression.evaluate(o,null,{},c,g),T=t.property.specification.type==="resolvedImage"&&typeof w!="string"?w.name:w,A=this._calculate(T,T,T,o);return new As(this,{kind:"constant",value:A},o)}if(t.expression.kind==="camera"){const w=this._calculate(t.expression.evaluate({zoom:o.zoom-1}),t.expression.evaluate({zoom:o.zoom}),t.expression.evaluate({zoom:o.zoom+1}),o);return new As(this,{kind:"constant",value:w},o)}return new As(this,t.expression,o)}evaluate(t,o,c,g,w,T){if(t.kind==="source"){const A=t.evaluate(o,c,g,w,T);return this._calculate(A,A,A,o)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(o.zoom)-1},c,g),t.evaluate({zoom:Math.floor(o.zoom)},c,g),t.evaluate({zoom:Math.floor(o.zoom)+1},c,g),o):t.value}_calculate(t,o,c,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:t,to:o}:{from:c,to:o}}interpolate(t){return t}}class Qc{constructor(t){this.specification=t}possiblyEvaluate(t,o,c,g){if(t.value!==void 0){if(t.expression.kind==="constant"){const w=t.expression.evaluate(o,null,{},c,g);return this._calculate(w,w,w,o)}return this._calculate(t.expression.evaluate(new mr(Math.floor(o.zoom-1),o)),t.expression.evaluate(new mr(Math.floor(o.zoom),o)),t.expression.evaluate(new mr(Math.floor(o.zoom+1),o)),o)}}_calculate(t,o,c,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:t,to:o}:{from:c,to:o}}interpolate(t){return t}}class rd{constructor(t){this.specification=t}possiblyEvaluate(t,o,c,g){return!!t.expression.evaluate(o,null,{},c,g)}interpolate(){return!1}}class Zn{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in t){const c=t[o];c.specification.overridable&&this.overridableProperties.push(o);const g=this.defaultPropertyValues[o]=new vo(c,void 0),w=this.defaultTransitionablePropertyValues[o]=new Zs(c);this.defaultTransitioningPropertyValues[o]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=g.possiblyEvaluate({})}}}Bt("DataDrivenProperty",Kt),Bt("DataConstantProperty",$t),Bt("CrossFadedDataDrivenProperty",Wl),Bt("CrossFadedProperty",Qc),Bt("ColorRampProperty",rd);const Jc="-transition";class Pa extends be{constructor(t,o){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),o.layout&&(this._unevaluatedLayout=new bo(o.layout)),o.paint)){this._transitionablePaint=new qs(o.paint);for(const c in t.paint)this.setPaintProperty(c,t.paint[c],{validate:!1});for(const c in t.layout)this.setLayoutProperty(c,t.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ri(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,o,c={}){o!=null&&this._validate(Ss,`layers.${this.id}.layout.${t}`,t,o,c)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,o):this.visibility=o)}getPaintProperty(t){return t.endsWith(Jc)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,o,c={}){if(o!=null&&this._validate(tf,`layers.${this.id}.paint.${t}`,t,o,c))return!1;if(t.endsWith(Jc))return this._transitionablePaint.setTransition(t.slice(0,-11),o||void 0),!1;{const g=this._transitionablePaint._values[t],w=g.property.specification["property-type"]==="cross-faded-data-driven",T=g.value.isDataDriven(),A=g.value;this._transitionablePaint.setValue(t,o),this._handleSpecialPaintPropertyUpdate(t);const I=this._transitionablePaint._values[t].value;return I.isDataDriven()||T||w||this._handleOverridablePaintPropertyUpdate(t,A,I)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,o,c){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,o){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,o)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),Ur(t,(o,c)=>!(o===void 0||c==="layout"&&!Object.keys(o).length||c==="paint"&&!Object.keys(o).length))}_validate(t,o,c,g,w={}){return(!w||w.validate!==!1)&&Ts(this,t.call(Xi,{key:o,layerType:this.type,objectKey:c,value:g,styleSpec:oe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const o=this.paint.get(t);if(o instanceof As&&Go(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}const dn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ii{constructor(t,o){this._structArray=t,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class yi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,o){return t._trim(),o&&(t.isTransferred=!0,o.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const o=Object.create(this.prototype);return o.arrayBuffer=t.arrayBuffer,o.length=t.length,o.capacity=t.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Si(s,t=1){let o=0,c=0;return{members:s.map(g=>{const w=dn[g.type].BYTES_PER_ELEMENT,T=o=Kl(o,Math.max(t,w)),A=g.components||1;return c=Math.max(c,w),o+=w*A,{name:g.name,type:g.type,components:A,offset:T}}),size:Kl(o,Math.max(c,t)),alignment:t}}function Kl(s,t){return Math.ceil(s/t)*t}class il extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o){const c=this.length;return this.resize(c+1),this.emplace(c,t,o)}emplace(t,o,c){const g=2*t;return this.int16[g+0]=o,this.int16[g+1]=c,t}}il.prototype.bytesPerElement=4,Bt("StructArrayLayout2i4",il);class Ra extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,c)}emplace(t,o,c,g){const w=3*t;return this.int16[w+0]=o,this.int16[w+1]=c,this.int16[w+2]=g,t}}Ra.prototype.bytesPerElement=6,Bt("StructArrayLayout3i6",Ra);class Ia extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,g){const w=this.length;return this.resize(w+1),this.emplace(w,t,o,c,g)}emplace(t,o,c,g,w){const T=4*t;return this.int16[T+0]=o,this.int16[T+1]=c,this.int16[T+2]=g,this.int16[T+3]=w,t}}Ia.prototype.bytesPerElement=8,Bt("StructArrayLayout4i8",Ia);class Yl extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w,T){const A=this.length;return this.resize(A+1),this.emplace(A,t,o,c,g,w,T)}emplace(t,o,c,g,w,T,A){const I=6*t;return this.int16[I+0]=o,this.int16[I+1]=c,this.int16[I+2]=g,this.int16[I+3]=w,this.int16[I+4]=T,this.int16[I+5]=A,t}}Yl.prototype.bytesPerElement=12,Bt("StructArrayLayout2i4i12",Yl);class nl extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w,T){const A=this.length;return this.resize(A+1),this.emplace(A,t,o,c,g,w,T)}emplace(t,o,c,g,w,T,A){const I=4*t,B=8*t;return this.int16[I+0]=o,this.int16[I+1]=c,this.uint8[B+4]=g,this.uint8[B+5]=w,this.uint8[B+6]=T,this.uint8[B+7]=A,t}}nl.prototype.bytesPerElement=8,Bt("StructArrayLayout2i4ub8",nl);class al extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o){const c=this.length;return this.resize(c+1),this.emplace(c,t,o)}emplace(t,o,c){const g=2*t;return this.float32[g+0]=o,this.float32[g+1]=c,t}}al.prototype.bytesPerElement=8,Bt("StructArrayLayout2f8",al);class Xl extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w,T,A,I,B,N){const V=this.length;return this.resize(V+1),this.emplace(V,t,o,c,g,w,T,A,I,B,N)}emplace(t,o,c,g,w,T,A,I,B,N,V){const H=10*t;return this.uint16[H+0]=o,this.uint16[H+1]=c,this.uint16[H+2]=g,this.uint16[H+3]=w,this.uint16[H+4]=T,this.uint16[H+5]=A,this.uint16[H+6]=I,this.uint16[H+7]=B,this.uint16[H+8]=N,this.uint16[H+9]=V,t}}Xl.prototype.bytesPerElement=20,Bt("StructArrayLayout10ui20",Xl);class eh extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w,T,A,I,B,N,V,H){const Q=this.length;return this.resize(Q+1),this.emplace(Q,t,o,c,g,w,T,A,I,B,N,V,H)}emplace(t,o,c,g,w,T,A,I,B,N,V,H,Q){const J=12*t;return this.int16[J+0]=o,this.int16[J+1]=c,this.int16[J+2]=g,this.int16[J+3]=w,this.uint16[J+4]=T,this.uint16[J+5]=A,this.uint16[J+6]=I,this.uint16[J+7]=B,this.int16[J+8]=N,this.int16[J+9]=V,this.int16[J+10]=H,this.int16[J+11]=Q,t}}eh.prototype.bytesPerElement=24,Bt("StructArrayLayout4i4ui4i24",eh);class sl extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,c)}emplace(t,o,c,g){const w=3*t;return this.float32[w+0]=o,this.float32[w+1]=c,this.float32[w+2]=g,t}}sl.prototype.bytesPerElement=12,Bt("StructArrayLayout3f12",sl);class wo extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint32[1*t+0]=o,t}}wo.prototype.bytesPerElement=4,Bt("StructArrayLayout1ul4",wo);class th extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w,T,A,I,B){const N=this.length;return this.resize(N+1),this.emplace(N,t,o,c,g,w,T,A,I,B)}emplace(t,o,c,g,w,T,A,I,B,N){const V=10*t,H=5*t;return this.int16[V+0]=o,this.int16[V+1]=c,this.int16[V+2]=g,this.int16[V+3]=w,this.int16[V+4]=T,this.int16[V+5]=A,this.uint32[H+3]=I,this.uint16[V+8]=B,this.uint16[V+9]=N,t}}th.prototype.bytesPerElement=20,Bt("StructArrayLayout6i1ul2ui20",th);class Ql extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w,T){const A=this.length;return this.resize(A+1),this.emplace(A,t,o,c,g,w,T)}emplace(t,o,c,g,w,T,A){const I=6*t;return this.int16[I+0]=o,this.int16[I+1]=c,this.int16[I+2]=g,this.int16[I+3]=w,this.int16[I+4]=T,this.int16[I+5]=A,t}}Ql.prototype.bytesPerElement=12,Bt("StructArrayLayout2i2i2i12",Ql);class So extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w){const T=this.length;return this.resize(T+1),this.emplace(T,t,o,c,g,w)}emplace(t,o,c,g,w,T){const A=4*t,I=8*t;return this.float32[A+0]=o,this.float32[A+1]=c,this.float32[A+2]=g,this.int16[I+6]=w,this.int16[I+7]=T,t}}So.prototype.bytesPerElement=16,Bt("StructArrayLayout2f1f2i16",So);class id extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w,T){const A=this.length;return this.resize(A+1),this.emplace(A,t,o,c,g,w,T)}emplace(t,o,c,g,w,T,A){const I=16*t,B=4*t,N=8*t;return this.uint8[I+0]=o,this.uint8[I+1]=c,this.float32[B+1]=g,this.float32[B+2]=w,this.int16[N+6]=T,this.int16[N+7]=A,t}}id.prototype.bytesPerElement=16,Bt("StructArrayLayout2ub2f2i16",id);class Ku extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,c)}emplace(t,o,c,g){const w=3*t;return this.uint16[w+0]=o,this.uint16[w+1]=c,this.uint16[w+2]=g,t}}Ku.prototype.bytesPerElement=6,Bt("StructArrayLayout3ui6",Ku);class Yu extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w,T,A,I,B,N,V,H,Q,J,ie,ce,ye){const ze=this.length;return this.resize(ze+1),this.emplace(ze,t,o,c,g,w,T,A,I,B,N,V,H,Q,J,ie,ce,ye)}emplace(t,o,c,g,w,T,A,I,B,N,V,H,Q,J,ie,ce,ye,ze){const xe=24*t,K=12*t,le=48*t;return this.int16[xe+0]=o,this.int16[xe+1]=c,this.uint16[xe+2]=g,this.uint16[xe+3]=w,this.uint32[K+2]=T,this.uint32[K+3]=A,this.uint32[K+4]=I,this.uint16[xe+10]=B,this.uint16[xe+11]=N,this.uint16[xe+12]=V,this.float32[K+7]=H,this.float32[K+8]=Q,this.uint8[le+36]=J,this.uint8[le+37]=ie,this.uint8[le+38]=ce,this.uint32[K+10]=ye,this.int16[xe+22]=ze,t}}Yu.prototype.bytesPerElement=48,Bt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Yu);class rh extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w,T,A,I,B,N,V,H,Q,J,ie,ce,ye,ze,xe,K,le,Te,Ge,mt,Xe,it,bt,gt){const St=this.length;return this.resize(St+1),this.emplace(St,t,o,c,g,w,T,A,I,B,N,V,H,Q,J,ie,ce,ye,ze,xe,K,le,Te,Ge,mt,Xe,it,bt,gt)}emplace(t,o,c,g,w,T,A,I,B,N,V,H,Q,J,ie,ce,ye,ze,xe,K,le,Te,Ge,mt,Xe,it,bt,gt,St){const st=32*t,Ot=16*t;return this.int16[st+0]=o,this.int16[st+1]=c,this.int16[st+2]=g,this.int16[st+3]=w,this.int16[st+4]=T,this.int16[st+5]=A,this.int16[st+6]=I,this.int16[st+7]=B,this.uint16[st+8]=N,this.uint16[st+9]=V,this.uint16[st+10]=H,this.uint16[st+11]=Q,this.uint16[st+12]=J,this.uint16[st+13]=ie,this.uint16[st+14]=ce,this.uint16[st+15]=ye,this.uint16[st+16]=ze,this.uint16[st+17]=xe,this.uint16[st+18]=K,this.uint16[st+19]=le,this.uint16[st+20]=Te,this.uint16[st+21]=Ge,this.uint16[st+22]=mt,this.uint32[Ot+12]=Xe,this.float32[Ot+13]=it,this.float32[Ot+14]=bt,this.uint16[st+30]=gt,this.uint16[st+31]=St,t}}rh.prototype.bytesPerElement=64,Bt("StructArrayLayout8i15ui1ul2f2ui64",rh);class v extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.float32[1*t+0]=o,t}}v.prototype.bytesPerElement=4,Bt("StructArrayLayout1f4",v);class e extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,c)}emplace(t,o,c,g){const w=3*t;return this.uint16[6*t+0]=o,this.float32[w+1]=c,this.float32[w+2]=g,t}}e.prototype.bytesPerElement=12,Bt("StructArrayLayout1ui2f12",e);class a extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,c)}emplace(t,o,c,g){const w=4*t;return this.uint32[2*t+0]=o,this.uint16[w+2]=c,this.uint16[w+3]=g,t}}a.prototype.bytesPerElement=8,Bt("StructArrayLayout1ul2ui8",a);class h extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o){const c=this.length;return this.resize(c+1),this.emplace(c,t,o)}emplace(t,o,c){const g=2*t;return this.uint16[g+0]=o,this.uint16[g+1]=c,t}}h.prototype.bytesPerElement=4,Bt("StructArrayLayout2ui4",h);class m extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint16[1*t+0]=o,t}}m.prototype.bytesPerElement=2,Bt("StructArrayLayout1ui2",m);class x extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,g){const w=this.length;return this.resize(w+1),this.emplace(w,t,o,c,g)}emplace(t,o,c,g,w){const T=4*t;return this.float32[T+0]=o,this.float32[T+1]=c,this.float32[T+2]=g,this.float32[T+3]=w,t}}x.prototype.bytesPerElement=16,Bt("StructArrayLayout4f16",x);class M extends Ii{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new G(this.anchorPointX,this.anchorPointY)}}M.prototype.size=20;class R extends th{get(t){return new M(this,t)}}Bt("CollisionBoxArray",R);class D extends Ii{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}D.prototype.size=48;class j extends Yu{get(t){return new D(this,t)}}Bt("PlacedSymbolArray",j);class U extends Ii{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}U.prototype.size=64;class $ extends rh{get(t){return new U(this,t)}}Bt("SymbolInstanceArray",$);class Z extends v{getoffsetX(t){return this.float32[1*t+0]}}Bt("GlyphOffsetArray",Z);class te extends Ra{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}Bt("SymbolLineVertexArray",te);class re extends Ii{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}re.prototype.size=12;class fe extends e{get(t){return new re(this,t)}}Bt("TextAnchorOffsetArray",fe);class de extends Ii{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}de.prototype.size=8;class ge extends a{get(t){return new de(this,t)}}Bt("FeatureIndexArray",ge);class ve extends il{}class Ae extends il{}class Ee extends il{}class Pe extends Yl{}class Le extends nl{}class Ie extends al{}class $e extends Xl{}class He extends eh{}class at extends sl{}class ot extends wo{}class rt extends Ql{}class It extends id{}class Tt extends Ku{}class pt extends h{}const Vt=Si([{name:"a_pos",components:2,type:"Int16"}],4),{members:gr}=Vt;class tr{constructor(t=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=t}prepareSegment(t,o,c,g){const w=this.segments[this.segments.length-1];return t>tr.MAX_VERTEX_ARRAY_LENGTH&&zr(`Max vertices per segment is ${tr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${tr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!w||w.vertexLength+t>tr.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==g?this.createNewSegment(o,c,g):w}createNewSegment(t,o,c){const g={vertexOffset:t.length,primitiveOffset:o.length,vertexLength:0,primitiveLength:0,vaos:{}};return c!==void 0&&(g.sortKey=c),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(g),g}getOrCreateLatestSegment(t,o,c){return this.prepareSegment(0,t,o,c)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const t of this.segments)for(const o in t.vaos)t.vaos[o].destroy()}static simpleSegment(t,o,c,g){return new tr([{vertexOffset:t,primitiveOffset:o,vertexLength:c,primitiveLength:g,vaos:{},sortKey:0}])}}function fi(s,t){return 256*(s=er(Math.floor(s),0,255))+er(Math.floor(t),0,255)}tr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Bt("SegmentVector",tr);const Kr=Si([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var _i,pi,Dr,kr={exports:{}},Ti={exports:{}},Mi={exports:{}},fn=function(){if(Dr)return kr.exports;Dr=1;var s=(_i||(_i=1,Ti.exports=function(o,c){var g,w,T,A,I,B,N,V;for(w=o.length-(g=3&o.length),T=c,I=3432918353,B=461845907,V=0;V<w;)N=255&o.charCodeAt(V)|(255&o.charCodeAt(++V))<<8|(255&o.charCodeAt(++V))<<16|(255&o.charCodeAt(++V))<<24,++V,T=27492+(65535&(A=5*(65535&(T=(T^=N=(65535&(N=(N=(65535&N)*I+(((N>>>16)*I&65535)<<16)&4294967295)<<15|N>>>17))*B+(((N>>>16)*B&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(A>>>16)&65535)<<16);switch(N=0,g){case 3:N^=(255&o.charCodeAt(V+2))<<16;case 2:N^=(255&o.charCodeAt(V+1))<<8;case 1:T^=N=(65535&(N=(N=(65535&(N^=255&o.charCodeAt(V)))*I+(((N>>>16)*I&65535)<<16)&4294967295)<<15|N>>>17))*B+(((N>>>16)*B&65535)<<16)&4294967295}return T^=o.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^=T>>>16)>>>0}),Ti.exports),t=(pi||(pi=1,Mi.exports=function(o,c){for(var g,w=o.length,T=c^w,A=0;w>=4;)g=1540483477*(65535&(g=255&o.charCodeAt(A)|(255&o.charCodeAt(++A))<<8|(255&o.charCodeAt(++A))<<16|(255&o.charCodeAt(++A))<<24))+((1540483477*(g>>>16)&65535)<<16),T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),w-=4,++A;switch(w){case 3:T^=(255&o.charCodeAt(A+2))<<16;case 2:T^=(255&o.charCodeAt(A+1))<<8;case 1:T=1540483477*(65535&(T^=255&o.charCodeAt(A)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*(T>>>16)&65535)<<16),(T^=T>>>15)>>>0}),Mi.exports);return kr.exports=s,kr.exports.murmur3=s,kr.exports.murmur2=t,kr.exports}(),Sn=C(fn);class ts{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,o,c,g){this.ids.push(Gs(t)),this.positions.push(o,c,g)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const o=Gs(t);let c=0,g=this.ids.length-1;for(;c<g;){const T=c+g>>1;this.ids[T]>=o?g=T:c=T+1}const w=[];for(;this.ids[c]===o;)w.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return w}static serialize(t,o){const c=new Float64Array(t.ids),g=new Uint32Array(t.positions);return ra(c,g,0,c.length-1),o&&o.push(c.buffer,g.buffer),{ids:c,positions:g}}static deserialize(t){const o=new ts;return o.ids=t.ids,o.positions=t.positions,o.indexed=!0,o}}function Gs(s){const t=+s;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Sn(String(s))}function ra(s,t,o,c){for(;o<c;){const g=s[o+c>>1];let w=o-1,T=c+1;for(;;){do w++;while(s[w]<g);do T--;while(s[T]>g);if(w>=T)break;Da(s,w,T),Da(t,3*w,3*T),Da(t,3*w+1,3*T+1),Da(t,3*w+2,3*T+2)}T-o<c-T?(ra(s,t,o,T),o=T+1):(ra(s,t,T+1,c),c=T)}}function Da(s,t,o){const c=s[t];s[t]=s[o],s[o]=c}Bt("FeaturePositionMap",ts);class rs{constructor(t,o){this.gl=t.gl,this.location=o}}class To extends rs{constructor(t,o){super(t,o),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Mo extends rs{constructor(t,o){super(t,o),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class qn extends rs{constructor(t,o){super(t,o),this.current=cr.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Hs=new Float32Array(16);function is(s){return[fi(255*s.r,255*s.g),fi(255*s.b,255*s.a)]}class Cs{constructor(t,o,c){this.value=t,this.uniformNames=o.map(g=>`u_${g}`),this.type=c}setUniform(t,o,c){t.set(c.constantOr(this.value))}getBinding(t,o,c){return this.type==="color"?new qn(t,o):new To(t,o)}}class Ai{constructor(t,o){this.uniformNames=o.map(c=>`u_${c}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=t.tlbr}setUniform(t,o,c,g){const w=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;w&&t.set(w)}getBinding(t,o,c){return c.substr(0,9)==="u_pattern"?new Mo(t,o):new To(t,o)}}class vi{constructor(t,o,c,g){this.expression=t,this.type=c,this.maxValue=0,this.paintVertexAttributes=o.map(w=>({name:`a_${w}`,type:"Float32",components:c==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(t,o,c,g,w){const T=this.paintVertexArray.length,A=this.expression.evaluate(new mr(0),o,{},g,[],w);this.paintVertexArray.resize(t),this._setPaintValue(T,t,A)}updatePaintArray(t,o,c,g){const w=this.expression.evaluate({zoom:0},c,g);this._setPaintValue(t,o,w)}_setPaintValue(t,o,c){if(this.type==="color"){const g=is(c);for(let w=t;w<o;w++)this.paintVertexArray.emplace(w,g[0],g[1])}else{for(let g=t;g<o;g++)this.paintVertexArray.emplace(g,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Oi{constructor(t,o,c,g,w,T){this.expression=t,this.uniformNames=o.map(A=>`u_${A}_t`),this.type=c,this.useIntegerZoom=g,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=o.map(A=>({name:`a_${A}`,type:"Float32",components:c==="color"?4:2,offset:0})),this.paintVertexArray=new T}populatePaintArray(t,o,c,g,w){const T=this.expression.evaluate(new mr(this.zoom),o,{},g,[],w),A=this.expression.evaluate(new mr(this.zoom+1),o,{},g,[],w),I=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(I,t,T,A)}updatePaintArray(t,o,c,g){const w=this.expression.evaluate({zoom:this.zoom},c,g),T=this.expression.evaluate({zoom:this.zoom+1},c,g);this._setPaintValue(t,o,w,T)}_setPaintValue(t,o,c,g){if(this.type==="color"){const w=is(c),T=is(g);for(let A=t;A<o;A++)this.paintVertexArray.emplace(A,w[0],w[1],T[0],T[1])}else{for(let w=t;w<o;w++)this.paintVertexArray.emplace(w,c,g);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(g))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,o){const c=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,g=er(this.expression.interpolationFactor(c,this.zoom,this.zoom+1),0,1);t.set(g)}getBinding(t,o,c){return new To(t,o)}}class Mr{constructor(t,o,c,g,w,T){this.expression=t,this.type=o,this.useIntegerZoom=c,this.zoom=g,this.layerId=T,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w}populatePaintArray(t,o,c){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(g,t,o.patterns&&o.patterns[this.layerId],c)}updatePaintArray(t,o,c,g,w){this._setPaintValues(t,o,c.patterns&&c.patterns[this.layerId],w)}_setPaintValues(t,o,c,g){if(!g||!c)return;const{min:w,mid:T,max:A}=c,I=g[w],B=g[T],N=g[A];if(I&&B&&N)for(let V=t;V<o;V++)this.zoomInPaintVertexArray.emplace(V,B.tl[0],B.tl[1],B.br[0],B.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],B.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(V,B.tl[0],B.tl[1],B.br[0],B.br[1],N.tl[0],N.tl[1],N.br[0],N.br[1],B.pixelRatio,N.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Kr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Kr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Tn{constructor(t,o,c){this.binders={},this._buffers=[];const g=[];for(const w in t.paint._values){if(!c(w))continue;const T=t.paint.get(w);if(!(T instanceof As&&Go(T.property.specification)))continue;const A=af(w,t.type),I=T.value,B=T.property.specification.type,N=T.property.useIntegerZoom,V=T.property.specification["property-type"],H=V==="cross-faded"||V==="cross-faded-data-driven";if(I.kind==="constant")this.binders[w]=H?new Ai(I.value,A):new Cs(I.value,A,B),g.push(`/u_${w}`);else if(I.kind==="source"||H){const Q=nd(w,B,"source");this.binders[w]=H?new Mr(I,B,N,o,Q,t.id):new vi(I,A,B,Q),g.push(`/a_${w}`)}else{const Q=nd(w,B,"composite");this.binders[w]=new Oi(I,A,B,N,o,Q),g.push(`/z_${w}`)}}this.cacheKey=g.sort().join("")}getMaxValue(t){const o=this.binders[t];return o instanceof vi||o instanceof Oi?o.maxValue:0}populatePaintArrays(t,o,c,g,w){for(const T in this.binders){const A=this.binders[T];(A instanceof vi||A instanceof Oi||A instanceof Mr)&&A.populatePaintArray(t,o,c,g,w)}}setConstantPatternPositions(t,o){for(const c in this.binders){const g=this.binders[c];g instanceof Ai&&g.setConstantPatternPositions(t,o)}}updatePaintArrays(t,o,c,g,w){let T=!1;for(const A in t){const I=o.getPositions(A);for(const B of I){const N=c.feature(B.index);for(const V in this.binders){const H=this.binders[V];if((H instanceof vi||H instanceof Oi||H instanceof Mr)&&H.expression.isStateDependent===!0){const Q=g.paint.get(V);H.expression=Q.value,H.updatePaintArray(B.start,B.end,N,t[A],w),T=!0}}}}return T}defines(){const t=[];for(const o in this.binders){const c=this.binders[o];(c instanceof Cs||c instanceof Ai)&&t.push(...c.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return t}getBinderAttributes(){const t=[];for(const o in this.binders){const c=this.binders[o];if(c instanceof vi||c instanceof Oi)for(let g=0;g<c.paintVertexAttributes.length;g++)t.push(c.paintVertexAttributes[g].name);else if(c instanceof Mr)for(let g=0;g<Kr.members.length;g++)t.push(Kr.members[g].name)}return t}getBinderUniforms(){const t=[];for(const o in this.binders){const c=this.binders[o];if(c instanceof Cs||c instanceof Ai||c instanceof Oi)for(const g of c.uniformNames)t.push(g)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,o){const c=[];for(const g in this.binders){const w=this.binders[g];if(w instanceof Cs||w instanceof Ai||w instanceof Oi){for(const T of w.uniformNames)if(o[T]){const A=w.getBinding(t,o[T],T);c.push({name:T,property:g,binding:A})}}}return c}setUniforms(t,o,c,g){for(const{name:w,property:T,binding:A}of o)this.binders[T].setUniform(A,g,c.get(T),w)}updatePaintBuffers(t){this._buffers=[];for(const o in this.binders){const c=this.binders[o];if(t&&c instanceof Mr){const g=t.fromScale===2?c.zoomInPaintVertexBuffer:c.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(c instanceof vi||c instanceof Oi)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}}upload(t){for(const o in this.binders){const c=this.binders[o];(c instanceof vi||c instanceof Oi||c instanceof Mr)&&c.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const o=this.binders[t];(o instanceof vi||o instanceof Oi||o instanceof Mr)&&o.destroy()}}}class Ao{constructor(t,o,c=()=>!0){this.programConfigurations={};for(const g of t)this.programConfigurations[g.id]=new Tn(g,o,c);this.needsUpload=!1,this._featureMap=new ts,this._bufferOffset=0}populatePaintArrays(t,o,c,g,w,T){for(const A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(t,o,g,w,T);o.id!==void 0&&this._featureMap.add(o.id,c,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,o,c,g){for(const w of c)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(t,this._featureMap,o,w,g)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function af(s,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${t}-`,"").replace(/-/g,"_")]}function nd(s,t,o){const c={color:{source:al,composite:x},number:{source:v,composite:al}},g=function(w){return{"line-pattern":{source:$e,composite:$e},"fill-pattern":{source:$e,composite:$e},"fill-extrusion-pattern":{source:$e,composite:$e}}[w]}(s);return g&&g[o]||c[t][o]}Bt("ConstantBinder",Cs),Bt("CrossFadedConstantBinder",Ai),Bt("SourceExpressionBinder",vi),Bt("CrossFadedCompositeBinder",Mr),Bt("CompositeExpressionBinder",Oi),Bt("ProgramConfiguration",Tn,{omit:["_buffers"]}),Bt("ProgramConfigurationSet",Ao);const ih=Math.pow(2,14)-1,ad=-ih-1;function Ln(s){const t=Rt/s.extent,o=s.loadGeometry();for(let c=0;c<o.length;c++){const g=o[c];for(let w=0;w<g.length;w++){const T=g[w],A=Math.round(T.x*t),I=Math.round(T.y*t);T.x=er(A,ad,ih),T.y=er(I,ad,ih),(A<T.x||A>T.x+1||I<T.y||I>T.y+1)&&zr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function Es(s,t){return{type:s.type,id:s.id,properties:s.properties,geometry:t?Ln(s):[]}}const nh=-32768;function sd(s,t,o,c,g){s.emplaceBack(nh+8*t+c,nh+8*o+g)}class Jl{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ae,this.indexArray=new Tt,this.segments=new tr,this.programConfigurations=new Ao(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,c){const g=this.layers[0],w=[];let T=null,A=!1,I=g.type==="heatmap";if(g.type==="circle"){const N=g;T=N.layout.get("circle-sort-key"),A=!T.isConstant(),I=I||N.paint.get("circle-pitch-alignment")==="map"}const B=I?o.subdivisionGranularity.circle:1;for(const{feature:N,id:V,index:H,sourceLayerIndex:Q}of t){const J=this.layers[0]._featureFilter.needGeometry,ie=Es(N,J);if(!this.layers[0]._featureFilter.filter(new mr(this.zoom),ie,c))continue;const ce=A?T.evaluate(ie,{},c):void 0,ye={id:V,properties:N.properties,type:N.type,sourceLayerIndex:Q,index:H,geometry:J?ie.geometry:Ln(N),patterns:{},sortKey:ce};w.push(ye)}A&&w.sort((N,V)=>N.sortKey-V.sortKey);for(const N of w){const{geometry:V,index:H,sourceLayerIndex:Q}=N,J=t[H].feature;this.addFeature(N,V,H,c,B),o.featureIndex.insert(J,V,H,Q,this.index)}}update(t,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,gr),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,o,c,g,w=1){let T;switch(w){case 1:T=[0,7];break;case 3:T=[0,2,5,7];break;case 5:T=[0,1,3,4,6,7];break;case 7:T=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${w}; valid values are 1, 3, 5, 7.`)}const A=T.length;for(const I of o)for(const B of I){const N=B.x,V=B.y;if(N<0||N>=Rt||V<0||V>=Rt)continue;const H=this.segments.prepareSegment(A*A,this.layoutVertexArray,this.indexArray,t.sortKey),Q=H.vertexLength;for(let J=0;J<A;J++)for(let ie=0;ie<A;ie++)sd(this.layoutVertexArray,N,V,T[ie],T[J]);for(let J=0;J<A-1;J++)for(let ie=0;ie<A-1;ie++){const ce=Q+J*A+ie,ye=Q+(J+1)*A+ie;this.indexArray.emplaceBack(ce,ye+1,ce+1),this.indexArray.emplaceBack(ce,ye,ye+1)}H.vertexLength+=A*A,H.primitiveLength+=(A-1)*(A-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,{},g)}}function Xu(s,t){for(let o=0;o<s.length;o++)if(eu(t,s[o]))return!0;for(let o=0;o<t.length;o++)if(eu(s,t[o]))return!0;return!!od(s,t)}function Qu(s,t,o){return!!eu(s,t)||!!ld(t,s,o)}function sf(s,t){if(s.length===1)return of(t,s[0]);for(let o=0;o<t.length;o++){const c=t[o];for(let g=0;g<c.length;g++)if(eu(s,c[g]))return!0}for(let o=0;o<s.length;o++)if(of(t,s[o]))return!0;for(let o=0;o<t.length;o++)if(od(s,t[o]))return!0;return!1}function Wm(s,t,o){if(s.length>1){if(od(s,t))return!0;for(let c=0;c<t.length;c++)if(ld(t[c],s,o))return!0}for(let c=0;c<s.length;c++)if(ld(s[c],t,o))return!0;return!1}function od(s,t){if(s.length===0||t.length===0)return!1;for(let o=0;o<s.length-1;o++){const c=s[o],g=s[o+1];for(let w=0;w<t.length-1;w++)if(gp(c,g,t[w],t[w+1]))return!0}return!1}function gp(s,t,o,c){return pr(s,o,c)!==pr(t,o,c)&&pr(s,t,o)!==pr(s,t,c)}function ld(s,t,o){const c=o*o;if(t.length===1)return s.distSqr(t[0])<c;for(let g=1;g<t.length;g++)if(yp(s,t[g-1],t[g])<c)return!0;return!1}function yp(s,t,o){const c=t.distSqr(o);if(c===0)return s.distSqr(t);const g=((s.x-t.x)*(o.x-t.x)+(s.y-t.y)*(o.y-t.y))/c;return s.distSqr(g<0?t:g>1?o:o.sub(t)._mult(g)._add(t))}function of(s,t){for(let o=0;o<s.length;o++)if(eu(s[o],t))return!0;return!1}function eu(s,t){let o=!1;for(let c=0,g=s.length-1;c<s.length;g=c++){const w=s[c],T=s[g];w.y>t.y!=T.y>t.y&&t.x<(T.x-w.x)*(t.y-w.y)/(T.y-w.y)+w.x&&(o=!o)}return o}function ol(s,t,o){const c=o[0],g=o[2];if(s.x<c.x&&t.x<c.x||s.x>g.x&&t.x>g.x||s.y<c.y&&t.y<c.y||s.y>g.y&&t.y>g.y)return!1;const w=pr(s,t,o[0]);return w!==pr(s,t,o[1])||w!==pr(s,t,o[2])||w!==pr(s,t,o[3])}function Ju(s,t,o){const c=t.paint.get(s).value;return c.kind==="constant"?c.value:o.programConfigurations.get(t.id).getMaxValue(s)}function lf(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function ud(s,t,o,c,g){if(!t[0]&&!t[1])return s;const w=G.convert(t)._mult(g);o==="viewport"&&w._rotate(-c);const T=[];for(let A=0;A<s.length;A++)T.push(s[A].sub(w));return T}let uf,tu;Bt("CircleBucket",Jl,{omit:["layers"]});var ll={get paint(){return tu=tu||new Zn({"circle-radius":new Kt(oe.paint_circle["circle-radius"]),"circle-color":new Kt(oe.paint_circle["circle-color"]),"circle-blur":new Kt(oe.paint_circle["circle-blur"]),"circle-opacity":new Kt(oe.paint_circle["circle-opacity"]),"circle-translate":new $t(oe.paint_circle["circle-translate"]),"circle-translate-anchor":new $t(oe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new $t(oe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new $t(oe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Kt(oe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Kt(oe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Kt(oe.paint_circle["circle-stroke-opacity"])})},get layout(){return uf=uf||new Zn({"circle-sort-key":new Kt(oe.layout_circle["circle-sort-key"])})}};class ru extends Pa{constructor(t){super(t,ll)}createBucket(t){return new Jl(t)}queryRadius(t){const o=t;return Ju("circle-radius",this,o)+Ju("circle-stroke-width",this,o)+lf(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:t,feature:o,featureState:c,geometry:g,transform:w,pixelsToTileUnits:T,unwrappedTileID:A,getElevation:I}){const B=ud(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-w.bearingInRadians,T),N=this.paint.get("circle-radius").evaluate(o,c)+this.paint.get("circle-stroke-width").evaluate(o,c),V=this.paint.get("circle-pitch-alignment")==="map",H=V?B:function(J,ie,ce,ye){return J.map(ze=>Co(ze,ie,ce,ye))}(B,w,A,I),Q=V?N*T:N;for(const J of g)for(const ie of J){const ce=V?ie:Co(ie,w,A,I);let ye=Q;const ze=w.projectTileCoordinates(ie.x,ie.y,A,I).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ye*=ze/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ye*=w.cameraToCenterDistance/ze),Qu(H,ce,ye))return!0}return!1}}function Co(s,t,o,c){const g=t.projectTileCoordinates(s.x,s.y,o,c).point;return new G((.5*g.x+.5)*t.width,(.5*-g.y+.5)*t.height)}class cf extends Jl{}let hf;Bt("HeatmapBucket",cf,{omit:["layers"]});var cd={get paint(){return hf=hf||new Zn({"heatmap-radius":new Kt(oe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Kt(oe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new $t(oe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new rd(oe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new $t(oe.paint_heatmap["heatmap-opacity"])})}};function ah(s,{width:t,height:o},c,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==t*o*c)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${t*o*c}`)}else g=new Uint8Array(t*o*c);return s.width=t,s.height=o,s.data=g,s}function iu(s,{width:t,height:o},c){if(t===s.width&&o===s.height)return;const g=ah({},{width:t,height:o},c);Gn(s,g,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,t),height:Math.min(s.height,o)},c),s.width=t,s.height=o,s.data=g.data}function Gn(s,t,o,c,g,w){if(g.width===0||g.height===0)return t;if(g.width>s.width||g.height>s.height||o.x>s.width-g.width||o.y>s.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>t.width||g.height>t.height||c.x>t.width-g.width||c.y>t.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const T=s.data,A=t.data;if(T===A)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<g.height;I++){const B=((o.y+I)*s.width+o.x)*w,N=((c.y+I)*t.width+c.x)*w;for(let V=0;V<g.width*w;V++)A[N+V]=T[B+V]}return t}class nu{constructor(t,o){ah(this,t,1,o)}resize(t){iu(this,t,1)}clone(){return new nu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,c,g,w){Gn(t,o,c,g,w,1)}}class za{constructor(t,o){ah(this,t,4,o)}resize(t){iu(this,t,4)}replace(t,o){o?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new za({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,c,g,w){Gn(t,o,c,g,w,4)}}function ul(s){const t={},o=s.resolution||256,c=s.clips?s.clips.length:1,g=s.image||new za({width:o,height:c});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);const w=(T,A,I)=>{t[s.evaluationKey]=I;const B=s.expression.evaluate(t);g.data[T+A+0]=Math.floor(255*B.r/B.a),g.data[T+A+1]=Math.floor(255*B.g/B.a),g.data[T+A+2]=Math.floor(255*B.b/B.a),g.data[T+A+3]=Math.floor(255*B.a)};if(s.clips)for(let T=0,A=0;T<c;++T,A+=4*o)for(let I=0,B=0;I<o;I++,B+=4){const N=I/(o-1),{start:V,end:H}=s.clips[T];w(A,B,V*(1-N)+H*N)}else for(let T=0,A=0;T<o;T++,A+=4)w(0,A,T/(o-1));return g}Bt("AlphaImage",nu),Bt("RGBAImage",za);const hd="big-fb";class _p extends Pa{createBucket(t){return new cf(t)}constructor(t){super(t,cd),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ul({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(hd)&&this.heatmapFbos.delete(hd)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let cl;var au={get paint(){return cl=cl||new Zn({"hillshade-illumination-direction":new $t(oe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new $t(oe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new $t(oe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new $t(oe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new $t(oe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new $t(oe.paint_hillshade["hillshade-accent-color"])})}};class dd extends Pa{constructor(t){super(t,au)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const vp=Si([{name:"a_pos",components:2,type:"Int16"}],4),{members:xp}=vp;function ec(s,t,o){const c=o.patternDependencies;let g=!1;for(const w of t){const T=w.paint.get(`${s}-pattern`);T.isConstant()||(g=!0);const A=T.constantOr(null);A&&(g=!0,c[A.to]=!0,c[A.from]=!0)}return g}function tc(s,t,o,c,g){const w=g.patternDependencies;for(const T of t){const A=T.paint.get(`${s}-pattern`).value;if(A.kind!=="constant"){let I=A.evaluate({zoom:c-1},o,{},g.availableImages),B=A.evaluate({zoom:c},o,{},g.availableImages),N=A.evaluate({zoom:c+1},o,{},g.availableImages);I=I&&I.name?I.name:I,B=B&&B.name?B.name:B,N=N&&N.name?N.name:N,w[I]=!0,w[B]=!0,w[N]=!0,o.patterns[T.id]={min:I,mid:B,max:N}}}return o}function bp(s,t,o,c,g){let w;if(g===function(T,A,I,B){let N=0;for(let V=A,H=I-B;V<I;V+=B)N+=(T[H]-T[V])*(T[V+1]+T[H+1]),H=V;return N}(s,t,o,c)>0)for(let T=t;T<o;T+=c)w=Mp(T/c|0,s[T],s[T+1],w);else for(let T=o-c;T>=t;T-=c)w=Mp(T/c|0,s[T],s[T+1],w);return w&&uu(w,w.next)&&(Zi(w),w=w.next),w}function su(s,t){if(!s)return s;t||(t=s);let o,c=s;do if(o=!1,c.steiner||!uu(c,c.next)&&Ar(c.prev,c,c.next)!==0)c=c.next;else{if(Zi(c),c=t=c.prev,c===c.next)break;o=!0}while(o||c!==t);return t}function hl(s,t,o,c,g,w,T){if(!s)return;!T&&w&&function(I,B,N,V){let H=I;do H.z===0&&(H.z=df(H.x,H.y,B,N,V)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==I);H.prevZ.nextZ=null,H.prevZ=null,function(Q){let J,ie=1;do{let ce,ye=Q;Q=null;let ze=null;for(J=0;ye;){J++;let xe=ye,K=0;for(let Te=0;Te<ie&&(K++,xe=xe.nextZ,xe);Te++);let le=ie;for(;K>0||le>0&&xe;)K!==0&&(le===0||!xe||ye.z<=xe.z)?(ce=ye,ye=ye.nextZ,K--):(ce=xe,xe=xe.nextZ,le--),ze?ze.nextZ=ce:Q=ce,ce.prevZ=ze,ze=ce;ye=xe}ze.nextZ=null,ie*=2}while(J>1)}(H)}(s,c,g,w);let A=s;for(;s.prev!==s.next;){const I=s.prev,B=s.next;if(w?Km(s,c,g,w):ou(s))t.push(I.i,s.i,B.i),Zi(s),s=B.next,A=B.next;else if((s=B)===A){T?T===1?hl(s=Ym(su(s),t),t,o,c,g,w,2):T===2&&rc(s,t,o,c,g,w):hl(su(s),t,o,c,g,w,1);break}}}function ou(s){const t=s.prev,o=s,c=s.next;if(Ar(t,o,c)>=0)return!1;const g=t.x,w=o.x,T=c.x,A=t.y,I=o.y,B=c.y,N=Math.min(g,w,T),V=Math.min(A,I,B),H=Math.max(g,w,T),Q=Math.max(A,I,B);let J=c.next;for(;J!==t;){if(J.x>=N&&J.x<=H&&J.y>=V&&J.y<=Q&&lu(g,A,w,I,T,B,J.x,J.y)&&Ar(J.prev,J,J.next)>=0)return!1;J=J.next}return!0}function Km(s,t,o,c){const g=s.prev,w=s,T=s.next;if(Ar(g,w,T)>=0)return!1;const A=g.x,I=w.x,B=T.x,N=g.y,V=w.y,H=T.y,Q=Math.min(A,I,B),J=Math.min(N,V,H),ie=Math.max(A,I,B),ce=Math.max(N,V,H),ye=df(Q,J,t,o,c),ze=df(ie,ce,t,o,c);let xe=s.prevZ,K=s.nextZ;for(;xe&&xe.z>=ye&&K&&K.z<=ze;){if(xe.x>=Q&&xe.x<=ie&&xe.y>=J&&xe.y<=ce&&xe!==g&&xe!==T&&lu(A,N,I,V,B,H,xe.x,xe.y)&&Ar(xe.prev,xe,xe.next)>=0||(xe=xe.prevZ,K.x>=Q&&K.x<=ie&&K.y>=J&&K.y<=ce&&K!==g&&K!==T&&lu(A,N,I,V,B,H,K.x,K.y)&&Ar(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;xe&&xe.z>=ye;){if(xe.x>=Q&&xe.x<=ie&&xe.y>=J&&xe.y<=ce&&xe!==g&&xe!==T&&lu(A,N,I,V,B,H,xe.x,xe.y)&&Ar(xe.prev,xe,xe.next)>=0)return!1;xe=xe.prevZ}for(;K&&K.z<=ze;){if(K.x>=Q&&K.x<=ie&&K.y>=J&&K.y<=ce&&K!==g&&K!==T&&lu(A,N,I,V,B,H,K.x,K.y)&&Ar(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function Ym(s,t){let o=s;do{const c=o.prev,g=o.next.next;!uu(c,g)&&Sp(c,o,o.next,g)&&pd(c,g)&&pd(g,c)&&(t.push(c.i,o.i,g.i),Zi(o),Zi(o.next),o=s=g),o=o.next}while(o!==s);return su(o)}function rc(s,t,o,c,g,w){let T=s;do{let A=T.next.next;for(;A!==T.prev;){if(T.i!==A.i&&dl(T,A)){let I=Tp(T,A);return T=su(T,T.next),I=su(I,I.next),hl(T,t,o,c,g,w,0),void hl(I,t,o,c,g,w,0)}A=A.next}T=T.next}while(T!==s)}function ns(s,t){let o=s.x-t.x;return o===0&&(o=s.y-t.y,o===0)&&(o=(s.next.y-s.y)/(s.next.x-s.x)-(t.next.y-t.y)/(t.next.x-t.x)),o}function Xm(s,t){const o=function(g,w){let T=w;const A=g.x,I=g.y;let B,N=-1/0;if(uu(g,T))return T;do{if(uu(g,T.next))return T.next;if(I<=T.y&&I>=T.next.y&&T.next.y!==T.y){const ie=T.x+(I-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(ie<=A&&ie>N&&(N=ie,B=T.x<T.next.x?T:T.next,ie===A))return B}T=T.next}while(T!==w);if(!B)return null;const V=B,H=B.x,Q=B.y;let J=1/0;T=B;do{if(A>=T.x&&T.x>=H&&A!==T.x&&ff(I<Q?A:N,I,H,Q,I<Q?N:A,I,T.x,T.y)){const ie=Math.abs(I-T.y)/(A-T.x);pd(T,g)&&(ie<J||ie===J&&(T.x>B.x||T.x===B.x&&Qm(B,T)))&&(B=T,J=ie)}T=T.next}while(T!==V);return B}(s,t);if(!o)return t;const c=Tp(o,s);return su(c,c.next),su(o,o.next)}function Qm(s,t){return Ar(s.prev,s,t.prev)<0&&Ar(t.next,s,s.next)<0}function df(s,t,o,c,g){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-o)*g|0)|s<<8))|s<<4))|s<<2))|s<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-c)*g|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function wp(s){let t=s,o=s;do(t.x<o.x||t.x===o.x&&t.y<o.y)&&(o=t),t=t.next;while(t!==s);return o}function ff(s,t,o,c,g,w,T,A){return(g-T)*(t-A)>=(s-T)*(w-A)&&(s-T)*(c-A)>=(o-T)*(t-A)&&(o-T)*(w-A)>=(g-T)*(c-A)}function lu(s,t,o,c,g,w,T,A){return!(s===T&&t===A)&&ff(s,t,o,c,g,w,T,A)}function dl(s,t){return s.next.i!==t.i&&s.prev.i!==t.i&&!function(o,c){let g=o;do{if(g.i!==o.i&&g.next.i!==o.i&&g.i!==c.i&&g.next.i!==c.i&&Sp(g,g.next,o,c))return!0;g=g.next}while(g!==o);return!1}(s,t)&&(pd(s,t)&&pd(t,s)&&function(o,c){let g=o,w=!1;const T=(o.x+c.x)/2,A=(o.y+c.y)/2;do g.y>A!=g.next.y>A&&g.next.y!==g.y&&T<(g.next.x-g.x)*(A-g.y)/(g.next.y-g.y)+g.x&&(w=!w),g=g.next;while(g!==o);return w}(s,t)&&(Ar(s.prev,s,t.prev)||Ar(s,t.prev,t))||uu(s,t)&&Ar(s.prev,s,s.next)>0&&Ar(t.prev,t,t.next)>0)}function Ar(s,t,o){return(t.y-s.y)*(o.x-t.x)-(t.x-s.x)*(o.y-t.y)}function uu(s,t){return s.x===t.x&&s.y===t.y}function Sp(s,t,o,c){const g=fd(Ar(s,t,o)),w=fd(Ar(s,t,c)),T=fd(Ar(o,c,s)),A=fd(Ar(o,c,t));return g!==w&&T!==A||!(g!==0||!pn(s,o,t))||!(w!==0||!pn(s,c,t))||!(T!==0||!pn(o,s,c))||!(A!==0||!pn(o,t,c))}function pn(s,t,o){return t.x<=Math.max(s.x,o.x)&&t.x>=Math.min(s.x,o.x)&&t.y<=Math.max(s.y,o.y)&&t.y>=Math.min(s.y,o.y)}function fd(s){return s>0?1:s<0?-1:0}function pd(s,t){return Ar(s.prev,s,s.next)<0?Ar(s,t,s.next)>=0&&Ar(s,s.prev,t)>=0:Ar(s,t,s.prev)<0||Ar(s,s.next,t)<0}function Tp(s,t){const o=_a(s.i,s.x,s.y),c=_a(t.i,t.x,t.y),g=s.next,w=t.prev;return s.next=t,t.prev=s,o.next=g,g.prev=o,c.next=o,o.prev=c,w.next=c,c.prev=w,c}function Mp(s,t,o,c){const g=_a(s,t,o);return c?(g.next=c.next,g.prev=c,c.next.prev=g,c.next=g):(g.prev=g,g.next=g),g}function Zi(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function _a(s,t,o){return{i:s,x:t,y:o,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class La{constructor(t,o){if(o>t)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=t,this._minGranularity=o}getGranularityForZoomLevel(t){return Math.max(Math.floor(this._baseZoomGranularity/(1<<t)),this._minGranularity,1)}}class md{constructor(t){this.fill=t.fill,this.line=t.line,this.tile=t.tile,this.stencil=t.stencil,this.circle=t.circle}}md.noSubdivision=new md({fill:new La(0,0),line:new La(0,0),tile:new La(0,0),stencil:new La(0,0),circle:1}),Bt("SubdivisionGranularityExpression",La),Bt("SubdivisionGranularitySetting",md);const ic=-32768,gd=32767;class Ap{constructor(t,o){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=t,this._granularityCellSize=Rt/t,this._canonical=o}_getKey(t,o){return(t+=32768)<<16|(o+=32768)<<0}_vertexToIndex(t,o){if(t<-32768||o<-32768||t>32767||o>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const c=0|Math.round(t),g=0|Math.round(o),w=this._getKey(c,g);if(this._vertexDictionary.has(w))return this._vertexDictionary.get(w);const T=this._vertexBuffer.length/2;return this._vertexDictionary.set(w,T),this._vertexBuffer.push(c,g),T}_subdivideTrianglesScanline(t){if(this._granularity<2)return function(g,w){const T=[];for(let A=0;A<w.length;A+=3){const I=w[A],B=w[A+1],N=w[A+2],V=g[2*I],H=g[2*I+1];(g[2*B]-V)*(g[2*N+1]-H)-(g[2*B+1]-H)*(g[2*N]-V)>0?(T.push(I),T.push(N),T.push(B)):(T.push(I),T.push(B),T.push(N))}return T}(this._vertexBuffer,t);const o=[],c=t.length;for(let g=0;g<c;g+=3){const w=[t[g+0],t[g+1],t[g+2]],T=[this._vertexBuffer[2*t[g+0]+0],this._vertexBuffer[2*t[g+0]+1],this._vertexBuffer[2*t[g+1]+0],this._vertexBuffer[2*t[g+1]+1],this._vertexBuffer[2*t[g+2]+0],this._vertexBuffer[2*t[g+2]+1]];let A=1/0,I=1/0,B=-1/0,N=-1/0;for(let ie=0;ie<3;ie++){const ce=T[2*ie],ye=T[2*ie+1];A=Math.min(A,ce),B=Math.max(B,ce),I=Math.min(I,ye),N=Math.max(N,ye)}if(A===B||I===N)continue;const V=Math.floor(A/this._granularityCellSize),H=Math.ceil(B/this._granularityCellSize),Q=Math.floor(I/this._granularityCellSize),J=Math.ceil(N/this._granularityCellSize);if(V!==H||Q!==J)for(let ie=Q;ie<J;ie++){const ce=this._scanlineGenerateVertexRingForCellRow(ie,T,w);Jm(this._vertexBuffer,ce,o)}else o.push(...w)}return o}_scanlineGenerateVertexRingForCellRow(t,o,c){const g=t*this._granularityCellSize,w=g+this._granularityCellSize,T=[];for(let A=0;A<3;A++){const I=o[2*A],B=o[2*A+1],N=o[2*(A+1)%6],V=o[(2*(A+1)+1)%6],H=o[2*(A+2)%6],Q=o[(2*(A+2)+1)%6],J=N-I,ie=V-B,ce=J===0,ye=ie===0,ze=(g-B)/ie,xe=(w-B)/ie,K=Math.min(ze,xe),le=Math.max(ze,xe);if(!ye&&(K>=1||le<=0)||ye&&(B<g||B>w)){V>=g&&V<=w&&T.push(c[(A+1)%3]);continue}!ye&&K>0&&T.push(this._vertexToIndex(I+J*K,B+ie*K));const Te=I+J*Math.max(K,0),Ge=I+J*Math.min(le,1);ce||this._generateIntraEdgeVertices(T,I,B,N,V,Te,Ge),!ye&&le<1&&T.push(this._vertexToIndex(I+J*le,B+ie*le)),(ye||V>=g&&V<=w)&&T.push(c[(A+1)%3]),!ye&&(V<=g||V>=w)&&this._generateInterEdgeVertices(T,I,B,N,V,H,Q,Ge,g,w)}return T}_generateIntraEdgeVertices(t,o,c,g,w,T,A){const I=g-o,B=w-c,N=B===0,V=N?Math.min(o,g):Math.min(T,A),H=N?Math.max(o,g):Math.max(T,A),Q=Math.floor(V/this._granularityCellSize)+1,J=Math.ceil(H/this._granularityCellSize)-1;if(N?o<g:T<A)for(let ie=Q;ie<=J;ie++){const ce=ie*this._granularityCellSize;t.push(this._vertexToIndex(ce,c+B*(ce-o)/I))}else for(let ie=J;ie>=Q;ie--){const ce=ie*this._granularityCellSize;t.push(this._vertexToIndex(ce,c+B*(ce-o)/I))}}_generateInterEdgeVertices(t,o,c,g,w,T,A,I,B,N){const V=w-c,H=T-g,Q=A-w,J=(B-w)/Q,ie=(N-w)/Q,ce=Math.min(J,ie),ye=Math.max(J,ie),ze=g+H*ce;let xe=Math.floor(Math.min(ze,I)/this._granularityCellSize)+1,K=Math.ceil(Math.max(ze,I)/this._granularityCellSize)-1,le=I<ze;const Te=Q===0;if(Te&&(A===B||A===N))return;if(Te||ce>=1||ye<=0){const mt=c-A,Xe=T+(o-T)*Math.min((B-A)/mt,(N-A)/mt);xe=Math.floor(Math.min(Xe,I)/this._granularityCellSize)+1,K=Math.ceil(Math.max(Xe,I)/this._granularityCellSize)-1,le=I<Xe}const Ge=V>0?N:B;if(le)for(let mt=xe;mt<=K;mt++)t.push(this._vertexToIndex(mt*this._granularityCellSize,Ge));else for(let mt=K;mt>=xe;mt--)t.push(this._vertexToIndex(mt*this._granularityCellSize,Ge))}_generateOutline(t){const o=[];for(const c of t){const g=ia(c,this._granularity,!0),w=this._pointArrayToIndices(g),T=[];for(let A=1;A<w.length;A++)T.push(w[A-1]),T.push(w[A]);o.push(T)}return o}_handlePoles(t){let o=!1,c=!1;this._canonical&&(this._canonical.y===0&&(o=!0),this._canonical.y===(1<<this._canonical.z)-1&&(c=!0)),(o||c)&&this._fillPoles(t,o,c)}_ensureNoPoleVertices(){const t=this._vertexBuffer;for(let o=0;o<t.length;o+=2){const c=t[o+1];c===ic&&(t[o+1]=-32767),c===gd&&(t[o+1]=32766)}}_generatePoleQuad(t,o,c,g,w,T){g>w!=(T===ic)?(t.push(o),t.push(c),t.push(this._vertexToIndex(g,T)),t.push(c),t.push(this._vertexToIndex(w,T)),t.push(this._vertexToIndex(g,T))):(t.push(c),t.push(o),t.push(this._vertexToIndex(g,T)),t.push(this._vertexToIndex(w,T)),t.push(c),t.push(this._vertexToIndex(g,T)))}_fillPoles(t,o,c){const g=this._vertexBuffer,w=Rt,T=t.length;for(let A=2;A<T;A+=3){const I=t[A-2],B=t[A-1],N=t[A],V=g[2*I],H=g[2*I+1],Q=g[2*B],J=g[2*B+1],ie=g[2*N],ce=g[2*N+1];o&&(H===0&&J===0&&this._generatePoleQuad(t,I,B,V,Q,ic),J===0&&ce===0&&this._generatePoleQuad(t,B,N,Q,ie,ic),ce===0&&H===0&&this._generatePoleQuad(t,N,I,ie,V,ic)),c&&(H===w&&J===w&&this._generatePoleQuad(t,I,B,V,Q,gd),J===w&&ce===w&&this._generatePoleQuad(t,B,N,Q,ie,gd),ce===w&&H===w&&this._generatePoleQuad(t,N,I,ie,V,gd))}}_initializeVertices(t){for(let o=0;o<t.length;o+=2)this._vertexToIndex(t[o],t[o+1])}subdividePolygonInternal(t,o){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:c,holeIndices:g}=function(A){const I=[],B=[];for(const N of A)if(N.length!==0){N!==A[0]&&I.push(B.length/2);for(let V=0;V<N.length;V++)B.push(N[V].x),B.push(N[V].y)}return{flattened:B,holeIndices:I}}(t);let w;this._initializeVertices(c);try{const A=function(B,N,V=2){const H=N&&N.length,Q=H?N[0]*V:B.length;let J=bp(B,0,Q,V,!0);const ie=[];if(!J||J.next===J.prev)return ie;let ce,ye,ze;if(H&&(J=function(xe,K,le,Te){const Ge=[];for(let mt=0,Xe=K.length;mt<Xe;mt++){const it=bp(xe,K[mt]*Te,mt<Xe-1?K[mt+1]*Te:xe.length,Te,!1);it===it.next&&(it.steiner=!0),Ge.push(wp(it))}Ge.sort(ns);for(let mt=0;mt<Ge.length;mt++)le=Xm(Ge[mt],le);return le}(B,N,J,V)),B.length>80*V){ce=1/0,ye=1/0;let xe=-1/0,K=-1/0;for(let le=V;le<Q;le+=V){const Te=B[le],Ge=B[le+1];Te<ce&&(ce=Te),Ge<ye&&(ye=Ge),Te>xe&&(xe=Te),Ge>K&&(K=Ge)}ze=Math.max(xe-ce,K-ye),ze=ze!==0?32767/ze:0}return hl(J,ie,V,ce,ye,ze,0),ie}(c,g),I=this._convertIndices(c,A);w=this._subdivideTrianglesScanline(I)}catch(A){console.error(A)}let T=[];return o&&(T=this._generateOutline(t)),this._ensureNoPoleVertices(),this._handlePoles(w),{verticesFlattened:this._vertexBuffer,indicesTriangles:w,indicesLineList:T}}_convertIndices(t,o){const c=[];for(let g=0;g<o.length;g++)c.push(this._vertexToIndex(t[2*o[g]],t[2*o[g]+1]));return c}_pointArrayToIndices(t){const o=[];for(let c=0;c<t.length;c++){const g=t[c];o.push(this._vertexToIndex(g.x,g.y))}return o}}function as(s,t,o,c=!0){return new Ap(o,t).subdividePolygonInternal(s,c)}function ia(s,t,o=!1){if(!s||s.length<1)return[];if(s.length<2)return[];const c=s[0],g=s[s.length-1],w=o&&(c.x!==g.x||c.y!==g.y);if(t<2)return w?[...s,s[0]]:[...s];const T=Math.floor(Rt/t),A=[];A.push(new G(s[0].x,s[0].y));const I=s.length,B=w?I:I-1;for(let N=0;N<B;N++){const V=s[N],H=N<I-1?s[N+1]:s[0],Q=V.x,J=V.y,ie=H.x,ce=H.y,ye=Q!==ie,ze=J!==ce;if(!ye&&!ze)continue;const xe=ie-Q,K=ce-J,le=Math.abs(xe),Te=Math.abs(K);let Ge=Q,mt=J;for(;;){const it=xe>0?(Math.floor(Ge/T)+1)*T:(Math.ceil(Ge/T)-1)*T,bt=K>0?(Math.floor(mt/T)+1)*T:(Math.ceil(mt/T)-1)*T,gt=Math.abs(Ge-it),St=Math.abs(mt-bt),st=Math.abs(Ge-ie),Ot=Math.abs(mt-ce),Yt=ye?gt/le:Number.POSITIVE_INFINITY,qt=ze?St/Te:Number.POSITIVE_INFINITY;if((st<=gt||!ye)&&(Ot<=St||!ze))break;if(Yt<qt&&ye||!ze){Ge=it,mt+=K*Yt;const jt=new G(Ge,Math.round(mt));A[A.length-1].x===jt.x&&A[A.length-1].y===jt.y||A.push(jt)}else{Ge+=xe*qt,mt=bt;const jt=new G(Math.round(Ge),mt);A[A.length-1].x===jt.x&&A[A.length-1].y===jt.y||A.push(jt)}}const Xe=new G(ie,ce);A[A.length-1].x===Xe.x&&A[A.length-1].y===Xe.y||A.push(Xe)}return A}function Jm(s,t,o){if(t.length===0)throw new Error("Subdivision vertex ring is empty.");let c=0,g=s[2*t[0]];for(let I=1;I<t.length;I++){const B=s[2*t[I]];B<g&&(g=B,c=I)}const w=t.length;let T=c,A=(T+1)%w;for(;;){const I=T-1>=0?T-1:w-1,B=(A+1)%w,N=s[2*t[I]],V=s[2*t[B]],H=s[2*t[T]],Q=s[2*t[T]+1],J=s[2*t[A]+1];let ie=!1;if(N<V)ie=!0;else if(N>V)ie=!1;else{const ce=J-Q,ye=-(s[2*t[A]]-H),ze=Q<J?1:-1;((N-H)*ce+(s[2*t[I]+1]-Q)*ye)*ze>((V-H)*ce+(s[2*t[B]+1]-Q)*ye)*ze&&(ie=!0)}if(ie){const ce=t[I],ye=t[T],ze=t[A];ce!==ye&&ce!==ze&&ye!==ze&&o.push(ze,ye,ce),T--,T<0&&(T=w-1)}else{const ce=t[B],ye=t[T],ze=t[A];ce!==ye&&ce!==ze&&ye!==ze&&o.push(ze,ye,ce),A++,A>=w&&(A=0)}if(I===B)break}}function ss(s,t,o,c,g,w,T,A,I){const B=g.length/2,N=T&&A&&I;if(B<tr.MAX_VERTEX_ARRAY_LENGTH){const V=t.prepareSegment(B,o,c),H=V.vertexLength;for(let ie=0;ie<w.length;ie+=3)c.emplaceBack(H+w[ie],H+w[ie+1],H+w[ie+2]);let Q,J;V.vertexLength+=B,V.primitiveLength+=w.length/3,N&&(J=T.prepareSegment(B,o,A),Q=J.vertexLength,J.vertexLength+=B);for(let ie=0;ie<g.length;ie+=2)s(g[ie],g[ie+1]);if(N)for(let ie=0;ie<I.length;ie++){const ce=I[ie];for(let ye=1;ye<ce.length;ye+=2)A.emplaceBack(Q+ce[ye-1],Q+ce[ye]);J.primitiveLength+=ce.length/2}}else(function(V,H,Q,J,ie,ce){const ye=[];for(let Te=0;Te<J.length/2;Te++)ye.push(-1);const ze={count:0};let xe=0,K=V.getOrCreateLatestSegment(H,Q),le=K.vertexLength;for(let Te=2;Te<ie.length;Te+=3){const Ge=ie[Te-2],mt=ie[Te-1],Xe=ie[Te];let it=ye[Ge]<xe,bt=ye[mt]<xe,gt=ye[Xe]<xe;K.vertexLength+((it?1:0)+(bt?1:0)+(gt?1:0))>tr.MAX_VERTEX_ARRAY_LENGTH&&(K=V.createNewSegment(H,Q),xe=ze.count,it=!0,bt=!0,gt=!0,le=0);const St=sh(ye,J,ce,ze,Ge,it,K),st=sh(ye,J,ce,ze,mt,bt,K),Ot=sh(ye,J,ce,ze,Xe,gt,K);Q.emplaceBack(le+St-xe,le+st-xe,le+Ot-xe),K.primitiveLength++}})(t,o,c,g,w,s),N&&function(V,H,Q,J,ie,ce){const ye=[];for(let Te=0;Te<J.length/2;Te++)ye.push(-1);const ze={count:0};let xe=0,K=V.getOrCreateLatestSegment(H,Q),le=K.vertexLength;for(let Te=0;Te<ie.length;Te++){const Ge=ie[Te];for(let mt=1;mt<ie[Te].length;mt+=2){const Xe=Ge[mt-1],it=Ge[mt];let bt=ye[Xe]<xe,gt=ye[it]<xe;K.vertexLength+((bt?1:0)+(gt?1:0))>tr.MAX_VERTEX_ARRAY_LENGTH&&(K=V.createNewSegment(H,Q),xe=ze.count,bt=!0,gt=!0,le=0);const St=sh(ye,J,ce,ze,Xe,bt,K),st=sh(ye,J,ce,ze,it,gt,K);Q.emplaceBack(le+St-xe,le+st-xe),K.primitiveLength++}}}(T,o,A,g,I,s),t.forceNewSegmentOnNextPrepare(),T==null||T.forceNewSegmentOnNextPrepare()}function sh(s,t,o,c,g,w,T){if(w){const A=c.count;return o(t[2*g],t[2*g+1]),s[g]=c.count,c.count++,T.vertexLength++,A}return s[g]}class Ws{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ee,this.indexArray=new Tt,this.indexArray2=new pt,this.programConfigurations=new Ao(t.layers,t.zoom),this.segments=new tr,this.segments2=new tr,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,c){this.hasPattern=ec("fill",this.layers,o);const g=this.layers[0].layout.get("fill-sort-key"),w=!g.isConstant(),T=[];for(const{feature:A,id:I,index:B,sourceLayerIndex:N}of t){const V=this.layers[0]._featureFilter.needGeometry,H=Es(A,V);if(!this.layers[0]._featureFilter.filter(new mr(this.zoom),H,c))continue;const Q=w?g.evaluate(H,{},c,o.availableImages):void 0,J={id:I,properties:A.properties,type:A.type,sourceLayerIndex:N,index:B,geometry:V?H.geometry:Ln(A),patterns:{},sortKey:Q};T.push(J)}w&&T.sort((A,I)=>A.sortKey-I.sortKey);for(const A of T){const{geometry:I,index:B,sourceLayerIndex:N}=A;if(this.hasPattern){const V=tc("fill",this.layers,A,this.zoom,o);this.patternFeatures.push(V)}else this.addFeature(A,I,B,c,{},o.subdivisionGranularity);o.featureIndex.insert(t[B].feature,I,B,N,this.index)}}update(t,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,c)}addFeatures(t,o,c){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,o,c,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,xp),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,o,c,g,w,T){for(const A of zc(o,500)){const I=as(A,g,T.fill.getGranularityForZoomLevel(g.z)),B=this.layoutVertexArray;ss((N,V)=>{B.emplaceBack(N,V)},this.segments,this.layoutVertexArray,this.indexArray,I.verticesFlattened,I.indicesTriangles,this.segments2,this.indexArray2,I.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,w,g)}}let nc,fl;Bt("FillBucket",Ws,{omit:["layers","patternFeatures"]});var Cp={get paint(){return fl=fl||new Zn({"fill-antialias":new $t(oe.paint_fill["fill-antialias"]),"fill-opacity":new Kt(oe.paint_fill["fill-opacity"]),"fill-color":new Kt(oe.paint_fill["fill-color"]),"fill-outline-color":new Kt(oe.paint_fill["fill-outline-color"]),"fill-translate":new $t(oe.paint_fill["fill-translate"]),"fill-translate-anchor":new $t(oe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Wl(oe.paint_fill["fill-pattern"])})},get layout(){return nc=nc||new Zn({"fill-sort-key":new Kt(oe.layout_fill["fill-sort-key"])})}};class Ep extends Pa{constructor(t){super(t,Cp)}recalculate(t,o){super.recalculate(t,o);const c=this.paint._values["fill-outline-color"];c.value.kind==="constant"&&c.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Ws(t)}queryRadius(){return lf(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:t,geometry:o,transform:c,pixelsToTileUnits:g}){return sf(ud(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-c.bearingInRadians,g),o)}isTileClipped(){return!0}}const cu=Si([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),eg=Si([{name:"a_centroid",components:2,type:"Int16"}],4),{members:oh}=cu;var ac,lh,hu,Pp,pf,uh,Rp,sc={};function Ip(){if(lh)return ac;lh=1;var s=O();function t(g,w,T,A,I){this.properties={},this.extent=T,this.type=0,this._pbf=g,this._geometry=-1,this._keys=A,this._values=I,g.readFields(o,this,w)}function o(g,w,T){g==1?w.id=T.readVarint():g==2?function(A,I){for(var B=A.readVarint()+A.pos;A.pos<B;){var N=I._keys[A.readVarint()],V=I._values[A.readVarint()];I.properties[N]=V}}(T,w):g==3?w.type=T.readVarint():g==4&&(w._geometry=T.pos)}function c(g){for(var w,T,A=0,I=0,B=g.length,N=B-1;I<B;N=I++)A+=((T=g[N]).x-(w=g[I]).x)*(w.y+T.y);return A}return ac=t,t.types=["Unknown","Point","LineString","Polygon"],t.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var w,T=g.readVarint()+g.pos,A=1,I=0,B=0,N=0,V=[];g.pos<T;){if(I<=0){var H=g.readVarint();A=7&H,I=H>>3}if(I--,A===1||A===2)B+=g.readSVarint(),N+=g.readSVarint(),A===1&&(w&&V.push(w),w=[]),w.push(new s(B,N));else{if(A!==7)throw new Error("unknown command "+A);w&&w.push(w[0].clone())}}return w&&V.push(w),V},t.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var w=g.readVarint()+g.pos,T=1,A=0,I=0,B=0,N=1/0,V=-1/0,H=1/0,Q=-1/0;g.pos<w;){if(A<=0){var J=g.readVarint();T=7&J,A=J>>3}if(A--,T===1||T===2)(I+=g.readSVarint())<N&&(N=I),I>V&&(V=I),(B+=g.readSVarint())<H&&(H=B),B>Q&&(Q=B);else if(T!==7)throw new Error("unknown command "+T)}return[N,H,V,Q]},t.prototype.toGeoJSON=function(g,w,T){var A,I,B=this.extent*Math.pow(2,T),N=this.extent*g,V=this.extent*w,H=this.loadGeometry(),Q=t.types[this.type];function J(ye){for(var ze=0;ze<ye.length;ze++){var xe=ye[ze];ye[ze]=[360*(xe.x+N)/B-180,360/Math.PI*Math.atan(Math.exp((180-360*(xe.y+V)/B)*Math.PI/180))-90]}}switch(this.type){case 1:var ie=[];for(A=0;A<H.length;A++)ie[A]=H[A][0];J(H=ie);break;case 2:for(A=0;A<H.length;A++)J(H[A]);break;case 3:for(H=function(ye){var ze=ye.length;if(ze<=1)return[ye];for(var xe,K,le=[],Te=0;Te<ze;Te++){var Ge=c(ye[Te]);Ge!==0&&(K===void 0&&(K=Ge<0),K===Ge<0?(xe&&le.push(xe),xe=[ye[Te]]):xe.push(ye[Te]))}return xe&&le.push(xe),le}(H),A=0;A<H.length;A++)for(I=0;I<H[A].length;I++)J(H[A][I])}H.length===1?H=H[0]:Q="Multi"+Q;var ce={type:"Feature",geometry:{type:Q,coordinates:H},properties:this.properties};return"id"in this&&(ce.id=this.id),ce},ac}function tg(){if(Pp)return hu;Pp=1;var s=Ip();function t(c,g){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(o,this,g),this.length=this._features.length}function o(c,g,w){c===15?g.version=w.readVarint():c===1?g.name=w.readString():c===5?g.extent=w.readVarint():c===2?g._features.push(w.pos):c===3?g._keys.push(w.readString()):c===4&&g._values.push(function(T){for(var A=null,I=T.readVarint()+T.pos;T.pos<I;){var B=T.readVarint()>>3;A=B===1?T.readString():B===2?T.readFloat():B===3?T.readDouble():B===4?T.readVarint64():B===5?T.readVarint():B===6?T.readSVarint():B===7?T.readBoolean():null}return A}(w))}return hu=t,t.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var g=this._pbf.readVarint()+this._pbf.pos;return new s(this._pbf,g,this.extent,this._keys,this._values)},hu}function os(){return Rp||(Rp=1,sc.VectorTile=function(){if(uh)return pf;uh=1;var s=tg();function t(o,c,g){if(o===3){var w=new s(g,g.readVarint()+g.pos);w.length&&(c[w.name]=w)}}return pf=function(o,c){this.layers=o.readFields(t,{},c)},pf}(),sc.VectorTileFeature=Ip(),sc.VectorTileLayer=tg()),sc}var oc=C(os());const du=oc.VectorTileFeature.types,mf=Math.pow(2,13);function fu(s,t,o,c,g,w,T,A){s.emplaceBack(t,o,2*Math.floor(c*mf)+T,g*mf*2,w*mf*2,Math.round(A))}class pl{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Pe,this.centroidVertexArray=new ve,this.indexArray=new Tt,this.programConfigurations=new Ao(t.layers,t.zoom),this.segments=new tr,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,c){this.features=[],this.hasPattern=ec("fill-extrusion",this.layers,o);for(const{feature:g,id:w,index:T,sourceLayerIndex:A}of t){const I=this.layers[0]._featureFilter.needGeometry,B=Es(g,I);if(!this.layers[0]._featureFilter.filter(new mr(this.zoom),B,c))continue;const N={id:w,sourceLayerIndex:A,index:T,geometry:I?B.geometry:Ln(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(tc("fill-extrusion",this.layers,N,this.zoom,o)):this.addFeature(N,N.geometry,T,c,{},o.subdivisionGranularity),o.featureIndex.insert(g,N.geometry,T,A,this.index,!0)}}addFeatures(t,o,c){for(const g of this.features){const{geometry:w}=g;this.addFeature(g,w,g.index,o,c,t.subdivisionGranularity)}}update(t,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,oh),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,eg.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,o,c,g,w,T){for(const A of zc(o,500)){const I={x:0,y:0,sampleCount:0},B=this.layoutVertexArray.length;this.processPolygon(I,g,t,A,T);const N=this.layoutVertexArray.length-B,V=Math.floor(I.x/I.sampleCount),H=Math.floor(I.y/I.sampleCount);for(let Q=0;Q<N;Q++)this.centroidVertexArray.emplaceBack(V,H)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,w,g)}processPolygon(t,o,c,g,w){if(g.length<1||gf(g[0]))return;for(const V of g)V.length!==0&&rg(t,V);const T={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},A=w.fill.getGranularityForZoomLevel(o.z),I=du[c.type]==="Polygon";for(const V of g){if(V.length===0||gf(V))continue;const H=ia(V,A,I);this._generateSideFaces(H,T)}if(!I)return;const B=as(g,o,A,!1),N=this.layoutVertexArray;ss((V,H)=>{fu(N,V,H,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,B.verticesFlattened,B.indicesTriangles)}_generateSideFaces(t,o){let c=0;for(let g=1;g<t.length;g++){const w=t[g],T=t[g-1];if(Dp(w,T))continue;o.segment.vertexLength+4>tr.MAX_VERTEX_ARRAY_LENGTH&&(o.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const A=w.sub(T)._perp()._unit(),I=T.dist(w);c+I>32768&&(c=0),fu(this.layoutVertexArray,w.x,w.y,A.x,A.y,0,0,c),fu(this.layoutVertexArray,w.x,w.y,A.x,A.y,0,1,c),c+=I,fu(this.layoutVertexArray,T.x,T.y,A.x,A.y,0,0,c),fu(this.layoutVertexArray,T.x,T.y,A.x,A.y,0,1,c);const B=o.segment.vertexLength;this.indexArray.emplaceBack(B,B+2,B+1),this.indexArray.emplaceBack(B+1,B+2,B+3),o.segment.vertexLength+=4,o.segment.primitiveLength+=2}}}function rg(s,t){for(let o=0;o<t.length;o++){const c=t[o];o===t.length-1&&t[0].x===c.x&&t[0].y===c.y||(s.x+=c.x,s.y+=c.y,s.sampleCount++)}}function Dp(s,t){return s.x===t.x&&(s.x<0||s.x>Rt)||s.y===t.y&&(s.y<0||s.y>Rt)}function gf(s){return s.every(t=>t.x<0)||s.every(t=>t.x>Rt)||s.every(t=>t.y<0)||s.every(t=>t.y>Rt)}let Eo;Bt("FillExtrusionBucket",pl,{omit:["layers","features"]});var ig={get paint(){return Eo=Eo||new Zn({"fill-extrusion-opacity":new $t(oe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Kt(oe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new $t(oe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new $t(oe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Wl(oe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Kt(oe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Kt(oe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new $t(oe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class yf extends Pa{constructor(t){super(t,ig)}createBucket(t){return new pl(t)}queryRadius(){return lf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:t,feature:o,featureState:c,geometry:g,transform:w,pixelsToTileUnits:T,pixelPosMatrix:A}){const I=ud(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-w.bearingInRadians,T),B=this.paint.get("fill-extrusion-height").evaluate(o,c),N=this.paint.get("fill-extrusion-base").evaluate(o,c),V=function(Q,J,ie){const ce=[];for(const ye of Q){const ze=[ye.x,ye.y,0,1];Xt(ze,ze,J),ce.push(new G(ze[0]/ze[3],ze[1]/ze[3]))}return ce}(I,A),H=function(Q,J,ie,ce){const ye=[],ze=[],xe=ce[8]*J,K=ce[9]*J,le=ce[10]*J,Te=ce[11]*J,Ge=ce[8]*ie,mt=ce[9]*ie,Xe=ce[10]*ie,it=ce[11]*ie;for(const bt of Q){const gt=[],St=[];for(const st of bt){const Ot=st.x,Yt=st.y,qt=ce[0]*Ot+ce[4]*Yt+ce[12],jt=ce[1]*Ot+ce[5]*Yt+ce[13],fr=ce[2]*Ot+ce[6]*Yt+ce[14],ai=ce[3]*Ot+ce[7]*Yt+ce[15],ji=fr+le,nn=ai+Te,Mn=qt+Ge,va=jt+mt,An=fr+Xe,ci=ai+it,Cn=new G((qt+xe)/nn,(jt+K)/nn);Cn.z=ji/nn,gt.push(Cn);const En=new G(Mn/ci,va/ci);En.z=An/ci,St.push(En)}ye.push(gt),ze.push(St)}return[ye,ze]}(g,N,B,A);return function(Q,J,ie){let ce=1/0;sf(ie,J)&&(ce=qi(ie,J[0]));for(let ye=0;ye<J.length;ye++){const ze=J[ye],xe=Q[ye];for(let K=0;K<ze.length-1;K++){const le=ze[K],Te=[le,ze[K+1],xe[K+1],xe[K],le];Xu(ie,Te)&&(ce=Math.min(ce,qi(ie,Te)))}}return ce!==1/0&&ce}(H[0],H[1],V)}}function ml(s,t){return s.x*t.x+s.y*t.y}function qi(s,t){if(s.length===1){let o=0;const c=t[o++];let g;for(;!g||c.equals(g);)if(g=t[o++],!g)return 1/0;for(;o<t.length;o++){const w=t[o],T=s[0],A=g.sub(c),I=w.sub(c),B=T.sub(c),N=ml(A,A),V=ml(A,I),H=ml(I,I),Q=ml(B,A),J=ml(B,I),ie=N*H-V*V,ce=(H*Q-V*J)/ie,ye=(N*J-V*Q)/ie,ze=c.z*(1-ce-ye)+g.z*ce+w.z*ye;if(isFinite(ze))return ze}return 1/0}{let o=1/0;for(const c of t)o=Math.min(o,c.z);return o}}const o0=Si([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:l0}=o0,ng=Si([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:u0}=ng,c0=oc.VectorTileFeature.types,Qi=Math.cos(Math.PI/180*37.5),Ci=Math.pow(2,14)/.5;class Nr{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new Le,this.layoutVertexArray2=new Ie,this.indexArray=new Tt,this.programConfigurations=new Ao(t.layers,t.zoom),this.segments=new tr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,c){this.hasPattern=ec("line",this.layers,o);const g=this.layers[0].layout.get("line-sort-key"),w=!g.isConstant(),T=[];for(const{feature:A,id:I,index:B,sourceLayerIndex:N}of t){const V=this.layers[0]._featureFilter.needGeometry,H=Es(A,V);if(!this.layers[0]._featureFilter.filter(new mr(this.zoom),H,c))continue;const Q=w?g.evaluate(H,{},c):void 0,J={id:I,properties:A.properties,type:A.type,sourceLayerIndex:N,index:B,geometry:V?H.geometry:Ln(A),patterns:{},sortKey:Q};T.push(J)}w&&T.sort((A,I)=>A.sortKey-I.sortKey);for(const A of T){const{geometry:I,index:B,sourceLayerIndex:N}=A;if(this.hasPattern){const V=tc("line",this.layers,A,this.zoom,o);this.patternFeatures.push(V)}else this.addFeature(A,I,B,c,{},o.subdivisionGranularity);o.featureIndex.insert(t[B].feature,I,B,N,this.index)}}update(t,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,c)}addFeatures(t,o,c){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,o,c,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,u0)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,l0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,o,c,g,w,T){const A=this.layers[0].layout,I=A.get("line-join").evaluate(t,{}),B=A.get("line-cap"),N=A.get("line-miter-limit"),V=A.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const H of o)this.addLine(H,t,I,B,N,V,g,T);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,w,g)}addLine(t,o,c,g,w,T,A,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,t=ia(t,A?I.line.getGranularityForZoomLevel(A.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let xe=0;xe<t.length-1;xe++)this.totalDistance+=t[xe].dist(t[xe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const B=c0[o.type]==="Polygon";let N=t.length;for(;N>=2&&t[N-1].equals(t[N-2]);)N--;let V=0;for(;V<N-1&&t[V].equals(t[V+1]);)V++;if(N<(B?3:2))return;c==="bevel"&&(w=1.05);const H=this.overscaling<=16?15*Rt/(512*this.overscaling):0,Q=this.segments.prepareSegment(10*N,this.layoutVertexArray,this.indexArray);let J,ie,ce,ye,ze;this.e1=this.e2=-1,B&&(J=t[N-2],ze=t[V].sub(J)._unit()._perp());for(let xe=V;xe<N;xe++){if(ce=xe===N-1?B?t[V+1]:void 0:t[xe+1],ce&&t[xe].equals(ce))continue;ze&&(ye=ze),J&&(ie=J),J=t[xe],ze=ce?ce.sub(J)._unit()._perp():ye,ye=ye||ze;let K=ye.add(ze);K.x===0&&K.y===0||K._unit();const le=ye.x*ze.x+ye.y*ze.y,Te=K.x*ze.x+K.y*ze.y,Ge=Te!==0?1/Te:1/0,mt=2*Math.sqrt(2-2*Te),Xe=Te<Qi&&ie&&ce,it=ye.x*ze.y-ye.y*ze.x>0;if(Xe&&xe>V){const St=J.dist(ie);if(St>2*H){const st=J.sub(J.sub(ie)._mult(H/St)._round());this.updateDistance(ie,st),this.addCurrentVertex(st,ye,0,0,Q),ie=st}}const bt=ie&&ce;let gt=bt?c:B?"butt":g;if(bt&&gt==="round"&&(Ge<T?gt="miter":Ge<=2&&(gt="fakeround")),gt==="miter"&&Ge>w&&(gt="bevel"),gt==="bevel"&&(Ge>2&&(gt="flipbevel"),Ge<w&&(gt="miter")),ie&&this.updateDistance(ie,J),gt==="miter")K._mult(Ge),this.addCurrentVertex(J,K,0,0,Q);else if(gt==="flipbevel"){if(Ge>100)K=ze.mult(-1);else{const St=Ge*ye.add(ze).mag()/ye.sub(ze).mag();K._perp()._mult(St*(it?-1:1))}this.addCurrentVertex(J,K,0,0,Q),this.addCurrentVertex(J,K.mult(-1),0,0,Q)}else if(gt==="bevel"||gt==="fakeround"){const St=-Math.sqrt(Ge*Ge-1),st=it?St:0,Ot=it?0:St;if(ie&&this.addCurrentVertex(J,ye,st,Ot,Q),gt==="fakeround"){const Yt=Math.round(180*mt/Math.PI/20);for(let qt=1;qt<Yt;qt++){let jt=qt/Yt;if(jt!==.5){const ai=jt-.5;jt+=jt*ai*(jt-1)*((1.0904+le*(le*(3.55645-1.43519*le)-3.2452))*ai*ai+(.848013+le*(.215638*le-1.06021)))}const fr=ze.sub(ye)._mult(jt)._add(ye)._unit()._mult(it?-1:1);this.addHalfVertex(J,fr.x,fr.y,!1,it,0,Q)}}ce&&this.addCurrentVertex(J,ze,-st,-Ot,Q)}else if(gt==="butt")this.addCurrentVertex(J,K,0,0,Q);else if(gt==="square"){const St=ie?1:-1;this.addCurrentVertex(J,K,St,St,Q)}else gt==="round"&&(ie&&(this.addCurrentVertex(J,ye,0,0,Q),this.addCurrentVertex(J,ye,1,1,Q,!0)),ce&&(this.addCurrentVertex(J,ze,-1,-1,Q,!0),this.addCurrentVertex(J,ze,0,0,Q)));if(Xe&&xe<N-1){const St=J.dist(ce);if(St>2*H){const st=J.add(ce.sub(J)._mult(H/St)._round());this.updateDistance(J,st),this.addCurrentVertex(st,ze,0,0,Q),J=st}}}}addCurrentVertex(t,o,c,g,w,T=!1){const A=o.y*g-o.x,I=-o.y-o.x*g;this.addHalfVertex(t,o.x+o.y*c,o.y-o.x*c,T,!1,c,w),this.addHalfVertex(t,A,I,T,!0,-g,w),this.distance>Ci/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,o,c,g,w,T))}addHalfVertex({x:t,y:o},c,g,w,T,A,I){const B=.5*(this.lineClips?this.scaledDistance*(Ci-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(w?1:0),(o<<1)+(T?1:0),Math.round(63*c)+128,Math.round(63*g)+128,1+(A===0?0:A<0?-1:1)|(63&B)<<2,B>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const N=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,N,this.e2),I.primitiveLength++),T?this.e2=N:this.e1=N}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,o){this.distance+=t.dist(o),this.updateScaledDistance()}}let Jr,Ei;Bt("LineBucket",Nr,{omit:["layers","patternFeatures"]});var ka={get paint(){return Ei=Ei||new Zn({"line-opacity":new Kt(oe.paint_line["line-opacity"]),"line-color":new Kt(oe.paint_line["line-color"]),"line-translate":new $t(oe.paint_line["line-translate"]),"line-translate-anchor":new $t(oe.paint_line["line-translate-anchor"]),"line-width":new Kt(oe.paint_line["line-width"]),"line-gap-width":new Kt(oe.paint_line["line-gap-width"]),"line-offset":new Kt(oe.paint_line["line-offset"]),"line-blur":new Kt(oe.paint_line["line-blur"]),"line-dasharray":new Qc(oe.paint_line["line-dasharray"]),"line-pattern":new Wl(oe.paint_line["line-pattern"]),"line-gradient":new rd(oe.paint_line["line-gradient"])})},get layout(){return Jr=Jr||new Zn({"line-cap":new $t(oe.layout_line["line-cap"]),"line-join":new Kt(oe.layout_line["line-join"]),"line-miter-limit":new $t(oe.layout_line["line-miter-limit"]),"line-round-limit":new $t(oe.layout_line["line-round-limit"]),"line-sort-key":new Kt(oe.layout_line["line-sort-key"])})}};class gl extends Kt{possiblyEvaluate(t,o){return o=new mr(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(t,o)}evaluate(t,o,c,g){return o=Qr({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(t,o,c,g)}}let yl;class zp extends Pa{constructor(t){super(t,ka),this.gradientVersion=0,yl||(yl=new gl(ka.paint.properties["line-width"].specification),yl.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const o=this.gradientExpression();this.stepInterpolant=!!function(c){return c._styleExpression!==void 0}(o)&&o._styleExpression.expression instanceof Bs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,o){super.recalculate(t,o),this.paint._values["line-floorwidth"]=yl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Nr(t)}queryRadius(t){const o=t,c=Po(Ju("line-width",this,o),Ju("line-gap-width",this,o)),g=Ju("line-offset",this,o);return c/2+Math.abs(g)+lf(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:t,feature:o,featureState:c,geometry:g,transform:w,pixelsToTileUnits:T}){const A=ud(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-w.bearingInRadians,T),I=T/2*Po(this.paint.get("line-width").evaluate(o,c),this.paint.get("line-gap-width").evaluate(o,c)),B=this.paint.get("line-offset").evaluate(o,c);return B&&(g=function(N,V){const H=[];for(let Q=0;Q<N.length;Q++){const J=N[Q],ie=[];for(let ce=0;ce<J.length;ce++){const ye=J[ce-1],ze=J[ce],xe=J[ce+1],K=ce===0?new G(0,0):ze.sub(ye)._unit()._perp(),le=ce===J.length-1?new G(0,0):xe.sub(ze)._unit()._perp(),Te=K._add(le)._unit(),Ge=Te.x*le.x+Te.y*le.y;Ge!==0&&Te._mult(1/Ge),ie.push(Te._mult(V)._add(ze))}H.push(ie)}return H}(g,B*T)),function(N,V,H){for(let Q=0;Q<V.length;Q++){const J=V[Q];if(N.length>=3){for(let ie=0;ie<J.length;ie++)if(eu(N,J[ie]))return!0}if(Wm(N,J,H))return!0}return!1}(A,g,I)}isTileClipped(){return!0}}function Po(s,t){return t>0?t+2*s:s}const rn=Si([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),pu=Si([{name:"a_projected_pos",components:3,type:"Float32"}],4);Si([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const lc=Si([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Si([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const _f=Si([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ps=Si([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ch(s,t,o){return s.sections.forEach(c=>{c.text=function(g,w,T){const A=w.layout.get("text-transform").evaluate(T,{});return A==="uppercase"?g=g.toLocaleUpperCase():A==="lowercase"&&(g=g.toLocaleLowerCase()),Gr.applyArabicShaping&&(g=Gr.applyArabicShaping(g)),g}(c.text,t,o)}),s}Si([{name:"triangle",components:3,type:"Uint16"}]),Si([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Si([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Si([{type:"Float32",name:"offsetX"}]),Si([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Si([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const _l={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Ks,yd,vf,Gi=24,hh={};function mu(){return Ks||(Ks=1,hh.read=function(s,t,o,c,g){var w,T,A=8*g-c-1,I=(1<<A)-1,B=I>>1,N=-7,V=o?g-1:0,H=o?-1:1,Q=s[t+V];for(V+=H,w=Q&(1<<-N)-1,Q>>=-N,N+=A;N>0;w=256*w+s[t+V],V+=H,N-=8);for(T=w&(1<<-N)-1,w>>=-N,N+=c;N>0;T=256*T+s[t+V],V+=H,N-=8);if(w===0)w=1-B;else{if(w===I)return T?NaN:1/0*(Q?-1:1);T+=Math.pow(2,c),w-=B}return(Q?-1:1)*T*Math.pow(2,w-c)},hh.write=function(s,t,o,c,g,w){var T,A,I,B=8*w-g-1,N=(1<<B)-1,V=N>>1,H=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,Q=c?0:w-1,J=c?1:-1,ie=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(A=isNaN(t)?1:0,T=N):(T=Math.floor(Math.log(t)/Math.LN2),t*(I=Math.pow(2,-T))<1&&(T--,I*=2),(t+=T+V>=1?H/I:H*Math.pow(2,1-V))*I>=2&&(T++,I/=2),T+V>=N?(A=0,T=N):T+V>=1?(A=(t*I-1)*Math.pow(2,g),T+=V):(A=t*Math.pow(2,V-1)*Math.pow(2,g),T=0));g>=8;s[o+Q]=255&A,Q+=J,A/=256,g-=8);for(T=T<<g|A,B+=g;B>0;s[o+Q]=255&T,Q+=J,T/=256,B-=8);s[o+Q-J]|=128*ie}),hh}function _d(){if(vf)return yd;vf=1,yd=t;var s=mu();function t(K){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(K)?K:new Uint8Array(K||0),this.pos=0,this.type=0,this.length=this.buf.length}t.Varint=0,t.Fixed64=1,t.Bytes=2,t.Fixed32=5;var o=4294967296,c=1/o,g=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function w(K){return K.type===t.Bytes?K.readVarint()+K.pos:K.pos+1}function T(K,le,Te){return Te?4294967296*le+(K>>>0):4294967296*(le>>>0)+(K>>>0)}function A(K,le,Te){var Ge=le<=16383?1:le<=2097151?2:le<=268435455?3:Math.floor(Math.log(le)/(7*Math.LN2));Te.realloc(Ge);for(var mt=Te.pos-1;mt>=K;mt--)Te.buf[mt+Ge]=Te.buf[mt]}function I(K,le){for(var Te=0;Te<K.length;Te++)le.writeVarint(K[Te])}function B(K,le){for(var Te=0;Te<K.length;Te++)le.writeSVarint(K[Te])}function N(K,le){for(var Te=0;Te<K.length;Te++)le.writeFloat(K[Te])}function V(K,le){for(var Te=0;Te<K.length;Te++)le.writeDouble(K[Te])}function H(K,le){for(var Te=0;Te<K.length;Te++)le.writeBoolean(K[Te])}function Q(K,le){for(var Te=0;Te<K.length;Te++)le.writeFixed32(K[Te])}function J(K,le){for(var Te=0;Te<K.length;Te++)le.writeSFixed32(K[Te])}function ie(K,le){for(var Te=0;Te<K.length;Te++)le.writeFixed64(K[Te])}function ce(K,le){for(var Te=0;Te<K.length;Te++)le.writeSFixed64(K[Te])}function ye(K,le){return(K[le]|K[le+1]<<8|K[le+2]<<16)+16777216*K[le+3]}function ze(K,le,Te){K[Te]=le,K[Te+1]=le>>>8,K[Te+2]=le>>>16,K[Te+3]=le>>>24}function xe(K,le){return(K[le]|K[le+1]<<8|K[le+2]<<16)+(K[le+3]<<24)}return t.prototype={destroy:function(){this.buf=null},readFields:function(K,le,Te){for(Te=Te||this.length;this.pos<Te;){var Ge=this.readVarint(),mt=Ge>>3,Xe=this.pos;this.type=7&Ge,K(mt,le,this),this.pos===Xe&&this.skip(Ge)}return le},readMessage:function(K,le){return this.readFields(K,le,this.readVarint()+this.pos)},readFixed32:function(){var K=ye(this.buf,this.pos);return this.pos+=4,K},readSFixed32:function(){var K=xe(this.buf,this.pos);return this.pos+=4,K},readFixed64:function(){var K=ye(this.buf,this.pos)+ye(this.buf,this.pos+4)*o;return this.pos+=8,K},readSFixed64:function(){var K=ye(this.buf,this.pos)+xe(this.buf,this.pos+4)*o;return this.pos+=8,K},readFloat:function(){var K=s.read(this.buf,this.pos,!0,23,4);return this.pos+=4,K},readDouble:function(){var K=s.read(this.buf,this.pos,!0,52,8);return this.pos+=8,K},readVarint:function(K){var le,Te,Ge=this.buf;return le=127&(Te=Ge[this.pos++]),Te<128?le:(le|=(127&(Te=Ge[this.pos++]))<<7,Te<128?le:(le|=(127&(Te=Ge[this.pos++]))<<14,Te<128?le:(le|=(127&(Te=Ge[this.pos++]))<<21,Te<128?le:function(mt,Xe,it){var bt,gt,St=it.buf;if(bt=(112&(gt=St[it.pos++]))>>4,gt<128||(bt|=(127&(gt=St[it.pos++]))<<3,gt<128)||(bt|=(127&(gt=St[it.pos++]))<<10,gt<128)||(bt|=(127&(gt=St[it.pos++]))<<17,gt<128)||(bt|=(127&(gt=St[it.pos++]))<<24,gt<128)||(bt|=(1&(gt=St[it.pos++]))<<31,gt<128))return T(mt,bt,Xe);throw new Error("Expected varint not more than 10 bytes")}(le|=(15&(Te=Ge[this.pos]))<<28,K,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var K=this.readVarint();return K%2==1?(K+1)/-2:K/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var K=this.readVarint()+this.pos,le=this.pos;return this.pos=K,K-le>=12&&g?function(Te,Ge,mt){return g.decode(Te.subarray(Ge,mt))}(this.buf,le,K):function(Te,Ge,mt){for(var Xe="",it=Ge;it<mt;){var bt,gt,St,st=Te[it],Ot=null,Yt=st>239?4:st>223?3:st>191?2:1;if(it+Yt>mt)break;Yt===1?st<128&&(Ot=st):Yt===2?(192&(bt=Te[it+1]))==128&&(Ot=(31&st)<<6|63&bt)<=127&&(Ot=null):Yt===3?(gt=Te[it+2],(192&(bt=Te[it+1]))==128&&(192&gt)==128&&((Ot=(15&st)<<12|(63&bt)<<6|63&gt)<=2047||Ot>=55296&&Ot<=57343)&&(Ot=null)):Yt===4&&(gt=Te[it+2],St=Te[it+3],(192&(bt=Te[it+1]))==128&&(192&gt)==128&&(192&St)==128&&((Ot=(15&st)<<18|(63&bt)<<12|(63&gt)<<6|63&St)<=65535||Ot>=1114112)&&(Ot=null)),Ot===null?(Ot=65533,Yt=1):Ot>65535&&(Ot-=65536,Xe+=String.fromCharCode(Ot>>>10&1023|55296),Ot=56320|1023&Ot),Xe+=String.fromCharCode(Ot),it+=Yt}return Xe}(this.buf,le,K)},readBytes:function(){var K=this.readVarint()+this.pos,le=this.buf.subarray(this.pos,K);return this.pos=K,le},readPackedVarint:function(K,le){if(this.type!==t.Bytes)return K.push(this.readVarint(le));var Te=w(this);for(K=K||[];this.pos<Te;)K.push(this.readVarint(le));return K},readPackedSVarint:function(K){if(this.type!==t.Bytes)return K.push(this.readSVarint());var le=w(this);for(K=K||[];this.pos<le;)K.push(this.readSVarint());return K},readPackedBoolean:function(K){if(this.type!==t.Bytes)return K.push(this.readBoolean());var le=w(this);for(K=K||[];this.pos<le;)K.push(this.readBoolean());return K},readPackedFloat:function(K){if(this.type!==t.Bytes)return K.push(this.readFloat());var le=w(this);for(K=K||[];this.pos<le;)K.push(this.readFloat());return K},readPackedDouble:function(K){if(this.type!==t.Bytes)return K.push(this.readDouble());var le=w(this);for(K=K||[];this.pos<le;)K.push(this.readDouble());return K},readPackedFixed32:function(K){if(this.type!==t.Bytes)return K.push(this.readFixed32());var le=w(this);for(K=K||[];this.pos<le;)K.push(this.readFixed32());return K},readPackedSFixed32:function(K){if(this.type!==t.Bytes)return K.push(this.readSFixed32());var le=w(this);for(K=K||[];this.pos<le;)K.push(this.readSFixed32());return K},readPackedFixed64:function(K){if(this.type!==t.Bytes)return K.push(this.readFixed64());var le=w(this);for(K=K||[];this.pos<le;)K.push(this.readFixed64());return K},readPackedSFixed64:function(K){if(this.type!==t.Bytes)return K.push(this.readSFixed64());var le=w(this);for(K=K||[];this.pos<le;)K.push(this.readSFixed64());return K},skip:function(K){var le=7&K;if(le===t.Varint)for(;this.buf[this.pos++]>127;);else if(le===t.Bytes)this.pos=this.readVarint()+this.pos;else if(le===t.Fixed32)this.pos+=4;else{if(le!==t.Fixed64)throw new Error("Unimplemented type: "+le);this.pos+=8}},writeTag:function(K,le){this.writeVarint(K<<3|le)},realloc:function(K){for(var le=this.length||16;le<this.pos+K;)le*=2;if(le!==this.length){var Te=new Uint8Array(le);Te.set(this.buf),this.buf=Te,this.length=le}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(K){this.realloc(4),ze(this.buf,K,this.pos),this.pos+=4},writeSFixed32:function(K){this.realloc(4),ze(this.buf,K,this.pos),this.pos+=4},writeFixed64:function(K){this.realloc(8),ze(this.buf,-1&K,this.pos),ze(this.buf,Math.floor(K*c),this.pos+4),this.pos+=8},writeSFixed64:function(K){this.realloc(8),ze(this.buf,-1&K,this.pos),ze(this.buf,Math.floor(K*c),this.pos+4),this.pos+=8},writeVarint:function(K){(K=+K||0)>268435455||K<0?function(le,Te){var Ge,mt;if(le>=0?(Ge=le%4294967296|0,mt=le/4294967296|0):(mt=~(-le/4294967296),4294967295^(Ge=~(-le%4294967296))?Ge=Ge+1|0:(Ge=0,mt=mt+1|0)),le>=18446744073709552e3||le<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Te.realloc(10),function(Xe,it,bt){bt.buf[bt.pos++]=127&Xe|128,Xe>>>=7,bt.buf[bt.pos++]=127&Xe|128,Xe>>>=7,bt.buf[bt.pos++]=127&Xe|128,Xe>>>=7,bt.buf[bt.pos++]=127&Xe|128,bt.buf[bt.pos]=127&(Xe>>>=7)}(Ge,0,Te),function(Xe,it){var bt=(7&Xe)<<4;it.buf[it.pos++]|=bt|((Xe>>>=3)?128:0),Xe&&(it.buf[it.pos++]=127&Xe|((Xe>>>=7)?128:0),Xe&&(it.buf[it.pos++]=127&Xe|((Xe>>>=7)?128:0),Xe&&(it.buf[it.pos++]=127&Xe|((Xe>>>=7)?128:0),Xe&&(it.buf[it.pos++]=127&Xe|((Xe>>>=7)?128:0),Xe&&(it.buf[it.pos++]=127&Xe)))))}(mt,Te)}(K,this):(this.realloc(4),this.buf[this.pos++]=127&K|(K>127?128:0),K<=127||(this.buf[this.pos++]=127&(K>>>=7)|(K>127?128:0),K<=127||(this.buf[this.pos++]=127&(K>>>=7)|(K>127?128:0),K<=127||(this.buf[this.pos++]=K>>>7&127))))},writeSVarint:function(K){this.writeVarint(K<0?2*-K-1:2*K)},writeBoolean:function(K){this.writeVarint(!!K)},writeString:function(K){K=String(K),this.realloc(4*K.length),this.pos++;var le=this.pos;this.pos=function(Ge,mt,Xe){for(var it,bt,gt=0;gt<mt.length;gt++){if((it=mt.charCodeAt(gt))>55295&&it<57344){if(!bt){it>56319||gt+1===mt.length?(Ge[Xe++]=239,Ge[Xe++]=191,Ge[Xe++]=189):bt=it;continue}if(it<56320){Ge[Xe++]=239,Ge[Xe++]=191,Ge[Xe++]=189,bt=it;continue}it=bt-55296<<10|it-56320|65536,bt=null}else bt&&(Ge[Xe++]=239,Ge[Xe++]=191,Ge[Xe++]=189,bt=null);it<128?Ge[Xe++]=it:(it<2048?Ge[Xe++]=it>>6|192:(it<65536?Ge[Xe++]=it>>12|224:(Ge[Xe++]=it>>18|240,Ge[Xe++]=it>>12&63|128),Ge[Xe++]=it>>6&63|128),Ge[Xe++]=63&it|128)}return Xe}(this.buf,K,this.pos);var Te=this.pos-le;Te>=128&&A(le,Te,this),this.pos=le-1,this.writeVarint(Te),this.pos+=Te},writeFloat:function(K){this.realloc(4),s.write(this.buf,K,this.pos,!0,23,4),this.pos+=4},writeDouble:function(K){this.realloc(8),s.write(this.buf,K,this.pos,!0,52,8),this.pos+=8},writeBytes:function(K){var le=K.length;this.writeVarint(le),this.realloc(le);for(var Te=0;Te<le;Te++)this.buf[this.pos++]=K[Te]},writeRawMessage:function(K,le){this.pos++;var Te=this.pos;K(le,this);var Ge=this.pos-Te;Ge>=128&&A(Te,Ge,this),this.pos=Te-1,this.writeVarint(Ge),this.pos+=Ge},writeMessage:function(K,le,Te){this.writeTag(K,t.Bytes),this.writeRawMessage(le,Te)},writePackedVarint:function(K,le){le.length&&this.writeMessage(K,I,le)},writePackedSVarint:function(K,le){le.length&&this.writeMessage(K,B,le)},writePackedBoolean:function(K,le){le.length&&this.writeMessage(K,H,le)},writePackedFloat:function(K,le){le.length&&this.writeMessage(K,N,le)},writePackedDouble:function(K,le){le.length&&this.writeMessage(K,V,le)},writePackedFixed32:function(K,le){le.length&&this.writeMessage(K,Q,le)},writePackedSFixed32:function(K,le){le.length&&this.writeMessage(K,J,le)},writePackedFixed64:function(K,le){le.length&&this.writeMessage(K,ie,le)},writePackedSFixed64:function(K,le){le.length&&this.writeMessage(K,ce,le)},writeBytesField:function(K,le){this.writeTag(K,t.Bytes),this.writeBytes(le)},writeFixed32Field:function(K,le){this.writeTag(K,t.Fixed32),this.writeFixed32(le)},writeSFixed32Field:function(K,le){this.writeTag(K,t.Fixed32),this.writeSFixed32(le)},writeFixed64Field:function(K,le){this.writeTag(K,t.Fixed64),this.writeFixed64(le)},writeSFixed64Field:function(K,le){this.writeTag(K,t.Fixed64),this.writeSFixed64(le)},writeVarintField:function(K,le){this.writeTag(K,t.Varint),this.writeVarint(le)},writeSVarintField:function(K,le){this.writeTag(K,t.Varint),this.writeSVarint(le)},writeStringField:function(K,le){this.writeTag(K,t.Bytes),this.writeString(le)},writeFloatField:function(K,le){this.writeTag(K,t.Fixed32),this.writeFloat(le)},writeDoubleField:function(K,le){this.writeTag(K,t.Fixed64),this.writeDouble(le)},writeBooleanField:function(K,le){this.writeVarintField(K,!!le)}},yd}var vl=C(_d());const uc=3;function Lp(s,t,o){s===1&&o.readMessage(kp,t)}function kp(s,t,o){if(s===3){const{id:c,bitmap:g,width:w,height:T,left:A,top:I,advance:B}=o.readMessage(vd,{});t.push({id:c,bitmap:new nu({width:w+2*uc,height:T+2*uc},g),metrics:{width:w,height:T,left:A,top:I,advance:B}})}}function vd(s,t,o){s===1?t.id=o.readVarint():s===2?t.bitmap=o.readBytes():s===3?t.width=o.readVarint():s===4?t.height=o.readVarint():s===5?t.left=o.readSVarint():s===6?t.top=o.readSVarint():s===7&&(t.advance=o.readVarint())}const Bp=uc;function Ba(s){let t=0,o=0;for(const T of s)t+=T.w*T.h,o=Math.max(o,T.w);s.sort((T,A)=>A.h-T.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),o),h:1/0}];let g=0,w=0;for(const T of s)for(let A=c.length-1;A>=0;A--){const I=c[A];if(!(T.w>I.w||T.h>I.h)){if(T.x=I.x,T.y=I.y,w=Math.max(w,T.y+T.h),g=Math.max(g,T.x+T.w),T.w===I.w&&T.h===I.h){const B=c.pop();A<c.length&&(c[A]=B)}else T.h===I.h?(I.x+=T.w,I.w-=T.w):T.w===I.w?(I.y+=T.h,I.h-=T.h):(c.push({x:I.x+T.w,y:I.y,w:I.w-T.w,h:T.h}),I.y+=T.h,I.h-=T.h);break}}return{w:g,h:w,fill:t/(g*w)||0}}const ca=1;class na{constructor(t,{pixelRatio:o,version:c,stretchX:g,stretchY:w,content:T,textFitWidth:A,textFitHeight:I}){this.paddedRect=t,this.pixelRatio=o,this.stretchX=g,this.stretchY=w,this.content=T,this.version=c,this.textFitWidth=A,this.textFitHeight=I}get tl(){return[this.paddedRect.x+ca,this.paddedRect.y+ca]}get br(){return[this.paddedRect.x+this.paddedRect.w-ca,this.paddedRect.y+this.paddedRect.h-ca]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ca)/this.pixelRatio,(this.paddedRect.h-2*ca)/this.pixelRatio]}}class Op{constructor(t,o){const c={},g={};this.haveRenderCallbacks=[];const w=[];this.addImages(t,c,w),this.addImages(o,g,w);const{w:T,h:A}=Ba(w),I=new za({width:T||1,height:A||1});for(const B in t){const N=t[B],V=c[B].paddedRect;za.copy(N.data,I,{x:0,y:0},{x:V.x+ca,y:V.y+ca},N.data)}for(const B in o){const N=o[B],V=g[B].paddedRect,H=V.x+ca,Q=V.y+ca,J=N.data.width,ie=N.data.height;za.copy(N.data,I,{x:0,y:0},{x:H,y:Q},N.data),za.copy(N.data,I,{x:0,y:ie-1},{x:H,y:Q-1},{width:J,height:1}),za.copy(N.data,I,{x:0,y:0},{x:H,y:Q+ie},{width:J,height:1}),za.copy(N.data,I,{x:J-1,y:0},{x:H-1,y:Q},{width:1,height:ie}),za.copy(N.data,I,{x:0,y:0},{x:H+J,y:Q},{width:1,height:ie})}this.image=I,this.iconPositions=c,this.patternPositions=g}addImages(t,o,c){for(const g in t){const w=t[g],T={x:0,y:0,w:w.data.width+2*ca,h:w.data.height+2*ca};c.push(T),o[g]=new na(T,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(t,o){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const c in t.updatedImages)this.patchUpdatedImage(this.iconPositions[c],t.getImage(c),o),this.patchUpdatedImage(this.patternPositions[c],t.getImage(c),o)}patchUpdatedImage(t,o,c){if(!t||!o||t.version===o.version)return;t.version=o.version;const[g,w]=t.tl;c.update(o.data,void 0,{x:g,y:w})}}var Ro;Bt("ImagePosition",na),Bt("ImageAtlas",Op),y.al=void 0,(Ro=y.al||(y.al={}))[Ro.none=0]="none",Ro[Ro.horizontal=1]="horizontal",Ro[Ro.vertical=2]="vertical",Ro[Ro.horizontalOnly=3]="horizontalOnly";const xd=-17;class bd{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(t,o,c){const g=new bd;return g.scale=t||1,g.fontStack=o,g.verticalAlign=c||"bottom",g}static forImage(t,o){const c=new bd;return c.imageName=t,c.verticalAlign=o||"bottom",c}}class Oa{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,o){const c=new Oa;for(let g=0;g<t.sections.length;g++){const w=t.sections[g];w.image?c.addImageSection(w):c.addTextSection(w,o)}return c}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let o="";for(let c=0;c<t.length;c++){const g=t.charCodeAt(c+1)||null,w=t.charCodeAt(c-1)||null;o+=g&&Yc(g)&&!_l[t[c+1]]||w&&Yc(w)&&!_l[t[c-1]]||!_l[t[c]]?t[c]:_l[t[c]]}return o}(this.text)}trim(){let t=0;for(let c=0;c<this.text.length&&dh[this.text.charCodeAt(c)];c++)t++;let o=this.text.length;for(let c=this.text.length-1;c>=0&&c>=t&&dh[this.text.charCodeAt(c)];c--)o--;this.text=this.text.substring(t,o),this.sectionIndex=this.sectionIndex.slice(t,o)}substring(t,o){const c=new Oa;return c.text=this.text.substring(t,o),c.sectionIndex=this.sectionIndex.slice(t,o),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,o)=>Math.max(t,this.sections[o].scale),0)}getMaxImageSize(t){let o=0,c=0;for(let g=0;g<this.length();g++){const w=this.getSection(g);if(w.imageName){const T=t[w.imageName];if(!T)continue;const A=T.displaySize;o=Math.max(o,A[0]),c=Math.max(c,A[1])}}return{maxImageWidth:o,maxImageHeight:c}}addTextSection(t,o){this.text+=t.text,this.sections.push(bd.forText(t.scale,t.fontStack||o,t.verticalAlign));const c=this.sections.length-1;for(let g=0;g<t.text.length;++g)this.sectionIndex.push(c)}addImageSection(t){const o=t.image?t.image.name:"";if(o.length===0)return void zr("Can't add FormattedSection with an empty image.");const c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(bd.forImage(o,t.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):zr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function cc(s,t,o,c,g,w,T,A,I,B,N,V,H,Q,J){const ie=Oa.fromFeature(s,g);let ce;V===y.al.vertical&&ie.verticalizePunctuation();const{processBidirectionalText:ye,processStyledBidirectionalText:ze}=Gr;if(ye&&ie.sections.length===1){ce=[];const le=ye(ie.toString(),Up(ie,B,w,t,c,Q));for(const Te of le){const Ge=new Oa;Ge.text=Te,Ge.sections=ie.sections;for(let mt=0;mt<Te.length;mt++)Ge.sectionIndex.push(0);ce.push(Ge)}}else if(ze){ce=[];const le=ze(ie.text,ie.sectionIndex,Up(ie,B,w,t,c,Q));for(const Te of le){const Ge=new Oa;Ge.text=Te[0],Ge.sectionIndex=Te[1],Ge.sections=ie.sections,ce.push(Ge)}}else ce=function(le,Te){const Ge=[],mt=le.text;let Xe=0;for(const it of Te)Ge.push(le.substring(Xe,it)),Xe=it;return Xe<mt.length&&Ge.push(le.substring(Xe,mt.length)),Ge}(ie,Up(ie,B,w,t,c,Q));const xe=[],K={positionedLines:xe,text:ie.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:V,iconsInText:!1,verticalizable:!1};return function(le,Te,Ge,mt,Xe,it,bt,gt,St,st,Ot,Yt){let qt=0,jt=0,fr=0,ai=0;const ji=gt==="right"?1:gt==="left"?0:.5,nn=Gi/Yt;let Mn=0;for(const ci of Xe){ci.trim();const Cn=ci.getMaxScale(),En={positionedGlyphs:[],lineOffset:0};le.positionedLines[Mn]=En;const an=En.positionedGlyphs;let aa=0;if(!ci.length()){jt+=it,++Mn;continue}const ls=og(mt,ci,nn);for(let Kn=0;Kn<ci.length();Kn++){const sn=ci.getSection(Kn),Hi=ci.getSectionIndex(Kn),on=ci.getCharCode(Kn),Ni=ph(St,Ot,on);let gi;if(sn.imageName){if(le.iconsInText=!0,sn.scale=sn.scale*nn,gi=lg(sn,Ni,Cn,ls,mt),!gi)continue;aa=Math.max(aa,gi.imageOffset)}else if(gi=bf(sn,on,Ni,ls,Te,Ge),!gi)continue;const{rect:Qs,metrics:Sl,baselineOffset:r}=gi;an.push({glyph:on,imageName:sn.imageName,x:qt,y:jt+r+xd,vertical:Ni,scale:sn.scale,fontStack:sn.fontStack,sectionIndex:Hi,metrics:Sl,rect:Qs}),Ni?(le.verticalizable=!0,qt+=(sn.imageName?Sl.advance:Gi)*sn.scale+st):qt+=Sl.advance*sn.scale+st}an.length!==0&&(fr=Math.max(qt-st,fr),ug(an,0,an.length-1,ji)),qt=0,En.lineOffset=Math.max(aa,(Cn-1)*Gi);const Ji=it*Cn+aa;jt+=Ji,ai=Math.max(Ji,ai),++Mn}const{horizontalAlign:va,verticalAlign:An}=Vp(bt);(function(ci,Cn,En,an,aa,ls,Ji,Kn,sn){const Hi=(Cn-En)*aa;let on=0;on=ls!==Ji?-Kn*an-xd:-an*sn*Ji+.5*Ji;for(const Ni of ci)for(const gi of Ni.positionedGlyphs)gi.x+=Hi,gi.y+=on})(le.positionedLines,ji,va,An,fr,ai,it,jt,Xe.length),le.top+=-An*jt,le.bottom=le.top+jt,le.left+=-va*fr,le.right=le.left+fr}(K,t,o,c,ce,T,A,I,V,B,H,J),!function(le){for(const Te of le)if(Te.positionedGlyphs.length!==0)return!1;return!0}(xe)&&K}const dh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},fh={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},ag={40:!0};function jp(s,t,o,c,g,w){if(t.imageName){const T=c[t.imageName];return T?T.displaySize[0]*t.scale*Gi/w+g:0}{const T=o[t.fontStack],A=T&&T[s];return A?A.metrics.advance*t.scale+g:0}}function Np(s,t,o,c){const g=Math.pow(s-t,2);return c?s<t?g/2:2*g:g+Math.abs(o)*o}function Fp(s,t,o){let c=0;return s===10&&(c-=1e4),o&&(c+=150),s!==40&&s!==65288||(c+=50),t!==41&&t!==65289||(c+=50),c}function xf(s,t,o,c,g,w){let T=null,A=Np(t,o,g,w);for(const I of c){const B=Np(t-I.x,o,g,w)+I.badness;B<=A&&(T=I,A=B)}return{index:s,x:t,priorBreak:T,badness:A}}function sg(s){return s?sg(s.priorBreak).concat(s.index):[]}function Up(s,t,o,c,g,w){if(!s)return[];const T=[],A=function(V,H,Q,J,ie,ce){let ye=0;for(let ze=0;ze<V.length();ze++){const xe=V.getSection(ze);ye+=jp(V.getCharCode(ze),xe,J,ie,H,ce)}return ye/Math.max(1,Math.ceil(ye/Q))}(s,t,o,c,g,w),I=s.text.indexOf("")>=0;let B=0;for(let V=0;V<s.length();V++){const H=s.getSection(V),Q=s.getCharCode(V);if(dh[Q]||(B+=jp(Q,H,c,g,t,w)),V<s.length()-1){const J=!((N=Q)<11904)&&(!!Tr["CJK Compatibility Forms"](N)||!!Tr["CJK Compatibility"](N)||!!Tr["CJK Strokes"](N)||!!Tr["CJK Symbols and Punctuation"](N)||!!Tr["Enclosed CJK Letters and Months"](N)||!!Tr["Halfwidth and Fullwidth Forms"](N)||!!Tr["Ideographic Description Characters"](N)||!!Tr["Vertical Forms"](N)||td.test(String.fromCodePoint(N)));(fh[Q]||J||H.imageName||V!==s.length()-2&&ag[s.getCharCode(V+1)])&&T.push(xf(V+1,B,A,T,Fp(Q,s.getCharCode(V+1),J&&I),!1))}}var N;return sg(xf(s.length(),B,A,T,0,!0))}function Vp(s){let t=.5,o=.5;switch(s){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:t,verticalAlign:o}}function og(s,t,o){const c=t.getMaxScale()*Gi,{maxImageWidth:g,maxImageHeight:w}=t.getMaxImageSize(s),T=Math.max(c,w*o);return{verticalLineContentWidth:Math.max(c,g*o),horizontalLineContentHeight:T}}function $p(s){switch(s){case"top":return 0;case"center":return .5;default:return 1}}function ph(s,t,o){return!(s===y.al.horizontal||!t&&!Ms(o)||t&&(dh[o]||(c=o,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(c)))));var c}function bf(s,t,o,c,g,w){const T=w[s.fontStack],A=function(B,N,V,H){if(B&&B.rect)return B;const Q=N[V.fontStack],J=Q&&Q[H];return J?{rect:null,metrics:J.metrics}:null}(T&&T[t],g,s,t);if(A===null)return null;let I;if(o)I=c.verticalLineContentWidth-s.scale*Gi;else{const B=$p(s.verticalAlign);I=(c.horizontalLineContentHeight-s.scale*Gi)*B}return{rect:A.rect,metrics:A.metrics,baselineOffset:I}}function lg(s,t,o,c,g){const w=g[s.imageName];if(!w)return null;const T=w.paddedRect,A=w.displaySize,I={width:A[0],height:A[1],left:ca,top:-3,advance:t?A[1]:A[0]};let B;if(t)B=c.verticalLineContentWidth-A[1]*s.scale;else{const N=$p(s.verticalAlign);B=(c.horizontalLineContentHeight-A[1]*s.scale)*N}return{rect:T,metrics:I,baselineOffset:B,imageOffset:(t?A[0]:A[1])*s.scale-Gi*o}}function ug(s,t,o,c){if(c===0)return;const g=s[o],w=(s[o].x+g.metrics.advance*g.scale)*c;for(let T=t;T<=o;T++)s[T].x-=w}function h0(s,t,o){const{horizontalAlign:c,verticalAlign:g}=Vp(o),w=t[0]-s.displaySize[0]*c,T=t[1]-s.displaySize[1]*g;return{image:s,top:T,bottom:T+s.displaySize[1],left:w,right:w+s.displaySize[0]}}function Zp(s){var t,o;let c=s.left,g=s.top,w=s.right-c,T=s.bottom-g;const A=(t=s.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",I=(o=s.image.textFitHeight)!==null&&o!==void 0?o:"stretchOrShrink",B=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(I==="proportional"){if(A==="stretchOnly"&&w/T<B||A==="proportional"){const N=Math.ceil(T*B);c*=N/w,w=N}}else if(A==="proportional"&&I==="stretchOnly"&&B!==0&&w/T>B){const N=Math.ceil(w/B);g*=N/T,T=N}return{x1:c,y1:g,x2:c+w,y2:g+T}}function hc(s,t,o,c,g,w){const T=s.image;let A;if(T.content){const ce=T.content,ye=T.pixelRatio||1;A=[ce[0]/ye,ce[1]/ye,T.displaySize[0]-ce[2]/ye,T.displaySize[1]-ce[3]/ye]}const I=t.left*w,B=t.right*w;let N,V,H,Q;o==="width"||o==="both"?(Q=g[0]+I-c[3],V=g[0]+B+c[1]):(Q=g[0]+(I+B-T.displaySize[0])/2,V=Q+T.displaySize[0]);const J=t.top*w,ie=t.bottom*w;return o==="height"||o==="both"?(N=g[1]+J-c[0],H=g[1]+ie+c[2]):(N=g[1]+(J+ie-T.displaySize[1])/2,H=N+T.displaySize[1]),{image:T,top:N,right:V,bottom:H,left:Q,collisionPadding:A}}const mh=255,Yr=128,Io=mh*Yr;function cg(s,t){const{expression:o}=t;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new mr(s+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:c,interpolationType:g}=o;let w=0;for(;w<c.length&&c[w]<=s;)w++;w=Math.max(0,w-1);let T=w;for(;T<c.length&&c[T]<s+1;)T++;T=Math.min(c.length-1,T);const A=c[w],I=c[T];return o.kind==="composite"?{kind:"composite",minZoom:A,maxZoom:I,interpolationType:g}:{kind:"camera",minZoom:A,maxZoom:I,minSize:o.evaluate(new mr(A)),maxSize:o.evaluate(new mr(I)),interpolationType:g}}}function wf(s,t,o){let c="never";const g=s.get(t);return g?c=g:s.get(o)&&(c="always"),c}const d0=oc.VectorTileFeature.types,f0=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Sf(s,t,o,c,g,w,T,A,I,B,N,V,H){const Q=A?Math.min(Io,Math.round(A[0])):0,J=A?Math.min(Io,Math.round(A[1])):0;s.emplaceBack(t,o,Math.round(32*c),Math.round(32*g),w,T,(Q<<1)+(I?1:0),J,16*B,16*N,256*V,256*H)}function gh(s,t,o){s.emplaceBack(t.x,t.y,o),s.emplaceBack(t.x,t.y,o),s.emplaceBack(t.x,t.y,o),s.emplaceBack(t.x,t.y,o)}function yh(s){for(const t of s.sections)if(Ir(t.text))return!0;return!1}class wd{constructor(t){this.layoutVertexArray=new He,this.indexArray=new Tt,this.programConfigurations=t,this.segments=new tr,this.dynamicLayoutVertexArray=new at,this.opacityVertexArray=new ot,this.hasVisibleVertices=!1,this.placedSymbolArray=new j}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,o,c,g){this.isEmpty()||(c&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,rn.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,pu.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,f0,!0),this.opacityVertexBuffer.itemSize=1),(c||g)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Bt("SymbolBuffers",wd);class _h{constructor(t,o,c){this.layoutVertexArray=new t,this.layoutAttributes=o,this.indexArray=new c,this.segments=new tr,this.collisionVertexArray=new It}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,lc.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Bt("CollisionBuffers",_h);class gu{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(T=>T.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=cg(this.zoom,o["text-size"]),this.iconSizeData=cg(this.zoom,o["icon-size"]);const c=this.layers[0].layout,g=c.get("symbol-sort-key"),w=c.get("symbol-z-order");this.canOverlap=wf(c,"text-overlap","text-allow-overlap")!=="never"||wf(c,"icon-overlap","icon-allow-overlap")!=="never"||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey=w!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(w==="viewport-y"||w==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,c.get("symbol-placement")==="point"&&(this.writingModes=c.get("text-writing-mode").map(T=>y.al[T])),this.stateDependentLayerIds=this.layers.filter(T=>T.isStateDependent()).map(T=>T.id),this.sourceID=t.sourceID}createArrays(){this.text=new wd(new Ao(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new wd(new Ao(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new Z,this.lineVertexArray=new te,this.symbolInstances=new $,this.textAnchorOffsets=new fe}calculateGlyphDependencies(t,o,c,g,w){for(let T=0;T<t.length;T++)if(o[t.charCodeAt(T)]=!0,(c||g)&&w){const A=_l[t.charAt(T)];A&&(o[A.charCodeAt(0)]=!0)}}populate(t,o,c){const g=this.layers[0],w=g.layout,T=w.get("text-font"),A=w.get("text-field"),I=w.get("icon-image"),B=(A.value.kind!=="constant"||A.value.value instanceof jn&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),N=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,V=w.get("symbol-sort-key");if(this.features=[],!B&&!N)return;const H=o.iconDependencies,Q=o.glyphDependencies,J=o.availableImages,ie=new mr(this.zoom);for(const{feature:ce,id:ye,index:ze,sourceLayerIndex:xe}of t){const K=g._featureFilter.needGeometry,le=Es(ce,K);if(!g._featureFilter.filter(ie,le,c))continue;let Te,Ge;if(K||(le.geometry=Ln(ce)),B){const Xe=g.getValueAndResolveTokens("text-field",le,c,J),it=jn.factory(Xe),bt=this.hasRTLText=this.hasRTLText||yh(it);(!bt||Gr.getRTLTextPluginStatus()==="unavailable"||bt&&Gr.isParsed())&&(Te=ch(it,g,le))}if(N){const Xe=g.getValueAndResolveTokens("icon-image",le,c,J);Ge=Xe instanceof Xn?Xe:Xn.fromString(Xe)}if(!Te&&!Ge)continue;const mt=this.sortFeaturesByKey?V.evaluate(le,{},c):void 0;if(this.features.push({id:ye,text:Te,icon:Ge,index:ze,sourceLayerIndex:xe,geometry:le.geometry,properties:ce.properties,type:d0[ce.type],sortKey:mt}),Ge&&(H[Ge.name]=!0),Te){const Xe=T.evaluate(le,{},c).join(","),it=w.get("text-rotation-alignment")!=="viewport"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(y.al.vertical)>=0;for(const bt of Te.sections)if(bt.image)H[bt.image.name]=!0;else{const gt=Vs(Te.toString()),St=bt.fontStack||Xe,st=Q[St]=Q[St]||{};this.calculateGlyphDependencies(bt.text,st,it,this.allowVerticalPlacement,gt)}}}w.get("symbol-placement")==="line"&&(this.features=function(ce){const ye={},ze={},xe=[];let K=0;function le(Xe){xe.push(ce[Xe]),K++}function Te(Xe,it,bt){const gt=ze[Xe];return delete ze[Xe],ze[it]=gt,xe[gt].geometry[0].pop(),xe[gt].geometry[0]=xe[gt].geometry[0].concat(bt[0]),gt}function Ge(Xe,it,bt){const gt=ye[it];return delete ye[it],ye[Xe]=gt,xe[gt].geometry[0].shift(),xe[gt].geometry[0]=bt[0].concat(xe[gt].geometry[0]),gt}function mt(Xe,it,bt){const gt=bt?it[0][it[0].length-1]:it[0][0];return`${Xe}:${gt.x}:${gt.y}`}for(let Xe=0;Xe<ce.length;Xe++){const it=ce[Xe],bt=it.geometry,gt=it.text?it.text.toString():null;if(!gt){le(Xe);continue}const St=mt(gt,bt),st=mt(gt,bt,!0);if(St in ze&&st in ye&&ze[St]!==ye[st]){const Ot=Ge(St,st,bt),Yt=Te(St,st,xe[Ot].geometry);delete ye[St],delete ze[st],ze[mt(gt,xe[Yt].geometry,!0)]=Yt,xe[Ot].geometry=null}else St in ze?Te(St,st,bt):st in ye?Ge(St,st,bt):(le(Xe),ye[St]=K-1,ze[st]=K-1)}return xe.filter(Xe=>Xe.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ce,ye)=>ce.sortKey-ye.sortKey)}update(t,o,c){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,o,this.layers,c),this.icon.programConfigurations.updatePaintArrays(t,o,this.layers,c))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,o){const c=this.lineVertexArray.length;if(t.segment!==void 0){let g=t.dist(o[t.segment+1]),w=t.dist(o[t.segment]);const T={};for(let A=t.segment+1;A<o.length;A++)T[A]={x:o[A].x,y:o[A].y,tileUnitDistanceFromAnchor:g},A<o.length-1&&(g+=o[A+1].dist(o[A]));for(let A=t.segment||0;A>=0;A--)T[A]={x:o[A].x,y:o[A].y,tileUnitDistanceFromAnchor:w},A>0&&(w+=o[A-1].dist(o[A]));for(let A=0;A<o.length;A++){const I=T[A];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(t,o,c,g,w,T,A,I,B,N,V,H){const Q=t.indexArray,J=t.layoutVertexArray,ie=t.segments.prepareSegment(4*o.length,J,Q,this.canOverlap?T.sortKey:void 0),ce=this.glyphOffsetArray.length,ye=ie.vertexLength,ze=this.allowVerticalPlacement&&A===y.al.vertical?Math.PI/2:0,xe=T.text&&T.text.sections;for(let K=0;K<o.length;K++){const{tl:le,tr:Te,bl:Ge,br:mt,tex:Xe,pixelOffsetTL:it,pixelOffsetBR:bt,minFontScaleX:gt,minFontScaleY:St,glyphOffset:st,isSDF:Ot,sectionIndex:Yt}=o[K],qt=ie.vertexLength,jt=st[1];Sf(J,I.x,I.y,le.x,jt+le.y,Xe.x,Xe.y,c,Ot,it.x,it.y,gt,St),Sf(J,I.x,I.y,Te.x,jt+Te.y,Xe.x+Xe.w,Xe.y,c,Ot,bt.x,it.y,gt,St),Sf(J,I.x,I.y,Ge.x,jt+Ge.y,Xe.x,Xe.y+Xe.h,c,Ot,it.x,bt.y,gt,St),Sf(J,I.x,I.y,mt.x,jt+mt.y,Xe.x+Xe.w,Xe.y+Xe.h,c,Ot,bt.x,bt.y,gt,St),gh(t.dynamicLayoutVertexArray,I,ze),Q.emplaceBack(qt,qt+2,qt+1),Q.emplaceBack(qt+1,qt+2,qt+3),ie.vertexLength+=4,ie.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(st[0]),K!==o.length-1&&Yt===o[K+1].sectionIndex||t.programConfigurations.populatePaintArrays(J.length,T,T.index,{},H,xe&&xe[Yt])}t.placedSymbolArray.emplaceBack(I.x,I.y,ce,this.glyphOffsetArray.length-ce,ye,B,N,I.segment,c?c[0]:0,c?c[1]:0,g[0],g[1],A,0,!1,0,V)}_addCollisionDebugVertex(t,o,c,g,w,T){return o.emplaceBack(0,0),t.emplaceBack(c.x,c.y,g,w,Math.round(T.x),Math.round(T.y))}addCollisionDebugVertices(t,o,c,g,w,T,A){const I=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),B=I.vertexLength,N=w.layoutVertexArray,V=w.collisionVertexArray,H=A.anchorX,Q=A.anchorY;this._addCollisionDebugVertex(N,V,T,H,Q,new G(t,o)),this._addCollisionDebugVertex(N,V,T,H,Q,new G(c,o)),this._addCollisionDebugVertex(N,V,T,H,Q,new G(c,g)),this._addCollisionDebugVertex(N,V,T,H,Q,new G(t,g)),I.vertexLength+=4;const J=w.indexArray;J.emplaceBack(B,B+1),J.emplaceBack(B+1,B+2),J.emplaceBack(B+2,B+3),J.emplaceBack(B+3,B),I.primitiveLength+=4}addDebugCollisionBoxes(t,o,c,g){for(let w=t;w<o;w++){const T=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(T.x1,T.y1,T.x2,T.y2,g?this.textCollisionBox:this.iconCollisionBox,T.anchorPoint,c)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new _h(rt,_f.members,pt),this.iconCollisionBox=new _h(rt,_f.members,pt);for(let t=0;t<this.symbolInstances.length;t++){const o=this.symbolInstances.get(t);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(t,o,c,g,w,T,A,I,B){const N={};for(let V=o;V<c;V++){const H=t.get(V);N.textBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},N.textFeatureIndex=H.featureIndex;break}for(let V=g;V<w;V++){const H=t.get(V);N.verticalTextBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},N.verticalTextFeatureIndex=H.featureIndex;break}for(let V=T;V<A;V++){const H=t.get(V);N.iconBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},N.iconFeatureIndex=H.featureIndex;break}for(let V=I;V<B;V++){const H=t.get(V);N.verticalIconBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},N.verticalIconFeatureIndex=H.featureIndex;break}return N}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const c=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,o){const c=t.placedSymbolArray.get(o),g=c.vertexStartIndex+4*c.numGlyphs;for(let w=c.vertexStartIndex;w<g;w+=4)t.indexArray.emplaceBack(w,w+2,w+1),t.indexArray.emplaceBack(w+1,w+2,w+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(t),c=Math.cos(t),g=[],w=[],T=[];for(let A=0;A<this.symbolInstances.length;++A){T.push(A);const I=this.symbolInstances.get(A);g.push(0|Math.round(o*I.anchorX+c*I.anchorY)),w.push(I.featureIndex)}return T.sort((A,I)=>g[A]-g[I]||w[I]-w[A]),T}addToSortKeyRanges(t,o){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===o?c.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const c=this.symbolInstances.get(o);this.featureSortOrder.push(c.featureIndex),[c.rightJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.leftJustifiedTextSymbolIndex].forEach((g,w,T)=>{g>=0&&T.indexOf(g)===w&&this.addIndicesForPlacedSymbol(this.text,g)}),c.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,c.verticalPlacedTextSymbolIndex),c.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.placedIconSymbolIndex),c.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let yu,Ys;Bt("SymbolBucket",gu,{omit:["layers","collisionBoxArray","features","compareText"]}),gu.MAX_GLYPHS=65535,gu.addDynamicAttributes=gh;var dc={get paint(){return Ys=Ys||new Zn({"icon-opacity":new Kt(oe.paint_symbol["icon-opacity"]),"icon-color":new Kt(oe.paint_symbol["icon-color"]),"icon-halo-color":new Kt(oe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Kt(oe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Kt(oe.paint_symbol["icon-halo-blur"]),"icon-translate":new $t(oe.paint_symbol["icon-translate"]),"icon-translate-anchor":new $t(oe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Kt(oe.paint_symbol["text-opacity"]),"text-color":new Kt(oe.paint_symbol["text-color"],{runtimeType:Hr,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new Kt(oe.paint_symbol["text-halo-color"]),"text-halo-width":new Kt(oe.paint_symbol["text-halo-width"]),"text-halo-blur":new Kt(oe.paint_symbol["text-halo-blur"]),"text-translate":new $t(oe.paint_symbol["text-translate"]),"text-translate-anchor":new $t(oe.paint_symbol["text-translate-anchor"])})},get layout(){return yu=yu||new Zn({"symbol-placement":new $t(oe.layout_symbol["symbol-placement"]),"symbol-spacing":new $t(oe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new $t(oe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Kt(oe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new $t(oe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new $t(oe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new $t(oe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new $t(oe.layout_symbol["icon-ignore-placement"]),"icon-optional":new $t(oe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new $t(oe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Kt(oe.layout_symbol["icon-size"]),"icon-text-fit":new $t(oe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new $t(oe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Kt(oe.layout_symbol["icon-image"]),"icon-rotate":new Kt(oe.layout_symbol["icon-rotate"]),"icon-padding":new Kt(oe.layout_symbol["icon-padding"]),"icon-keep-upright":new $t(oe.layout_symbol["icon-keep-upright"]),"icon-offset":new Kt(oe.layout_symbol["icon-offset"]),"icon-anchor":new Kt(oe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new $t(oe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new $t(oe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new $t(oe.layout_symbol["text-rotation-alignment"]),"text-field":new Kt(oe.layout_symbol["text-field"]),"text-font":new Kt(oe.layout_symbol["text-font"]),"text-size":new Kt(oe.layout_symbol["text-size"]),"text-max-width":new Kt(oe.layout_symbol["text-max-width"]),"text-line-height":new $t(oe.layout_symbol["text-line-height"]),"text-letter-spacing":new Kt(oe.layout_symbol["text-letter-spacing"]),"text-justify":new Kt(oe.layout_symbol["text-justify"]),"text-radial-offset":new Kt(oe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new $t(oe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Kt(oe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Kt(oe.layout_symbol["text-anchor"]),"text-max-angle":new $t(oe.layout_symbol["text-max-angle"]),"text-writing-mode":new $t(oe.layout_symbol["text-writing-mode"]),"text-rotate":new Kt(oe.layout_symbol["text-rotate"]),"text-padding":new $t(oe.layout_symbol["text-padding"]),"text-keep-upright":new $t(oe.layout_symbol["text-keep-upright"]),"text-transform":new Kt(oe.layout_symbol["text-transform"]),"text-offset":new Kt(oe.layout_symbol["text-offset"]),"text-allow-overlap":new $t(oe.layout_symbol["text-allow-overlap"]),"text-overlap":new $t(oe.layout_symbol["text-overlap"]),"text-ignore-placement":new $t(oe.layout_symbol["text-ignore-placement"]),"text-optional":new $t(oe.layout_symbol["text-optional"])})}};class hg{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:Er,this.defaultValue=t}evaluate(t){if(t.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(t.formattedSection))return o.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Bt("FormatSectionOverride",hg,{omit:["defaultValue"]});class Sd extends Pa{constructor(t){super(t,dc)}recalculate(t,o){if(super.recalculate(t,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const c=this.layout.get("text-writing-mode");if(c){const g=[];for(const w of c)g.indexOf(w)<0&&g.push(w);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,o,c,g){const w=this.layout.get(t).evaluate(o,{},c,g),T=this._unevaluatedLayout._values[t];return T.isDataDriven()||bn(T.value)||!w?w:function(A,I){return I.replace(/{([^{}]+)}/g,(B,N)=>A&&N in A?String(A[N]):"")}(o.properties,w)}createBucket(t){return new gu(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of dc.paint.overridableProperties){if(!Sd.hasPaintOverride(this.layout,t))continue;const o=this.paint.get(t),c=new hg(o),g=new Vc(c,o.property.specification);let w=null;w=o.value.kind==="constant"||o.value.kind==="source"?new yo("source",g):new Vl("composite",g,o.value.zoomStops),this.paint._values[t]=new As(o.property,w,o.parameters)}}_handleOverridablePaintPropertyUpdate(t,o,c){return!(!this.layout||o.isDataDriven()||c.isDataDriven())&&Sd.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,o){const c=t.get("text-field"),g=dc.paint.properties[o];let w=!1;const T=A=>{for(const I of A)if(g.overrides&&g.overrides.hasOverride(I))return void(w=!0)};if(c.value.kind==="constant"&&c.value.value instanceof jn)T(c.value.value.sections);else if(c.value.kind==="source"){const A=B=>{w||(B instanceof wa&&wi(B.value)===_n?T(B.value.sections):B instanceof Du?T(B.sections):B.eachChild(A))},I=c.value;I._styleExpression&&A(I._styleExpression.expression)}return w}}let qp;var dg={get paint(){return qp=qp||new Zn({"background-color":new $t(oe.paint_background["background-color"]),"background-pattern":new Qc(oe.paint_background["background-pattern"]),"background-opacity":new $t(oe.paint_background["background-opacity"])})}};class p0 extends Pa{constructor(t){super(t,dg)}}let Tf;var fg={get paint(){return Tf=Tf||new Zn({"raster-opacity":new $t(oe.paint_raster["raster-opacity"]),"raster-hue-rotate":new $t(oe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new $t(oe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new $t(oe.paint_raster["raster-brightness-max"]),"raster-saturation":new $t(oe.paint_raster["raster-saturation"]),"raster-contrast":new $t(oe.paint_raster["raster-contrast"]),"raster-resampling":new $t(oe.paint_raster["raster-resampling"]),"raster-fade-duration":new $t(oe.paint_raster["raster-fade-duration"])})}};class pg extends Pa{constructor(t){super(t,fg)}}class m0 extends Pa{constructor(t){super(t,{}),this.onAdd=o=>{this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)},this.onRemove=o=>{this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Gp{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Hp={once:!0},Wp=63710088e-1;class _u{constructor(t,o){if(isNaN(t)||isNaN(o))throw new Error(`Invalid LngLat object: (${t}, ${o})`);if(this.lng=+t,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new _u(nr(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const o=Math.PI/180,c=this.lat*o,g=t.lat*o,w=Math.sin(c)*Math.sin(g)+Math.cos(c)*Math.cos(g)*Math.cos((t.lng-this.lng)*o);return Wp*Math.acos(Math.min(w,1))}static convert(t){if(t instanceof _u)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new _u(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new _u(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const vh=2*Math.PI*Wp;function mg(s){return vh*Math.cos(s*Math.PI/180)}function Kp(s){return(180+s)/360}function Xr(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function Mf(s,t){return s/mg(t)}function xh(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function Af(s,t){return s*mg(xh(t))}class bh{constructor(t,o,c=0){this.x=+t,this.y=+o,this.z=+c}static fromLngLat(t,o=0){const c=_u.convert(t);return new bh(Kp(c.lng),Xr(c.lat),Mf(o,c.lat))}toLngLat(){return new _u(360*this.x-180,xh(this.y))}toAltitude(){return Af(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/vh*(t=xh(this.y),1/Math.cos(t*Math.PI/180));var t}}function Cf(s,t,o){var c=2*Math.PI*6378137/256/Math.pow(2,o);return[s*c-2*Math.PI*6378137/2,t*c-2*Math.PI*6378137/2]}class fc{constructor(t,o,c){if(!function(g,w,T){return!(g<0||g>25||T<0||T>=Math.pow(2,g)||w<0||w>=Math.pow(2,g))}(t,o,c))throw new Error(`x=${o}, y=${c}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=o,this.y=c,this.key=pc(0,t,t,o,c)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,o,c){const g=(T=this.y,A=this.z,I=Cf(256*(w=this.x),256*(T=Math.pow(2,A)-T-1),A),B=Cf(256*(w+1),256*(T+1),A),I[0]+","+I[1]+","+B[0]+","+B[1]);var w,T,A,I,B;const N=function(V,H,Q){let J,ie="";for(let ce=V;ce>0;ce--)J=1<<ce-1,ie+=(H&J?1:0)+(Q&J?2:0);return ie}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(c==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,N).replace(/{bbox-epsg-3857}/g,g)}isChildOf(t){const o=this.z-t.z;return o>0&&t.x===this.x>>o&&t.y===this.y>>o}getTilePoint(t){const o=Math.pow(2,this.z);return new G((t.x*o-this.x)*Rt,(t.y*o-this.y)*Rt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Td{constructor(t,o){this.wrap=t,this.canonical=o,this.key=pc(t,o.z,o.z,o.x,o.y)}}class Hn{constructor(t,o,c,g,w){if(this.terrainRttPosMatrix32f=null,t<c)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${c}`);this.overscaledZ=t,this.wrap=o,this.canonical=new fc(c,+g,+w),this.key=pc(o,t,c,g,w)}clone(){return new Hn(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-t;return t>this.canonical.z?new Hn(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Hn(t,this.wrap,t,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(t,o){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-t;return t>this.canonical.z?pc(this.wrap*+o,t,this.canonical.z,this.canonical.x,this.canonical.y):pc(this.wrap*+o,t,t,this.canonical.x>>c,this.canonical.y>>c)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const o=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>o&&t.canonical.y===this.canonical.y>>o}children(t){if(this.overscaledZ>=t)return[new Hn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,c=2*this.canonical.x,g=2*this.canonical.y;return[new Hn(o,this.wrap,o,c,g),new Hn(o,this.wrap,o,c+1,g),new Hn(o,this.wrap,o,c,g+1),new Hn(o,this.wrap,o,c+1,g+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Hn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Hn(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Td(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new bh(t.x-this.wrap,t.y))}}function pc(s,t,o,c,g){(s*=2)<0&&(s=-1*s-1);const w=1<<o;return(w*w*s+w*g+c).toString(36)+o.toString(36)+t.toString(36)}Bt("CanonicalTileID",fc),Bt("OverscaledTileID",Hn,{omit:["terrainRttPosMatrix32f"]});class gg{constructor(t,o,c,g=1,w=1,T=1,A=0){if(this.uid=t,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(c&&!["mapbox","terrarium","custom"].includes(c))return void zr(`"${c}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=o.height;const I=this.dim=o.height-2;switch(this.data=new Uint32Array(o.data.buffer),c){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=w,this.blueFactor=T,this.baseShift=A;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let B=0;B<I;B++)this.data[this._idx(-1,B)]=this.data[this._idx(0,B)],this.data[this._idx(I,B)]=this.data[this._idx(I-1,B)],this.data[this._idx(B,-1)]=this.data[this._idx(B,0)],this.data[this._idx(B,I)]=this.data[this._idx(B,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let B=0;B<I;B++)for(let N=0;N<I;N++){const V=this.get(B,N);V>this.max&&(this.max=V),V<this.min&&(this.min=V)}}get(t,o){const c=new Uint8Array(this.data.buffer),g=4*this._idx(t,o);return this.unpack(c[g],c[g+1],c[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,o){if(t<-1||t>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(t+1)}unpack(t,o,c){return t*this.redFactor+o*this.greenFactor+c*this.blueFactor-this.baseShift}getPixels(){return new za({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,o,c){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let g=o*this.dim,w=o*this.dim+this.dim,T=c*this.dim,A=c*this.dim+this.dim;switch(o){case-1:g=w-1;break;case 1:w=g+1}switch(c){case-1:T=A-1;break;case 1:A=T+1}const I=-o*this.dim,B=-c*this.dim;for(let N=T;N<A;N++)for(let V=g;V<w;V++)this.data[this._idx(V,N)]=t.data[this._idx(V+I,N+B)]}}Bt("DEMData",gg);class yg{constructor(t){this._stringToNumber={},this._numberToString=[];for(let o=0;o<t.length;o++){const c=t[o];this._stringToNumber[c]=o,this._numberToString[o]=c}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class Yp{constructor(t,o,c,g,w){this.type="Feature",this._vectorTileFeature=t,t._z=o,t._x=c,t._y=g,this.properties=t.properties,this.id=w}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(t[o]=this[o]);return t}}class Xp{constructor(t,o){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new di(Rt,16,0),this.grid3D=new di(Rt,16,0),this.featureIndexArray=new ge,this.promoteId=o}insert(t,o,c,g,w,T){const A=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,g,w);const I=T?this.grid3D:this.grid;for(let B=0;B<o.length;B++){const N=o[B],V=[1/0,1/0,-1/0,-1/0];for(let H=0;H<N.length;H++){const Q=N[H];V[0]=Math.min(V[0],Q.x),V[1]=Math.min(V[1],Q.y),V[2]=Math.max(V[2],Q.x),V[3]=Math.max(V[3],Q.y)}V[0]<Rt&&V[1]<Rt&&V[2]>=0&&V[3]>=0&&I.insert(A,V[0],V[1],V[2],V[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new oc.VectorTile(new vl(this.rawTileData)).layers,this.sourceLayerCoder=new yg(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,o,c,g){this.loadVTLayers();const w=t.params,T=Rt/t.tileSize/t.scale,A=Xa(w.filter),I=t.queryGeometry,B=t.queryPadding*T,N=mi(I),V=this.grid.query(N.minX-B,N.minY-B,N.maxX+B,N.maxY+B),H=mi(t.cameraQueryGeometry),Q=this.grid3D.query(H.minX-B,H.minY-B,H.maxX+B,H.maxY+B,(ce,ye,ze,xe)=>function(K,le,Te,Ge,mt){for(const it of K)if(le<=it.x&&Te<=it.y&&Ge>=it.x&&mt>=it.y)return!0;const Xe=[new G(le,Te),new G(le,mt),new G(Ge,mt),new G(Ge,Te)];if(K.length>2){for(const it of Xe)if(eu(K,it))return!0}for(let it=0;it<K.length-1;it++)if(ol(K[it],K[it+1],Xe))return!0;return!1}(t.cameraQueryGeometry,ce-B,ye-B,ze+B,xe+B));for(const ce of Q)V.push(ce);V.sort(Qp);const J={};let ie;for(let ce=0;ce<V.length;ce++){const ye=V[ce];if(ye===ie)continue;ie=ye;const ze=this.featureIndexArray.get(ye);let xe=null;this.loadMatchingFeature(J,ze.bucketIndex,ze.sourceLayerIndex,ze.featureIndex,A,w.layers,w.availableImages,o,c,g,(K,le,Te)=>(xe||(xe=Ln(K)),le.queryIntersectsFeature({queryGeometry:I,feature:K,featureState:Te,geometry:xe,zoom:this.z,transform:t.transform,pixelsToTileUnits:T,pixelPosMatrix:t.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:t.getElevation})))}return J}loadMatchingFeature(t,o,c,g,w,T,A,I,B,N,V){const H=this.bucketLayerIDs[o];if(T&&!H.some(ce=>T.has(ce)))return;const Q=this.sourceLayerCoder.decode(c),J=this.vtLayers[Q].feature(g);if(w.needGeometry){const ce=Es(J,!0);if(!w.filter(new mr(this.tileID.overscaledZ),ce,this.tileID.canonical))return}else if(!w.filter(new mr(this.tileID.overscaledZ),J))return;const ie=this.getId(J,Q);for(let ce=0;ce<H.length;ce++){const ye=H[ce];if(T&&!T.has(ye))continue;const ze=I[ye];if(!ze)continue;let xe={};ie&&N&&(xe=N.getState(ze.sourceLayer||"_geojsonTileLayer",ie));const K=Qr({},B[ye]);K.paint=Md(K.paint,ze.paint,J,xe,A),K.layout=Md(K.layout,ze.layout,J,xe,A);const le=!V||V(J,ze,xe);if(!le)continue;const Te=new Yp(J,this.z,this.x,this.y,ie);Te.layer=K;let Ge=t[ye];Ge===void 0&&(Ge=t[ye]=[]),Ge.push({featureIndex:g,feature:Te,intersectionZ:le})}}lookupSymbolFeatures(t,o,c,g,w,T,A,I){const B={};this.loadVTLayers();const N=Xa(w);for(const V of t)this.loadMatchingFeature(B,c,g,V,N,T,A,I,o);return B}hasLayer(t){for(const o of this.bucketLayerIDs)for(const c of o)if(t===c)return!0;return!1}getId(t,o){var c;let g=t.id;return this.promoteId&&(g=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof g=="boolean"&&(g=Number(g)),g===void 0&&(!((c=t.properties)===null||c===void 0)&&c.cluster)&&this.promoteId&&(g=Number(t.properties.cluster_id))),g}}function Md(s,t,o,c,g){return ti(s,(w,T)=>{const A=t instanceof Ri?t.get(T):null;return A&&A.evaluate?A.evaluate(o,c,g):A})}function mi(s){let t=1/0,o=1/0,c=-1/0,g=-1/0;for(const w of s)t=Math.min(t,w.x),o=Math.min(o,w.y),c=Math.max(c,w.x),g=Math.max(g,w.y);return{minX:t,minY:o,maxX:c,maxY:g}}function Qp(s,t){return t-s}function Wn(s,t,o,c,g){const w=[];for(let T=0;T<s.length;T++){const A=s[T];let I;for(let B=0;B<A.length-1;B++){let N=A[B],V=A[B+1];N.x<t&&V.x<t||(N.x<t?N=new G(t,N.y+(t-N.x)/(V.x-N.x)*(V.y-N.y))._round():V.x<t&&(V=new G(t,N.y+(t-N.x)/(V.x-N.x)*(V.y-N.y))._round()),N.y<o&&V.y<o||(N.y<o?N=new G(N.x+(o-N.y)/(V.y-N.y)*(V.x-N.x),o)._round():V.y<o&&(V=new G(N.x+(o-N.y)/(V.y-N.y)*(V.x-N.x),o)._round()),N.x>=c&&V.x>=c||(N.x>=c?N=new G(c,N.y+(c-N.x)/(V.x-N.x)*(V.y-N.y))._round():V.x>=c&&(V=new G(c,N.y+(c-N.x)/(V.x-N.x)*(V.y-N.y))._round()),N.y>=g&&V.y>=g||(N.y>=g?N=new G(N.x+(g-N.y)/(V.y-N.y)*(V.x-N.x),g)._round():V.y>=g&&(V=new G(N.x+(g-N.y)/(V.y-N.y)*(V.x-N.x),g)._round()),I&&N.equals(I[I.length-1])||(I=[N],w.push(I)),I.push(V)))))}}return w}Bt("FeatureIndex",Xp,{omit:["rawTileData","sourceLayerCoder"]});class vu extends G{constructor(t,o,c,g){super(t,o),this.angle=c,g!==void 0&&(this.segment=g)}clone(){return new vu(this.x,this.y,this.angle,this.segment)}}function Ef(s,t,o,c,g){if(t.segment===void 0||o===0)return!0;let w=t,T=t.segment+1,A=0;for(;A>-o/2;){if(T--,T<0)return!1;A-=s[T].dist(w),w=s[T]}A+=s[T].dist(s[T+1]),T++;const I=[];let B=0;for(;A<o/2;){const N=s[T],V=s[T+1];if(!V)return!1;let H=s[T-1].angleTo(N)-N.angleTo(V);for(H=Math.abs((H+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:A,angleDelta:H}),B+=H;A-I[0].distance>c;)B-=I.shift().angleDelta;if(B>g)return!1;T++,A+=N.dist(V)}return!0}function Pf(s){let t=0;for(let o=0;o<s.length-1;o++)t+=s[o].dist(s[o+1]);return t}function Ad(s,t,o){return s?.6*t*o:0}function Jp(s,t){return Math.max(s?s.right-s.left:0,t?t.right-t.left:0)}function _g(s,t,o,c,g,w){const T=Ad(o,g,w),A=Jp(o,c)*w;let I=0;const B=Pf(s)/2;for(let N=0;N<s.length-1;N++){const V=s[N],H=s[N+1],Q=V.dist(H);if(I+Q>B){const J=(B-I)/Q,ie=hi.number(V.x,H.x,J),ce=hi.number(V.y,H.y,J),ye=new vu(ie,ce,H.angleTo(V),N);return ye._round(),!T||Ef(s,ye,A,T,t)?ye:void 0}I+=Q}}function em(s,t,o,c,g,w,T,A,I){const B=Ad(c,w,T),N=Jp(c,g),V=N*T,H=s[0].x===0||s[0].x===I||s[0].y===0||s[0].y===I;return t-V<t/4&&(t=V+t/4),Rf(s,H?t/2*A%t:(N/2+2*w)*T*A%t,t,B,o,V,H,!1,I)}function Rf(s,t,o,c,g,w,T,A,I){const B=w/2,N=Pf(s);let V=0,H=t-o,Q=[];for(let J=0;J<s.length-1;J++){const ie=s[J],ce=s[J+1],ye=ie.dist(ce),ze=ce.angleTo(ie);for(;H+o<V+ye;){H+=o;const xe=(H-V)/ye,K=hi.number(ie.x,ce.x,xe),le=hi.number(ie.y,ce.y,xe);if(K>=0&&K<I&&le>=0&&le<I&&H-B>=0&&H+B<=N){const Te=new vu(K,le,ze,J);Te._round(),c&&!Ef(s,Te,w,c,g)||Q.push(Te)}}V+=ye}return A||Q.length||T||(Q=Rf(s,V/2,o,c,g,w,T,!0,I)),Q}Bt("Anchor",vu);const Cd=ca;function tm(s,t,o,c){const g=[],w=s.image,T=w.pixelRatio,A=w.paddedRect.w-2*Cd,I=w.paddedRect.h-2*Cd;let B={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};const N=w.stretchX||[[0,A]],V=w.stretchY||[[0,I]],H=(st,Ot)=>st+Ot[1]-Ot[0],Q=N.reduce(H,0),J=V.reduce(H,0),ie=A-Q,ce=I-J;let ye=0,ze=Q,xe=0,K=J,le=0,Te=ie,Ge=0,mt=ce;if(w.content&&c){const st=w.content,Ot=st[2]-st[0],Yt=st[3]-st[1];(w.textFitWidth||w.textFitHeight)&&(B=Zp(s)),ye=If(N,0,st[0]),xe=If(V,0,st[1]),ze=If(N,st[0],st[2]),K=If(V,st[1],st[3]),le=st[0]-ye,Ge=st[1]-xe,Te=Ot-ze,mt=Yt-K}const Xe=B.x1,it=B.y1,bt=B.x2-Xe,gt=B.y2-it,St=(st,Ot,Yt,qt)=>{const jt=Df(st.stretch-ye,ze,bt,Xe),fr=zf(st.fixed-le,Te,st.stretch,Q),ai=Df(Ot.stretch-xe,K,gt,it),ji=zf(Ot.fixed-Ge,mt,Ot.stretch,J),nn=Df(Yt.stretch-ye,ze,bt,Xe),Mn=zf(Yt.fixed-le,Te,Yt.stretch,Q),va=Df(qt.stretch-xe,K,gt,it),An=zf(qt.fixed-Ge,mt,qt.stretch,J),ci=new G(jt,ai),Cn=new G(nn,ai),En=new G(nn,va),an=new G(jt,va),aa=new G(fr/T,ji/T),ls=new G(Mn/T,An/T),Ji=t*Math.PI/180;if(Ji){const Hi=Math.sin(Ji),on=Math.cos(Ji),Ni=[on,-Hi,Hi,on];ci._matMult(Ni),Cn._matMult(Ni),an._matMult(Ni),En._matMult(Ni)}const Kn=st.stretch+st.fixed,sn=Ot.stretch+Ot.fixed;return{tl:ci,tr:Cn,bl:an,br:En,tex:{x:w.paddedRect.x+Cd+Kn,y:w.paddedRect.y+Cd+sn,w:Yt.stretch+Yt.fixed-Kn,h:qt.stretch+qt.fixed-sn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:aa,pixelOffsetBR:ls,minFontScaleX:Te/T/bt,minFontScaleY:mt/T/gt,isSDF:o}};if(c&&(w.stretchX||w.stretchY)){const st=rm(N,ie,Q),Ot=rm(V,ce,J);for(let Yt=0;Yt<st.length-1;Yt++){const qt=st[Yt],jt=st[Yt+1];for(let fr=0;fr<Ot.length-1;fr++)g.push(St(qt,Ot[fr],jt,Ot[fr+1]))}}else g.push(St({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:A+1},{fixed:0,stretch:I+1}));return g}function If(s,t,o){let c=0;for(const g of s)c+=Math.max(t,Math.min(o,g[1]))-Math.max(t,Math.min(o,g[0]));return c}function rm(s,t,o){const c=[{fixed:-1,stretch:0}];for(const[g,w]of s){const T=c[c.length-1];c.push({fixed:g-T.stretch,stretch:T.stretch}),c.push({fixed:g-T.stretch,stretch:T.stretch+(w-g)})}return c.push({fixed:t+Cd,stretch:o}),c}function Df(s,t,o,c){return s/t*o+c}function zf(s,t,o,c){return s-t*o/c}class wh{constructor(t,o,c,g,w,T,A,I,B,N){var V;if(this.boxStartIndex=t.length,B){let H=T.top,Q=T.bottom;const J=T.collisionPadding;J&&(H-=J[1],Q+=J[3]);let ie=Q-H;ie>0&&(ie=Math.max(10,ie),this.circleDiameter=ie)}else{const H=!((V=T.image)===null||V===void 0)&&V.content&&(T.image.textFitWidth||T.image.textFitHeight)?Zp(T):{x1:T.left,y1:T.top,x2:T.right,y2:T.bottom};H.y1=H.y1*A-I[0],H.y2=H.y2*A+I[2],H.x1=H.x1*A-I[3],H.x2=H.x2*A+I[1];const Q=T.collisionPadding;if(Q&&(H.x1-=Q[0]*A,H.y1-=Q[1]*A,H.x2+=Q[2]*A,H.y2+=Q[3]*A),N){const J=new G(H.x1,H.y1),ie=new G(H.x2,H.y1),ce=new G(H.x1,H.y2),ye=new G(H.x2,H.y2),ze=N*Math.PI/180;J._rotate(ze),ie._rotate(ze),ce._rotate(ze),ye._rotate(ze),H.x1=Math.min(J.x,ie.x,ce.x,ye.x),H.x2=Math.max(J.x,ie.x,ce.x,ye.x),H.y1=Math.min(J.y,ie.y,ce.y,ye.y),H.y2=Math.max(J.y,ie.y,ce.y,ye.y)}t.emplaceBack(o.x,o.y,H.x1,H.y1,H.x2,H.y2,c,g,w)}this.boxEndIndex=t.length}}class im{constructor(t=[],o=(c,g)=>c<g?-1:c>g?1:0){if(this.data=t,this.length=this.data.length,this.compare=o,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:o,compare:c}=this,g=o[t];for(;t>0;){const w=t-1>>1,T=o[w];if(c(g,T)>=0)break;o[t]=T,t=w}o[t]=g}_down(t){const{data:o,compare:c}=this,g=this.length>>1,w=o[t];for(;t<g;){let T=1+(t<<1);const A=T+1;if(A<this.length&&c(o[A],o[T])<0&&(T=A),c(o[T],w)>=0)break;o[t]=o[T],t=T}o[t]=w}}function g0(s,t=1,o=!1){let c=1/0,g=1/0,w=-1/0,T=-1/0;const A=s[0];for(let Q=0;Q<A.length;Q++){const J=A[Q];(!Q||J.x<c)&&(c=J.x),(!Q||J.y<g)&&(g=J.y),(!Q||J.x>w)&&(w=J.x),(!Q||J.y>T)&&(T=J.y)}const I=Math.min(w-c,T-g);let B=I/2;const N=new im([],y0);if(I===0)return new G(c,g);for(let Q=c;Q<w;Q+=I)for(let J=g;J<T;J+=I)N.push(new ha(Q+B,J+B,B,s));let V=function(Q){let J=0,ie=0,ce=0;const ye=Q[0];for(let ze=0,xe=ye.length,K=xe-1;ze<xe;K=ze++){const le=ye[ze],Te=ye[K],Ge=le.x*Te.y-Te.x*le.y;ie+=(le.x+Te.x)*Ge,ce+=(le.y+Te.y)*Ge,J+=3*Ge}return new ha(ie/J,ce/J,0,Q)}(s),H=N.length;for(;N.length;){const Q=N.pop();(Q.d>V.d||!V.d)&&(V=Q,o&&console.log("found best %d after %d probes",Math.round(1e4*Q.d)/1e4,H)),Q.max-V.d<=t||(B=Q.h/2,N.push(new ha(Q.p.x-B,Q.p.y-B,B,s)),N.push(new ha(Q.p.x+B,Q.p.y-B,B,s)),N.push(new ha(Q.p.x-B,Q.p.y+B,B,s)),N.push(new ha(Q.p.x+B,Q.p.y+B,B,s)),H+=4)}return o&&(console.log(`num probes: ${H}`),console.log(`best distance: ${V.d}`)),V.p}function y0(s,t){return t.max-s.max}function ha(s,t,o,c){this.p=new G(s,t),this.h=o,this.d=function(g,w){let T=!1,A=1/0;for(let I=0;I<w.length;I++){const B=w[I];for(let N=0,V=B.length,H=V-1;N<V;H=N++){const Q=B[N],J=B[H];Q.y>g.y!=J.y>g.y&&g.x<(J.x-Q.x)*(g.y-Q.y)/(J.y-Q.y)+Q.x&&(T=!T),A=Math.min(A,yp(g,Q,J))}}return(T?1:-1)*Math.sqrt(A)}(this.p,c),this.max=this.d+this.h*Math.SQRT2}var kn;y.aB=void 0,(kn=y.aB||(y.aB={}))[kn.center=1]="center",kn[kn.left=2]="left",kn[kn.right=3]="right",kn[kn.top=4]="top",kn[kn.bottom=5]="bottom",kn[kn["top-left"]=6]="top-left",kn[kn["top-right"]=7]="top-right",kn[kn["bottom-left"]=8]="bottom-left",kn[kn["bottom-right"]=9]="bottom-right";const xl=7,ja=Number.POSITIVE_INFINITY;function nm(s,t){return t[1]!==ja?function(o,c,g){let w=0,T=0;switch(c=Math.abs(c),g=Math.abs(g),o){case"top-right":case"top-left":case"top":T=g-xl;break;case"bottom-right":case"bottom-left":case"bottom":T=-g+xl}switch(o){case"top-right":case"bottom-right":case"right":w=-c;break;case"top-left":case"bottom-left":case"left":w=c}return[w,T]}(s,t[0],t[1]):function(o,c){let g=0,w=0;c<0&&(c=0);const T=c/Math.SQRT2;switch(o){case"top-right":case"top-left":w=T-xl;break;case"bottom-right":case"bottom-left":w=-T+xl;break;case"bottom":w=-c+xl;break;case"top":w=c-xl}switch(o){case"top-right":case"bottom-right":g=-T;break;case"top-left":case"bottom-left":g=T;break;case"left":g=c;break;case"right":g=-c}return[g,w]}(s,t[0])}function Ed(s,t,o){var c;const g=s.layout,w=(c=g.get("text-variable-anchor-offset"))===null||c===void 0?void 0:c.evaluate(t,{},o);if(w){const A=w.values,I=[];for(let B=0;B<A.length;B+=2){const N=I[B]=A[B],V=A[B+1].map(H=>H*Gi);N.startsWith("top")?V[1]-=xl:N.startsWith("bottom")&&(V[1]+=xl),I[B+1]=V}return new cn(I)}const T=g.get("text-variable-anchor");if(T){let A;A=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(t,{},o)*Gi,ja]:g.get("text-offset").evaluate(t,{},o).map(B=>B*Gi);const I=[];for(const B of T)I.push(B,nm(B,A));return new cn(I)}return null}function Xs(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function _0(s,t,o,c,g,w,T,A,I,B,N,V){let H=w.textMaxSize.evaluate(t,{});H===void 0&&(H=T);const Q=s.layers[0].layout,J=Q.get("icon-offset").evaluate(t,{},N),ie=mc(o.horizontal),ce=T/24,ye=s.tilePixelRatio*ce,ze=s.tilePixelRatio*H/24,xe=s.tilePixelRatio*A,K=s.tilePixelRatio*Q.get("symbol-spacing"),le=Q.get("text-padding")*s.tilePixelRatio,Te=function(Yt,qt,jt,fr=1){const ai=Yt.get("icon-padding").evaluate(qt,{},jt),ji=ai&&ai.values;return[ji[0]*fr,ji[1]*fr,ji[2]*fr,ji[3]*fr]}(Q,t,N,s.tilePixelRatio),Ge=Q.get("text-max-angle")/180*Math.PI,mt=Q.get("text-rotation-alignment")!=="viewport"&&Q.get("symbol-placement")!=="point",Xe=Q.get("icon-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",it=Q.get("symbol-placement"),bt=K/2,gt=Q.get("icon-text-fit");let St;c&&gt!=="none"&&(s.allowVerticalPlacement&&o.vertical&&(St=hc(c,o.vertical,gt,Q.get("icon-text-fit-padding"),J,ce)),ie&&(c=hc(c,ie,gt,Q.get("icon-text-fit-padding"),J,ce)));const st=N?V.line.getGranularityForZoomLevel(N.z):1,Ot=(Yt,qt)=>{qt.x<0||qt.x>=Rt||qt.y<0||qt.y>=Rt||function(jt,fr,ai,ji,nn,Mn,va,An,ci,Cn,En,an,aa,ls,Ji,Kn,sn,Hi,on,Ni,gi,Qs,Sl,r,u){const f=jt.addToLineVertexArray(fr,ai);let b,E,z,Y,ue=0,Me=0,Ne=0,ft=0,Mt=-1,et=-1;const lt={};let Qt=Sn("");if(jt.allowVerticalPlacement&&ji.vertical){const xa=An.layout.get("text-rotate").evaluate(gi,{},r)+90;z=new wh(ci,fr,Cn,En,an,ji.vertical,aa,ls,Ji,xa),va&&(Y=new wh(ci,fr,Cn,En,an,va,sn,Hi,Ji,xa))}if(nn){const xa=An.layout.get("icon-rotate").evaluate(gi,{}),Js=An.layout.get("icon-text-fit")!=="none",Id=tm(nn,xa,Sl,Js),Tl=va?tm(va,xa,Sl,Js):void 0;E=new wh(ci,fr,Cn,En,an,nn,sn,Hi,!1,xa),ue=4*Id.length;const Dd=jt.iconSizeData;let wu=null;Dd.kind==="source"?(wu=[Yr*An.layout.get("icon-size").evaluate(gi,{})],wu[0]>Io&&zr(`${jt.layerIds[0]}: Value for "icon-size" is >= ${mh}. Reduce your "icon-size".`)):Dd.kind==="composite"&&(wu=[Yr*Qs.compositeIconSizes[0].evaluate(gi,{},r),Yr*Qs.compositeIconSizes[1].evaluate(gi,{},r)],(wu[0]>Io||wu[1]>Io)&&zr(`${jt.layerIds[0]}: Value for "icon-size" is >= ${mh}. Reduce your "icon-size".`)),jt.addSymbols(jt.icon,Id,wu,Ni,on,gi,y.al.none,fr,f.lineStartIndex,f.lineLength,-1,r),Mt=jt.icon.placedSymbolArray.length-1,Tl&&(Me=4*Tl.length,jt.addSymbols(jt.icon,Tl,wu,Ni,on,gi,y.al.vertical,fr,f.lineStartIndex,f.lineLength,-1,r),et=jt.icon.placedSymbolArray.length-1)}const xr=Object.keys(ji.horizontal);for(const xa of xr){const Js=ji.horizontal[xa];if(!b){Qt=Sn(Js.text);const Tl=An.layout.get("text-rotate").evaluate(gi,{},r);b=new wh(ci,fr,Cn,En,an,Js,aa,ls,Ji,Tl)}const Id=Js.positionedLines.length===1;if(Ne+=vg(jt,fr,Js,Mn,An,Ji,gi,Kn,f,ji.vertical?y.al.horizontal:y.al.horizontalOnly,Id?xr:[xa],lt,Mt,Qs,r),Id)break}ji.vertical&&(ft+=vg(jt,fr,ji.vertical,Mn,An,Ji,gi,Kn,f,y.al.vertical,["vertical"],lt,et,Qs,r));const ln=b?b.boxStartIndex:jt.collisionBoxArray.length,Ze=b?b.boxEndIndex:jt.collisionBoxArray.length,Oe=z?z.boxStartIndex:jt.collisionBoxArray.length,Qe=z?z.boxEndIndex:jt.collisionBoxArray.length,_t=E?E.boxStartIndex:jt.collisionBoxArray.length,Gt=E?E.boxEndIndex:jt.collisionBoxArray.length,Zr=Y?Y.boxStartIndex:jt.collisionBoxArray.length,rr=Y?Y.boxEndIndex:jt.collisionBoxArray.length;let Jt=-1;const mn=(xa,Js)=>xa&&xa.circleDiameter?Math.max(xa.circleDiameter,Js):Js;Jt=mn(b,Jt),Jt=mn(z,Jt),Jt=mn(E,Jt),Jt=mn(Y,Jt);const ii=Jt>-1?1:0;ii&&(Jt*=u/Gi),jt.glyphOffsetArray.length>=gu.MAX_GLYPHS&&zr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),gi.sortKey!==void 0&&jt.addToSortKeyRanges(jt.symbolInstances.length,gi.sortKey);const bu=Ed(An,gi,r),[v0,IM]=function(xa,Js){const Id=xa.length,Tl=Js==null?void 0:Js.values;if((Tl==null?void 0:Tl.length)>0)for(let Dd=0;Dd<Tl.length;Dd+=2){const wu=Tl[Dd+1];xa.emplaceBack(y.aB[Tl[Dd]],wu[0],wu[1])}return[Id,xa.length]}(jt.textAnchorOffsets,bu);jt.symbolInstances.emplaceBack(fr.x,fr.y,lt.right>=0?lt.right:-1,lt.center>=0?lt.center:-1,lt.left>=0?lt.left:-1,lt.vertical||-1,Mt,et,Qt,ln,Ze,Oe,Qe,_t,Gt,Zr,rr,Cn,Ne,ft,ue,Me,ii,0,aa,Jt,v0,IM)}(s,qt,Yt,o,c,g,St,s.layers[0],s.collisionBoxArray,t.index,t.sourceLayerIndex,s.index,ye,[le,le,le,le],mt,I,xe,Te,Xe,J,t,w,B,N,T)};if(it==="line")for(const Yt of Wn(t.geometry,0,0,Rt,Rt)){const qt=ia(Yt,st),jt=em(qt,K,Ge,o.vertical||ie,c,24,ze,s.overscaling,Rt);for(const fr of jt)ie&&xg(s,ie.text,bt,fr)||Ot(qt,fr)}else if(it==="line-center"){for(const Yt of t.geometry)if(Yt.length>1){const qt=ia(Yt,st),jt=_g(qt,Ge,o.vertical||ie,c,24,ze);jt&&Ot(qt,jt)}}else if(t.type==="Polygon")for(const Yt of zc(t.geometry,0)){const qt=g0(Yt,16);Ot(ia(Yt[0],st,!0),new vu(qt.x,qt.y,0))}else if(t.type==="LineString")for(const Yt of t.geometry){const qt=ia(Yt,st);Ot(qt,new vu(qt[0].x,qt[0].y,0))}else if(t.type==="Point")for(const Yt of t.geometry)for(const qt of Yt)Ot([qt],new vu(qt.x,qt.y,0))}function vg(s,t,o,c,g,w,T,A,I,B,N,V,H,Q,J){const ie=function(ze,xe,K,le,Te,Ge,mt,Xe){const it=le.layout.get("text-rotate").evaluate(Ge,{})*Math.PI/180,bt=[];for(const gt of xe.positionedLines)for(const St of gt.positionedGlyphs){if(!St.rect)continue;const st=St.rect||{};let Ot=Bp+1,Yt=!0,qt=1,jt=0;const fr=(Te||Xe)&&St.vertical,ai=St.metrics.advance*St.scale/2;if(Xe&&xe.verticalizable&&(jt=gt.lineOffset/2-(St.imageName?-(Gi-St.metrics.width*St.scale)/2:(St.scale-1)*Gi)),St.imageName){const Hi=mt[St.imageName];Yt=Hi.sdf,qt=Hi.pixelRatio,Ot=ca/qt}const ji=Te?[St.x+ai,St.y]:[0,0];let nn=Te?[0,0]:[St.x+ai+K[0],St.y+K[1]-jt],Mn=[0,0];fr&&(Mn=nn,nn=[0,0]);const va=St.metrics.isDoubleResolution?2:1,An=(St.metrics.left-Ot)*St.scale-ai+nn[0],ci=(-St.metrics.top-Ot)*St.scale+nn[1],Cn=An+st.w/va*St.scale/qt,En=ci+st.h/va*St.scale/qt,an=new G(An,ci),aa=new G(Cn,ci),ls=new G(An,En),Ji=new G(Cn,En);if(fr){const Hi=new G(-ai,ai-xd),on=-Math.PI/2,Ni=Gi/2-ai,gi=new G(5-xd-Ni,-(St.imageName?Ni:0)),Qs=new G(...Mn);an._rotateAround(on,Hi)._add(gi)._add(Qs),aa._rotateAround(on,Hi)._add(gi)._add(Qs),ls._rotateAround(on,Hi)._add(gi)._add(Qs),Ji._rotateAround(on,Hi)._add(gi)._add(Qs)}if(it){const Hi=Math.sin(it),on=Math.cos(it),Ni=[on,-Hi,Hi,on];an._matMult(Ni),aa._matMult(Ni),ls._matMult(Ni),Ji._matMult(Ni)}const Kn=new G(0,0),sn=new G(0,0);bt.push({tl:an,tr:aa,bl:ls,br:Ji,tex:st,writingMode:xe.writingMode,glyphOffset:ji,sectionIndex:St.sectionIndex,isSDF:Yt,pixelOffsetTL:Kn,pixelOffsetBR:sn,minFontScaleX:0,minFontScaleY:0})}return bt}(0,o,A,g,w,T,c,s.allowVerticalPlacement),ce=s.textSizeData;let ye=null;ce.kind==="source"?(ye=[Yr*g.layout.get("text-size").evaluate(T,{})],ye[0]>Io&&zr(`${s.layerIds[0]}: Value for "text-size" is >= ${mh}. Reduce your "text-size".`)):ce.kind==="composite"&&(ye=[Yr*Q.compositeTextSizes[0].evaluate(T,{},J),Yr*Q.compositeTextSizes[1].evaluate(T,{},J)],(ye[0]>Io||ye[1]>Io)&&zr(`${s.layerIds[0]}: Value for "text-size" is >= ${mh}. Reduce your "text-size".`)),s.addSymbols(s.text,ie,ye,A,w,T,B,t,I.lineStartIndex,I.lineLength,H,J);for(const ze of N)V[ze]=s.text.placedSymbolArray.length-1;return 4*ie.length}function mc(s){for(const t in s)return s[t];return null}function xg(s,t,o,c){const g=s.compareText;if(t in g){const w=g[t];for(let T=w.length-1;T>=0;T--)if(c.dist(w[T])<o)return!0}else g[t]=[];return g[t].push(c),!1}const bg=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class am{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,c]=new Uint8Array(t,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=c>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const w=bg[15&c];if(!w)throw new Error("Unrecognized array type.");const[T]=new Uint16Array(t,2,1),[A]=new Uint32Array(t,4,1);return new am(A,T,w,t)}constructor(t,o=64,c=Float64Array,g){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=c,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const w=bg.indexOf(this.ArrayType),T=2*t*this.ArrayType.BYTES_PER_ELEMENT,A=t*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-A%8)%8;if(w<0)throw new Error(`Unexpected typed array class: ${c}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+A+I,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+T+A+I),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+A+I,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+w]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=t)}add(t,o){const c=this._pos>>1;return this.ids[c]=c,this.coords[this._pos++]=t,this.coords[this._pos++]=o,c}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return sm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,o,c,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:T,nodeSize:A}=this,I=[0,w.length-1,0],B=[];for(;I.length;){const N=I.pop()||0,V=I.pop()||0,H=I.pop()||0;if(V-H<=A){for(let ce=H;ce<=V;ce++){const ye=T[2*ce],ze=T[2*ce+1];ye>=t&&ye<=c&&ze>=o&&ze<=g&&B.push(w[ce])}continue}const Q=H+V>>1,J=T[2*Q],ie=T[2*Q+1];J>=t&&J<=c&&ie>=o&&ie<=g&&B.push(w[Q]),(N===0?t<=J:o<=ie)&&(I.push(H),I.push(Q-1),I.push(1-N)),(N===0?c>=J:g>=ie)&&(I.push(Q+1),I.push(V),I.push(1-N))}return B}within(t,o,c){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:w,nodeSize:T}=this,A=[0,g.length-1,0],I=[],B=c*c;for(;A.length;){const N=A.pop()||0,V=A.pop()||0,H=A.pop()||0;if(V-H<=T){for(let ce=H;ce<=V;ce++)Sg(w[2*ce],w[2*ce+1],t,o)<=B&&I.push(g[ce]);continue}const Q=H+V>>1,J=w[2*Q],ie=w[2*Q+1];Sg(J,ie,t,o)<=B&&I.push(g[Q]),(N===0?t-c<=J:o-c<=ie)&&(A.push(H),A.push(Q-1),A.push(1-N)),(N===0?t+c>=J:o+c>=ie)&&(A.push(Q+1),A.push(V),A.push(1-N))}return I}}function sm(s,t,o,c,g,w){if(g-c<=o)return;const T=c+g>>1;wg(s,t,T,c,g,w),sm(s,t,o,c,T-1,1-w),sm(s,t,o,T+1,g,1-w)}function wg(s,t,o,c,g,w){for(;g>c;){if(g-c>600){const B=g-c+1,N=o-c+1,V=Math.log(B),H=.5*Math.exp(2*V/3),Q=.5*Math.sqrt(V*H*(B-H)/B)*(N-B/2<0?-1:1);wg(s,t,o,Math.max(c,Math.floor(o-N*H/B+Q)),Math.min(g,Math.floor(o+(B-N)*H/B+Q)),w)}const T=t[2*o+w];let A=c,I=g;for(Pd(s,t,c,o),t[2*g+w]>T&&Pd(s,t,c,g);A<I;){for(Pd(s,t,A,I),A++,I--;t[2*A+w]<T;)A++;for(;t[2*I+w]>T;)I--}t[2*c+w]===T?Pd(s,t,c,I):(I++,Pd(s,t,I,g)),I<=o&&(c=I+1),o<=I&&(g=I-1)}}function Pd(s,t,o,c){om(s,o,c),om(t,2*o,2*c),om(t,2*o+1,2*c+1)}function om(s,t,o){const c=s[t];s[t]=s[o],s[o]=c}function Sg(s,t,o,c){const g=s-o,w=t-c;return g*g+w*w}var Lf;y.cm=void 0,(Lf=y.cm||(y.cm={})).create="create",Lf.load="load",Lf.fullLoad="fullLoad";let bl=null,wl=[];const kf=1e3/60,lm="loadTime",xu="fullLoadTime",Rd={mark(s){performance.mark(s)},frame(s){const t=s;bl!=null&&wl.push(t-bl),bl=t},clearMetrics(){bl=null,wl=[],performance.clearMeasures(lm),performance.clearMeasures(xu);for(const s in y.cm)performance.clearMarks(y.cm[s])},getPerformanceMetrics(){performance.measure(lm,y.cm.create,y.cm.load),performance.measure(xu,y.cm.create,y.cm.fullLoad);const s=performance.getEntriesByName(lm)[0].duration,t=performance.getEntriesByName(xu)[0].duration,o=wl.length,c=1/(wl.reduce((w,T)=>w+T,0)/o/1e3),g=wl.filter(w=>w>kf).reduce((w,T)=>w+(T-kf)/kf,0);return{loadTime:s,fullLoadTime:t,fps:c,percentDroppedFrames:g/(o+g)*100,totalFrames:o}}};y.$=bh,y.A=ke,y.B=hi,y.C=mr,y.D=$t,y.E=be,y.F=ws,y.G=function(s){if(Fi==null){const t=s.navigator?s.navigator.userAgent:null;Fi=!!s.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Fi},y.H=class{constructor(s,t){this.target=s,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Gp(()=>this.process()),this.subscription=xt(this.target,"message",o=>this.receive(o),!1),this.globalScope=Ki(self)?s:window}registerMessageHandler(s,t){this.messageHandlers[s]=t}sendAsync(s,t){return new Promise((o,c)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10),w=t?xt(t.signal,"abort",()=>{w==null||w.unsubscribe(),delete this.resolveRejects[g];const I={id:g,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(I)},Hp):null;this.resolveRejects[g]={resolve:I=>{w==null||w.unsubscribe(),o(I)},reject:I=>{w==null||w.unsubscribe(),c(I)}};const T=[],A=Object.assign(Object.assign({},s),{id:g,sourceMapId:this.mapId,origin:location.origin,data:tl(s.data,T)});this.target.postMessage(A,{transfer:T})})}receive(s){const t=s.data,o=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[o];const c=this.abortControllers[o];return delete this.abortControllers[o],void(c&&c.abort())}if(Ki(self)||t.mustQueue)return this.tasks[o]=t,this.taskQueue.push(o),void this.invoker.trigger();this.processTask(o,t)}}process(){if(this.taskQueue.length===0)return;const s=this.taskQueue.shift(),t=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(s,t)}processTask(s,t){return l(this,void 0,void 0,function*(){if(t.type==="<response>"){const g=this.resolveRejects[s];return delete this.resolveRejects[s],g?void(t.error?g.reject(es(t.error)):g.resolve(es(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const o=es(t.data),c=new AbortController;this.abortControllers[s]=c;try{const g=yield this.messageHandlers[t.type](t.sourceMapId,o,c);this.completeTask(s,null,g)}catch(g){this.completeTask(s,g)}})}completeTask(s,t,o){const c=[];delete this.abortControllers[s];const g={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?tl(t):null,data:tl(o,c)};this.target.postMessage(g,{transfer:c})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},y.I=na,y.J=zi,y.K=function(){var s=new ke(16);return ke!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},y.L=function(s,t,o){var c,g,w,T,A,I,B,N,V,H,Q,J,ie=o[0],ce=o[1],ye=o[2];return t===s?(s[12]=t[0]*ie+t[4]*ce+t[8]*ye+t[12],s[13]=t[1]*ie+t[5]*ce+t[9]*ye+t[13],s[14]=t[2]*ie+t[6]*ce+t[10]*ye+t[14],s[15]=t[3]*ie+t[7]*ce+t[11]*ye+t[15]):(g=t[1],w=t[2],T=t[3],A=t[4],I=t[5],B=t[6],N=t[7],V=t[8],H=t[9],Q=t[10],J=t[11],s[0]=c=t[0],s[1]=g,s[2]=w,s[3]=T,s[4]=A,s[5]=I,s[6]=B,s[7]=N,s[8]=V,s[9]=H,s[10]=Q,s[11]=J,s[12]=c*ie+A*ce+V*ye+t[12],s[13]=g*ie+I*ce+H*ye+t[13],s[14]=w*ie+B*ce+Q*ye+t[14],s[15]=T*ie+N*ce+J*ye+t[15]),s},y.M=function(s,t,o){var c=o[0],g=o[1],w=o[2];return s[0]=t[0]*c,s[1]=t[1]*c,s[2]=t[2]*c,s[3]=t[3]*c,s[4]=t[4]*g,s[5]=t[5]*g,s[6]=t[6]*g,s[7]=t[7]*g,s[8]=t[8]*w,s[9]=t[9]*w,s[10]=t[10]*w,s[11]=t[11]*w,s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},y.N=function(s,t,o){var c=t[0],g=t[1],w=t[2],T=t[3],A=t[4],I=t[5],B=t[6],N=t[7],V=t[8],H=t[9],Q=t[10],J=t[11],ie=t[12],ce=t[13],ye=t[14],ze=t[15],xe=o[0],K=o[1],le=o[2],Te=o[3];return s[0]=xe*c+K*A+le*V+Te*ie,s[1]=xe*g+K*I+le*H+Te*ce,s[2]=xe*w+K*B+le*Q+Te*ye,s[3]=xe*T+K*N+le*J+Te*ze,s[4]=(xe=o[4])*c+(K=o[5])*A+(le=o[6])*V+(Te=o[7])*ie,s[5]=xe*g+K*I+le*H+Te*ce,s[6]=xe*w+K*B+le*Q+Te*ye,s[7]=xe*T+K*N+le*J+Te*ze,s[8]=(xe=o[8])*c+(K=o[9])*A+(le=o[10])*V+(Te=o[11])*ie,s[9]=xe*g+K*I+le*H+Te*ce,s[10]=xe*w+K*B+le*Q+Te*ye,s[11]=xe*T+K*N+le*J+Te*ze,s[12]=(xe=o[12])*c+(K=o[13])*A+(le=o[14])*V+(Te=o[15])*ie,s[13]=xe*g+K*I+le*H+Te*ce,s[14]=xe*w+K*B+le*Q+Te*ye,s[15]=xe*T+K*N+le*J+Te*ze,s},y.O=function(s,t){const o={};for(let c=0;c<t.length;c++){const g=t[c];g in s&&(o[g]=s[g])}return o},y.P=G,y.Q=_u,y.R=za,y.S=Xr,y.T=qs,y.U=Kp,y.V=me,y.W=_e,y.X=Re,y.Y=Hn,y.Z=Rt,y._=l,y.a=Pi,y.a$=function(s,t,o){var c=Math.sin(o),g=Math.cos(o),w=t[4],T=t[5],A=t[6],I=t[7],B=t[8],N=t[9],V=t[10],H=t[11];return t!==s&&(s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[4]=w*g+B*c,s[5]=T*g+N*c,s[6]=A*g+V*c,s[7]=I*g+H*c,s[8]=B*g-w*c,s[9]=N*g-T*c,s[10]=V*g-A*c,s[11]=H*g-I*c,s},y.a0=25,y.a1=fc,y.a2=s=>{const t=window.document.createElement("video");return t.muted=!0,new Promise(o=>{t.onloadstart=()=>{o(t)};for(const c of s){const g=window.document.createElement("source");ri(c)||(t.crossOrigin="Anonymous"),g.src=c,t.appendChild(g)}})},y.a3=Je,y.a4=function(){return br++},y.a5=R,y.a6=gu,y.a7=Xa,y.a8=Es,y.a9=Yp,y.aA=function(s,t,o,c,g=!1){if(!o[0]&&!o[1])return[0,0];const w=g?c==="map"?-s.bearingInRadians:0:c==="viewport"?s.bearingInRadians:0;if(w){const T=Math.sin(w),A=Math.cos(w);o=[o[0]*A-o[1]*T,o[0]*T+o[1]*A]}return[g?o[0]:dr(t,o[0],s.zoom),g?o[1]:dr(t,o[1],s.zoom)]},y.aC=wf,y.aD=Xs,y.aE=Vp,y.aF=am,y.aG=Si,y.aH=md,y.aI=ve,y.aJ=tr,y.aK=Tt,y.aL=nr,y.aM=Et,y.aN=Af,y.aO=function(s,t,o){return s[0]=t[0]*o,s[1]=t[1]*o,s[2]=t[2]*o,s},y.aP=function(s,t,o){return s[0]=t[0]+o[0],s[1]=t[1]+o[1],s[2]=t[2]+o[2],s},y.aQ=function(s){var t=new ke(3);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},y.aR=function(s,t,o){return s[0]=t[0]*o[0],s[1]=t[1]*o[1],s[2]=t[2]*o[2],s[3]=t[3]*o[3],s},y.aS=function(s,t,o){return s[0]=t[0]-o[0],s[1]=t[1]-o[1],s[2]=t[2]-o[2],s},y.aT=function(s,t){var o=t[0],c=t[1],g=t[2],w=o*o+c*c+g*g;return w>0&&(w=1/Math.sqrt(w)),s[0]=t[0]*w,s[1]=t[1]*w,s[2]=t[2]*w,s},y.aU=function(s,t,o){var c=t[0],g=t[1],w=t[2],T=o[0],A=o[1],I=o[2];return s[0]=g*I-w*A,s[1]=w*T-c*I,s[2]=c*A-g*T,s},y.aV=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]},y.aW=Td,y.aX=pc,y.aY=function(s,t,o,c,g){var w,T=1/Math.tan(t/2);return s[0]=T/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=T,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,g!=null&&g!==1/0?(s[10]=(g+c)*(w=1/(c-g)),s[14]=2*g*c*w):(s[10]=-1,s[14]=-2*c),s},y.aZ=function(s){var t=new ke(16);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},y.a_=function(s,t,o){var c=Math.sin(o),g=Math.cos(o),w=t[0],T=t[1],A=t[2],I=t[3],B=t[4],N=t[5],V=t[6],H=t[7];return t!==s&&(s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=w*g+B*c,s[1]=T*g+N*c,s[2]=A*g+V*c,s[3]=I*g+H*c,s[4]=B*g-w*c,s[5]=N*g-T*c,s[6]=V*g-A*c,s[7]=H*g-I*c,s},y.aa=function(s){const t={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,c,g,w)=>{const T=g||w;return t[c]=!T||T.toLowerCase(),""}),t["max-age"]){const o=parseInt(t["max-age"],10);isNaN(o)?delete t["max-age"]:t["max-age"]=o}return t},y.ab=function(s){return s*Math.PI/180},y.ac=function(s){return Math.pow(2,s)},y.ad=Ke,y.ae=er,y.af=85.051129,y.ag=Mf,y.ah=function(s){return Math.log(s)/Math.LN2},y.ai=function(s){var t=s[0],o=s[1];return t*t+o*o},y.aj=function(s,t){const o=[];for(const c in s)c in t||o.push(c);return o},y.ak=function(s,t){let o=0,c=0;if(s.kind==="constant")c=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:g,minZoom:w,maxZoom:T}=s,A=g?er(Vn.interpolationFactor(g,t,w,T),0,1):0;s.kind==="camera"?c=hi.number(s.minSize,s.maxSize,A):o=A}return{uSizeT:o,uSize:c}},y.am=function(s,{uSize:t,uSizeT:o},{lowerSize:c,upperSize:g}){return s.kind==="source"?c/Yr:s.kind==="composite"?hi.number(c/Yr,g/Yr,o):t},y.an=function(s,t){var o=t[0],c=t[1],g=t[2],w=t[3],T=t[4],A=t[5],I=t[6],B=t[7],N=t[8],V=t[9],H=t[10],Q=t[11],J=t[12],ie=t[13],ce=t[14],ye=t[15],ze=o*A-c*T,xe=o*I-g*T,K=o*B-w*T,le=c*I-g*A,Te=c*B-w*A,Ge=g*B-w*I,mt=N*ie-V*J,Xe=N*ce-H*J,it=N*ye-Q*J,bt=V*ce-H*ie,gt=V*ye-Q*ie,St=H*ye-Q*ce,st=ze*St-xe*gt+K*bt+le*it-Te*Xe+Ge*mt;return st?(s[0]=(A*St-I*gt+B*bt)*(st=1/st),s[1]=(g*gt-c*St-w*bt)*st,s[2]=(ie*Ge-ce*Te+ye*le)*st,s[3]=(H*Te-V*Ge-Q*le)*st,s[4]=(I*it-T*St-B*Xe)*st,s[5]=(o*St-g*it+w*Xe)*st,s[6]=(ce*K-J*Ge-ye*xe)*st,s[7]=(N*Ge-H*K+Q*xe)*st,s[8]=(T*gt-A*it+B*mt)*st,s[9]=(c*it-o*gt-w*mt)*st,s[10]=(J*Te-ie*K+ye*ze)*st,s[11]=(V*K-N*Te-Q*ze)*st,s[12]=(A*Xe-T*bt-I*mt)*st,s[13]=(o*bt-c*Xe+g*mt)*st,s[14]=(ie*xe-J*le-ce*ze)*st,s[15]=(N*le-V*xe+H*ze)*st,s):null},y.ao=Ct,y.ap=function(s){return Math.hypot(s[0],s[1])},y.aq=function(s){return s[0]=0,s[1]=0,s},y.ar=function(s,t,o){return s[0]=t[0]*o,s[1]=t[1]*o,s},y.as=gh,y.at=Xt,y.au=function(s,t,o,c){const g=t.y-s.y,w=t.x-s.x,T=c.y-o.y,A=c.x-o.x,I=T*w-A*g;if(I===0)return null;const B=(A*(s.y-o.y)-T*(s.x-o.x))/I;return new G(s.x+B*w,s.y+B*g)},y.av=Wn,y.aw=Xu,y.ax=function(s){let t=1/0,o=1/0,c=-1/0,g=-1/0;for(const w of s)t=Math.min(t,w.x),o=Math.min(o,w.y),c=Math.max(c,w.x),g=Math.max(g,w.y);return[t,o,c,g]},y.ay=Gi,y.az=dr,y.b=Yi,y.b$=function(s,t){var o=s[0],c=s[1],g=s[2],w=s[3],T=s[4],A=s[5],I=s[6],B=s[7],N=s[8],V=s[9],H=s[10],Q=s[11],J=s[12],ie=s[13],ce=s[14],ye=s[15],ze=t[0],xe=t[1],K=t[2],le=t[3],Te=t[4],Ge=t[5],mt=t[6],Xe=t[7],it=t[8],bt=t[9],gt=t[10],St=t[11],st=t[12],Ot=t[13],Yt=t[14],qt=t[15];return Math.abs(o-ze)<=Se*Math.max(1,Math.abs(o),Math.abs(ze))&&Math.abs(c-xe)<=Se*Math.max(1,Math.abs(c),Math.abs(xe))&&Math.abs(g-K)<=Se*Math.max(1,Math.abs(g),Math.abs(K))&&Math.abs(w-le)<=Se*Math.max(1,Math.abs(w),Math.abs(le))&&Math.abs(T-Te)<=Se*Math.max(1,Math.abs(T),Math.abs(Te))&&Math.abs(A-Ge)<=Se*Math.max(1,Math.abs(A),Math.abs(Ge))&&Math.abs(I-mt)<=Se*Math.max(1,Math.abs(I),Math.abs(mt))&&Math.abs(B-Xe)<=Se*Math.max(1,Math.abs(B),Math.abs(Xe))&&Math.abs(N-it)<=Se*Math.max(1,Math.abs(N),Math.abs(it))&&Math.abs(V-bt)<=Se*Math.max(1,Math.abs(V),Math.abs(bt))&&Math.abs(H-gt)<=Se*Math.max(1,Math.abs(H),Math.abs(gt))&&Math.abs(Q-St)<=Se*Math.max(1,Math.abs(Q),Math.abs(St))&&Math.abs(J-st)<=Se*Math.max(1,Math.abs(J),Math.abs(st))&&Math.abs(ie-Ot)<=Se*Math.max(1,Math.abs(ie),Math.abs(Ot))&&Math.abs(ce-Yt)<=Se*Math.max(1,Math.abs(ce),Math.abs(Yt))&&Math.abs(ye-qt)<=Se*Math.max(1,Math.abs(ye),Math.abs(qt))},y.b0=function(){const s=new Float32Array(16);return Ke(s),s},y.b1=function(){const s=new Float64Array(16);return Ke(s),s},y.b2=function(){return new Float64Array(16)},y.b3=function(s,t,o){const c=new Float64Array(4);return function(g,w,T,A){var I=.5*Math.PI/180;w*=I,T*=I,A*=I;var B=Math.sin(w),N=Math.cos(w),V=Math.sin(T),H=Math.cos(T),Q=Math.sin(A),J=Math.cos(A);g[0]=B*H*J-N*V*Q,g[1]=N*V*J+B*H*Q,g[2]=N*H*Q-B*V*J,g[3]=N*H*J+B*V*Q}(c,s,t-90,o),c},y.b4=function(s,t,o,c){var g,w,T,A,I,B=t[0],N=t[1],V=t[2],H=t[3],Q=o[0],J=o[1],ie=o[2],ce=o[3];return(w=B*Q+N*J+V*ie+H*ce)<0&&(w=-w,Q=-Q,J=-J,ie=-ie,ce=-ce),1-w>Se?(g=Math.acos(w),T=Math.sin(g),A=Math.sin((1-c)*g)/T,I=Math.sin(c*g)/T):(A=1-c,I=c),s[0]=A*B+I*Q,s[1]=A*N+I*J,s[2]=A*V+I*ie,s[3]=A*H+I*ce,s},y.b5=function(s){const t=new Float64Array(9);var o,c,g,w,T,A,I,B,N,V,H,Q,J,ie,ce,ye,ze,xe;V=(g=(c=s)[0])*(I=g+g),H=(w=c[1])*I,J=(T=c[2])*I,ie=T*(B=w+w),ye=(A=c[3])*I,ze=A*B,xe=A*(N=T+T),(o=t)[0]=1-(Q=w*B)-(ce=T*N),o[3]=H-xe,o[6]=J+ze,o[1]=H+xe,o[4]=1-V-ce,o[7]=ie-ye,o[2]=J-ze,o[5]=ie+ye,o[8]=1-V-Q;const K=Et(-Math.asin(er(t[2],-1,1)));let le,Te;return Math.hypot(t[5],t[8])<.001?(le=0,Te=-Et(Math.atan2(t[3],t[4]))):(le=Et(t[5]===0&&t[8]===0?0:Math.atan2(t[5],t[8])),Te=Et(t[1]===0&&t[0]===0?0:Math.atan2(t[1],t[0]))),{roll:le,pitch:K+90,bearing:Te}},y.b6=function(s,t){return s.roll==t.roll&&s.pitch==t.pitch&&s.bearing==t.bearing},y.b7=cr,y.b8=To,y.b9=ic,y.bA=function(s){if(s.type==="custom")return new m0(s);switch(s.type){case"background":return new p0(s);case"circle":return new ru(s);case"fill":return new Ep(s);case"fill-extrusion":return new yf(s);case"heatmap":return new _p(s);case"hillshade":return new dd(s);case"line":return new zp(s);case"raster":return new pg(s);case"symbol":return new Sd(s)}},y.bB=li,y.bC=function(s,t){if(!s)return[{command:"setStyle",args:[t]}];let o=[];try{if(!Ce(s.version,t.version))return[{command:"setStyle",args:[t]}];Ce(s.center,t.center)||o.push({command:"setCenter",args:[t.center]}),Ce(s.centerAltitude,t.centerAltitude)||o.push({command:"setCenterAltitude",args:[t.centerAltitude]}),Ce(s.zoom,t.zoom)||o.push({command:"setZoom",args:[t.zoom]}),Ce(s.bearing,t.bearing)||o.push({command:"setBearing",args:[t.bearing]}),Ce(s.pitch,t.pitch)||o.push({command:"setPitch",args:[t.pitch]}),Ce(s.roll,t.roll)||o.push({command:"setRoll",args:[t.roll]}),Ce(s.sprite,t.sprite)||o.push({command:"setSprite",args:[t.sprite]}),Ce(s.glyphs,t.glyphs)||o.push({command:"setGlyphs",args:[t.glyphs]}),Ce(s.transition,t.transition)||o.push({command:"setTransition",args:[t.transition]}),Ce(s.light,t.light)||o.push({command:"setLight",args:[t.light]}),Ce(s.terrain,t.terrain)||o.push({command:"setTerrain",args:[t.terrain]}),Ce(s.sky,t.sky)||o.push({command:"setSky",args:[t.sky]}),Ce(s.projection,t.projection)||o.push({command:"setProjection",args:[t.projection]});const c={},g=[];(function(T,A,I,B){let N;for(N in A=A||{},T=T||{})Object.prototype.hasOwnProperty.call(T,N)&&(Object.prototype.hasOwnProperty.call(A,N)||Fe(N,I,B));for(N in A)Object.prototype.hasOwnProperty.call(A,N)&&(Object.prototype.hasOwnProperty.call(T,N)?Ce(T[N],A[N])||(T[N].type==="geojson"&&A[N].type==="geojson"&&Pt(T,A,N)?Ue(I,{command:"setGeoJSONSourceData",args:[N,A[N].data]}):dt(N,A,I,B)):qe(N,A,I))})(s.sources,t.sources,g,c);const w=[];s.layers&&s.layers.forEach(T=>{"source"in T&&c[T.source]?o.push({command:"removeLayer",args:[T.id]}):w.push(T)}),o=o.concat(g),function(T,A,I){A=A||[];const B=(T=T||[]).map(Ft),N=A.map(Ft),V=T.reduce(lr,{}),H=A.reduce(lr,{}),Q=B.slice(),J=Object.create(null);let ie,ce,ye,ze,xe;for(let K=0,le=0;K<B.length;K++)ie=B[K],Object.prototype.hasOwnProperty.call(H,ie)?le++:(Ue(I,{command:"removeLayer",args:[ie]}),Q.splice(Q.indexOf(ie,le),1));for(let K=0,le=0;K<N.length;K++)ie=N[N.length-1-K],Q[Q.length-1-K]!==ie&&(Object.prototype.hasOwnProperty.call(V,ie)?(Ue(I,{command:"removeLayer",args:[ie]}),Q.splice(Q.lastIndexOf(ie,Q.length-le),1)):le++,ze=Q[Q.length-K],Ue(I,{command:"addLayer",args:[H[ie],ze]}),Q.splice(Q.length-K,0,ie),J[ie]=!0);for(let K=0;K<N.length;K++)if(ie=N[K],ce=V[ie],ye=H[ie],!J[ie]&&!Ce(ce,ye))if(Ce(ce.source,ye.source)&&Ce(ce["source-layer"],ye["source-layer"])&&Ce(ce.type,ye.type)){for(xe in At(ce.layout,ye.layout,I,ie,null,"setLayoutProperty"),At(ce.paint,ye.paint,I,ie,null,"setPaintProperty"),Ce(ce.filter,ye.filter)||Ue(I,{command:"setFilter",args:[ie,ye.filter]}),Ce(ce.minzoom,ye.minzoom)&&Ce(ce.maxzoom,ye.maxzoom)||Ue(I,{command:"setLayerZoomRange",args:[ie,ye.minzoom,ye.maxzoom]}),ce)Object.prototype.hasOwnProperty.call(ce,xe)&&xe!=="layout"&&xe!=="paint"&&xe!=="filter"&&xe!=="metadata"&&xe!=="minzoom"&&xe!=="maxzoom"&&(xe.indexOf("paint.")===0?At(ce[xe],ye[xe],I,ie,xe.slice(6),"setPaintProperty"):Ce(ce[xe],ye[xe])||Ue(I,{command:"setLayerProperty",args:[ie,xe,ye[xe]]}));for(xe in ye)Object.prototype.hasOwnProperty.call(ye,xe)&&!Object.prototype.hasOwnProperty.call(ce,xe)&&xe!=="layout"&&xe!=="paint"&&xe!=="filter"&&xe!=="metadata"&&xe!=="minzoom"&&xe!=="maxzoom"&&(xe.indexOf("paint.")===0?At(ce[xe],ye[xe],I,ie,xe.slice(6),"setPaintProperty"):Ce(ce[xe],ye[xe])||Ue(I,{command:"setLayerProperty",args:[ie,xe,ye[xe]]}))}else Ue(I,{command:"removeLayer",args:[ie]}),ze=Q[Q.lastIndexOf(ie)+1],Ue(I,{command:"addLayer",args:[ye,ze]})}(w,t.layers,o)}catch(c){console.warn("Unable to compute style diff:",c),o=[{command:"setStyle",args:[t]}]}return o},y.bD=function(s){const t=[],o=s.id;return o===void 0&&t.push({message:`layers.${o}: missing required property "id"`}),s.render===void 0&&t.push({message:`layers.${o}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&t.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),t},y.bE=function s(t,o){if(Array.isArray(t)){if(!Array.isArray(o)||t.length!==o.length)return!1;for(let c=0;c<t.length;c++)if(!s(t[c],o[c]))return!1;return!0}if(typeof t=="object"&&t!==null&&o!==null){if(typeof o!="object"||Object.keys(t).length!==Object.keys(o).length)return!1;for(const c in t)if(!s(t[c],o[c]))return!1;return!0}return t===o},y.bF=ti,y.bG=Ur,y.bH=class extends rs{constructor(s,t){super(s,t),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},y.bI=qn,y.bJ=class extends rs{constructor(s,t){super(s,t),this.current=Hs}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let t=1;t<16;t++)if(s[t]!==this.current[t]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},y.bK=Mo,y.bL=class extends rs{constructor(s,t){super(s,t),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},y.bM=class extends rs{constructor(s,t){super(s,t),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},y.bN=nt,y.bO=function(s,t){var o=Math.sin(t),c=Math.cos(t);return s[0]=c,s[1]=o,s[2]=0,s[3]=-o,s[4]=c,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},y.bP=function(s,t,o){var c=t[0],g=t[1],w=t[2];return s[0]=c*o[0]+g*o[3]+w*o[6],s[1]=c*o[1]+g*o[4]+w*o[7],s[2]=c*o[2]+g*o[5]+w*o[8],s},y.bQ=function(s,t,o,c,g,w,T){var A=1/(t-o),I=1/(c-g),B=1/(w-T);return s[0]=-2*A,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*I,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*B,s[11]=0,s[12]=(t+o)*A,s[13]=(g+c)*I,s[14]=(T+w)*B,s[15]=1,s},y.bR=class extends So{},y.bS=Ps,y.bT=class extends Ku{},y.bU=hd,y.bV=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},y.bW=ul,y.bX=function(s,t,o){var c=t[0],g=t[1],w=t[2],T=o[3]*c+o[7]*g+o[11]*w+o[15];return s[0]=(o[0]*c+o[4]*g+o[8]*w+o[12])/(T=T||1),s[1]=(o[1]*c+o[5]*g+o[9]*w+o[13])/T,s[2]=(o[2]*c+o[6]*g+o[10]*w+o[14])/T,s},y.bY=class extends Ia{},y.bZ=class extends m{},y.b_=function(s,t){return s[0]===t[0]&&s[1]===t[1]&&s[2]===t[2]&&s[3]===t[3]&&s[4]===t[4]&&s[5]===t[5]&&s[6]===t[6]&&s[7]===t[7]&&s[8]===t[8]&&s[9]===t[9]&&s[10]===t[10]&&s[11]===t[11]&&s[12]===t[12]&&s[13]===t[13]&&s[14]===t[14]&&s[15]===t[15]},y.ba=gd,y.bb=La,y.bc=wt,y.bd=Zt,y.be=en,y.bf=function(s,t,o,c,g){return wt(c,g,er((s-t)/(o-t),0,1))},y.bg=De,y.bh=function(){return new Float64Array(3)},y.bi=function(s,t,o,c){return s[0]=t[0]+o[0]*c,s[1]=t[1]+o[1]*c,s[2]=t[2]+o[2]*c,s},y.bj=ir,y.bk=function(){return new Float64Array(4)},y.bl=function(s,t,o,c){var g=[],w=[];return g[0]=t[0]-o[0],g[1]=t[1]-o[1],g[2]=t[2]-o[2],w[0]=g[0]*Math.cos(c)-g[1]*Math.sin(c),w[1]=g[0]*Math.sin(c)+g[1]*Math.cos(c),w[2]=g[2],s[0]=w[0]+o[0],s[1]=w[1]+o[1],s[2]=w[2]+o[2],s},y.bm=function(s,t,o,c){var g=[],w=[];return g[0]=t[0]-o[0],g[1]=t[1]-o[1],g[2]=t[2]-o[2],w[0]=g[0],w[1]=g[1]*Math.cos(c)-g[2]*Math.sin(c),w[2]=g[1]*Math.sin(c)+g[2]*Math.cos(c),s[0]=w[0]+o[0],s[1]=w[1]+o[1],s[2]=w[2]+o[2],s},y.bn=function(s,t,o,c){var g=[],w=[];return g[0]=t[0]-o[0],g[1]=t[1]-o[1],g[2]=t[2]-o[2],w[0]=g[2]*Math.sin(c)+g[0]*Math.cos(c),w[1]=g[1],w[2]=g[2]*Math.cos(c)-g[0]*Math.sin(c),s[0]=w[0]+o[0],s[1]=w[1]+o[1],s[2]=w[2]+o[2],s},y.bo=ht,y.bp=function(s,t,o){var c=Math.sin(o),g=Math.cos(o),w=t[0],T=t[1],A=t[2],I=t[3],B=t[8],N=t[9],V=t[10],H=t[11];return t!==s&&(s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=w*g-B*c,s[1]=T*g-N*c,s[2]=A*g-V*c,s[3]=I*g-H*c,s[8]=w*c+B*g,s[9]=T*c+N*g,s[10]=A*c+V*g,s[11]=I*c+H*g,s},y.bq=function(s,t){const o=De(s,360),c=De(t,360),g=c-o,w=c>o?g-360:g+360;return Math.abs(g)<Math.abs(w)?g:w},y.br=function(s){return s[0]=0,s[1]=0,s[2]=0,s},y.bs=function(s,t,o,c){const g=Math.sqrt(s*s+t*t),w=Math.sqrt(o*o+c*c);s/=g,t/=g,o/=w,c/=w;const T=Math.acos(s*o+t*c);return-t*o+s*c>0?T:-T},y.bt=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]+s[3]},y.bu=Wp,y.bv=function(s,t){const o=De(s,2*Math.PI),c=De(t,2*Math.PI);return Math.min(Math.abs(o-c),Math.abs(o-c+2*Math.PI),Math.abs(o-c-2*Math.PI))},y.bw=function(){const s={},t=oe.$version;for(const o in oe.$root){const c=oe.$root[o];if(c.required){let g=null;g=o==="version"?t:c.type==="array"?[]:{},g!=null&&(s[o]=g)}}return s},y.bx=Us,y.by=In,y.bz=function(s){s=s.slice();const t=Object.create(null);for(let o=0;o<s.length;o++)t[s[o].id]=s[o];for(let o=0;o<s.length;o++)"ref"in s[o]&&(s[o]=Ve(s[o],t[s[o].ref]));return s},y.c=qr,y.c0=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},y.c1=s=>s.type==="symbol",y.c2=s=>s.type==="circle",y.c3=s=>s.type==="heatmap",y.c4=s=>s.type==="line",y.c5=s=>s.type==="fill",y.c6=s=>s.type==="fill-extrusion",y.c7=s=>s.type==="hillshade",y.c8=s=>s.type==="raster",y.c9=s=>s.type==="background",y.cA=oc,y.cB=vl,y.cC=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},y.cD=function(s,t,o,c,g){return l(this,void 0,void 0,function*(){if(_e())try{return yield Re(s,t,o,c,g)}catch{}return function(w,T,A,I,B){const N=w.width,V=w.height;We&&vt||(We=new OffscreenCanvas(N,V),vt=We.getContext("2d",{willReadFrequently:!0})),We.width=N,We.height=V,vt.drawImage(w,0,0,N,V);const H=vt.getImageData(T,A,I,B);return vt.clearRect(0,0,N,V),H.data}(s,t,o,c,g)})},y.cE=gg,y.cF=C,y.cG=O,y.cH=os,y.cI=_d,y.cJ=vs,y.cK=Gr,y.ca=s=>s.type==="custom",y.cb=Ht,y.cc=function(s,t,o){const c=Nt(t.x-o.x,t.y-o.y),g=Nt(s.x-o.x,s.y-o.y);var w,T;return Et(Math.atan2(c[0]*g[1]-c[1]*g[0],(w=c)[0]*(T=g)[0]+w[1]*T[1]))},y.cd=zt,y.ce=function(s,t){return ur[t]&&(s instanceof MouseEvent||s instanceof WheelEvent)},y.cf=function(s,t){return Ut[t]&&"touches"in s},y.cg=function(s){return Ut[s]||ur[s]},y.ch=function(s,t,o){var c=t[0],g=t[1];return s[0]=o[0]*c+o[4]*g+o[12],s[1]=o[1]*c+o[5]*g+o[13],s},y.ci=function(s,t){const{x:o,y:c}=bh.fromLngLat(t);return!(s<0||s>25||c<0||c>=1||o<0||o>=1)},y.cj=function(s,t){return s[0]=t[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=t[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=t[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},y.ck=class extends Ra{},y.cl=Rd,y.cn=function(s){return s.message===_r},y.co=Rn,y.cp=function(s,t){Pi.REGISTERED_PROTOCOLS[s]=t},y.cq=function(s){delete Pi.REGISTERED_PROTOCOLS[s]},y.cr=function(s,t){const o={};for(let g=0;g<s.length;g++){const w=t&&t[s[g].id]||ga(s[g]);t&&(t[s[g].id]=w);let T=o[w];T||(T=o[w]=[]),T.push(s[g])}const c=[];for(const g in o)c.push(o[g]);return c},y.cs=Bt,y.ct=yg,y.cu=Xp,y.cv=Op,y.cw=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=Rt/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const t=s.bucket.layers[0],o=t.layout,c=t._unevaluatedLayout._values,g={layoutIconSize:c["icon-size"].possiblyEvaluate(new mr(s.bucket.zoom+1),s.canonical),layoutTextSize:c["text-size"].possiblyEvaluate(new mr(s.bucket.zoom+1),s.canonical),textMaxSize:c["text-size"].possiblyEvaluate(new mr(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:B,maxZoom:N}=s.bucket.textSizeData;g.compositeTextSizes=[c["text-size"].possiblyEvaluate(new mr(B),s.canonical),c["text-size"].possiblyEvaluate(new mr(N),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:B,maxZoom:N}=s.bucket.iconSizeData;g.compositeIconSizes=[c["icon-size"].possiblyEvaluate(new mr(B),s.canonical),c["icon-size"].possiblyEvaluate(new mr(N),s.canonical)]}const w=o.get("text-line-height")*Gi,T=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point",A=o.get("text-keep-upright"),I=o.get("text-size");for(const B of s.bucket.features){const N=o.get("text-font").evaluate(B,{},s.canonical).join(","),V=I.evaluate(B,{},s.canonical),H=g.layoutTextSize.evaluate(B,{},s.canonical),Q=g.layoutIconSize.evaluate(B,{},s.canonical),J={horizontal:{},vertical:void 0},ie=B.text;let ce,ye=[0,0];if(ie){const K=ie.toString(),le=o.get("text-letter-spacing").evaluate(B,{},s.canonical)*Gi,Te=rl(K)?le:0,Ge=o.get("text-anchor").evaluate(B,{},s.canonical),mt=Ed(t,B,s.canonical);if(!mt){const gt=o.get("text-radial-offset").evaluate(B,{},s.canonical);ye=gt?nm(Ge,[gt*Gi,ja]):o.get("text-offset").evaluate(B,{},s.canonical).map(St=>St*Gi)}let Xe=T?"center":o.get("text-justify").evaluate(B,{},s.canonical);const it=o.get("symbol-placement")==="point"?o.get("text-max-width").evaluate(B,{},s.canonical)*Gi:1/0,bt=()=>{s.bucket.allowVerticalPlacement&&Vs(K)&&(J.vertical=cc(ie,s.glyphMap,s.glyphPositions,s.imagePositions,N,it,w,Ge,"left",Te,ye,y.al.vertical,!0,H,V))};if(!T&&mt){const gt=new Set;if(Xe==="auto")for(let st=0;st<mt.values.length;st+=2)gt.add(Xs(mt.values[st]));else gt.add(Xe);let St=!1;for(const st of gt)if(!J.horizontal[st])if(St)J.horizontal[st]=J.horizontal[0];else{const Ot=cc(ie,s.glyphMap,s.glyphPositions,s.imagePositions,N,it,w,"center",st,Te,ye,y.al.horizontal,!1,H,V);Ot&&(J.horizontal[st]=Ot,St=Ot.positionedLines.length===1)}bt()}else{Xe==="auto"&&(Xe=Xs(Ge));const gt=cc(ie,s.glyphMap,s.glyphPositions,s.imagePositions,N,it,w,Ge,Xe,Te,ye,y.al.horizontal,!1,H,V);gt&&(J.horizontal[Xe]=gt),bt(),Vs(K)&&T&&A&&(J.vertical=cc(ie,s.glyphMap,s.glyphPositions,s.imagePositions,N,it,w,Ge,Xe,Te,ye,y.al.vertical,!1,H,V))}}let ze=!1;if(B.icon&&B.icon.name){const K=s.imageMap[B.icon.name];K&&(ce=h0(s.imagePositions[B.icon.name],o.get("icon-offset").evaluate(B,{},s.canonical),o.get("icon-anchor").evaluate(B,{},s.canonical)),ze=!!K.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=ze:s.bucket.sdfIcons!==ze&&zr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(K.pixelRatio!==s.bucket.pixelRatio||o.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const xe=mc(J.horizontal)||J.vertical;s.bucket.iconsInText=!!xe&&xe.iconsInText,(xe||ce)&&_0(s.bucket,B,J,ce,s.imageMap,g,H,Q,ye,ze,s.canonical,s.subdivisionGranularity)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},y.cx=Nr,y.cy=Ws,y.cz=pl,y.d=ri,y.e=Qr,y.f=s=>l(void 0,void 0,void 0,function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(t)}catch(o){throw new Error(`Could not load image because of ${o.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),y.g=Ui,y.h=s=>new Promise((t,o)=>{const c=new Image;c.onload=()=>{t(c),URL.revokeObjectURL(c.src),c.onload=null,window.requestAnimationFrame(()=>{c.src=we})},c.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(s)],{type:"image/png"});c.src=s.byteLength?URL.createObjectURL(g):we}),y.i=Ki,y.j=(s,t)=>ni(Qr(s,{type:"json"}),t),y.k=he,y.l=ae,y.m=ni,y.n=(s,t)=>ni(Qr(s,{type:"arrayBuffer"}),t),y.o=function(s){return new vl(s).readFields(Lp,[])},y.p=Ba,y.q=nu,y.r=Zn,y.s=xt,y.t=Ja,y.u=Tr,y.v=oe,y.w=zr,y.x=Ts,y.y=Xi,y.z=function([s,t,o]){return t+=90,t*=Math.PI/180,o*=Math.PI/180,{x:s*Math.cos(t)*Math.sin(o),y:s*Math.sin(t)*Math.sin(o),z:s*Math.cos(o)}}}),_("worker",["./shared"],function(y){class l{constructor(ne){this.keyCache={},ne&&this.replace(ne)}replace(ne){this._layerConfigs={},this._layers={},this.update(ne,[])}update(ne,ae){for(const be of ne){this._layerConfigs[be.id]=be;const oe=this._layers[be.id]=y.bA(be);oe._featureFilter=y.a7(oe.filter),this.keyCache[be.id]&&delete this.keyCache[be.id]}for(const be of ae)delete this.keyCache[be],delete this._layerConfigs[be],delete this._layers[be];this.familiesBySource={};const he=y.cr(Object.values(this._layerConfigs),this.keyCache);for(const be of he){const oe=be.map(Fe=>this._layers[Fe.id]),Be=oe[0];if(Be.visibility==="none")continue;const Ve=Be.source||"";let Ce=this.familiesBySource[Ve];Ce||(Ce=this.familiesBySource[Ve]={});const Ue=Be.sourceLayer||"_geojsonTileLayer";let qe=Ce[Ue];qe||(qe=Ce[Ue]=[]),qe.push(oe)}}}class C{constructor(ne){const ae={},he=[];for(const Ve in ne){const Ce=ne[Ve],Ue=ae[Ve]={};for(const qe in Ce){const Fe=Ce[+qe];if(!Fe||Fe.bitmap.width===0||Fe.bitmap.height===0)continue;const dt={x:0,y:0,w:Fe.bitmap.width+2,h:Fe.bitmap.height+2};he.push(dt),Ue[qe]={rect:dt,metrics:Fe.metrics}}}const{w:be,h:oe}=y.p(he),Be=new y.q({width:be||1,height:oe||1});for(const Ve in ne){const Ce=ne[Ve];for(const Ue in Ce){const qe=Ce[+Ue];if(!qe||qe.bitmap.width===0||qe.bitmap.height===0)continue;const Fe=ae[Ve][Ue].rect;y.q.copy(qe.bitmap,Be,{x:0,y:0},{x:Fe.x+1,y:Fe.y+1},qe.bitmap)}}this.image=Be,this.positions=ae}}y.cs("GlyphAtlas",C);class P{constructor(ne){this.tileID=new y.Y(ne.tileID.overscaledZ,ne.tileID.wrap,ne.tileID.canonical.z,ne.tileID.canonical.x,ne.tileID.canonical.y),this.uid=ne.uid,this.zoom=ne.zoom,this.pixelRatio=ne.pixelRatio,this.tileSize=ne.tileSize,this.source=ne.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ne.showCollisionBoxes,this.collectResourceTiming=!!ne.collectResourceTiming,this.returnDependencies=!!ne.returnDependencies,this.promoteId=ne.promoteId,this.inFlightDependencies=[]}parse(ne,ae,he,be,oe){return y._(this,void 0,void 0,function*(){this.status="parsing",this.data=ne,this.collisionBoxArray=new y.a5;const Be=new y.ct(Object.keys(ne.layers).sort()),Ve=new y.cu(this.tileID,this.promoteId);Ve.bucketLayerIDs=[];const Ce={},Ue={featureIndex:Ve,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:he,subdivisionGranularity:oe},qe=ae.familiesBySource[this.source];for(const tt in qe){const yt=ne.layers[tt];if(!yt)continue;yt.version===1&&y.w(`Vector tile source "${this.source}" layer "${tt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Lt=Be.encode(tt),Hr=[];for(let Vi=0;Vi<yt.length;Vi++){const si=yt.feature(Vi),ar=Ve.getId(si,tt);Hr.push({feature:si,id:ar,index:Vi,sourceLayerIndex:Lt})}for(const Vi of qe[tt]){const si=Vi[0];si.source!==this.source&&y.w(`layer.source = ${si.source} does not equal this.source = ${this.source}`),si.minzoom&&this.zoom<Math.floor(si.minzoom)||si.maxzoom&&this.zoom>=si.maxzoom||si.visibility!=="none"&&(k(Vi,this.zoom,he),(Ce[si.id]=si.createBucket({index:Ve.bucketLayerIDs.length,layers:Vi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Lt,sourceID:this.source})).populate(Hr,Ue,this.tileID.canonical),Ve.bucketLayerIDs.push(Vi.map(ar=>ar.id)))}}const Fe=y.bF(Ue.glyphDependencies,tt=>Object.keys(tt).map(Number));this.inFlightDependencies.forEach(tt=>tt==null?void 0:tt.abort()),this.inFlightDependencies=[];let dt=Promise.resolve({});if(Object.keys(Fe).length){const tt=new AbortController;this.inFlightDependencies.push(tt),dt=be.sendAsync({type:"GG",data:{stacks:Fe,source:this.source,tileID:this.tileID,type:"glyphs"}},tt)}const Pt=Object.keys(Ue.iconDependencies);let At=Promise.resolve({});if(Pt.length){const tt=new AbortController;this.inFlightDependencies.push(tt),At=be.sendAsync({type:"GI",data:{icons:Pt,source:this.source,tileID:this.tileID,type:"icons"}},tt)}const Ft=Object.keys(Ue.patternDependencies);let lr=Promise.resolve({});if(Ft.length){const tt=new AbortController;this.inFlightDependencies.push(tt),lr=be.sendAsync({type:"GI",data:{icons:Ft,source:this.source,tileID:this.tileID,type:"patterns"}},tt)}const[Je,Wt,vr]=yield Promise.all([dt,At,lr]),Vr=new C(Je),Er=new y.cv(Wt,vr);for(const tt in Ce){const yt=Ce[tt];yt instanceof y.a6?(k(yt.layers,this.zoom,he),y.cw({bucket:yt,glyphMap:Je,glyphPositions:Vr.positions,imageMap:Wt,imagePositions:Er.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Ue.subdivisionGranularity})):yt.hasPattern&&(yt instanceof y.cx||yt instanceof y.cy||yt instanceof y.cz)&&(k(yt.layers,this.zoom,he),yt.addFeatures(Ue,this.tileID.canonical,Er.patternPositions))}return this.status="done",{buckets:Object.values(Ce).filter(tt=>!tt.isEmpty()),featureIndex:Ve,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Vr.image,imageAtlas:Er,glyphMap:this.returnDependencies?Je:null,iconMap:this.returnDependencies?Wt:null,glyphPositions:this.returnDependencies?Vr.positions:null}})}}function k(je,ne,ae){const he=new y.C(ne);for(const be of je)be.recalculate(he,ae)}class O{constructor(ne,ae,he){this.actor=ne,this.layerIndex=ae,this.availableImages=he,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ne,ae){return y._(this,void 0,void 0,function*(){const he=yield y.n(ne.request,ae);try{return{vectorTile:new y.cA.VectorTile(new y.cB(he.data)),rawData:he.data,cacheControl:he.cacheControl,expires:he.expires}}catch(be){const oe=new Uint8Array(he.data);let Be=`Unable to parse the tile at ${ne.request.url}, `;throw Be+=oe[0]===31&&oe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${be.message}`,new Error(Be)}})}loadTile(ne){return y._(this,void 0,void 0,function*(){const ae=ne.uid,he=!!(ne&&ne.request&&ne.request.collectResourceTiming)&&new y.cC(ne.request),be=new P(ne);this.loading[ae]=be;const oe=new AbortController;be.abort=oe;try{const Be=yield this.loadVectorTile(ne,oe);if(delete this.loading[ae],!Be)return null;const Ve=Be.rawData,Ce={};Be.expires&&(Ce.expires=Be.expires),Be.cacheControl&&(Ce.cacheControl=Be.cacheControl);const Ue={};if(he){const Fe=he.finish();Fe&&(Ue.resourceTiming=JSON.parse(JSON.stringify(Fe)))}be.vectorTile=Be.vectorTile;const qe=be.parse(Be.vectorTile,this.layerIndex,this.availableImages,this.actor,ne.subdivisionGranularity);this.loaded[ae]=be,this.fetching[ae]={rawTileData:Ve,cacheControl:Ce,resourceTiming:Ue};try{const Fe=yield qe;return y.e({rawTileData:Ve.slice(0)},Fe,Ce,Ue)}finally{delete this.fetching[ae]}}catch(Be){throw delete this.loading[ae],be.status="done",this.loaded[ae]=be,Be}})}reloadTile(ne){return y._(this,void 0,void 0,function*(){const ae=ne.uid;if(!this.loaded||!this.loaded[ae])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const he=this.loaded[ae];if(he.showCollisionBoxes=ne.showCollisionBoxes,he.status==="parsing"){const be=yield he.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,ne.subdivisionGranularity);let oe;if(this.fetching[ae]){const{rawTileData:Be,cacheControl:Ve,resourceTiming:Ce}=this.fetching[ae];delete this.fetching[ae],oe=y.e({rawTileData:Be.slice(0)},be,Ve,Ce)}else oe=be;return oe}if(he.status==="done"&&he.vectorTile)return he.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,ne.subdivisionGranularity)})}abortTile(ne){return y._(this,void 0,void 0,function*(){const ae=this.loading,he=ne.uid;ae&&ae[he]&&ae[he].abort&&(ae[he].abort.abort(),delete ae[he])})}removeTile(ne){return y._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ne.uid]&&delete this.loaded[ne.uid]})}}class L{constructor(){this.loaded={}}loadTile(ne){return y._(this,void 0,void 0,function*(){const{uid:ae,encoding:he,rawImageData:be,redFactor:oe,greenFactor:Be,blueFactor:Ve,baseShift:Ce}=ne,Ue=be.width+2,qe=be.height+2,Fe=y.b(be)?new y.R({width:Ue,height:qe},yield y.cD(be,-1,-1,Ue,qe)):be,dt=new y.cE(ae,Fe,he,oe,Be,Ve,Ce);return this.loaded=this.loaded||{},this.loaded[ae]=dt,dt})}removeTile(ne){const ae=this.loaded,he=ne.uid;ae&&ae[he]&&delete ae[he]}}var F,G,ee=function(){if(G)return F;function je(ae,he){if(ae.length!==0){ne(ae[0],he);for(var be=1;be<ae.length;be++)ne(ae[be],!he)}}function ne(ae,he){for(var be=0,oe=0,Be=0,Ve=ae.length,Ce=Ve-1;Be<Ve;Ce=Be++){var Ue=(ae[Be][0]-ae[Ce][0])*(ae[Ce][1]+ae[Be][1]),qe=be+Ue;oe+=Math.abs(be)>=Math.abs(Ue)?be-qe+Ue:Ue-qe+be,be=qe}be+oe>=0!=!!he&&ae.reverse()}return G=1,F=function ae(he,be){var oe,Be=he&&he.type;if(Be==="FeatureCollection")for(oe=0;oe<he.features.length;oe++)ae(he.features[oe],be);else if(Be==="GeometryCollection")for(oe=0;oe<he.geometries.length;oe++)ae(he.geometries[oe],be);else if(Be==="Feature")ae(he.geometry,be);else if(Be==="Polygon")je(he.coordinates,be);else if(Be==="MultiPolygon")for(oe=0;oe<he.coordinates.length;oe++)je(he.coordinates[oe],be);return he}}(),X=y.cF(ee);const W=y.cA.VectorTileFeature.prototype.toGeoJSON;class pe{constructor(ne){this._feature=ne,this.extent=y.Z,this.type=ne.type,this.properties=ne.tags,"id"in ne&&!isNaN(ne.id)&&(this.id=parseInt(ne.id,10))}loadGeometry(){if(this._feature.type===1){const ne=[];for(const ae of this._feature.geometry)ne.push([new y.P(ae[0],ae[1])]);return ne}{const ne=[];for(const ae of this._feature.geometry){const he=[];for(const be of ae)he.push(new y.P(be[0],be[1]));ne.push(he)}return ne}}toGeoJSON(ne,ae,he){return W.call(this,ne,ae,he)}}class me{constructor(ne){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=y.Z,this.length=ne.length,this._features=ne}feature(ne){return new pe(this._features[ne])}}var _e,Se,ke,nt={exports:{}},Ke=function(){if(ke)return nt.exports;ke=1;var je=y.cI(),ne=function(){if(Se)return _e;Se=1;var qe=y.cG(),Fe=y.cH().VectorTileFeature;function dt(At,Ft){this.options=Ft||{},this.features=At,this.length=At.length}function Pt(At,Ft){this.id=typeof At.id=="number"?At.id:void 0,this.type=At.type,this.rawGeometry=At.type===1?[At.geometry]:At.geometry,this.properties=At.tags,this.extent=Ft||4096}return _e=dt,dt.prototype.feature=function(At){return new Pt(this.features[At],this.options.extent)},Pt.prototype.loadGeometry=function(){var At=this.rawGeometry;this.geometry=[];for(var Ft=0;Ft<At.length;Ft++){for(var lr=At[Ft],Je=[],Wt=0;Wt<lr.length;Wt++)Je.push(new qe(lr[Wt][0],lr[Wt][1]));this.geometry.push(Je)}return this.geometry},Pt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var At=this.geometry,Ft=1/0,lr=-1/0,Je=1/0,Wt=-1/0,vr=0;vr<At.length;vr++)for(var Vr=At[vr],Er=0;Er<Vr.length;Er++){var tt=Vr[Er];Ft=Math.min(Ft,tt.x),lr=Math.max(lr,tt.x),Je=Math.min(Je,tt.y),Wt=Math.max(Wt,tt.y)}return[Ft,Je,lr,Wt]},Pt.prototype.toGeoJSON=Fe.prototype.toGeoJSON,_e}();function ae(qe){var Fe=new je;return function(dt,Pt){for(var At in dt.layers)Pt.writeMessage(3,he,dt.layers[At])}(qe,Fe),Fe.finish()}function he(qe,Fe){var dt;Fe.writeVarintField(15,qe.version||1),Fe.writeStringField(1,qe.name||""),Fe.writeVarintField(5,qe.extent||4096);var Pt={keys:[],values:[],keycache:{},valuecache:{}};for(dt=0;dt<qe.length;dt++)Pt.feature=qe.feature(dt),Fe.writeMessage(2,be,Pt);var At=Pt.keys;for(dt=0;dt<At.length;dt++)Fe.writeStringField(3,At[dt]);var Ft=Pt.values;for(dt=0;dt<Ft.length;dt++)Fe.writeMessage(4,Ue,Ft[dt])}function be(qe,Fe){var dt=qe.feature;dt.id!==void 0&&Fe.writeVarintField(1,dt.id),Fe.writeMessage(2,oe,qe),Fe.writeVarintField(3,dt.type),Fe.writeMessage(4,Ce,dt)}function oe(qe,Fe){var dt=qe.feature,Pt=qe.keys,At=qe.values,Ft=qe.keycache,lr=qe.valuecache;for(var Je in dt.properties){var Wt=dt.properties[Je],vr=Ft[Je];if(Wt!==null){vr===void 0&&(Pt.push(Je),Ft[Je]=vr=Pt.length-1),Fe.writeVarint(vr);var Vr=typeof Wt;Vr!=="string"&&Vr!=="boolean"&&Vr!=="number"&&(Wt=JSON.stringify(Wt));var Er=Vr+":"+Wt,tt=lr[Er];tt===void 0&&(At.push(Wt),lr[Er]=tt=At.length-1),Fe.writeVarint(tt)}}}function Be(qe,Fe){return(Fe<<3)+(7&qe)}function Ve(qe){return qe<<1^qe>>31}function Ce(qe,Fe){for(var dt=qe.loadGeometry(),Pt=qe.type,At=0,Ft=0,lr=dt.length,Je=0;Je<lr;Je++){var Wt=dt[Je],vr=1;Pt===1&&(vr=Wt.length),Fe.writeVarint(Be(1,vr));for(var Vr=Pt===3?Wt.length-1:Wt.length,Er=0;Er<Vr;Er++){Er===1&&Pt!==1&&Fe.writeVarint(Be(2,Vr-1));var tt=Wt[Er].x-At,yt=Wt[Er].y-Ft;Fe.writeVarint(Ve(tt)),Fe.writeVarint(Ve(yt)),At+=tt,Ft+=yt}Pt===3&&Fe.writeVarint(Be(7,1))}}function Ue(qe,Fe){var dt=typeof qe;dt==="string"?Fe.writeStringField(1,qe):dt==="boolean"?Fe.writeBooleanField(7,qe):dt==="number"&&(qe%1!=0?Fe.writeDoubleField(3,qe):qe<0?Fe.writeSVarintField(6,qe):Fe.writeVarintField(5,qe))}return nt.exports=ae,nt.exports.fromVectorTileJs=ae,nt.exports.fromGeojsonVt=function(qe,Fe){Fe=Fe||{};var dt={};for(var Pt in qe)dt[Pt]=new ne(qe[Pt].features,Fe),dt[Pt].name=Pt,dt[Pt].version=Fe.version,dt[Pt].extent=Fe.extent;return ae({layers:dt})},nt.exports.GeoJSONWrapper=ne,nt.exports}(),Ye=y.cF(Ke);const ht={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:je=>je},kt=Math.fround||(sr=new Float32Array(1),je=>(sr[0]=+je,sr[0]));var sr;const ir=3,Xt=5,or=6;class Ct{constructor(ne){this.options=Object.assign(Object.create(ht),ne),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ne){const{log:ae,minZoom:he,maxZoom:be}=this.options;ae&&console.time("total time");const oe=`prepare ${ne.length} points`;ae&&console.time(oe),this.points=ne;const Be=[];for(let Ce=0;Ce<ne.length;Ce++){const Ue=ne[Ce];if(!Ue.geometry)continue;const[qe,Fe]=Ue.geometry.coordinates,dt=kt(dr(qe)),Pt=kt(De(Fe));Be.push(dt,Pt,1/0,Ce,-1,1),this.options.reduce&&Be.push(0)}let Ve=this.trees[be+1]=this._createTree(Be);ae&&console.timeEnd(oe);for(let Ce=be;Ce>=he;Ce--){const Ue=+Date.now();Ve=this.trees[Ce]=this._createTree(this._cluster(Ve,Ce)),ae&&console.log("z%d: %d clusters in %dms",Ce,Ve.numItems,+Date.now()-Ue)}return ae&&console.timeEnd("total time"),this}getClusters(ne,ae){let he=((ne[0]+180)%360+360)%360-180;const be=Math.max(-90,Math.min(90,ne[1]));let oe=ne[2]===180?180:((ne[2]+180)%360+360)%360-180;const Be=Math.max(-90,Math.min(90,ne[3]));if(ne[2]-ne[0]>=360)he=-180,oe=180;else if(he>oe){const Fe=this.getClusters([he,be,180,Be],ae),dt=this.getClusters([-180,be,oe,Be],ae);return Fe.concat(dt)}const Ve=this.trees[this._limitZoom(ae)],Ce=Ve.range(dr(he),De(Be),dr(oe),De(be)),Ue=Ve.data,qe=[];for(const Fe of Ce){const dt=this.stride*Fe;qe.push(Ue[dt+Xt]>1?Nt(Ue,dt,this.clusterProps):this.points[Ue[dt+ir]])}return qe}getChildren(ne){const ae=this._getOriginId(ne),he=this._getOriginZoom(ne),be="No cluster with the specified id.",oe=this.trees[he];if(!oe)throw new Error(be);const Be=oe.data;if(ae*this.stride>=Be.length)throw new Error(be);const Ve=this.options.radius/(this.options.extent*Math.pow(2,he-1)),Ce=oe.within(Be[ae*this.stride],Be[ae*this.stride+1],Ve),Ue=[];for(const qe of Ce){const Fe=qe*this.stride;Be[Fe+4]===ne&&Ue.push(Be[Fe+Xt]>1?Nt(Be,Fe,this.clusterProps):this.points[Be[Fe+ir]])}if(Ue.length===0)throw new Error(be);return Ue}getLeaves(ne,ae,he){const be=[];return this._appendLeaves(be,ne,ae=ae||10,he=he||0,0),be}getTile(ne,ae,he){const be=this.trees[this._limitZoom(ne)],oe=Math.pow(2,ne),{extent:Be,radius:Ve}=this.options,Ce=Ve/Be,Ue=(he-Ce)/oe,qe=(he+1+Ce)/oe,Fe={features:[]};return this._addTileFeatures(be.range((ae-Ce)/oe,Ue,(ae+1+Ce)/oe,qe),be.data,ae,he,oe,Fe),ae===0&&this._addTileFeatures(be.range(1-Ce/oe,Ue,1,qe),be.data,oe,he,oe,Fe),ae===oe-1&&this._addTileFeatures(be.range(0,Ue,Ce/oe,qe),be.data,-1,he,oe,Fe),Fe.features.length?Fe:null}getClusterExpansionZoom(ne){let ae=this._getOriginZoom(ne)-1;for(;ae<=this.options.maxZoom;){const he=this.getChildren(ne);if(ae++,he.length!==1)break;ne=he[0].properties.cluster_id}return ae}_appendLeaves(ne,ae,he,be,oe){const Be=this.getChildren(ae);for(const Ve of Be){const Ce=Ve.properties;if(Ce&&Ce.cluster?oe+Ce.point_count<=be?oe+=Ce.point_count:oe=this._appendLeaves(ne,Ce.cluster_id,he,be,oe):oe<be?oe++:ne.push(Ve),ne.length===he)break}return oe}_createTree(ne){const ae=new y.aF(ne.length/this.stride|0,this.options.nodeSize,Float32Array);for(let he=0;he<ne.length;he+=this.stride)ae.add(ne[he],ne[he+1]);return ae.finish(),ae.data=ne,ae}_addTileFeatures(ne,ae,he,be,oe,Be){for(const Ve of ne){const Ce=Ve*this.stride,Ue=ae[Ce+Xt]>1;let qe,Fe,dt;if(Ue)qe=Rt(ae,Ce,this.clusterProps),Fe=ae[Ce],dt=ae[Ce+1];else{const Ft=this.points[ae[Ce+ir]];qe=Ft.properties;const[lr,Je]=Ft.geometry.coordinates;Fe=dr(lr),dt=De(Je)}const Pt={type:1,geometry:[[Math.round(this.options.extent*(Fe*oe-he)),Math.round(this.options.extent*(dt*oe-be))]],tags:qe};let At;At=Ue||this.options.generateId?ae[Ce+ir]:this.points[ae[Ce+ir]].id,At!==void 0&&(Pt.id=At),Be.features.push(Pt)}}_limitZoom(ne){return Math.max(this.options.minZoom,Math.min(Math.floor(+ne),this.options.maxZoom+1))}_cluster(ne,ae){const{radius:he,extent:be,reduce:oe,minPoints:Be}=this.options,Ve=he/(be*Math.pow(2,ae)),Ce=ne.data,Ue=[],qe=this.stride;for(let Fe=0;Fe<Ce.length;Fe+=qe){if(Ce[Fe+2]<=ae)continue;Ce[Fe+2]=ae;const dt=Ce[Fe],Pt=Ce[Fe+1],At=ne.within(Ce[Fe],Ce[Fe+1],Ve),Ft=Ce[Fe+Xt];let lr=Ft;for(const Je of At){const Wt=Je*qe;Ce[Wt+2]>ae&&(lr+=Ce[Wt+Xt])}if(lr>Ft&&lr>=Be){let Je,Wt=dt*Ft,vr=Pt*Ft,Vr=-1;const Er=((Fe/qe|0)<<5)+(ae+1)+this.points.length;for(const tt of At){const yt=tt*qe;if(Ce[yt+2]<=ae)continue;Ce[yt+2]=ae;const Lt=Ce[yt+Xt];Wt+=Ce[yt]*Lt,vr+=Ce[yt+1]*Lt,Ce[yt+4]=Er,oe&&(Je||(Je=this._map(Ce,Fe,!0),Vr=this.clusterProps.length,this.clusterProps.push(Je)),oe(Je,this._map(Ce,yt)))}Ce[Fe+4]=Er,Ue.push(Wt/lr,vr/lr,1/0,Er,-1,lr),oe&&Ue.push(Vr)}else{for(let Je=0;Je<qe;Je++)Ue.push(Ce[Fe+Je]);if(lr>1)for(const Je of At){const Wt=Je*qe;if(!(Ce[Wt+2]<=ae)){Ce[Wt+2]=ae;for(let vr=0;vr<qe;vr++)Ue.push(Ce[Wt+vr])}}}}return Ue}_getOriginId(ne){return ne-this.points.length>>5}_getOriginZoom(ne){return(ne-this.points.length)%32}_map(ne,ae,he){if(ne[ae+Xt]>1){const Be=this.clusterProps[ne[ae+or]];return he?Object.assign({},Be):Be}const be=this.points[ne[ae+ir]].properties,oe=this.options.map(be);return he&&oe===be?Object.assign({},oe):oe}}function Nt(je,ne,ae){return{type:"Feature",id:je[ne+ir],properties:Rt(je,ne,ae),geometry:{type:"Point",coordinates:[(he=je[ne],360*(he-.5)),wt(je[ne+1])]}};var he}function Rt(je,ne,ae){const he=je[ne+Xt],be=he>=1e4?`${Math.round(he/1e3)}k`:he>=1e3?Math.round(he/100)/10+"k":he,oe=je[ne+or],Be=oe===-1?{}:Object.assign({},ae[oe]);return Object.assign(Be,{cluster:!0,cluster_id:je[ne+ir],point_count:he,point_count_abbreviated:be})}function dr(je){return je/360+.5}function De(je){const ne=Math.sin(je*Math.PI/180),ae=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return ae<0?0:ae>1?1:ae}function wt(je){const ne=(180-360*je)*Math.PI/180;return 360*Math.atan(Math.exp(ne))/Math.PI-90}function Zt(je,ne,ae,he){let be=he;const oe=ne+(ae-ne>>1);let Be,Ve=ae-ne;const Ce=je[ne],Ue=je[ne+1],qe=je[ae],Fe=je[ae+1];for(let dt=ne+3;dt<ae;dt+=3){const Pt=Ht(je[dt],je[dt+1],Ce,Ue,qe,Fe);if(Pt>be)Be=dt,be=Pt;else if(Pt===be){const At=Math.abs(dt-oe);At<Ve&&(Be=dt,Ve=At)}}be>he&&(Be-ne>3&&Zt(je,ne,Be,he),je[Be+2]=be,ae-Be>3&&Zt(je,Be,ae,he))}function Ht(je,ne,ae,he,be,oe){let Be=be-ae,Ve=oe-he;if(Be!==0||Ve!==0){const Ce=((je-ae)*Be+(ne-he)*Ve)/(Be*Be+Ve*Ve);Ce>1?(ae=be,he=oe):Ce>0&&(ae+=Be*Ce,he+=Ve*Ce)}return Be=je-ae,Ve=ne-he,Be*Be+Ve*Ve}function zt(je,ne,ae,he){const be={id:je??null,type:ne,geometry:ae,tags:he,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ne==="Point"||ne==="MultiPoint"||ne==="LineString")er(be,ae);else if(ne==="Polygon")er(be,ae[0]);else if(ne==="MultiLineString")for(const oe of ae)er(be,oe);else if(ne==="MultiPolygon")for(const oe of ae)er(be,oe[0]);return be}function er(je,ne){for(let ae=0;ae<ne.length;ae+=3)je.minX=Math.min(je.minX,ne[ae]),je.minY=Math.min(je.minY,ne[ae+1]),je.maxX=Math.max(je.maxX,ne[ae]),je.maxY=Math.max(je.maxY,ne[ae+1])}function nr(je,ne,ae,he){if(!ne.geometry)return;const be=ne.geometry.coordinates;if(be&&be.length===0)return;const oe=ne.geometry.type,Be=Math.pow(ae.tolerance/((1<<ae.maxZoom)*ae.extent),2);let Ve=[],Ce=ne.id;if(ae.promoteId?Ce=ne.properties[ae.promoteId]:ae.generateId&&(Ce=he||0),oe==="Point")Qr(be,Ve);else if(oe==="MultiPoint")for(const Ue of be)Qr(Ue,Ve);else if(oe==="LineString")br(be,Ve,Be,!1);else if(oe==="MultiLineString"){if(ae.lineMetrics){for(const Ue of be)Ve=[],br(Ue,Ve,Be,!1),je.push(zt(Ce,"LineString",Ve,ne.properties));return}ti(be,Ve,Be,!1)}else if(oe==="Polygon")ti(be,Ve,Be,!0);else{if(oe!=="MultiPolygon"){if(oe==="GeometryCollection"){for(const Ue of ne.geometry.geometries)nr(je,{id:Ce,geometry:Ue,properties:ne.properties},ae,he);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Ue of be){const qe=[];ti(Ue,qe,Be,!0),Ve.push(qe)}}je.push(zt(Ce,oe,Ve,ne.properties))}function Qr(je,ne){ne.push(Ur(je[0]),li(je[1]),0)}function br(je,ne,ae,he){let be,oe,Be=0;for(let Ce=0;Ce<je.length;Ce++){const Ue=Ur(je[Ce][0]),qe=li(je[Ce][1]);ne.push(Ue,qe,0),Ce>0&&(Be+=he?(be*qe-Ue*oe)/2:Math.sqrt(Math.pow(Ue-be,2)+Math.pow(qe-oe,2))),be=Ue,oe=qe}const Ve=ne.length-3;ne[2]=1,Zt(ne,0,Ve,ae),ne[Ve+2]=1,ne.size=Math.abs(Be),ne.start=0,ne.end=ne.size}function ti(je,ne,ae,he){for(let be=0;be<je.length;be++){const oe=[];br(je[be],oe,ae,he),ne.push(oe)}}function Ur(je){return je/360+.5}function li(je){const ne=Math.sin(je*Math.PI/180),ae=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return ae<0?0:ae>1?1:ae}function Di(je,ne,ae,he,be,oe,Be,Ve){if(he/=ne,oe>=(ae/=ne)&&Be<he)return je;if(Be<ae||oe>=he)return null;const Ce=[];for(const Ue of je){const qe=Ue.geometry;let Fe=Ue.type;const dt=be===0?Ue.minX:Ue.minY,Pt=be===0?Ue.maxX:Ue.maxY;if(dt>=ae&&Pt<he){Ce.push(Ue);continue}if(Pt<ae||dt>=he)continue;let At=[];if(Fe==="Point"||Fe==="MultiPoint")zr(qe,At,ae,he,be);else if(Fe==="LineString")pr(qe,At,ae,he,be,!1,Ve.lineMetrics);else if(Fe==="MultiLineString")Fi(qe,At,ae,he,be,!1);else if(Fe==="Polygon")Fi(qe,At,ae,he,be,!0);else if(Fe==="MultiPolygon")for(const Ft of qe){const lr=[];Fi(Ft,lr,ae,he,be,!0),lr.length&&At.push(lr)}if(At.length){if(Ve.lineMetrics&&Fe==="LineString"){for(const Ft of At)Ce.push(zt(Ue.id,Fe,Ft,Ue.tags));continue}Fe!=="LineString"&&Fe!=="MultiLineString"||(At.length===1?(Fe="LineString",At=At[0]):Fe="MultiLineString"),Fe!=="Point"&&Fe!=="MultiPoint"||(Fe=At.length===3?"Point":"MultiPoint"),Ce.push(zt(Ue.id,Fe,At,Ue.tags))}}return Ce.length?Ce:null}function zr(je,ne,ae,he,be){for(let oe=0;oe<je.length;oe+=3){const Be=je[oe+be];Be>=ae&&Be<=he&&Yi(ne,je[oe],je[oe+1],je[oe+2])}}function pr(je,ne,ae,he,be,oe,Be){let Ve=Ki(je);const Ce=be===0?we:Re;let Ue,qe,Fe=je.start;for(let lr=0;lr<je.length-3;lr+=3){const Je=je[lr],Wt=je[lr+1],vr=je[lr+2],Vr=je[lr+3],Er=je[lr+4],tt=be===0?Je:Wt,yt=be===0?Vr:Er;let Lt=!1;Be&&(Ue=Math.sqrt(Math.pow(Je-Vr,2)+Math.pow(Wt-Er,2))),tt<ae?yt>ae&&(qe=Ce(Ve,Je,Wt,Vr,Er,ae),Be&&(Ve.start=Fe+Ue*qe)):tt>he?yt<he&&(qe=Ce(Ve,Je,Wt,Vr,Er,he),Be&&(Ve.start=Fe+Ue*qe)):Yi(Ve,Je,Wt,vr),yt<ae&&tt>=ae&&(qe=Ce(Ve,Je,Wt,Vr,Er,ae),Lt=!0),yt>he&&tt<=he&&(qe=Ce(Ve,Je,Wt,Vr,Er,he),Lt=!0),!oe&&Lt&&(Be&&(Ve.end=Fe+Ue*qe),ne.push(Ve),Ve=Ki(je)),Be&&(Fe+=Ue)}let dt=je.length-3;const Pt=je[dt],At=je[dt+1],Ft=be===0?Pt:At;Ft>=ae&&Ft<=he&&Yi(Ve,Pt,At,je[dt+2]),dt=Ve.length-3,oe&&dt>=3&&(Ve[dt]!==Ve[0]||Ve[dt+1]!==Ve[1])&&Yi(Ve,Ve[0],Ve[1],Ve[2]),Ve.length&&ne.push(Ve)}function Ki(je){const ne=[];return ne.size=je.size,ne.start=je.start,ne.end=je.end,ne}function Fi(je,ne,ae,he,be,oe){for(const Be of je)pr(Be,ne,ae,he,be,oe,!1)}function Yi(je,ne,ae,he){je.push(ne,ae,he)}function we(je,ne,ae,he,be,oe){const Be=(oe-ne)/(he-ne);return Yi(je,oe,ae+(be-ae)*Be,1),Be}function Re(je,ne,ae,he,be,oe){const Be=(oe-ae)/(be-ae);return Yi(je,ne+(he-ne)*Be,oe,1),Be}function We(je,ne){const ae=[];for(let he=0;he<je.length;he++){const be=je[he],oe=be.type;let Be;if(oe==="Point"||oe==="MultiPoint"||oe==="LineString")Be=vt(be.geometry,ne);else if(oe==="MultiLineString"||oe==="Polygon"){Be=[];for(const Ve of be.geometry)Be.push(vt(Ve,ne))}else if(oe==="MultiPolygon"){Be=[];for(const Ve of be.geometry){const Ce=[];for(const Ue of Ve)Ce.push(vt(Ue,ne));Be.push(Ce)}}ae.push(zt(be.id,oe,Be,be.tags))}return ae}function vt(je,ne){const ae=[];ae.size=je.size,je.start!==void 0&&(ae.start=je.start,ae.end=je.end);for(let he=0;he<je.length;he+=3)ae.push(je[he]+ne,je[he+1],je[he+2]);return ae}function xt(je,ne){if(je.transformed)return je;const ae=1<<je.z,he=je.x,be=je.y;for(const oe of je.features){const Be=oe.geometry,Ve=oe.type;if(oe.geometry=[],Ve===1)for(let Ce=0;Ce<Be.length;Ce+=2)oe.geometry.push(Et(Be[Ce],Be[Ce+1],ne,ae,he,be));else for(let Ce=0;Ce<Be.length;Ce++){const Ue=[];for(let qe=0;qe<Be[Ce].length;qe+=2)Ue.push(Et(Be[Ce][qe],Be[Ce][qe+1],ne,ae,he,be));oe.geometry.push(Ue)}}return je.transformed=!0,je}function Et(je,ne,ae,he,be,oe){return[Math.round(ae*(je*he-be)),Math.round(ae*(ne*he-oe))]}function Ut(je,ne,ae,he,be){const oe=ne===be.maxZoom?0:be.tolerance/((1<<ne)*be.extent),Be={features:[],numPoints:0,numSimplified:0,numFeatures:je.length,source:null,x:ae,y:he,z:ne,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ve of je)ur(Be,Ve,oe,be);return Be}function ur(je,ne,ae,he){const be=ne.geometry,oe=ne.type,Be=[];if(je.minX=Math.min(je.minX,ne.minX),je.minY=Math.min(je.minY,ne.minY),je.maxX=Math.max(je.maxX,ne.maxX),je.maxY=Math.max(je.maxY,ne.maxY),oe==="Point"||oe==="MultiPoint")for(let Ve=0;Ve<be.length;Ve+=3)Be.push(be[Ve],be[Ve+1]),je.numPoints++,je.numSimplified++;else if(oe==="LineString")_r(Be,be,je,ae,!1,!1);else if(oe==="MultiLineString"||oe==="Polygon")for(let Ve=0;Ve<be.length;Ve++)_r(Be,be[Ve],je,ae,oe==="Polygon",Ve===0);else if(oe==="MultiPolygon")for(let Ve=0;Ve<be.length;Ve++){const Ce=be[Ve];for(let Ue=0;Ue<Ce.length;Ue++)_r(Be,Ce[Ue],je,ae,!0,Ue===0)}if(Be.length){let Ve=ne.tags||null;if(oe==="LineString"&&he.lineMetrics){Ve={};for(const Ue in ne.tags)Ve[Ue]=ne.tags[Ue];Ve.mapbox_clip_start=be.start/be.size,Ve.mapbox_clip_end=be.end/be.size}const Ce={geometry:Be,type:oe==="Polygon"||oe==="MultiPolygon"?3:oe==="LineString"||oe==="MultiLineString"?2:1,tags:Ve};ne.id!==null&&(Ce.id=ne.id),je.features.push(Ce)}}function _r(je,ne,ae,he,be,oe){const Be=he*he;if(he>0&&ne.size<(be?Be:he))return void(ae.numPoints+=ne.length/3);const Ve=[];for(let Ce=0;Ce<ne.length;Ce+=3)(he===0||ne[Ce+2]>Be)&&(ae.numSimplified++,Ve.push(ne[Ce],ne[Ce+1])),ae.numPoints++;be&&function(Ce,Ue){let qe=0;for(let Fe=0,dt=Ce.length,Pt=dt-2;Fe<dt;Pt=Fe,Fe+=2)qe+=(Ce[Fe]-Ce[Pt])*(Ce[Fe+1]+Ce[Pt+1]);if(qe>0===Ue)for(let Fe=0,dt=Ce.length;Fe<dt/2;Fe+=2){const Pt=Ce[Fe],At=Ce[Fe+1];Ce[Fe]=Ce[dt-2-Fe],Ce[Fe+1]=Ce[dt-1-Fe],Ce[dt-2-Fe]=Pt,Ce[dt-1-Fe]=At}}(Ve,oe),je.push(Ve)}const qr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Pi{constructor(ne,ae){const he=(ae=this.options=function(oe,Be){for(const Ve in Be)oe[Ve]=Be[Ve];return oe}(Object.create(qr),ae)).debug;if(he&&console.time("preprocess data"),ae.maxZoom<0||ae.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ae.promoteId&&ae.generateId)throw new Error("promoteId and generateId cannot be used together.");let be=function(oe,Be){const Ve=[];if(oe.type==="FeatureCollection")for(let Ce=0;Ce<oe.features.length;Ce++)nr(Ve,oe.features[Ce],Be,Ce);else nr(Ve,oe.type==="Feature"?oe:{geometry:oe},Be);return Ve}(ne,ae);this.tiles={},this.tileCoords=[],he&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ae.indexMaxZoom,ae.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),be=function(oe,Be){const Ve=Be.buffer/Be.extent;let Ce=oe;const Ue=Di(oe,1,-1-Ve,Ve,0,-1,2,Be),qe=Di(oe,1,1-Ve,2+Ve,0,-1,2,Be);return(Ue||qe)&&(Ce=Di(oe,1,-Ve,1+Ve,0,-1,2,Be)||[],Ue&&(Ce=We(Ue,1).concat(Ce)),qe&&(Ce=Ce.concat(We(qe,-1)))),Ce}(be,ae),be.length&&this.splitTile(be,0,0,0),he&&(be.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ne,ae,he,be,oe,Be,Ve){const Ce=[ne,ae,he,be],Ue=this.options,qe=Ue.debug;for(;Ce.length;){be=Ce.pop(),he=Ce.pop(),ae=Ce.pop(),ne=Ce.pop();const Fe=1<<ae,dt=Ui(ae,he,be);let Pt=this.tiles[dt];if(!Pt&&(qe>1&&console.time("creation"),Pt=this.tiles[dt]=Ut(ne,ae,he,be,Ue),this.tileCoords.push({z:ae,x:he,y:be}),qe)){qe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ae,he,be,Pt.numFeatures,Pt.numPoints,Pt.numSimplified),console.timeEnd("creation"));const Lt=`z${ae}`;this.stats[Lt]=(this.stats[Lt]||0)+1,this.total++}if(Pt.source=ne,oe==null){if(ae===Ue.indexMaxZoom||Pt.numPoints<=Ue.indexMaxPoints)continue}else{if(ae===Ue.maxZoom||ae===oe)continue;if(oe!=null){const Lt=oe-ae;if(he!==Be>>Lt||be!==Ve>>Lt)continue}}if(Pt.source=null,ne.length===0)continue;qe>1&&console.time("clipping");const At=.5*Ue.buffer/Ue.extent,Ft=.5-At,lr=.5+At,Je=1+At;let Wt=null,vr=null,Vr=null,Er=null,tt=Di(ne,Fe,he-At,he+lr,0,Pt.minX,Pt.maxX,Ue),yt=Di(ne,Fe,he+Ft,he+Je,0,Pt.minX,Pt.maxX,Ue);ne=null,tt&&(Wt=Di(tt,Fe,be-At,be+lr,1,Pt.minY,Pt.maxY,Ue),vr=Di(tt,Fe,be+Ft,be+Je,1,Pt.minY,Pt.maxY,Ue),tt=null),yt&&(Vr=Di(yt,Fe,be-At,be+lr,1,Pt.minY,Pt.maxY,Ue),Er=Di(yt,Fe,be+Ft,be+Je,1,Pt.minY,Pt.maxY,Ue),yt=null),qe>1&&console.timeEnd("clipping"),Ce.push(Wt||[],ae+1,2*he,2*be),Ce.push(vr||[],ae+1,2*he,2*be+1),Ce.push(Vr||[],ae+1,2*he+1,2*be),Ce.push(Er||[],ae+1,2*he+1,2*be+1)}}getTile(ne,ae,he){ne=+ne,ae=+ae,he=+he;const be=this.options,{extent:oe,debug:Be}=be;if(ne<0||ne>24)return null;const Ve=1<<ne,Ce=Ui(ne,ae=ae+Ve&Ve-1,he);if(this.tiles[Ce])return xt(this.tiles[Ce],oe);Be>1&&console.log("drilling down to z%d-%d-%d",ne,ae,he);let Ue,qe=ne,Fe=ae,dt=he;for(;!Ue&&qe>0;)qe--,Fe>>=1,dt>>=1,Ue=this.tiles[Ui(qe,Fe,dt)];return Ue&&Ue.source?(Be>1&&(console.log("found parent tile z%d-%d-%d",qe,Fe,dt),console.time("drilling down")),this.splitTile(Ue.source,qe,Fe,dt,ne,ae,he),Be>1&&console.timeEnd("drilling down"),this.tiles[Ce]?xt(this.tiles[Ce],oe):null):null}}function Ui(je,ne,ae){return 32*((1<<je)*ae+ne)+je}function zi(je,ne){return ne?je.properties[ne]:je.id}function Rn(je,ne){if(je==null)return!0;if(je.type==="Feature")return zi(je,ne)!=null;if(je.type==="FeatureCollection"){const ae=new Set;for(const he of je.features){const be=zi(he,ne);if(be==null||ae.has(be))return!1;ae.add(be)}return!0}return!1}function In(je,ne){const ae=new Map;if(je!=null)if(je.type==="Feature")ae.set(zi(je,ne),je);else for(const he of je.features)ae.set(zi(he,ne),he);return ae}class ni extends O{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ne,ae){return y._(this,void 0,void 0,function*(){const he=ne.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const be=this._geoJSONIndex.getTile(he.z,he.x,he.y);if(!be)return null;const oe=new me(be.features);let Be=Ye(oe);return Be.byteOffset===0&&Be.byteLength===Be.buffer.byteLength||(Be=new Uint8Array(Be)),{vectorTile:oe,rawData:Be.buffer}})}loadData(ne){return y._(this,void 0,void 0,function*(){var ae;(ae=this._pendingRequest)===null||ae===void 0||ae.abort();const he=!!(ne&&ne.request&&ne.request.collectResourceTiming)&&new y.cC(ne.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ne,this._pendingRequest),this._geoJSONIndex=ne.cluster?new Ct(function({superclusterOptions:Be,clusterProperties:Ve}){if(!Ve||!Be)return Be;const Ce={},Ue={},qe={accumulated:null,zoom:0},Fe={properties:null},dt=Object.keys(Ve);for(const Pt of dt){const[At,Ft]=Ve[Pt],lr=y.cJ(Ft),Je=y.cJ(typeof At=="string"?[At,["accumulated"],["get",Pt]]:At);Ce[Pt]=lr.value,Ue[Pt]=Je.value}return Be.map=Pt=>{Fe.properties=Pt;const At={};for(const Ft of dt)At[Ft]=Ce[Ft].evaluate(qe,Fe);return At},Be.reduce=(Pt,At)=>{Fe.properties=At;for(const Ft of dt)qe.accumulated=Pt[Ft],Pt[Ft]=Ue[Ft].evaluate(qe,Fe)},Be}(ne)).load((yield this._pendingData).features):(be=yield this._pendingData,new Pi(be,ne.geojsonVtOptions)),this.loaded={};const oe={};if(he){const Be=he.finish();Be&&(oe.resourceTiming={},oe.resourceTiming[ne.source]=JSON.parse(JSON.stringify(Be)))}return oe}catch(oe){if(delete this._pendingRequest,y.cn(oe))return{abandoned:!0};throw oe}var be})}getData(){return y._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ne){const ae=this.loaded;return ae&&ae[ne.uid]?super.reloadTile(ne):this.loadTile(ne)}loadAndProcessGeoJSON(ne,ae){return y._(this,void 0,void 0,function*(){let he=yield this.loadGeoJSON(ne,ae);if(delete this._pendingRequest,typeof he!="object")throw new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`);if(X(he,!0),ne.filter){const be=y.cJ(ne.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(be.result==="error")throw new Error(be.value.map(Be=>`${Be.key}: ${Be.message}`).join(", "));he={type:"FeatureCollection",features:he.features.filter(Be=>be.value.evaluate({zoom:0},Be))}}return he})}loadGeoJSON(ne,ae){return y._(this,void 0,void 0,function*(){const{promoteId:he}=ne;if(ne.request){const be=yield y.j(ne.request,ae);return this._dataUpdateable=Rn(be.data,he)?In(be.data,he):void 0,be.data}if(typeof ne.data=="string")try{const be=JSON.parse(ne.data);return this._dataUpdateable=Rn(be,he)?In(be,he):void 0,be}catch{throw new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`)}if(!ne.dataDiff)throw new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ne.source}`);return function(be,oe,Be){var Ve,Ce,Ue,qe;if(oe.removeAll&&be.clear(),oe.remove)for(const Fe of oe.remove)be.delete(Fe);if(oe.add)for(const Fe of oe.add){const dt=zi(Fe,Be);dt!=null&&be.set(dt,Fe)}if(oe.update)for(const Fe of oe.update){let dt=be.get(Fe.id);if(dt==null)continue;const Pt=!Fe.removeAllProperties&&(((Ve=Fe.removeProperties)===null||Ve===void 0?void 0:Ve.length)>0||((Ce=Fe.addOrUpdateProperties)===null||Ce===void 0?void 0:Ce.length)>0);if((Fe.newGeometry||Fe.removeAllProperties||Pt)&&(dt=Object.assign({},dt),be.set(Fe.id,dt),Pt&&(dt.properties=Object.assign({},dt.properties))),Fe.newGeometry&&(dt.geometry=Fe.newGeometry),Fe.removeAllProperties)dt.properties={};else if(((Ue=Fe.removeProperties)===null||Ue===void 0?void 0:Ue.length)>0)for(const At of Fe.removeProperties)Object.prototype.hasOwnProperty.call(dt.properties,At)&&delete dt.properties[At];if(((qe=Fe.addOrUpdateProperties)===null||qe===void 0?void 0:qe.length)>0)for(const{key:At,value:Ft}of Fe.addOrUpdateProperties)dt.properties[At]=Ft}}(this._dataUpdateable,ne.dataDiff,he),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ne){return y._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ne){return this._geoJSONIndex.getClusterExpansionZoom(ne.clusterId)}getClusterChildren(ne){return this._geoJSONIndex.getChildren(ne.clusterId)}getClusterLeaves(ne){return this._geoJSONIndex.getLeaves(ne.clusterId,ne.limit,ne.offset)}}class ri{constructor(ne){this.self=ne,this.actor=new y.H(ne),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ae,he)=>{if(this.externalWorkerSourceTypes[ae])throw new Error(`Worker source with name "${ae}" already registered.`);this.externalWorkerSourceTypes[ae]=he},this.self.addProtocol=y.cp,this.self.removeProtocol=y.cq,this.self.registerRTLTextPlugin=ae=>{y.cK.setMethods(ae)},this.actor.registerMessageHandler("LDT",(ae,he)=>this._getDEMWorkerSource(ae,he.source).loadTile(he)),this.actor.registerMessageHandler("RDT",(ae,he)=>y._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ae,he.source).removeTile(he)})),this.actor.registerMessageHandler("GCEZ",(ae,he)=>y._(this,void 0,void 0,function*(){return this._getWorkerSource(ae,he.type,he.source).getClusterExpansionZoom(he)})),this.actor.registerMessageHandler("GCC",(ae,he)=>y._(this,void 0,void 0,function*(){return this._getWorkerSource(ae,he.type,he.source).getClusterChildren(he)})),this.actor.registerMessageHandler("GCL",(ae,he)=>y._(this,void 0,void 0,function*(){return this._getWorkerSource(ae,he.type,he.source).getClusterLeaves(he)})),this.actor.registerMessageHandler("LD",(ae,he)=>this._getWorkerSource(ae,he.type,he.source).loadData(he)),this.actor.registerMessageHandler("GD",(ae,he)=>this._getWorkerSource(ae,he.type,he.source).getData()),this.actor.registerMessageHandler("LT",(ae,he)=>this._getWorkerSource(ae,he.type,he.source).loadTile(he)),this.actor.registerMessageHandler("RT",(ae,he)=>this._getWorkerSource(ae,he.type,he.source).reloadTile(he)),this.actor.registerMessageHandler("AT",(ae,he)=>this._getWorkerSource(ae,he.type,he.source).abortTile(he)),this.actor.registerMessageHandler("RMT",(ae,he)=>this._getWorkerSource(ae,he.type,he.source).removeTile(he)),this.actor.registerMessageHandler("RS",(ae,he)=>y._(this,void 0,void 0,function*(){if(!this.workerSources[ae]||!this.workerSources[ae][he.type]||!this.workerSources[ae][he.type][he.source])return;const be=this.workerSources[ae][he.type][he.source];delete this.workerSources[ae][he.type][he.source],be.removeSource!==void 0&&be.removeSource(he)})),this.actor.registerMessageHandler("RM",ae=>y._(this,void 0,void 0,function*(){delete this.layerIndexes[ae],delete this.availableImages[ae],delete this.workerSources[ae],delete this.demWorkerSources[ae]})),this.actor.registerMessageHandler("SR",(ae,he)=>y._(this,void 0,void 0,function*(){this.referrer=he})),this.actor.registerMessageHandler("SRPS",(ae,he)=>this._syncRTLPluginState(ae,he)),this.actor.registerMessageHandler("IS",(ae,he)=>y._(this,void 0,void 0,function*(){this.self.importScripts(he)})),this.actor.registerMessageHandler("SI",(ae,he)=>this._setImages(ae,he)),this.actor.registerMessageHandler("UL",(ae,he)=>y._(this,void 0,void 0,function*(){this._getLayerIndex(ae).update(he.layers,he.removedIds)})),this.actor.registerMessageHandler("SL",(ae,he)=>y._(this,void 0,void 0,function*(){this._getLayerIndex(ae).replace(he)}))}_setImages(ne,ae){return y._(this,void 0,void 0,function*(){this.availableImages[ne]=ae;for(const he in this.workerSources[ne]){const be=this.workerSources[ne][he];for(const oe in be)be[oe].availableImages=ae}})}_syncRTLPluginState(ne,ae){return y._(this,void 0,void 0,function*(){return yield y.cK.syncState(ae,this.self.importScripts)})}_getAvailableImages(ne){let ae=this.availableImages[ne];return ae||(ae=[]),ae}_getLayerIndex(ne){let ae=this.layerIndexes[ne];return ae||(ae=this.layerIndexes[ne]=new l),ae}_getWorkerSource(ne,ae,he){if(this.workerSources[ne]||(this.workerSources[ne]={}),this.workerSources[ne][ae]||(this.workerSources[ne][ae]={}),!this.workerSources[ne][ae][he]){const be={sendAsync:(oe,Be)=>(oe.targetMapId=ne,this.actor.sendAsync(oe,Be))};switch(ae){case"vector":this.workerSources[ne][ae][he]=new O(be,this._getLayerIndex(ne),this._getAvailableImages(ne));break;case"geojson":this.workerSources[ne][ae][he]=new ni(be,this._getLayerIndex(ne),this._getAvailableImages(ne));break;default:this.workerSources[ne][ae][he]=new this.externalWorkerSourceTypes[ae](be,this._getLayerIndex(ne),this._getAvailableImages(ne))}}return this.workerSources[ne][ae][he]}_getDEMWorkerSource(ne,ae){return this.demWorkerSources[ne]||(this.demWorkerSources[ne]={}),this.demWorkerSources[ne][ae]||(this.demWorkerSources[ne][ae]=new L),this.demWorkerSources[ne][ae]}}return y.i(self)&&(self.worker=new ri(self)),ri}),_("index",["exports","./shared"],function(y,l){var C="5.4.0";function P(){var v=new l.A(4);return l.A!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v}let k,O;const L={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(v,e,a){const h=requestAnimationFrame(x=>{m(),e(x)}),{unsubscribe:m}=l.s(v.signal,"abort",()=>{m(),cancelAnimationFrame(h),a(l.c())},!1)},frameAsync(v){return new Promise((e,a)=>{this.frame(v,e,a)})},getImageData(v,e=0){return this.getImageCanvasContext(v).getImageData(-e,-e,v.width+2*e,v.height+2*e)},getImageCanvasContext(v){const e=window.document.createElement("canvas"),a=e.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return e.width=v.width,e.height=v.height,a.drawImage(v,0,0,v.width,v.height),a},resolveURL:v=>(k||(k=document.createElement("a")),k.href=v,k.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(O==null&&(O=matchMedia("(prefers-reduced-motion: reduce)")),O.matches)}};class F{static testProp(e){if(!F.docStyle)return e[0];for(let a=0;a<e.length;a++)if(e[a]in F.docStyle)return e[a];return e[0]}static create(e,a,h){const m=window.document.createElement(e);return a!==void 0&&(m.className=a),h&&h.appendChild(m),m}static createNS(e,a){return window.document.createElementNS(e,a)}static disableDrag(){F.docStyle&&F.selectProp&&(F.userSelect=F.docStyle[F.selectProp],F.docStyle[F.selectProp]="none")}static enableDrag(){F.docStyle&&F.selectProp&&(F.docStyle[F.selectProp]=F.userSelect)}static setTransform(e,a){e.style[F.transformProp]=a}static addEventListener(e,a,h,m={}){e.addEventListener(a,h,"passive"in m?m:m.capture)}static removeEventListener(e,a,h,m={}){e.removeEventListener(a,h,"passive"in m?m:m.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",F.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",F.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",F.suppressClickInternal,!0)},0)}static getScale(e){const a=e.getBoundingClientRect();return{x:a.width/e.offsetWidth||1,y:a.height/e.offsetHeight||1,boundingClientRect:a}}static getPoint(e,a,h){const m=a.boundingClientRect;return new l.P((h.clientX-m.left)/a.x-e.clientLeft,(h.clientY-m.top)/a.y-e.clientTop)}static mousePos(e,a){const h=F.getScale(e);return F.getPoint(e,h,a)}static touchPos(e,a){const h=[],m=F.getScale(e);for(let x=0;x<a.length;x++)h.push(F.getPoint(e,m,a[x]));return h}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}static sanitize(e){const a=new DOMParser().parseFromString(e,"text/html").body||document.createElement("body"),h=a.querySelectorAll("script");for(const m of h)m.remove();return F.clean(a),a.innerHTML}static isPossiblyDangerous(e,a){const h=a.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(e)||!h.includes("javascript:")&&!h.includes("data:"))||!!e.startsWith("on")||void 0}static clean(e){const a=e.children;for(const h of a)F.removeAttributes(h),F.clean(h)}static removeAttributes(e){for(const{name:a,value:h}of e.attributes)F.isPossiblyDangerous(a,h)&&e.removeAttribute(a)}}F.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,F.selectProp=F.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),F.transformProp=F.testProp(["transform","WebkitTransform"]);const G={supported:!1,testSupport:function(v){!W&&X&&(pe?me(v):ee=v)}};let ee,X,W=!1,pe=!1;function me(v){const e=v.createTexture();v.bindTexture(v.TEXTURE_2D,e);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,X),v.isContextLost())return;G.supported=!0}catch{}v.deleteTexture(e),W=!0}var _e;typeof document<"u"&&(X=document.createElement("img"),X.onload=()=>{ee&&me(ee),ee=null,pe=!0},X.onerror=()=>{W=!0,ee=null},X.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let e,a,h,m;v.resetRequestQueue=()=>{e=[],a=0,h=0,m={}},v.addThrottleControl=D=>{const j=h++;return m[j]=D,j},v.removeThrottleControl=D=>{delete m[D],M()},v.getImage=(D,j,U=!0)=>new Promise(($,Z)=>{G.supported&&(D.headers||(D.headers={}),D.headers.accept="image/webp,*/*"),l.e(D,{type:"image"}),e.push({abortController:j,requestParameters:D,supportImageRefresh:U,state:"queued",onError:te=>{Z(te)},onSuccess:te=>{$(te)}}),M()});const x=D=>l._(this,void 0,void 0,function*(){D.state="running";const{requestParameters:j,supportImageRefresh:U,onError:$,onSuccess:Z,abortController:te}=D,re=U===!1&&!l.i(self)&&!l.g(j.url)&&(!j.headers||Object.keys(j.headers).reduce((ge,ve)=>ge&&ve==="accept",!0));a++;const fe=re?R(j,te):l.m(j,te);try{const ge=yield fe;delete D.abortController,D.state="completed",ge.data instanceof HTMLImageElement||l.b(ge.data)?Z(ge):ge.data&&Z({data:yield(de=ge.data,typeof createImageBitmap=="function"?l.f(de):l.h(de)),cacheControl:ge.cacheControl,expires:ge.expires})}catch(ge){delete D.abortController,$(ge)}finally{a--,M()}var de}),M=()=>{const D=(()=>{for(const j of Object.keys(m))if(m[j]())return!0;return!1})()?l.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let j=a;j<D&&e.length>0;j++){const U=e.shift();U.abortController.signal.aborted?j--:x(U)}},R=(D,j)=>new Promise((U,$)=>{const Z=new Image,te=D.url,re=D.credentials;re&&re==="include"?Z.crossOrigin="use-credentials":(re&&re==="same-origin"||!l.d(te))&&(Z.crossOrigin="anonymous"),j.signal.addEventListener("abort",()=>{Z.src="",$(l.c())}),Z.fetchPriority="high",Z.onload=()=>{Z.onerror=Z.onload=null,U({data:Z})},Z.onerror=()=>{Z.onerror=Z.onload=null,j.signal.aborted||$(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Z.src=te})}(_e||(_e={})),_e.resetRequestQueue();class Se{constructor(e){this._transformRequestFn=e}transformRequest(e,a){return this._transformRequestFn&&this._transformRequestFn(e,a)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function ke(v){const e=[];if(typeof v=="string")e.push({id:"default",url:v});else if(v&&v.length>0){const a=[];for(const{id:h,url:m}of v){const x=`${h}${m}`;a.indexOf(x)===-1&&(a.push(x),e.push({id:h,url:m}))}}return e}function nt(v,e,a){try{const h=new URL(v);return h.pathname+=`${e}${a}`,h.toString()}catch{throw new Error(`Invalid sprite URL "${v}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class Ke{constructor(e,a,h,m){this.context=e,this.format=h,this.texture=e.gl.createTexture(),this.update(a,m)}update(e,a,h){const{width:m,height:x}=e,M=!(this.size&&this.size[0]===m&&this.size[1]===x||h),{context:R}=this,{gl:D}=R;if(this.useMipmap=!!(a&&a.useMipmap),D.bindTexture(D.TEXTURE_2D,this.texture),R.pixelStoreUnpackFlipY.set(!1),R.pixelStoreUnpack.set(1),R.pixelStoreUnpackPremultiplyAlpha.set(this.format===D.RGBA&&(!a||a.premultiply!==!1)),M)this.size=[m,x],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||l.b(e)?D.texImage2D(D.TEXTURE_2D,0,this.format,this.format,D.UNSIGNED_BYTE,e):D.texImage2D(D.TEXTURE_2D,0,this.format,m,x,0,this.format,D.UNSIGNED_BYTE,e.data);else{const{x:j,y:U}=h||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||l.b(e)?D.texSubImage2D(D.TEXTURE_2D,0,j,U,D.RGBA,D.UNSIGNED_BYTE,e):D.texSubImage2D(D.TEXTURE_2D,0,j,U,m,x,D.RGBA,D.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&D.generateMipmap(D.TEXTURE_2D),R.pixelStoreUnpackFlipY.setDefault(),R.pixelStoreUnpack.setDefault(),R.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(e,a,h){const{context:m}=this,{gl:x}=m;x.bindTexture(x.TEXTURE_2D,this.texture),h!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=x.LINEAR),e!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,e),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,h||e),this.filter=e),a!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,a),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function Ye(v){const{userImage:e}=v;return!!(e&&e.render&&e.render())&&(v.data.replace(new Uint8Array(e.data.buffer)),!0)}class ht extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:a,promiseResolve:h}of this.requestors)h(this._getImagesForIds(a));this.requestors=[]}}getImage(e){const a=this.images[e];if(a&&!a.data&&a.spriteData){const h=a.spriteData;a.data=new l.R({width:h.width,height:h.height},h.context.getImageData(h.x,h.y,h.width,h.height).data),a.spriteData=null}return a}addImage(e,a){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,a)&&(this.images[e]=a)}_validate(e,a){let h=!0;const m=a.data||a.spriteData;return this._validateStretch(a.stretchX,m&&m.width)||(this.fire(new l.k(new Error(`Image "${e}" has invalid "stretchX" value`))),h=!1),this._validateStretch(a.stretchY,m&&m.height)||(this.fire(new l.k(new Error(`Image "${e}" has invalid "stretchY" value`))),h=!1),this._validateContent(a.content,a)||(this.fire(new l.k(new Error(`Image "${e}" has invalid "content" value`))),h=!1),h}_validateStretch(e,a){if(!e)return!0;let h=0;for(const m of e){if(m[0]<h||m[1]<m[0]||a<m[1])return!1;h=m[1]}return!0}_validateContent(e,a){if(!e)return!0;if(e.length!==4)return!1;const h=a.spriteData,m=h&&h.width||a.data.width,x=h&&h.height||a.data.height;return!(e[0]<0||m<e[0]||e[1]<0||x<e[1]||e[2]<0||m<e[2]||e[3]<0||x<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,a,h=!0){const m=this.getImage(e);if(h&&(m.data.width!==a.data.width||m.data.height!==a.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${a.data.width}x${a.data.height}).`);a.version=m.version+1,this.images[e]=a,this.updatedImages[e]=!0}removeImage(e){const a=this.images[e];delete this.images[e],delete this.patterns[e],a.userImage&&a.userImage.onRemove&&a.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise((a,h)=>{let m=!0;if(!this.isLoaded())for(const x of e)this.images[x]||(m=!1);this.isLoaded()||m?a(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:a})})}_getImagesForIds(e){const a={};for(const h of e){let m=this.getImage(h);m||(this.fire(new l.l("styleimagemissing",{id:h})),m=this.getImage(h)),m?a[h]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:l.w(`Image "${h}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return a}getPixelSize(){const{width:e,height:a}=this.atlasImage;return{width:e,height:a}}getPattern(e){const a=this.patterns[e],h=this.getImage(e);if(!h)return null;if(a&&a.position.version===h.version)return a.position;if(a)a.position.version=h.version;else{const m={w:h.data.width+2,h:h.data.height+2,x:0,y:0},x=new l.I(m,h);this.patterns[e]={bin:m,position:x}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const a=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ke(e,this.atlasImage,a.RGBA),this.atlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const x in this.patterns)e.push(this.patterns[x].bin);const{w:a,h}=l.p(e),m=this.atlasImage;m.resize({width:a||1,height:h||1});for(const x in this.patterns){const{bin:M}=this.patterns[x],R=M.x+1,D=M.y+1,j=this.getImage(x).data,U=j.width,$=j.height;l.R.copy(j,m,{x:0,y:0},{x:R,y:D},{width:U,height:$}),l.R.copy(j,m,{x:0,y:$-1},{x:R,y:D-1},{width:U,height:1}),l.R.copy(j,m,{x:0,y:0},{x:R,y:D+$},{width:U,height:1}),l.R.copy(j,m,{x:U-1,y:0},{x:R-1,y:D},{width:1,height:$}),l.R.copy(j,m,{x:0,y:0},{x:R+U,y:D},{width:1,height:$})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const a of e){if(this.callbackDispatchedThisFrame[a])continue;this.callbackDispatchedThisFrame[a]=!0;const h=this.getImage(a);h||l.w(`Image with ID: "${a}" was not found`),Ye(h)&&this.updateImage(a,h)}}}const kt=1e20;function sr(v,e,a,h,m,x,M,R,D){for(let j=e;j<e+h;j++)ir(v,a*x+j,x,m,M,R,D);for(let j=a;j<a+m;j++)ir(v,j*x+e,1,h,M,R,D)}function ir(v,e,a,h,m,x,M){x[0]=0,M[0]=-1e20,M[1]=kt,m[0]=v[e];for(let R=1,D=0,j=0;R<h;R++){m[R]=v[e+R*a];const U=R*R;do{const $=x[D];j=(m[R]-m[$]+U-$*$)/(R-$)/2}while(j<=M[D]&&--D>-1);D++,x[D]=R,M[D]=j,M[D+1]=kt}for(let R=0,D=0;R<h;R++){for(;M[D+1]<R;)D++;const j=x[D],U=R-j;v[e+R*a]=m[j]+U*U}}class Xt{constructor(e,a){this.requestManager=e,this.localIdeographFontFamily=a,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return l._(this,void 0,void 0,function*(){const a=[];for(const x in e)for(const M of e[x])a.push(this._getAndCacheGlyphsPromise(x,M));const h=yield Promise.all(a),m={};for(const{stack:x,id:M,glyph:R}of h)m[x]||(m[x]={}),m[x][M]=R&&{id:R.id,bitmap:R.bitmap.clone(),metrics:R.metrics};return m})}_getAndCacheGlyphsPromise(e,a){return l._(this,void 0,void 0,function*(){let h=this.entries[e];h||(h=this.entries[e]={glyphs:{},requests:{},ranges:{}});let m=h.glyphs[a];if(m!==void 0)return{stack:e,id:a,glyph:m};if(m=this._tinySDF(h,e,a),m)return h.glyphs[a]=m,{stack:e,id:a,glyph:m};const x=Math.floor(a/256);if(256*x>65535)throw new Error("glyphs > 65535 not supported");if(h.ranges[x])return{stack:e,id:a,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!h.requests[x]){const R=Xt.loadGlyphRange(e,x,this.url,this.requestManager);h.requests[x]=R}const M=yield h.requests[x];for(const R in M)this._doesCharSupportLocalGlyph(+R)||(h.glyphs[+R]=M[+R]);return h.ranges[x]=!0,{stack:e,id:a,glyph:M[a]||null}})}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(e))||l.u["CJK Unified Ideographs"](e)||l.u["Hangul Syllables"](e)||l.u.Hiragana(e)||l.u.Katakana(e)||l.u["CJK Symbols and Punctuation"](e)||l.u["Halfwidth and Fullwidth Forms"](e))}_tinySDF(e,a,h){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(h))return;let x=e.tinySDF;if(!x){let R="400";/bold/i.test(a)?R="900":/medium/i.test(a)?R="500":/light/i.test(a)&&(R="200"),x=e.tinySDF=new Xt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:R})}const M=x.draw(String.fromCharCode(h));return{id:h,bitmap:new l.q({width:M.width||60,height:M.height||60},M.data),metrics:{width:M.glyphWidth/2||24,height:M.glyphHeight/2||24,left:M.glyphLeft/2+.5||0,top:M.glyphTop/2-27.5||-8,advance:M.glyphAdvance/2||24,isDoubleResolution:!0}}}}Xt.loadGlyphRange=function(v,e,a,h){return l._(this,void 0,void 0,function*(){const m=256*e,x=m+255,M=h.transformRequest(a.replace("{fontstack}",v).replace("{range}",`${m}-${x}`),"Glyphs"),R=yield l.n(M,new AbortController);if(!R||!R.data)throw new Error(`Could not load glyph range. range: ${e}, ${m}-${x}`);const D={};for(const j of l.o(R.data))D[j.id]=j;return D})},Xt.TinySDF=class{constructor({fontSize:v=24,buffer:e=3,radius:a=8,cutoff:h=.25,fontFamily:m="sans-serif",fontWeight:x="normal",fontStyle:M="normal"}={}){this.buffer=e,this.cutoff=h,this.radius=a;const R=this.size=v+4*e,D=this._createCanvas(R),j=this.ctx=D.getContext("2d",{willReadFrequently:!0});j.font=`${M} ${x} ${v}px ${m}`,j.textBaseline="alphabetic",j.textAlign="left",j.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(v){const e=document.createElement("canvas");return e.width=e.height=v,e}draw(v){const{width:e,actualBoundingBoxAscent:a,actualBoundingBoxDescent:h,actualBoundingBoxLeft:m,actualBoundingBoxRight:x}=this.ctx.measureText(v),M=Math.ceil(a),R=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-m))),D=Math.min(this.size-this.buffer,M+Math.ceil(h)),j=R+2*this.buffer,U=D+2*this.buffer,$=Math.max(j*U,0),Z=new Uint8ClampedArray($),te={data:Z,width:j,height:U,glyphWidth:R,glyphHeight:D,glyphTop:M,glyphLeft:0,glyphAdvance:e};if(R===0||D===0)return te;const{ctx:re,buffer:fe,gridInner:de,gridOuter:ge}=this;re.clearRect(fe,fe,R,D),re.fillText(v,fe,fe+M);const ve=re.getImageData(fe,fe,R,D);ge.fill(kt,0,$),de.fill(0,0,$);for(let Ae=0;Ae<D;Ae++)for(let Ee=0;Ee<R;Ee++){const Pe=ve.data[4*(Ae*R+Ee)+3]/255;if(Pe===0)continue;const Le=(Ae+fe)*j+Ee+fe;if(Pe===1)ge[Le]=0,de[Le]=kt;else{const Ie=.5-Pe;ge[Le]=Ie>0?Ie*Ie:0,de[Le]=Ie<0?Ie*Ie:0}}sr(ge,0,0,j,U,j,this.f,this.v,this.z),sr(de,fe,fe,R,D,j,this.f,this.v,this.z);for(let Ae=0;Ae<$;Ae++){const Ee=Math.sqrt(ge[Ae])-Math.sqrt(de[Ae]);Z[Ae]=Math.round(255-255*(Ee/this.radius+this.cutoff))}return te}};class or{constructor(){this.specification=l.v.light.position}possiblyEvaluate(e,a){return l.z(e.expression.evaluate(a))}interpolate(e,a,h){return{x:l.B.number(e.x,a.x,h),y:l.B.number(e.y,a.y,h),z:l.B.number(e.z,a.z,h)}}}let Ct;class Nt extends l.E{constructor(e){super(),Ct=Ct||new l.r({anchor:new l.D(l.v.light.anchor),position:new or,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(Ct),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,a={}){if(!this._validate(l.t,e,a))for(const h in e){const m=e[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),m):this._transitionable.setValue(h,m)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,a,h){return(!h||h.validate!==!1)&&l.x(this,e.call(l.y,{value:a,style:{glyphs:!0,sprite:!0},styleSpec:l.v}))}}const Rt=new l.r({"sky-color":new l.D(l.v.sky["sky-color"]),"horizon-color":new l.D(l.v.sky["horizon-color"]),"fog-color":new l.D(l.v.sky["fog-color"]),"fog-ground-blend":new l.D(l.v.sky["fog-ground-blend"]),"horizon-fog-blend":new l.D(l.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new l.D(l.v.sky["sky-horizon-blend"]),"atmosphere-blend":new l.D(l.v.sky["atmosphere-blend"])});class dr extends l.E{constructor(e){super(),this._transitionable=new l.T(Rt),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new l.C(0))}setSky(e,a={}){if(!this._validate(l.F,e,a)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const h in e){const m=e[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),m):this._transitionable.setValue(h,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,a,h={}){return(h==null?void 0:h.validate)!==!1&&l.x(this,e.call(l.y,l.e({value:a,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class De{constructor(e,a){this.width=e,this.height=a,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,a){const h=e.join(",")+String(a);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(e,a)),this.dashEntry[h]}getDashRanges(e,a,h){const m=[];let x=e.length%2==1?-e[e.length-1]*h:0,M=e[0]*h,R=!0;m.push({left:x,right:M,isDash:R,zeroLength:e[0]===0});let D=e[0];for(let j=1;j<e.length;j++){R=!R;const U=e[j];x=D*h,D+=U,M=D*h,m.push({left:x,right:M,isDash:R,zeroLength:U===0})}return m}addRoundDash(e,a,h){const m=a/2;for(let x=-h;x<=h;x++){const M=this.width*(this.nextRow+h+x);let R=0,D=e[R];for(let j=0;j<this.width;j++){j/D.right>1&&(D=e[++R]);const U=Math.abs(j-D.left),$=Math.abs(j-D.right),Z=Math.min(U,$);let te;const re=x/h*(m+1);if(D.isDash){const fe=m-Math.abs(re);te=Math.sqrt(Z*Z+fe*fe)}else te=m-Math.sqrt(Z*Z+re*re);this.data[M+j]=Math.max(0,Math.min(255,te+128))}}}addRegularDash(e){for(let R=e.length-1;R>=0;--R){const D=e[R],j=e[R+1];D.zeroLength?e.splice(R,1):j&&j.isDash===D.isDash&&(j.left=D.left,e.splice(R,1))}const a=e[0],h=e[e.length-1];a.isDash===h.isDash&&(a.left=h.left-this.width,h.right=a.right+this.width);const m=this.width*this.nextRow;let x=0,M=e[x];for(let R=0;R<this.width;R++){R/M.right>1&&(M=e[++x]);const D=Math.abs(R-M.left),j=Math.abs(R-M.right),U=Math.min(D,j);this.data[m+R]=Math.max(0,Math.min(255,(M.isDash?U:-U)+128))}}addDash(e,a){const h=a?7:0,m=2*h+1;if(this.nextRow+m>this.height)return l.w("LineAtlas out of space"),null;let x=0;for(let R=0;R<e.length;R++)x+=e[R];if(x!==0){const R=this.width/x,D=this.getDashRanges(e,this.width,R);a?this.addRoundDash(D,R,h):this.addRegularDash(D)}const M={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:x};return this.nextRow+=m,this.dirty=!0,M}bind(e){const a=e.gl;this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,this.data))}}const wt="maplibre_preloaded_worker_pool";class Zt{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Zt.workerCount;)this.workers.push(new Worker(l.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.numActive()===0&&(this.workers.forEach(a=>{a.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[wt]}numActive(){return Object.keys(this.active).length}}const Ht=Math.floor(L.hardwareConcurrency/2);let zt,er;function nr(){return zt||(zt=new Zt),zt}Zt.workerCount=l.G(globalThis)?Math.max(Math.min(Ht,3),1):1;class Qr{constructor(e,a){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=a;const h=this.workerPool.acquire(a);for(let m=0;m<h.length;m++){const x=new l.H(h[m],a);x.name=`Worker ${m}`,this.actors.push(x)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,a){const h=[];for(const m of this.actors)h.push(m.sendAsync({type:e,data:a}));return Promise.all(h)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach(a=>{a.remove()}),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,a){for(const h of this.actors)h.registerMessageHandler(e,a)}}function br(){return er||(er=new Qr(nr(),l.J),er.registerMessageHandler("GR",(v,e,a)=>l.m(e,a))),er}function ti(v,e){const a=l.K();return l.L(a,a,[1,1,0]),l.M(a,a,[.5*v.width,.5*v.height,1]),v.calculatePosMatrix?l.N(a,a,v.calculatePosMatrix(e.toUnwrapped())):a}function Ur(v,e,a,h,m,x,M){var R;const D=function(Z,te,re){if(Z)for(const fe of Z){const de=te[fe];if(de&&de.source===re&&de.type==="fill-extrusion")return!0}else for(const fe in te){const de=te[fe];if(de.source===re&&de.type==="fill-extrusion")return!0}return!1}((R=m==null?void 0:m.layers)!==null&&R!==void 0?R:null,e,v.id),j=x.maxPitchScaleFactor(),U=v.tilesIn(h,j,D);U.sort(li);const $=[];for(const Z of U)$.push({wrappedTileID:Z.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(e,a,v._state,Z.queryGeometry,Z.cameraQueryGeometry,Z.scale,m,x,j,ti(v.transform,Z.tileID),M?(te,re)=>M(Z.tileID,te,re):void 0)});return function(Z,te){for(const re in Z)for(const fe of Z[re])Di(fe,te);return Z}(function(Z){const te={},re={};for(const fe of Z){const de=fe.queryResults,ge=fe.wrappedTileID,ve=re[ge]=re[ge]||{};for(const Ae in de){const Ee=de[Ae],Pe=ve[Ae]=ve[Ae]||{},Le=te[Ae]=te[Ae]||[];for(const Ie of Ee)Pe[Ie.featureIndex]||(Pe[Ie.featureIndex]=!0,Le.push(Ie))}}return te}($),v)}function li(v,e){const a=v.tileID,h=e.tileID;return a.overscaledZ-h.overscaledZ||a.canonical.y-h.canonical.y||a.wrap-h.wrap||a.canonical.x-h.canonical.x}function Di(v,e){const a=v.feature,h=e.getFeatureState(a.layer["source-layer"],a.id);a.source=a.layer.source,a.layer["source-layer"]&&(a.sourceLayer=a.layer["source-layer"]),a.state=h}function zr(v,e,a){return l._(this,void 0,void 0,function*(){let h=v;if(v.url?h=(yield l.j(e.transformRequest(v.url,"Source"),a)).data:yield L.frameAsync(a),!h)return null;const m=l.O(l.e(h,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in h&&h.vector_layers&&(m.vectorLayerIds=h.vector_layers.map(x=>x.id)),m})}class pr{constructor(e,a){e&&(a?this.setSouthWest(e).setNorthEast(a):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof l.Q?new l.Q(e.lng,e.lat):l.Q.convert(e),this}setSouthWest(e){return this._sw=e instanceof l.Q?new l.Q(e.lng,e.lat):l.Q.convert(e),this}extend(e){const a=this._sw,h=this._ne;let m,x;if(e instanceof l.Q)m=e,x=e;else{if(!(e instanceof pr))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(pr.convert(e)):this.extend(l.Q.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(l.Q.convert(e)):this;if(m=e._sw,x=e._ne,!m||!x)return this}return a||h?(a.lng=Math.min(m.lng,a.lng),a.lat=Math.min(m.lat,a.lat),h.lng=Math.max(x.lng,h.lng),h.lat=Math.max(x.lat,h.lat)):(this._sw=new l.Q(m.lng,m.lat),this._ne=new l.Q(x.lng,x.lat)),this}getCenter(){return new l.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.Q(this.getWest(),this.getNorth())}getSouthEast(){return new l.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:a,lat:h}=l.Q.convert(e);let m=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&m}static convert(e){return e instanceof pr?e:e&&new pr(e)}static fromLngLat(e,a=0){const h=360*a/40075017,m=h/Math.cos(Math.PI/180*e.lat);return new pr(new l.Q(e.lng-m,e.lat-h),new l.Q(e.lng+m,e.lat+h))}adjustAntiMeridian(){const e=new l.Q(this._sw.lng,this._sw.lat),a=new l.Q(this._ne.lng,this._ne.lat);return new pr(e,e.lng>a.lng?new l.Q(a.lng+360,a.lat):a)}}class Ki{constructor(e,a,h){this.bounds=pr.convert(this.validateBounds(e)),this.minzoom=a||0,this.maxzoom=h||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const a=Math.pow(2,e.z),h=Math.floor(l.U(this.bounds.getWest())*a),m=Math.floor(l.S(this.bounds.getNorth())*a),x=Math.ceil(l.U(this.bounds.getEast())*a),M=Math.ceil(l.S(this.bounds.getSouth())*a);return e.x>=h&&e.x<x&&e.y>=m&&e.y<M}}class Fi extends l.E{constructor(e,a,h,m){if(super(),this.id=e,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.O(a,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield zr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(l.e(this,e),e.bounds&&(this.tileBounds=new Ki(e.bounds,this.minzoom,this.maxzoom)),this.fire(new l.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.l("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new l.k(e))}})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return l.e({},this._options)}loadTile(e){return l._(this,void 0,void 0,function*(){const a=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h={request:this.map._requestManager.transformRequest(a,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};h.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(e.actor&&e.state!=="expired"){if(e.state==="loading")return new Promise((x,M)=>{e.reloadPromise={resolve:x,reject:M}})}else e.actor=this.dispatcher.getActor(),m="LT";e.abortController=new AbortController;try{const x=yield e.actor.sendAsync({type:m,data:h},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,x)}catch(x){if(delete e.abortController,e.aborted)return;if(x&&x.status!==404)throw x;this._afterTileLoadWorkerResponse(e,null)}})}_afterTileLoadWorkerResponse(e,a){if(a&&a.resourceTiming&&(e.resourceTiming=a.resourceTiming),a&&this.map._refreshExpiredTiles&&e.setExpiryData(a),e.loadVectorData(a,this.map.painter),e.reloadPromise){const h=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(h.resolve).catch(h.reject)}}abortTile(e){return l._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))})}unloadTile(e){return l._(this,void 0,void 0,function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Yi extends l.E{constructor(e,a,h,m){super(),this.id=e,this.dispatcher=h,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},a),l.e(this,l.O(a,["url","scheme","tileSize"]))}load(){return l._(this,arguments,void 0,function*(e=!1){this._loaded=!1,this.fire(new l.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield zr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,a&&(l.e(this,a),a.bounds&&(this.tileBounds=new Ki(a.bounds,this.minzoom,this.maxzoom)),this.fire(new l.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:e})))}catch(a){this._tileJSONRequest=null,this.fire(new l.k(a))}})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load(!0)}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}serialize(){return l.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return l._(this,void 0,void 0,function*(){const a=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const h=yield _e.getImage(this.map._requestManager.transformRequest(a,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(h&&h.data){this.map._refreshExpiredTiles&&h.cacheControl&&h.expires&&e.setExpiryData({cacheControl:h.cacheControl,expires:h.expires});const m=this.map.painter.context,x=m.gl,M=h.data;e.texture=this.map.painter.getTileTexture(M.width),e.texture?e.texture.update(M,{useMipmap:!0}):(e.texture=new Ke(m,M,x.RGBA,{useMipmap:!0}),e.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(h){if(delete e.abortController,e.aborted)e.state="unloaded";else if(h)throw e.state="errored",h}})}abortTile(e){return l._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)})}unloadTile(e){return l._(this,void 0,void 0,function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)})}hasTransition(){return!1}}class we extends Yi{constructor(e,a,h,m){super(e,a,h,m),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox",this.redFactor=a.redFactor,this.greenFactor=a.greenFactor,this.blueFactor=a.blueFactor,this.baseShift=a.baseShift}loadTile(e){return l._(this,void 0,void 0,function*(){const a=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h=this.map._requestManager.transformRequest(a,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const m=yield _e.getImage(h,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(m&&m.data){const x=m.data;this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&e.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const M=l.b(x)&&l.V()?x:yield this.readImageNow(x),R={type:this.type,uid:e.uid,source:this.id,rawImageData:M,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||e.state==="expired"){e.actor=this.dispatcher.getActor();const D=yield e.actor.sendAsync({type:"LDT",data:R});e.dem=D,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(m){if(delete e.abortController,e.aborted)e.state="unloaded";else if(m)throw e.state="errored",m}})}readImageNow(e){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.W()){const a=e.width+2,h=e.height+2;try{return new l.R({width:a,height:h},yield l.X(e,-1,-1,a,h))}catch{}}return L.getImageData(e,1)})}_getNeighboringTiles(e){const a=e.canonical,h=Math.pow(2,a.z),m=(a.x-1+h)%h,x=a.x===0?e.wrap-1:e.wrap,M=(a.x+1+h)%h,R=a.x+1===h?e.wrap+1:e.wrap,D={};return D[new l.Y(e.overscaledZ,x,a.z,m,a.y).key]={backfilled:!1},D[new l.Y(e.overscaledZ,R,a.z,M,a.y).key]={backfilled:!1},a.y>0&&(D[new l.Y(e.overscaledZ,x,a.z,m,a.y-1).key]={backfilled:!1},D[new l.Y(e.overscaledZ,e.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},D[new l.Y(e.overscaledZ,R,a.z,M,a.y-1).key]={backfilled:!1}),a.y+1<h&&(D[new l.Y(e.overscaledZ,x,a.z,m,a.y+1).key]={backfilled:!1},D[new l.Y(e.overscaledZ,e.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},D[new l.Y(e.overscaledZ,R,a.z,M,a.y+1).key]={backfilled:!1}),D}unloadTile(e){return l._(this,void 0,void 0,function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))})}}class Re extends l.E{constructor(e,a,h,m){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=h.getActor(),this.setEventedParent(m),this._data=a.data,this._options=l.e({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId,a.clusterMaxZoom!==void 0&&this.maxzoom<=a.clusterMaxZoom&&l.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${a.clusterMaxZoom}".`),this.workerOptions=l.e({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(a.buffer!==void 0?a.buffer:128),tolerance:this._pixelsToTileUnits(a.tolerance!==void 0?a.tolerance:.375),extent:l.Z,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:l.Z,radius:this._pixelsToTileUnits(a.clusterRadius||50),log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(e){return e*(l.Z/this.tileSize)}load(){return l._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return l._(this,void 0,void 0,function*(){const e=l.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})})}getCoordinatesFromGeometry(e){return e.type==="GeometryCollection"?e.geometries.map(a=>a.coordinates).flat(1/0):e.coordinates.flat(1/0)}getBounds(){return l._(this,void 0,void 0,function*(){const e=new pr,a=yield this.getData();let h;switch(a.type){case"FeatureCollection":h=a.features.map(m=>this.getCoordinatesFromGeometry(m.geometry)).flat(1/0);break;case"Feature":h=this.getCoordinatesFromGeometry(a.geometry);break;default:h=this.getCoordinatesFromGeometry(a)}if(h.length==0)return e;for(let m=0;m<h.length-1;m+=2)e.extend([h[m],h[m+1]]);return e})}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(e.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(e.clusterRadius)),e.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,a,h){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:a,offset:h}})}_updateWorkerData(e){return l._(this,void 0,void 0,function*(){const a=l.e({type:this.type},this.workerOptions);e?a.dataDiff=e:typeof this._data=="string"?(a.request=this.map._requestManager.transformRequest(L.resolveURL(this._data),"Source"),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.l("dataloading",{dataType:"source"}));try{const h=yield this.actor.sendAsync({type:"LD",data:a});if(this._pendingLoads--,this._removed||h.abandoned)return void this.fire(new l.l("dataabort",{dataType:"source"}));let m=null;h.resourceTiming&&h.resourceTiming[this.id]&&(m=h.resourceTiming[this.id].slice(0));const x={dataType:"source"};this._collectResourceTiming&&m&&m.length>0&&l.e(x,{resourceTiming:m}),this.fire(new l.l("data",Object.assign(Object.assign({},x),{sourceDataType:"metadata"}))),this.fire(new l.l("data",Object.assign(Object.assign({},x),{sourceDataType:"content"})))}catch(h){if(this._pendingLoads--,this._removed)return void this.fire(new l.l("dataabort",{dataType:"source"}));this.fire(new l.k(h))}})}loaded(){return this._pendingLoads===0}loadTile(e){return l._(this,void 0,void 0,function*(){const a=e.actor?"RT":"LT";e.actor=this.actor;const h={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};e.abortController=new AbortController;const m=yield this.actor.sendAsync({type:a,data:h},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(m,this.map.painter,a==="RT")})}abortTile(e){return l._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0})}unloadTile(e){return l._(this,void 0,void 0,function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return l.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class We extends l.E{constructor(e,a,h,m){super(),this.flippedWindingOrder=!1,this.id=e,this.dispatcher=h,this.coordinates=a.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=a}load(e){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const a=yield _e.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,a&&a.data&&(this.image=a.data,e&&(this.coordinates=e),this._finishLoading())}catch(a){this._request=null,this._loaded=!0,this.fire(new l.k(a))}})}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const a=e.map(l.$.fromLngLat);var h;return this.tileID=function(m){let x=1/0,M=1/0,R=-1/0,D=-1/0;for(const Z of m)x=Math.min(x,Z.x),M=Math.min(M,Z.y),R=Math.max(R,Z.x),D=Math.max(D,Z.y);const j=Math.max(R-x,D-M),U=Math.max(0,Math.floor(-Math.log(j)/Math.LN2)),$=Math.pow(2,U);return new l.a1(U,Math.floor((x+R)/2*$),Math.floor((M+D)/2*$))}(a),this.terrainTileRanges=this._getOverlappingTileRanges(a),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=a.map(m=>this.tileID.getTilePoint(m)._round()),this.flippedWindingOrder=((h=this.tileCoords)[1].x-h[0].x)*(h[2].y-h[0].y)-(h[1].y-h[0].y)*(h[2].x-h[0].x)<0,this.fire(new l.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const e=this.map.painter.context,a=e.gl;this.texture||(this.texture=new Ke(e,this.image,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let h=!1;for(const m in this.tiles){const x=this.tiles[m];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,h=!0)}h&&this.fire(new l.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return l._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(e){let a=1/0,h=1/0,m=-1/0,x=-1/0;for(const R of e)a=Math.min(a,R.x),h=Math.min(h,R.y),m=Math.max(m,R.x),x=Math.max(x,R.y);const M={};for(let R=0;R<=l.a0;R++){const D=Math.pow(2,R),j=Math.floor(a*D),U=Math.floor(h*D),$=Math.floor(m*D),Z=Math.floor(x*D);M[R]={minTileX:j,minTileY:U,maxTileX:$,maxTileY:Z}}return M}}class vt extends We{constructor(e,a,h,m){super(e,a,h,m),this.roundZoom=!0,this.type="video",this.options=a}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const a of e.urls)this.urls.push(this.map._requestManager.transformRequest(a,"Source").url);try{const a=yield l.a2(this.urls);if(this._loaded=!0,!a)return;this.video=a,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(a){this.fire(new l.k(a))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const a=this.video.seekable;e<a.start(0)||e>a.end(0)?this.fire(new l.k(new l.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const e=this.map.painter.context,a=e.gl;this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new Ke(e,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let h=!1;for(const m in this.tiles){const x=this.tiles[m];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,h=!0)}h&&this.fire(new l.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class xt extends We{constructor(e,a,h,m){super(e,a,h,m),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(M=>typeof M!="number"))||this.fire(new l.k(new l.a3(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.k(new l.a3(`sources.${e}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new l.k(new l.a3(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new l.k(new l.a3(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.k(new l.a3(`sources.${e}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){return l._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context,h=a.gl;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ke(a,this.canvas,h.RGBA,{premultiply:!0});let m=!1;for(const x in this.tiles){const M=this.tiles[x];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture,m=!0)}m&&this.fire(new l.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const Et={},Ut=v=>{switch(v){case"geojson":return Re;case"image":return We;case"raster":return Yi;case"raster-dem":return we;case"vector":return Fi;case"video":return vt;case"canvas":return xt}return Et[v]},ur="RTLPluginLoaded";class _r extends l.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=br()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch(a=>{throw this.status="error",a})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return l._(this,arguments,void 0,function*(a,h=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=L.resolveURL(a),!this.url)throw new Error(`requested url ${a} is invalid`);if(this.status==="unavailable"){if(!h)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return l._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new l.l(ur))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let qr=null;function Pi(){return qr||(qr=new _r),qr}class Ui{constructor(e,a){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=l.a4(),this.uses=0,this.tileSize=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const a=e+this.timeAdded;a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,a,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(m,x){const M={};if(!x)return M;for(const R of m){const D=R.layerIds.map(j=>x.getLayer(j)).filter(Boolean);if(D.length!==0){R.layers=D,R.stateDependentLayerIds&&(R.stateDependentLayers=R.stateDependentLayerIds.map(j=>D.filter(U=>U.id===j)[0]));for(const j of D)M[j.id]=R}}return M}(e.buckets,a==null?void 0:a.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const x=this.buckets[m];if(x instanceof l.a6){if(this.hasSymbolBuckets=!0,!h)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const x=this.buckets[m];if(x instanceof l.a6&&x.hasRTLText){this.hasRTLText=!0,Pi().lazyLoad();break}}this.queryPadding=0;for(const m in this.buckets){const x=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(m).queryRadius(x))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new l.a5}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const h in this.buckets){const m=this.buckets[h];m.uploadPending()&&m.upload(e)}const a=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ke(e,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ke(e,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,a,h,m,x,M,R,D,j,U,$){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:x,scale:M,tileSize:this.tileSize,pixelPosMatrix:U,transform:D,params:R,queryPadding:this.queryPadding*j,getElevation:$},e,a,h):{}}querySourceFeatures(e,a){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const m=h.loadVTLayers(),x=a&&a.sourceLayer?a.sourceLayer:"",M=m._geojsonTileLayer||m[x];if(!M)return;const R=l.a7(a&&a.filter),{z:D,x:j,y:U}=this.tileID.canonical,$={z:D,x:j,y:U};for(let Z=0;Z<M.length;Z++){const te=M.feature(Z);if(R.needGeometry){const de=l.a8(te,!0);if(!R.filter(new l.C(this.tileID.overscaledZ),de,this.tileID.canonical))continue}else if(!R.filter(new l.C(this.tileID.overscaledZ),te))continue;const re=h.getId(te,x),fe=new l.a9(te,D,j,U,re);fe.tile=$,e.push(fe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const a=this.expirationTime;if(e.cacheControl){const h=l.aa(e.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const h=Date.now();let m=!1;if(this.expirationTime>h)m=!1;else if(a)if(this.expirationTime<a)m=!0;else{const x=this.expirationTime-a;x?this.expirationTime=h+Math.max(x,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0)return;const h=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!a.style.hasLayer(m))continue;const x=this.buckets[m],M=x.layers[0].sourceLayer||"_geojsonTileLayer",R=h[M],D=e[M];if(!R||!D||Object.keys(D).length===0)continue;x.update(D,R,this.imageAtlas&&this.imageAtlas.patternPositions||{});const j=a&&a.style&&a.style.getLayer(m);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<L.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=L.now()+e}setDependencies(e,a){const h={};for(const m of a)h[m]=!0;this.dependencies[e]=h}hasDependency(e,a){for(const h of e){const m=this.dependencies[h];if(m){for(const x of a)if(m[x])return!0}}return!1}}class zi{constructor(e,a){this.max=e,this.onRemove=a,this.reset()}reset(){for(const e in this.data)for(const a of this.data[e])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(e,a,h){const m=e.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const x={value:a,timeout:void 0};if(h!==void 0&&(x.timeout=setTimeout(()=>{this.remove(e,x)},h)),this.data[m].push(x),this.order.push(m),this.order.length>this.max){const M=this._getAndRemoveByKey(this.order[0]);M&&this.onRemove(M)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const a=this.data[e].shift();return a.timeout&&clearTimeout(a.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),a.value}getByKey(e){const a=this.data[e];return a?a[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,a){if(!this.has(e))return this;const h=e.wrapped().key,m=a===void 0?0:this.data[h].indexOf(a),x=this.data[h][m];return this.data[h].splice(m,1),x.timeout&&clearTimeout(x.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(x.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(e){const a=[];for(const h in this.data)for(const m of this.data[h])e(m.value)||a.push(m);for(const h of a)this.remove(h.value.tileID,h)}}class Rn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,a,h){const m=String(a);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][m]=this.stateChanges[e][m]||{},l.e(this.stateChanges[e][m],h),this.deletedStates[e]===null){this.deletedStates[e]={};for(const x in this.state[e])x!==m&&(this.deletedStates[e][x]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][m]===null){this.deletedStates[e][m]={};for(const x in this.state[e][m])h[x]||(this.deletedStates[e][m][x]=null)}else for(const x in h)this.deletedStates[e]&&this.deletedStates[e][m]&&this.deletedStates[e][m][x]===null&&delete this.deletedStates[e][m][x]}removeFeatureState(e,a,h){if(this.deletedStates[e]===null)return;const m=String(a);if(this.deletedStates[e]=this.deletedStates[e]||{},h&&a!==void 0)this.deletedStates[e][m]!==null&&(this.deletedStates[e][m]=this.deletedStates[e][m]||{},this.deletedStates[e][m][h]=null);else if(a!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][m])for(h in this.deletedStates[e][m]={},this.stateChanges[e][m])this.deletedStates[e][m][h]=null;else this.deletedStates[e][m]=null;else this.deletedStates[e]=null}getState(e,a){const h=String(a),m=l.e({},(this.state[e]||{})[h],(this.stateChanges[e]||{})[h]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const x=this.deletedStates[e][a];if(x===null)return{};for(const M in x)delete m[M]}return m}initializeTileState(e,a){e.setFeatureState(this.state,a)}coalesceChanges(e,a){const h={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const x={};for(const M in this.stateChanges[m])this.state[m][M]||(this.state[m][M]={}),l.e(this.state[m][M],this.stateChanges[m][M]),x[M]=this.state[m][M];h[m]=x}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const x={};if(this.deletedStates[m]===null)for(const M in this.state[m])x[M]={},this.state[m][M]={};else for(const M in this.deletedStates[m]){if(this.deletedStates[m][M]===null)this.state[m][M]={};else for(const R of Object.keys(this.deletedStates[m][M]))delete this.state[m][M][R];x[M]=this.state[m][M]}h[m]=h[m]||{},l.e(h[m],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const m in e)e[m].setFeatureState(h,a)}}const In=89.25;function ni(v,e){const a=l.ae(e.lat,-85.051129,l.af);return new l.P(l.U(e.lng)*v,l.S(a)*v)}function ri(v,e){return new l.$(e.x/v,e.y/v).toLngLat()}function je(v){return v.cameraToCenterDistance*Math.min(.85*Math.tan(l.ab(90-v.pitch)),Math.tan(l.ab(In-v.pitch)))}function ne(v,e){const a=v.canonical,h=e/l.ac(a.z),m=a.x+Math.pow(2,a.z)*v.wrap,x=l.ad(new Float64Array(16));return l.L(x,x,[m*h,a.y*h,0]),l.M(x,x,[h/l.Z,h/l.Z,1]),x}function ae(v,e,a,h,m){const x=l.$.fromLngLat(v,e),M=m*l.ag(1,v.lat),R=M*Math.cos(l.ab(a)),D=Math.sqrt(M*M-R*R),j=D*Math.sin(l.ab(-h)),U=D*Math.cos(l.ab(-h));return new l.$(x.x+j,x.y+U,x.z+R)}function he(v,e,a){const h=e.intersectsFrustum(v);if(!a)return h;const m=e.intersectsPlane(a);return h===0||m===0?0:h===2&&m===2?2:1}function be(v,e,a){let h=0;const m=(a-e)/10;for(let x=0;x<10;x++)h+=m*Math.pow(Math.cos(e+(x+.5)/10*(a-e)),v);return h}function oe(v,e){return function(a,h,m,x,M){const R=2*((v-1)/l.ah(Math.cos(l.ab(In-M))/Math.cos(l.ab(In)))-1),D=Math.acos(m/x),j=2*be(R-1,0,l.ab(M/2)),U=Math.min(l.ab(In),D+l.ab(M/2)),$=be(R-1,Math.min(U,D-l.ab(M/2)),U),Z=Math.atan(h/m),te=Math.hypot(h,m);let re=a;return re+=l.ah(x/te/Math.max(.5,Math.cos(l.ab(M/2)))),re+=R*l.ah(Math.cos(Z))/2,re-=l.ah(Math.max(1,$/j/e))/2,re}}const Be=oe(9.314,3);function Ve(v,e){const a=(e.roundZoom?Math.round:Math.floor)(v.zoom+l.ah(v.tileSize/e.tileSize));return Math.max(0,a)}function Ce(v,e){const a=v.getCameraFrustum(),h=v.getClippingPlane(),m=v.screenPointToMercatorCoordinate(v.getCameraPoint()),x=l.$.fromLngLat(v.center,v.elevation);m.z=x.z+Math.cos(v.pitchInRadians)*v.cameraToCenterDistance/v.worldSize;const M=v.getCoveringTilesDetailsProvider(),R=M.allowVariableZoom(v,e),D=Ve(v,e),j=e.minzoom||0,U=e.maxzoom!==void 0?e.maxzoom:v.maxZoom,$=Math.min(Math.max(0,D),U),Z=Math.pow(2,$),te=[Z*m.x,Z*m.y,0],re=[Z*x.x,Z*x.y,0],fe=Math.hypot(x.x-m.x,x.y-m.y),de=Math.abs(x.z-m.z),ge=Math.hypot(fe,de),ve=Pe=>({zoom:0,x:0,y:0,wrap:Pe,fullyVisible:!1}),Ae=[],Ee=[];if(v.renderWorldCopies&&M.allowWorldCopies())for(let Pe=1;Pe<=3;Pe++)Ae.push(ve(-Pe)),Ae.push(ve(Pe));for(Ae.push(ve(0));Ae.length>0;){const Pe=Ae.pop(),Le=Pe.x,Ie=Pe.y;let $e=Pe.fullyVisible;const He={x:Le,y:Ie,z:Pe.zoom},at=M.getTileAABB(He,Pe.wrap,v.elevation,e);if(!$e){const Tt=he(a,at,h);if(Tt===0)continue;$e=Tt===2}const ot=M.distanceToTile2d(m.x,m.y,He,at);let rt=D;R&&(rt=(e.calculateTileZoom||Be)(v.zoom+l.ah(v.tileSize/e.tileSize),ot,de,ge,v.fov)),rt=(e.roundZoom?Math.round:Math.floor)(rt),rt=Math.max(0,rt);const It=Math.min(rt,U);if(Pe.wrap=M.getWrap(x,He,Pe.wrap),Pe.zoom>=It){if(Pe.zoom<j)continue;const Tt=$-Pe.zoom,pt=te[0]-.5-(Le<<Tt),Vt=te[1]-.5-(Ie<<Tt),gr=e.reparseOverscaled?Math.max(Pe.zoom,rt):Pe.zoom;Ee.push({tileID:new l.Y(Pe.zoom===U?gr:Pe.zoom,Pe.wrap,Pe.zoom,Le,Ie),distanceSq:l.ai([re[0]-.5-Le,re[1]-.5-Ie]),tileDistanceToCamera:Math.sqrt(pt*pt+Vt*Vt)})}else for(let Tt=0;Tt<4;Tt++)Ae.push({zoom:Pe.zoom+1,x:(Le<<1)+Tt%2,y:(Ie<<1)+(Tt>>1),wrap:Pe.wrap,fullyVisible:$e})}return Ee.sort((Pe,Le)=>Pe.distanceSq-Le.distanceSq).map(Pe=>Pe.tileID)}class Ue extends l.E{constructor(e,a,h){super(),this.id=e,this.dispatcher=h,this.on("data",m=>this._dataHandler(m)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,x,M,R)=>{const D=new(Ut(x.type))(m,x,M,R);if(D.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${D.id}`);return D})(e,a,h,this),this._tiles={},this._cache=new zi(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Rn,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const a=this._tiles[e];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,a,h){return l._(this,void 0,void 0,function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,a,h)}catch(m){e.state="errored",m.status!==404?this._source.fire(new l.k(m,{tile:e})):this.update(this.transform,this.terrain)}})}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new l.l("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const h=this._tiles[a];h.upload(e),h.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(e=>e.tileID).sort(qe).map(e=>e.key)}getRenderableIds(e){const a=[];for(const h in this._tiles)this._isIdRenderable(h,e)&&a.push(this._tiles[h]);return e?a.sort((h,m)=>{const x=h.tileID,M=m.tileID,R=new l.P(x.canonical.x,x.canonical.y)._rotate(-this.transform.bearingInRadians),D=new l.P(M.canonical.x,M.canonical.y)._rotate(-this.transform.bearingInRadians);return x.overscaledZ-M.overscaledZ||D.y-R.y||D.x-R.x}).map(h=>h.tileID.key):a.map(h=>h.tileID).sort(qe).map(h=>h.key)}hasRenderableParent(e){const a=this.findLoadedParent(e,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(e,a){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(a||!this._tiles[e].holdingForFade())}reload(e){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)(e||this._tiles[a].state!=="errored")&&this._reloadTile(a,"reloading")}}_reloadTile(e,a){return l._(this,void 0,void 0,function*(){const h=this._tiles[e];h&&(h.state!=="loading"&&(h.state=a),yield this._loadTile(h,e,a))})}_tileLoaded(e,a,h){e.timeAdded=L.now(),h==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(a,e),this.getSource().type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new l.l("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const a=this.getRenderableIds();for(let m=0;m<a.length;m++){const x=a[m];if(e.neighboringTiles&&e.neighboringTiles[x]){const M=this.getTileByID(x);h(e,M),h(M,e)}}function h(m,x){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let M=x.tileID.canonical.x-m.tileID.canonical.x;const R=x.tileID.canonical.y-m.tileID.canonical.y,D=Math.pow(2,m.tileID.canonical.z),j=x.tileID.key;M===0&&R===0||Math.abs(R)>1||(Math.abs(M)>1&&(Math.abs(M+D)===1?M+=D:Math.abs(M-D)===1&&(M-=D)),x.dem&&m.dem&&(m.dem.backfillBorder(x.dem,M,R),m.neighboringTiles&&m.neighboringTiles[j]&&(m.neighboringTiles[j].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,a,h,m){for(const x in this._tiles){let M=this._tiles[x];if(m[x]||!M.hasData()||M.tileID.overscaledZ<=a||M.tileID.overscaledZ>h)continue;let R=M.tileID;for(;M&&M.tileID.overscaledZ>a+1;){const j=M.tileID.scaledTo(M.tileID.overscaledZ-1);M=this._tiles[j.key],M&&M.hasData()&&(R=j)}let D=R;for(;D.overscaledZ>a;)if(D=D.scaledTo(D.overscaledZ-1),e[D.key]||e[D.canonical.key]){m[R.key]=R;break}}}findLoadedParent(e,a){if(e.key in this._loadedParentTiles){const h=this._loadedParentTiles[e.key];return h&&h.tileID.overscaledZ>=a?h:null}for(let h=e.overscaledZ-1;h>=a;h--){const m=e.scaledTo(h),x=this._getLoadedTile(m);if(x)return x}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const a=this._tiles[e.key];return a&&a.hasData()?a:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const a=Math.ceil(e.width/this._source.tileSize)+1,h=Math.ceil(e.height/this._source.tileSize)+1,m=Math.floor(a*h*(this._maxTileCacheZoomLevels===null?l.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(x)}handleWrapJump(e){const a=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,a){const h={};for(const m in this._tiles){const x=this._tiles[m];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+a),h[x.tileID.key]=x}this._tiles=h;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}_updateCoveredAndRetainedTiles(e,a,h,m,x,M){const R={},D={},j=Object.keys(e),U=L.now();for(const $ of j){const Z=e[$],te=this._tiles[$];if(!te||te.fadeEndTime!==0&&te.fadeEndTime<=U)continue;const re=this.findLoadedParent(Z,a),fe=this.findLoadedSibling(Z),de=re||fe||null;de&&(this._addTile(de.tileID),R[de.tileID.key]=de.tileID),D[$]=Z}this._retainLoadedChildren(D,m,h,e);for(const $ in R)e[$]||(this._coveredTiles[$]=!0,e[$]=R[$]);if(M){const $={},Z={};for(const te of x)this._tiles[te.key].hasData()?$[te.key]=te:Z[te.key]=te;for(const te in Z){const re=Z[te].children(this._source.maxzoom);this._tiles[re[0].key]&&this._tiles[re[1].key]&&this._tiles[re[2].key]&&this._tiles[re[3].key]&&($[re[0].key]=e[re[0].key]=re[0],$[re[1].key]=e[re[1].key]=re[1],$[re[2].key]=e[re[2].key]=re[2],$[re[3].key]=e[re[3].key]=re[3],delete Z[te])}for(const te in Z){const re=Z[te],fe=this.findLoadedParent(re,this._source.minzoom),de=this.findLoadedSibling(re),ge=fe||de||null;if(ge){$[ge.tileID.key]=e[ge.tileID.key]=ge.tileID;for(const ve in $)$[ve].isChildOf(ge.tileID)&&delete $[ve]}}for(const te in this._tiles)$[te]||(this._coveredTiles[te]=!0)}}update(e,a){if(!this._sourceLoaded||this._paused)return;let h;this.transform=e,this.terrain=a,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(U=>new l.Y(U.canonical.z,U.wrap,U.canonical.z,U.canonical.x,U.canonical.y)):(h=Ce(e,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:a,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(h=h.filter(U=>this._source.hasTile(U)))):h=[];const m=Ve(e,this._source),x=Math.max(m-Ue.maxOverzooming,this._source.minzoom),M=Math.max(m+Ue.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const U={};for(const $ of h)if($.canonical.z>this._source.minzoom){const Z=$.scaledTo($.canonical.z-1);U[Z.key]=Z;const te=$.scaledTo(Math.max(this._source.minzoom,Math.min($.canonical.z,5)));U[te.key]=te}h=h.concat(Object.values(U))}const R=h.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,R&&this.fire(new l.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const D=this._updateRetainedTiles(h,m);Fe(this._source.type)&&this._updateCoveredAndRetainedTiles(D,x,M,m,h,a);for(const U in D)this._tiles[U].clearFadeHold();const j=l.aj(this._tiles,D);for(const U of j){const $=this._tiles[U];$.hasSymbolBuckets&&!$.holdingForFade()?$.setHoldDuration(this.map._fadeDuration):$.hasSymbolBuckets&&!$.symbolFadeFinished()||this._removeTile(U)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,a){var h;const m={},x={},M=Math.max(a-Ue.maxOverzooming,this._source.minzoom),R=Math.max(a+Ue.maxUnderzooming,this._source.minzoom),D={};for(const j of e){const U=this._addTile(j);m[j.key]=j,U.hasData()||a<this._source.maxzoom&&(D[j.key]=j)}this._retainLoadedChildren(D,a,R,m);for(const j of e){let U=this._tiles[j.key];if(U.hasData())continue;if(a+1>this._source.maxzoom){const Z=j.children(this._source.maxzoom)[0],te=this.getTile(Z);if(te&&te.hasData()){m[Z.key]=Z;continue}}else{const Z=j.children(this._source.maxzoom);if(m[Z[0].key]&&m[Z[1].key]&&m[Z[2].key]&&m[Z[3].key])continue}let $=U.wasRequested();for(let Z=j.overscaledZ-1;Z>=M;--Z){const te=j.scaledTo(Z);if(x[te.key])break;if(x[te.key]=!0,U=this.getTile(te),!U&&$&&(U=this._addTile(te)),U){const re=U.hasData();if((re||!(!((h=this.map)===null||h===void 0)&&h.cancelPendingTileRequestsWhileZooming)||$)&&(m[te.key]=te),$=U.wasRequested(),re)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const a=[];let h,m=this._tiles[e].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){h=this._loadedParentTiles[m.key];break}a.push(m.key);const x=m.scaledTo(m.overscaledZ-1);if(h=this._getLoadedTile(x),h)break;m=x}for(const x of a)this._loadedParentTiles[x]=h}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const a=this._tiles[e].tileID,h=this._getLoadedTile(a);this._loadedSiblingTiles[a.key]=h}}_addTile(e){let a=this._tiles[e.key];if(a)return a;a=this._cache.getAndRemove(e),a&&(this._setTileReloadTimer(e.key,a),a.tileID=e,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,a)));const h=a;return a||(a=new Ui(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(a,e.key,a.state)),a.uses++,this._tiles[e.key]=a,h||this._source.fire(new l.l("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a}_setTileReloadTimer(e,a){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const h=a.getExpiryTimeout();h&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},h))}_removeTile(e){const a=this._tiles[e];a&&(a.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}_dataHandler(e){const a=e.sourceDataType;e.dataType==="source"&&a==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&e.dataType==="source"&&a==="content"&&(this.reload(e.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,a,h){const m=[],x=this.transform;if(!x)return m;const M=h?x.getCameraQueryGeometry(e):e,R=e.map(re=>x.screenPointToMercatorCoordinate(re,this.terrain)),D=M.map(re=>x.screenPointToMercatorCoordinate(re,this.terrain)),j=this.getIds();let U=1/0,$=1/0,Z=-1/0,te=-1/0;for(const re of D)U=Math.min(U,re.x),$=Math.min($,re.y),Z=Math.max(Z,re.x),te=Math.max(te,re.y);for(let re=0;re<j.length;re++){const fe=this._tiles[j[re]];if(fe.holdingForFade())continue;const de=x.getCoveringTilesDetailsProvider().allowWorldCopies()?fe.tileID:fe.tileID.unwrapTo(0),ge=Math.pow(2,x.zoom-fe.tileID.overscaledZ),ve=a*fe.queryPadding*l.Z/fe.tileSize/ge,Ae=[de.getTilePoint(new l.$(U,$)),de.getTilePoint(new l.$(Z,te))];if(Ae[0].x-ve<l.Z&&Ae[0].y-ve<l.Z&&Ae[1].x+ve>=0&&Ae[1].y+ve>=0){const Ee=R.map(Le=>de.getTilePoint(Le)),Pe=D.map(Le=>de.getTilePoint(Le));m.push({tile:fe,tileID:de,queryGeometry:Ee,cameraQueryGeometry:Pe,scale:ge})}}return m}getVisibleCoordinates(e){const a=this.getRenderableIds(e).map(h=>this._tiles[h].tileID);return this.transform&&this.transform.populateCache(a),a}hasTransition(){if(this._source.hasTransition())return!0;if(Fe(this._source.type)){const e=L.now();for(const a in this._tiles)if(this._tiles[a].fadeEndTime>=e)return!0}return!1}setFeatureState(e,a,h){this._state.updateState(e=e||"_geojsonTileLayer",a,h)}removeFeatureState(e,a,h){this._state.removeFeatureState(e=e||"_geojsonTileLayer",a,h)}getFeatureState(e,a){return this._state.getState(e=e||"_geojsonTileLayer",a)}setDependencies(e,a,h){const m=this._tiles[e];m&&m.setDependencies(a,h)}reloadTilesForDependencies(e,a){for(const h in this._tiles)this._tiles[h].hasDependency(e,a)&&this._reloadTile(h,"reloading");this._cache.filter(h=>!h.hasDependency(e,a))}}function qe(v,e){const a=Math.abs(2*v.wrap)-+(v.wrap<0),h=Math.abs(2*e.wrap)-+(e.wrap<0);return v.overscaledZ-e.overscaledZ||h-a||e.canonical.y-v.canonical.y||e.canonical.x-v.canonical.x}function Fe(v){return v==="raster"||v==="image"||v==="video"}Ue.maxOverzooming=10,Ue.maxUnderzooming=3;class dt{constructor(e,a){this.reset(e,a)}reset(e,a){this.points=e||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(a||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=l.ae(e,0,1);let a=1,h=this._distances[a];const m=e*this.paddedLength+this.padding;for(;h<m&&a<this._distances.length;)h=this._distances[++a];const x=a-1,M=this._distances[x],R=h-M,D=R>0?(m-M)/R:0;return this.points[x].mult(1-D).add(this.points[a].mult(D))}}function Pt(v,e){let a=!0;return v==="always"||v!=="never"&&e!=="never"||(a=!1),a}class At{constructor(e,a,h){const m=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(e/h),this.yCellCount=Math.ceil(a/h);for(let M=0;M<this.xCellCount*this.yCellCount;M++)m.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=a,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/a,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,a,h,m,x){this._forEachCell(a,h,m,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(a),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(x)}insertCircle(e,a,h,m){this._forEachCell(a-m,h-m,a+m,h+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(a),this.circles.push(h),this.circles.push(m)}_insertBoxCell(e,a,h,m,x,M){this.boxCells[x].push(M)}_insertCircleCell(e,a,h,m,x,M){this.circleCells[x].push(M)}_query(e,a,h,m,x,M,R){if(h<0||e>this.width||m<0||a>this.height)return[];const D=[];if(e<=0&&a<=0&&this.width<=h&&this.height<=m){if(x)return[{key:null,x1:e,y1:a,x2:h,y2:m}];for(let j=0;j<this.boxKeys.length;j++)D.push({key:this.boxKeys[j],x1:this.bboxes[4*j],y1:this.bboxes[4*j+1],x2:this.bboxes[4*j+2],y2:this.bboxes[4*j+3]});for(let j=0;j<this.circleKeys.length;j++){const U=this.circles[3*j],$=this.circles[3*j+1],Z=this.circles[3*j+2];D.push({key:this.circleKeys[j],x1:U-Z,y1:$-Z,x2:U+Z,y2:$+Z})}}else this._forEachCell(e,a,h,m,this._queryCell,D,{hitTest:x,overlapMode:M,seenUids:{box:{},circle:{}}},R);return D}query(e,a,h,m){return this._query(e,a,h,m,!1,null)}hitTest(e,a,h,m,x,M){return this._query(e,a,h,m,!0,x,M).length>0}hitTestCircle(e,a,h,m,x){const M=e-h,R=e+h,D=a-h,j=a+h;if(R<0||M>this.width||j<0||D>this.height)return!1;const U=[];return this._forEachCell(M,D,R,j,this._queryCellCircle,U,{hitTest:!0,overlapMode:m,circle:{x:e,y:a,radius:h},seenUids:{box:{},circle:{}}},x),U.length>0}_queryCell(e,a,h,m,x,M,R,D){const{seenUids:j,hitTest:U,overlapMode:$}=R,Z=this.boxCells[x];if(Z!==null){const re=this.bboxes;for(const fe of Z)if(!j.box[fe]){j.box[fe]=!0;const de=4*fe,ge=this.boxKeys[fe];if(e<=re[de+2]&&a<=re[de+3]&&h>=re[de+0]&&m>=re[de+1]&&(!D||D(ge))&&(!U||!Pt($,ge.overlapMode))&&(M.push({key:ge,x1:re[de],y1:re[de+1],x2:re[de+2],y2:re[de+3]}),U))return!0}}const te=this.circleCells[x];if(te!==null){const re=this.circles;for(const fe of te)if(!j.circle[fe]){j.circle[fe]=!0;const de=3*fe,ge=this.circleKeys[fe];if(this._circleAndRectCollide(re[de],re[de+1],re[de+2],e,a,h,m)&&(!D||D(ge))&&(!U||!Pt($,ge.overlapMode))){const ve=re[de],Ae=re[de+1],Ee=re[de+2];if(M.push({key:ge,x1:ve-Ee,y1:Ae-Ee,x2:ve+Ee,y2:Ae+Ee}),U)return!0}}}return!1}_queryCellCircle(e,a,h,m,x,M,R,D){const{circle:j,seenUids:U,overlapMode:$}=R,Z=this.boxCells[x];if(Z!==null){const re=this.bboxes;for(const fe of Z)if(!U.box[fe]){U.box[fe]=!0;const de=4*fe,ge=this.boxKeys[fe];if(this._circleAndRectCollide(j.x,j.y,j.radius,re[de+0],re[de+1],re[de+2],re[de+3])&&(!D||D(ge))&&!Pt($,ge.overlapMode))return M.push(!0),!0}}const te=this.circleCells[x];if(te!==null){const re=this.circles;for(const fe of te)if(!U.circle[fe]){U.circle[fe]=!0;const de=3*fe,ge=this.circleKeys[fe];if(this._circlesCollide(re[de],re[de+1],re[de+2],j.x,j.y,j.radius)&&(!D||D(ge))&&!Pt($,ge.overlapMode))return M.push(!0),!0}}}_forEachCell(e,a,h,m,x,M,R,D){const j=this._convertToXCellCoord(e),U=this._convertToYCellCoord(a),$=this._convertToXCellCoord(h),Z=this._convertToYCellCoord(m);for(let te=j;te<=$;te++)for(let re=U;re<=Z;re++)if(x.call(this,e,a,h,m,this.xCellCount*re+te,M,R,D))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,a,h,m,x,M){const R=m-e,D=x-a,j=h+M;return j*j>R*R+D*D}_circleAndRectCollide(e,a,h,m,x,M,R){const D=(M-m)/2,j=Math.abs(e-(m+D));if(j>D+h)return!1;const U=(R-x)/2,$=Math.abs(a-(x+U));if($>U+h)return!1;if(j<=D||$<=U)return!0;const Z=j-D,te=$-U;return Z*Z+te*te<=h*h}}function Ft(v,e,a){const h=l.K();if(!v){const{vecSouth:$,vecEast:Z}=Je(e),te=P();te[0]=Z[0],te[1]=Z[1],te[2]=$[0],te[3]=$[1],m=te,(U=(M=(x=te)[0])*(j=x[3])-(D=x[2])*(R=x[1]))&&(m[0]=j*(U=1/U),m[1]=-R*U,m[2]=-D*U,m[3]=M*U),h[0]=te[0],h[1]=te[1],h[4]=te[2],h[5]=te[3]}var m,x,M,R,D,j,U;return l.M(h,h,[1/a,1/a,1]),h}function lr(v,e,a,h){if(v){const m=l.K();if(!e){const{vecSouth:x,vecEast:M}=Je(a);m[0]=M[0],m[1]=M[1],m[4]=x[0],m[5]=x[1]}return l.M(m,m,[h,h,1]),m}return a.pixelsToClipSpaceMatrix}function Je(v){const e=Math.cos(v.rollInRadians),a=Math.sin(v.rollInRadians),h=Math.cos(v.pitchInRadians),m=Math.cos(v.bearingInRadians),x=Math.sin(v.bearingInRadians),M=l.ao();M[0]=-m*h*a-x*e,M[1]=-x*h*a+m*e;const R=l.ap(M);R<1e-9?l.aq(M):l.ar(M,M,1/R);const D=l.ao();D[0]=m*h*e-x*a,D[1]=x*h*e+m*a;const j=l.ap(D);return j<1e-9?l.aq(D):l.ar(D,D,1/j),{vecEast:D,vecSouth:M}}function Wt(v,e,a,h){let m;h?(m=[v,e,h(v,e),1],l.at(m,m,a)):(m=[v,e,0,1],Rr(m,m,a));const x=m[3];return{point:new l.P(m[0]/x,m[1]/x),signedDistanceFromCamera:x,isOccluded:!1}}function vr(v,e){return .5+v/e*.5}function Vr(v,e){return v.x>=-e[0]&&v.x<=e[0]&&v.y>=-e[1]&&v.y<=e[1]}function Er(v,e,a,h,m,x,M,R,D,j,U,$,Z){const te=a?v.textSizeData:v.iconSizeData,re=l.ak(te,e.transform.zoom),fe=[256/e.width*2+1,256/e.height*2+1],de=a?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;de.clear();const ge=v.lineVertexArray,ve=a?v.text.placedSymbolArray:v.icon.placedSymbolArray,Ae=e.transform.width/e.transform.height;let Ee=!1;for(let Pe=0;Pe<ve.length;Pe++){const Le=ve.get(Pe);if(Le.hidden||Le.writingMode===l.al.vertical&&!Ee){bi(Le.numGlyphs,de);continue}Ee=!1;const Ie=new l.P(Le.anchorX,Le.anchorY),$e={getElevation:Z,pitchedLabelPlaneMatrix:h,lineVertexArray:ge,pitchWithMap:x,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:e.transform,tileAnchorPoint:Ie,unwrappedTileID:D,width:j,height:U,translation:$},He=Za(Le.anchorX,Le.anchorY,$e);if(!Vr(He.point,fe)){bi(Le.numGlyphs,de);continue}const at=vr(e.transform.cameraToCenterDistance,He.signedDistanceFromCamera),ot=l.am(te,re,Le),rt=x?ot*e.transform.getPitchedTextCorrection(Le.anchorX,Le.anchorY,D)/at:ot*at,It=Lt({projectionContext:$e,pitchedLabelPlaneMatrixInverse:m,symbol:Le,fontSize:rt,flip:!1,keepUpright:M,glyphOffsetArray:v.glyphOffsetArray,dynamicLayoutVertexArray:de,aspectRatio:Ae,rotateToLine:R});Ee=It.useVertical,(It.notEnoughRoom||Ee||It.needsFlipping&&Lt({projectionContext:$e,pitchedLabelPlaneMatrixInverse:m,symbol:Le,fontSize:rt,flip:!0,keepUpright:M,glyphOffsetArray:v.glyphOffsetArray,dynamicLayoutVertexArray:de,aspectRatio:Ae,rotateToLine:R}).notEnoughRoom)&&bi(Le.numGlyphs,de)}a?v.text.dynamicLayoutVertexBuffer.updateData(de):v.icon.dynamicLayoutVertexBuffer.updateData(de)}function tt(v,e,a,h,m,x,M,R){const D=x.glyphStartIndex+x.numGlyphs,j=x.lineStartIndex,U=x.lineStartIndex+x.lineLength,$=e.getoffsetX(x.glyphStartIndex),Z=e.getoffsetX(D-1),te=$i(v*$,a,h,m,x.segment,j,U,R,M);if(!te)return null;const re=$i(v*Z,a,h,m,x.segment,j,U,R,M);return re?R.projectionCache.anyProjectionOccluded?null:{first:te,last:re}:null}function yt(v,e,a,h){return v===l.al.horizontal&&Math.abs(a.y-e.y)>Math.abs(a.x-e.x)*h?{useVertical:!0}:(v===l.al.vertical?e.y<a.y:e.x>a.x)?{needsFlipping:!0}:null}function Lt(v){const{projectionContext:e,pitchedLabelPlaneMatrixInverse:a,symbol:h,fontSize:m,flip:x,keepUpright:M,glyphOffsetArray:R,dynamicLayoutVertexArray:D,aspectRatio:j,rotateToLine:U}=v,$=m/24,Z=h.lineOffsetX*$,te=h.lineOffsetY*$;let re;if(h.numGlyphs>1){const fe=h.glyphStartIndex+h.numGlyphs,de=h.lineStartIndex,ge=h.lineStartIndex+h.lineLength,ve=tt($,R,Z,te,x,h,U,e);if(!ve)return{notEnoughRoom:!0};const Ae=ar(ve.first.point.x,ve.first.point.y,e,a),Ee=ar(ve.last.point.x,ve.last.point.y,e,a);if(M&&!x){const Pe=yt(h.writingMode,Ae,Ee,j);if(Pe)return Pe}re=[ve.first];for(let Pe=h.glyphStartIndex+1;Pe<fe-1;Pe++)re.push($i($*R.getoffsetX(Pe),Z,te,x,h.segment,de,ge,e,U));re.push(ve.last)}else{if(M&&!x){const de=si(e.tileAnchorPoint.x,e.tileAnchorPoint.y,e).point,ge=h.lineStartIndex+h.segment+1,ve=new l.P(e.lineVertexArray.getx(ge),e.lineVertexArray.gety(ge)),Ae=si(ve.x,ve.y,e),Ee=Ae.signedDistanceFromCamera>0?Ae.point:Hr(e.tileAnchorPoint,ve,de,1,e),Pe=ar(de.x,de.y,e,a),Le=ar(Ee.x,Ee.y,e,a),Ie=yt(h.writingMode,Pe,Le,j);if(Ie)return Ie}const fe=$i($*R.getoffsetX(h.glyphStartIndex),Z,te,x,h.segment,h.lineStartIndex,h.lineStartIndex+h.lineLength,e,U);if(!fe||e.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};re=[fe]}for(const fe of re)l.as(D,fe.point,fe.angle);return{}}function Hr(v,e,a,h,m){const x=v.add(v.sub(e)._unit()),M=si(x.x,x.y,m).point,R=a.sub(M);return a.add(R._mult(h/R.mag()))}function Vi(v,e,a){const h=e.projectionCache;if(h.projections[v])return h.projections[v];const m=new l.P(e.lineVertexArray.getx(v),e.lineVertexArray.gety(v)),x=si(m.x,m.y,e);if(x.signedDistanceFromCamera>0)return h.projections[v]=x.point,h.anyProjectionOccluded=h.anyProjectionOccluded||x.isOccluded,x.point;const M=v-a.direction;return Hr(a.distanceFromAnchor===0?e.tileAnchorPoint:new l.P(e.lineVertexArray.getx(M),e.lineVertexArray.gety(M)),m,a.previousVertex,a.absOffsetX-a.distanceFromAnchor+1,e)}function si(v,e,a){const h=v+a.translation[0],m=e+a.translation[1];let x;return a.pitchWithMap?(x=Wt(h,m,a.pitchedLabelPlaneMatrix,a.getElevation),x.isOccluded=!1):(x=a.transform.projectTileCoordinates(h,m,a.unwrappedTileID,a.getElevation),x.point.x=(.5*x.point.x+.5)*a.width,x.point.y=(.5*-x.point.y+.5)*a.height),x}function ar(v,e,a,h){if(a.pitchWithMap){const m=[v,e,0,1];return l.at(m,m,h),a.transform.projectTileCoordinates(m[0]/m[3],m[1]/m[3],a.unwrappedTileID,a.getElevation).point}return{x:v/a.width*2-1,y:e/a.height*2-1}}function Za(v,e,a){return a.transform.projectTileCoordinates(v,e,a.unwrappedTileID,a.getElevation)}function _n(v,e,a){return v._unit()._perp()._mult(e*a)}function qa(v,e,a,h,m,x,M,R,D){if(R.projectionCache.offsets[v])return R.projectionCache.offsets[v];const j=a.add(e);if(v+D.direction<h||v+D.direction>=m)return R.projectionCache.offsets[v]=j,j;const U=Vi(v+D.direction,R,D),$=_n(U.sub(a),M,D.direction),Z=a.add($),te=U.add($);return R.projectionCache.offsets[v]=l.au(x,j,Z,te)||j,R.projectionCache.offsets[v]}function $i(v,e,a,h,m,x,M,R,D){const j=h?v-e:v+e;let U=j>0?1:-1,$=0;h&&(U*=-1,$=Math.PI),U<0&&($+=Math.PI);let Z,te=U>0?x+m:x+m+1;R.projectionCache.cachedAnchorPoint?Z=R.projectionCache.cachedAnchorPoint:(Z=si(R.tileAnchorPoint.x,R.tileAnchorPoint.y,R).point,R.projectionCache.cachedAnchorPoint=Z);let re,fe,de=Z,ge=Z,ve=0,Ae=0;const Ee=Math.abs(j),Pe=[];let Le;for(;ve+Ae<=Ee;){if(te+=U,te<x||te>=M)return null;ve+=Ae,ge=de,fe=re;const He={absOffsetX:Ee,direction:U,distanceFromAnchor:ve,previousVertex:ge};if(de=Vi(te,R,He),a===0)Pe.push(ge),Le=de.sub(ge);else{let at;const ot=de.sub(ge);at=ot.mag()===0?_n(Vi(te+U,R,He).sub(de),a,U):_n(ot,a,U),fe||(fe=ge.add(at)),re=qa(te,at,de,x,M,fe,a,R,He),Pe.push(fe),Le=re.sub(fe)}Ae=Le.mag()}const Ie=Le._mult((Ee-ve)/Ae)._add(fe||ge),$e=$+Math.atan2(de.y-ge.y,de.x-ge.x);return Pe.push(Ie),{point:Ie,angle:D?$e:0,path:Pe}}const sa=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function bi(v,e){for(let a=0;a<v;a++){const h=e.length;e.resize(h+4),e.float32.set(sa,3*h)}}function Rr(v,e,a){const h=e[0],m=e[1];return v[0]=a[0]*h+a[4]*m+a[12],v[1]=a[1]*h+a[5]*m+a[13],v[3]=a[3]*h+a[7]*m+a[15],v}const ut=100;class io{constructor(e,a=new At(e.width+200,e.height+200,25),h=new At(e.width+200,e.height+200,25)){this.transform=e,this.grid=a,this.ignoredGrid=h,this.pitchFactor=Math.cos(e.pitch*Math.PI/180)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+ut,this.screenBottomBoundary=e.height+ut,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,a,h,m,x,M,R,D,j,U,$,Z){const te=this.projectAndGetPerspectiveRatio(e.anchorPointX+D[0],e.anchorPointY+D[1],x,U,Z),re=h*te.perspectiveRatio;let fe;if(M||R)fe=this._projectCollisionBox(e,re,m,x,M,R,D,te,U,$,Z);else{const Le=te.x+($?$.x*re:0),Ie=te.y+($?$.y*re:0);fe={allPointsOccluded:!1,box:[Le+e.x1*re,Ie+e.y1*re,Le+e.x2*re,Ie+e.y2*re]}}const[de,ge,ve,Ae]=fe.box,Ee=M?fe.allPointsOccluded:te.isOccluded;let Pe=Ee;return Pe||(Pe=te.perspectiveRatio<this.perspectiveRatioCutoff),Pe||(Pe=!this.isInsideGrid(de,ge,ve,Ae)),Pe||a!=="always"&&this.grid.hitTest(de,ge,ve,Ae,a,j)?{box:[de,ge,ve,Ae],placeable:!1,offscreen:!1,occluded:Ee}:{box:[de,ge,ve,Ae],placeable:!0,offscreen:this.isOffscreen(de,ge,ve,Ae),occluded:Ee}}placeCollisionCircles(e,a,h,m,x,M,R,D,j,U,$,Z,te,re){const fe=[],de=new l.P(a.anchorX,a.anchorY),ge=this.getPerspectiveRatio(de.x,de.y,M,re),ve=(j?x*this.transform.getPitchedTextCorrection(a.anchorX,a.anchorY,M)/ge:x*ge)/l.ay,Ae={getElevation:re,pitchedLabelPlaneMatrix:R,lineVertexArray:h,pitchWithMap:j,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:de,unwrappedTileID:M,width:this.transform.width,height:this.transform.height,translation:te},Ee=tt(ve,m,a.lineOffsetX*ve,a.lineOffsetY*ve,!1,a,!1,Ae);let Pe=!1,Le=!1,Ie=!0;if(Ee){const $e=.5*$*ge+Z,He=new l.P(-100,-100),at=new l.P(this.screenRightBoundary,this.screenBottomBoundary),ot=new dt,rt=Ee.first,It=Ee.last;let Tt=[];for(let gr=rt.path.length-1;gr>=1;gr--)Tt.push(rt.path[gr]);for(let gr=1;gr<It.path.length;gr++)Tt.push(It.path[gr]);const pt=2.5*$e;if(j){const gr=this.projectPathToScreenSpace(Tt,Ae);Tt=gr.some(tr=>tr.signedDistanceFromCamera<=0)?[]:gr.map(tr=>tr.point)}let Vt=[];if(Tt.length>0){const gr=Tt[0].clone(),tr=Tt[0].clone();for(let fi=1;fi<Tt.length;fi++)gr.x=Math.min(gr.x,Tt[fi].x),gr.y=Math.min(gr.y,Tt[fi].y),tr.x=Math.max(tr.x,Tt[fi].x),tr.y=Math.max(tr.y,Tt[fi].y);Vt=gr.x>=He.x&&tr.x<=at.x&&gr.y>=He.y&&tr.y<=at.y?[Tt]:tr.x<He.x||gr.x>at.x||tr.y<He.y||gr.y>at.y?[]:l.av([Tt],He.x,He.y,at.x,at.y)}for(const gr of Vt){ot.reset(gr,.25*$e);let tr=0;tr=ot.length<=.5*$e?1:Math.ceil(ot.paddedLength/pt)+1;for(let fi=0;fi<tr;fi++){const Kr=fi/Math.max(tr-1,1),_i=ot.lerp(Kr),pi=_i.x+ut,Dr=_i.y+ut;fe.push(pi,Dr,$e,0);const kr=pi-$e,Ti=Dr-$e,Mi=pi+$e,fn=Dr+$e;if(Ie=Ie&&this.isOffscreen(kr,Ti,Mi,fn),Le=Le||this.isInsideGrid(kr,Ti,Mi,fn),e!=="always"&&this.grid.hitTestCircle(pi,Dr,$e,e,U)&&(Pe=!0,!D))return{circles:[],offscreen:!1,collisionDetected:Pe}}}}return{circles:!D&&Pe||!Le||ge<this.perspectiveRatioCutoff?[]:fe,offscreen:Ie,collisionDetected:Pe}}projectPathToScreenSpace(e,a){const h=function(m,x){const M=l.K();return l.an(M,x.pitchedLabelPlaneMatrix),m.map(R=>{const D=Wt(R.x,R.y,M,x.getElevation),j=x.transform.projectTileCoordinates(D.point.x,D.point.y,x.unwrappedTileID,x.getElevation);return j.point.x=(.5*j.point.x+.5)*x.width,j.point.y=(.5*-j.point.y+.5)*x.height,j})}(e,a);return function(m){let x=0,M=0,R=0,D=0;for(let j=0;j<m.length;j++)m[j].isOccluded?(R=j+1,D=0):(D++,D>M&&(M=D,x=R));return m.slice(x,x+M)}(h)}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const a=[];let h=1/0,m=1/0,x=-1/0,M=-1/0;for(const U of e){const $=new l.P(U.x+ut,U.y+ut);h=Math.min(h,$.x),m=Math.min(m,$.y),x=Math.max(x,$.x),M=Math.max(M,$.y),a.push($)}const R=this.grid.query(h,m,x,M).concat(this.ignoredGrid.query(h,m,x,M)),D={},j={};for(const U of R){const $=U.key;if(D[$.bucketInstanceId]===void 0&&(D[$.bucketInstanceId]={}),D[$.bucketInstanceId][$.featureIndex])continue;const Z=[new l.P(U.x1,U.y1),new l.P(U.x2,U.y1),new l.P(U.x2,U.y2),new l.P(U.x1,U.y2)];l.aw(a,Z)&&(D[$.bucketInstanceId][$.featureIndex]=!0,j[$.bucketInstanceId]===void 0&&(j[$.bucketInstanceId]=[]),j[$.bucketInstanceId].push($.featureIndex))}return j}insertCollisionBox(e,a,h,m,x,M){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:x,collisionGroupID:M,overlapMode:a},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,a,h,m,x,M){const R=h?this.ignoredGrid:this.grid,D={bucketInstanceId:m,featureIndex:x,collisionGroupID:M,overlapMode:a};for(let j=0;j<e.length;j+=4)R.insertCircle(D,e[j],e[j+1],e[j+2])}projectAndGetPerspectiveRatio(e,a,h,m,x){if(x){let M;m?(M=[e,a,m(e,a),1],l.at(M,M,x)):(M=[e,a,0,1],Rr(M,M,x));const R=M[3];return{x:(M[0]/R+1)/2*this.transform.width+ut,y:(-M[1]/R+1)/2*this.transform.height+ut,perspectiveRatio:.5+this.transform.cameraToCenterDistance/R*.5,isOccluded:!1,signedDistanceFromCamera:R}}{const M=this.transform.projectTileCoordinates(e,a,h,m);return{x:(M.point.x+1)/2*this.transform.width+ut,y:(1-M.point.y)/2*this.transform.height+ut,perspectiveRatio:.5+this.transform.cameraToCenterDistance/M.signedDistanceFromCamera*.5,isOccluded:M.isOccluded,signedDistanceFromCamera:M.signedDistanceFromCamera}}}getPerspectiveRatio(e,a,h,m){const x=this.transform.projectTileCoordinates(e,a,h,m);return .5+this.transform.cameraToCenterDistance/x.signedDistanceFromCamera*.5}isOffscreen(e,a,h,m){return h<ut||e>=this.screenRightBoundary||m<ut||a>this.screenBottomBoundary}isInsideGrid(e,a,h,m){return h>=0&&e<this.gridRightBoundary&&m>=0&&a<this.gridBottomBoundary}getViewportMatrix(){const e=l.ad([]);return l.L(e,e,[-100,-100,0]),e}_projectCollisionBox(e,a,h,m,x,M,R,D,j,U,$){let Z=1,te=0,re=0,fe=1;const de=e.anchorPointX+R[0],ge=e.anchorPointY+R[1];if(M&&!x){const Tt=this.projectAndGetPerspectiveRatio(de+1,ge,m,j,$),pt=Tt.x-D.x,Vt=Math.atan((Tt.y-D.y)/pt)+(pt<0?Math.PI:0),gr=Math.sin(Vt),tr=Math.cos(Vt);Z=tr,te=gr,re=-gr,fe=tr}else if(!M&&x){const Tt=Je(this.transform);Z=Tt.vecEast[0],te=Tt.vecEast[1],re=Tt.vecSouth[0],fe=Tt.vecSouth[1]}let ve=D.x,Ae=D.y,Ee=a;x&&(ve=de,Ae=ge,Ee=Math.pow(2,-(this.transform.zoom-h.overscaledZ)),Ee*=this.transform.getPitchedTextCorrection(de,ge,m),U||(Ee*=l.ae(.5+D.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),U&&(ve+=Z*U.x*Ee+re*U.y*Ee,Ae+=te*U.x*Ee+fe*U.y*Ee);const Pe=e.x1*Ee,Le=e.x2*Ee,Ie=(Pe+Le)/2,$e=e.y1*Ee,He=e.y2*Ee,at=($e+He)/2,ot=[{offsetX:Pe,offsetY:$e},{offsetX:Ie,offsetY:$e},{offsetX:Le,offsetY:$e},{offsetX:Le,offsetY:at},{offsetX:Le,offsetY:He},{offsetX:Ie,offsetY:He},{offsetX:Pe,offsetY:He},{offsetX:Pe,offsetY:at}];let rt=[];for(const{offsetX:Tt,offsetY:pt}of ot)rt.push(new l.P(ve+Z*Tt+re*pt,Ae+te*Tt+fe*pt));let It=!1;if(x){const Tt=rt.map(pt=>this.projectAndGetPerspectiveRatio(pt.x,pt.y,m,j,$));It=Tt.some(pt=>!pt.isOccluded),rt=Tt.map(pt=>new l.P(pt.x,pt.y))}else It=!0;return{box:l.ax(rt),allPointsOccluded:!It}}}class Bo{constructor(e,a,h,m){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?a:-a))):m&&h?1:0,this.placed=h}isHidden(){return this.opacity===0&&!this.placed}}class wr{constructor(e,a,h,m,x){this.text=new Bo(e?e.text:null,a,h,x),this.icon=new Bo(e?e.icon:null,a,m,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Li{constructor(e,a,h){this.text=e,this.icon=a,this.skipFade=h}}class vn{constructor(e,a,h,m,x){this.bucketInstanceId=e,this.featureIndex=a,this.sourceLayerIndex=h,this.bucketIndex=m,this.tileID=x}}class Ds{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const a=++this.maxGroupID;this.collisionGroups[e]={ID:a,predicate:h=>h.collisionGroupID===a}}return this.collisionGroups[e]}}function no(v,e,a,h,m){const{horizontalAlign:x,verticalAlign:M}=l.aE(v);return new l.P(-(x-.5)*e+h[0]*m,-(M-.5)*a+h[1]*m)}class oa{constructor(e,a,h,m,x){this.transform=e.clone(),this.terrain=a,this.collisionIndex=new io(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new Ds(m),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const a=this.terrain;return a?(h,m)=>a.getElevation(e,h,m):null}getBucketParts(e,a,h,m){const x=h.getBucket(a),M=h.latestFeatureIndex;if(!x||!M||a.id!==x.layerIds[0])return;const R=h.collisionBoxArray,D=x.layers[0].layout,j=x.layers[0].paint,U=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),$=h.tileSize/l.Z,Z=h.tileID.toUnwrapped(),te=D.get("text-rotation-alignment")==="map",re=l.az(h,1,this.transform.zoom),fe=l.aA(this.collisionIndex.transform,h,j.get("text-translate"),j.get("text-translate-anchor")),de=l.aA(this.collisionIndex.transform,h,j.get("icon-translate"),j.get("icon-translate-anchor")),ge=Ft(te,this.transform,re);this.retainedQueryData[x.bucketInstanceId]=new vn(x.bucketInstanceId,M,x.sourceLayerIndex,x.index,h.tileID);const ve={bucket:x,layout:D,translationText:fe,translationIcon:de,unwrappedTileID:Z,pitchedLabelPlaneMatrix:ge,scale:U,textPixelRatio:$,holdingForFade:h.holdingForFade(),collisionBoxArray:R,partiallyEvaluatedTextSize:l.ak(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(m)for(const Ae of x.sortKeyRanges){const{sortKey:Ee,symbolInstanceStart:Pe,symbolInstanceEnd:Le}=Ae;e.push({sortKey:Ee,symbolInstanceStart:Pe,symbolInstanceEnd:Le,parameters:ve})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:ve})}attemptAnchorPlacement(e,a,h,m,x,M,R,D,j,U,$,Z,te,re,fe,de,ge,ve,Ae,Ee){const Pe=l.aB[e.textAnchor],Le=[e.textOffset0,e.textOffset1],Ie=no(Pe,h,m,Le,x),$e=this.collisionIndex.placeCollisionBox(a,Z,D,j,U,R,M,de,$.predicate,Ae,Ie,Ee);if((!ve||this.collisionIndex.placeCollisionBox(ve,Z,D,j,U,R,M,ge,$.predicate,Ae,Ie,Ee).placeable)&&$e.placeable){let He;if(this.prevPlacement&&this.prevPlacement.variableOffsets[te.crossTileID]&&this.prevPlacement.placements[te.crossTileID]&&this.prevPlacement.placements[te.crossTileID].text&&(He=this.prevPlacement.variableOffsets[te.crossTileID].anchor),te.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[te.crossTileID]={textOffset:Le,width:h,height:m,anchor:Pe,textBoxScale:x,prevAnchor:He},this.markUsedJustification(re,Pe,te,fe),re.allowVerticalPlacement&&(this.markUsedOrientation(re,fe,te),this.placedOrientations[te.crossTileID]=fe),{shift:Ie,placedGlyphBoxes:$e}}}placeLayerBucketPart(e,a,h){const{bucket:m,layout:x,translationText:M,translationIcon:R,unwrappedTileID:D,pitchedLabelPlaneMatrix:j,textPixelRatio:U,holdingForFade:$,collisionBoxArray:Z,partiallyEvaluatedTextSize:te,collisionGroup:re}=e.parameters,fe=x.get("text-optional"),de=x.get("icon-optional"),ge=l.aC(x,"text-overlap","text-allow-overlap"),ve=ge==="always",Ae=l.aC(x,"icon-overlap","icon-allow-overlap"),Ee=Ae==="always",Pe=x.get("text-rotation-alignment")==="map",Le=x.get("text-pitch-alignment")==="map",Ie=x.get("icon-text-fit")!=="none",$e=x.get("symbol-z-order")==="viewport-y",He=ve&&(Ee||!m.hasIconData()||de),at=Ee&&(ve||!m.hasTextData()||fe);!m.collisionArrays&&Z&&m.deserializeCollisionBoxes(Z);const ot=this.retainedQueryData[m.bucketInstanceId].tileID,rt=this._getTerrainElevationFunc(ot),It=this.transform.getFastPathSimpleProjectionMatrix(ot),Tt=(pt,Vt,gr)=>{var tr,fi;if(a[pt.crossTileID])return;if($)return void(this.placements[pt.crossTileID]=new Li(!1,!1,!1));let Kr=!1,_i=!1,pi=!0,Dr=null,kr={box:null,placeable:!1,offscreen:null,occluded:!1},Ti={placeable:!1},Mi=null,fn=null,Sn=null,ts=0,Gs=0,ra=0;Vt.textFeatureIndex?ts=Vt.textFeatureIndex:pt.useRuntimeCollisionCircles&&(ts=pt.featureIndex),Vt.verticalTextFeatureIndex&&(Gs=Vt.verticalTextFeatureIndex);const Da=Vt.textBox;if(Da){const qn=Ai=>{let vi=l.al.horizontal;if(m.allowVerticalPlacement&&!Ai&&this.prevPlacement){const Oi=this.prevPlacement.placedOrientations[pt.crossTileID];Oi&&(this.placedOrientations[pt.crossTileID]=Oi,vi=Oi,this.markUsedOrientation(m,vi,pt))}return vi},Hs=(Ai,vi)=>{if(m.allowVerticalPlacement&&pt.numVerticalGlyphVertices>0&&Vt.verticalTextBox){for(const Oi of m.writingModes)if(Oi===l.al.vertical?(kr=vi(),Ti=kr):kr=Ai(),kr&&kr.placeable)break}else kr=Ai()},is=pt.textAnchorOffsetStartIndex,Cs=pt.textAnchorOffsetEndIndex;if(Cs===is){const Ai=(vi,Oi)=>{const Mr=this.collisionIndex.placeCollisionBox(vi,ge,U,ot,D,Le,Pe,M,re.predicate,rt,void 0,It);return Mr&&Mr.placeable&&(this.markUsedOrientation(m,Oi,pt),this.placedOrientations[pt.crossTileID]=Oi),Mr};Hs(()=>Ai(Da,l.al.horizontal),()=>{const vi=Vt.verticalTextBox;return m.allowVerticalPlacement&&pt.numVerticalGlyphVertices>0&&vi?Ai(vi,l.al.vertical):{box:null,offscreen:null}}),qn(kr&&kr.placeable)}else{let Ai=l.aB[(fi=(tr=this.prevPlacement)===null||tr===void 0?void 0:tr.variableOffsets[pt.crossTileID])===null||fi===void 0?void 0:fi.anchor];const vi=(Mr,Tn,Ao)=>{const af=Mr.x2-Mr.x1,nd=Mr.y2-Mr.y1,ih=pt.textBoxScale,ad=Ie&&Ae==="never"?Tn:null;let Ln=null,Es=ge==="never"?1:2,nh="never";Ai&&Es++;for(let sd=0;sd<Es;sd++){for(let Jl=is;Jl<Cs;Jl++){const Xu=m.textAnchorOffsets.get(Jl);if(Ai&&Xu.textAnchor!==Ai)continue;const Qu=this.attemptAnchorPlacement(Xu,Mr,af,nd,ih,Pe,Le,U,ot,D,re,nh,pt,m,Ao,M,R,ad,rt);if(Qu&&(Ln=Qu.placedGlyphBoxes,Ln&&Ln.placeable))return Kr=!0,Dr=Qu.shift,Ln}Ai?Ai=null:nh=ge}return h&&!Ln&&(Ln={box:this.collisionIndex.placeCollisionBox(Da,"always",U,ot,D,Le,Pe,M,re.predicate,rt,void 0,It).box,offscreen:!1,placeable:!1,occluded:!1}),Ln};Hs(()=>vi(Da,Vt.iconBox,l.al.horizontal),()=>{const Mr=Vt.verticalTextBox;return m.allowVerticalPlacement&&(!kr||!kr.placeable)&&pt.numVerticalGlyphVertices>0&&Mr?vi(Mr,Vt.verticalIconBox,l.al.vertical):{box:null,occluded:!0,offscreen:null}}),kr&&(Kr=kr.placeable,pi=kr.offscreen);const Oi=qn(kr&&kr.placeable);if(!Kr&&this.prevPlacement){const Mr=this.prevPlacement.variableOffsets[pt.crossTileID];Mr&&(this.variableOffsets[pt.crossTileID]=Mr,this.markUsedJustification(m,Mr.anchor,pt,Oi))}}}if(Mi=kr,Kr=Mi&&Mi.placeable,pi=Mi&&Mi.offscreen,pt.useRuntimeCollisionCircles){const qn=m.text.placedSymbolArray.get(pt.centerJustifiedTextSymbolIndex),Hs=l.am(m.textSizeData,te,qn),is=x.get("text-padding");fn=this.collisionIndex.placeCollisionCircles(ge,qn,m.lineVertexArray,m.glyphOffsetArray,Hs,D,j,h,Le,re.predicate,pt.collisionCircleDiameter,is,M,rt),fn.circles.length&&fn.collisionDetected&&!h&&l.w("Collisions detected, but collision boxes are not shown"),Kr=ve||fn.circles.length>0&&!fn.collisionDetected,pi=pi&&fn.offscreen}if(Vt.iconFeatureIndex&&(ra=Vt.iconFeatureIndex),Vt.iconBox){const qn=Hs=>this.collisionIndex.placeCollisionBox(Hs,Ae,U,ot,D,Le,Pe,R,re.predicate,rt,Ie&&Dr?Dr:void 0,It);Ti&&Ti.placeable&&Vt.verticalIconBox?(Sn=qn(Vt.verticalIconBox),_i=Sn.placeable):(Sn=qn(Vt.iconBox),_i=Sn.placeable),pi=pi&&Sn.offscreen}const rs=fe||pt.numHorizontalGlyphVertices===0&&pt.numVerticalGlyphVertices===0,To=de||pt.numIconVertices===0;rs||To?To?rs||(_i=_i&&Kr):Kr=_i&&Kr:_i=Kr=_i&&Kr;const Mo=_i&&Sn.placeable;if(Kr&&Mi.placeable&&this.collisionIndex.insertCollisionBox(Mi.box,ge,x.get("text-ignore-placement"),m.bucketInstanceId,Ti&&Ti.placeable&&Gs?Gs:ts,re.ID),Mo&&this.collisionIndex.insertCollisionBox(Sn.box,Ae,x.get("icon-ignore-placement"),m.bucketInstanceId,ra,re.ID),fn&&Kr&&this.collisionIndex.insertCollisionCircles(fn.circles,ge,x.get("text-ignore-placement"),m.bucketInstanceId,ts,re.ID),h&&this.storeCollisionData(m.bucketInstanceId,gr,Vt,Mi,Sn,fn),pt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[pt.crossTileID]=new Li((Kr||He)&&!(Mi!=null&&Mi.occluded),(_i||at)&&!(Sn!=null&&Sn.occluded),pi||m.justReloaded),a[pt.crossTileID]=!0};if($e){if(e.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const pt=m.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Vt=pt.length-1;Vt>=0;--Vt){const gr=pt[Vt];Tt(m.symbolInstances.get(gr),m.collisionArrays[gr],gr)}}else for(let pt=e.symbolInstanceStart;pt<e.symbolInstanceEnd;pt++)Tt(m.symbolInstances.get(pt),m.collisionArrays[pt],pt);m.justReloaded=!1}storeCollisionData(e,a,h,m,x,M){if(h.textBox||h.iconBox){let R,D;this.collisionBoxArrays.has(e)?R=this.collisionBoxArrays.get(e):(R=new Map,this.collisionBoxArrays.set(e,R)),R.has(a)?D=R.get(a):(D={text:null,icon:null},R.set(a,D)),h.textBox&&(D.text=m.box),h.iconBox&&(D.icon=x.box)}if(M){let R=this.collisionCircleArrays[e];R===void 0&&(R=this.collisionCircleArrays[e]=[]);for(let D=0;D<M.circles.length;D+=4)R.push(M.circles[D+0]-ut),R.push(M.circles[D+1]-ut),R.push(M.circles[D+2]),R.push(M.collisionDetected?1:0)}}markUsedJustification(e,a,h,m){let x;x=m===l.al.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[l.aD(a)];const M=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];for(const R of M)R>=0&&(e.text.placedSymbolArray.get(R).crossTileID=x>=0&&R!==x?0:h.crossTileID)}markUsedOrientation(e,a,h){const m=a===l.al.horizontal||a===l.al.horizontalOnly?a:0,x=a===l.al.vertical?a:0,M=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];for(const R of M)e.text.placedSymbolArray.get(R).placedOrientation=m;h.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const a=this.prevPlacement;let h=!1;this.prevZoomAdjustment=a?a.zoomAdjustment(this.transform.zoom):0;const m=a?a.symbolFadeChange(e):1,x=a?a.opacities:{},M=a?a.variableOffsets:{},R=a?a.placedOrientations:{};for(const D in this.placements){const j=this.placements[D],U=x[D];U?(this.opacities[D]=new wr(U,m,j.text,j.icon),h=h||j.text!==U.text.placed||j.icon!==U.icon.placed):(this.opacities[D]=new wr(null,m,j.text,j.icon,j.skipFade),h=h||j.text||j.icon)}for(const D in x){const j=x[D];if(!this.opacities[D]){const U=new wr(j,m,!1,!1);U.isHidden()||(this.opacities[D]=U,h=h||j.text.placed||j.icon.placed)}}for(const D in M)this.variableOffsets[D]||!this.opacities[D]||this.opacities[D].isHidden()||(this.variableOffsets[D]=M[D]);for(const D in R)this.placedOrientations[D]||!this.opacities[D]||this.opacities[D].isHidden()||(this.placedOrientations[D]=R[D]);if(a&&a.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");h?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:e)}updateLayerOpacities(e,a){const h={};for(const m of a){const x=m.getBucket(e);x&&m.latestFeatureIndex&&e.id===x.layerIds[0]&&this.updateBucketOpacities(x,m.tileID,h,m.collisionBoxArray)}}updateBucketOpacities(e,a,h,m){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const x=e.layers[0],M=x.layout,R=new wr(null,0,!1,!1,!0),D=M.get("text-allow-overlap"),j=M.get("icon-allow-overlap"),U=x._unevaluatedLayout.hasValue("text-variable-anchor")||x._unevaluatedLayout.hasValue("text-variable-anchor-offset"),$=M.get("text-rotation-alignment")==="map",Z=M.get("text-pitch-alignment")==="map",te=M.get("icon-text-fit")!=="none",re=new wr(null,0,D&&(j||!e.hasIconData()||M.get("icon-optional")),j&&(D||!e.hasTextData()||M.get("text-optional")),!0);!e.collisionArrays&&m&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(m);const fe=(ge,ve,Ae)=>{for(let Ee=0;Ee<ve/4;Ee++)ge.opacityVertexArray.emplaceBack(Ae);ge.hasVisibleVertices=ge.hasVisibleVertices||Ae!==gs},de=this.collisionBoxArrays.get(e.bucketInstanceId);for(let ge=0;ge<e.symbolInstances.length;ge++){const ve=e.symbolInstances.get(ge),{numHorizontalGlyphVertices:Ae,numVerticalGlyphVertices:Ee,crossTileID:Pe}=ve;let Le=this.opacities[Pe];h[Pe]?Le=R:Le||(Le=re,this.opacities[Pe]=Le),h[Pe]=!0;const Ie=ve.numIconVertices>0,$e=this.placedOrientations[ve.crossTileID],He=$e===l.al.vertical,at=$e===l.al.horizontal||$e===l.al.horizontalOnly;if(Ae>0||Ee>0){const rt=Tc(Le.text);fe(e.text,Ae,He?gs:rt),fe(e.text,Ee,at?gs:rt);const It=Le.text.isHidden();[ve.rightJustifiedTextSymbolIndex,ve.centerJustifiedTextSymbolIndex,ve.leftJustifiedTextSymbolIndex].forEach(Vt=>{Vt>=0&&(e.text.placedSymbolArray.get(Vt).hidden=It||He?1:0)}),ve.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(ve.verticalPlacedTextSymbolIndex).hidden=It||at?1:0);const Tt=this.variableOffsets[ve.crossTileID];Tt&&this.markUsedJustification(e,Tt.anchor,ve,$e);const pt=this.placedOrientations[ve.crossTileID];pt&&(this.markUsedJustification(e,"left",ve,pt),this.markUsedOrientation(e,pt,ve))}if(Ie){const rt=Tc(Le.icon),It=!(te&&ve.verticalPlacedIconSymbolIndex&&He);ve.placedIconSymbolIndex>=0&&(fe(e.icon,ve.numIconVertices,It?rt:gs),e.icon.placedSymbolArray.get(ve.placedIconSymbolIndex).hidden=Le.icon.isHidden()),ve.verticalPlacedIconSymbolIndex>=0&&(fe(e.icon,ve.numVerticalIconVertices,It?gs:rt),e.icon.placedSymbolArray.get(ve.verticalPlacedIconSymbolIndex).hidden=Le.icon.isHidden())}const ot=de&&de.has(ge)?de.get(ge):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const rt=e.collisionArrays[ge];if(rt){let It=new l.P(0,0);if(rt.textBox||rt.verticalTextBox){let Tt=!0;if(U){const pt=this.variableOffsets[Pe];pt?(It=no(pt.anchor,pt.width,pt.height,pt.textOffset,pt.textBoxScale),$&&It._rotate(Z?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Tt=!1}if(rt.textBox||rt.verticalTextBox){let pt;rt.textBox&&(pt=He),rt.verticalTextBox&&(pt=at),ao(e.textCollisionBox.collisionVertexArray,Le.text.placed,!Tt||pt,ot.text,It.x,It.y)}}if(rt.iconBox||rt.verticalIconBox){const Tt=!!(!at&&rt.verticalIconBox);let pt;rt.iconBox&&(pt=Tt),rt.verticalIconBox&&(pt=!Tt),ao(e.iconCollisionBox.collisionVertexArray,Le.icon.placed,pt,ot.icon,te?It.x:0,te?It.y:0)}}}}if(e.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);e.bucketInstanceId in this.collisionCircleArrays&&(e.collisionCircleArray=this.collisionCircleArrays[e.bucketInstanceId],delete this.collisionCircleArrays[e.bucketInstanceId])}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,a){const h=this.zoomAtLastRecencyCheck===a?1-this.zoomAdjustment(a):1;return this.zoomAtLastRecencyCheck=a,this.commitTime+this.fadeDuration*h>e}setStale(){this.stale=!0}}function ao(v,e,a,h,m,x){h&&h.length!==0||(h=[0,0,0,0]);const M=h[0]-ut,R=h[1]-ut,D=h[2]-ut,j=h[3]-ut;v.emplaceBack(e?1:0,a?1:0,m||0,x||0,M,R),v.emplaceBack(e?1:0,a?1:0,m||0,x||0,D,R),v.emplaceBack(e?1:0,a?1:0,m||0,x||0,D,j),v.emplaceBack(e?1:0,a?1:0,m||0,x||0,M,j)}const wc=Math.pow(2,25),Sc=Math.pow(2,24),zs=Math.pow(2,17),fa=Math.pow(2,16),Ih=Math.pow(2,9),Dh=Math.pow(2,8),Pl=Math.pow(2,1);function Tc(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const e=v.placed?1:0,a=Math.floor(127*v.opacity);return a*wc+e*Sc+a*zs+e*fa+a*Ih+e*Dh+a*Pl+e}const gs=0;class zh{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,a,h,m,x){const M=this._bucketParts;for(;this._currentTileIndex<e.length;)if(a.getBucketParts(M,m,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort((R,D)=>R.sortKey-D.sortKey));this._currentPartIndex<M.length;)if(a.placeLayerBucketPart(M[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,x())return!0;return!1}}class Yn{constructor(e,a,h,m,x,M,R,D){this.placement=new oa(e,a,M,R,D),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(e,a,h){const m=L.now(),x=()=>!this._forceFullPlacement&&L.now()-m>2;for(;this._currentPlacementIndex>=0;){const M=a[e[this._currentPlacementIndex]],R=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=R)&&(!M.maxzoom||M.maxzoom>R)){if(this._inProgressLayer||(this._inProgressLayer=new zh(M)),this._inProgressLayer.continuePlacement(h[M.source],this.placement,this._showCollisionBoxes,M,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const so=512/l.Z/2;class Oo{constructor(e,a,h){this.tileID=e,this.bucketInstanceId=h,this._symbolsByKey={};const m=new Map;for(let x=0;x<a.length;x++){const M=a.get(x),R=M.key,D=m.get(R);D?D.push(M):m.set(R,[M])}for(const[x,M]of m){const R={positions:M.map(D=>({x:Math.floor(D.anchorX*so),y:Math.floor(D.anchorY*so)})),crossTileIDs:M.map(D=>D.crossTileID)};if(R.positions.length>128){const D=new l.aF(R.positions.length,16,Uint16Array);for(const{x:j,y:U}of R.positions)D.add(j,U);D.finish(),delete R.positions,R.index=D}this._symbolsByKey[x]=R}}getScaledCoordinates(e,a){const{x:h,y:m,z:x}=this.tileID.canonical,{x:M,y:R,z:D}=a.canonical,j=so/Math.pow(2,D-x),U=(R*l.Z+e.anchorY)*j,$=m*l.Z*so;return{x:Math.floor((M*l.Z+e.anchorX)*j-h*l.Z*so),y:Math.floor(U-$)}}findMatches(e,a,h){const m=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z);for(let x=0;x<e.length;x++){const M=e.get(x);if(M.crossTileID)continue;const R=this._symbolsByKey[M.key];if(!R)continue;const D=this.getScaledCoordinates(M,a);if(R.index){const j=R.index.range(D.x-m,D.y-m,D.x+m,D.y+m).sort();for(const U of j){const $=R.crossTileIDs[U];if(!h[$]){h[$]=!0,M.crossTileID=$;break}}}else if(R.positions)for(let j=0;j<R.positions.length;j++){const U=R.positions[j],$=R.crossTileIDs[j];if(Math.abs(U.x-D.x)<=m&&Math.abs(U.y-D.y)<=m&&!h[$]){h[$]=!0,M.crossTileID=$;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:e})=>e)}}class Mc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Rl{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const a=Math.round((e-this.lng)/360);if(a!==0)for(const h in this.indexes){const m=this.indexes[h],x={};for(const M in m){const R=m[M];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+a),x[R.tileID.key]=R}this.indexes[h]=x}this.lng=e}addBucket(e,a,h){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let x=0;x<a.symbolInstances.length;x++)a.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const m=this.usedCrossTileIDs[e.overscaledZ];for(const x in this.indexes){const M=this.indexes[x];if(Number(x)>e.overscaledZ)for(const R in M){const D=M[R];D.tileID.isChildOf(e)&&D.findMatches(a.symbolInstances,e,m)}else{const R=M[e.scaledTo(Number(x)).key];R&&R.findMatches(a.symbolInstances,e,m)}}for(let x=0;x<a.symbolInstances.length;x++){const M=a.symbolInstances.get(x);M.crossTileID||(M.crossTileID=h.generate(),m[M.crossTileID]=!0)}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Oo(e,a.symbolInstances,a.bucketInstanceId),!0}removeBucketCrossTileIDs(e,a){for(const h of a.getCrossTileIDsLists())for(const m of h)delete this.usedCrossTileIDs[e][m]}removeStaleBuckets(e){let a=!1;for(const h in this.indexes){const m=this.indexes[h];for(const x in m)e[m[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,m[x]),delete m[x],a=!0)}return a}}class ys{constructor(){this.layerIndexes={},this.crossTileIDs=new Mc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,a,h){let m=this.layerIndexes[e.id];m===void 0&&(m=this.layerIndexes[e.id]=new Rl);let x=!1;const M={};m.handleWrapJump(h);for(const R of a){const D=R.getBucket(e);D&&e.id===D.layerIds[0]&&(D.bucketInstanceId||(D.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(R.tileID,D,this.crossTileIDs)&&(x=!0),M[D.bucketInstanceId]=!0)}return m.removeStaleBuckets(M)&&(x=!0),x}pruneUnusedLayers(e){const a={};e.forEach(h=>{a[h]=!0});for(const h in this.layerIndexes)a[h]||delete this.layerIndexes[h]}}var jo="void main() {fragColor=vec4(1.0);}";const cr={prelude:Or(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Or("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Or("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Or(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Or(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Or(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Or(jo,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Or(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Or(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Or("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Or("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Or("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Or(jo,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Or(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Or(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Or(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Or(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Or(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Or(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Or(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Or(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Or(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Or(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Or(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Or(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Or(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Or(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Or("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Or("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Or("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Or("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Or(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Or("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Or(v,e){const a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=e.match(/in ([\w]+) ([\w]+)/g),m=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=x?x.concat(m):m,R={};return{fragmentSource:v=v.replace(a,(D,j,U,$,Z)=>(R[Z]=!0,j==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
in ${U} ${$} ${Z};
#else
uniform ${U} ${$} u_${Z};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Z}
    ${U} ${$} ${Z} = u_${Z};
#endif
`)),vertexSource:e=e.replace(a,(D,j,U,$,Z)=>{const te=$==="float"?"vec2":"vec4",re=Z.match(/color/)?"color":te;return R[Z]?j==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${U} ${te} a_${Z};
out ${U} ${$} ${Z};
#else
uniform ${U} ${$} u_${Z};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = a_${Z};
#else
    ${U} ${$} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = unpack_mix_${re}(a_${Z}, u_${Z}_t);
#else
    ${U} ${$} ${Z} = u_${Z};
#endif
`:j==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${U} ${te} a_${Z};
#else
uniform ${U} ${$} u_${Z};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${U} ${$} ${Z} = a_${Z};
#else
    ${U} ${$} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${U} ${$} ${Z} = unpack_mix_${re}(a_${Z}, u_${Z}_t);
#else
    ${U} ${$} ${Z} = u_${Z};
#endif
`}),staticAttributes:h,staticUniforms:M}}class No{constructor(e,a,h){this.vertexBuffer=e,this.indexBuffer=a,this.segments=h}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Ga=l.aG([{name:"a_pos",type:"Int16",components:2}]);const jn="#define PROJECTION_MERCATOR",Nn="mercator";class ki{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Nn}get shaderDefine(){return jn}get shaderPreludeCode(){return cr.projectionMercator}get vertexShaderPreludeCode(){return cr.projectionMercator.vertexSource}get subdivisionGranularity(){return l.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(e){}getMeshFromTileID(e,a,h,m,x){if(this._cachedMesh)return this._cachedMesh;const M=new l.aI;M.emplaceBack(0,0),M.emplaceBack(l.Z,0),M.emplaceBack(0,l.Z),M.emplaceBack(l.Z,l.Z);const R=e.createVertexBuffer(M,Ga.members),D=l.aJ.simpleSegment(0,0,4,2),j=new l.aK;j.emplaceBack(1,0,2),j.emplaceBack(1,2,3);const U=e.createIndexBuffer(j);return this._cachedMesh=new No(R,U,D),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(e){}}class oo{constructor(e=0,a=0,h=0,m=0){if(isNaN(e)||e<0||isNaN(a)||a<0||isNaN(h)||h<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=a,this.left=h,this.right=m}interpolate(e,a,h){return a.top!=null&&e.top!=null&&(this.top=l.B.number(e.top,a.top,h)),a.bottom!=null&&e.bottom!=null&&(this.bottom=l.B.number(e.bottom,a.bottom,h)),a.left!=null&&e.left!=null&&(this.left=l.B.number(e.left,a.left,h)),a.right!=null&&e.right!=null&&(this.right=l.B.number(e.right,a.right,h)),this}getCenter(e,a){const h=l.ae((this.left+e-this.right)/2,0,e),m=l.ae((this.top+a-this.bottom)/2,0,a);return new l.P(h,m)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new oo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function cn(v,e){if(!v.renderWorldCopies||v.lngRange)return;const a=e.lng-v.center.lng;e.lng+=a>180?-360:a<-180?360:0}function Xn(v){return Math.max(0,Math.floor(v))}class en{constructor(e,a,h,m,x,M){this._callbacks=e,this._tileSize=512,this._renderWorldCopies=M===void 0||!!M,this._minZoom=a||0,this._maxZoom=h||22,this._minPitch=m??0,this._maxPitch=x??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new l.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Xn(this._zoom),this._scale=l.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new oo,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(e,a,h){this._latRange=e.latRange,this._lngRange=e.lngRange,this._width=e.width,this._height=e.height,this._center=e.center,this._elevation=e.elevation,this._minElevationForCurrentTile=e.minElevationForCurrentTile,this._zoom=e.zoom,this._tileZoom=Xn(this._zoom),this._scale=l.ac(this._zoom),this._bearingInRadians=e.bearingInRadians,this._fovInRadians=e.fovInRadians,this._pitchInRadians=e.pitchInRadians,this._rollInRadians=e.rollInRadians,this._unmodified=e.unmodified,this._edgeInsets=new oo(e.padding.top,e.padding.bottom,e.padding.left,e.padding.right),this._minZoom=e.minZoom,this._maxZoom=e.maxZoom,this._minPitch=e.minPitch,this._maxPitch=e.maxPitch,this._renderWorldCopies=e.renderWorldCopies,this._cameraToCenterDistance=e.cameraToCenterDistance,this._nearZ=e.nearZ,this._farZ=e.farZ,this._autoCalculateNearFarZ=!h&&e.autoCalculateNearFarZ,a&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(e){this._minElevationForCurrentTile=e}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(e){this._minZoom!==e&&(this._minZoom=e,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(e){this._minPitch!==e&&(this._minPitch=e,this.setPitch(Math.max(this.pitch,e)))}get maxPitch(){return this._maxPitch}setMaxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.setPitch(Math.min(this.pitch,e)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(e){const a=l.aL(e,-180,180)*Math.PI/180;var h,m,x,M,R,D,j,U,$;this._bearingInRadians!==a&&(this._unmodified=!1,this._bearingInRadians=a,this._calcMatrices(),this._rotationMatrix=P(),h=this._rotationMatrix,x=-this._bearingInRadians,M=(m=this._rotationMatrix)[0],R=m[1],D=m[2],j=m[3],U=Math.sin(x),$=Math.cos(x),h[0]=M*$+D*U,h[1]=R*$+j*U,h[2]=M*-U+D*$,h[3]=R*-U+j*$)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(e){const a=l.ae(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==a&&(this._unmodified=!1,this._pitchInRadians=a,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(e){const a=e/180*Math.PI;this._rollInRadians!==a&&(this._unmodified=!1,this._rollInRadians=a,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return l.aM(this._fovInRadians)}setFov(e){e=l.ae(e,.1,150),this.fov!==e&&(this._unmodified=!1,this._fovInRadians=l.ab(e),this._calcMatrices())}get zoom(){return this._zoom}setZoom(e){const a=this.getConstrained(this._center,e).zoom;this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this._tileZoom=Math.max(0,Math.floor(a)),this._scale=l.ac(a),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(e,a){this._autoCalculateNearFarZ=!1,this._nearZ=e,this._farZ=a,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,a,h){this._unmodified=!1,this._edgeInsets.interpolate(e,a,h),this._constrain(),this._calcMatrices()}resize(e,a,h=!0){this._width=e,this._height=a,h&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new pr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(e){e?(this._lngRange=[e.getWest(),e.getEast()],this._latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,l.af])}getConstrained(e,a){return this._callbacks.getConstrained(e,a)}getCameraQueryGeometry(e,a){if(a.length===1)return[a[0],e];{let h=e.x,m=e.y,x=e.x,M=e.y;for(const R of a)h=Math.min(h,R.x),m=Math.min(m,R.y),x=Math.max(x,R.x),M=Math.max(M,R.y);return[new l.P(h,m),new l.P(x,m),new l.P(x,M),new l.P(h,M),new l.P(h,m)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:a,zoom:h}=this.getConstrained(this.center,this.zoom);this.setCenter(a),this.setZoom(h),this._unmodified=e,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let e=l.ad(new Float64Array(16));l.M(e,e,[this._width/2,-this._height/2,1]),l.L(e,e,[1,-1,0]),this._clipSpaceToPixelsMatrix=e,e=l.ad(new Float64Array(16)),l.M(e,e,[1,-1,1]),l.L(e,e,[-1,-1,0]),l.M(e,e,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=e,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(e,a,h,m){const x=h!==void 0?h:this.bearing,M=m=m!==void 0?m:this.pitch,R=l.$.fromLngLat(e,a),D=-Math.cos(l.ab(M)),j=Math.sin(l.ab(M)),U=j*Math.sin(l.ab(x)),$=-j*Math.cos(l.ab(x));let Z=this.elevation;const te=a-Z;let re;D*te>=0||Math.abs(D)<.1?(re=1e4,Z=a+re*D):re=-te/D;let fe,de,ge=l.aN(1,R.y),ve=0;do{if(ve+=1,ve>10)break;de=re/ge,fe=new l.$(R.x+U*de,R.y+$*de),ge=1/fe.meterInMercatorCoordinateUnits()}while(Math.abs(re-de*ge)>1e-12);return{center:fe.toLngLat(),elevation:Z,zoom:l.ah(this.height/2/Math.tan(this.fovInRadians/2)/de/this.tileSize)}}recalculateZoomAndCenter(e){if(this.elevation-e==0)return;const a=l.ag(1,this.center.lat)*this.worldSize,h=this.cameraToCenterDistance/a,m=l.$.fromLngLat(this.center,this.elevation),x=ae(this.center,this.elevation,this.pitch,this.bearing,h);this._elevation=e;const M=this.calculateCenterFromCameraLngLatAlt(x.toLngLat(),l.aN(x.z,m.y),this.bearing,this.pitch);this._elevation=M.elevation,this._center=M.center,this.setZoom(M.zoom)}getCameraPoint(){const e=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(e*Math.sin(this.rollInRadians),e*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const e=l.ag(1,this.center.lat)*this.worldSize;return ae(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/e).toLngLat()}getMercatorTileCoordinates(e){if(!e)return[0,0,1,1];const a=e.canonical.z>=0?1<<e.canonical.z:Math.pow(2,e.canonical.z);return[e.canonical.x/a,e.canonical.y/a,1/a/l.Z,1/a/l.Z]}}class pa{constructor(e,a){this.min=e,this.max=a,this.center=l.aO([],l.aP([],this.min,this.max),.5)}quadrant(e){const a=[e%2==0,e<2],h=l.aQ(this.min),m=l.aQ(this.max);for(let x=0;x<a.length;x++)h[x]=a[x]?this.min[x]:this.center[x],m[x]=a[x]?this.center[x]:this.max[x];return m[2]=this.max[2],new pa(h,m)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersectsFrustum(e){let a=!0;for(let h=0;h<e.planes.length;h++){const m=this.intersectsPlane(e.planes[h]);if(m===0)return 0;m===1&&(a=!1)}return a?2:e.aabb.min[0]>this.max[0]||e.aabb.min[1]>this.max[1]||e.aabb.min[2]>this.max[2]||e.aabb.max[0]<this.min[0]||e.aabb.max[1]<this.min[1]||e.aabb.max[2]<this.min[2]?0:1}intersectsPlane(e){let a=e[3],h=e[3];for(let m=0;m<3;m++)e[m]>0?(a+=e[m]*this.min[m],h+=e[m]*this.max[m]):(h+=e[m]*this.min[m],a+=e[m]*this.max[m]);return a>=0?2:h<0?0:1}}class Il{distanceToTile2d(e,a,h,m){const x=m.distanceX([e,a]),M=m.distanceY([e,a]);return Math.hypot(x,M)}getWrap(e,a,h){return h}getTileAABB(e,a,h,m){var x,M;let R=h,D=h;if(m.terrain){const U=new l.Y(e.z,a,e.z,e.x,e.y),$=m.terrain.getMinMaxElevation(U);R=(x=$.minElevation)!==null&&x!==void 0?x:h,D=(M=$.maxElevation)!==null&&M!==void 0?M:h}const j=1<<e.z;return new pa([a+e.x/j,e.y/j,R],[a+(e.x+1)/j,(e.y+1)/j,D])}allowVariableZoom(e,a){const h=e.fov*(Math.abs(Math.cos(e.rollInRadians))*e.height+Math.abs(Math.sin(e.rollInRadians))*e.width)/e.height,m=l.ae(78.5-h/2,0,60);return!!a.terrain||e.pitch>m}allowWorldCopies(){return!0}recalculateCache(){}}class wi{constructor(e,a,h){this.points=e,this.planes=a,this.aabb=h}static fromInvProjectionMatrix(e,a=1,h=0){const m=Math.pow(2,h),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(j=>{const U=1/(j=l.at([],j,e))[3]/a*m;return l.aR(j,j,[U,U,1/j[3],U])}),M=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(j=>{const U=l.aS([],x[j[0]],x[j[1]]),$=l.aS([],x[j[2]],x[j[1]]),Z=l.aT([],l.aU([],U,$)),te=-l.aV(Z,x[j[1]]);return Z.concat(te)}),R=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],D=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const j of x)for(let U=0;U<3;U++)R[U]=Math.min(R[U],j[U]),D[U]=Math.max(D[U],j[U]);return new wi(x,M,new pa(R,D))}}class Ha{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,a,h){return this._helper.interpolatePadding(e,a,h)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,a,h=!0){this._helper.resize(e,a,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,a){this._helper.overrideNearFarZ(e,a)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e,a){}constructor(e,a,h,m,x){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new en({calcMatrices:()=>{this._calcMatrices()},getConstrained:(M,R)=>this.getConstrained(M,R)},e,a,h,m,x),this._coveringTilesDetailsProvider=new Il}clone(){const e=new Ha;return e.apply(this),e}apply(e,a,h){this._helper.apply(e,a,h)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(e){const a=[new l.aW(0,e)];if(this._helper._renderWorldCopies){const h=this.screenPointToMercatorCoordinate(new l.P(0,0)),m=this.screenPointToMercatorCoordinate(new l.P(this._helper._width,0)),x=this.screenPointToMercatorCoordinate(new l.P(this._helper._width,this._helper._height)),M=this.screenPointToMercatorCoordinate(new l.P(0,this._helper._height)),R=Math.floor(Math.min(h.x,m.x,x.x,M.x)),D=Math.floor(Math.max(h.x,m.x,x.x,M.x)),j=1;for(let U=R-j;U<=D+j;U++)U!==0&&a.push(new l.aW(U,e))}return a}getCameraFrustum(){return wi.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){const a=this.screenPointToLocation(this.centerPoint,e),h=e?e.getElevationForLngLatZoom(a,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(h)}setLocationAtPoint(e,a){const h=l.ag(this.elevation,this.center.lat),m=this.screenPointToMercatorCoordinateAtZ(a,h),x=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,h),M=l.$.fromLngLat(e),R=new l.$(M.x-(m.x-x.x),M.y-(m.y-x.y));this.setCenter(R==null?void 0:R.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(e,a){return a?this.coordinatePoint(l.$.fromLngLat(e),a.getElevationForLngLatZoom(e,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(l.$.fromLngLat(e))}screenPointToLocation(e,a){var h;return(h=this.screenPointToMercatorCoordinate(e,a))===null||h===void 0?void 0:h.toLngLat()}screenPointToMercatorCoordinate(e,a){if(a){const h=a.pointCoordinate(e);if(h!=null)return h}return this.screenPointToMercatorCoordinateAtZ(e)}screenPointToMercatorCoordinateAtZ(e,a){const h=a||0,m=[e.x,e.y,0,1],x=[e.x,e.y,1,1];l.at(m,m,this._pixelMatrixInverse),l.at(x,x,this._pixelMatrixInverse);const M=m[3],R=x[3],D=m[1]/M,j=x[1]/R,U=m[2]/M,$=x[2]/R,Z=U===$?0:(h-U)/($-U);return new l.$(l.B.number(m[0]/M,x[0]/R,Z)/this.worldSize,l.B.number(D,j,Z)/this.worldSize,h)}coordinatePoint(e,a=0,h=this._pixelMatrix){const m=[e.x*this.worldSize,e.y*this.worldSize,a,1];return l.at(m,m,h),new l.P(m[0]/m[3],m[1]/m[3])}getBounds(){const e=Math.max(0,this._helper._height/2-je(this));return new pr().extend(this.screenPointToLocation(new l.P(0,e))).extend(this.screenPointToLocation(new l.P(this._helper._width,e))).extend(this.screenPointToLocation(new l.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new l.P(0,this._helper._height)))}isPointOnMapSurface(e,a){return a?a.pointCoordinate(e)!=null:e.y>this.height/2-je(this)}calculatePosMatrix(e,a=!1,h){var m;const x=(m=e.key)!==null&&m!==void 0?m:l.aX(e.wrap,e.canonical.z,e.canonical.z,e.canonical.x,e.canonical.y),M=a?this._alignedPosMatrixCache:this._posMatrixCache;if(M.has(x)){const j=M.get(x);return h?j.f32:j.f64}const R=ne(e,this.worldSize);l.N(R,a?this._alignedProjMatrix:this._viewProjMatrix,R);const D={f64:R,f32:new Float32Array(R)};return M.set(x,D),h?D.f32:D.f64}calculateFogMatrix(e){const a=e.key,h=this._fogMatrixCacheF32;if(h.has(a))return h.get(a);const m=ne(e,this.worldSize);return l.N(m,this._fogMatrix,m),h.set(a,new Float32Array(m)),h.get(a)}getConstrained(e,a){a=l.ae(+a,this.minZoom,this.maxZoom);const h={center:new l.Q(e.lng,e.lat),zoom:a};let m=this._helper._lngRange;this._helper._renderWorldCopies||m!==null||(m=[-179.9999999999,180-1e-10]);const x=this.tileSize*l.ac(h.zoom);let M=0,R=x,D=0,j=x,U=0,$=0;const{x:Z,y:te}=this.size;if(this._helper._latRange){const Ae=this._helper._latRange;M=l.S(Ae[1])*x,R=l.S(Ae[0])*x,R-M<te&&(U=te/(R-M))}m&&(D=l.aL(l.U(m[0])*x,0,x),j=l.aL(l.U(m[1])*x,0,x),j<D&&(j+=x),j-D<Z&&($=Z/(j-D)));const{x:re,y:fe}=ni(x,e);let de,ge;const ve=Math.max($||0,U||0);if(ve){const Ae=new l.P($?(j+D)/2:re,U?(R+M)/2:fe);return h.center=ri(x,Ae).wrap(),h.zoom+=l.ah(ve),h}if(this._helper._latRange){const Ae=te/2;fe-Ae<M&&(ge=M+Ae),fe+Ae>R&&(ge=R-Ae)}if(m){const Ae=(D+j)/2;let Ee=re;this._helper._renderWorldCopies&&(Ee=l.aL(re,Ae-x/2,Ae+x/2));const Pe=Z/2;Ee-Pe<D&&(de=D+Pe),Ee+Pe>j&&(de=j-Pe)}if(de!==void 0||ge!==void 0){const Ae=new l.P(de??re,ge??fe);h.center=ri(x,Ae).wrap()}return h}calculateCenterFromCameraLngLatAlt(e,a,h,m){return this._helper.calculateCenterFromCameraLngLatAlt(e,a,h,m)}_calculateNearFarZIfNeeded(e,a,h){if(!this._helper.autoCalculateNearFarZ)return;const m=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),x=e-m*this._helper._pixelPerMeter/Math.cos(a),M=m<0?x:e,R=Math.PI/2+this.pitchInRadians,D=l.ab(this.fov)*(Math.abs(Math.cos(l.ab(this.roll)))*this.height+Math.abs(Math.sin(l.ab(this.roll)))*this.width)/this.height*(.5+h.y/this.height),j=Math.sin(D)*M/Math.sin(l.ae(Math.PI-R-D,.01,Math.PI-.01)),U=je(this),$=Math.atan(U/this._helper.cameraToCenterDistance),Z=l.ab(.75),te=$>Z?2*$*(.5+h.y/(2*U)):Z,re=Math.sin(te)*M/Math.sin(l.ae(Math.PI-R-te,.01,Math.PI-.01)),fe=Math.min(j,re);this._helper._farZ=1.01*(Math.cos(Math.PI/2-a)*fe+M),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const e=this.centerOffset,a=ni(this.worldSize,this.center),h=a.x,m=a.y;this._helper._pixelPerMeter=l.ag(1,this.center.lat)*this.worldSize;const x=l.ab(Math.min(this.pitch,In)),M=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(x));let R;this._calculateNearFarZIfNeeded(M,x,e),R=new Float64Array(16),l.aY(R,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),l.an(this._invProjMatrix,R),R[8]=2*-e.x/this._helper._width,R[9]=2*e.y/this._helper._height,this._projectionMatrix=l.aZ(R),l.M(R,R,[1,-1,1]),l.L(R,R,[0,0,-this._helper.cameraToCenterDistance]),l.a_(R,R,-this.rollInRadians),l.a$(R,R,this.pitchInRadians),l.a_(R,R,-this.bearingInRadians),l.L(R,R,[-h,-m,0]),this._mercatorMatrix=l.M([],R,[this.worldSize,this.worldSize,this.worldSize]),l.M(R,R,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=l.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,R),l.L(R,R,[0,0,-this.elevation]),this._viewProjMatrix=R,this._invViewProjMatrix=l.an([],R);const D=[0,0,-1,1];l.at(D,D,this._invViewProjMatrix),this._cameraPosition=[D[0]/D[3],D[1]/D[3],D[2]/D[3]],this._fogMatrix=new Float64Array(16),l.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,M,this._helper._farZ),this._fogMatrix[8]=2*-e.x/this.width,this._fogMatrix[9]=2*e.y/this.height,l.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),l.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),l.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),l.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),l.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),l.L(this._fogMatrix,this._fogMatrix,[-h,-m,0]),l.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),l.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=l.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,R);const j=this._helper._width%2/2,U=this._helper._height%2/2,$=Math.cos(this.bearingInRadians),Z=Math.sin(-this.bearingInRadians),te=h-Math.round(h)+$*j+Z*U,re=m-Math.round(m)+$*U+Z*j,fe=new Float64Array(R);if(l.L(fe,fe,[te>.5?te-1:te,re>.5?re-1:re,0]),this._alignedProjMatrix=fe,R=l.an(new Float64Array(16),this._pixelMatrix),!R)throw new Error("failed to invert matrix");this._pixelMatrixInverse=R,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const e=this.screenPointToMercatorCoordinate(new l.P(0,0)),a=[e.x*this.worldSize,e.y*this.worldSize,0,1];return l.at(a,a,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const e=l.ag(1,this.center.lat)*this.worldSize;return ae(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/e).toLngLat()}lngLatToCameraDepth(e,a){const h=l.$.fromLngLat(e),m=[h.x*this.worldSize,h.y*this.worldSize,a,1];return l.at(m,m,this._viewProjMatrix),m[2]/m[3]}getProjectionData(e){const{overscaledTileID:a,aligned:h,applyTerrainMatrix:m}=e,x=this._helper.getMercatorTileCoordinates(a),M=a?this.calculatePosMatrix(a,h,!0):null;let R;return R=a&&a.terrainRttPosMatrix32f&&m?a.terrainRttPosMatrix32f:M||l.b0(),{mainMatrix:R,tileMercatorCoords:x,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:R}}isLocationOccluded(e){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(e,a,h){return 1}transformLightDirection(e){return l.aQ(e)}getRayDirectionFromPixel(e){throw new Error("Not implemented.")}projectTileCoordinates(e,a,h,m){const x=this.calculatePosMatrix(h);let M;m?(M=[e,a,m(e,a),1],l.at(M,M,x)):(M=[e,a,0,1],Rr(M,M,x));const R=M[3];return{point:new l.P(M[0]/R,M[1]/R),signedDistanceFromCamera:R,isOccluded:!1}}populateCache(e){for(const a of e)this.calculatePosMatrix(a)}getMatrixForModel(e,a){const h=l.$.fromLngLat(e,a),m=h.meterInMercatorCoordinateUnits(),x=l.b1();return l.L(x,x,[h.x,h.y,h.z]),l.a_(x,x,Math.PI),l.a$(x,x,Math.PI/2),l.M(x,x,[-m,m,m]),x}getProjectionDataForCustomLayer(e=!0){const a=new l.Y(0,0,0,0,0),h=this.getProjectionData({overscaledTileID:a,applyGlobeMatrix:e}),m=ne(a,this.worldSize);l.N(m,this._viewProjMatrix,m),h.tileMercatorCoords=[0,0,1,1];const x=[l.Z,l.Z,this.worldSize/this._helper.pixelsPerMeter],M=l.b2();return l.M(M,m,x),h.fallbackMatrix=M,h.mainMatrix=M,h}getFastPathSimpleProjectionMatrix(e){return this.calculatePosMatrix(e)}}function wa(){l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Fo(v){if(v.useSlerp)if(v.k<1){const e=l.b3(v.startEulerAngles.roll,v.startEulerAngles.pitch,v.startEulerAngles.bearing),a=l.b3(v.endEulerAngles.roll,v.endEulerAngles.pitch,v.endEulerAngles.bearing),h=new Float64Array(4);l.b4(h,e,a,v.k);const m=l.b5(h);v.tr.setRoll(m.roll),v.tr.setPitch(m.pitch),v.tr.setBearing(m.bearing)}else v.tr.setRoll(v.endEulerAngles.roll),v.tr.setPitch(v.endEulerAngles.pitch),v.tr.setBearing(v.endEulerAngles.bearing);else v.tr.setRoll(l.B.number(v.startEulerAngles.roll,v.endEulerAngles.roll,v.k)),v.tr.setPitch(l.B.number(v.startEulerAngles.pitch,v.endEulerAngles.pitch,v.k)),v.tr.setBearing(l.B.number(v.startEulerAngles.bearing,v.endEulerAngles.bearing,v.k))}function Fn(v,e,a,h,m){const x=m.padding,M=ni(m.worldSize,a.getNorthWest()),R=ni(m.worldSize,a.getNorthEast()),D=ni(m.worldSize,a.getSouthEast()),j=ni(m.worldSize,a.getSouthWest()),U=l.ab(-h),$=M.rotate(U),Z=R.rotate(U),te=D.rotate(U),re=j.rotate(U),fe=new l.P(Math.max($.x,Z.x,re.x,te.x),Math.max($.y,Z.y,re.y,te.y)),de=new l.P(Math.min($.x,Z.x,re.x,te.x),Math.min($.y,Z.y,re.y,te.y)),ge=fe.sub(de),ve=(m.width-(x.left+x.right+e.left+e.right))/ge.x,Ae=(m.height-(x.top+x.bottom+e.top+e.bottom))/ge.y;if(Ae<0||ve<0)return void wa();const Ee=Math.min(l.ah(m.scale*Math.min(ve,Ae)),v.maxZoom),Pe=l.P.convert(v.offset),Le=new l.P((e.left-e.right)/2,(e.top-e.bottom)/2).rotate(l.ab(h)),Ie=Pe.add(Le).mult(m.scale/l.ac(Ee));return{center:ri(m.worldSize,M.add(D).div(2).sub(Ie)),zoom:Ee,bearing:h}}class Sa{get useGlobeControls(){return!1}handlePanInertia(e,a){return{easingOffset:e,easingCenter:a.center}}handleMapControlsRollPitchBearingZoom(e,a){e.bearingDelta&&a.setBearing(a.bearing+e.bearingDelta),e.pitchDelta&&a.setPitch(a.pitch+e.pitchDelta),e.rollDelta&&a.setRoll(a.roll+e.rollDelta),e.zoomDelta&&a.setZoom(a.zoom+e.zoomDelta)}handleMapControlsPan(e,a,h){e.around.distSqr(a.centerPoint)<.01||a.setLocationAtPoint(h,e.around)}cameraForBoxAndBearing(e,a,h,m,x){return Fn(e,a,h,m,x)}handleJumpToCenterZoom(e,a){e.zoom!==(a.zoom!==void 0?+a.zoom:e.zoom)&&e.setZoom(+a.zoom),a.center!==void 0&&e.setCenter(l.Q.convert(a.center))}handleEaseTo(e,a){const h=e.zoom,m=e.padding,x={roll:e.roll,pitch:e.pitch,bearing:e.bearing},M={roll:a.roll===void 0?e.roll:a.roll,pitch:a.pitch===void 0?e.pitch:a.pitch,bearing:a.bearing===void 0?e.bearing:a.bearing},R=a.zoom!==void 0,D=!e.isPaddingEqual(a.padding);let j=!1;const U=R?+a.zoom:e.zoom;let $=e.centerPoint.add(a.offsetAsPoint);const Z=e.screenPointToLocation($),{center:te,zoom:re}=e.getConstrained(l.Q.convert(a.center||Z),U??h);cn(e,te);const fe=ni(e.worldSize,Z),de=ni(e.worldSize,te).sub(fe),ge=l.ac(re-h);return j=re!==h,{easeFunc:ve=>{if(j&&e.setZoom(l.B.number(h,re,ve)),l.b6(x,M)||Fo({startEulerAngles:x,endEulerAngles:M,tr:e,k:ve,useSlerp:x.roll!=M.roll}),D&&(e.interpolatePadding(m,a.padding,ve),$=e.centerPoint.add(a.offsetAsPoint)),a.around)e.setLocationAtPoint(a.around,a.aroundPoint);else{const Ae=l.ac(e.zoom-h),Ee=re>h?Math.min(2,ge):Math.max(.5,ge),Pe=Math.pow(Ee,1-ve),Le=ri(e.worldSize,fe.add(de.mult(ve*Pe)).mult(Ae));e.setLocationAtPoint(e.renderWorldCopies?Le.wrap():Le,$)}},isZooming:j,elevationCenter:te}}handleFlyTo(e,a){const h=a.zoom!==void 0,m=e.zoom,x=e.getConstrained(l.Q.convert(a.center||a.locationAtOffset),h?+a.zoom:m),M=x.center,R=x.zoom;cn(e,M);const D=ni(e.worldSize,a.locationAtOffset),j=ni(e.worldSize,M).sub(D),U=j.mag(),$=l.ac(R-m);let Z;if(a.minZoom!==void 0){const te=Math.min(+a.minZoom,m,R),re=e.getConstrained(M,te).zoom;Z=l.ac(re-m)}return{easeFunc:(te,re,fe,de)=>{e.setZoom(te===1?R:m+l.ah(re));const ge=te===1?M:ri(e.worldSize,D.add(j.mult(fe)).mult(re));e.setLocationAtPoint(e.renderWorldCopies?ge.wrap():ge,de)},scaleOfZoom:$,targetCenter:M,scaleOfMinZoom:Z,pixelPathLength:U}}}class Wr{constructor(e,a,h){this.blendFunction=e,this.blendColor=a,this.mask=h}}Wr.Replace=[1,0],Wr.disabled=new Wr(Wr.Replace,l.b7.transparent,[!1,!1,!1,!1]),Wr.unblended=new Wr(Wr.Replace,l.b7.transparent,[!0,!0,!0,!0]),Wr.alphaBlended=new Wr([1,771],l.b7.transparent,[!0,!0,!0,!0]);const Dl=2305;class $r{constructor(e,a,h){this.enable=e,this.mode=a,this.frontFace=h}}$r.disabled=new $r(!1,1029,Dl),$r.backCCW=new $r(!0,1029,Dl),$r.frontCCW=new $r(!0,1028,Dl);class hr{constructor(e,a,h){this.func=e,this.mask=a,this.range=h}}hr.ReadOnly=!1,hr.ReadWrite=!0,hr.disabled=new hr(519,hr.ReadOnly,[0,1]);const Ls=7680;class Lr{constructor(e,a,h,m,x,M){this.test=e,this.ref=a,this.mask=h,this.fail=m,this.depthFail=x,this.pass=M}}Lr.disabled=new Lr({func:519,mask:0},0,0,Ls,Ls,Ls);const xn=new WeakMap;function Dn(v){var e;if(xn.has(v))return xn.get(v);{const a=(e=v.getParameter(v.VERSION))===null||e===void 0?void 0:e.startsWith("WebGL 2.0");return xn.set(v,a),a}}class ks{get awaitingQuery(){return!!this._readbackQueue}constructor(e){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=e;const a=e.context,h=a.gl;this._texFormat=h.RGBA,this._texType=h.UNSIGNED_BYTE;const m=new l.aI;m.emplaceBack(-1,-1),m.emplaceBack(2,-1),m.emplaceBack(-1,2);const x=new l.aK;x.emplaceBack(0,1,2),this._fullscreenTriangle=new No(a.createVertexBuffer(m,Ga.members),a.createIndexBuffer(x),l.aJ.simpleSegment(0,0,m.length,x.length)),this._resultBuffer=new Uint8Array(4),a.activeTexture.set(h.TEXTURE1);const M=h.createTexture();h.bindTexture(h.TEXTURE_2D,M),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texImage2D(h.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=a.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(M),Dn(h)&&(this._pbo=h.createBuffer(),h.bindBuffer(h.PIXEL_PACK_BUFFER,this._pbo),h.bufferData(h.PIXEL_PACK_BUFFER,4,h.STREAM_READ),h.bindBuffer(h.PIXEL_PACK_BUFFER,null))}destroy(){const e=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),e.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(e,a){const h=this._updateCount;return this._readbackQueue?h>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():h>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(e,a),this._updateCount++,this._measuredError}_bindFramebuffer(){const e=this._cachedRenderContext.context,a=e.gl;e.activeTexture.set(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this._fbo.colorAttachment.get()),e.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(e,a){const h=this._cachedRenderContext.context,m=h.gl;if(this._bindFramebuffer(),h.viewport.set([0,0,this._texWidth,this._texHeight]),h.clear({color:l.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(h,m.TRIANGLES,hr.disabled,Lr.disabled,Wr.unblended,$r.disabled,((x,M)=>({u_input:x,u_output_expected:M}))(e,a),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Dn(m)){m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.readBuffer(m.COLOR_ATTACHMENT0),m.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),m.bindBuffer(m.PIXEL_PACK_BUFFER,null);const x=m.fenceSync(m.SYNC_GPU_COMMANDS_COMPLETE,0);m.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:x}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const e=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Dn(e)){const a=e.clientWaitSync(this._readbackQueue.sync,0,0);if(a===e.WAIT_FAILED)return l.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(a===e.TIMEOUT_EXPIRED)return;e.bindBuffer(e.PIXEL_PACK_BUFFER,this._pbo),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),e.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ks._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(e){let a=0;return a+=e[0]/256,a+=e[1]/65536,a+=e[2]/16777216,e[3]<127&&(a=-a),a/128}}const lo=l.Z/128;function Ac(v,e){const a=v.granularity!==void 0?Math.max(v.granularity,1):1,h=a+(v.generateBorders?2:0),m=a+(v.extendToNorthPole||v.generateBorders?1:0)+(v.extendToSouthPole||v.generateBorders?1:0),x=h+1,M=m+1,R=v.generateBorders?-1:0,D=v.generateBorders||v.extendToNorthPole?-1:0,j=a+(v.generateBorders?1:0),U=a+(v.generateBorders||v.extendToSouthPole?1:0),$=x*M,Z=h*m*6,te=x*M>65536;if(te&&e==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const re=te||e==="32bit",fe=new Int16Array(2*$);let de=0;for(let Ae=D;Ae<=U;Ae++)for(let Ee=R;Ee<=j;Ee++){let Pe=Ee/a*l.Z;Ee===-1&&(Pe=-64),Ee===a+1&&(Pe=l.Z+lo);let Le=Ae/a*l.Z;Ae===-1&&(Le=v.extendToNorthPole?l.b9:-64),Ae===a+1&&(Le=v.extendToSouthPole?l.ba:l.Z+lo),fe[de++]=Pe,fe[de++]=Le}const ge=re?new Uint32Array(Z):new Uint16Array(Z);let ve=0;for(let Ae=0;Ae<m;Ae++)for(let Ee=0;Ee<h;Ee++){const Pe=Ee+1+Ae*x,Le=Ee+(Ae+1)*x,Ie=Ee+1+(Ae+1)*x;ge[ve++]=Ee+Ae*x,ge[ve++]=Le,ge[ve++]=Pe,ge[ve++]=Pe,ge[ve++]=Le,ge[ve++]=Ie}return{vertices:fe.buffer.slice(0),indices:ge.buffer.slice(0),uses32bitIndices:re}}const uo=new l.aH({fill:new l.bb(128,2),line:new l.bb(512,0),tile:new l.bb(128,32),stencil:new l.bb(128,1),circle:3});class Uo{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return cr.projectionGlobe}get vertexShaderPreludeCode(){return cr.projectionMercator.vertexSource}get subdivisionGranularity(){return uo}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(e){this._errorMeasurement||(this._errorMeasurement=new ks(e));const a=l.S(this._errorQueryLatitudeDegrees),h=2*Math.atan(Math.exp(Math.PI-a*Math.PI*2))-.5*Math.PI,m=this._errorMeasurement.updateErrorLoop(a,h),x=L.now();m!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=m,this._errorMeasurementLastChangeTime=x);const M=Math.min(Math.max((x-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=l.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,l.bd(M))}_getMeshKey(e){return`${e.granularity.toString(36)}_${e.generateBorders?"b":""}${e.extendToNorthPole?"n":""}${e.extendToSouthPole?"s":""}`}getMeshFromTileID(e,a,h,m,x){const M=(x==="stencil"?uo.stencil:uo.tile).getGranularityForZoomLevel(a.z);return this._getMesh(e,{granularity:M,generateBorders:h,extendToNorthPole:a.y===0&&m,extendToSouthPole:a.y===(1<<a.z)-1&&m})}_getMesh(e,a){const h=this._getMeshKey(a);if(h in this._tileMeshCache)return this._tileMeshCache[h];const m=function(x,M){const R=Ac(M,"16bit"),D=l.aI.deserialize({arrayBuffer:R.vertices,length:R.vertices.byteLength/2/2}),j=l.aK.deserialize({arrayBuffer:R.indices,length:R.indices.byteLength/2/3});return new No(x.createVertexBuffer(D,Ga.members),x.createIndexBuffer(j),l.aJ.simpleSegment(0,0,D.length,j.length))}(e,a);return this._tileMeshCache[h]=m,m}recalculate(e){}hasTransition(){const e=L.now();let a=!1;return a=a||(e-this._errorMeasurementLastChangeTime)/1e3<.7,a=a||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,a}setErrorQueryLatitudeDegrees(e){this._errorQueryLatitudeDegrees=e}}const Bs=new l.r({type:new l.D(l.v.projection.type)});class Eu extends l.E{constructor(e){super(),this._transitionable=new l.T(Bs),this.setProjection(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new l.C(0)),this._mercatorProjection=new ki,this._verticalPerspectiveProjection=new Uo}get transitionState(){const e=this.properties.get("type");if(typeof e=="string"&&e==="mercator")return 0;if(typeof e=="string"&&e==="vertical-perspective")return 1;if(e instanceof l.be){if(e.from==="vertical-perspective"&&e.to==="mercator")return 1-e.transition;if(e.from==="mercator"&&e.to==="vertical-perspective")return e.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(e){this._mercatorProjection.updateGPUdependent(e),this._verticalPerspectiveProjection.updateGPUdependent(e)}getMeshFromTileID(e,a,h,m,x){return this.currentProjection.getMeshFromTileID(e,a,h,m,x)}setProjection(e){this._transitionable.setValue("type",(e==null?void 0:e.type)||"mercator")}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}setErrorQueryLatitudeDegrees(e){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(e),this._mercatorProjection.setErrorQueryLatitudeDegrees(e)}}function Pu(v){const e=Cc(v.worldSize,v.center.lat);return 2*Math.PI*e}function zl(v,e,a,h,m){const x=1/(1<<m),M=e/l.Z*x+h*x,R=l.bg((v/l.Z*x+a*x)*Math.PI*2+Math.PI,2*Math.PI),D=2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI,j=Math.cos(D),U=new Float64Array(3);return U[0]=Math.sin(R)*j,U[1]=Math.sin(D),U[2]=Math.cos(R)*j,U}function Un(v){return function(e,a){const h=Math.cos(a),m=new Float64Array(3);return m[0]=Math.sin(e)*h,m[1]=Math.sin(a),m[2]=Math.cos(e)*h,m}(v.lng*Math.PI/180,v.lat*Math.PI/180)}function Cc(v,e){return v/(2*Math.PI)/Math.cos(e*Math.PI/180)}function Vn(v){const e=Math.asin(v[1])/Math.PI*180,a=Math.sqrt(v[0]*v[0]+v[2]*v[2]);if(a>1e-6){const h=v[0]/a,m=Math.acos(v[2]/a),x=(h>0?m:-m)/Math.PI*180;return new l.Q(l.aL(x,-180,180),e)}return new l.Q(0,e)}function Ll(v){return Math.cos(v*Math.PI/180)}function hi(v,e){const a=Ll(v),h=Ll(e);return l.ah(h/a)}function Ru(v,e){const a=v.rotate(e.bearingInRadians),h=e.zoom+hi(e.center.lat,0),m=l.bc(1/Ll(e.center.lat),1/Ll(Math.min(Math.abs(e.center.lat),60)),l.bf(h,7,3,0,1)),x=360/Pu({worldSize:e.worldSize,center:{lat:e.center.lat}});return new l.Q(e.center.lng-a.x*x*m,l.ae(e.center.lat+a.y*x,-85.051129,l.af))}function Ec(v){const e=.5*v,a=Math.sin(e),h=Math.cos(e);return Math.log(a+h)-Math.log(h-a)}function Lh(v,e,a,h){const m=v.lat+a*h;if(Math.abs(a)>1){const x=(Math.sign(v.lat+a)!==Math.sign(v.lat)?-Math.abs(v.lat):Math.abs(v.lat))*Math.PI/180,M=Math.abs(v.lat+a)*Math.PI/180,R=Ec(x+h*(M-x)),D=Ec(x),j=Ec(M);return new l.Q(v.lng+e*((R-D)/(j-D)),m)}return new l.Q(v.lng+e*h,m)}class Vo{constructor(e){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=e}recalculateCache(){if(!this._hadAnyChanges)return;const e=this._cachePrevious;this._cachePrevious=this._cache,this._cache=e,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(e,a,h,m){const x=`${e.z}_${e.x}_${e.y}`,M=this._cache.get(x);if(M)return M;const R=this._cachePrevious.get(x);if(R)return this._cache.set(x,R),R;const D=this._aabbFactory(e,a,h,m);return this._cache.set(x,D),this._hadAnyChanges=!0,D}}function Pc(v,e,a){const h=v-e;return h<0?-h:Math.max(0,h-a)}function kh(v,e,a,h,m){const x=v-a;let M;return M=x<0?Math.min(-x,1+x-m):x>1?Math.min(Math.max(x-m,0),1-x):0,Math.max(M,Pc(e,h,m))}class dp{constructor(){this._aabbCache=new Vo(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(e,a,h,m){const x=1<<h.z,M=1/x,R=h.x/x,D=h.y/x;let j=2;return j=Math.min(j,kh(e,a,R,D,M)),j=Math.min(j,kh(e,a,R+.5,-D-M,M)),j=Math.min(j,kh(e,a,R+.5,2-D-M,M)),j}getWrap(e,a,h){const m=1<<a.z,x=1/m,M=a.x/m,R=Pc(e.x,M,x),D=Pc(e.x,M-1,x),j=Pc(e.x,M+1,x),U=Math.min(R,D,j);return U===j?1:U===D?-1:0}allowVariableZoom(e,a){return Ve(e,a)>4}allowWorldCopies(){return!1}getTileAABB(e,a,h,m){return this._aabbCache.getTileAABB(e,a,h,m)}_computeTileAABB(e,a,h,m){if(e.z<=0)return new pa([-1,-1,-1],[1,1,1]);if(e.z===1)return new pa([e.x===0?-1:0,e.y===0?0:-1,-1],[e.x===0?0:1,e.y===0?1:0,1]);{const x=[zl(0,0,e.x,e.y,e.z),zl(l.Z,0,e.x,e.y,e.z),zl(l.Z,l.Z,e.x,e.y,e.z),zl(0,l.Z,e.x,e.y,e.z)],M=[1,1,1],R=[-1,-1,-1];for(const D of x)for(let j=0;j<3;j++)M[j]=Math.min(M[j],D[j]),R[j]=Math.max(R[j],D[j]);if(e.y===0||e.y===(1<<e.z)-1){const D=[0,e.y===0?1:-1,0];for(let j=0;j<3;j++)M[j]=Math.min(M[j],D[j]),R[j]=Math.max(R[j],D[j])}return new pa(M,R)}}}class Rc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,a,h){return this._helper.interpolatePadding(e,a,h)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,a){this._helper.resize(e,a)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,a){this._helper.overrideNearFarZ(e,a)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e){}constructor(){this._cachedClippingPlane=l.bk(),this._projectionMatrix=l.b1(),this._globeViewProjMatrix32f=l.b0(),this._globeViewProjMatrixNoCorrection=l.b1(),this._globeViewProjMatrixNoCorrectionInverted=l.b1(),this._globeProjMatrixInverted=l.b1(),this._cameraPosition=l.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new en({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,a)=>this.getConstrained(e,a)}),this._coveringTilesDetailsProvider=new dp}clone(){const e=new Rc;return e.apply(this),e}apply(e,a){this._globeLatitudeErrorCorrectionRadians=a||0,this._helper.apply(e)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const e=l.bh();return e[0]=this._cameraPosition[0],e[1]=this._cameraPosition[1],e[2]=this._cameraPosition[2],e}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(e){const{overscaledTileID:a,applyGlobeMatrix:h}=e,m=this._helper.getMercatorTileCoordinates(a);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:m,clippingPlane:this._cachedClippingPlane,projectionTransition:h?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(e){const a=this.pitchInRadians,h=this.cameraToCenterDistance/e,m=Math.sin(a)*h,x=Math.cos(a)*h+1,M=1/Math.sqrt(m*m+x*x)*1;let R=-m,D=x;const j=Math.sqrt(R*R+D*D);R/=j,D/=j;const U=[0,R,D];l.bl(U,U,[0,0,0],-this.bearingInRadians),l.bm(U,U,[0,0,0],-1*this.center.lat*Math.PI/180),l.bn(U,U,[0,0,0],this.center.lng*Math.PI/180);const $=1/l.bo(U);return l.aO(U,U,$),[...U,-M*$]}isLocationOccluded(e){return!this.isSurfacePointVisible(Un(e))}transformLightDirection(e){const a=this._helper._center.lng*Math.PI/180,h=this._helper._center.lat*Math.PI/180,m=Math.cos(h),x=[Math.sin(a)*m,Math.sin(h),Math.cos(a)*m],M=[x[2],0,-x[0]],R=[0,0,0];l.aU(R,M,x),l.aT(M,M),l.aT(R,R);const D=[0,0,0];return l.aT(D,[M[0]*e[0]+R[0]*e[1]+x[0]*e[2],M[1]*e[0]+R[1]*e[1]+x[1]*e[2],M[2]*e[0]+R[2]*e[1]+x[2]*e[2]]),D}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(e,a,h){const m=function(R,D,j){const U=1/(1<<j.z);return new l.$(R/l.Z*U+j.x*U,D/l.Z*U+j.y*U)}(e,a,h.canonical),x=(M=m.y,[l.bg(m.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI]);var M;return this.getCircleRadiusCorrection()/Math.cos(x[1])}projectTileCoordinates(e,a,h,m){const x=h.canonical,M=zl(e,a,x.x,x.y,x.z),R=1+(m?m(e,a):0)/l.bu,D=[M[0]*R,M[1]*R,M[2]*R,1];l.at(D,D,this._globeViewProjMatrixNoCorrection);const j=this._cachedClippingPlane,U=j[0]*M[0]+j[1]*M[1]+j[2]*M[2]+j[3]<0;return{point:new l.P(D[0]/D[3],D[1]/D[3]),signedDistanceFromCamera:D[3],isOccluded:U}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const e=Cc(this.worldSize,this.center.lat),a=l.b2(),h=l.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*e),l.aY(a,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const m=this.centerOffset;a[8]=2*-m.x/this._helper._width,a[9]=2*m.y/this._helper._height,this._projectionMatrix=l.aZ(a),this._globeProjMatrixInverted=l.b2(),l.an(this._globeProjMatrixInverted,a),l.L(a,a,[0,0,-this.cameraToCenterDistance]),l.a_(a,a,this.rollInRadians),l.a$(a,a,-this.pitchInRadians),l.a_(a,a,this.bearingInRadians),l.L(a,a,[0,0,-e]);const x=l.bh();x[0]=e,x[1]=e,x[2]=e,l.a$(h,a,this.center.lat*Math.PI/180),l.bp(h,h,-this.center.lng*Math.PI/180),l.M(h,h,x),this._globeViewProjMatrixNoCorrection=h,l.a$(a,a,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),l.bp(a,a,-this.center.lng*Math.PI/180),l.M(a,a,x),this._globeViewProjMatrix32f=new Float32Array(a),this._globeViewProjMatrixNoCorrectionInverted=l.b2(),l.an(this._globeViewProjMatrixNoCorrectionInverted,h);const M=l.bh();this._cameraPosition=l.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/e,l.bl(this._cameraPosition,this._cameraPosition,M,-this.rollInRadians),l.bm(this._cameraPosition,this._cameraPosition,M,this.pitchInRadians),l.bl(this._cameraPosition,this._cameraPosition,M,-this.bearingInRadians),l.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),l.bm(this._cameraPosition,this._cameraPosition,M,-this.center.lat*Math.PI/180),l.bn(this._cameraPosition,this._cameraPosition,M,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(e);const R=l.aZ(this._globeViewProjMatrixNoCorrectionInverted);l.M(R,R,[1,1,-1]),this._cachedFrustum=wi.fromInvProjectionMatrix(R)}calculateFogMatrix(e){l.w("calculateFogMatrix is not supported on globe projection.");const a=l.b2();return l.ad(a),a}getVisibleUnwrappedCoordinates(e){return[new l.aW(0,e)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){e&&l.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,a){if(!this._globeViewProjMatrixNoCorrection)return 1;const h=Un(e);l.aO(h,h,1+a/l.bu);const m=l.bk();return l.at(m,[h[0],h[1],h[2],1],this._globeViewProjMatrixNoCorrection),m[2]/m[3]}populateCache(e){}getBounds(){const e=.5*this.width,a=.5*this.height,h=[new l.P(0,0),new l.P(e,0),new l.P(this.width,0),new l.P(this.width,a),new l.P(this.width,this.height),new l.P(e,this.height),new l.P(0,this.height),new l.P(0,a)],m=[];for(const $ of h)m.push(this.unprojectScreenPoint($));let x=0,M=0,R=0,D=0;const j=this.center;for(const $ of m){const Z=l.bq(j.lng,$.lng),te=l.bq(j.lat,$.lat);Z<M&&(M=Z),Z>x&&(x=Z),te<D&&(D=te),te>R&&(R=te)}const U=[j.lng+M,j.lat+D,j.lng+x,j.lat+R];return this.isSurfacePointOnScreen([0,1,0])&&(U[3]=90,U[0]=-180,U[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(U[1]=-90,U[0]=-180,U[2]=180),new pr(U)}getConstrained(e,a){const h=l.ae(e.lat,-85.051129,l.af),m=l.ae(+a,this.minZoom+hi(0,h),this.maxZoom);return{center:new l.Q(e.lng,h),zoom:m}}calculateCenterFromCameraLngLatAlt(e,a,h,m){return this._helper.calculateCenterFromCameraLngLatAlt(e,a,h,m)}setLocationAtPoint(e,a){const h=Un(this.unprojectScreenPoint(a)),m=Un(e),x=l.bh();l.br(x);const M=l.bh();l.bn(M,h,x,-this.center.lng*Math.PI/180),l.bm(M,M,x,this.center.lat*Math.PI/180);const R=m[0]*m[0]+m[2]*m[2],D=M[0]*M[0];if(R<D)return;const j=Math.sqrt(R-D),U=-j,$=l.bs(m[0],m[2],M[0],j),Z=l.bs(m[0],m[2],M[0],U),te=l.bh();l.bn(te,m,x,-$);const re=l.bs(te[1],te[2],M[1],M[2]),fe=l.bh();l.bn(fe,m,x,-Z);const de=l.bs(fe[1],fe[2],M[1],M[2]),ge=.5*Math.PI,ve=re>=-ge&&re<=ge,Ae=de>=-ge&&de<=ge;let Ee,Pe;if(ve&&Ae){const He=this.center.lng*Math.PI/180,at=this.center.lat*Math.PI/180;l.bv($,He)+l.bv(re,at)<l.bv(Z,He)+l.bv(de,at)?(Ee=$,Pe=re):(Ee=Z,Pe=de)}else if(ve)Ee=$,Pe=re;else{if(!Ae)return;Ee=Z,Pe=de}const Le=Ee/Math.PI*180,Ie=Pe/Math.PI*180,$e=this.center.lat;this.setCenter(new l.Q(Le,l.ae(Ie,-90,90))),this.setZoom(this.zoom+hi($e,this.center.lat))}locationToScreenPoint(e,a){const h=Un(e);if(a){const m=a.getElevationForLngLatZoom(e,this._helper._tileZoom);l.aO(h,h,1+m/l.bu)}return this._projectSurfacePointToScreen(h)}_projectSurfacePointToScreen(e){const a=l.bk();return l.at(a,[...e,1],this._globeViewProjMatrixNoCorrection),a[0]/=a[3],a[1]/=a[3],new l.P((.5*a[0]+.5)*this.width,(.5*-a[1]+.5)*this.height)}screenPointToMercatorCoordinate(e,a){if(a){const h=a.pointCoordinate(e);if(h)return h}return l.$.fromLngLat(this.unprojectScreenPoint(e))}screenPointToLocation(e,a){var h;return(h=this.screenPointToMercatorCoordinate(e,a))===null||h===void 0?void 0:h.toLngLat()}isPointOnMapSurface(e,a){const h=this._cameraPosition,m=this.getRayDirectionFromPixel(e);return!!this.rayPlanetIntersection(h,m)}getRayDirectionFromPixel(e){const a=l.bk();a[0]=e.x/this.width*2-1,a[1]=-1*(e.y/this.height*2-1),a[2]=1,a[3]=1,l.at(a,a,this._globeViewProjMatrixNoCorrectionInverted),a[0]/=a[3],a[1]/=a[3],a[2]/=a[3];const h=l.bh();h[0]=a[0]-this._cameraPosition[0],h[1]=a[1]-this._cameraPosition[1],h[2]=a[2]-this._cameraPosition[2];const m=l.bh();return l.aT(m,h),m}isSurfacePointVisible(e){const a=this._cachedClippingPlane;return a[0]*e[0]+a[1]*e[1]+a[2]*e[2]+a[3]>=0}isSurfacePointOnScreen(e){if(!this.isSurfacePointVisible(e))return!1;const a=l.bk();return l.at(a,[...e,1],this._globeViewProjMatrixNoCorrection),a[0]/=a[3],a[1]/=a[3],a[2]/=a[3],a[0]>-1&&a[0]<1&&a[1]>-1&&a[1]<1&&a[2]>-1&&a[2]<1}rayPlanetIntersection(e,a){const h=l.aV(e,a),m=l.bh(),x=l.bh();l.aO(x,a,h),l.aS(m,e,x);const M=1-l.aV(m,m);if(M<0)return null;const R=l.aV(e,e)-1,D=-h+(h<0?1:-1)*Math.sqrt(M),j=R/D,U=D;return{tMin:Math.min(j,U),tMax:Math.max(j,U)}}unprojectScreenPoint(e){const a=this._cameraPosition,h=this.getRayDirectionFromPixel(e),m=this.rayPlanetIntersection(a,h);if(m){const U=l.bh();l.aP(U,a,[h[0]*m.tMin,h[1]*m.tMin,h[2]*m.tMin]);const $=l.bh();return l.aT($,U),Vn($)}const x=this._cachedClippingPlane,M=x[0]*h[0]+x[1]*h[1]+x[2]*h[2],R=-l.bt(x,a)/M,D=l.bh();if(R>0)l.aP(D,a,[h[0]*R,h[1]*R,h[2]*R]);else{const U=l.bh();l.aP(U,a,[2*h[0],2*h[1],2*h[2]]);const $=l.bt(this._cachedClippingPlane,U);l.aS(D,U,[this._cachedClippingPlane[0]*$,this._cachedClippingPlane[1]*$,this._cachedClippingPlane[2]*$])}const j=function(U){const $=l.bh();return $[0]=U[0]*-U[3],$[1]=U[1]*-U[3],$[2]=U[2]*-U[3],{center:$,radius:Math.sqrt(1-U[3]*U[3])}}(x);return Vn(function(U,$,Z){const te=l.bh();l.aS(te,Z,U);const re=l.bh();return l.bi(re,U,te,$/l.bj(te)),re}(j.center,j.radius,D))}getMatrixForModel(e,a){const h=l.Q.convert(e),m=1/l.bu,x=l.b1();return l.bp(x,x,h.lng/180*Math.PI),l.a$(x,x,-h.lat/180*Math.PI),l.L(x,x,[0,0,1+a/l.bu]),l.a$(x,x,.5*Math.PI),l.M(x,x,[m,m,m]),x}getProjectionDataForCustomLayer(e=!0){const a=this.getProjectionData({overscaledTileID:new l.Y(0,0,0,0,0),applyGlobeMatrix:e});return a.tileMercatorCoords=[0,0,1,1],a}getFastPathSimpleProjectionMatrix(e){}}class kl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,a,h){return this._helper.interpolatePadding(e,a,h)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,a,h=!0){this._helper.resize(e,a,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,a){this._helper.overrideNearFarZ(e,a)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(e,a){this._globeness=e,this._globeLatitudeErrorCorrectionRadians=a,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new en({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,a)=>this.getConstrained(e,a)}),this._globeness=1,this._mercatorTransform=new Ha,this._verticalPerspectiveTransform=new Rc}clone(){const e=new kl;return e._globeness=this._globeness,e._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,e.apply(this),e}apply(e){this._helper.apply(e),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(e){const a=this._mercatorTransform.getProjectionData(e),h=this._verticalPerspectiveTransform.getProjectionData(e);return{mainMatrix:this.isGlobeRendering?h.mainMatrix:a.mainMatrix,clippingPlane:h.clippingPlane,tileMercatorCoords:h.tileMercatorCoords,projectionTransition:e.applyGlobeMatrix?this._globeness:0,fallbackMatrix:a.fallbackMatrix}}isLocationOccluded(e){return this.currentTransform.isLocationOccluded(e)}transformLightDirection(e){return this.currentTransform.transformLightDirection(e)}getPixelScale(){return l.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return l.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(e,a,h){const m=this._mercatorTransform.getPitchedTextCorrection(e,a,h),x=this._verticalPerspectiveTransform.getPitchedTextCorrection(e,a,h);return l.bc(m,x,this._globeness)}projectTileCoordinates(e,a,h,m){return this.currentTransform.projectTileCoordinates(e,a,h,m)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(e){return this.currentTransform.calculateFogMatrix(e)}getVisibleUnwrappedCoordinates(e){return this.currentTransform.getVisibleUnwrappedCoordinates(e)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(e){this._mercatorTransform.recalculateZoomAndCenter(e),this._verticalPerspectiveTransform.recalculateZoomAndCenter(e)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,a){return this.currentTransform.lngLatToCameraDepth(e,a)}populateCache(e){this._mercatorTransform.populateCache(e),this._verticalPerspectiveTransform.populateCache(e)}getBounds(){return this.currentTransform.getBounds()}getConstrained(e,a){return this.currentTransform.getConstrained(e,a)}calculateCenterFromCameraLngLatAlt(e,a,h,m){return this._helper.calculateCenterFromCameraLngLatAlt(e,a,h,m)}setLocationAtPoint(e,a){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(e,a),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(e,a),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(e,a){return this.currentTransform.locationToScreenPoint(e,a)}screenPointToMercatorCoordinate(e,a){return this.currentTransform.screenPointToMercatorCoordinate(e,a)}screenPointToLocation(e,a){return this.currentTransform.screenPointToLocation(e,a)}isPointOnMapSurface(e,a){return this.currentTransform.isPointOnMapSurface(e,a)}getRayDirectionFromPixel(e){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(e)}getMatrixForModel(e,a){return this.currentTransform.getMatrixForModel(e,a)}getProjectionDataForCustomLayer(e=!0){const a=this._mercatorTransform.getProjectionDataForCustomLayer(e);if(!this.isGlobeRendering)return a;const h=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(e);return h.fallbackMatrix=a.mainMatrix,h}getFastPathSimpleProjectionMatrix(e){return this.currentTransform.getFastPathSimpleProjectionMatrix(e)}}class Wa{get useGlobeControls(){return!0}handlePanInertia(e,a){const h=Ru(e,a);return Math.abs(h.lng-a.center.lng)>180&&(h.lng=a.center.lng+179.5*Math.sign(h.lng-a.center.lng)),{easingCenter:h,easingOffset:new l.P(0,0)}}handleMapControlsRollPitchBearingZoom(e,a){const h=e.around,m=a.screenPointToLocation(h);e.bearingDelta&&a.setBearing(a.bearing+e.bearingDelta),e.pitchDelta&&a.setPitch(a.pitch+e.pitchDelta),e.rollDelta&&a.setRoll(a.roll+e.rollDelta);const x=a.zoom;e.zoomDelta&&a.setZoom(a.zoom+e.zoomDelta);const M=a.zoom-x;if(M===0)return;const R=l.bq(a.center.lng,m.lng),D=R/(Math.abs(R/180)+1),j=l.bq(a.center.lat,m.lat),U=a.getRayDirectionFromPixel(h),$=a.cameraPosition,Z=-1*l.aV($,U),te=l.bh();l.aP(te,$,[U[0]*Z,U[1]*Z,U[2]*Z]);const re=l.bo(te)-1,fe=Math.exp(.5*-Math.max(re-.3,0)),de=Cc(a.worldSize,a.center.lat)/Math.min(a.width,a.height),ge=l.bf(de,.9,.5,1,.25),ve=(1-l.ac(-M))*Math.min(fe,ge),Ae=a.center.lat,Ee=a.zoom,Pe=new l.Q(a.center.lng+D*ve,l.ae(a.center.lat+j*ve,-85.051129,l.af));a.setLocationAtPoint(m,h);const Le=a.center,Ie=l.bf(Math.abs(R),45,85,0,1),$e=l.bf(de,.75,.35,0,1),He=Math.pow(Math.max(Ie,$e),.25),at=l.bq(Le.lng,Pe.lng),ot=l.bq(Le.lat,Pe.lat);a.setCenter(new l.Q(Le.lng+at*He,Le.lat+ot*He).wrap()),a.setZoom(Ee+hi(Ae,a.center.lat))}handleMapControlsPan(e,a,h){if(!e.panDelta)return;const m=a.center.lat,x=a.zoom;a.setCenter(Ru(e.panDelta,a).wrap()),a.setZoom(x+hi(m,a.center.lat))}cameraForBoxAndBearing(e,a,h,m,x){const M=Fn(e,a,h,m,x),R=a.left/x.width*2-1,D=(x.width-a.right)/x.width*2-1,j=a.top/x.height*-2+1,U=(x.height-a.bottom)/x.height*-2+1,$=l.bq(h.getWest(),h.getEast())<0,Z=$?h.getEast():h.getWest(),te=$?h.getWest():h.getEast(),re=Math.max(h.getNorth(),h.getSouth()),fe=Math.min(h.getNorth(),h.getSouth()),de=Z+.5*l.bq(Z,te),ge=re+.5*l.bq(re,fe),ve=x.clone();ve.setCenter(M.center),ve.setBearing(M.bearing),ve.setPitch(0),ve.setRoll(0),ve.setZoom(M.zoom);const Ae=ve.modelViewProjectionMatrix,Ee=[Un(h.getNorthWest()),Un(h.getNorthEast()),Un(h.getSouthWest()),Un(h.getSouthEast()),Un(new l.Q(te,ge)),Un(new l.Q(Z,ge)),Un(new l.Q(de,re)),Un(new l.Q(de,fe))],Pe=Un(M.center);let Le=Number.POSITIVE_INFINITY;for(const Ie of Ee)R<0&&(Le=Wa.getLesserNonNegativeNonNull(Le,Wa.solveVectorScale(Ie,Pe,Ae,"x",R))),D>0&&(Le=Wa.getLesserNonNegativeNonNull(Le,Wa.solveVectorScale(Ie,Pe,Ae,"x",D))),j>0&&(Le=Wa.getLesserNonNegativeNonNull(Le,Wa.solveVectorScale(Ie,Pe,Ae,"y",j))),U<0&&(Le=Wa.getLesserNonNegativeNonNull(Le,Wa.solveVectorScale(Ie,Pe,Ae,"y",U)));if(Number.isFinite(Le)&&Le!==0)return M.zoom=ve.zoom+l.ah(Le),M;wa()}handleJumpToCenterZoom(e,a){const h=e.center.lat,m=e.getConstrained(a.center?l.Q.convert(a.center):e.center,e.zoom).center;e.setCenter(m.wrap());const x=a.zoom!==void 0?+a.zoom:e.zoom+hi(h,m.lat);e.zoom!==x&&e.setZoom(x)}handleEaseTo(e,a){const h=e.zoom,m=e.center,x=e.padding,M={roll:e.roll,pitch:e.pitch,bearing:e.bearing},R={roll:a.roll===void 0?e.roll:a.roll,pitch:a.pitch===void 0?e.pitch:a.pitch,bearing:a.bearing===void 0?e.bearing:a.bearing},D=a.zoom!==void 0,j=!e.isPaddingEqual(a.padding);let U=!1;const $=a.center?l.Q.convert(a.center):m,Z=e.getConstrained($,h).center;cn(e,Z);const te=e.clone();te.setCenter(Z),te.setZoom(D?+a.zoom:h+hi(m.lat,$.lat)),te.setBearing(a.bearing);const re=new l.P(l.ae(e.centerPoint.x+a.offsetAsPoint.x,0,e.width),l.ae(e.centerPoint.y+a.offsetAsPoint.y,0,e.height));te.setLocationAtPoint(Z,re);const fe=(a.offset&&a.offsetAsPoint.mag())>0?te.center:Z,de=D?+a.zoom:h+hi(m.lat,fe.lat),ge=h+hi(m.lat,0),ve=de+hi(fe.lat,0),Ae=l.bq(m.lng,fe.lng),Ee=l.bq(m.lat,fe.lat),Pe=l.ac(ve-ge);return U=de!==h,{easeFunc:Le=>{if(l.b6(M,R)||Fo({startEulerAngles:M,endEulerAngles:R,tr:e,k:Le,useSlerp:M.roll!=R.roll}),j&&e.interpolatePadding(x,a.padding,Le),a.around)l.w("Easing around a point is not supported under globe projection."),e.setLocationAtPoint(a.around,a.aroundPoint);else{const Ie=ve>ge?Math.min(2,Pe):Math.max(.5,Pe),$e=Math.pow(Ie,1-Le),He=Lh(m,Ae,Ee,Le*$e);e.setCenter(He.wrap())}if(U){const Ie=l.B.number(ge,ve,Le)+hi(0,e.center.lat);e.setZoom(Ie)}},isZooming:U,elevationCenter:fe}}handleFlyTo(e,a){const h=a.zoom!==void 0,m=e.center,x=e.zoom,M=e.padding,R=!e.isPaddingEqual(a.padding),D=e.getConstrained(l.Q.convert(a.center||a.locationAtOffset),x).center,j=h?+a.zoom:e.zoom+hi(e.center.lat,D.lat),U=e.clone();U.setCenter(D),U.setZoom(j),U.setBearing(a.bearing);const $=new l.P(l.ae(e.centerPoint.x+a.offsetAsPoint.x,0,e.width),l.ae(e.centerPoint.y+a.offsetAsPoint.y,0,e.height));U.setLocationAtPoint(D,$);const Z=U.center;cn(e,Z);const te=function(Ee,Pe,Le){const Ie=Un(Pe),$e=Un(Le),He=l.aV(Ie,$e),at=Math.acos(He),ot=Pu(Ee);return at/(2*Math.PI)*ot}(e,m,Z),re=x+hi(m.lat,0),fe=j+hi(Z.lat,0),de=l.ac(fe-re);let ge;if(typeof a.minZoom=="number"){const Ee=+a.minZoom+hi(Z.lat,0),Pe=Math.min(Ee,re,fe)+hi(0,Z.lat),Le=e.getConstrained(Z,Pe).zoom+hi(Z.lat,0);ge=l.ac(Le-re)}const ve=l.bq(m.lng,Z.lng),Ae=l.bq(m.lat,Z.lat);return{easeFunc:(Ee,Pe,Le,Ie)=>{const $e=Lh(m,ve,Ae,Le);R&&e.interpolatePadding(M,a.padding,Ee);const He=Ee===1?Z:$e;e.setCenter(He.wrap());const at=re+l.ah(Pe);e.setZoom(Ee===1?j:at+hi(0,He.lat))},scaleOfZoom:de,targetCenter:Z,scaleOfMinZoom:ge,pixelPathLength:te}}static solveVectorScale(e,a,h,m,x){const M=m==="x"?[h[0],h[4],h[8],h[12]]:[h[1],h[5],h[9],h[13]],R=[h[3],h[7],h[11],h[15]],D=e[0]*M[0]+e[1]*M[1]+e[2]*M[2],j=e[0]*R[0]+e[1]*R[1]+e[2]*R[2],U=a[0]*M[0]+a[1]*M[1]+a[2]*M[2],$=a[0]*R[0]+a[1]*R[1]+a[2]*R[2];return U+x*j===D+x*$||R[3]*(D-U)+M[3]*($-j)+D*$==U*j?null:(U+M[3]-x*$-x*R[3])/(U-D-x*$+x*j)}static getLesserNonNegativeNonNull(e,a){return a!==null&&a>=0&&a<e?a:e}}class Iu{constructor(e){this._globe=e,this._mercatorCameraHelper=new Sa,this._verticalPerspectiveCameraHelper=new Wa}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(e,a){return this.currentHelper.handlePanInertia(e,a)}handleMapControlsRollPitchBearingZoom(e,a){return this.currentHelper.handleMapControlsRollPitchBearingZoom(e,a)}handleMapControlsPan(e,a,h){this.currentHelper.handleMapControlsPan(e,a,h)}cameraForBoxAndBearing(e,a,h,m,x){return this.currentHelper.cameraForBoxAndBearing(e,a,h,m,x)}handleJumpToCenterZoom(e,a){this.currentHelper.handleJumpToCenterZoom(e,a)}handleEaseTo(e,a){return this.currentHelper.handleEaseTo(e,a)}handleFlyTo(e,a){return this.currentHelper.handleFlyTo(e,a)}}const Bl=(v,e)=>l.x(v,e&&e.filter(a=>a.identifier!=="source.canvas")),Du=l.bw();class zu extends l.E{constructor(e,a={}){super(),this._rtlPluginLoaded=()=>{for(const h in this.sourceCaches){const m=this.sourceCaches[h].getSource().type;m!=="vector"&&m!=="geojson"||this.sourceCaches[h].reload()}},this.map=e,this.dispatcher=new Qr(nr(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",(h,m)=>this.getGlyphs(h,m)),this.dispatcher.registerMessageHandler("GI",(h,m)=>this.getImages(h,m)),this.imageManager=new ht,this.imageManager.setEventedParent(this),this.glyphManager=new Xt(e._requestManager,a.localIdeographFontFamily),this.lineAtlas=new De(256,512),this.crossTileSymbolIndex=new ys,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",l.by()),Pi().on(ur,this._rtlPluginLoaded),this.on("data",h=>{if(h.dataType!=="source"||h.sourceDataType!=="metadata")return;const m=this.sourceCaches[h.sourceId];if(!m)return;const x=m.getSource();if(x&&x.vectorLayerIds)for(const M in this._layers){const R=this._layers[M];R.source===x.id&&this._validateLayer(R)}})}loadURL(e,a={},h){this.fire(new l.l("dataloading",{dataType:"style"})),a.validate=typeof a.validate!="boolean"||a.validate;const m=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const x=this._loadStyleRequest;l.j(m,this._loadStyleRequest).then(M=>{this._loadStyleRequest=null,this._load(M.data,a,h)}).catch(M=>{this._loadStyleRequest=null,M&&!x.signal.aborted&&this.fire(new l.k(M))})}loadJSON(e,a={},h){this.fire(new l.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,L.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,a.validate=a.validate!==!1,this._load(e,a,h)}).catch(()=>{})}loadEmpty(){this.fire(new l.l("dataloading",{dataType:"style"})),this._load(Du,{validate:!1})}_load(e,a,h){var m,x;const M=a.transformStyle?a.transformStyle(h,e):e;if(!a.validate||!Bl(this,l.y(M))){this._loaded=!0,this.stylesheet=M;for(const R in M.sources)this.addSource(R,M.sources[R],{validate:!1});M.sprite?this._loadSprite(M.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(M.glyphs),this._createLayers(),this.light=new Nt(this.stylesheet.light),this._setProjectionInternal(((m=this.stylesheet.projection)===null||m===void 0?void 0:m.type)||"mercator"),this.sky=new dr(this.stylesheet.sky),this.map.setTerrain((x=this.stylesheet.terrain)!==null&&x!==void 0?x:null),this.fire(new l.l("data",{dataType:"style"})),this.fire(new l.l("style.load"))}}_createLayers(){const e=l.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map(a=>a.id),this._layers={},this._serializedLayers=null;for(const a of e){const h=l.bA(a);h.setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=h}}_loadSprite(e,a=!1,h=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(x,M,R,D){return l._(this,void 0,void 0,function*(){const j=ke(x),U=R>1?"@2x":"",$={},Z={};for(const{id:te,url:re}of j){const fe=M.transformRequest(nt(re,U,".json"),"SpriteJSON");$[te]=l.j(fe,D);const de=M.transformRequest(nt(re,U,".png"),"SpriteImage");Z[te]=_e.getImage(de,D)}return yield Promise.all([...Object.values($),...Object.values(Z)]),function(te,re){return l._(this,void 0,void 0,function*(){const fe={};for(const de in te){fe[de]={};const ge=L.getImageCanvasContext((yield re[de]).data),ve=(yield te[de]).data;for(const Ae in ve){const{width:Ee,height:Pe,x:Le,y:Ie,sdf:$e,pixelRatio:He,stretchX:at,stretchY:ot,content:rt,textFitWidth:It,textFitHeight:Tt}=ve[Ae];fe[de][Ae]={data:null,pixelRatio:He,sdf:$e,stretchX:at,stretchY:ot,content:rt,textFitWidth:It,textFitHeight:Tt,spriteData:{width:Ee,height:Pe,x:Le,y:Ie,context:ge}}}}return fe})}($,Z)})}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(x=>{if(this._spriteRequest=null,x)for(const M in x){this._spritesImagesIds[M]=[];const R=this._spritesImagesIds[M]?this._spritesImagesIds[M].filter(D=>!(D in x)):[];for(const D of R)this.imageManager.removeImage(D),this._changedImages[D]=!0;for(const D in x[M]){const j=M==="default"?D:`${M}:${D}`;this._spritesImagesIds[M].push(j),j in this.imageManager.images?this.imageManager.updateImage(j,x[M][D],!1):this.imageManager.addImage(j,x[M][D]),a&&(this._changedImages[j]=!0)}}}).catch(x=>{this._spriteRequest=null,m=x,this.fire(new l.k(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),a&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"})),h&&h(m)})}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"}))}_validateLayer(e){const a=this.sourceCaches[e.source];if(!a)return;const h=e.sourceLayer;if(!h)return;const m=a.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(h)===-1)&&this.fire(new l.k(new Error(`Source layer "${h}" does not exist on source "${m.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,a=!1){const h=this._serializedAllLayers();if(!e||e.length===0)return Object.values(a?l.bB(h):h);const m=[];for(const x of e)if(h[x]){const M=a?l.bB(h[x]):h[x];m.push(M)}return m}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const a=Object.keys(this._layers);for(const h of a){const m=this._layers[h];m.type!=="custom"&&(e[h]=m.serialize())}return e}hasTransitions(){var e,a,h;if(!((e=this.light)===null||e===void 0)&&e.hasTransition()||!((a=this.sky)===null||a===void 0)&&a.hasTransition()||!((h=this.projection)===null||h===void 0)&&h.hasTransition())return!0;for(const m in this.sourceCaches)if(this.sourceCaches[m].hasTransition())return!0;for(const m in this._layers)if(this._layers[m].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const a=this._changed;if(a){const m=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(m.length||x.length)&&this._updateWorkerLayers(m,x);for(const M in this._updatedSources){const R=this._updatedSources[M];if(R==="reload")this._reloadSource(M);else{if(R!=="clear")throw new Error(`Invalid action ${R}`);this._clearSource(M)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const M in this._updatedPaintProps)this._layers[M].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const h={};for(const m in this.sourceCaches){const x=this.sourceCaches[m];h[m]=x.used,x.used=!1}for(const m of this._order){const x=this._layers[m];x.recalculate(e,this._availableImages),!x.isHidden(e.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const m in h){const x=this.sourceCaches[m];!!h[m]!=!!x.used&&x.fire(new l.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(e),this.sky.recalculate(e),this.projection.recalculate(e),this.z=e.zoom,a&&this.fire(new l.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,a){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:a})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,a={}){var h;this._checkLoaded();const m=this.serialize();if(e=a.transformStyle?a.transformStyle(m,e):e,((h=a.validate)===null||h===void 0||h)&&Bl(this,l.y(e)))return!1;(e=l.bB(e)).layers=l.bz(e.layers);const x=l.bC(m,e),M=this._getOperationsToPerform(x);if(M.unimplemented.length>0)throw new Error(`Unimplemented: ${M.unimplemented.join(", ")}.`);if(M.operations.length===0)return!1;for(const R of M.operations)R();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const a=[],h=[];for(const m of e)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":a.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":a.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":a.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":a.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":a.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":a.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":a.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":a.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":a.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":a.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":a.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":a.push(()=>this.setSprite.apply(this,m.args));break;case"setTerrain":a.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setSky":a.push(()=>this.setSky.apply(this,m.args));break;case"setProjection":this.setProjection.apply(this,m.args);break;case"setTransition":a.push(()=>{});break;default:h.push(m.command)}return{operations:a,unimplemented:h}}addImage(e,a){if(this.getImage(e))return this.fire(new l.k(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,a),this._afterImageUpdated(e)}updateImage(e,a){this.imageManager.updateImage(e,a)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new l.k(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,a,h={}){if(this._checkLoaded(),this.sourceCaches[e]!==void 0)throw new Error(`Source "${e}" already exists.`);if(!a.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(a).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(a.type)>=0&&this._validate(l.y.source,`sources.${e}`,a,null,h))return;this.map&&this.map._collectResourceTiming&&(a.collectResourceTiming=!0);const m=this.sourceCaches[e]=new Ue(e,a,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:e})),m.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error("There is no source with this ID");for(const h in this._layers)if(this._layers[h].source===e)return this.fire(new l.k(new Error(`Source "${e}" cannot be removed while layer "${h}" is using it.`)));const a=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],a.fire(new l.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),a.setEventedParent(null),a.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,a){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error(`There is no source with this ID=${e}`);const h=this.sourceCaches[e].getSource();if(h.type!=="geojson")throw new Error(`geojsonSource.type is ${h.type}, which is !== 'geojson`);h.setData(a),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,a,h={}){this._checkLoaded();const m=e.id;if(this.getLayer(m))return void this.fire(new l.k(new Error(`Layer "${m}" already exists on this map.`)));let x;if(e.type==="custom"){if(Bl(this,l.bD(e)))return;x=l.bA(e)}else{if("source"in e&&typeof e.source=="object"&&(this.addSource(m,e.source),e=l.bB(e),e=l.e(e,{source:m})),this._validate(l.y.layer,`layers.${m}`,e,{arrayIndex:-1},h))return;x=l.bA(e),this._validateLayer(x),x.setEventedParent(this,{layer:{id:m}})}const M=a?this._order.indexOf(a):this._order.length;if(a&&M===-1)this.fire(new l.k(new Error(`Cannot add layer "${m}" before non-existing layer "${a}".`)));else{if(this._order.splice(M,0,m),this._layerOrderChanged=!0,this._layers[m]=x,this._removedLayers[m]&&x.source&&x.type!=="custom"){const R=this._removedLayers[m];delete this._removedLayers[m],R.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(e,a){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new l.k(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===a)return;const h=this._order.indexOf(e);this._order.splice(h,1);const m=a?this._order.indexOf(a):this._order.length;a&&m===-1?this.fire(new l.k(new Error(`Cannot move layer "${e}" before non-existing layer "${a}".`))):(this._order.splice(m,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const a=this._layers[e];if(!a)return void this.fire(new l.k(new Error(`Cannot remove non-existing layer "${e}".`)));a.setEventedParent(null);const h=this._order.indexOf(e);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=a,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],a.onRemove&&a.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,a,h){this._checkLoaded();const m=this.getLayer(e);m?m.minzoom===a&&m.maxzoom===h||(a!=null&&(m.minzoom=a),h!=null&&(m.maxzoom=h),this._updateLayer(m)):this.fire(new l.k(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,a,h={}){this._checkLoaded();const m=this.getLayer(e);if(m){if(!l.bE(m.filter,a))return a==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(l.y.filter,`layers.${m.id}.filter`,a,null,h)||(m.filter=l.bB(a),this._updateLayer(m)))}else this.fire(new l.k(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return l.bB(this.getLayer(e).filter)}setLayoutProperty(e,a,h,m={}){this._checkLoaded();const x=this.getLayer(e);x?l.bE(x.getLayoutProperty(a),h)||(x.setLayoutProperty(a,h,m),this._updateLayer(x)):this.fire(new l.k(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,a){const h=this.getLayer(e);if(h)return h.getLayoutProperty(a);this.fire(new l.k(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,a,h,m={}){this._checkLoaded();const x=this.getLayer(e);x?l.bE(x.getPaintProperty(a),h)||(x.setPaintProperty(a,h,m)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new l.k(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,a){return this.getLayer(e).getPaintProperty(a)}setFeatureState(e,a){this._checkLoaded();const h=e.source,m=e.sourceLayer,x=this.sourceCaches[h];if(x===void 0)return void this.fire(new l.k(new Error(`The source '${h}' does not exist in the map's style.`)));const M=x.getSource().type;M==="geojson"&&m?this.fire(new l.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):M!=="vector"||m?(e.id===void 0&&this.fire(new l.k(new Error("The feature id parameter must be provided."))),x.setFeatureState(m,e.id,a)):this.fire(new l.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,a){this._checkLoaded();const h=e.source,m=this.sourceCaches[h];if(m===void 0)return void this.fire(new l.k(new Error(`The source '${h}' does not exist in the map's style.`)));const x=m.getSource().type,M=x==="vector"?e.sourceLayer:void 0;x!=="vector"||M?a&&typeof e.id!="string"&&typeof e.id!="number"?this.fire(new l.k(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(M,e.id,a):this.fire(new l.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const a=e.source,h=e.sourceLayer,m=this.sourceCaches[a];if(m!==void 0)return m.getSource().type!=="vector"||h?(e.id===void 0&&this.fire(new l.k(new Error("The feature id parameter must be provided."))),m.getFeatureState(h,e.id)):void this.fire(new l.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.k(new Error(`The source '${a}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=l.bF(this.sourceCaches,x=>x.serialize()),a=this._serializeByIds(this._order,!0),h=this.map.getTerrain()||void 0,m=this.stylesheet;return l.bG({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,projection:m.projection,sources:e,layers:a,terrain:h},x=>x!==void 0)}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&this.sourceCaches[e.source].getSource().type!=="raster"&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const a=M=>this._layers[M].type==="fill-extrusion",h={},m=[];for(let M=this._order.length-1;M>=0;M--){const R=this._order[M];if(a(R)){h[R]=M;for(const D of e){const j=D[R];if(j)for(const U of j)m.push(U)}}}m.sort((M,R)=>R.intersectionZ-M.intersectionZ);const x=[];for(let M=this._order.length-1;M>=0;M--){const R=this._order[M];if(a(R))for(let D=m.length-1;D>=0;D--){const j=m[D].feature;if(h[j.layer.id]<M)break;x.push(j),m.pop()}else for(const D of e){const j=D[R];if(j)for(const U of j)x.push(U.feature)}}return x}queryRenderedFeatures(e,a,h){a&&a.filter&&this._validate(l.y.filter,"queryRenderedFeatures.filter",a.filter,null,a);const m={};if(a&&a.layers){if(!(Array.isArray(a.layers)||a.layers instanceof Set))return this.fire(new l.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const j of a.layers){const U=this._layers[j];if(!U)return this.fire(new l.k(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];m[U.source]=!0}}const x=[];a.availableImages=this._availableImages;const M=this._serializedAllLayers(),R=a.layers instanceof Set?a.layers:Array.isArray(a.layers)?new Set(a.layers):null,D=Object.assign(Object.assign({},a),{layers:R});for(const j in this.sourceCaches)a.layers&&!m[j]||x.push(Ur(this.sourceCaches[j],this._layers,M,e,D,h,this.map.terrain?(U,$,Z)=>this.map.terrain.getElevation(U,$,Z):void 0));return this.placement&&x.push(function(j,U,$,Z,te,re,fe){const de={},ge=re.queryRenderedSymbols(Z),ve=[];for(const Ae of Object.keys(ge).map(Number))ve.push(fe[Ae]);ve.sort(li);for(const Ae of ve){const Ee=Ae.featureIndex.lookupSymbolFeatures(ge[Ae.bucketInstanceId],U,Ae.bucketIndex,Ae.sourceLayerIndex,te.filter,te.layers,te.availableImages,j);for(const Pe in Ee){const Le=de[Pe]=de[Pe]||[],Ie=Ee[Pe];Ie.sort(($e,He)=>{const at=Ae.featureSortOrder;if(at){const ot=at.indexOf($e.featureIndex);return at.indexOf(He.featureIndex)-ot}return He.featureIndex-$e.featureIndex});for(const $e of Ie)Le.push($e)}}return function(Ae,Ee,Pe){for(const Le in Ae)for(const Ie of Ae[Le])Di(Ie,Pe[Ee[Le].source]);return Ae}(de,j,$)}(this._layers,M,this.sourceCaches,e,D,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(e,a){a&&a.filter&&this._validate(l.y.filter,"querySourceFeatures.filter",a.filter,null,a);const h=this.sourceCaches[e];return h?function(m,x){const M=m.getRenderableIds().map(j=>m.getTileByID(j)),R=[],D={};for(let j=0;j<M.length;j++){const U=M[j],$=U.tileID.canonical.key;D[$]||(D[$]=!0,U.querySourceFeatures(R,x))}return R}(h,a):[]}getLight(){return this.light.getLight()}setLight(e,a={}){this._checkLoaded();const h=this.light.getLight();let m=!1;for(const M in e)if(!l.bE(e[M],h[M])){m=!0;break}if(!m)return;const x={now:L.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,a),this.light.updateTransitions(x)}getProjection(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.projection}setProjection(e){if(this._checkLoaded(),this.projection){if(this.projection.name===e.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=e,this._setProjectionInternal(e.type)}getSky(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.sky}setSky(e,a={}){this._checkLoaded();const h=this.getSky();let m=!1;if(!e&&!h)return;if(e&&!h)m=!0;else if(!e&&h)m=!0;else for(const M in e)if(!l.bE(e[M],h[M])){m=!0;break}if(!m)return;const x={now:L.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,a),this.sky.updateTransitions(x)}_setProjectionInternal(e){const a=function(h){if(Array.isArray(h)){const m=new Eu({type:h});return{projection:m,transform:new kl,cameraHelper:new Iu(m)}}switch(h){case"mercator":return{projection:new ki,transform:new Ha,cameraHelper:new Sa};case"globe":{const m=new Eu({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:m,transform:new kl,cameraHelper:new Iu(m)}}case"vertical-perspective":return{projection:new Uo,transform:new Rc,cameraHelper:new Wa};default:return l.w(`Unknown projection name: ${h}. Falling back to mercator projection.`),{projection:new ki,transform:new Ha,cameraHelper:new Sa}}}(e);this.projection=a.projection,this.map.migrateProjection(a.transform,a.cameraHelper);for(const h in this.sourceCaches)this.sourceCaches[h].reload()}_validate(e,a,h,m,x={}){return(!x||x.validate!==!1)&&Bl(this,e.call(l.y,l.e({key:a,style:this.serialize(),value:h,styleSpec:l.v},m)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Pi().off(ur,this._rtlPluginLoaded);for(const a in this._layers)this._layers[a].setEventedParent(null);for(const a in this.sourceCaches){const h=this.sourceCaches[a];h.setEventedParent(null),h.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const a in this.sourceCaches)this.sourceCaches[a].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,a,h,m,x=!1){let M=!1,R=!1;const D={};for(const j of this._order){const U=this._layers[j];if(U.type!=="symbol")continue;if(!D[U.source]){const Z=this.sourceCaches[U.source];D[U.source]=Z.getRenderableIds(!0).map(te=>Z.getTileByID(te)).sort((te,re)=>re.tileID.overscaledZ-te.tileID.overscaledZ||(te.tileID.isLessThan(re.tileID)?-1:1))}const $=this.crossTileSymbolIndex.addLayer(U,D[U.source],e.center.lng);M=M||$}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||h===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(L.now(),e.zoom))&&(this.pauseablePlacement=new Yn(e,this.map.terrain,this._order,x,a,h,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,D),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(L.now()),R=!0),M&&this.pauseablePlacement.placement.setStale()),R||M)for(const j of this._order){const U=this._layers[j];U.type==="symbol"&&this.placement.updateLayerOpacities(U,D[U.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(L.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,a){return l._(this,void 0,void 0,function*(){const h=yield this.imageManager.getImages(a.icons);this._updateTilesForChangedImages();const m=this.sourceCaches[a.source];return m&&m.setDependencies(a.tileID.key,a.type,a.icons),h})}getGlyphs(e,a){return l._(this,void 0,void 0,function*(){const h=yield this.glyphManager.getGlyphs(a.stacks),m=this.sourceCaches[a.source];return m&&m.setDependencies(a.tileID.key,a.type,[""]),h})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,a={}){this._checkLoaded(),e&&this._validate(l.y.glyphs,"glyphs",e,null,a)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,a,h={},m){this._checkLoaded();const x=[{id:e,url:a}],M=[...ke(this.stylesheet.sprite),...x];this._validate(l.y.sprite,"sprite",M,null,h)||(this.stylesheet.sprite=M,this._loadSprite(x,!0,m))}removeSprite(e){this._checkLoaded();const a=ke(this.stylesheet.sprite);if(a.find(h=>h.id===e)){if(this._spritesImagesIds[e])for(const h of this._spritesImagesIds[e])this.imageManager.removeImage(h),this._changedImages[h]=!0;a.splice(a.findIndex(h=>h.id===e),1),this.stylesheet.sprite=a.length>0?a:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"}))}else this.fire(new l.k(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return ke(this.stylesheet.sprite)}setSprite(e,a={},h){this._checkLoaded(),e&&this._validate(l.y.sprite,"sprite",e,null,a)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,h):(this._unloadSprite(),h&&h(null)))}}var Bh=l.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class _s{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,a,h,m,x,M,R,D,j){this.context=e;let U=this.boundPaintVertexBuffers.length!==m.length;for(let $=0;!U&&$<m.length;$++)this.boundPaintVertexBuffers[$]!==m[$]&&(U=!0);!this.vao||this.boundProgram!==a||this.boundLayoutVertexBuffer!==h||U||this.boundIndexBuffer!==x||this.boundVertexOffset!==M||this.boundDynamicVertexBuffer!==R||this.boundDynamicVertexBuffer2!==D||this.boundDynamicVertexBuffer3!==j?this.freshBind(a,h,m,x,M,R,D,j):(e.bindVertexArray.set(this.vao),R&&R.bind(),x&&x.dynamicDraw&&x.bind(),D&&D.bind(),j&&j.bind())}freshBind(e,a,h,m,x,M,R,D){const j=e.numAttributes,U=this.context,$=U.gl;this.vao&&this.destroy(),this.vao=U.createVertexArray(),U.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=m,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=M,this.boundDynamicVertexBuffer2=R,this.boundDynamicVertexBuffer3=D,a.enableAttributes($,e);for(const Z of h)Z.enableAttributes($,e);M&&M.enableAttributes($,e),R&&R.enableAttributes($,e),D&&D.enableAttributes($,e),a.bind(),a.setVertexAttribPointers($,e,x);for(const Z of h)Z.bind(),Z.setVertexAttribPointers($,e,x);M&&(M.bind(),M.setVertexAttribPointers($,e,x)),m&&m.bind(),R&&(R.bind(),R.setVertexAttribPointers($,e,x)),D&&(D.bind(),D.setVertexAttribPointers($,e,x)),U.currentNumAttributes=j}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const fp=(v,e,a,h,m)=>({u_texture:0,u_ele_delta:v,u_fog_matrix:e,u_fog_color:a?a.properties.get("fog-color"):l.b7.white,u_fog_ground_blend:a?a.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:m?0:a?a.calculateFogBlendOpacity(h):0,u_horizon_color:a?a.properties.get("horizon-color"):l.b7.white,u_horizon_fog_blend:a?a.properties.get("horizon-fog-blend"):1,u_is_globe_mode:m?1:0}),Oh={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function co(v){const e=[];for(let a=0;a<v.length;a++){if(v[a]===null)continue;const h=v[a].split(" ");e.push(h.pop())}return e}class Lu{constructor(e,a,h,m,x,M,R,D){const j=e.gl;this.program=j.createProgram();const U=co(a.staticAttributes),$=h?h.getBinderAttributes():[],Z=U.concat($),te=cr.prelude.staticUniforms?co(cr.prelude.staticUniforms):[],re=R.staticUniforms?co(R.staticUniforms):[],fe=a.staticUniforms?co(a.staticUniforms):[],de=h?h.getBinderUniforms():[],ge=te.concat(re).concat(fe).concat(de),ve=[];for(const He of ge)ve.indexOf(He)<0&&ve.push(He);const Ae=h?h.defines():[];Dn(j)&&Ae.unshift("#version 300 es"),x&&Ae.push("#define OVERDRAW_INSPECTOR;"),M&&Ae.push("#define TERRAIN3D;"),D&&Ae.push(D);let Ee=Ae.concat(cr.prelude.fragmentSource,R.fragmentSource,a.fragmentSource).join(`
`),Pe=Ae.concat(cr.prelude.vertexSource,R.vertexSource,a.vertexSource).join(`
`);Dn(j)||(Ee=function(He){return He.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Ee),Pe=function(He){return He.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Pe));const Le=j.createShader(j.FRAGMENT_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(Le,Ee),j.compileShader(Le),!j.getShaderParameter(Le,j.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${j.getShaderInfoLog(Le)}`);j.attachShader(this.program,Le);const Ie=j.createShader(j.VERTEX_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(Ie,Pe),j.compileShader(Ie),!j.getShaderParameter(Ie,j.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${j.getShaderInfoLog(Ie)}`);j.attachShader(this.program,Ie),this.attributes={};const $e={};this.numAttributes=Z.length;for(let He=0;He<this.numAttributes;He++)Z[He]&&(j.bindAttribLocation(this.program,He,Z[He]),this.attributes[Z[He]]=He);if(j.linkProgram(this.program),!j.getProgramParameter(this.program,j.LINK_STATUS))throw new Error(`Program failed to link: ${j.getProgramInfoLog(this.program)}`);j.deleteShader(Ie),j.deleteShader(Le);for(let He=0;He<ve.length;He++){const at=ve[He];if(at&&!$e[at]){const ot=j.getUniformLocation(this.program,at);ot&&($e[at]=ot)}}this.fixedUniforms=m(e,$e),this.terrainUniforms=((He,at)=>({u_depth:new l.bH(He,at.u_depth),u_terrain:new l.bH(He,at.u_terrain),u_terrain_dim:new l.b8(He,at.u_terrain_dim),u_terrain_matrix:new l.bJ(He,at.u_terrain_matrix),u_terrain_unpack:new l.bK(He,at.u_terrain_unpack),u_terrain_exaggeration:new l.b8(He,at.u_terrain_exaggeration)}))(e,$e),this.projectionUniforms=((He,at)=>({u_projection_matrix:new l.bJ(He,at.u_projection_matrix),u_projection_tile_mercator_coords:new l.bK(He,at.u_projection_tile_mercator_coords),u_projection_clipping_plane:new l.bK(He,at.u_projection_clipping_plane),u_projection_transition:new l.b8(He,at.u_projection_transition),u_projection_fallback_matrix:new l.bJ(He,at.u_projection_fallback_matrix)}))(e,$e),this.binderUniforms=h?h.getUniforms(e,$e):[]}draw(e,a,h,m,x,M,R,D,j,U,$,Z,te,re,fe,de,ge,ve,Ae){const Ee=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(h),e.setStencilMode(m),e.setColorMode(x),e.setCullFace(M),D){e.activeTexture.set(Ee.TEXTURE2),Ee.bindTexture(Ee.TEXTURE_2D,D.depthTexture),e.activeTexture.set(Ee.TEXTURE3),Ee.bindTexture(Ee.TEXTURE_2D,D.texture);for(const Le in this.terrainUniforms)this.terrainUniforms[Le].set(D[Le])}if(j)for(const Le in j)this.projectionUniforms[Oh[Le]].set(j[Le]);if(R)for(const Le in this.fixedUniforms)this.fixedUniforms[Le].set(R[Le]);de&&de.setUniforms(e,this.binderUniforms,re,{zoom:fe});let Pe=0;switch(a){case Ee.LINES:Pe=2;break;case Ee.TRIANGLES:Pe=3;break;case Ee.LINE_STRIP:Pe=1}for(const Le of te.get()){const Ie=Le.vaos||(Le.vaos={});(Ie[U]||(Ie[U]=new _s)).bind(e,this,$,de?de.getPaintVertexBuffers():[],Z,Le.vertexOffset,ge,ve,Ae),Ee.drawElements(a,Le.primitiveLength*Pe,Ee.UNSIGNED_SHORT,Le.primitiveOffset*Pe*2)}}}function Gd(v,e,a){const h=1/l.az(a,1,e.transform.tileZoom),m=Math.pow(2,a.tileID.overscaledZ),x=a.tileSize*Math.pow(2,e.transform.tileZoom)/m,M=x*(a.tileID.canonical.x+a.tileID.wrap*m),R=x*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[h,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[M>>16,R>>16],u_pixel_coord_lower:[65535&M,65535&R]}}const ku=(v,e,a,h)=>{const m=v.style.light,x=m.properties.get("position"),M=[x.x,x.y,x.z],R=l.bN();m.properties.get("anchor")==="viewport"&&l.bO(R,v.transform.bearingInRadians),l.bP(M,M,R);const D=v.transform.transformLightDirection(M),j=m.properties.get("color");return{u_lightpos:M,u_lightpos_globe:D,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[j.r,j.g,j.b],u_vertical_gradient:+e,u_opacity:a,u_fill_translate:h}},jh=(v,e,a,h,m,x,M)=>l.e(ku(v,e,a,h),Gd(x,v,M),{u_height_factor:-Math.pow(2,m.overscaledZ)/M.tileSize/8}),Ka=(v,e,a,h)=>l.e(Gd(e,v,a),{u_fill_translate:h}),pp=(v,e)=>({u_world:v,u_fill_translate:e}),Nh=(v,e,a,h,m)=>l.e(Ka(v,e,a,m),{u_world:h}),Hd=(v,e,a,h,m)=>{const x=v.transform;let M,R,D=0;if(a.paint.get("circle-pitch-alignment")==="map"){const j=l.az(e,1,x.zoom);M=!0,R=[j,j],D=j/(l.Z*Math.pow(2,e.tileID.overscaledZ))*2*Math.PI*m}else M=!1,R=x.pixelsToGLUnits;return{u_camera_to_center_distance:x.cameraToCenterDistance,u_scale_with_map:+(a.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+M,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:R,u_globe_extrude_scale:D,u_translate:h}},Fh=v=>({u_pixel_extrude_scale:[1/v.width,1/v.height]}),Ic=v=>({u_viewport_size:[v.width,v.height]}),Dc=(v,e=1)=>({u_color:v,u_overlay:0,u_overlay_scale:e}),ho=(v,e,a,h)=>{const m=l.az(v,1,e)/(l.Z*Math.pow(2,v.tileID.overscaledZ))*2*Math.PI*h;return{u_extrude_scale:l.az(v,1,e),u_intensity:a,u_globe_extrude_scale:m}},Uh=(v,e,a,h)=>{const m=l.K();l.bQ(m,0,v.width,v.height,0,0,1);const x=v.context.gl;return{u_matrix:m,u_world:[x.drawingBufferWidth,x.drawingBufferHeight],u_image:a,u_color_ramp:h,u_opacity:e.paint.get("heatmap-opacity")}},Wd=(v,e,a)=>{const h=a.paint.get("hillshade-shadow-color"),m=a.paint.get("hillshade-highlight-color"),x=a.paint.get("hillshade-accent-color");let M=a.paint.get("hillshade-illumination-direction")*(Math.PI/180);return a.paint.get("hillshade-illumination-anchor")==="viewport"&&(M+=v.transform.bearingInRadians),{u_image:0,u_latrange:Vh(0,e.tileID),u_light:[a.paint.get("hillshade-exaggeration"),M],u_shadow:h,u_highlight:m,u_accent:x}},$o=(v,e)=>{const a=e.stride,h=l.K();return l.bQ(h,0,l.Z,-8192,0,0,1),l.L(h,h,[0,-8192,0]),{u_matrix:h,u_image:1,u_dimension:[a,a],u_zoom:v.overscaledZ,u_unpack:e.getUnpackVector()}};function Vh(v,e){const a=Math.pow(2,e.canonical.z),h=e.canonical.y;return[new l.$(0,h/a).toLngLat().lat,new l.$(0,(h+1)/a).toLngLat().lat]}const Bu=(v,e,a,h)=>{const m=v.transform;return{u_translation:$h(v,e,a),u_ratio:h/l.az(e,1,m.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Os=(v,e,a,h,m)=>l.e(Bu(v,e,a,h),{u_image:0,u_image_height:m}),Ou=(v,e,a,h,m)=>{const x=v.transform,M=ju(e,x);return{u_translation:$h(v,e,a),u_texsize:e.imageAtlasTexture.size,u_ratio:h/l.az(e,1,x.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[M,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},zc=(v,e,a,h,m,x)=>{const M=v.lineAtlas,R=ju(e,v.transform),D=a.layout.get("line-cap")==="round",j=M.getDash(m.from,D),U=M.getDash(m.to,D),$=j.width*x.fromScale,Z=U.width*x.toScale;return l.e(Bu(v,e,a,h),{u_patternscale_a:[R/$,-j.height/2],u_patternscale_b:[R/Z,-U.height/2],u_sdfgamma:M.width/(256*Math.min($,Z)*v.pixelRatio)/2,u_image:0,u_tex_y_a:j.y,u_tex_y_b:U.y,u_mix:x.t})};function ju(v,e){return 1/l.az(v,1,e.tileZoom)}function $h(v,e,a){return l.aA(v.transform,e,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}const Zh=(v,e,a,h,m)=>{return{u_tl_parent:v,u_scale_parent:e,u_buffer_scale:1,u_fade_t:a.mix,u_opacity:a.opacity*h.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:h.paint.get("raster-brightness-min"),u_brightness_high:h.paint.get("raster-brightness-max"),u_saturation_factor:(M=h.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(x=h.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:Lc(h.paint.get("raster-hue-rotate")),u_coords_top:[m[0].x,m[0].y,m[1].x,m[1].y],u_coords_bottom:[m[3].x,m[3].y,m[2].x,m[2].y]};var x,M};function Lc(v){v*=Math.PI/180;const e=Math.sin(v),a=Math.cos(v);return[(2*a+1)/3,(-Math.sqrt(3)*e-a+1)/3,(Math.sqrt(3)*e-a+1)/3]}const Nu=(v,e,a,h,m,x,M,R,D,j,U,$,Z)=>{const te=M.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:te.cameraToCenterDistance,u_pitch:te.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:te.width/te.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_label_plane_matrix:R,u_coord_matrix:D,u_is_text:+U,u_pitch_with_map:+h,u_is_along_line:m,u_is_variable_anchor:x,u_texsize:$,u_texture:0,u_translation:j,u_pitched_scale:Z}},Fu=(v,e,a,h,m,x,M,R,D,j,U,$,Z,te)=>{const re=M.transform;return l.e(Nu(v,e,a,h,m,x,M,R,D,j,U,$,te),{u_gamma_scale:h?Math.cos(re.pitch*Math.PI/180)*re.cameraToCenterDistance:1,u_device_pixel_ratio:M.pixelRatio,u_is_halo:1})},qh=(v,e,a,h,m,x,M,R,D,j,U,$,Z)=>l.e(Fu(v,e,a,h,m,x,M,R,D,j,!0,U,0,Z),{u_texsize_icon:$,u_texture_icon:1}),Uu=(v,e)=>({u_opacity:v,u_color:e}),js=(v,e,a,h,m)=>l.e(function(x,M,R,D){const j=R.imageManager.getPattern(x.from.toString()),U=R.imageManager.getPattern(x.to.toString()),{width:$,height:Z}=R.imageManager.getPixelSize(),te=Math.pow(2,D.tileID.overscaledZ),re=D.tileSize*Math.pow(2,R.transform.tileZoom)/te,fe=re*(D.tileID.canonical.x+D.tileID.wrap*te),de=re*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:j.tl,u_pattern_br_a:j.br,u_pattern_tl_b:U.tl,u_pattern_br_b:U.br,u_texsize:[$,Z],u_mix:M.t,u_pattern_size_a:j.displaySize,u_pattern_size_b:U.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/l.az(D,1,R.transform.tileZoom),u_pixel_coord_upper:[fe>>16,de>>16],u_pixel_coord_lower:[65535&fe,65535&de]}}(a,m,e,h),{u_opacity:v}),kc=(v,e)=>{},Gh={fillExtrusion:(v,e)=>({u_lightpos:new l.bL(v,e.u_lightpos),u_lightpos_globe:new l.bL(v,e.u_lightpos_globe),u_lightintensity:new l.b8(v,e.u_lightintensity),u_lightcolor:new l.bL(v,e.u_lightcolor),u_vertical_gradient:new l.b8(v,e.u_vertical_gradient),u_opacity:new l.b8(v,e.u_opacity),u_fill_translate:new l.bM(v,e.u_fill_translate)}),fillExtrusionPattern:(v,e)=>({u_lightpos:new l.bL(v,e.u_lightpos),u_lightpos_globe:new l.bL(v,e.u_lightpos_globe),u_lightintensity:new l.b8(v,e.u_lightintensity),u_lightcolor:new l.bL(v,e.u_lightcolor),u_vertical_gradient:new l.b8(v,e.u_vertical_gradient),u_height_factor:new l.b8(v,e.u_height_factor),u_opacity:new l.b8(v,e.u_opacity),u_fill_translate:new l.bM(v,e.u_fill_translate),u_image:new l.bH(v,e.u_image),u_texsize:new l.bM(v,e.u_texsize),u_pixel_coord_upper:new l.bM(v,e.u_pixel_coord_upper),u_pixel_coord_lower:new l.bM(v,e.u_pixel_coord_lower),u_scale:new l.bL(v,e.u_scale),u_fade:new l.b8(v,e.u_fade)}),fill:(v,e)=>({u_fill_translate:new l.bM(v,e.u_fill_translate)}),fillPattern:(v,e)=>({u_image:new l.bH(v,e.u_image),u_texsize:new l.bM(v,e.u_texsize),u_pixel_coord_upper:new l.bM(v,e.u_pixel_coord_upper),u_pixel_coord_lower:new l.bM(v,e.u_pixel_coord_lower),u_scale:new l.bL(v,e.u_scale),u_fade:new l.b8(v,e.u_fade),u_fill_translate:new l.bM(v,e.u_fill_translate)}),fillOutline:(v,e)=>({u_world:new l.bM(v,e.u_world),u_fill_translate:new l.bM(v,e.u_fill_translate)}),fillOutlinePattern:(v,e)=>({u_world:new l.bM(v,e.u_world),u_image:new l.bH(v,e.u_image),u_texsize:new l.bM(v,e.u_texsize),u_pixel_coord_upper:new l.bM(v,e.u_pixel_coord_upper),u_pixel_coord_lower:new l.bM(v,e.u_pixel_coord_lower),u_scale:new l.bL(v,e.u_scale),u_fade:new l.b8(v,e.u_fade),u_fill_translate:new l.bM(v,e.u_fill_translate)}),circle:(v,e)=>({u_camera_to_center_distance:new l.b8(v,e.u_camera_to_center_distance),u_scale_with_map:new l.bH(v,e.u_scale_with_map),u_pitch_with_map:new l.bH(v,e.u_pitch_with_map),u_extrude_scale:new l.bM(v,e.u_extrude_scale),u_device_pixel_ratio:new l.b8(v,e.u_device_pixel_ratio),u_globe_extrude_scale:new l.b8(v,e.u_globe_extrude_scale),u_translate:new l.bM(v,e.u_translate)}),collisionBox:(v,e)=>({u_pixel_extrude_scale:new l.bM(v,e.u_pixel_extrude_scale)}),collisionCircle:(v,e)=>({u_viewport_size:new l.bM(v,e.u_viewport_size)}),debug:(v,e)=>({u_color:new l.bI(v,e.u_color),u_overlay:new l.bH(v,e.u_overlay),u_overlay_scale:new l.b8(v,e.u_overlay_scale)}),depth:kc,clippingMask:kc,heatmap:(v,e)=>({u_extrude_scale:new l.b8(v,e.u_extrude_scale),u_intensity:new l.b8(v,e.u_intensity),u_globe_extrude_scale:new l.b8(v,e.u_globe_extrude_scale)}),heatmapTexture:(v,e)=>({u_matrix:new l.bJ(v,e.u_matrix),u_world:new l.bM(v,e.u_world),u_image:new l.bH(v,e.u_image),u_color_ramp:new l.bH(v,e.u_color_ramp),u_opacity:new l.b8(v,e.u_opacity)}),hillshade:(v,e)=>({u_image:new l.bH(v,e.u_image),u_latrange:new l.bM(v,e.u_latrange),u_light:new l.bM(v,e.u_light),u_shadow:new l.bI(v,e.u_shadow),u_highlight:new l.bI(v,e.u_highlight),u_accent:new l.bI(v,e.u_accent)}),hillshadePrepare:(v,e)=>({u_matrix:new l.bJ(v,e.u_matrix),u_image:new l.bH(v,e.u_image),u_dimension:new l.bM(v,e.u_dimension),u_zoom:new l.b8(v,e.u_zoom),u_unpack:new l.bK(v,e.u_unpack)}),line:(v,e)=>({u_translation:new l.bM(v,e.u_translation),u_ratio:new l.b8(v,e.u_ratio),u_device_pixel_ratio:new l.b8(v,e.u_device_pixel_ratio),u_units_to_pixels:new l.bM(v,e.u_units_to_pixels)}),lineGradient:(v,e)=>({u_translation:new l.bM(v,e.u_translation),u_ratio:new l.b8(v,e.u_ratio),u_device_pixel_ratio:new l.b8(v,e.u_device_pixel_ratio),u_units_to_pixels:new l.bM(v,e.u_units_to_pixels),u_image:new l.bH(v,e.u_image),u_image_height:new l.b8(v,e.u_image_height)}),linePattern:(v,e)=>({u_translation:new l.bM(v,e.u_translation),u_texsize:new l.bM(v,e.u_texsize),u_ratio:new l.b8(v,e.u_ratio),u_device_pixel_ratio:new l.b8(v,e.u_device_pixel_ratio),u_image:new l.bH(v,e.u_image),u_units_to_pixels:new l.bM(v,e.u_units_to_pixels),u_scale:new l.bL(v,e.u_scale),u_fade:new l.b8(v,e.u_fade)}),lineSDF:(v,e)=>({u_translation:new l.bM(v,e.u_translation),u_ratio:new l.b8(v,e.u_ratio),u_device_pixel_ratio:new l.b8(v,e.u_device_pixel_ratio),u_units_to_pixels:new l.bM(v,e.u_units_to_pixels),u_patternscale_a:new l.bM(v,e.u_patternscale_a),u_patternscale_b:new l.bM(v,e.u_patternscale_b),u_sdfgamma:new l.b8(v,e.u_sdfgamma),u_image:new l.bH(v,e.u_image),u_tex_y_a:new l.b8(v,e.u_tex_y_a),u_tex_y_b:new l.b8(v,e.u_tex_y_b),u_mix:new l.b8(v,e.u_mix)}),raster:(v,e)=>({u_tl_parent:new l.bM(v,e.u_tl_parent),u_scale_parent:new l.b8(v,e.u_scale_parent),u_buffer_scale:new l.b8(v,e.u_buffer_scale),u_fade_t:new l.b8(v,e.u_fade_t),u_opacity:new l.b8(v,e.u_opacity),u_image0:new l.bH(v,e.u_image0),u_image1:new l.bH(v,e.u_image1),u_brightness_low:new l.b8(v,e.u_brightness_low),u_brightness_high:new l.b8(v,e.u_brightness_high),u_saturation_factor:new l.b8(v,e.u_saturation_factor),u_contrast_factor:new l.b8(v,e.u_contrast_factor),u_spin_weights:new l.bL(v,e.u_spin_weights),u_coords_top:new l.bK(v,e.u_coords_top),u_coords_bottom:new l.bK(v,e.u_coords_bottom)}),symbolIcon:(v,e)=>({u_is_size_zoom_constant:new l.bH(v,e.u_is_size_zoom_constant),u_is_size_feature_constant:new l.bH(v,e.u_is_size_feature_constant),u_size_t:new l.b8(v,e.u_size_t),u_size:new l.b8(v,e.u_size),u_camera_to_center_distance:new l.b8(v,e.u_camera_to_center_distance),u_pitch:new l.b8(v,e.u_pitch),u_rotate_symbol:new l.bH(v,e.u_rotate_symbol),u_aspect_ratio:new l.b8(v,e.u_aspect_ratio),u_fade_change:new l.b8(v,e.u_fade_change),u_label_plane_matrix:new l.bJ(v,e.u_label_plane_matrix),u_coord_matrix:new l.bJ(v,e.u_coord_matrix),u_is_text:new l.bH(v,e.u_is_text),u_pitch_with_map:new l.bH(v,e.u_pitch_with_map),u_is_along_line:new l.bH(v,e.u_is_along_line),u_is_variable_anchor:new l.bH(v,e.u_is_variable_anchor),u_texsize:new l.bM(v,e.u_texsize),u_texture:new l.bH(v,e.u_texture),u_translation:new l.bM(v,e.u_translation),u_pitched_scale:new l.b8(v,e.u_pitched_scale)}),symbolSDF:(v,e)=>({u_is_size_zoom_constant:new l.bH(v,e.u_is_size_zoom_constant),u_is_size_feature_constant:new l.bH(v,e.u_is_size_feature_constant),u_size_t:new l.b8(v,e.u_size_t),u_size:new l.b8(v,e.u_size),u_camera_to_center_distance:new l.b8(v,e.u_camera_to_center_distance),u_pitch:new l.b8(v,e.u_pitch),u_rotate_symbol:new l.bH(v,e.u_rotate_symbol),u_aspect_ratio:new l.b8(v,e.u_aspect_ratio),u_fade_change:new l.b8(v,e.u_fade_change),u_label_plane_matrix:new l.bJ(v,e.u_label_plane_matrix),u_coord_matrix:new l.bJ(v,e.u_coord_matrix),u_is_text:new l.bH(v,e.u_is_text),u_pitch_with_map:new l.bH(v,e.u_pitch_with_map),u_is_along_line:new l.bH(v,e.u_is_along_line),u_is_variable_anchor:new l.bH(v,e.u_is_variable_anchor),u_texsize:new l.bM(v,e.u_texsize),u_texture:new l.bH(v,e.u_texture),u_gamma_scale:new l.b8(v,e.u_gamma_scale),u_device_pixel_ratio:new l.b8(v,e.u_device_pixel_ratio),u_is_halo:new l.bH(v,e.u_is_halo),u_translation:new l.bM(v,e.u_translation),u_pitched_scale:new l.b8(v,e.u_pitched_scale)}),symbolTextAndIcon:(v,e)=>({u_is_size_zoom_constant:new l.bH(v,e.u_is_size_zoom_constant),u_is_size_feature_constant:new l.bH(v,e.u_is_size_feature_constant),u_size_t:new l.b8(v,e.u_size_t),u_size:new l.b8(v,e.u_size),u_camera_to_center_distance:new l.b8(v,e.u_camera_to_center_distance),u_pitch:new l.b8(v,e.u_pitch),u_rotate_symbol:new l.bH(v,e.u_rotate_symbol),u_aspect_ratio:new l.b8(v,e.u_aspect_ratio),u_fade_change:new l.b8(v,e.u_fade_change),u_label_plane_matrix:new l.bJ(v,e.u_label_plane_matrix),u_coord_matrix:new l.bJ(v,e.u_coord_matrix),u_is_text:new l.bH(v,e.u_is_text),u_pitch_with_map:new l.bH(v,e.u_pitch_with_map),u_is_along_line:new l.bH(v,e.u_is_along_line),u_is_variable_anchor:new l.bH(v,e.u_is_variable_anchor),u_texsize:new l.bM(v,e.u_texsize),u_texsize_icon:new l.bM(v,e.u_texsize_icon),u_texture:new l.bH(v,e.u_texture),u_texture_icon:new l.bH(v,e.u_texture_icon),u_gamma_scale:new l.b8(v,e.u_gamma_scale),u_device_pixel_ratio:new l.b8(v,e.u_device_pixel_ratio),u_is_halo:new l.bH(v,e.u_is_halo),u_translation:new l.bM(v,e.u_translation),u_pitched_scale:new l.b8(v,e.u_pitched_scale)}),background:(v,e)=>({u_opacity:new l.b8(v,e.u_opacity),u_color:new l.bI(v,e.u_color)}),backgroundPattern:(v,e)=>({u_opacity:new l.b8(v,e.u_opacity),u_image:new l.bH(v,e.u_image),u_pattern_tl_a:new l.bM(v,e.u_pattern_tl_a),u_pattern_br_a:new l.bM(v,e.u_pattern_br_a),u_pattern_tl_b:new l.bM(v,e.u_pattern_tl_b),u_pattern_br_b:new l.bM(v,e.u_pattern_br_b),u_texsize:new l.bM(v,e.u_texsize),u_mix:new l.b8(v,e.u_mix),u_pattern_size_a:new l.bM(v,e.u_pattern_size_a),u_pattern_size_b:new l.bM(v,e.u_pattern_size_b),u_scale_a:new l.b8(v,e.u_scale_a),u_scale_b:new l.b8(v,e.u_scale_b),u_pixel_coord_upper:new l.bM(v,e.u_pixel_coord_upper),u_pixel_coord_lower:new l.bM(v,e.u_pixel_coord_lower),u_tile_units_to_pixels:new l.b8(v,e.u_tile_units_to_pixels)}),terrain:(v,e)=>({u_texture:new l.bH(v,e.u_texture),u_ele_delta:new l.b8(v,e.u_ele_delta),u_fog_matrix:new l.bJ(v,e.u_fog_matrix),u_fog_color:new l.bI(v,e.u_fog_color),u_fog_ground_blend:new l.b8(v,e.u_fog_ground_blend),u_fog_ground_blend_opacity:new l.b8(v,e.u_fog_ground_blend_opacity),u_horizon_color:new l.bI(v,e.u_horizon_color),u_horizon_fog_blend:new l.b8(v,e.u_horizon_fog_blend),u_is_globe_mode:new l.b8(v,e.u_is_globe_mode)}),terrainDepth:(v,e)=>({u_ele_delta:new l.b8(v,e.u_ele_delta)}),terrainCoords:(v,e)=>({u_texture:new l.bH(v,e.u_texture),u_terrain_coords_id:new l.b8(v,e.u_terrain_coords_id),u_ele_delta:new l.b8(v,e.u_ele_delta)}),projectionErrorMeasurement:(v,e)=>({u_input:new l.b8(v,e.u_input),u_output_expected:new l.b8(v,e.u_output_expected)}),atmosphere:(v,e)=>({u_sun_pos:new l.bL(v,e.u_sun_pos),u_atmosphere_blend:new l.b8(v,e.u_atmosphere_blend),u_globe_position:new l.bL(v,e.u_globe_position),u_globe_radius:new l.b8(v,e.u_globe_radius),u_inv_proj_matrix:new l.bJ(v,e.u_inv_proj_matrix)}),sky:(v,e)=>({u_sky_color:new l.bI(v,e.u_sky_color),u_horizon_color:new l.bI(v,e.u_horizon_color),u_horizon:new l.bM(v,e.u_horizon),u_horizon_normal:new l.bM(v,e.u_horizon_normal),u_sky_horizon_blend:new l.b8(v,e.u_sky_horizon_blend),u_sky_blend:new l.b8(v,e.u_sky_blend)})};class Hh{constructor(e,a,h){this.context=e;const m=e.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!h,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const a=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Kd={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Qn{constructor(e,a,h,m){this.length=a.length,this.attributes=h,this.itemSize=a.bytesPerElement,this.dynamicDraw=m,this.context=e;const x=e.gl;this.buffer=x.createBuffer(),e.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const a=this.context.gl;this.bind(),a.bufferSubData(a.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,a){for(let h=0;h<this.attributes.length;h++){const m=a.attributes[this.attributes[h].name];m!==void 0&&e.enableVertexAttribArray(m)}}setVertexAttribPointers(e,a,h){for(let m=0;m<this.attributes.length;m++){const x=this.attributes[m],M=a.attributes[x.name];M!==void 0&&e.vertexAttribPointer(M,x.components,e[Kd[x.type]],!1,this.itemSize,x.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Sr{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Bc extends Sr{getDefault(){return l.b7.transparent}set(e){const a=this.current;(e.r!==a.r||e.g!==a.g||e.b!==a.b||e.a!==a.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Yd extends Sr{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class Xd extends Sr{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class Qd extends Sr{getDefault(){return[!0,!0,!0,!0]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||e[2]!==a[2]||e[3]!==a[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Wh extends Sr{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class Jd extends Sr{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class mp extends Sr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const a=this.current;(e.func!==a.func||e.ref!==a.ref||e.mask!==a.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Zo extends Sr{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||e[2]!==a[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Ol extends Sr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST),this.current=e,this.dirty=!1}}class fo extends Sr{getDefault(){return[0,1]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class jl extends Sr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST),this.current=e,this.dirty=!1}}class Oc extends Sr{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class ma extends Sr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.BLEND):a.disable(a.BLEND),this.current=e,this.dirty=!1}}class Ya extends Sr{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class la extends Sr{getDefault(){return l.b7.transparent}set(e){const a=this.current;(e.r!==a.r||e.g!==a.g||e.b!==a.b||e.a!==a.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Kh extends Sr{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class po extends Sr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),this.current=e,this.dirty=!1}}class jc extends Sr{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class mo extends Sr{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class Vu extends Sr{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class Nc extends Sr{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class $u extends Sr{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||e[2]!==a[2]||e[3]!==a[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Fc extends Sr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class Yh extends Sr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindRenderbuffer(a.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class qo extends Sr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindTexture(a.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class Go extends Sr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Ta extends Sr{getDefault(){return null}set(e){const a=this.gl;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class ua extends Sr{getDefault(){return null}set(e){var a;if(e===this.current&&!this.dirty)return;const h=this.gl;Dn(h)?h.bindVertexArray(e):(a=h.getExtension("OES_vertex_array_object"))===null||a===void 0||a.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class Pr extends Sr{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Nl extends Sr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class Uc extends Sr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Ho extends Sr{constructor(e,a){super(e),this.context=e,this.parent=a}getDefault(){return null}}class Wo extends Ho{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class go extends Ho{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class ef extends Ho{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,e),this.current=e,this.dirty=!1}}const Fl="Framebuffer is not complete";class Ul{constructor(e,a,h,m,x){this.context=e,this.width=a,this.height=h;const M=e.gl,R=this.framebuffer=M.createFramebuffer();if(this.colorAttachment=new Wo(e,R),m)this.depthAttachment=x?new ef(e,R):new go(e,R);else if(x)throw new Error("Stencil cannot be set without depth");if(M.checkFramebufferStatus(M.FRAMEBUFFER)!==M.FRAMEBUFFER_COMPLETE)throw new Error(Fl)}destroy(){const e=this.context.gl,a=this.colorAttachment.get();if(a&&e.deleteTexture(a),this.depthAttachment){const h=this.depthAttachment.get();h&&e.deleteRenderbuffer(h)}e.deleteFramebuffer(this.framebuffer)}}class Vc{constructor(e){var a,h;if(this.gl=e,this.clearColor=new Bc(this),this.clearDepth=new Yd(this),this.clearStencil=new Xd(this),this.colorMask=new Qd(this),this.depthMask=new Wh(this),this.stencilMask=new Jd(this),this.stencilFunc=new mp(this),this.stencilOp=new Zo(this),this.stencilTest=new Ol(this),this.depthRange=new fo(this),this.depthTest=new jl(this),this.depthFunc=new Oc(this),this.blend=new ma(this),this.blendFunc=new Ya(this),this.blendColor=new la(this),this.blendEquation=new Kh(this),this.cullFace=new po(this),this.cullFaceSide=new jc(this),this.frontFace=new mo(this),this.program=new Vu(this),this.activeTexture=new Nc(this),this.viewport=new $u(this),this.bindFramebuffer=new Fc(this),this.bindRenderbuffer=new Yh(this),this.bindTexture=new qo(this),this.bindVertexBuffer=new Go(this),this.bindElementBuffer=new Ta(this),this.bindVertexArray=new ua(this),this.pixelStoreUnpack=new Pr(this),this.pixelStoreUnpackPremultiplyAlpha=new Nl(this),this.pixelStoreUnpackFlipY=new Uc(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),Dn(e)){this.HALF_FLOAT=e.HALF_FLOAT;const m=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(a=e.RGBA16F)!==null&&a!==void 0?a:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(h=e.RGB16F)!==null&&h!==void 0?h:m==null?void 0:m.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const m=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,a){return new Hh(this,e,a)}createVertexBuffer(e,a,h){return new Qn(this,e,a,h)}createRenderbuffer(e,a,h){const m=this.gl,x=m.createRenderbuffer();return this.bindRenderbuffer.set(x),m.renderbufferStorage(m.RENDERBUFFER,e,a,h),this.bindRenderbuffer.set(null),x}createFramebuffer(e,a,h,m){return new Ul(this,e,a,h,m)}clear({color:e,depth:a,stencil:h}){const m=this.gl;let x=0;e&&(x|=m.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(x|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),h!==void 0&&(x|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(h),this.stencilMask.set(255)),m.clear(x)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){l.bE(e.blendFunction,Wr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return Dn(this.gl)?this.gl.createVertexArray():(e=this.gl.getExtension("OES_vertex_array_object"))===null||e===void 0?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var a;return Dn(this.gl)?this.gl.deleteVertexArray(e):(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}let bn;function vs(v,e,a,h,m){const x=v.context,M=v.transform,R=x.gl,D=v.useProgram("collisionBox"),j=[];let U=0,$=0;for(let ge=0;ge<h.length;ge++){const ve=h[ge],Ae=e.getTile(ve).getBucket(a);if(!Ae)continue;const Ee=m?Ae.textCollisionBox:Ae.iconCollisionBox,Pe=Ae.collisionCircleArray;Pe.length>0&&(j.push({circleArray:Pe,circleOffset:$,coord:ve}),U+=Pe.length/4,$=U),Ee&&D.draw(x,R.LINES,hr.disabled,Lr.disabled,v.colorModeForRenderPass(),$r.disabled,Fh(v.transform),v.style.map.terrain&&v.style.map.terrain.getTerrainData(ve),M.getProjectionData({overscaledTileID:ve,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),a.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,null,v.transform.zoom,null,null,Ee.collisionVertexBuffer)}if(!m||!j.length)return;const Z=v.useProgram("collisionCircle"),te=new l.bR;te.resize(4*U),te._trim();let re=0;for(const ge of j)for(let ve=0;ve<ge.circleArray.length/4;ve++){const Ae=4*ve,Ee=ge.circleArray[Ae+0],Pe=ge.circleArray[Ae+1],Le=ge.circleArray[Ae+2],Ie=ge.circleArray[Ae+3];te.emplace(re++,Ee,Pe,Le,Ie,0),te.emplace(re++,Ee,Pe,Le,Ie,1),te.emplace(re++,Ee,Pe,Le,Ie,2),te.emplace(re++,Ee,Pe,Le,Ie,3)}(!bn||bn.length<2*U)&&(bn=function(ge){const ve=2*ge,Ae=new l.bT;Ae.resize(ve),Ae._trim();for(let Ee=0;Ee<ve;Ee++){const Pe=6*Ee;Ae.uint16[Pe+0]=4*Ee+0,Ae.uint16[Pe+1]=4*Ee+1,Ae.uint16[Pe+2]=4*Ee+2,Ae.uint16[Pe+3]=4*Ee+2,Ae.uint16[Pe+4]=4*Ee+3,Ae.uint16[Pe+5]=4*Ee+0}return Ae}(U));const fe=x.createIndexBuffer(bn,!0),de=x.createVertexBuffer(te,l.bS.members,!0);for(const ge of j){const ve=Ic(v.transform);Z.draw(x,R.TRIANGLES,hr.disabled,Lr.disabled,v.colorModeForRenderPass(),$r.disabled,ve,v.style.map.terrain&&v.style.map.terrain.getTerrainData(ge.coord),null,a.id,de,fe,l.aJ.simpleSegment(0,2*ge.circleOffset,ge.circleArray.length,ge.circleArray.length/2),null,v.transform.zoom,null,null,null)}de.destroy(),fe.destroy()}const yo=l.ad(new Float32Array(16));function Vl(v,e,a,h,m,x){const{horizontalAlign:M,verticalAlign:R}=l.aE(v);return new l.P((-(M-.5)*e/m+h[0])*x,(-(R-.5)*a/m+h[1])*x)}function Zu(v,e,a,h,m,x){const M=e.tileAnchorPoint.add(new l.P(e.translation[0],e.translation[1]));if(e.pitchWithMap){let R=h.mult(x);a||(R=R.rotate(-m));const D=M.add(R);return Wt(D.x,D.y,e.pitchedLabelPlaneMatrix,e.getElevation).point}if(a){const R=si(e.tileAnchorPoint.x+1,e.tileAnchorPoint.y,e).point.sub(v),D=Math.atan(R.y/R.x)+(R.x<0?Math.PI:0);return v.add(h.rotate(D))}return v.add(h)}function Jn(v,e,a,h,m,x,M,R,D,j,U,$){const Z=v.text.placedSymbolArray,te=v.text.dynamicLayoutVertexArray,re=v.icon.dynamicLayoutVertexArray,fe={};te.clear();for(let de=0;de<Z.length;de++){const ge=Z.get(de),ve=ge.hidden||!ge.crossTileID||v.allowVerticalPlacement&&!ge.placedOrientation?null:h[ge.crossTileID];if(ve){const Ae=new l.P(ge.anchorX,ge.anchorY),Ee={getElevation:$,width:m.width,height:m.height,pitchedLabelPlaneMatrix:x,pitchWithMap:a,transform:m,tileAnchorPoint:Ae,translation:j,unwrappedTileID:U},Pe=a?Za(Ae.x,Ae.y,Ee):si(Ae.x,Ae.y,Ee),Le=vr(m.cameraToCenterDistance,Pe.signedDistanceFromCamera);let Ie=l.am(v.textSizeData,R,ge)*Le/l.ay;a&&(Ie*=v.tilePixelRatio/M);const{width:$e,height:He,anchor:at,textOffset:ot,textBoxScale:rt}=ve,It=Vl(at,$e,He,ot,rt,Ie),Tt=m.getPitchedTextCorrection(Ae.x+j[0],Ae.y+j[1],U),pt=Zu(Pe.point,Ee,e,It,-m.bearingInRadians,Tt),Vt=v.allowVerticalPlacement&&ge.placedOrientation===l.al.vertical?Math.PI/2:0;for(let gr=0;gr<ge.numGlyphs;gr++)l.as(te,pt,Vt);D&&ge.associatedIconIndex>=0&&(fe[ge.associatedIconIndex]={shiftedAnchor:pt,angle:Vt})}else bi(ge.numGlyphs,te)}if(D){re.clear();const de=v.icon.placedSymbolArray;for(let ge=0;ge<de.length;ge++){const ve=de.get(ge);if(ve.hidden)bi(ve.numGlyphs,re);else{const Ae=fe[ge];if(Ae)for(let Ee=0;Ee<ve.numGlyphs;Ee++)l.as(re,Ae.shiftedAnchor,Ae.angle);else bi(ve.numGlyphs,re)}}v.icon.dynamicLayoutVertexBuffer.updateData(re)}v.text.dynamicLayoutVertexBuffer.updateData(te)}function ea(v,e,a){return a.iconsInText&&e?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function xs(v,e,a,h,m,x,M,R,D,j,U,$,Z){const te=v.context,re=te.gl,fe=v.transform,de=R==="map",ge=D==="map",ve=R!=="viewport"&&a.layout.get("symbol-placement")!=="point",Ae=de&&!ge&&!ve,Ee=!a.layout.get("symbol-sort-key").isConstant();let Pe=!1;const Le=v.getDepthModeForSublayer(0,hr.ReadOnly),Ie=a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"),$e=[],He=fe.getCircleRadiusCorrection();for(const at of h){const ot=e.getTile(at),rt=ot.getBucket(a);if(!rt)continue;const It=m?rt.text:rt.icon;if(!It||!It.segments.get().length||!It.hasVisibleVertices)continue;const Tt=It.programConfigurations.get(a.id),pt=m||rt.sdfIcons,Vt=m?rt.textSizeData:rt.iconSizeData,gr=ge||fe.pitch!==0,tr=v.useProgram(ea(pt,m,rt),Tt),fi=l.ak(Vt,fe.zoom),Kr=v.style.map.terrain&&v.style.map.terrain.getTerrainData(at);let _i,pi,Dr,kr,Ti=[0,0],Mi=null;if(m)pi=ot.glyphAtlasTexture,Dr=re.LINEAR,_i=ot.glyphAtlasTexture.size,rt.iconsInText&&(Ti=ot.imageAtlasTexture.size,Mi=ot.imageAtlasTexture,kr=gr||v.options.rotating||v.options.zooming||Vt.kind==="composite"||Vt.kind==="camera"?re.LINEAR:re.NEAREST);else{const Ai=a.layout.get("icon-size").constantOr(0)!==1||rt.iconsNeedLinear;pi=ot.imageAtlasTexture,Dr=pt||v.options.rotating||v.options.zooming||Ai||gr?re.LINEAR:re.NEAREST,_i=ot.imageAtlasTexture.size}const fn=l.az(ot,1,v.transform.zoom),Sn=Ft(de,v.transform,fn),ts=l.K();l.an(ts,Sn);const Gs=lr(ge,de,v.transform,fn),ra=l.aA(fe,ot,x,M),Da=fe.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),rs=Ie&&rt.hasTextData(),To=a.layout.get("icon-text-fit")!=="none"&&rs&&rt.hasIconData();if(ve){const Ai=v.style.map.terrain?(Oi,Mr)=>v.style.map.terrain.getElevation(at,Oi,Mr):null,vi=a.layout.get("text-rotation-alignment")==="map";Er(rt,v,m,Sn,ts,ge,j,vi,at.toUnwrapped(),fe.width,fe.height,ra,Ai)}const Mo=m&&Ie||To,qn=ve||Mo?yo:ge?Sn:v.transform.clipSpaceToPixelsMatrix,Hs=pt&&a.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let is;is=pt?rt.iconsInText?qh(Vt.kind,fi,Ae,ge,ve,Mo,v,qn,Gs,ra,_i,Ti,He):Fu(Vt.kind,fi,Ae,ge,ve,Mo,v,qn,Gs,ra,m,_i,0,He):Nu(Vt.kind,fi,Ae,ge,ve,Mo,v,qn,Gs,ra,m,_i,He);const Cs={program:tr,buffers:It,uniformValues:is,projectionData:Da,atlasTexture:pi,atlasTextureIcon:Mi,atlasInterpolation:Dr,atlasInterpolationIcon:kr,isSDF:pt,hasHalo:Hs};if(Ee&&rt.canOverlap){Pe=!0;const Ai=It.segments.get();for(const vi of Ai)$e.push({segments:new l.aJ([vi]),sortKey:vi.sortKey,state:Cs,terrainData:Kr})}else $e.push({segments:It.segments,sortKey:0,state:Cs,terrainData:Kr})}Pe&&$e.sort((at,ot)=>at.sortKey-ot.sortKey);for(const at of $e){const ot=at.state;if(te.activeTexture.set(re.TEXTURE0),ot.atlasTexture.bind(ot.atlasInterpolation,re.CLAMP_TO_EDGE),ot.atlasTextureIcon&&(te.activeTexture.set(re.TEXTURE1),ot.atlasTextureIcon&&ot.atlasTextureIcon.bind(ot.atlasInterpolationIcon,re.CLAMP_TO_EDGE)),ot.isSDF){const rt=ot.uniformValues;ot.hasHalo&&(rt.u_is_halo=1,bs(ot.buffers,at.segments,a,v,ot.program,Le,U,$,rt,ot.projectionData,at.terrainData)),rt.u_is_halo=0}bs(ot.buffers,at.segments,a,v,ot.program,Le,U,$,ot.uniformValues,ot.projectionData,at.terrainData)}}function bs(v,e,a,h,m,x,M,R,D,j,U){const $=h.context;m.draw($,$.gl.TRIANGLES,x,M,R,$r.backCCW,D,U,j,a.id,v.layoutVertexBuffer,v.indexBuffer,e,a.paint,h.transform.zoom,v.programConfigurations.get(a.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function Xa(v,e,a,h,m){const x=v.context,M=x.gl,R=Lr.disabled,D=new Wr([M.ONE,M.ONE],l.b7.transparent,[!0,!0,!0,!0]),j=e.getBucket(a);if(!j)return;const U=h.key;let $=a.heatmapFbos.get(U);$||($=$c(x,e.tileSize,e.tileSize),a.heatmapFbos.set(U,$)),x.bindFramebuffer.set($.framebuffer),x.viewport.set([0,0,e.tileSize,e.tileSize]),x.clear({color:l.b7.transparent});const Z=j.programConfigurations.get(a.id),te=v.useProgram("heatmap",Z,!m),re=v.transform.getProjectionData({overscaledTileID:e.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),fe=v.style.map.terrain.getTerrainData(h);te.draw(x,M.TRIANGLES,hr.disabled,R,D,$r.disabled,ho(e,v.transform.zoom,a.paint.get("heatmap-intensity"),1),fe,re,a.id,j.layoutVertexBuffer,j.indexBuffer,j.segments,a.paint,v.transform.zoom,Z)}function Ko(v,e,a,h,m){const x=v.context,M=x.gl,R=v.transform;x.setColorMode(v.colorModeForRenderPass());const D=Yo(x,e),j=a.key,U=e.heatmapFbos.get(j);if(!U)return;x.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,U.colorAttachment.get()),x.activeTexture.set(M.TEXTURE1),D.bind(M.LINEAR,M.CLAMP_TO_EDGE);const $=R.getProjectionData({overscaledTileID:a,applyTerrainMatrix:m,applyGlobeMatrix:!h});v.useProgram("heatmapTexture").draw(x,M.TRIANGLES,hr.disabled,Lr.disabled,v.colorModeForRenderPass(),$r.disabled,Uh(v,e,0,1),null,$,e.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments,e.paint,R.zoom),U.destroy(),e.heatmapFbos.delete(j)}function $c(v,e,a){var h,m;const x=v.gl,M=x.createTexture();x.bindTexture(x.TEXTURE_2D,M),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.LINEAR);const R=(h=v.HALF_FLOAT)!==null&&h!==void 0?h:x.UNSIGNED_BYTE,D=(m=v.RGBA16F)!==null&&m!==void 0?m:x.RGBA;x.texImage2D(x.TEXTURE_2D,0,D,e,a,0,x.RGBA,R,null);const j=v.createFramebuffer(e,a,!1,!1);return j.colorAttachment.set(M),j}function Yo(v,e){return e.colorRampTexture||(e.colorRampTexture=new Ke(v,e.colorRamp,v.gl.RGBA)),e.colorRampTexture}function $l(v,e,a,h,m){if(!a||!h||!h.imageAtlas)return;const x=h.imageAtlas.patternPositions;let M=x[a.to.toString()],R=x[a.from.toString()];if(!M&&R&&(M=R),!R&&M&&(R=M),!M||!R){const D=m.getPaintProperty(e);M=x[D],R=x[D]}M&&R&&v.setConstantPatternPositions(M,R)}function zn(v,e,a,h,m,x,M,R){const D=v.context.gl,j="fill-pattern",U=a.paint.get(j),$=U&&U.constantOr(1),Z=a.getCrossfadeParameters();let te,re,fe,de,ge;const ve=v.transform,Ae=a.paint.get("fill-translate"),Ee=a.paint.get("fill-translate-anchor");M?(re=$&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",te=D.LINES):(re=$?"fillPattern":"fill",te=D.TRIANGLES);const Pe=U.constantOr(null);for(const Le of h){const Ie=e.getTile(Le);if($&&!Ie.patternsLoaded())continue;const $e=Ie.getBucket(a);if(!$e)continue;const He=$e.programConfigurations.get(a.id),at=v.useProgram(re,He),ot=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Le);$&&(v.context.activeTexture.set(D.TEXTURE0),Ie.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),He.updatePaintBuffers(Z)),$l(He,j,Pe,Ie,a);const rt=ve.getProjectionData({overscaledTileID:Le,applyGlobeMatrix:!R,applyTerrainMatrix:!0}),It=l.aA(ve,Ie,Ae,Ee);if(M){de=$e.indexBuffer2,ge=$e.segments2;const pt=[D.drawingBufferWidth,D.drawingBufferHeight];fe=re==="fillOutlinePattern"&&$?Nh(v,Z,Ie,pt,It):pp(pt,It)}else de=$e.indexBuffer,ge=$e.segments,fe=$?Ka(v,Z,Ie,It):{u_fill_translate:It};let Tt;if(v.renderPass==="translucent"&&R){const[pt]=v.getStencilConfigForOverlapAndUpdateStencilID(h);Tt=pt[Le.overscaledZ]}else Tt=v.stencilModeForClipping(Le);at.draw(v.context,te,m,Tt,x,$r.backCCW,fe,ot,rt,a.id,$e.layoutVertexBuffer,de,ge,a.paint,v.transform.zoom,He)}}function tn(v,e,a,h,m,x,M,R){const D=v.context,j=D.gl,U="fill-extrusion-pattern",$=a.paint.get(U),Z=$.constantOr(1),te=a.getCrossfadeParameters(),re=a.paint.get("fill-extrusion-opacity"),fe=$.constantOr(null),de=v.transform;for(const ge of h){const ve=e.getTile(ge),Ae=ve.getBucket(a);if(!Ae)continue;const Ee=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ge),Pe=Ae.programConfigurations.get(a.id),Le=v.useProgram(Z?"fillExtrusionPattern":"fillExtrusion",Pe);Z&&(v.context.activeTexture.set(j.TEXTURE0),ve.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),Pe.updatePaintBuffers(te));const Ie=de.getProjectionData({overscaledTileID:ge,applyGlobeMatrix:!R,applyTerrainMatrix:!0});$l(Pe,U,fe,ve,a);const $e=l.aA(de,ve,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),He=a.paint.get("fill-extrusion-vertical-gradient"),at=Z?jh(v,He,re,$e,ge,te,ve):ku(v,He,re,$e);Le.draw(D,D.gl.TRIANGLES,m,x,M,$r.backCCW,at,Ee,Ie,a.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,a.paint,v.transform.zoom,Pe,v.style.map.terrain&&Ae.centroidVertexBuffer)}}function jr(v,e,a,h,m,x,M,R,D){var j;const U=v.style.projection,$=v.context,Z=v.transform,te=$.gl,re=v.useProgram("hillshade"),fe=!v.options.moving;for(const de of h){const ge=e.getTile(de),ve=ge.fbo;if(!ve)continue;const Ae=U.getMeshFromTileID($,de.canonical,R,!0,"raster"),Ee=(j=v.style.map.terrain)===null||j===void 0?void 0:j.getTerrainData(de);$.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_2D,ve.colorAttachment.get());const Pe=Z.getProjectionData({overscaledTileID:de,aligned:fe,applyGlobeMatrix:!D,applyTerrainMatrix:!0});re.draw($,te.TRIANGLES,x,m[de.overscaledZ],M,$r.backCCW,Wd(v,ge,a),Ee,Pe,a.id,Ae.vertexBuffer,Ae.indexBuffer,Ae.segments)}}const ta=[new l.P(0,0),new l.P(l.Z,0),new l.P(l.Z,l.Z),new l.P(0,l.Z)];function ga(v,e,a,h,m,x,M,R,D=!1,j=!1){const U=h[h.length-1].overscaledZ,$=v.context,Z=$.gl,te=v.useProgram("raster"),re=v.transform,fe=v.style.projection,de=v.colorModeForRenderPass(),ge=!v.options.moving;for(const ve of h){const Ae=v.getDepthModeForSublayer(ve.overscaledZ-U,a.paint.get("raster-opacity")===1?hr.ReadWrite:hr.ReadOnly,Z.LESS),Ee=e.getTile(ve);Ee.registerFadeDuration(a.paint.get("raster-fade-duration"));const Pe=e.findLoadedParent(ve,0),Le=e.findLoadedSibling(ve),Ie=Zc(Ee,Pe||Le||null,e,a,v.transform,v.style.map.terrain);let $e,He;const at=a.paint.get("raster-resampling")==="nearest"?Z.NEAREST:Z.LINEAR;$.activeTexture.set(Z.TEXTURE0),Ee.texture.bind(at,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),$.activeTexture.set(Z.TEXTURE1),Pe?(Pe.texture.bind(at,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),$e=Math.pow(2,Pe.tileID.overscaledZ-Ee.tileID.overscaledZ),He=[Ee.tileID.canonical.x*$e%1,Ee.tileID.canonical.y*$e%1]):Ee.texture.bind(at,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),Ee.texture.useMipmap&&$.extTextureFilterAnisotropic&&v.transform.pitch>20&&Z.texParameterf(Z.TEXTURE_2D,$.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,$.extTextureFilterAnisotropicMax);const ot=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ve),rt=re.getProjectionData({overscaledTileID:ve,aligned:ge,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),It=Zh(He||[0,0],$e||1,Ie,a,R),Tt=fe.getMeshFromTileID($,ve.canonical,x,M,"raster");te.draw($,Z.TRIANGLES,Ae,m?m[ve.overscaledZ]:Lr.disabled,de,D?$r.frontCCW:$r.backCCW,It,ot,rt,a.id,Tt.vertexBuffer,Tt.indexBuffer,Tt.segments)}}function Zc(v,e,a,h,m,x){const M=h.paint.get("raster-fade-duration");if(!x&&M>0){const R=L.now(),D=(R-v.timeAdded)/M,j=e?(R-e.timeAdded)/M:-1,U=a.getSource(),$=Ve(m,{tileSize:U.tileSize,roundZoom:U.roundZoom}),Z=!e||Math.abs(e.tileID.overscaledZ-$)>Math.abs(v.tileID.overscaledZ-$),te=Z&&v.refreshedUponExpiration?1:l.ae(Z?D:1-j,0,1);return v.refreshedUponExpiration&&D>=1&&(v.refreshedUponExpiration=!1),e?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}const ui=new l.b7(1,0,0,1),_o=new l.b7(0,1,0,1),ya=new l.b7(0,0,1,1),Xo=new l.b7(1,0,1,1),Qo=new l.b7(0,1,1,1);function Jo(v,e,a,h){Ns(v,0,e+a/2,v.transform.width,a,h)}function Qa(v,e,a,h){Ns(v,e-a/2,0,a,v.transform.height,h)}function Ns(v,e,a,h,m,x){const M=v.context,R=M.gl;R.enable(R.SCISSOR_TEST),R.scissor(e*v.pixelRatio,a*v.pixelRatio,h*v.pixelRatio,m*v.pixelRatio),M.clear({color:x}),R.disable(R.SCISSOR_TEST)}function qu(v,e,a){const h=v.context,m=h.gl,x=v.useProgram("debug"),M=hr.disabled,R=Lr.disabled,D=v.colorModeForRenderPass(),j="$debug",U=v.style.map.terrain&&v.style.map.terrain.getTerrainData(a);h.activeTexture.set(m.TEXTURE0);const $=e.getTileByID(a.key).latestRawTileData,Z=Math.floor(($&&$.byteLength||0)/1024),te=e.getTile(a).tileSize,re=512/Math.min(te,512)*(a.overscaledZ/v.transform.zoom)*.5;let fe=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(fe+=` => ${a.overscaledZ}`),function(ge,ve){ge.initDebugOverlayCanvas();const Ae=ge.debugOverlayCanvas,Ee=ge.context.gl,Pe=ge.debugOverlayCanvas.getContext("2d");Pe.clearRect(0,0,Ae.width,Ae.height),Pe.shadowColor="white",Pe.shadowBlur=2,Pe.lineWidth=1.5,Pe.strokeStyle="white",Pe.textBaseline="top",Pe.font="bold 36px Open Sans, sans-serif",Pe.fillText(ve,5,5),Pe.strokeText(ve,5,5),ge.debugOverlayTexture.update(Ae),ge.debugOverlayTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE)}(v,`${fe} ${Z}kB`);const de=v.transform.getProjectionData({overscaledTileID:a,applyGlobeMatrix:!0,applyTerrainMatrix:!0});x.draw(h,m.TRIANGLES,M,R,Wr.alphaBlended,$r.disabled,Dc(l.b7.transparent,re),null,de,j,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),x.draw(h,m.LINE_STRIP,M,R,D,$r.disabled,Dc(l.b7.red),U,de,j,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function qc(v,e,a,h){const{isRenderingGlobe:m}=h,x=v.context,M=x.gl,R=v.transform,D=v.colorModeForRenderPass(),j=v.getDepthModeFor3D(),U=v.useProgram("terrain");x.bindFramebuffer.set(null),x.viewport.set([0,0,v.width,v.height]);for(const $ of a){const Z=e.getTerrainMesh($.tileID),te=v.renderToTexture.getTexture($),re=e.getTerrainData($.tileID);x.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,te.texture);const fe=e.getMeshFrameDelta(R.zoom),de=R.calculateFogMatrix($.tileID.toUnwrapped()),ge=fp(fe,de,v.style.sky,R.pitch,m),ve=R.getProjectionData({overscaledTileID:$.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});U.draw(x,M.TRIANGLES,j,Lr.disabled,D,$r.backCCW,ge,re,ve,"terrain",Z.vertexBuffer,Z.indexBuffer,Z.segments)}}function Zl(v,e){if(!e.mesh){const a=new l.aI;a.emplaceBack(-1,-1),a.emplaceBack(1,-1),a.emplaceBack(1,1),a.emplaceBack(-1,1);const h=new l.aK;h.emplaceBack(0,1,2),h.emplaceBack(0,2,3),e.mesh=new No(v.createVertexBuffer(a,Ga.members),v.createIndexBuffer(h),l.aJ.simpleSegment(0,0,a.length,h.length))}return e.mesh}class Xh{constructor(e,a){this.context=new Vc(e),this.transform=a,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ue.maxUnderzooming+Ue.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ys}resize(e,a,h){if(this.width=Math.floor(e*h),this.height=Math.floor(a*h),this.pixelRatio=h,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const e=this.context,a=new l.aI;a.emplaceBack(0,0),a.emplaceBack(l.Z,0),a.emplaceBack(0,l.Z),a.emplaceBack(l.Z,l.Z),this.tileExtentBuffer=e.createVertexBuffer(a,Ga.members),this.tileExtentSegments=l.aJ.simpleSegment(0,0,4,2);const h=new l.aI;h.emplaceBack(0,0),h.emplaceBack(l.Z,0),h.emplaceBack(0,l.Z),h.emplaceBack(l.Z,l.Z),this.debugBuffer=e.createVertexBuffer(h,Ga.members),this.debugSegments=l.aJ.simpleSegment(0,0,4,5);const m=new l.bY;m.emplaceBack(0,0,0,0),m.emplaceBack(l.Z,0,l.Z,0),m.emplaceBack(0,l.Z,0,l.Z),m.emplaceBack(l.Z,l.Z,l.Z,l.Z),this.rasterBoundsBuffer=e.createVertexBuffer(m,Bh.members),this.rasterBoundsSegments=l.aJ.simpleSegment(0,0,4,2);const x=new l.aI;x.emplaceBack(0,0),x.emplaceBack(l.Z,0),x.emplaceBack(0,l.Z),x.emplaceBack(l.Z,l.Z),this.rasterBoundsBufferPosOnly=e.createVertexBuffer(x,Ga.members),this.rasterBoundsSegmentsPosOnly=l.aJ.simpleSegment(0,0,4,5);const M=new l.aI;M.emplaceBack(0,0),M.emplaceBack(1,0),M.emplaceBack(0,1),M.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(M,Ga.members),this.viewportSegments=l.aJ.simpleSegment(0,0,4,2);const R=new l.bZ;R.emplaceBack(0),R.emplaceBack(1),R.emplaceBack(3),R.emplaceBack(2),R.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(R);const D=new l.aK;D.emplaceBack(1,0,2),D.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(D);const j=this.context.gl;this.stencilClearMode=new Lr({func:j.ALWAYS,mask:0},0,255,j.ZERO,j.ZERO,j.ZERO),this.tileExtentMesh=new No(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const e=this.context,a=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const h=l.K();l.bQ(h,0,this.width,this.height,0,0,1),l.M(h,h,[a.drawingBufferWidth,a.drawingBufferHeight,0]);const m={mainMatrix:h,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:h};this.useProgram("clippingMask",null,!0).draw(e,a.TRIANGLES,hr.disabled,this.stencilClearMode,Wr.disabled,$r.disabled,null,null,m,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,a,h){if(this.currentStencilSource===e.source||!e.isTileClipped()||!a||!a.length)return;this.currentStencilSource=e.source,this.nextStencilID+a.length>256&&this.clearStencil();const m=this.context;m.setColorMode(Wr.disabled),m.setDepthMode(hr.disabled);const x={};for(const M of a)x[M.key]=this.nextStencilID++;this._renderTileMasks(x,a,h,!0),this._renderTileMasks(x,a,h,!1),this._tileClippingMaskIDs=x}_renderTileMasks(e,a,h,m){const x=this.context,M=x.gl,R=this.style.projection,D=this.transform,j=this.useProgram("clippingMask");for(const U of a){const $=e[U.key],Z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(U),te=R.getMeshFromTileID(this.context,U.canonical,m,!0,"stencil"),re=D.getProjectionData({overscaledTileID:U,applyGlobeMatrix:!0,applyTerrainMatrix:!0});j.draw(x,M.TRIANGLES,hr.disabled,new Lr({func:M.ALWAYS,mask:0},$,255,M.KEEP,M.KEEP,M.REPLACE),Wr.disabled,h?$r.disabled:$r.backCCW,null,Z,re,"$clipping",te.vertexBuffer,te.indexBuffer,te.segments)}}_renderTilesDepthBuffer(){const e=this.context,a=e.gl,h=this.style.projection,m=this.transform,x=this.useProgram("depth"),M=this.getDepthModeFor3D(),R=Ce(m,{tileSize:m.tileSize});for(const D of R){const j=this.style.map.terrain&&this.style.map.terrain.getTerrainData(D),U=h.getMeshFromTileID(this.context,D.canonical,!0,!0,"raster"),$=m.getProjectionData({overscaledTileID:D,applyGlobeMatrix:!0,applyTerrainMatrix:!0});x.draw(e,a.TRIANGLES,M,Lr.disabled,Wr.disabled,$r.backCCW,null,j,$,"$clipping",U.vertexBuffer,U.indexBuffer,U.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,a=this.context.gl;return new Lr({func:a.NOTEQUAL,mask:255},e,255,a.KEEP,a.KEEP,a.REPLACE)}stencilModeForClipping(e){const a=this.context.gl;return new Lr({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,a.KEEP,a.KEEP,a.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(e){const a=this.context.gl,h=e.sort((M,R)=>R.overscaledZ-M.overscaledZ),m=h[h.length-1].overscaledZ,x=h[0].overscaledZ-m+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const M={};for(let R=0;R<x;R++)M[R+m]=new Lr({func:a.GEQUAL,mask:255},R+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=x,[M,h]}return[{[m]:Lr.disabled},h]}stencilConfigForOverlapTwoPass(e){const a=this.context.gl,h=e.sort((M,R)=>R.overscaledZ-M.overscaledZ),m=h[h.length-1].overscaledZ,x=h[0].overscaledZ-m+1;if(this.clearStencil(),x>1){const M={},R={};for(let D=0;D<x;D++)M[D+m]=new Lr({func:a.GREATER,mask:255},x+1+D,255,a.KEEP,a.KEEP,a.REPLACE),R[D+m]=new Lr({func:a.GREATER,mask:255},1+D,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID=2*x+1,[M,R,h]}return this.nextStencilID=3,[{[m]:new Lr({func:a.GREATER,mask:255},2,255,a.KEEP,a.KEEP,a.REPLACE)},{[m]:new Lr({func:a.GREATER,mask:255},1,255,a.KEEP,a.KEEP,a.REPLACE)},h]}colorModeForRenderPass(){const e=this.context.gl;return this._showOverdrawInspector?new Wr([e.CONSTANT_COLOR,e.ONE],new l.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Wr.unblended:Wr.alphaBlended}getDepthModeForSublayer(e,a,h){if(!this.opaquePassEnabledForLayer())return hr.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new hr(h||this.context.gl.LEQUAL,a,[m,m])}getDepthModeFor3D(){return new hr(this.context.gl.LEQUAL,hr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,a){var h,m;this.style=e,this.options=a,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(L.now()),this.imageManager.beginFrame();const x=this.style._order,M=this.style.sourceCaches,R={},D={},j={},U={isRenderingToTexture:!1,isRenderingGlobe:((h=e.projection)===null||h===void 0?void 0:h.transitionState)>0};for(const Z in M){const te=M[Z];te.used&&te.prepare(this.context),R[Z]=te.getVisibleCoordinates(!1),D[Z]=R[Z].slice().reverse(),j[Z]=te.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Z=0;Z<x.length;Z++)if(this.style._layers[x[Z]].is3D()){this.opaquePassCutoff=Z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Z of x){const te=this.style._layers[Z];if(!te.hasOffscreenPass()||te.isHidden(this.transform.zoom))continue;const re=D[te.source];(te.type==="custom"||re.length)&&this.renderLayer(this,M[te.source],te,re,U)}if((m=this.style.projection)===null||m===void 0||m.updateGPUdependent({context:this.context,useProgram:Z=>this.useProgram(Z)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:a.showOverdrawInspector?l.b7.black:l.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Z,te){const re=Z.context,fe=re.gl,de=((Le,Ie,$e)=>{const He=Math.cos(Ie.rollInRadians),at=Math.sin(Ie.rollInRadians),ot=je(Ie),rt=Ie.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Le.properties.get("sky-color"),u_horizon_color:Le.properties.get("horizon-color"),u_horizon:[(Ie.width/2-ot*at)*$e,(Ie.height/2+ot*He)*$e],u_horizon_normal:[-at,He],u_sky_horizon_blend:Le.properties.get("sky-horizon-blend")*Ie.height/2*$e,u_sky_blend:rt}})(te,Z.style.map.transform,Z.pixelRatio),ge=new hr(fe.LEQUAL,hr.ReadWrite,[0,1]),ve=Lr.disabled,Ae=Z.colorModeForRenderPass(),Ee=Z.useProgram("sky"),Pe=Zl(re,te);Ee.draw(re,fe.TRIANGLES,ge,ve,Ae,$r.disabled,de,null,void 0,"sky",Pe.vertexBuffer,Pe.indexBuffer,Pe.segments)}(this,this.style.sky),this._showOverdrawInspector=a.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=x.length-1;this.currentLayer>=0;this.currentLayer--){const Z=this.style._layers[x[this.currentLayer]],te=M[Z.source],re=R[Z.source];this._renderTileClippingMasks(Z,re,!1),this.renderLayer(this,te,Z,re,U)}this.renderPass="translucent";let $=!1;for(this.currentLayer=0;this.currentLayer<x.length;this.currentLayer++){const Z=this.style._layers[x[this.currentLayer]],te=M[Z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Z,U))continue;this.opaquePassEnabledForLayer()||$||($=!0,U.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const re=(Z.type==="symbol"?j:D)[Z.source];this._renderTileClippingMasks(Z,R[Z.source],!1),this.renderLayer(this,te,Z,re,U)}if(U.isRenderingGlobe&&function(Z,te,re){const fe=Z.context,de=fe.gl,ge=Z.useProgram("atmosphere"),ve=new hr(de.LEQUAL,hr.ReadOnly,[0,1]),Ae=Z.transform,Ee=function(rt,It){const Tt=rt.properties.get("position"),pt=[-Tt.x,-Tt.y,-Tt.z],Vt=l.ad(new Float64Array(16));return rt.properties.get("anchor")==="map"&&(l.a_(Vt,Vt,It.rollInRadians),l.a$(Vt,Vt,-It.pitchInRadians),l.a_(Vt,Vt,It.bearingInRadians),l.a$(Vt,Vt,It.center.lat*Math.PI/180),l.bp(Vt,Vt,-It.center.lng*Math.PI/180)),l.bX(pt,pt,Vt),pt}(re,Z.transform),Pe=Ae.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Le=te.properties.get("atmosphere-blend")*Pe.projectionTransition;if(Le===0)return;const Ie=Cc(Ae.worldSize,Ae.center.lat),$e=Ae.inverseProjectionMatrix,He=new Float64Array(4);He[3]=1,l.at(He,He,Ae.modelViewProjectionMatrix),He[0]/=He[3],He[1]/=He[3],He[2]/=He[3],He[3]=1,l.at(He,He,$e),He[0]/=He[3],He[1]/=He[3],He[2]/=He[3],He[3]=1;const at=((rt,It,Tt,pt,Vt)=>({u_sun_pos:rt,u_atmosphere_blend:It,u_globe_position:Tt,u_globe_radius:pt,u_inv_proj_matrix:Vt}))(Ee,Le,[He[0],He[1],He[2]],Ie,$e),ot=Zl(fe,te);ge.draw(fe,de.TRIANGLES,ve,Lr.disabled,Wr.alphaBlended,$r.disabled,at,null,null,"atmosphere",ot.vertexBuffer,ot.indexBuffer,ot.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Z=function(te,re){let fe=null;const de=Object.values(te._layers).flatMap(Ee=>Ee.source&&!Ee.isHidden(re)?[te.sourceCaches[Ee.source]]:[]),ge=de.filter(Ee=>Ee.getSource().type==="vector"),ve=de.filter(Ee=>Ee.getSource().type!=="vector"),Ae=Ee=>{(!fe||fe.getSource().maxzoom<Ee.getSource().maxzoom)&&(fe=Ee)};return ge.forEach(Ee=>Ae(Ee)),fe||ve.forEach(Ee=>Ae(Ee)),fe}(this.style,this.transform.zoom);Z&&function(te,re,fe){for(let de=0;de<fe.length;de++)qu(te,re,fe[de])}(this,Z,Z.getVisibleCoordinates())}this.options.showPadding&&function(Z){const te=Z.transform.padding;Jo(Z,Z.transform.height-(te.top||0),3,ui),Jo(Z,te.bottom||0,3,_o),Qa(Z,te.left||0,3,ya),Qa(Z,Z.transform.width-(te.right||0),3,Xo);const re=Z.transform.centerPoint;(function(fe,de,ge,ve){Ns(fe,de-1,ge-10,2,20,ve),Ns(fe,de-10,ge-1,20,2,ve)})(Z,re.x,Z.transform.height-re.y,Qo)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const a=this.terrainFacilitator.matrix,h=this.transform.modelViewProjectionMatrix;let m=this.terrainFacilitator.dirty;m||(m=e?!l.b_(a,h):!l.b$(a,h)),m||(m=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),m&&(l.c0(a,h),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(x,M){const R=x.context,D=R.gl,j=x.transform,U=Wr.unblended,$=new hr(D.LEQUAL,hr.ReadWrite,[0,1]),Z=M.sourceCache.getRenderableTiles(),te=x.useProgram("terrainDepth");R.bindFramebuffer.set(M.getFramebuffer("depth").framebuffer),R.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),R.clear({color:l.b7.transparent,depth:1});for(const re of Z){const fe=M.getTerrainMesh(re.tileID),de=M.getTerrainData(re.tileID),ge=j.getProjectionData({overscaledTileID:re.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ve={u_ele_delta:M.getMeshFrameDelta(j.zoom)};te.draw(R,D.TRIANGLES,$,Lr.disabled,U,$r.backCCW,ve,de,ge,"terrain",fe.vertexBuffer,fe.indexBuffer,fe.segments)}R.bindFramebuffer.set(null),R.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain),function(x,M){const R=x.context,D=R.gl,j=x.transform,U=Wr.unblended,$=new hr(D.LEQUAL,hr.ReadWrite,[0,1]),Z=M.getCoordsTexture(),te=M.sourceCache.getRenderableTiles(),re=x.useProgram("terrainCoords");R.bindFramebuffer.set(M.getFramebuffer("coords").framebuffer),R.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),R.clear({color:l.b7.transparent,depth:1}),M.coordsIndex=[];for(const fe of te){const de=M.getTerrainMesh(fe.tileID),ge=M.getTerrainData(fe.tileID);R.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,Z.texture);const ve={u_terrain_coords_id:(255-M.coordsIndex.length)/255,u_texture:0,u_ele_delta:M.getMeshFrameDelta(j.zoom)},Ae=j.getProjectionData({overscaledTileID:fe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});re.draw(R,D.TRIANGLES,$,Lr.disabled,U,$r.backCCW,ve,ge,Ae,"terrain",de.vertexBuffer,de.indexBuffer,de.segments),M.coordsIndex.push(fe.tileID.key)}R.bindFramebuffer.set(null),R.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain))}renderLayer(e,a,h,m,x){h.isHidden(this.transform.zoom)||(h.type==="background"||h.type==="custom"||(m||[]).length)&&(this.id=h.id,l.c1(h)?function(M,R,D,j,U,$){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=$,te=Lr.disabled,re=M.colorModeForRenderPass();(D._unevaluatedLayout.hasValue("text-variable-anchor")||D._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(fe,de,ge,ve,Ae,Ee,Pe,Le,Ie){const $e=de.transform,He=de.style.map.terrain,at=Ae==="map",ot=Ee==="map";for(const rt of fe){const It=ve.getTile(rt),Tt=It.getBucket(ge);if(!Tt||!Tt.text||!Tt.text.segments.get().length)continue;const pt=l.ak(Tt.textSizeData,$e.zoom),Vt=l.az(It,1,de.transform.zoom),gr=Ft(at,de.transform,Vt),tr=ge.layout.get("icon-text-fit")!=="none"&&Tt.hasIconData();if(pt){const fi=Math.pow(2,$e.zoom-It.tileID.overscaledZ),Kr=He?(_i,pi)=>He.getElevation(rt,_i,pi):null;Jn(Tt,at,ot,Ie,$e,gr,fi,pt,tr,l.aA($e,It,Pe,Le),rt.toUnwrapped(),Kr)}}}(j,M,D,R,D.layout.get("text-rotation-alignment"),D.layout.get("text-pitch-alignment"),D.paint.get("text-translate"),D.paint.get("text-translate-anchor"),U),D.paint.get("icon-opacity").constantOr(1)!==0&&xs(M,R,D,j,!1,D.paint.get("icon-translate"),D.paint.get("icon-translate-anchor"),D.layout.get("icon-rotation-alignment"),D.layout.get("icon-pitch-alignment"),D.layout.get("icon-keep-upright"),te,re,Z),D.paint.get("text-opacity").constantOr(1)!==0&&xs(M,R,D,j,!0,D.paint.get("text-translate"),D.paint.get("text-translate-anchor"),D.layout.get("text-rotation-alignment"),D.layout.get("text-pitch-alignment"),D.layout.get("text-keep-upright"),te,re,Z),R.map.showCollisionBoxes&&(vs(M,R,D,j,!0),vs(M,R,D,j,!1))}(e,a,h,m,this.style.placement.variableOffsets,x):l.c2(h)?function(M,R,D,j,U){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:$}=U,Z=D.paint.get("circle-opacity"),te=D.paint.get("circle-stroke-width"),re=D.paint.get("circle-stroke-opacity"),fe=!D.layout.get("circle-sort-key").isConstant();if(Z.constantOr(1)===0&&(te.constantOr(1)===0||re.constantOr(1)===0))return;const de=M.context,ge=de.gl,ve=M.transform,Ae=M.getDepthModeForSublayer(0,hr.ReadOnly),Ee=Lr.disabled,Pe=M.colorModeForRenderPass(),Le=[],Ie=ve.getCircleRadiusCorrection();for(let $e=0;$e<j.length;$e++){const He=j[$e],at=R.getTile(He),ot=at.getBucket(D);if(!ot)continue;const rt=D.paint.get("circle-translate"),It=D.paint.get("circle-translate-anchor"),Tt=l.aA(ve,at,rt,It),pt=ot.programConfigurations.get(D.id),Vt=M.useProgram("circle",pt),gr=ot.layoutVertexBuffer,tr=ot.indexBuffer,fi=M.style.map.terrain&&M.style.map.terrain.getTerrainData(He),Kr={programConfiguration:pt,program:Vt,layoutVertexBuffer:gr,indexBuffer:tr,uniformValues:Hd(M,at,D,Tt,Ie),terrainData:fi,projectionData:ve.getProjectionData({overscaledTileID:He,applyGlobeMatrix:!$,applyTerrainMatrix:!0})};if(fe){const _i=ot.segments.get();for(const pi of _i)Le.push({segments:new l.aJ([pi]),sortKey:pi.sortKey,state:Kr})}else Le.push({segments:ot.segments,sortKey:0,state:Kr})}fe&&Le.sort(($e,He)=>$e.sortKey-He.sortKey);for(const $e of Le){const{programConfiguration:He,program:at,layoutVertexBuffer:ot,indexBuffer:rt,uniformValues:It,terrainData:Tt,projectionData:pt}=$e.state;at.draw(de,ge.TRIANGLES,Ae,Ee,Pe,$r.backCCW,It,Tt,pt,D.id,ot,rt,$e.segments,D.paint,M.transform.zoom,He)}}(e,a,h,m,x):l.c3(h)?function(M,R,D,j,U){if(D.paint.get("heatmap-opacity")===0)return;const $=M.context,{isRenderingToTexture:Z,isRenderingGlobe:te}=U;if(M.style.map.terrain){for(const re of j){const fe=R.getTile(re);R.hasRenderableParent(re)||(M.renderPass==="offscreen"?Xa(M,fe,D,re,te):M.renderPass==="translucent"&&Ko(M,D,re,Z,te))}$.viewport.set([0,0,M.width,M.height])}else M.renderPass==="offscreen"?function(re,fe,de,ge){const ve=re.context,Ae=ve.gl,Ee=re.transform,Pe=Lr.disabled,Le=new Wr([Ae.ONE,Ae.ONE],l.b7.transparent,[!0,!0,!0,!0]);(function(Ie,$e,He){const at=Ie.gl;Ie.activeTexture.set(at.TEXTURE1),Ie.viewport.set([0,0,$e.width/4,$e.height/4]);let ot=He.heatmapFbos.get(l.bU);ot?(at.bindTexture(at.TEXTURE_2D,ot.colorAttachment.get()),Ie.bindFramebuffer.set(ot.framebuffer)):(ot=$c(Ie,$e.width/4,$e.height/4),He.heatmapFbos.set(l.bU,ot))})(ve,re,de),ve.clear({color:l.b7.transparent});for(let Ie=0;Ie<ge.length;Ie++){const $e=ge[Ie];if(fe.hasRenderableParent($e))continue;const He=fe.getTile($e),at=He.getBucket(de);if(!at)continue;const ot=at.programConfigurations.get(de.id),rt=re.useProgram("heatmap",ot),It=Ee.getProjectionData({overscaledTileID:$e,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Tt=Ee.getCircleRadiusCorrection();rt.draw(ve,Ae.TRIANGLES,hr.disabled,Pe,Le,$r.backCCW,ho(He,Ee.zoom,de.paint.get("heatmap-intensity"),Tt),null,It,de.id,at.layoutVertexBuffer,at.indexBuffer,at.segments,de.paint,Ee.zoom,ot)}ve.viewport.set([0,0,re.width,re.height])}(M,R,D,j):M.renderPass==="translucent"&&function(re,fe){const de=re.context,ge=de.gl;de.setColorMode(re.colorModeForRenderPass());const ve=fe.heatmapFbos.get(l.bU);ve&&(de.activeTexture.set(ge.TEXTURE0),ge.bindTexture(ge.TEXTURE_2D,ve.colorAttachment.get()),de.activeTexture.set(ge.TEXTURE1),Yo(de,fe).bind(ge.LINEAR,ge.CLAMP_TO_EDGE),re.useProgram("heatmapTexture").draw(de,ge.TRIANGLES,hr.disabled,Lr.disabled,re.colorModeForRenderPass(),$r.disabled,Uh(re,fe,0,1),null,null,fe.id,re.viewportBuffer,re.quadTriangleIndexBuffer,re.viewportSegments,fe.paint,re.transform.zoom))}(M,D)}(e,a,h,m,x):l.c4(h)?function(M,R,D,j,U){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:$}=U,Z=D.paint.get("line-opacity"),te=D.paint.get("line-width");if(Z.constantOr(1)===0||te.constantOr(1)===0)return;const re=M.getDepthModeForSublayer(0,hr.ReadOnly),fe=M.colorModeForRenderPass(),de=D.paint.get("line-dasharray"),ge=D.paint.get("line-pattern"),ve=ge.constantOr(1),Ae=D.paint.get("line-gradient"),Ee=D.getCrossfadeParameters(),Pe=ve?"linePattern":de?"lineSDF":Ae?"lineGradient":"line",Le=M.context,Ie=Le.gl,$e=M.transform;let He=!0;for(const at of j){const ot=R.getTile(at);if(ve&&!ot.patternsLoaded())continue;const rt=ot.getBucket(D);if(!rt)continue;const It=rt.programConfigurations.get(D.id),Tt=M.context.program.get(),pt=M.useProgram(Pe,It),Vt=He||pt.program!==Tt,gr=M.style.map.terrain&&M.style.map.terrain.getTerrainData(at),tr=ge.constantOr(null);if(tr&&ot.imageAtlas){const Dr=ot.imageAtlas,kr=Dr.patternPositions[tr.to.toString()],Ti=Dr.patternPositions[tr.from.toString()];kr&&Ti&&It.setConstantPatternPositions(kr,Ti)}const fi=$e.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),Kr=$e.getPixelScale(),_i=ve?Ou(M,ot,D,Kr,Ee):de?zc(M,ot,D,Kr,de,Ee):Ae?Os(M,ot,D,Kr,rt.lineClipsArray.length):Bu(M,ot,D,Kr);if(ve)Le.activeTexture.set(Ie.TEXTURE0),ot.imageAtlasTexture.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE),It.updatePaintBuffers(Ee);else if(de&&(Vt||M.lineAtlas.dirty))Le.activeTexture.set(Ie.TEXTURE0),M.lineAtlas.bind(Le);else if(Ae){const Dr=rt.gradients[D.id];let kr=Dr.texture;if(D.gradientVersion!==Dr.version){let Ti=256;if(D.stepInterpolant){const Mi=R.getSource().maxzoom,fn=at.canonical.z===Mi?Math.ceil(1<<M.transform.maxZoom-at.canonical.z):1;Ti=l.ae(l.bV(rt.maxLineLength/l.Z*1024*fn),256,Le.maxTextureSize)}Dr.gradient=l.bW({expression:D.gradientExpression(),evaluationKey:"lineProgress",resolution:Ti,image:Dr.gradient||void 0,clips:rt.lineClipsArray}),Dr.texture?Dr.texture.update(Dr.gradient):Dr.texture=new Ke(Le,Dr.gradient,Ie.RGBA),Dr.version=D.gradientVersion,kr=Dr.texture}Le.activeTexture.set(Ie.TEXTURE0),kr.bind(D.stepInterpolant?Ie.NEAREST:Ie.LINEAR,Ie.CLAMP_TO_EDGE)}let pi;if($){const[Dr]=M.getStencilConfigForOverlapAndUpdateStencilID(j);pi=Dr[at.overscaledZ]}else pi=M.stencilModeForClipping(at);pt.draw(Le,Ie.TRIANGLES,re,pi,fe,$r.disabled,_i,gr,fi,D.id,rt.layoutVertexBuffer,rt.indexBuffer,rt.segments,D.paint,M.transform.zoom,It,rt.layoutVertexBuffer2),He=!1}}(e,a,h,m,x):l.c5(h)?function(M,R,D,j,U){const $=D.paint.get("fill-color"),Z=D.paint.get("fill-opacity");if(Z.constantOr(1)===0)return;const{isRenderingToTexture:te}=U,re=M.colorModeForRenderPass(),fe=D.paint.get("fill-pattern"),de=M.opaquePassEnabledForLayer()&&!fe.constantOr(1)&&$.constantOr(l.b7.transparent).a===1&&Z.constantOr(0)===1?"opaque":"translucent";if(M.renderPass===de){const ge=M.getDepthModeForSublayer(1,M.renderPass==="opaque"?hr.ReadWrite:hr.ReadOnly);zn(M,R,D,j,ge,re,!1,te)}if(M.renderPass==="translucent"&&D.paint.get("fill-antialias")){const ge=M.getDepthModeForSublayer(D.getPaintProperty("fill-outline-color")?2:0,hr.ReadOnly);zn(M,R,D,j,ge,re,!0,te)}}(e,a,h,m,x):l.c6(h)?function(M,R,D,j,U){const $=D.paint.get("fill-extrusion-opacity");if($===0)return;const{isRenderingToTexture:Z}=U;if(M.renderPass==="translucent"){const te=new hr(M.context.gl.LEQUAL,hr.ReadWrite,M.depthRangeFor3D);if($!==1||D.paint.get("fill-extrusion-pattern").constantOr(1))tn(M,R,D,j,te,Lr.disabled,Wr.disabled,Z),tn(M,R,D,j,te,M.stencilModeFor3D(),M.colorModeForRenderPass(),Z);else{const re=M.colorModeForRenderPass();tn(M,R,D,j,te,Lr.disabled,re,Z)}}}(e,a,h,m,x):l.c7(h)?function(M,R,D,j,U){if(M.renderPass!=="offscreen"&&M.renderPass!=="translucent")return;const{isRenderingToTexture:$}=U,Z=M.context,te=M.style.projection.useSubdivision,re=M.getDepthModeForSublayer(0,hr.ReadOnly),fe=M.colorModeForRenderPass();if(M.renderPass==="offscreen")(function(de,ge,ve,Ae,Ee,Pe,Le){const Ie=de.context,$e=Ie.gl;for(const He of ve){const at=ge.getTile(He),ot=at.dem;if(!ot||!ot.data||!at.needsHillshadePrepare)continue;const rt=ot.dim,It=ot.stride,Tt=ot.getPixels();if(Ie.activeTexture.set($e.TEXTURE1),Ie.pixelStoreUnpackPremultiplyAlpha.set(!1),at.demTexture=at.demTexture||de.getTileTexture(It),at.demTexture){const Vt=at.demTexture;Vt.update(Tt,{premultiply:!1}),Vt.bind($e.NEAREST,$e.CLAMP_TO_EDGE)}else at.demTexture=new Ke(Ie,Tt,$e.RGBA,{premultiply:!1}),at.demTexture.bind($e.NEAREST,$e.CLAMP_TO_EDGE);Ie.activeTexture.set($e.TEXTURE0);let pt=at.fbo;if(!pt){const Vt=new Ke(Ie,{width:rt,height:rt,data:null},$e.RGBA);Vt.bind($e.LINEAR,$e.CLAMP_TO_EDGE),pt=at.fbo=Ie.createFramebuffer(rt,rt,!0,!1),pt.colorAttachment.set(Vt.texture)}Ie.bindFramebuffer.set(pt.framebuffer),Ie.viewport.set([0,0,rt,rt]),de.useProgram("hillshadePrepare").draw(Ie,$e.TRIANGLES,Ee,Pe,Le,$r.disabled,$o(at.tileID,ot),null,null,Ae.id,de.rasterBoundsBuffer,de.quadTriangleIndexBuffer,de.rasterBoundsSegments),at.needsHillshadePrepare=!1}})(M,R,j,D,re,Lr.disabled,fe),Z.viewport.set([0,0,M.width,M.height]);else if(M.renderPass==="translucent")if(te){const[de,ge,ve]=M.stencilConfigForOverlapTwoPass(j);jr(M,R,D,ve,de,re,fe,!1,$),jr(M,R,D,ve,ge,re,fe,!0,$)}else{const[de,ge]=M.getStencilConfigForOverlapAndUpdateStencilID(j);jr(M,R,D,ge,de,re,fe,!1,$)}}(e,a,h,m,x):l.c8(h)?function(M,R,D,j,U){if(M.renderPass!=="translucent"||D.paint.get("raster-opacity")===0||!j.length)return;const{isRenderingToTexture:$}=U,Z=R.getSource(),te=M.style.projection.useSubdivision;if(Z instanceof We)ga(M,R,D,j,null,!1,!1,Z.tileCoords,Z.flippedWindingOrder,$);else if(te){const[re,fe,de]=M.stencilConfigForOverlapTwoPass(j);ga(M,R,D,de,re,!1,!0,ta,!1,$),ga(M,R,D,de,fe,!0,!0,ta,!1,$)}else{const[re,fe]=M.getStencilConfigForOverlapAndUpdateStencilID(j);ga(M,R,D,fe,re,!1,!0,ta,!1,$)}}(e,a,h,m,x):l.c9(h)?function(M,R,D,j,U){const $=D.paint.get("background-color"),Z=D.paint.get("background-opacity");if(Z===0)return;const{isRenderingToTexture:te}=U,re=M.context,fe=re.gl,de=M.style.projection,ge=M.transform,ve=ge.tileSize,Ae=D.paint.get("background-pattern");if(M.isPatternMissing(Ae))return;const Ee=!Ae&&$.a===1&&Z===1&&M.opaquePassEnabledForLayer()?"opaque":"translucent";if(M.renderPass!==Ee)return;const Pe=Lr.disabled,Le=M.getDepthModeForSublayer(0,Ee==="opaque"?hr.ReadWrite:hr.ReadOnly),Ie=M.colorModeForRenderPass(),$e=M.useProgram(Ae?"backgroundPattern":"background"),He=j||Ce(ge,{tileSize:ve,terrain:M.style.map.terrain});Ae&&(re.activeTexture.set(fe.TEXTURE0),M.imageManager.bind(M.context));const at=D.getCrossfadeParameters();for(const ot of He){const rt=ge.getProjectionData({overscaledTileID:ot,applyGlobeMatrix:!te,applyTerrainMatrix:!0}),It=Ae?js(Z,M,Ae,{tileID:ot,tileSize:ve},at):Uu(Z,$),Tt=M.style.map.terrain&&M.style.map.terrain.getTerrainData(ot),pt=de.getMeshFromTileID(re,ot.canonical,!1,!0,"raster");$e.draw(re,fe.TRIANGLES,Le,Pe,Ie,$r.backCCW,It,Tt,rt,D.id,pt.vertexBuffer,pt.indexBuffer,pt.segments)}}(e,0,h,m,x):l.ca(h)&&function(M,R,D,j){const{isRenderingGlobe:U}=j,$=M.context,Z=D.implementation,te=M.style.projection,re=M.transform,fe=re.getProjectionDataForCustomLayer(U),de={farZ:re.farZ,nearZ:re.nearZ,fov:re.fov*Math.PI/180,modelViewProjectionMatrix:re.modelViewProjectionMatrix,projectionMatrix:re.projectionMatrix,shaderData:{variantName:te.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${te.shaderPreludeCode.vertexSource}`,define:te.shaderDefine},defaultProjectionData:fe},ge=Z.renderingMode?Z.renderingMode:"2d";if(M.renderPass==="offscreen"){const ve=Z.prerender;ve&&(M.setCustomLayerDefaults(),$.setColorMode(M.colorModeForRenderPass()),ve.call(Z,$.gl,de),$.setDirty(),M.setBaseState())}else if(M.renderPass==="translucent"){M.setCustomLayerDefaults(),$.setColorMode(M.colorModeForRenderPass()),$.setStencilMode(Lr.disabled);const ve=ge==="3d"?M.getDepthModeFor3D():M.getDepthModeForSublayer(0,hr.ReadOnly);$.setDepthMode(ve),Z.render($.gl,de),$.setDirty(),M.setBaseState(),$.bindFramebuffer.set(null)}}(e,0,h,x))}saveTileTexture(e){const a=this._tileTextures[e.size[0]];a?a.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const a=this._tileTextures[e];return a&&a.length>0?a.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const a=this.imageManager.getPattern(e.from.toString()),h=this.imageManager.getPattern(e.to.toString());return!a||!h}useProgram(e,a,h=!1){this.cache=this.cache||{};const m=!!this.style.map.terrain,x=this.style.projection,M=e+(a?a.cacheKey:"")+`/${h?Nn:x.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(m?"/terrain":"");return this.cache[M]||(this.cache[M]=new Lu(this.context,cr[e],a,Gh[e],this._showOverdrawInspector,m,h?cr.projectionMercator:x.shaderPreludeCode,h?jn:x.shaderDefine)),this.cache[M]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ke(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:a}=this.context.gl;return this.width!==e||this.height!==a}}function el(v,e){let a,h=!1,m=null,x=null;const M=()=>{m=null,h&&(v.apply(x,a),m=setTimeout(M,e),h=!1)};return(...R)=>(h=!0,x=this,a=R,m||M(),m)}class Gc{constructor(e){this._getCurrentHash=()=>{const a=window.location.hash.replace("#","");if(this._hashName){let h;return a.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(h=m)}),(h&&h[1]||"").split("/")}return a.split("/")},this._onHashChange=()=>{const a=this._getCurrentHash();if(!this._isValidHash(a))return!1;const h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(a[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:h,pitch:+(a[4]||0)}),!0},this._updateHashUnthrottled=()=>{const a=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,a)},this._removeHash=()=>{const a=this._getCurrentHash();if(a.length===0)return;const h=a.join("/");let m=h;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${h}`);let x=window.location.hash.replace(m,"");x.startsWith("#&")?x=x.slice(0,1)+x.slice(2):x==="#"&&(x="");let M=window.location.href.replace(/(#.+)?$/,x);M=M.replace("&&","&"),window.history.replaceState(window.history.state,null,M)},this._updateHash=el(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const a=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,m=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,m),M=Math.round(a.lng*x)/x,R=Math.round(a.lat*x)/x,D=this._map.getBearing(),j=this._map.getPitch();let U="";if(U+=e?`/${M}/${R}/${h}`:`${h}/${R}/${M}`,(D||j)&&(U+="/"+Math.round(10*D)/10),j&&(U+=`/${Math.round(j)}`),this._hashName){const $=this._hashName;let Z=!1;const te=window.location.hash.slice(1).split("&").map(re=>{const fe=re.split("=")[0];return fe===$?(Z=!0,`${fe}=${U}`):re}).filter(re=>re);return Z||te.push(`${$}=${U}`),`#${te.join("&")}`}return`#${U}`}_isValidHash(e){if(e.length<3||e.some(isNaN))return!1;try{new l.Q(+e[2],+e[1])}catch{return!1}const a=+e[0],h=+(e[3]||0),m=+(e[4]||0);return a>=this._map.getMinZoom()&&a<=this._map.getMaxZoom()&&h>=-180&&h<=180&&m>=this._map.getMinPitch()&&m<=this._map.getMaxPitch()}}const $n={linearity:.3,easing:l.cb(0,0,.3,1)},ql=l.e({deceleration:2500,maxSpeed:1400},$n),Gu=l.e({deceleration:20,maxSpeed:1400},$n),Gl=l.e({deceleration:1e3,maxSpeed:360},$n),Hu=l.e({deceleration:1e3,maxSpeed:90},$n),Qh=l.e({deceleration:1e3,maxSpeed:360},$n);class Jh{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:L.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,a=L.now();for(;e.length>0&&a-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const a={zoom:0,bearing:0,pitch:0,roll:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)a.zoom+=x.zoomDelta||0,a.bearing+=x.bearingDelta||0,a.pitch+=x.pitchDelta||0,a.roll+=x.rollDelta||0,x.panDelta&&a.pan._add(x.panDelta),x.around&&(a.around=x.around),x.pinchAround&&(a.pinchAround=x.pinchAround);const h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(a.pan.mag()){const x=Fs(a.pan.mag(),h,l.e({},ql,e||{})),M=a.pan.mult(x.amount/a.pan.mag()),R=this._map.cameraHelper.handlePanInertia(M,this._map.transform);m.center=R.easingCenter,m.offset=R.easingOffset,Ma(m,x)}if(a.zoom){const x=Fs(a.zoom,h,Gu);m.zoom=this._map.transform.zoom+x.amount,Ma(m,x)}if(a.bearing){const x=Fs(a.bearing,h,Gl);m.bearing=this._map.transform.bearing+l.ae(x.amount,-179,179),Ma(m,x)}if(a.pitch){const x=Fs(a.pitch,h,Hu);m.pitch=this._map.transform.pitch+x.amount,Ma(m,x)}if(a.roll){const x=Fs(a.roll,h,Qh);m.roll=this._map.transform.roll+l.ae(x.amount,-179,179),Ma(m,x)}if(m.zoom||m.bearing){const x=a.pinchAround===void 0?a.around:a.pinchAround;m.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),l.e(m,{noMoveStart:!0})}}function Ma(v,e){(!v.duration||v.duration<e.duration)&&(v.duration=e.duration,v.easing=e.easing)}function Fs(v,e,a){const{maxSpeed:h,linearity:m,deceleration:x}=a,M=l.ae(v*m/(e/1e3),-h,h),R=Math.abs(M)/(x*m);return{easing:a.easing,duration:1e3*R,amount:M*(R/2)}}class hn extends l.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,a,h,m={}){h=h instanceof MouseEvent?h:new MouseEvent(e,h);const x=F.mousePos(a.getCanvas(),h),M=a.unproject(x);super(e,l.e({point:x,lngLat:M,originalEvent:h},m)),this._defaultPrevented=!1,this.target=a}}class wn extends l.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,a,h){const m=e==="touchend"?h.changedTouches:h.touches,x=F.touchPos(a.getCanvasContainer(),m),M=x.map(D=>a.unproject(D)),R=x.reduce((D,j,U,$)=>D.add(j.div($.length)),new l.P(0,0));super(e,{points:x,point:R,lngLats:M,lngLat:a.unproject(R),originalEvent:h}),this._defaultPrevented=!1}}class Aa extends l.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,a,h){super(e,{originalEvent:h}),this._defaultPrevented=!1}}class Hc{constructor(e,a){this._map=e,this._clickTolerance=a.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new Aa(e.type,this._map,e))}mousedown(e,a){return this._mousedownPos=a,this._firePreventable(new hn(e.type,this._map,e))}mouseup(e){this._map.fire(new hn(e.type,this._map,e))}click(e,a){this._mousedownPos&&this._mousedownPos.dist(a)>=this._clickTolerance||this._map.fire(new hn(e.type,this._map,e))}dblclick(e){return this._firePreventable(new hn(e.type,this._map,e))}mouseover(e){this._map.fire(new hn(e.type,this._map,e))}mouseout(e){this._map.fire(new hn(e.type,this._map,e))}touchstart(e){return this._firePreventable(new wn(e.type,this._map,e))}touchmove(e){this._map.fire(new wn(e.type,this._map,e))}touchend(e){this._map.fire(new wn(e.type,this._map,e))}touchcancel(e){this._map.fire(new wn(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ca{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new hn(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new hn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new hn(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Xi{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.screenPointToLocation(l.P.convert(e),this._map.terrain)}}class Ja{constructor(e,a){this._map=e,this._tr=new Xi(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=a.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,a){this.isEnabled()&&e.shiftKey&&e.button===0&&(F.disableDrag(),this._startPos=this._lastPos=a,this._active=!0)}mousemoveWindow(e,a){if(!this._active)return;const h=a;if(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=h,this._box||(this._box=F.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const x=Math.min(m.x,h.x),M=Math.max(m.x,h.x),R=Math.min(m.y,h.y),D=Math.max(m.y,h.y);F.setTransform(this._box,`translate(${x}px,${R}px)`),this._box.style.width=M-x+"px",this._box.style.height=D-R+"px"}mouseupWindow(e,a){if(!this._active||e.button!==0)return;const h=this._startPos,m=a;if(this.reset(),F.suppressClick(),h.x!==m.x||h.y!==m.y)return this._map.fire(new l.l("boxzoomend",{originalEvent:e})),{cameraAnimation:x=>x.fitScreenCoordinates(h,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(F.remove(this._box),this._box=null),F.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,a){return this._map.fire(new l.l(e,{originalEvent:a}))}}function ws(v,e){if(v.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${e.length}`);const a={};for(let h=0;h<v.length;h++)a[v[h].identifier]=e[h];return a}class tf{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,a,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=e.timeStamp),h.length===this.numTouches&&(this.centroid=function(m){const x=new l.P(0,0);for(const M of m)x._add(M);return x.div(m.length)}(a),this.touches=ws(h,a)))}touchmove(e,a,h){if(this.aborted||!this.centroid)return;const m=ws(h,a);for(const x in this.touches){const M=m[x];(!M||M.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(e,a,h){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class Ss{constructor(e){this.singleTap=new tf(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,a,h){this.singleTap.touchstart(e,a,h)}touchmove(e,a,h){this.singleTap.touchmove(e,a,h)}touchend(e,a,h){const m=this.singleTap.touchend(e,a,h);if(m){const x=e.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(m)<30;if(x&&M||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Ts{constructor(e){this._tr=new Xi(e),this._zoomIn=new Ss({numTouches:1,numTaps:2}),this._zoomOut=new Ss({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,a,h){this._zoomIn.touchstart(e,a,h),this._zoomOut.touchstart(e,a,h)}touchmove(e,a,h){this._zoomIn.touchmove(e,a,h),this._zoomOut.touchmove(e,a,h)}touchend(e,a,h){const m=this._zoomIn.touchend(e,a,h),x=this._zoomOut.touchend(e,a,h),M=this._tr;return m?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:M.zoom+1,around:M.unproject(m)},{originalEvent:e})}):x?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:M.zoom-1,around:M.unproject(x)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class di{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const a=this._moveFunction(...e);if(a.bearingDelta||a.pitchDelta||a.rollDelta||a.around||a.panDelta)return this._active=!0,a}dragStart(e,a){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=Array.isArray(a)?a[0]:a,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,a){if(!this.isEnabled())return;const h=this._lastPoint;if(!h)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const m=Array.isArray(a)?a[0]:a;return!this._moved&&m.dist(h)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(h,m))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&F.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Ea={0:1,2:2};class Bt{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const a=F.mouseButton(e);this._eventButton=a}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(a,h){const m=Ea[h];return a.buttons===void 0||(a.buttons&m)!==m}(e,this._eventButton)}isValidEndEvent(e){return F.mouseButton(e)===this._eventButton}}class rf{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return e.targetTouches.length===1}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}class ed{constructor(e=new Bt({checkCorrectEvent:()=>!0}),a=new rf){this.mouseMoveStateManager=e,this.oneFingerTouchMoveStateManager=a}_executeRelevantHandler(e,a,h){return e instanceof MouseEvent?a(e):typeof TouchEvent<"u"&&e instanceof TouchEvent?h(e):void 0}startMove(e){this._executeRelevantHandler(e,a=>this.mouseMoveStateManager.startMove(a),a=>this.oneFingerTouchMoveStateManager.startMove(a))}endMove(e){this._executeRelevantHandler(e,a=>this.mouseMoveStateManager.endMove(a),a=>this.oneFingerTouchMoveStateManager.endMove(a))}isValidStartEvent(e){return this._executeRelevantHandler(e,a=>this.mouseMoveStateManager.isValidStartEvent(a),a=>this.oneFingerTouchMoveStateManager.isValidStartEvent(a))}isValidMoveEvent(e){return this._executeRelevantHandler(e,a=>this.mouseMoveStateManager.isValidMoveEvent(a),a=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(a))}isValidEndEvent(e){return this._executeRelevantHandler(e,a=>this.mouseMoveStateManager.isValidEndEvent(a),a=>this.oneFingerTouchMoveStateManager.isValidEndEvent(a))}}const Bi=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=e=>{e.preventDefault()}};class tl{constructor(e,a){this._clickTolerance=e.clickTolerance||1,this._map=a,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,a,h){return this._calculateTransform(e,a,h)}touchmove(e,a,h){if(this._active){if(!this._shouldBePrevented(h.length))return e.preventDefault(),this._calculateTransform(e,a,h);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,a,h){this._calculateTransform(e,a,h),this._active&&this._shouldBePrevented(h.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,a,h){h.length>0&&(this._active=!0);const m=ws(h,a),x=new l.P(0,0),M=new l.P(0,0);let R=0;for(const j in m){const U=m[j],$=this._touches[j];$&&(x._add(U),M._add(U.sub($)),R++,m[j]=U)}if(this._touches=m,this._shouldBePrevented(R)||!M.mag())return;const D=M.div(R);return this._sum._add(D),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(R),panDelta:D}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class es{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,a,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([a[0],a[1]]))}touchmove(e,a,h){if(!this._firstTwoTouches)return;e.preventDefault();const[m,x]=this._firstTwoTouches,M=Us(h,a,m),R=Us(h,a,x);if(!M||!R)return;const D=this._aroundCenter?null:M.add(R).div(2);return this._move([M,R],D,e)}touchend(e,a,h){if(!this._firstTwoTouches)return;const[m,x]=this._firstTwoTouches,M=Us(h,a,m),R=Us(h,a,x);M&&R||(this._active&&F.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Us(v,e,a){for(let h=0;h<v.length;h++)if(v[h].identifier===a)return e[h]}function Tr(v,e){return Math.log(v/e)/Math.LN2}class Vs extends es{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,a){const h=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Tr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Tr(this._distance,h),pinchAround:a}}}function rl(v,e){return 180*v.angleWith(e)/Math.PI}class Wc extends es{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,a,h){const m=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:rl(this._vector,m),pinchAround:a}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const a=25/(Math.PI*this._minDiameter)*360,h=rl(e,this._startVector);return Math.abs(h)<a}}function Kc(v){return Math.abs(v.y)>Math.abs(v.x)}class nf extends es{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,a,h){super.touchstart(e,a,h),this._currentTouchCount=h.length}_start(e){this._lastPoints=e,Kc(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,a,h){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const m=e[0].sub(this._lastPoints[0]),x=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,x,h.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(m.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(e,a,h){if(this._valid!==void 0)return this._valid;const m=e.mag()>=2,x=a.mag()>=2;if(!m&&!x)return;if(!m||!x)return this._firstMove===void 0&&(this._firstMove=h),h-this._firstMove<100&&void 0;const M=e.y>0==a.y>0;return Kc(e)&&Kc(a)&&M}}const td={panStep:100,bearingStep:15,pitchStep:10};class Ms{constructor(e){this._tr=new Xi(e);const a=td;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let a=0,h=0,m=0,x=0,M=0;switch(e.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:e.shiftKey?h=-1:(e.preventDefault(),x=-1);break;case 39:e.shiftKey?h=1:(e.preventDefault(),x=1);break;case 38:e.shiftKey?m=1:(e.preventDefault(),M=-1);break;case 40:e.shiftKey?m=-1:(e.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(h=0,m=0),{cameraAnimation:R=>{const D=this._tr;R.easeTo({duration:300,easeId:"keyboardHandler",easing:Yc,zoom:a?Math.round(D.zoom)+a*(e.shiftKey?2:1):D.zoom,bearing:D.bearing+h*this._bearingStep,pitch:D.pitch+m*this._pitchStep,offset:[-x*this._panStep,-M*this._panStep],center:D.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Yc(v){return v*(2-v)}const Wu=4.000244140625;class Xc{constructor(e,a){this._onTimeout=h=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(h)},this._map=e,this._tr=new Xi(e),this._triggerRenderFrame=a,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let a=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const h=L.now(),m=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,a!==0&&a%Wu==0?this._type="wheel":a!==0&&Math.abs(a)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=a,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(m*a)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,a+=this._lastValue)),e.shiftKey&&a&&(a/=4),this._type&&(this._lastWheelEvent=e,this._delta-=a,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const a=F.mousePos(this._map.getCanvas(),e),h=this._tr;this._aroundPoint=this._aroundCenter?h.transform.locationToScreenPoint(l.Q.convert(h.center)):a,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const e=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const R=e.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=R),typeof this._targetZoom=="number"&&(this._targetZoom+=R)}if(this._delta!==0){const R=this._type==="wheel"&&Math.abs(this._delta)>Wu?this._wheelZoomRate:this._defaultZoomRate;let D=2/(1+Math.exp(-Math.abs(this._delta*R)));this._delta<0&&D!==0&&(D=1/D);const j=typeof this._targetZoom!="number"?e.scale:l.ac(this._targetZoom);this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,l.ah(j*D))),this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const a=typeof this._targetZoom!="number"?e.zoom:this._targetZoom,h=this._startZoom,m=this._easing;let x,M=!1;if(this._type==="wheel"&&h&&m){const R=L.now()-this._lastWheelEventTime,D=Math.min((R+5)/200,1),j=m(D);x=l.B.number(h,a,j),D<1?this._frameId||(this._frameId=!0):M=!0}else x=a,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=x,{noInertia:!0,needsRenderFrame:!M,zoomDelta:x-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let a=l.cd;if(this._prevEase){const h=this._prevEase,m=(L.now()-h.start)/h.duration,x=h.easing(m+.01)-h.easing(m),M=.27/Math.sqrt(x*x+1e-4)*.01,R=Math.sqrt(.0729-M*M);a=l.cb(M,R,.25,1)}return this._prevEase={start:L.now(),duration:e,easing:a},a}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class $s{constructor(e,a){this._clickZoom=e,this._tapZoom=a}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ir{constructor(e){this._tr=new Xi(e),this.reset()}reset(){this._active=!1}dblclick(e,a){return e.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(a)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gr{constructor(){this._tap=new Ss({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,a,h){if(!this._swipePoint)if(this._tapTime){const m=a[0],x=e.timeStamp-this._tapTime<500,M=this._tapPoint.dist(m)<30;x&&M?h.length>0&&(this._swipePoint=m,this._swipeTouch=h[0].identifier):this.reset()}else this._tap.touchstart(e,a,h)}touchmove(e,a,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;const m=a[0],x=m.y-this._swipePoint.y;return this._swipePoint=m,e.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(e,a,h)}touchend(e,a,h){if(this._tapTime)this._swipePoint&&h.length===0&&this.reset();else{const m=this._tap.touchend(e,a,h);m&&(this._tapTime=e.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mr{constructor(e,a,h){this._el=e,this._mousePan=a,this._touchPan=h}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class vo{constructor(e,a,h,m){this._pitchWithRotate=e.pitchWithRotate,this._rollEnabled=e.rollEnabled,this._mouseRotate=a,this._mousePitch=h,this._mouseRoll=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Zs{constructor(e,a,h,m){this._el=e,this._touchZoom=a,this._touchRotate=h,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class qs{constructor(e,a){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=e,this._options=a,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=F.create("div","maplibregl-cooperative-gesture-screen",e);let a=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(a=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const h=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=a,this._container.appendChild(m);const x=document.createElement("div");x.className="maplibregl-mobile-message",x.textContent=h,this._container.appendChild(x),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(F.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,a){this._enabled&&(this._map.fire(new l.l("cooperativegestureprevented",{gestureType:e,originalEvent:a})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const xo=v=>v.zoom||v.drag||v.roll||v.pitch||v.rotate;class Hl extends l.l{}function bo(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta||v.rollDelta}class As{constructor(e,a){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,x)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const M=m.type==="renderFrame"?void 0:m,R={needsRenderFrame:!1},D={},j={};for(const{handlerName:Z,handler:te,allowed:re}of this._handlers){if(!te.isEnabled())continue;let fe;if(this._blockedByActive(j,re,Z))te.reset();else if(te[x||m.type]){if(l.ce(m,x||m.type)){const de=F.mousePos(this._map.getCanvas(),m);fe=te[x||m.type](m,de)}else if(l.cf(m,x||m.type)){const de=this._getMapTouches(m.touches),ge=F.touchPos(this._map.getCanvas(),de);fe=te[x||m.type](m,ge,de)}else l.cg(x||m.type)||(fe=te[x||m.type](m));this.mergeHandlerResult(R,D,fe,Z,M),fe&&fe.needsRenderFrame&&this._triggerRenderFrame()}(fe||te.isActive())&&(j[Z]=te)}const U={};for(const Z in this._previousActiveHandlers)j[Z]||(U[Z]=M);this._previousActiveHandlers=j,(Object.keys(U).length||bo(R))&&(this._changes.push([R,D,U]),this._triggerRenderFrame()),(Object.keys(j).length||bo(R))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:$}=R;$&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],$(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Jh(e),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a);const h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,x,M]of this._listeners)F.addEventListener(m,x,m===document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(const[e,a,h]of this._listeners)F.removeEventListener(e,a,e===document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(e){const a=this._map,h=a.getCanvasContainer();this._add("mapEvent",new Hc(a,e));const m=a.boxZoom=new Ja(a,e);this._add("boxZoom",m),e.interactive&&e.boxZoom&&m.enable();const x=a.cooperativeGestures=new qs(a,e.cooperativeGestures);this._add("cooperativeGestures",x),e.cooperativeGestures&&x.enable();const M=new Ts(a),R=new Ir(a);a.doubleClickZoom=new $s(R,M),this._add("tapZoom",M),this._add("clickZoom",R),e.interactive&&e.doubleClickZoom&&a.doubleClickZoom.enable();const D=new Gr;this._add("tapDragZoom",D);const j=a.touchPitch=new nf(a);this._add("touchPitch",j),e.interactive&&e.touchPitch&&a.touchPitch.enable(e.touchPitch);const U=()=>a.project(a.getCenter()),$=function({enable:Ee,clickTolerance:Pe,aroundCenter:Le=!0,minPixelCenterThreshold:Ie=100,rotateDegreesPerPixelMoved:$e=.8},He){const at=new Bt({checkCorrectEvent:ot=>F.mouseButton(ot)===0&&ot.ctrlKey||F.mouseButton(ot)===2&&!ot.ctrlKey});return new di({clickTolerance:Pe,move:(ot,rt)=>{const It=He();if(Le&&Math.abs(It.y-ot.y)>Ie)return{bearingDelta:l.cc(new l.P(ot.x,rt.y),rt,It)};let Tt=(rt.x-ot.x)*$e;return Le&&rt.y<It.y&&(Tt=-Tt),{bearingDelta:Tt}},moveStateManager:at,enable:Ee,assignEvents:Bi})}(e,U),Z=function({enable:Ee,clickTolerance:Pe,pitchDegreesPerPixelMoved:Le=-.5}){const Ie=new Bt({checkCorrectEvent:$e=>F.mouseButton($e)===0&&$e.ctrlKey||F.mouseButton($e)===2});return new di({clickTolerance:Pe,move:($e,He)=>({pitchDelta:(He.y-$e.y)*Le}),moveStateManager:Ie,enable:Ee,assignEvents:Bi})}(e),te=function({enable:Ee,clickTolerance:Pe,rollDegreesPerPixelMoved:Le=.3},Ie){const $e=new Bt({checkCorrectEvent:He=>F.mouseButton(He)===2&&He.ctrlKey});return new di({clickTolerance:Pe,move:(He,at)=>{const ot=Ie();let rt=(at.x-He.x)*Le;return at.y<ot.y&&(rt=-rt),{rollDelta:rt}},moveStateManager:$e,enable:Ee,assignEvents:Bi})}(e,U);a.dragRotate=new vo(e,$,Z,te),this._add("mouseRotate",$,["mousePitch"]),this._add("mousePitch",Z,["mouseRotate","mouseRoll"]),this._add("mouseRoll",te,["mousePitch"]),e.interactive&&e.dragRotate&&a.dragRotate.enable();const re=function({enable:Ee,clickTolerance:Pe}){const Le=new Bt({checkCorrectEvent:Ie=>F.mouseButton(Ie)===0&&!Ie.ctrlKey});return new di({clickTolerance:Pe,move:(Ie,$e)=>({around:$e,panDelta:$e.sub(Ie)}),activateOnStart:!0,moveStateManager:Le,enable:Ee,assignEvents:Bi})}(e),fe=new tl(e,a);a.dragPan=new mr(h,re,fe),this._add("mousePan",re),this._add("touchPan",fe,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&a.dragPan.enable(e.dragPan);const de=new Wc,ge=new Vs;a.touchZoomRotate=new Zs(h,ge,de,D),this._add("touchRotate",de,["touchPan","touchZoom"]),this._add("touchZoom",ge,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&a.touchZoomRotate.enable(e.touchZoomRotate);const ve=a.scrollZoom=new Xc(a,()=>this._triggerRenderFrame());this._add("scrollZoom",ve,["mousePan"]),e.interactive&&e.scrollZoom&&a.scrollZoom.enable(e.scrollZoom);const Ae=a.keyboard=new Ms(a);this._add("keyboard",Ae),e.interactive&&e.keyboard&&a.keyboard.enable(),this._add("blockableMapEvent",new Ca(a))}_add(e,a,h){this._handlers.push({handlerName:e,handler:a,allowed:h}),this._handlersById[e]=a}stop(e){if(!this._updatingCamera){for(const{handler:a}of this._handlers)a.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!xo(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,a,h){for(const m in e)if(m!==h&&(!a||a.indexOf(m)<0))return!0;return!1}_getMapTouches(e){const a=[];for(const h of e)this._el.contains(h.target)&&a.push(h);return a}mergeHandlerResult(e,a,h,m,x){if(!h)return;l.e(e,h);const M={handlerName:m,originalEvent:h.originalEvent||x};h.zoomDelta!==void 0&&(a.zoom=M),h.panDelta!==void 0&&(a.drag=M),h.rollDelta!==void 0&&(a.roll=M),h.pitchDelta!==void 0&&(a.pitch=M),h.bearingDelta!==void 0&&(a.rotate=M)}_applyChanges(){const e={},a={},h={};for(const[m,x,M]of this._changes)m.panDelta&&(e.panDelta=(e.panDelta||new l.P(0,0))._add(m.panDelta)),m.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+m.pitchDelta),m.rollDelta&&(e.rollDelta=(e.rollDelta||0)+m.rollDelta),m.around!==void 0&&(e.around=m.around),m.pinchAround!==void 0&&(e.pinchAround=m.pinchAround),m.noInertia&&(e.noInertia=m.noInertia),l.e(a,x),l.e(h,M);this._updateMapTransform(e,a,h),this._changes=[]}_updateMapTransform(e,a,h){const m=this._map,x=m._getTransformForUpdate(),M=m.terrain;if(!(bo(e)||M&&this._terrainMovement))return this._fireEvents(a,h,!0);m._stop(!0);let{panDelta:R,zoomDelta:D,bearingDelta:j,pitchDelta:U,rollDelta:$,around:Z,pinchAround:te}=e;te!==void 0&&(Z=te),Z=Z||m.transform.centerPoint,M&&!x.isPointOnMapSurface(Z)&&(Z=x.centerPoint);const re={panDelta:R,zoomDelta:D,rollDelta:$,pitchDelta:U,bearingDelta:j,around:Z};this._map.cameraHelper.useGlobeControls&&!x.isPointOnMapSurface(Z)&&(Z=x.centerPoint);const fe=Z.distSqr(x.centerPoint)<.01?x.center:x.screenPointToLocation(R?Z.sub(R):Z);M?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(re,x),this._terrainMovement||!a.drag&&!a.zoom?a.drag&&this._terrainMovement?x.setCenter(x.screenPointToLocation(x.centerPoint.sub(R))):this._map.cameraHelper.handleMapControlsPan(re,x,fe):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(re,x,fe))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(re,x),this._map.cameraHelper.handleMapControlsPan(re,x,fe)),m._applyUpdatedTransform(x),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(a,h,!0)}_fireEvents(e,a,h){const m=xo(this._eventsInProgress),x=xo(e),M={};for(const $ in e){const{originalEvent:Z}=e[$];this._eventsInProgress[$]||(M[`${$}start`]=Z),this._eventsInProgress[$]=e[$]}!m&&x&&this._fireEvent("movestart",x.originalEvent);for(const $ in M)this._fireEvent($,M[$]);x&&this._fireEvent("move",x.originalEvent);for(const $ in e){const{originalEvent:Z}=e[$];this._fireEvent($,Z)}const R={};let D;for(const $ in this._eventsInProgress){const{handlerName:Z,originalEvent:te}=this._eventsInProgress[$];this._handlersById[Z].isActive()||(delete this._eventsInProgress[$],D=a[Z]||te,R[`${$}end`]=D)}for(const $ in R)this._fireEvent($,R[$]);const j=xo(this._eventsInProgress),U=(m||x)&&!j;if(U&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const $=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&$.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform($)}if(h&&U){this._updatingCamera=!0;const $=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=te=>te!==0&&-this._bearingSnap<te&&te<this._bearingSnap;!$||!$.essential&&L.prefersReducedMotion?(this._map.fire(new l.l("moveend",{originalEvent:D})),Z(this._map.getBearing())&&this._map.resetNorth()):(Z($.bearing||this._map.getBearing())&&($.bearing=0),$.freezeElevation=!0,this._map.easeTo($,{originalEvent:D})),this._updatingCamera=!1}}_fireEvent(e,a){this._map.fire(new l.l(e,a?{originalEvent:a}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new Hl("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Ri extends l.E{constructor(e,a,h){super(),this._renderFrameCallback=()=>{const m=Math.min((L.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=h.bearingSnap,this.cameraHelper=a,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(e,a){e.apply(this.transform),this.transform=e,this.cameraHelper=a}getCenter(){return new l.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(e,a){return this.jumpTo({center:e},a)}getCenterElevation(){return this.transform.elevation}setCenterElevation(e,a){return this.jumpTo({elevation:e},a),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(e){this._centerClampedToGround=e}panBy(e,a,h){return e=l.P.convert(e).mult(-1),this.panTo(this.transform.center,l.e({offset:e},a),h)}panTo(e,a,h){return this.easeTo(l.e({center:e},a),h)}getZoom(){return this.transform.zoom}setZoom(e,a){return this.jumpTo({zoom:e},a),this}zoomTo(e,a,h){return this.easeTo(l.e({zoom:e},a),h)}zoomIn(e,a){return this.zoomTo(this.getZoom()+1,e,a),this}zoomOut(e,a){return this.zoomTo(this.getZoom()-1,e,a),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(e,a){return e!=this.transform.fov&&(this.transform.setFov(e),this.fire(new l.l("movestart",a)).fire(new l.l("move",a)).fire(new l.l("moveend",a))),this}getBearing(){return this.transform.bearing}setBearing(e,a){return this.jumpTo({bearing:e},a),this}getPadding(){return this.transform.padding}setPadding(e,a){return this.jumpTo({padding:e},a),this}rotateTo(e,a,h){return this.easeTo(l.e({bearing:e},a),h)}resetNorth(e,a){return this.rotateTo(0,l.e({duration:1e3},e),a),this}resetNorthPitch(e,a){return this.easeTo(l.e({bearing:0,pitch:0,roll:0,duration:1e3},e),a),this}snapToNorth(e,a){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,a):this}getPitch(){return this.transform.pitch}setPitch(e,a){return this.jumpTo({pitch:e},a),this}getRoll(){return this.transform.roll}setRoll(e,a){return this.jumpTo({roll:e},a),this}cameraForBounds(e,a){e=pr.convert(e).adjustAntiMeridian();const h=a&&a.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),h,a)}_cameraForBoxAndBearing(e,a,h,m){const x={top:0,bottom:0,right:0,left:0};if(typeof(m=l.e({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const j=m.padding;m.padding={top:j,bottom:j,right:j,left:j}}const M=l.e(x,m.padding);m.padding=M;const R=this.transform,D=new pr(e,a);return this.cameraHelper.cameraForBoxAndBearing(m,M,D,h,R)}fitBounds(e,a,h){return this._fitInternal(this.cameraForBounds(e,a),a,h)}fitScreenCoordinates(e,a,h,m,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(l.P.convert(e)),this.transform.screenPointToLocation(l.P.convert(a)),h,m),m,x)}_fitInternal(e,a,h){return e?(delete(a=l.e(e,a)).padding,a.linear?this.easeTo(a,h):this.flyTo(a,h)):this}jumpTo(e,a){this.stop();const h=this._getTransformForUpdate();let m=!1,x=!1,M=!1;const R=h.zoom;this.cameraHelper.handleJumpToCenterZoom(h,e);const D=h.zoom!==R;return"elevation"in e&&h.elevation!==+e.elevation&&h.setElevation(+e.elevation),"bearing"in e&&h.bearing!==+e.bearing&&(m=!0,h.setBearing(+e.bearing)),"pitch"in e&&h.pitch!==+e.pitch&&(x=!0,h.setPitch(+e.pitch)),"roll"in e&&h.roll!==+e.roll&&(M=!0,h.setRoll(+e.roll)),e.padding==null||h.isPaddingEqual(e.padding)||h.setPadding(e.padding),this._applyUpdatedTransform(h),this.fire(new l.l("movestart",a)).fire(new l.l("move",a)),D&&this.fire(new l.l("zoomstart",a)).fire(new l.l("zoom",a)).fire(new l.l("zoomend",a)),m&&this.fire(new l.l("rotatestart",a)).fire(new l.l("rotate",a)).fire(new l.l("rotateend",a)),x&&this.fire(new l.l("pitchstart",a)).fire(new l.l("pitch",a)).fire(new l.l("pitchend",a)),M&&this.fire(new l.l("rollstart",a)).fire(new l.l("roll",a)).fire(new l.l("rollend",a)),this.fire(new l.l("moveend",a))}calculateCameraOptionsFromTo(e,a,h,m=0){const x=l.$.fromLngLat(e,a),M=l.$.fromLngLat(h,m),R=M.x-x.x,D=M.y-x.y,j=M.z-x.z,U=Math.hypot(R,D,j);if(U===0)throw new Error("Can't calculate camera options with same From and To");const $=Math.hypot(R,D),Z=l.ah(this.transform.cameraToCenterDistance/U/this.transform.tileSize),te=180*Math.atan2(R,-D)/Math.PI;let re=180*Math.acos($/U)/Math.PI;return re=j<0?90-re:90+re,{center:M.toLngLat(),elevation:m,zoom:Z,pitch:re,bearing:te}}calculateCameraOptionsFromCameraLngLatAltRotation(e,a,h,m,x){const M=this.transform.calculateCenterFromCameraLngLatAlt(e,a,h,m);return{center:M.center,elevation:M.elevation,zoom:M.zoom,bearing:h,pitch:m,roll:x}}easeTo(e,a){this._stop(!1,e.easeId),((e=l.e({offset:[0,0],duration:500,easing:l.cd},e)).animate===!1||!e.essential&&L.prefersReducedMotion)&&(e.duration=0);const h=this._getTransformForUpdate(),m=this.getBearing(),x=h.pitch,M=h.roll,R="bearing"in e?this._normalizeBearing(e.bearing,m):m,D="pitch"in e?+e.pitch:x,j="roll"in e?this._normalizeBearing(e.roll,M):M,U="padding"in e?e.padding:h.padding,$=l.P.convert(e.offset);let Z,te;e.around&&(Z=l.Q.convert(e.around),te=h.locationToScreenPoint(Z));const re={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},fe=this.cameraHelper.handleEaseTo(h,{bearing:R,pitch:D,roll:j,padding:U,around:Z,aroundPoint:te,offsetAsPoint:$,offset:e.offset,zoom:e.zoom,center:e.center});return this._rotating=this._rotating||m!==R,this._pitching=this._pitching||D!==x,this._rolling=this._rolling||j!==M,this._padding=!h.isPaddingEqual(U),this._zooming=this._zooming||fe.isZooming,this._easeId=e.easeId,this._prepareEase(a,e.noMoveStart,re),this.terrain&&this._prepareElevation(fe.elevationCenter),this._ease(de=>{fe.easeFunc(de),this.terrain&&!e.freezeElevation&&this._updateElevation(de),this._applyUpdatedTransform(h),this._fireMoveEvents(a)},de=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(a,de)},e),this}_prepareEase(e,a,h={}){this._moving=!0,a||h.moving||this.fire(new l.l("movestart",e)),this._zooming&&!h.zooming&&this.fire(new l.l("zoomstart",e)),this._rotating&&!h.rotating&&this.fire(new l.l("rotatestart",e)),this._pitching&&!h.pitching&&this.fire(new l.l("pitchstart",e)),this._rolling&&!h.rolling&&this.fire(new l.l("rollstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const a=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&a!==this._elevationTarget){const h=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(h-(a-(h*e+this._elevationStart))/(1-e)),this._elevationTarget=a}this.transform.setElevation(l.B.number(this._elevationStart,this._elevationTarget,e))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){if(!this.terrain&&e.elevation>=0&&e.pitch<=90)return{};const a=e.getCameraLngLat(),h=e.getCameraAltitude(),m=this.terrain?this.terrain.getElevationForLngLatZoom(a,e.zoom):0;if(h<m){const x=this.calculateCameraOptionsFromTo(a,m,e.center,e.elevation);return{pitch:x.pitch,zoom:x.zoom}}return{}}_applyUpdatedTransform(e){const a=[];if(a.push(m=>this._elevateCameraIfInsideTerrain(m)),this.transformCameraUpdate&&a.push(m=>this.transformCameraUpdate(m)),!a.length)return;const h=e.clone();for(const m of a){const x=h.clone(),{center:M,zoom:R,roll:D,pitch:j,bearing:U,elevation:$}=m(x);M&&x.setCenter(M),$!==void 0&&x.setElevation($),R!==void 0&&x.setZoom(R),D!==void 0&&x.setRoll(D),j!==void 0&&x.setPitch(j),U!==void 0&&x.setBearing(U),h.apply(x)}this.transform.apply(h)}_fireMoveEvents(e){this.fire(new l.l("move",e)),this._zooming&&this.fire(new l.l("zoom",e)),this._rotating&&this.fire(new l.l("rotate",e)),this._pitching&&this.fire(new l.l("pitch",e)),this._rolling&&this.fire(new l.l("roll",e))}_afterEase(e,a){if(this._easeId&&a&&this._easeId===a)return;delete this._easeId;const h=this._zooming,m=this._rotating,x=this._pitching,M=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,h&&this.fire(new l.l("zoomend",e)),m&&this.fire(new l.l("rotateend",e)),x&&this.fire(new l.l("pitchend",e)),M&&this.fire(new l.l("rollend",e)),this.fire(new l.l("moveend",e))}flyTo(e,a){if(!e.essential&&L.prefersReducedMotion){const rt=l.O(e,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(rt,a)}this.stop(),e=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.cd},e);const h=this._getTransformForUpdate(),m=h.bearing,x=h.pitch,M=h.roll,R=h.padding,D="bearing"in e?this._normalizeBearing(e.bearing,m):m,j="pitch"in e?+e.pitch:x,U="roll"in e?this._normalizeBearing(e.roll,M):M,$="padding"in e?e.padding:h.padding,Z=l.P.convert(e.offset);let te=h.centerPoint.add(Z);const re=h.screenPointToLocation(te),fe=this.cameraHelper.handleFlyTo(h,{bearing:D,pitch:j,roll:U,padding:$,locationAtOffset:re,offsetAsPoint:Z,center:e.center,minZoom:e.minZoom,zoom:e.zoom});let de=e.curve;const ge=Math.max(h.width,h.height),ve=ge/fe.scaleOfZoom,Ae=fe.pixelPathLength;typeof fe.scaleOfMinZoom=="number"&&(de=Math.sqrt(ge/fe.scaleOfMinZoom/Ae*2));const Ee=de*de;function Pe(rt){const It=(ve*ve-ge*ge+(rt?-1:1)*Ee*Ee*Ae*Ae)/(2*(rt?ve:ge)*Ee*Ae);return Math.log(Math.sqrt(It*It+1)-It)}function Le(rt){return(Math.exp(rt)-Math.exp(-rt))/2}function Ie(rt){return(Math.exp(rt)+Math.exp(-rt))/2}const $e=Pe(!1);let He=function(rt){return Ie($e)/Ie($e+de*rt)},at=function(rt){return ge*((Ie($e)*(Le(It=$e+de*rt)/Ie(It))-Le($e))/Ee)/Ae;var It},ot=(Pe(!0)-$e)/de;if(Math.abs(Ae)<2e-6||!isFinite(ot)){if(Math.abs(ge-ve)<1e-6)return this.easeTo(e,a);const rt=ve<ge?-1:1;ot=Math.abs(Math.log(ve/ge))/de,at=()=>0,He=It=>Math.exp(rt*de*It)}return e.duration="duration"in e?+e.duration:1e3*ot/("screenSpeed"in e?+e.screenSpeed/de:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=m!==D,this._pitching=j!==x,this._rolling=U!==M,this._padding=!h.isPaddingEqual($),this._prepareEase(a,!1),this.terrain&&this._prepareElevation(fe.targetCenter),this._ease(rt=>{const It=rt*ot,Tt=1/He(It),pt=at(It);this._rotating&&h.setBearing(l.B.number(m,D,rt)),this._pitching&&h.setPitch(l.B.number(x,j,rt)),this._rolling&&h.setRoll(l.B.number(M,U,rt)),this._padding&&(h.interpolatePadding(R,$,rt),te=h.centerPoint.add(Z)),fe.easeFunc(rt,Tt,pt,te),this.terrain&&!e.freezeElevation&&this._updateElevation(rt),this._applyUpdatedTransform(h),this._fireMoveEvents(a)},()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(a)},e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,a){var h;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,a)}return e||(h=this.handlers)===null||h===void 0||h.stop(!1),this}_ease(e,a,h){h.animate===!1||h.duration===0?(e(1),a()):(this._easeStart=L.now(),this._easeOptions=h,this._onEaseFrame=e,this._onEaseEnd=a,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,a){e=l.aL(e,-180,180);const h=Math.abs(e-a);return Math.abs(e-360-a)<h&&(e-=360),Math.abs(e+360-a)<h&&(e+=360),e}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(l.Q.convert(e),this.transform.tileZoom):null}}const $t={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Kt{constructor(e=$t){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=a=>{!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"&&a.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=F.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=F.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=F.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){F.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,a){const h=this._map._getUIString(`AttributionControl.${a}`);e.title=h,e.setAttribute("aria-label",h)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const a=this._map.style.sourceCaches;for(const m in a){const x=a[m];if(x.used||x.usedForTerrain){const M=x.getSource();M.attribution&&e.indexOf(M.attribution)<0&&e.push(M.attribution)}}e=e.filter(m=>String(m).trim()),e.sort((m,x)=>m.length-x.length),e=e.filter((m,x)=>{for(let M=x+1;M<e.length;M++)if(e[M].indexOf(m)>=0)return!1;return!0});const h=e.join(" | ");h!==this._attribHTML&&(this._attribHTML=h,e.length?(this._innerContainer.innerHTML=F.sanitize(h),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Wl{constructor(e={}){this._updateCompact=()=>{const a=this._container.children;if(a.length){const h=a[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&h.classList.add("maplibregl-compact"):h.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=F.create("div","maplibregl-ctrl");const a=F.create("a","maplibregl-ctrl-logo");return a.target="_blank",a.rel="noopener nofollow",a.href="https://maplibre.org/",a.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),a.setAttribute("rel","noopener nofollow"),this._container.appendChild(a),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){F.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Qc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const a=++this._id;return this._queue.push({callback:e,id:a,cancelled:!1}),a}remove(e){const a=this._currentlyRunning,h=a?this._queue.concat(a):this._queue;for(const m of h)if(m.id===e)return void(m.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const a=this._currentlyRunning=this._queue;this._queue=[];for(const h of a)if(!h.cancelled&&(h.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var rd=l.aG([{name:"a_pos3d",type:"Int16",components:3}]);class Zn extends l.E{constructor(e){super(),this._lastTilesetChange=L.now(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=e._source.tileSize*2**this.deltaZoom,e.usedForTerrain=!0,e.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,a){this.sourceCache.update(e,a),this._renderableTilesKeys=[];const h={};for(const m of Ce(e,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:a,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))h[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.terrainRttPosMatrix32f=new Float64Array(16),l.bQ(m.terrainRttPosMatrix32f,0,l.Z,l.Z,0,0,1),this._tiles[m.key]=new Ui(m,this.tileSize),this._lastTilesetChange=L.now());for(const m in this._tiles)h[m]||delete this._tiles[m]}freeRtt(e){for(const a in this._tiles){const h=this._tiles[a];(!e||h.tileID.equals(e)||h.tileID.isChildOf(e)||e.isChildOf(h.tileID))&&(h.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(e=>this.getTileByID(e))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e,a){return a?this._getTerrainCoordsForTileRanges(e,a):this._getTerrainCoordsForRegularTile(e)}_getTerrainCoordsForRegularTile(e){const a={};for(const h of this._renderableTilesKeys){const m=this._tiles[h].tileID,x=e.clone(),M=l.b2();if(m.canonical.equals(e.canonical))l.bQ(M,0,l.Z,l.Z,0,0,1);else if(m.canonical.isChildOf(e.canonical)){const R=m.canonical.z-e.canonical.z,D=m.canonical.x-(m.canonical.x>>R<<R),j=m.canonical.y-(m.canonical.y>>R<<R),U=l.Z>>R;l.bQ(M,0,U,U,0,0,1),l.L(M,M,[-D*U,-j*U,0])}else{if(!e.canonical.isChildOf(m.canonical))continue;{const R=e.canonical.z-m.canonical.z,D=e.canonical.x-(e.canonical.x>>R<<R),j=e.canonical.y-(e.canonical.y>>R<<R),U=l.Z>>R;l.bQ(M,0,l.Z,l.Z,0,0,1),l.L(M,M,[D*U,j*U,0]),l.M(M,M,[1/2**R,1/2**R,0])}}x.terrainRttPosMatrix32f=new Float32Array(M),a[h]=x}return a}_getTerrainCoordsForTileRanges(e,a){const h={};for(const m of this._renderableTilesKeys){const x=this._tiles[m].tileID;if(!this._isWithinTileRanges(x,a))continue;const M=e.clone(),R=l.b2();if(x.canonical.z===e.canonical.z){const D=e.canonical.x-x.canonical.x,j=e.canonical.y-x.canonical.y;l.bQ(R,0,l.Z,l.Z,0,0,1),l.L(R,R,[D*l.Z,j*l.Z,0])}else if(x.canonical.z>e.canonical.z){const D=x.canonical.z-e.canonical.z,j=x.canonical.x-(x.canonical.x>>D<<D),U=x.canonical.y-(x.canonical.y>>D<<D),$=e.canonical.x-(x.canonical.x>>D),Z=e.canonical.y-(x.canonical.y>>D),te=l.Z>>D;l.bQ(R,0,te,te,0,0,1),l.L(R,R,[-j*te+$*l.Z,-U*te+Z*l.Z,0])}else{const D=e.canonical.z-x.canonical.z,j=e.canonical.x-(e.canonical.x>>D<<D),U=e.canonical.y-(e.canonical.y>>D<<D),$=(e.canonical.x>>D)-x.canonical.x,Z=(e.canonical.y>>D)-x.canonical.y,te=l.Z<<D;l.bQ(R,0,te,te,0,0,1),l.L(R,R,[j*l.Z+$*te,U*l.Z+Z*te,0])}M.terrainRttPosMatrix32f=new Float32Array(R),h[m]=M}return h}getSourceTile(e,a){const h=this.sourceCache._source;let m=e.overscaledZ-this.deltaZoom;if(m>h.maxzoom&&(m=h.maxzoom),m<h.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(m).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!x||!x.dem)&&a)for(;m>=h.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(e.scaledTo(m--).key);return x}anyTilesAfterTime(e=Date.now()){return this._lastTilesetChange>=e}_isWithinTileRanges(e,a){return a[e.canonical.z]&&e.canonical.x>=a[e.canonical.z].minTileX&&e.canonical.x<=a[e.canonical.z].maxTileX&&e.canonical.y>=a[e.canonical.z].minTileY&&e.canonical.y<=a[e.canonical.z].maxTileY}}class Jc{constructor(e,a,h){this._meshCache={},this.painter=e,this.sourceCache=new Zn(a),this.options=h,this.exaggeration=typeof h.exaggeration=="number"?h.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,a,h,m=l.Z){var x;if(!(a>=0&&a<m&&h>=0&&h<m))return 0;const M=this.getTerrainData(e),R=(x=M.tile)===null||x===void 0?void 0:x.dem;if(!R)return 0;const D=l.ch([],[a/m*l.Z,h/m*l.Z],M.u_terrain_matrix),j=[D[0]*R.dim,D[1]*R.dim],U=Math.floor(j[0]),$=Math.floor(j[1]),Z=j[0]-U,te=j[1]-$;return R.get(U,$)*(1-Z)*(1-te)+R.get(U+1,$)*Z*(1-te)+R.get(U,$+1)*(1-Z)*te+R.get(U+1,$+1)*Z*te}getElevationForLngLatZoom(e,a){if(!l.ci(a,e.wrap()))return 0;const{tileID:h,mercatorX:m,mercatorY:x}=this._getOverscaledTileIDFromLngLatZoom(e,a);return this.getElevation(h,m%l.Z,x%l.Z,l.Z)}getElevation(e,a,h,m=l.Z){return this.getDEMElevation(e,a,h,m)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const m=this.painter.context,x=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ke(m,x,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ke(m,new l.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.ad([])}const a=this.sourceCache.getSourceTile(e,!0);if(a&&a.dem&&(!a.demTexture||a.needsTerrainPrepare)){const m=this.painter.context;a.demTexture=this.painter.getTileTexture(a.dem.stride),a.demTexture?a.demTexture.update(a.dem.getPixels(),{premultiply:!1}):a.demTexture=new Ke(m,a.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),a.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),a.needsTerrainPrepare=!1}const h=a&&a+a.tileID.key+e.key;if(h&&!this._demMatrixCache[h]){const m=this.sourceCache.sourceCache._source.maxzoom;let x=e.canonical.z-a.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=m?x=e.canonical.z-m:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const M=e.canonical.x-(e.canonical.x>>x<<x),R=e.canonical.y-(e.canonical.y>>x<<x),D=l.cj(new Float64Array(16),[1/(l.Z<<x),1/(l.Z<<x),0]);l.L(D,D,[M*l.Z,R*l.Z,0]),this._demMatrixCache[e.key]={matrix:D,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:a&&a.dem&&a.dem.dim||1,u_terrain_matrix:h?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:a&&a.dem&&a.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(a&&a.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:a}}getFramebuffer(e){const a=this.painter,h=a.width/devicePixelRatio,m=a.height/devicePixelRatio;return!this._fbo||this._fbo.width===h&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ke(a.context,{width:h,height:m,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ke(a.context,{width:h,height:m,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=a.context.createFramebuffer(h,m,!0,!1),this._fbo.depthAttachment.set(a.context.createRenderbuffer(a.context.gl.DEPTH_COMPONENT16,h,m))),this._fbo.colorAttachment.set(e==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const a=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,M=0;x<this._coordsTextureSize;x++)for(let R=0;R<this._coordsTextureSize;R++,M+=4)a[M+0]=255&R,a[M+1]=255&x,a[M+2]=R>>8<<4|x>>8,a[M+3]=0;const h=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(a.buffer)),m=new Ke(e,h,e.gl.RGBA,{premultiply:!1});return m.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const a=new Uint8Array(4),h=this.painter.context,m=h.gl,x=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),M=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),R=Math.round(this.painter.height/devicePixelRatio);h.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(x,R-M-1,1,1,m.RGBA,m.UNSIGNED_BYTE,a),h.bindFramebuffer.set(null);const D=a[0]+(a[2]>>4<<8),j=a[1]+((15&a[2])<<8),U=this.coordsIndex[255-a[3]],$=U&&this.sourceCache.getTileByID(U);if(!$)return null;const Z=this._coordsTextureSize,te=(1<<$.tileID.canonical.z)*Z;return new l.$(($.tileID.canonical.x*Z+D)/te+$.tileID.wrap,($.tileID.canonical.y*Z+j)/te,this.getElevation($.tileID,D,j,Z))}depthAtPoint(e){const a=new Uint8Array(4),h=this.painter.context,m=h.gl;return h.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,a),h.bindFramebuffer.set(null),(a[0]/16777216+a[1]/65536+a[2]/256+a[3])/256}getTerrainMesh(e){var a;const h=((a=this.painter.style.projection)===null||a===void 0?void 0:a.transitionState)>0,m=h&&e.canonical.y===0,x=h&&e.canonical.y===(1<<e.canonical.z)-1,M=`m_${m?"n":""}_${x?"s":""}`;if(this._meshCache[M])return this._meshCache[M];const R=this.painter.context,D=new l.ck,j=new l.aK,U=this.meshSize,$=l.Z/U,Z=U*U;for(let Ie=0;Ie<=U;Ie++)for(let $e=0;$e<=U;$e++)D.emplaceBack($e*$,Ie*$,0);for(let Ie=0;Ie<Z;Ie+=U+1)for(let $e=0;$e<U;$e++)j.emplaceBack($e+Ie,U+$e+Ie+1,U+$e+Ie+2),j.emplaceBack($e+Ie,U+$e+Ie+2,$e+Ie+1);const te=D.length,re=te+(U+1),fe=(U+1)*U,de=m?l.b9:0,ge=m?0:1,ve=x?l.ba:l.Z,Ae=x?0:1;for(let Ie=0;Ie<=U;Ie++)D.emplaceBack(Ie*$,de,ge);for(let Ie=0;Ie<=U;Ie++)D.emplaceBack(Ie*$,ve,Ae);for(let Ie=0;Ie<U;Ie++)j.emplaceBack(fe+Ie,re+Ie,re+Ie+1),j.emplaceBack(fe+Ie,re+Ie+1,fe+Ie+1),j.emplaceBack(0+Ie,te+Ie+1,te+Ie),j.emplaceBack(0+Ie,0+Ie+1,te+Ie+1);const Ee=D.length,Pe=Ee+2*(U+1);for(const Ie of[0,1])for(let $e=0;$e<=U;$e++)for(const He of[0,1])D.emplaceBack(Ie*l.Z,$e*$,He);for(let Ie=0;Ie<2*U;Ie+=2)j.emplaceBack(Ee+Ie,Ee+Ie+1,Ee+Ie+3),j.emplaceBack(Ee+Ie,Ee+Ie+3,Ee+Ie+2),j.emplaceBack(Pe+Ie,Pe+Ie+3,Pe+Ie+1),j.emplaceBack(Pe+Ie,Pe+Ie+2,Pe+Ie+3);const Le=new No(R.createVertexBuffer(D,rd.members),R.createIndexBuffer(j),l.aJ.simpleSegment(0,0,D.length,j.length));return this._meshCache[M]=Le,Le}getMeshFrameDelta(e){return 2*Math.PI*l.bu/Math.pow(2,Math.max(e,0))/5}getMinTileElevationForLngLatZoom(e,a){var h;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(e,a);return(h=this.getMinMaxElevation(m).minElevation)!==null&&h!==void 0?h:0}getMinMaxElevation(e){const a=this.getTerrainData(e).tile,h={minElevation:null,maxElevation:null};return a&&a.dem&&(h.minElevation=a.dem.min*this.exaggeration,h.maxElevation=a.dem.max*this.exaggeration),h}_getOverscaledTileIDFromLngLatZoom(e,a){const h=l.$.fromLngLat(e.wrap()),m=(1<<a)*l.Z,x=h.x*m,M=h.y*m,R=Math.floor(x/l.Z),D=Math.floor(M/l.Z);return{tileID:new l.Y(a,0,a,R,D),mercatorX:x,mercatorY:M}}}class Pa{constructor(e,a,h){this._context=e,this._size=a,this._tileSize=h,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const a=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),h=new Ke(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return h.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),a.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),a.colorAttachment.set(h.texture),{id:e,fbo:a,texture:h,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(a=>e.id!==a),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const a of this._recentlyUsed)if(!this._objects[a].inUse)return this._objects[a];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(e=>!e.inUse)===!1}}const dn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Ii{constructor(e,a){this.painter=e,this.terrain=a,this.pool=new Pa(e.context,30,a.sourceCache.tileSize*a.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,a){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter(h=>!e._layers[h].isHidden(a)),this._coordsAscending={};for(const h in e.sourceCaches){this._coordsAscending[h]={};const m=e.sourceCaches[h].getVisibleCoordinates(),x=e.sourceCaches[h].getSource(),M=x instanceof We?x.terrainTileRanges:null;for(const R of m){const D=this.terrain.sourceCache.getTerrainCoords(R,M);for(const j in D)this._coordsAscending[h][j]||(this._coordsAscending[h][j]=[]),this._coordsAscending[h][j].push(D[j])}}this._coordsAscendingStr={};for(const h of e._order){const m=e._layers[h],x=m.source;if(dn[m.type]&&!this._coordsAscendingStr[x]){this._coordsAscendingStr[x]={};for(const M in this._coordsAscending[x])this._coordsAscendingStr[x][M]=this._coordsAscending[x][M].map(R=>R.key).sort().join()}}for(const h of this._renderableTiles)for(const m in this._coordsAscendingStr){const x=this._coordsAscendingStr[m][h.tileID.key];x&&x!==h.rttCoords[m]&&(h.rtt=[])}}renderLayer(e,a){if(e.isHidden(this.painter.transform.zoom))return!1;const h=Object.assign(Object.assign({},a),{isRenderingToTexture:!0}),m=e.type,x=this.painter,M=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(dn[m]&&(this._prevType&&dn[this._prevType]||this._stacks.push([]),this._prevType=m,this._stacks[this._stacks.length-1].push(e.id),!M))return!0;if(dn[this._prevType]||dn[m]&&M){this._prevType=m;const R=this._stacks.length-1,D=this._stacks[R]||[];for(const j of this._renderableTiles){if(this.pool.isFull()&&(qc(this.painter,this.terrain,this._rttTiles,h),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(j),j.rtt[R]){const $=this.pool.getObjectForId(j.rtt[R].id);if($.stamp===j.rtt[R].stamp){this.pool.useObject($);continue}}const U=this.pool.getOrCreateFreeObject();this.pool.useObject(U),this.pool.stampObject(U),j.rtt[R]={id:U.id,stamp:U.stamp},x.context.bindFramebuffer.set(U.fbo.framebuffer),x.context.clear({color:l.b7.transparent,stencil:0}),x.currentStencilSource=void 0;for(let $=0;$<D.length;$++){const Z=x.style._layers[D[$]],te=Z.source?this._coordsAscending[Z.source][j.tileID.key]:[j.tileID];x.context.viewport.set([0,0,U.fbo.width,U.fbo.height]),x._renderTileClippingMasks(Z,te,!0),x.renderLayer(x,x.style.sourceCaches[Z.source],Z,te,h),Z.source&&(j.rttCoords[Z.source]=this._coordsAscendingStr[Z.source][j.tileID.key])}}return qc(this.painter,this.terrain,this._rttTiles,h),this._rttTiles=[],this.pool.freeAllObjects(),dn[m]}return!1}}const yi={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Si=C,Kl={hash:!1,interactive:!0,bearingSnap:7,attributionControl:$t,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},il={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Ra{constructor(e,a,h=!1){this.mousedown=x=>{this.startMove(x,F.mousePos(this.element,x)),F.addEventListener(window,"mousemove",this.mousemove),F.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=x=>{this.move(x,F.mousePos(this.element,x))},this.mouseup=x=>{this._rotatePitchHanlder.dragEnd(x),this.offTemp()},this.touchstart=x=>{x.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=F.touchPos(this.element,x.targetTouches)[0],this.startMove(x,this._startPos),F.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.addEventListener(window,"touchend",this.touchend))},this.touchmove=x=>{x.targetTouches.length!==1?this.reset():(this._lastPos=F.touchPos(this.element,x.targetTouches)[0],this.move(x,this._lastPos))},this.touchend=x=>{x.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=a;const m=new ed;this._rotatePitchHanlder=new di({clickTolerance:3,move:(x,M)=>{const R=a.getBoundingClientRect(),D=new l.P((R.bottom-R.top)/2,(R.right-R.left)/2);return{bearingDelta:l.cc(new l.P(x.x,M.y),M,D),pitchDelta:h?-.5*(M.y-x.y):void 0}},moveStateManager:m,enable:!0,assignEvents:()=>{}}),this.map=e,F.addEventListener(a,"mousedown",this.mousedown),F.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),F.addEventListener(a,"touchcancel",this.reset)}startMove(e,a){this._rotatePitchHanlder.dragStart(e,a),F.disableDrag()}move(e,a){const h=this.map,{bearingDelta:m,pitchDelta:x}=this._rotatePitchHanlder.dragMove(e,a)||{};m&&h.setBearing(h.getBearing()+m),x&&h.setPitch(h.getPitch()+x)}off(){const e=this.element;F.removeEventListener(e,"mousedown",this.mousedown),F.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),F.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.removeEventListener(window,"touchend",this.touchend),F.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){F.enableDrag(),F.removeEventListener(window,"mousemove",this.mousemove),F.removeEventListener(window,"mouseup",this.mouseup),F.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.removeEventListener(window,"touchend",this.touchend)}}let Ia;function Yl(v,e,a,h=!1){if(h||!a.getCoveringTilesDetailsProvider().allowWorldCopies())return v==null?void 0:v.wrap();const m=new l.Q(v.lng,v.lat);if(v=new l.Q(v.lng,v.lat),e){const x=new l.Q(v.lng-360,v.lat),M=new l.Q(v.lng+360,v.lat),R=a.locationToScreenPoint(v).distSqr(e);a.locationToScreenPoint(x).distSqr(e)<R?v=x:a.locationToScreenPoint(M).distSqr(e)<R&&(v=M)}for(;Math.abs(v.lng-a.center.lng)>180;){const x=a.locationToScreenPoint(v);if(x.x>=0&&x.y>=0&&x.x<=a.width&&x.y<=a.height)break;v.lng>a.center.lng?v.lng-=360:v.lng+=360}return v.lng!==m.lng&&a.isPointOnMapSurface(a.locationToScreenPoint(v))?v:m}const nl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function al(v,e,a){const h=v.classList;for(const m in nl)h.remove(`maplibregl-${a}-anchor-${m}`);h.add(`maplibregl-${a}-anchor-${e}`)}class Xl extends l.E{constructor(e){if(super(),this._onKeyPress=a=>{const h=a.code,m=a.charCode||a.keyCode;h!=="Space"&&h!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=a=>{const h=a.originalEvent.target,m=this._element;this._popup&&(h===m||m.contains(h))&&this.togglePopup()},this._update=a=>{if(!this._map)return;const h=this._map.loaded()&&!this._map.isMoving();((a==null?void 0:a.type)==="terrain"||(a==null?void 0:a.type)==="render"&&!h)&&this._map.once("render",this._update),this._lngLat=Yl(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let x="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?x="rotateX(0deg)":this._pitchAlignment==="map"&&(x=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||a&&a.type!=="moveend"||(this._pos=this._pos.round()),F.setTransform(this._element,`${nl[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${x} ${m}`),L.frameAsync(new AbortController).then(()=>{this._updateOpacity(a&&a.type==="moveend")}).catch(()=>{})},this._onMove=a=>{if(!this._isDragging){const h=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=h}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.l("dragstart"))),this.fire(new l.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.l("dragend")),this._state="inactive"},this._addDragHandler=a=>{this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment!=="auto"?e.pitchAlignment:this._rotationAlignment,this.setOpacity(e==null?void 0:e.opacity,e==null?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=l.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=F.create("div");const a=F.createNS("http://www.w3.org/2000/svg","svg"),h=41,m=27;a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height",`${h}px`),a.setAttributeNS(null,"width",`${m}px`),a.setAttributeNS(null,"viewBox",`0 0 ${m} ${h}`);const x=F.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const M=F.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"fill-rule","nonzero");const R=F.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"transform","translate(3.0, 29.0)"),R.setAttributeNS(null,"fill","#000000");const D=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ge of D){const ve=F.createNS("http://www.w3.org/2000/svg","ellipse");ve.setAttributeNS(null,"opacity","0.04"),ve.setAttributeNS(null,"cx","10.5"),ve.setAttributeNS(null,"cy","5.80029008"),ve.setAttributeNS(null,"rx",ge.rx),ve.setAttributeNS(null,"ry",ge.ry),R.appendChild(ve)}const j=F.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"fill",this._color);const U=F.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),j.appendChild(U);const $=F.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"opacity","0.25"),$.setAttributeNS(null,"fill","#000000");const Z=F.createNS("http://www.w3.org/2000/svg","path");Z.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),$.appendChild(Z);const te=F.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(6.0, 7.0)"),te.setAttributeNS(null,"fill","#FFFFFF");const re=F.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(8.0, 8.0)");const fe=F.createNS("http://www.w3.org/2000/svg","circle");fe.setAttributeNS(null,"fill","#000000"),fe.setAttributeNS(null,"opacity","0.25"),fe.setAttributeNS(null,"cx","5.5"),fe.setAttributeNS(null,"cy","5.5"),fe.setAttributeNS(null,"r","5.4999962");const de=F.createNS("http://www.w3.org/2000/svg","circle");de.setAttributeNS(null,"fill","#FFFFFF"),de.setAttributeNS(null,"cx","5.5"),de.setAttributeNS(null,"cy","5.5"),de.setAttributeNS(null,"r","5.4999962"),re.appendChild(fe),re.appendChild(de),M.appendChild(R),M.appendChild(j),M.appendChild($),M.appendChild(te),M.appendChild(re),a.appendChild(M),a.setAttributeNS(null,"height",h*this._scale+"px"),a.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(a),this._offset=l.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",a=>{a.preventDefault()}),this._element.addEventListener("mousedown",a=>{a.preventDefault()}),al(this._element,this._anchor,"marker"),e&&e.className)for(const a of e.className.split(" "))this._element.classList.add(a);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),e.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),F.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=l.Q.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const m=Math.abs(13.5)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var a,h;if(!(!((a=this._map)===null||a===void 0)&&a.terrain)){const $=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==$&&(this._element.style.opacity=$))}if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const m=this._map,x=m.terrain.depthAtPoint(this._pos),M=m.terrain.getElevationForLngLatZoom(this._lngLat,m.transform.tileZoom);if(m.transform.lngLatToCameraDepth(this._lngLat,M)-x<.006)return void(this._element.style.opacity=this._opacity);const R=-this._offset.y/m.transform.pixelsPerMeter,D=Math.sin(m.getPitch()*Math.PI/180)*R,j=m.terrain.depthAtPoint(new l.P(this._pos.x,this._pos.y-this._offset.y)),U=m.transform.lngLatToCameraDepth(this._lngLat,M+D)-j>.006;!((h=this._popup)===null||h===void 0)&&h.isOpen()&&U&&this._popup.remove(),this._element.style.opacity=U?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=l.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&e!=="auto"?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,a){return(this._opacity===void 0||e===void 0&&a===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),e!==void 0&&(this._opacity=e),a!==void 0&&(this._opacityWhenCovered=a),this._map&&this._updateOpacity(!0),this}}const eh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let sl=0,wo=!1;const th={maxWidth:100,unit:"metric"};function Ql(v,e,a){const h=a&&a.maxWidth||100,m=v._container.clientHeight/2,x=v._container.clientWidth/2,M=v.unproject([x-h/2,m]),R=v.unproject([x+h/2,m]),D=Math.round(v.project(R).x-v.project(M).x),j=Math.min(h,D,v._container.clientWidth),U=M.distanceTo(R);if(a&&a.unit==="imperial"){const $=3.2808*U;$>5280?So(e,j,$/5280,v._getUIString("ScaleControl.Miles")):So(e,j,$,v._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?So(e,j,U/1852,v._getUIString("ScaleControl.NauticalMiles")):U>=1e3?So(e,j,U/1e3,v._getUIString("ScaleControl.Kilometers")):So(e,j,U,v._getUIString("ScaleControl.Meters"))}function So(v,e,a,h){const m=function(x){const M=Math.pow(10,`${Math.floor(x)}`.length-1);let R=x/M;return R=R>=10?10:R>=5?5:R>=3?3:R>=2?2:R>=1?1:function(D){const j=Math.pow(10,Math.ceil(-Math.log(D)/Math.LN10));return Math.round(D*j)/j}(R),M*R}(a);v.style.width=e*(m/a)+"px",v.innerHTML=`${m}&nbsp;${h}`}const id={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Ku=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Yu(v){if(v){if(typeof v=="number"){const e=Math.round(Math.abs(v)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,v),"top-left":new l.P(e,e),"top-right":new l.P(-e,e),bottom:new l.P(0,-v),"bottom-left":new l.P(e,-e),"bottom-right":new l.P(-e,-e),left:new l.P(v,0),right:new l.P(-v,0)}}if(v instanceof l.P||Array.isArray(v)){const e=l.P.convert(v);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:l.P.convert(v.center||[0,0]),top:l.P.convert(v.top||[0,0]),"top-left":l.P.convert(v["top-left"]||[0,0]),"top-right":l.P.convert(v["top-right"]||[0,0]),bottom:l.P.convert(v.bottom||[0,0]),"bottom-left":l.P.convert(v["bottom-left"]||[0,0]),"bottom-right":l.P.convert(v["bottom-right"]||[0,0]),left:l.P.convert(v.left||[0,0]),right:l.P.convert(v.right||[0,0])}}return Yu(new l.P(0,0))}const rh=C;y.AJAXError=l.co,y.Event=l.l,y.Evented=l.E,y.LngLat=l.Q,y.MercatorCoordinate=l.$,y.Point=l.P,y.addProtocol=l.cp,y.config=l.a,y.removeProtocol=l.cq,y.AttributionControl=Kt,y.BoxZoomHandler=Ja,y.CanvasSource=xt,y.CooperativeGesturesHandler=qs,y.DoubleClickZoomHandler=$s,y.DragPanHandler=mr,y.DragRotateHandler=vo,y.EdgeInsets=oo,y.FullscreenControl=class extends l.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var e;let a=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((e=a==null?void 0:a.shadowRoot)===null||e===void 0)&&e.fullscreenElement;)a=a.shadowRoot.fullscreenElement;a===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){F.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=F.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);F.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new l.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},y.GeoJSONSource=Re,y.GeolocateControl=class extends l.E{constructor(v){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new l.l("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.l("geolocate",e)),this._finish()}},this._updateCamera=e=>{const a=new l.Q(e.coords.longitude,e.coords.latitude),h=e.coords.accuracy,m=this._map.getBearing(),x=l.e({bearing:m},this.options.fitBoundsOptions),M=pr.fromLngLat(a,h);this._map.fitBounds(M,x,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const a=new l.Q(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(this.options.trackUserLocation)if(e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(e.code===3&&wo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.l("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=F.create("button","maplibregl-ctrl-geolocate",this._container),F.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(e===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=F.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Xl({element:this._dotElement}),this._circleElement=F.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Xl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.l("trackuserlocationend")),this.fire(new l.l("userlocationlostfocus")))})}},this.options=l.e({},eh,v)}onAdd(v){return this._map=v,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return l._(this,arguments,void 0,function*(e=!1){if(Ia!==void 0&&!e)return Ia;if(window.navigator.permissions===void 0)return Ia=!!window.navigator.geolocation,Ia;try{Ia=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ia=!!window.navigator.geolocation}return Ia})}().then(e=>this._finishSetupUI(e)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),F.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,sl=0,wo=!1}_isOutOfMapMaxBounds(v){const e=this._map.getMaxBounds(),a=v.coords;return e&&(a.longitude<e.getWest()||a.longitude>e.getEast()||a.latitude<e.getSouth()||a.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),e=v.getSouthEast(),a=v.getNorthEast(),h=e.distanceTo(a),m=Math.ceil(this._accuracy/(h/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":sl--,wo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.l("trackuserlocationstart")),this.fire(new l.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),sl++,sl>1?(v={maximumAge:6e5,timeout:0},wo=!0):(v=this.options.positionOptions,wo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},y.GlobeControl=class{constructor(){this._toggleProjection=()=>{var v;const e=(v=this._map.getProjection())===null||v===void 0?void 0:v.type;this._map.setProjection(e!=="mercator"&&e?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var v;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((v=this._map.getProjection())===null||v===void 0?void 0:v.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(v){return this._map=v,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=F.create("button","maplibregl-ctrl-globe",this._container),F.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){F.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},y.Hash=Gc,y.ImageSource=We,y.KeyboardHandler=Ms,y.LngLatBounds=pr,y.LogoControl=Wl,y.Map=class extends Ri{constructor(v){var e,a;l.cl.mark(l.cm.create);const h=Object.assign(Object.assign(Object.assign({},Kl),v),{canvasContextAttributes:Object.assign(Object.assign({},Kl.canvasContextAttributes),v.canvasContextAttributes)});if(h.minZoom!=null&&h.maxZoom!=null&&h.minZoom>h.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(h.minPitch!=null&&h.maxPitch!=null&&h.minPitch>h.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(h.minPitch!=null&&h.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(h.maxPitch!=null&&h.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const m=new Ha,x=new Sa;if(h.minZoom!==void 0&&m.setMinZoom(h.minZoom),h.maxZoom!==void 0&&m.setMaxZoom(h.maxZoom),h.minPitch!==void 0&&m.setMinPitch(h.minPitch),h.maxPitch!==void 0&&m.setMaxPitch(h.maxPitch),h.renderWorldCopies!==void 0&&m.setRenderWorldCopies(h.renderWorldCopies),super(m,x,{bearingSnap:h.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Qc,this._controls=[],this._mapId=l.a4(),this._contextLost=R=>{R.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new l.l("webglcontextlost",{originalEvent:R}))},this._contextRestored=R=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.l("webglcontextrestored",{originalEvent:R}))},this._onMapScroll=R=>{if(R.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=h.interactive,this._maxTileCacheSize=h.maxTileCacheSize,this._maxTileCacheZoomLevels=h.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},h.canvasContextAttributes),this._trackResize=h.trackResize===!0,this._bearingSnap=h.bearingSnap,this._centerClampedToGround=h.centerClampedToGround,this._refreshExpiredTiles=h.refreshExpiredTiles===!0,this._fadeDuration=h.fadeDuration,this._crossSourceCollisions=h.crossSourceCollisions===!0,this._collectResourceTiming=h.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},yi),h.locale),this._clickTolerance=h.clickTolerance,this._overridePixelRatio=h.pixelRatio,this._maxCanvasSize=h.maxCanvasSize,this.transformCameraUpdate=h.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=h.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=_e.addThrottleControl(()=>this.isMoving()),this._requestManager=new Se(h.transformRequest),typeof h.container=="string"){if(this._container=document.getElementById(h.container),!this._container)throw new Error(`Container '${h.container}' not found.`)}else{if(!(h.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=h.container}if(h.maxBounds&&this.setMaxBounds(h.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let R=!1;const D=el(j=>{this._trackResize&&!this._removed&&(this.resize(j),this.redraw())},50);this._resizeObserver=new ResizeObserver(j=>{R?D(j):R=!0}),this._resizeObserver.observe(this._container)}this.handlers=new As(this,h),this._hash=h.hash&&new Gc(typeof h.hash=="string"&&h.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:h.center,elevation:h.elevation,zoom:h.zoom,bearing:h.bearing,pitch:h.pitch,roll:h.roll}),h.bounds&&(this.resize(),this.fitBounds(h.bounds,l.e({},h.fitBoundsOptions,{duration:0}))));const M=typeof h.style=="string"||((a=(e=h.style)===null||e===void 0?void 0:e.projection)===null||a===void 0?void 0:a.type)!=="globe";this.resize(null,M),this._localIdeographFontFamily=h.localIdeographFontFamily,this._validateStyle=h.validateStyle,h.style&&this.setStyle(h.style,{localIdeographFontFamily:h.localIdeographFontFamily}),h.attributionControl&&this.addControl(new Kt(typeof h.attributionControl=="boolean"?void 0:h.attributionControl)),h.maplibreLogo&&this.addControl(new Wl,h.logoPosition),this.on("style.load",()=>{if(M||this._resizeTransform(),this.transform.unmodified){const R=l.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(R)}}),this.on("data",R=>{this._update(R.dataType==="style"),this.fire(new l.l(`${R.dataType}data`,R))}),this.on("dataloading",R=>{this.fire(new l.l(`${R.dataType}dataloading`,R))}),this.on("dataabort",R=>{this.fire(new l.l("sourcedataabort",R))})}_getMapId(){return this._mapId}addControl(v,e){if(e===void 0&&(e=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new l.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const a=v.onAdd(this);this._controls.push(v);const h=this._controlPositions[e];return e.indexOf("bottom")!==-1?h.insertBefore(a,h.firstChild):h.appendChild(a),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new l.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const e=this._controls.indexOf(v);return e>-1&&this._controls.splice(e,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,e,a,h){return h==null&&this.terrain&&(h=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,e,a,h)}resize(v,e=!0){const[a,h]=this._containerDimensions(),m=this._getClampedPixelRatio(a,h);if(this._resizeCanvas(a,h,m),this.painter.resize(a,h,m),this.painter.overLimit()){const M=this.painter.context.gl;this._maxCanvasSize=[M.drawingBufferWidth,M.drawingBufferHeight];const R=this._getClampedPixelRatio(a,h);this._resizeCanvas(a,h,R),this.painter.resize(a,h,R)}this._resizeTransform(e);const x=!this._moving;return x&&(this.stop(),this.fire(new l.l("movestart",v)).fire(new l.l("move",v))),this.fire(new l.l("resize",v)),x&&this.fire(new l.l("moveend",v)),this}_resizeTransform(v=!0){var e;const[a,h]=this._containerDimensions();this.transform.resize(a,h,v),(e=this._requestedCameraState)===null||e===void 0||e.resize(a,h,v)}_getClampedPixelRatio(v,e){const{0:a,1:h}=this._maxCanvasSize,m=this.getPixelRatio(),x=v*m,M=e*m;return Math.min(x>a?a/x:1,M>h?h/M:1)*m}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(pr.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.setMinZoom(v),this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.setMaxZoom(v),this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.setMinPitch(v),this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(v>=this.transform.minPitch)return this.transform.setMaxPitch(v),this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.setRenderWorldCopies(v),this._update()}project(v){return this.transform.locationToScreenPoint(l.Q.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.screenPointToLocation(l.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,e,a){if(v==="mouseenter"||v==="mouseover"){let h=!1;return{layers:e,listener:a,delegates:{mousemove:x=>{const M=e.filter(D=>this.getLayer(D)),R=M.length!==0?this.queryRenderedFeatures(x.point,{layers:M}):[];R.length?h||(h=!0,a.call(this,new hn(v,this,x.originalEvent,{features:R}))):h=!1},mouseout:()=>{h=!1}}}}if(v==="mouseleave"||v==="mouseout"){let h=!1;return{layers:e,listener:a,delegates:{mousemove:M=>{const R=e.filter(D=>this.getLayer(D));(R.length!==0?this.queryRenderedFeatures(M.point,{layers:R}):[]).length?h=!0:h&&(h=!1,a.call(this,new hn(v,this,M.originalEvent)))},mouseout:M=>{h&&(h=!1,a.call(this,new hn(v,this,M.originalEvent)))}}}}{const h=m=>{const x=e.filter(R=>this.getLayer(R)),M=x.length!==0?this.queryRenderedFeatures(m.point,{layers:x}):[];M.length&&(m.features=M,a.call(this,m),delete m.features)};return{layers:e,listener:a,delegates:{[v]:h}}}}_saveDelegatedListener(v,e){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(e)}_removeDelegatedListener(v,e,a){if(!this._delegatedListeners||!this._delegatedListeners[v])return;const h=this._delegatedListeners[v];for(let m=0;m<h.length;m++){const x=h[m];if(x.listener===a&&x.layers.length===e.length&&x.layers.every(M=>e.includes(M))){for(const M in x.delegates)this.off(M,x.delegates[M]);return void h.splice(m,1)}}}on(v,e,a){if(a===void 0)return super.on(v,e);const h=typeof e=="string"?[e]:e,m=this._createDelegatedListener(v,h,a);this._saveDelegatedListener(v,m);for(const x in m.delegates)this.on(x,m.delegates[x]);return{unsubscribe:()=>{this._removeDelegatedListener(v,h,a)}}}once(v,e,a){if(a===void 0)return super.once(v,e);const h=typeof e=="string"?[e]:e,m=this._createDelegatedListener(v,h,a);for(const x in m.delegates){const M=m.delegates[x];m.delegates[x]=(...R)=>{this._removeDelegatedListener(v,h,a),M(...R)}}this._saveDelegatedListener(v,m);for(const x in m.delegates)this.once(x,m.delegates[x]);return this}off(v,e,a){return a===void 0?super.off(v,e):(this._removeDelegatedListener(v,typeof e=="string"?[e]:e,a),this)}queryRenderedFeatures(v,e){if(!this.style)return[];let a;const h=v instanceof l.P||Array.isArray(v),m=h?v:[[0,0],[this.transform.width,this.transform.height]];if(e=e||(h?{}:v)||{},m instanceof l.P||typeof m[0]=="number")a=[l.P.convert(m)];else{const x=l.P.convert(m[0]),M=l.P.convert(m[1]);a=[x,new l.P(M.x,x.y),M,new l.P(x.x,M.y),x]}return this.style.queryRenderedFeatures(a,e,this.transform)}querySourceFeatures(v,e){return this.style.querySourceFeatures(v,e)}setStyle(v,e){return(e=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(v,e))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const e=this._locale[v];if(e==null)throw new Error(`Missing UI string '${v}'`);return e}_updateStyle(v,e){var a,h;if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,e));const m=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new zu(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,e,m):this.style.loadJSON(v,e,m),this):((h=(a=this.style)===null||a===void 0?void 0:a.projection)===null||h===void 0||h.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new zu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,e){if(typeof v=="string"){const a=this._requestManager.transformRequest(v,"Style");l.j(a,new AbortController).then(h=>{this._updateDiff(h.data,e)}).catch(h=>{h&&this.fire(new l.k(h))})}else typeof v=="object"&&this._updateDiff(v,e)}_updateDiff(v,e){try{this.style.setState(v,e)&&this._update(!0)}catch(a){l.w(`Unable to perform style diff: ${a.message||a.error||a}.  Rebuilding the style from scratch.`),this._updateStyle(v,e)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(v,e){return this._lazyInitEmptyStyle(),this.style.addSource(v,e),this._update(!0)}isSourceLoaded(v){const e=this.style&&this.style.sourceCaches[v];if(e!==void 0)return e.loaded();this.fire(new l.k(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const e=this.style.sourceCaches[v.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&e.reload();for(const a in this.style._layers){const h=this.style._layers[a];h.type==="hillshade"&&h.source===v.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Jc(this.painter,e,v),this.painter.renderToTexture=new Ii(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=a=>{var h;a.dataType==="style"?this.terrain.sourceCache.freeRtt():a.dataType==="source"&&a.tile&&(a.sourceId!==v.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((h=a.source)===null||h===void 0?void 0:h.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(a.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new l.l("terrain",{terrain:v})),this}getTerrain(){var v,e;return(e=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&e!==void 0?e:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const e in v){const a=v[e]._tiles;for(const h in a){const m=a[h];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}setSourceTileLodParams(v,e,a){if(a){const h=this.getSource(a);if(!h)throw new Error(`There is no source with ID "${a}", cannot set LOD parameters`);h.calculateTileZoom=oe(Math.max(1,v),Math.max(1,e))}else for(const h in this.style.sourceCaches)this.style.sourceCaches[h].getSource().calculateTileZoom=oe(Math.max(1,v),Math.max(1,e));return this._update(!0),this}addImage(v,e,a={}){const{pixelRatio:h=1,sdf:m=!1,stretchX:x,stretchY:M,content:R,textFitWidth:D,textFitHeight:j}=a;if(this._lazyInitEmptyStyle(),!(e instanceof HTMLImageElement||l.b(e))){if(e.width===void 0||e.height===void 0)return this.fire(new l.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:U,height:$,data:Z}=e,te=e;return this.style.addImage(v,{data:new l.R({width:U,height:$},new Uint8Array(Z)),pixelRatio:h,stretchX:x,stretchY:M,content:R,textFitWidth:D,textFitHeight:j,sdf:m,version:0,userImage:te}),te.onAdd&&te.onAdd(this,v),this}}{const{width:U,height:$,data:Z}=L.getImageData(e);this.style.addImage(v,{data:new l.R({width:U,height:$},Z),pixelRatio:h,stretchX:x,stretchY:M,content:R,textFitWidth:D,textFitHeight:j,sdf:m,version:0})}}updateImage(v,e){const a=this.style.getImage(v);if(!a)return this.fire(new l.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const h=e instanceof HTMLImageElement||l.b(e)?L.getImageData(e):e,{width:m,height:x,data:M}=h;if(m===void 0||x===void 0)return this.fire(new l.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==a.data.width||x!==a.data.height)return this.fire(new l.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const R=!(e instanceof HTMLImageElement||l.b(e));return a.data.replace(M,R),this.style.updateImage(v,a),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new l.k(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return _e.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,e){return this._lazyInitEmptyStyle(),this.style.addLayer(v,e),this._update(!0)}moveLayer(v,e){return this.style.moveLayer(v,e),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,e,a){return this.style.setLayerZoomRange(v,e,a),this._update(!0)}setFilter(v,e,a={}){return this.style.setFilter(v,e,a),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,e,a,h={}){return this.style.setPaintProperty(v,e,a,h),this._update(!0)}getPaintProperty(v,e){return this.style.getPaintProperty(v,e)}setLayoutProperty(v,e,a,h={}){return this.style.setLayoutProperty(v,e,a,h),this._update(!0)}getLayoutProperty(v,e){return this.style.getLayoutProperty(v,e)}setGlyphs(v,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,e,a={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,e,a,h=>{h||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,e,a=>{a||this._update(!0)}),this}setLight(v,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(v,e={}){return this._lazyInitEmptyStyle(),this.style.setSky(v,e),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,e){return this.style.setFeatureState(v,e),this._update()}removeFeatureState(v,e){return this.style.removeFeatureState(v,e),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,e=0;return this._container&&(v=this._container.clientWidth||400,e=this._container.clientHeight||300),[v,e]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const e=this._canvasContainer=F.create("div","maplibregl-canvas-container",v);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=F.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const a=this._containerDimensions(),h=this._getClampedPixelRatio(a[0],a[1]);this._resizeCanvas(a[0],a[1],h);const m=this._controlContainer=F.create("div","maplibregl-control-container",v),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(M=>{x[M]=F.create("div",`maplibregl-ctrl-${M} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,e,a){this._canvas.width=Math.floor(a*v),this._canvas.height=Math.floor(a*e),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const v=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let e=null;this._canvas.addEventListener("webglcontextcreationerror",h=>{e={requestedAttributes:v},h&&(e.statusMessage=h.statusMessage,e.type=h.type)},{once:!0});let a=null;if(a=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,v):this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v),!a){const h="Failed to initialize WebGL";throw e?(e.message=h,new Error(JSON.stringify(e))):new Error(h)}this.painter=new Xh(a,this.transform),G.testSupport(a)}migrateProjection(v,e){super.migrateProjection(v,e),this.painter.transform=v,this.fire(new l.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){var e,a,h,m,x;const M=this._idleTriggered?this._fadeDuration:0,R=((e=this.style.projection)===null||e===void 0?void 0:e.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let D=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const $=this.transform.zoom,Z=L.now();this.style.zoomHistory.update($,Z);const te=new l.C($,{now:Z,fadeDuration:M,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),re=te.crossFadingFactor();re===1&&re===this._crossFadingFactor||(D=!0,this._crossFadingFactor=re),this.style.update(te)}const j=((a=this.style.projection)===null||a===void 0?void 0:a.transitionState)>0!==R;(h=this.style.projection)===null||h===void 0||h.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((m=this.style.projection)===null||m===void 0?void 0:m.transitionState,(x=this.style.projection)===null||x===void 0?void 0:x.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||j)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,M,this._crossSourceCollisions,j),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:M,showPadding:this.showPadding}),this.fire(new l.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.cl.mark(l.cm.load),this.fire(new l.l("load"))),this.style&&(this.style.hasTransitions()||D)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const U=this._sourcesDirty||this._styleDirty||this._placementDirty;return U||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.l("idle")),!this._loaded||this._fullyLoaded||U||(this._fullyLoaded=!0,l.cl.mark(l.cm.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),_e.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e!=null&&e.loseContext&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),F.remove(this._canvasContainer),F.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),l.cl.clearMetrics(),this._removed=!0,this.fire(new l.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,L.frame(this._frameRequest,v=>{l.cl.frame(v),this._frameRequest=null;try{this._render(v)}catch(e){if(!l.cn(e)&&!function(a){return a.message===Fl}(e))throw e}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return Si}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(v){return this._lazyInitEmptyStyle(),this.style.setProjection(v),this._update(!0)}},y.MapMouseEvent=hn,y.MapTouchEvent=wn,y.MapWheelEvent=Aa,y.Marker=Xl,y.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const e=this._map.getZoom(),a=e===this._map.getMaxZoom(),h=e===this._map.getMinZoom();this._zoomInButton.disabled=a,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",a.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(e,a)=>{const h=this._map._getUIString(`NavigationControl.${a}`);e.title=h,e.setAttribute("aria-label",h)},this.options=l.e({},il,v),this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),F.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),F.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=F.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ra(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){F.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,e){const a=F.create("button",v,this._container);return a.type="button",a.addEventListener("click",e),a}},y.Popup=class extends l.E{constructor(v){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&F.remove(this._content),this._container&&(F.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new l.l("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=F.create("div","maplibregl-popup",this._map.getContainer()),this._tip=F.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const M of this.options.className.split(" "))this._container.classList.add(M);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Yl(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!e)return;const a=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationToScreenPoint(this._lngLat));let h=this.options.anchor;const m=Yu(this.options.offset);if(!h){const M=this._container.offsetWidth,R=this._container.offsetHeight;let D;D=a.y+m.bottom.y<R?["top"]:a.y>this._map.transform.height-R?["bottom"]:[],a.x<M/2?D.push("left"):a.x>this._map.transform.width-M/2&&D.push("right"),h=D.length===0?"bottom":D.join("-")}let x=a.add(m[h]);this.options.subpixelPositioning||(x=x.round()),F.setTransform(this._container,`${nl[h]} translate(${x.x}px,${x.y}px)`),al(this._container,h,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(id),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=l.Q.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const e=document.createDocumentFragment(),a=document.createElement("body");let h;for(a.innerHTML=v;h=a.firstChild,h;)e.appendChild(h);return this.setDOMContent(e)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=F.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=F.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(Ku);v&&v.focus()}},y.RasterDEMTileSource=we,y.RasterTileSource=Yi,y.ScaleControl=class{constructor(v){this._onMove=()=>{Ql(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,Ql(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},th),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){F.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},y.ScrollZoomHandler=Xc,y.Style=zu,y.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=F.create("button","maplibregl-ctrl-terrain",this._container),F.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){F.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},y.TwoFingersTouchPitchHandler=nf,y.TwoFingersTouchRotateHandler=Wc,y.TwoFingersTouchZoomHandler=Vs,y.TwoFingersTouchZoomRotateHandler=Zs,y.VectorTileSource=Fi,y.VideoSource=vt,y.addSourceType=(v,e)=>l._(void 0,void 0,void 0,function*(){if(Ut(v))throw new Error(`A source type called "${v}" already exists.`);((a,h)=>{Et[a]=h})(v,e)}),y.clearPrewarmedResources=function(){const v=zt;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(wt),zt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},y.createTileMesh=Ac,y.getMaxParallelImageRequests=function(){return l.a.MAX_PARALLEL_IMAGE_REQUESTS},y.getRTLTextPluginStatus=function(){return Pi().getRTLTextPluginStatus()},y.getVersion=function(){return rh},y.getWorkerCount=function(){return Zt.workerCount},y.getWorkerUrl=function(){return l.a.WORKER_URL},y.importScriptInWorkers=function(v){return br().broadcast("IS",v)},y.prewarm=function(){nr().acquire(wt)},y.setMaxParallelImageRequests=function(v){l.a.MAX_PARALLEL_IMAGE_REQUESTS=v},y.setRTLTextPlugin=function(v,e){return Pi().setRTLTextPlugin(v,e)},y.setWorkerCount=function(v){Zt.workerCount=v},y.setWorkerUrl=function(v){l.a.WORKER_URL=v}});var S=d;return S})}(I_)),I_.exports}var hz=cz();const hs=bv(hz);function dz(i){const n={},d={},p={};for(const _ in i)if(_.startsWith("on"))n[_]=i[_];else if(CM.includes(_))d[_]=i[_];else if(AM.includes(_))p[_]=i[_];else if(!_.startsWith("initial")&&_!=="container"&&_!=="style")throw Error(`unknown map option key ${_}`);return[p,n,d]}function qm(i,n){const d={},p={};for(const _ in i){if(n!=null&&n.includes(_)){p[_]=i[_];continue}if(_.startsWith("on"))d[_]=i[_];else{const S=_.startsWith("initial")?_[7].toLowerCase()+_.substring(8):_;if(p[S])throw new Error(`duplicate key ${S}`);p[S]=i[_]}}return[p,d]}function Gm(i,n){return Object.keys(i).filter(p=>i[p]in n).sort()}function tp(i,n){if(i===n)return!0;if(!i||!n)return!1;if(Array.isArray(i)){if(!Array.isArray(n)||i.length!==n.length)return!1;for(let d=0;d<i.length;d++)if(!tp(i[d],n[d]))return!1;return!0}else if(Array.isArray(n))return!1;if(typeof i=="object"&&typeof n=="object"){const d=Object.keys(i),p=Object.keys(n);if(d.length!==p.length)return!1;for(const _ of d)if(!Object.prototype.hasOwnProperty.call(n,_)||!tp(i[_],n[_]))return!1;return!0}return!1}function fz(i,n){const d=Array.isArray(i)?i[0]:i?i.x:0,p=Array.isArray(i)?i[1]:i?i.y:0,_=Array.isArray(n)?n[0]:n?n.x:0,S=Array.isArray(n)?n[1]:n?n.y:0;return d===_&&p===S}function s0(i,n,d){n.forEach(p=>{p!==""&&d.indexOf(p)===-1&&i.classList.remove(p)}),d.forEach(p=>{p!==""&&(n.indexOf(p)===-1||!i.classList.contains(p))&&i.classList.add(p)})}function pz(i,n,d,p){i.forEach(_=>{_!==""&&n.indexOf(_)===-1&&p(_)}),n.forEach(_=>{_!==""&&i.indexOf(_)===-1&&d(_)})}function mz(){const i="abcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let d=0;d<8;d++){const p=Math.floor(Math.random()*i.length);n+=i[p]}return n}var y2={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mouseout:"onMouseOut",mousemove:"onMouseMove",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",click:"onClick",dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchcancel:"onTouchCancel",touchmove:"onTouchMove",movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd",wheel:"onWheel",resize:"onResize",remove:"onRemove",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",webglcontextlost:"onWebglContextLost",webglcontextrestored:"onWebglContextRestored",load:"onLoad",render:"onRender",idle:"onIdle",error:"onError",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",dataloading:"onDataLoading",styledataloading:"onStyleDataLoading",sourcedataloading:"onSourceDataLoading",tiledataloading:"onTileDataLoading",styleimagemissing:"onStyleImageMissing",dataabort:"onDataAbort",sourcedataabort:"onSourceDataAbort",terrain:"onTerrain"},AM=["maxBounds","minZoom","maxZoom","minPitch","maxPitch","renderWorldCopies","pixelRatio","centerClampedToGround"],CM=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch","cooperativeGestures"],_2="https://demotiles.maplibre.org/style.json",gz=class{constructor({mapStyle:i=_2,padding:n},d,p){xi(this,"reactiveOptions",{});xi(this,"handlerOptions",{});xi(this,"eventNames",[]);xi(this,"callbacks");xi(this,"_map");xi(this,"padding");xi(this,"mapStyle");xi(this,"controlledSources",{});xi(this,"controlledLayers",{});xi(this,"controlledTerrain",null);xi(this,"_onStyleError",i=>{i.error.name!=="AbortError"&&console.error(i.error)});xi(this,"_onMapEvent",i=>{var p,_;const n=i.type,d=y2[n];this.callbacks[d]?(_=(p=this.callbacks)[d])==null||_.call(p,i):console.info("not managed RMap event",n,i)});this.mapStyle=i,this.padding=n;const[_,S]=qm(d);this.callbacks=S;const y={..._,container:p,style:i},l=new hs.Map(y);l.style.on("error",this._onStyleError),n&&l.setPadding(n),this._map=l,this._updateCallbacks(S)}setProps({mapStyle:i=_2,styleDiffing:n=!0,styleTransformStyle:d,padding:p},_){const[S,y,l]=dz(_);this._updateCallbacks(y),this._updateStyle(i,{diff:n,transformStyle:d}),this._updateReactiveOptions(S,{padding:p}),this._updateHandlers(l)}getControlledTerrain(){return this.controlledTerrain}setControlledTerrain(i){this.controlledTerrain=i}getControlledLayer(i){return this.controlledLayers[i]??null}setControlledLayer(i,n){n?this.controlledLayers[i]=n:delete this.controlledLayers[i]}getControlledSource(i){return this.controlledSources[i]??null}setControlledSource(i,n){n?this.controlledSources[i]=n:delete this.controlledSources[i]}_updateStyle(i,n){const d=this.mapStyle;i!==d&&(this.mapStyle=i,this._map.setStyle(i,{diff:n.diff,transformStyle:(p,_)=>{const S=p?Object.fromEntries(Object.entries(p==null?void 0:p.sources).filter(([C])=>C in this.controlledSources)):{},y=p?p.layers.filter(C=>C.id in this.controlledLayers):[],l={..._,sources:{..._.sources,...S},layers:[..._.layers,...y],terrain:this.controlledTerrain?p==null?void 0:p.terrain:_.terrain};return n.transformStyle?n.transformStyle(p,l):l}}))}_updateReactiveOptions(i,{padding:n}){const d=this.reactiveOptions;this.reactiveOptions=i;for(const p of AM)if(p in i&&!tp(d[p],i[p])){const _=`set${p[0].toUpperCase()}${p.substring(1)}`;this._map[_](i[p])}n&&!tp(this.padding,n)&&this._map.setPadding(n),this.padding=n}_updateCallbacks(i={}){this.callbacks=i;const n=Gm(y2,i);this.eventNames.join("-")!==n.join("-")&&(pz(this.eventNames,n,d=>this._map.on(d,this._onMapEvent),d=>this._map.off(d,this._onMapEvent)),this.eventNames=n)}_updateHandlers(i){const n=this.handlerOptions;this.handlerOptions=i;for(const d of CM){const p=i[d]??!0,_=n[d]??!0;tp(p,_)||(p?this._map[d].enable(p):this._map[d].disable())}}get map(){return this._map}destroy(){this._updateCallbacks(),this._map.remove()}},$0=typeof window<"u"?se.useLayoutEffect:se.useEffect,yz=class{constructor(){xi(this,"_maps",{});xi(this,"_listeners",{})}add(i,n){var d;this._maps[i]=n,(d=this._listeners[i])==null||d.forEach(([p,_])=>{p||_(!0)})}remove(i){var n;delete this._maps[i],(n=this._listeners[i])==null||n.forEach(([d,p])=>{d&&p(!1)})}get(i){return i?this._maps[i]??null:null}addListener(i,n){this._listeners[i]?this._listeners[i].push(n):this._listeners[i]=[n];const d=!!this._maps[i];n[0]!==d&&n[1](d)}removeListener(i,[,n]){this._listeners[i]=this._listeners[i].filter(([,d])=>d!==n)}},xv=se.createContext(null),EM=se.createContext(null),v2={height:"100%"},_z=se.forwardRef(function({children:n,style:d,id:p,className:_,onMounted:S,mapStyle:y,styleDiffing:l,styleTransformStyle:C,padding:P,...k},O){const L=se.useRef(null),F=se.useRef(!0),G=se.useRef(p??mz());if(p&&p!==G.current)throw new Error(`RMap id should not change. "${p}" "${G.current}". If you defined id as const string add a "key" prop to your RMap component`);const ee=G.current,X=se.useContext(xv),W=se.useRef();!X&&!W.current&&(W.current=new yz);const pe=X?X.current:W.current,[,me]=se.useState(0);$0(()=>{const Se=pe.get(ee);if(Se)F.current?Se.setProps({mapStyle:y,padding:P,styleDiffing:l,styleTransformStyle:C},k):F.current=!0;else{const ke=new gz({mapStyle:y,styleDiffing:l,padding:P},k,L.current);pe.add(ee,ke),S&&S(ke.map),me(nt=>nt+1),F.current=!1}}),$0(()=>()=>{const Se=pe.get(ee);Se&&(Se.destroy(),pe.remove(ee))},[]),se.useImperativeHandle(O,()=>{var Se;return((Se=pe.get(ee))==null?void 0:Se.map)||null},[ee,pe]),$0(()=>{if(!_)return;const Se=L.current;return _.split(" ").map(ke=>Se.classList.add(ke)),()=>void _.split(" ").map(ke=>Se.classList.remove(ke))},[_]);const _e=se.useMemo(()=>({position:"relative",width:"100%",height:"100%",...d}),[d]);return q.jsx("div",{ref:L,id:ee,style:_e,children:pe.get(ee)&&q.jsx(EM.Provider,{value:ee,children:X?q.jsx("div",{className:"maplibregl-children",style:v2,children:n}):q.jsx(xv.Provider,{value:W,children:q.jsx("div",{className:"maplibregl-children",style:v2,children:n})})})})});function px(i){const n=se.useContext(xv),p=se.useContext(EM),_=(n==null?void 0:n.current.get(p))??null,S=se.useState(_!==null);if(!(n!=null&&n.current))throw new Error("use useMapManager in components inside <RMap /> or inside <RMapContextProvider />");if(!p)throw new Error("provide an id to useMap or use inside <RMap />");return se.useEffect(()=>{const y=n.current;if(!y)throw new Error("mapManagers can't disappear");return y.addListener(p,S),()=>{y.removeListener(p,S)}},[p,n,S,_]),_}function Hm(i){var n;return((n=px())==null?void 0:n.map)??null}var x2={dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",click:"onClick"};se.memo(se.forwardRef(function(n,d){var Ke;const{longitude:p,latitude:_,children:S,...y}=n,l=Hm(),[C,P]=qm(y),k=se.useRef(C),O=se.useRef();O.current=P;const L=se.useMemo(()=>{const Ye={...C,element:S?document.createElement("div"):void 0},ht=new hs.Marker(Ye);return ht.setLngLat([p,_]),ht},[]),F=Gm(x2,P).join("-");se.useEffect(()=>{function Ye(kt){var Xt,or,Ct;const sr=kt.type,ir=x2[sr];(Xt=O.current)!=null&&Xt[ir]?(Ct=(or=O.current)[ir])==null||Ct.call(or,kt):console.info("not managed RMarker event",sr,kt)}const ht=F.split("-");return ht.forEach(kt=>{kt==="click"?L.getElement().addEventListener("click",Ye):L.on(kt,Ye)}),()=>{ht.forEach(kt=>{kt==="click"?L.getElement().removeEventListener("click",Ye):L.off(kt,Ye)})}},[F,L]),se.useEffect(()=>(L.addTo(l),()=>void L.remove()),[]);const{className:G,offset:ee,draggable:X,clickTolerance:W=0,rotation:pe,rotationAlignment:me,subpixelPositioning:_e=!1,pitchAlignment:Se,opacity:ke,opacityWhenCovered:nt}=C;return se.useImperativeHandle(d,()=>L,[L]),k.current.className!==G&&s0(L._element,((Ke=k.current.className)==null?void 0:Ke.split(" "))||[],(G==null?void 0:G.split(" "))||[]),(L.getLngLat().lng!==p||L.getLngLat().lat!==_)&&L.setLngLat([p,_]),ee&&!fz(L.getOffset(),ee)&&L.setOffset(ee),L.isDraggable()!==X&&L.setDraggable(X),L._clickTolerance!==W&&(L._clickTolerance=W),L.getRotation()!==pe&&L.setRotation(pe),L.getRotationAlignment()!==me&&L.setRotationAlignment(me),L.getPitchAlignment()!==Se&&L.setPitchAlignment(Se),(L._opacity!==ke||L._opacityWhenCovered!==nt)&&L.setOpacity(ke,nt),L.setSubpixelPositioning&&L._subpixelPositioning!==_e&&L.setSubpixelPositioning(_e),k.current=C,S?G_.createPortal(S,L.getElement()):null}));var Z0={map_click:"onMapClick",map_move:"onMapMove"};se.memo(se.forwardRef(function(n,d){var pe;const{longitude:p,latitude:_,children:S,...y}=n,l=Hm(),[C,P]=qm(y),k=se.useRef(null),O=se.useRef(C),L=se.useRef();L.current=P;const F=se.useMemo(()=>document.createElement("div"),[]);k.current||(k.current=new hs.Popup({...C,closeButton:!1,closeOnClick:!1,closeOnMove:!1}),p!==void 0&&_!==void 0&&k.current.setLngLat([p,_]));const G=Gm(Z0,P).join("-");se.useEffect(()=>{function me(ke){var Ye,ht,kt;const nt=ke.type,Ke=Z0[nt]||Z0[`map_${nt}`];(Ye=L.current)!=null&&Ye[Ke]?(kt=(ht=L.current)[Ke])==null||kt.call(ht,ke):console.info("not managed RPopup event",nt,ke)}if(G==="")return;const _e=G.split("-"),Se=k.current;return _e.forEach(ke=>{ke.startsWith("map_")?l.on(ke.substring(4),me):Se.on(ke,me)}),()=>{_e.forEach(ke=>{ke.startsWith("map_")?l.off(ke.substring(4),me):Se.off(ke,me)})}},[G,l]),se.useEffect(()=>(k.current.setDOMContent(F).addTo(l),()=>void k.current.remove()),[F,l]);const{offset:ee,maxWidth:X="240px",className:W}=C;return se.useImperativeHandle(d,()=>k.current,[k]),k.current.isOpen()&&(p!==void 0&&_!==void 0&&(k.current.getLngLat().lng!==p||k.current.getLngLat().lat!==_)&&k.current.setLngLat([p,_]),ee&&!tp(k.current.options.offset,ee)&&k.current.setOffset(ee),O.current.className!==W&&s0(F,((pe=O.current.className)==null?void 0:pe.split(" "))||[],(W==null?void 0:W.split(" "))||[]),k.current.getMaxWidth()!==X&&k.current.setMaxWidth(X)),O.current=C,G_.createPortal(S,F)}));var b2={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mouseout:"onMouseOut",mousemove:"onMouseMove",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",click:"onClick",dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchcancel:"onTouchCancel",touchmove:"onTouchMove"};function vz(i,n,d){var p;if((p=i.style)!=null&&p._loaded&&(n.type==="background"||n.type==="custom"||n.source&&i.getSource(n.source)))return i.addLayer(n,d&&i.getLayer(d)?d:void 0),i.getLayer(n.id)}function xz(i,{beforeId:n,...d},{beforeId:p,..._}){var l,C;if(_.type==="custom"||d.type==="custom")return;p!==n&&i.moveLayer(d.id,n),d.type!=="background"&&d.type!=="custom"&&_.filter!==d.filter&&i.setFilter(d.id,d.filter);const S=_,y=d;if(S.layout!==y.layout){if(y.layout)for(const P of Object.keys(y.layout))y.layout[P]!==((l=S.layout)==null?void 0:l[P])&&i.setLayoutProperty(d.id,P,y.layout[P]);for(const P in S.layout)Object.prototype.hasOwnProperty.call(y.layout,P)||i.setLayoutProperty(d.id,P,void 0)}if(S.paint!==y.paint){if(y.paint)for(const P of Object.keys(y.paint))y.paint[P]!==((C=S.paint)==null?void 0:C[P])&&i.setPaintProperty(d.id,P,y.paint[P]);for(const P in S.paint)Object.prototype.hasOwnProperty.call(y.paint,P)||i.setPaintProperty(d.id,P,void 0)}(S.minzoom!==y.minzoom||S.maxzoom!==y.maxzoom)&&y.minzoom&&y.maxzoom&&i.setLayerZoomRange(d.id,y.minzoom,y.maxzoom)}se.memo(se.forwardRef(function(n,d){var W;const{beforeId:p,..._}=n,[S,y]=qm(_,["onAdd"]),l=S.id,C=px();if(!C)throw new Error("use <RLayer /> component inside <RMap />");const P=C.map,k=se.useRef(l);if(l!==k.current)throw new Error(`RLayer id should not change. "${l}" "${k.current}". If you defined id as const string add a "key" prop to your RLayer component`);const O=C.getControlledLayer(l)??n,[,L]=se.useState(0),F=se.useCallback(()=>L(pe=>pe+1),[]);if(n.type!==O.type)throw new Error(`RLayer type should not change. "${n.type}" "${O.type}"`);const G=se.useRef();G.current=y,se.useEffect(()=>(P.on("styledata",F),P.style&&P.style._loaded&&F(),()=>{P.off("styledata",F),P.style&&P.style._loaded&&P.getLayer(l)&&P.removeLayer(l),C==null||C.setControlledLayer(l,null)}),[P,l,C,F]);const ee=Gm(b2,y).join("-");se.useEffect(()=>{function pe(_e){var nt,Ke,Ye;const Se=_e.type,ke=b2[Se];(nt=G.current)!=null&&nt[ke]?(Ye=(Ke=G.current)[ke])==null||Ye.call(Ke,_e):console.info("not managed RLayer event",Se,_e)}const me=ee.split("-");return me.forEach(_e=>{P.on(_e,l,pe)}),()=>{me.forEach(_e=>{P.off(_e,l,pe)})}},[ee,l,P]);let X=((W=P.style)==null?void 0:W._loaded)&&P.getLayer(l);return X?xz(P,n,O):(X=vz(P,S,p),X&&P.off("styledata",F)),se.useImperativeHandle(d,()=>X||null,[X]),C.setControlledLayer(l,n),null}));function bz(i,n,d){var p;if((p=i.style)!=null&&p._loaded)return i.addSource(n,d),i.getSource(n)}function wz(i,n,d){switch(n.type){case"image":{const p=d,_=n;p.url!==_.url&&i.updateImage({url:_.url,coordinates:_.coordinates}),p.coordinates!==_.coordinates&&i.setCoordinates(_.coordinates);break}case"video":{const p=d,_=n;p.coordinates!==_.coordinates&&i.setCoordinates(_.coordinates);break}case"geojson":{const p=d,_=n;p.data!==_.data&&i.setData(_.data),(p.cluster!==_.cluster||p.clusterMaxZoom!==_.clusterMaxZoom||p.clusterRadius!==_.clusterRadius)&&i.setClusterOptions({cluster:_.cluster,clusterMaxZoom:_.clusterMaxZoom,clusterRadius:_.clusterRadius});break}case"raster":case"raster-dem":case"vector":{const p=d,_=n;p.tiles!==_.tiles&&_.tiles&&i.setTiles(_.tiles),p.url!==_.url&&_.url&&i.setUrl(_.url);break}}}se.memo(se.forwardRef(function(n,d){var F;const{id:p,..._}=n,S=px(),y=S.map,l=se.useRef(p);if(p!==l.current)throw new Error(`RSource id should not change. "${p}" "${l.current}". If you defined id as const string add a "key" prop to your RSource component`);const{id:C,...P}=S.getControlledSource(p)??n;if(_.type!==P.type)throw new Error(`RSource type should not change. "${_.type}" "${P.type}"`);const[,k]=se.useState(0),O=se.useCallback(()=>void setTimeout(()=>k(G=>G+1),0),[]);se.useEffect(()=>(y.on("styledata",O),y.style&&y.style._loaded&&O(),()=>{var G;if(y.off("styledata",O),y.style&&y.getSource(p)){const ee=(G=y.getStyle())==null?void 0:G.layers;if(ee)for(const X of ee)X.type!=="background"&&X.type!=="custom"&&X.source===p&&y.removeLayer(X.id);y.removeSource(p)}S==null||S.setControlledSource(p,null)}),[y,p,S,O]);let L=((F=y.style)==null?void 0:F._loaded)&&y.getSource(p);return L?wz(L,_,P):(L=bz(y,p,_),L&&y.off("styledata",O)),se.useImperativeHandle(d,()=>L||null,[L]),S.setControlledSource(p,n),null}));function Mh(i,n){this.x=i,this.y=n}Mh.prototype={clone(){return new Mh(this.x,this.y)},add(i){return this.clone()._add(i)},sub(i){return this.clone()._sub(i)},multByPoint(i){return this.clone()._multByPoint(i)},divByPoint(i){return this.clone()._divByPoint(i)},mult(i){return this.clone()._mult(i)},div(i){return this.clone()._div(i)},rotate(i){return this.clone()._rotate(i)},rotateAround(i,n){return this.clone()._rotateAround(i,n)},matMult(i){return this.clone()._matMult(i)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(i){return this.x===i.x&&this.y===i.y},dist(i){return Math.sqrt(this.distSqr(i))},distSqr(i){const n=i.x-this.x,d=i.y-this.y;return n*n+d*d},angle(){return Math.atan2(this.y,this.x)},angleTo(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith(i){return this.angleWithSep(i.x,i.y)},angleWithSep(i,n){return Math.atan2(this.x*n-this.y*i,this.x*i+this.y*n)},_matMult(i){const n=i[0]*this.x+i[1]*this.y,d=i[2]*this.x+i[3]*this.y;return this.x=n,this.y=d,this},_add(i){return this.x+=i.x,this.y+=i.y,this},_sub(i){return this.x-=i.x,this.y-=i.y,this},_mult(i){return this.x*=i,this.y*=i,this},_div(i){return this.x/=i,this.y/=i,this},_multByPoint(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint(i){return this.x/=i.x,this.y/=i.y,this},_unit(){return this._div(this.mag()),this},_perp(){const i=this.y;return this.y=this.x,this.x=-i,this},_rotate(i){const n=Math.cos(i),d=Math.sin(i),p=n*this.x-d*this.y,_=d*this.x+n*this.y;return this.x=p,this.y=_,this},_rotateAround(i,n){const d=Math.cos(i),p=Math.sin(i),_=n.x+d*(this.x-n.x)-p*(this.y-n.y),S=n.y+p*(this.x-n.x)+d*(this.y-n.y);return this.x=_,this.y=S,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:Mh};Mh.convert=function(i){if(i instanceof Mh)return i;if(Array.isArray(i))return new Mh(+i[0],+i[1]);if(i.x!==void 0&&i.y!==void 0)return new Mh(+i.x,+i.y);throw new Error("Expected [x, y] or {x, y} point format")};var oi,kd=(oi=class{static testProp(n){if(!oi.docStyle)return n[0];for(let d=0;d<n.length;d++)if(n[d]in oi.docStyle)return n[d];return n[0]}static create(n,d,p){const _=window.document.createElement(n);return d!==void 0&&(_.className=d),p&&p.appendChild(_),_}static createNS(n,d){return window.document.createElementNS(n,d)}static disableDrag(){oi.docStyle&&oi.selectProp&&(oi.userSelect=oi.docStyle[oi.selectProp],oi.docStyle[oi.selectProp]="none")}static enableDrag(){oi.docStyle&&oi.selectProp&&(oi.docStyle[oi.selectProp]=oi.userSelect)}static setTransform(n,d){n.style[oi.transformProp]=d}static addEventListener(n,d,p,_={}){"passive"in _?n.addEventListener(d,p,_):n.addEventListener(d,p,_.capture)}static removeEventListener(n,d,p,_={}){"passive"in _?n.removeEventListener(d,p,_):n.removeEventListener(d,p,_.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",oi.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",oi.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",oi.suppressClickInternal,!0)},0)}static getScale(n){const d=n.getBoundingClientRect();return{x:d.width/n.offsetWidth||1,y:d.height/n.offsetHeight||1,boundingClientRect:d}}static getPoint(n,d,p){const _=d.boundingClientRect;return new Mh((p.clientX-_.left)/d.x-n.clientLeft,(p.clientY-_.top)/d.y-n.clientTop)}static mousePos(n,d){const p=oi.getScale(n);return oi.getPoint(n,p,d)}static touchPos(n,d){const p=[],_=oi.getScale(n);for(let S=0;S<d.length;S++)p.push(oi.getPoint(n,_,d[S]));return p}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}},xi(oi,"docStyle",typeof window<"u"&&window.document&&window.document.documentElement.style),xi(oi,"userSelect"),xi(oi,"selectProp",oi.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"])),xi(oi,"transformProp",oi.testProp(["transform","WebkitTransform"])),oi),w2="#ffe64b",S2=50,Sz=class extends hs.Marker{constructor(n){n??(n={}),n.element=kd.create("div","maplibregl-gradient-marker"),n.className&&n.element.classList.add(n.className);super(n);xi(this,"_interactive");xi(this,"_shape");xi(this,"_icon");xi(this,"_height",S2);xi(this,"_text");xi(this,"_circleElement",null);xi(this,"_iconElement",null);xi(this,"_textElement",null);xi(this,"_markerElement");xi(this,"_onActive",()=>{this._map.getContainer().addEventListener("mouseup",this._onInactive,{once:!0}),this._map.getContainer().addEventListener("touchend",this._onInactive,{once:!0}),this._element.classList.add("active")});xi(this,"_onInactive",()=>{this._element.classList.remove("active")});this._draggable&&this._element.classList.add("draggable"),this._interactive=n&&n.interactive===!1?!1:"pending",this._shape=(n&&n.shape)??"pin",this._color=(n&&n.color)??w2,this._icon=n&&n.icon,this._text=n&&n.text,this._defaultMarker=!0,this._element.setAttribute("aria-label","Map marker"),this._element.setAttribute("tabindex","0"),this.setScale(this._scale),this.setColor(this._color),this._markerElement=kd.create("div","marker"),this.setShape(this._shape),this._text?this.setText(this._text):this._icon&&this.setIcon(this._icon);const d=kd.create("div","target");this._element.appendChild(this._markerElement),this._element.appendChild(d)}addTo(n){return hs.Marker.prototype.addTo.apply(this,[n]),this._interactive==="pending"&&this.setInteractive(!0),this}setInteractive(n=!0){this._interactive!==n&&(this._interactive=n,n?this._element.dataset.interactive="":delete this._element.dataset.interactive,n?(this._element.addEventListener("mousedown",this._onActive),this._element.addEventListener("touchstart",this._onActive)):(this._element.removeEventListener("mousedown",this._onInactive),this._element.removeEventListener("touchstart",this._onInactive)))}getInteractive(){return this._interactive}remove(){return this._map&&this.setInteractive(!1),hs.Marker.prototype.remove.apply(this),this}setIcon(n){var d,p;return this.resetIconText(),this._icon=n,n?(this._circleElement=kd.create("div","circle",this._markerElement),typeof n=="string"?(this._iconElement=kd.create("i",n,this._markerElement),this._iconElement.className=n||""):typeof n=="function"?(this._iconElement=n(),(d=this._markerElement)==null||d.append(this._iconElement)):(this._iconElement=n,(p=this._markerElement)==null||p.append(n)),this):this}getIcon(){return this._icon}resetIconText(){var n,d,p;(n=this._circleElement)==null||n.remove(),(d=this._iconElement)==null||d.remove(),(p=this._textElement)==null||p.remove(),this._circleElement=null,this._iconElement=null,this._textElement=null}setText(n){return this.resetIconText(),this._text=n,n?(this._circleElement=kd.create("div","circle",this._markerElement),this._textElement=kd.create("div","text",this._markerElement),this._textElement.innerText=n,this):this}getText(){return this._text}setColor(n){return this._color=n||w2,this._element.style.setProperty("--marker-color",this._color),this}getColor(){return this._color}setScale(n=1,d=S2){return this._scale=n,this._height=d*this._scale,this._element.style.setProperty("--marker-scale",n.toString()),this}getScale(){return this._scale}setShape(n){return this._shape=n||"pin",this._anchor=this._shape==="pin"?"bottom":"center",this._element.dataset.shape=this._shape,this._update(),this}getShape(){return this._shape}setDraggable(n){return hs.Marker.prototype.setDraggable.apply(this,[n]),this._element.classList.toggle("draggable",n),this}},T2={dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",click:"onClick"},Tz=se.memo(se.forwardRef(function(n,d){var sr;const{longitude:p,latitude:_,...S}=n,y=Hm(),[l,C]=qm(S),P=se.useRef(l),k=se.useRef();k.current=C;const O=se.useMemo(()=>{const ir=new Sz({...l,anchor:"bottom"});return ir.setLngLat([p,_]),ir},[]),L=Gm(T2,C).join("-");se.useEffect(()=>{function ir(or){var Rt,dr,De;const Ct=or.type,Nt=T2[Ct];(Rt=k.current)!=null&&Rt[Nt]?(De=(dr=k.current)[Nt])==null||De.call(dr,or):console.info("not managed RGradientMarker event",Ct,or)}const Xt=L.split("-");return Xt.forEach(or=>{or==="click"?O.getElement().addEventListener("click",ir):O.on(or,ir)}),()=>{Xt.forEach(or=>{or==="click"?O.getElement().removeEventListener("click",ir):O.off(or,ir)})}},[L,O]),se.useEffect(()=>(O.addTo(y),()=>void O.remove()),[]);const{scale:F,color:G,text:ee,icon:X,interactive:W,className:pe,draggable:me,clickTolerance:_e=0,rotation:Se,rotationAlignment:ke,subpixelPositioning:nt=!1,pitchAlignment:Ke,shape:Ye,opacity:ht,opacityWhenCovered:kt}=l;return se.useImperativeHandle(d,()=>O,[O]),P.current.className!==pe&&s0(O._element,((sr=P.current.className)==null?void 0:sr.split(" "))||[],(pe==null?void 0:pe.split(" "))||[]),O.getInteractive()!==W&&O.setInteractive(W),O.getShape()!==Ye&&O.setShape(Ye),(O.getLngLat().lng!==p||O.getLngLat().lat!==_)&&O.setLngLat([p,_]),O.isDraggable()!==me&&O.setDraggable(me),O._clickTolerance!==_e&&(O._clickTolerance=_e),O.getRotation()!==Se&&O.setRotation(Se),O.getRotationAlignment()!==ke&&O.setRotationAlignment(ke),O.getPitchAlignment()!==Ke&&O.setPitchAlignment(Ke),(O._opacity!==ht||O._opacityWhenCovered!==kt)&&O.setOpacity(ht,kt),O.setSubpixelPositioning&&O._subpixelPositioning!==nt&&O.setSubpixelPositioning(nt),O.getColor()!==G&&O.setColor(G),O.getScale()!==F&&O.setScale(F),O.getText()!==ee&&O.setText(ee),O.getIcon()!==X&&O.setIcon(X),P.current=l,null}));function PM({position:i,className:n="maplibregl-ctrl maplibregl-ctrl-group"}){var S;const d=Hm(),p=se.useRef(),_=se.useRef({className:n});if(!p.current){const y=document.createElement("div");y.className=n,p.current=y}return se.useEffect(()=>{const y=p.current;if(y&&!y.parentElement){const l=d._controlPositions[i];if(!l)throw new Error(`Unable to add control, position ${i} doesn't exists`);i.indexOf("bottom")!==-1?l.insertBefore(y,l.firstChild):l.appendChild(y)}return()=>{p.current&&p.current.remove()}},[d,i]),_.current.className!==n&&s0(p.current,((S=_.current.className)==null?void 0:S.split(" "))||[],(n==null?void 0:n.split(" "))||[]),_.current={className:n},{container:p.current}}function Mz({height:i=27}){const[n,d]=se.useState("25s");return q.jsxs("svg",{width:i*21/27,height:i,viewBox:"-10.5 -10.5 21 27",fill:"none",version:"1.1",id:"svg3",xmlns:"http://www.w3.org/2000/svg",onMouseEnter:()=>d("2s"),onMouseLeave:()=>d("25s"),children:[q.jsx("path",{fill:"#82b4fe",fillRule:"evenodd",d:"m 0.04378077,-7.0160133 c -3.95934197,-0.025693 -7.19979577,2.9709105 -7.22395607,6.67957072 -0.021351,3.28396108 1.6024867,4.88716988 3.3609363,6.62322508 1.2259466,1.2102943 2.5172339,2.4851233 3.36206037,4.4390285 0.056993,0.04631 0.095121,0.07722 0.1114948,0.09183 a 0.41450831,0.41450831 0 0 0 0.2727553,0.103225 0.41515047,0.41515047 0 0 0 0.2741963,-0.09961 c 0.00438,-0.0039 0.012527,-0.0074 0.022479,-0.01165 0.027304,-0.01171 0.068791,-0.02955 0.090222,-0.0789 C 1.1559887,8.7954149 2.4656545,7.5377628 3.7164045,6.3367792 5.4974902,4.626493 7.158975,3.0309869 7.1802478,-0.24301718 7.2043965,-3.9517594 4.0032063,-6.9901745 0.04378537,-7.016023 Z m -0.06903,10.6235008 C 1.9352357,3.6202595 3.5351559,2.0173639 3.5480768,0.02733852 3.5610008,-1.9626869 1.9821136,-3.5862858 0.02154667,-3.5990486 -1.9390213,-3.6118206 -3.5388592,-2.0089214 -3.5518634,-0.01889648 -3.5647874,1.9711289 -1.9858982,3.5947246 -0.02533123,3.6074875 Z"}),q.jsx("path",{fill:"currentColor",d:"m -2.4911489,12.068709 c -0.3270955,-0.0022 -0.5946317,0.359604 -0.5975214,0.807906 l -0.014767,2.269118 c -0.00295,0.448302 0.2598305,0.813445 0.587006,0.815611 l 5.0075702,0.03259 c 0.3270965,0.0022 0.5946306,-0.359606 0.5975218,-0.807909 l 0.014775,-2.269117 c 0.00304,-0.44838 -0.259831,-0.813523 -0.5870064,-0.815609 z"}),q.jsxs("g",{children:[q.jsx("circle",{cx:"0",cy:"0",r:"2",fill:"currentColor",id:"circle1"}),q.jsxs("g",{stroke:"currentColor",strokeWidth:"1",fill:"none",id:"g3",children:[q.jsx("ellipse",{rx:"10",ry:"4.5",id:"ellipse1",cx:"0",cy:"0"}),q.jsx("ellipse",{rx:"10",ry:"4.5",transform:"rotate(60)",id:"ellipse2",cx:"0",cy:"0"}),q.jsx("ellipse",{rx:"10",ry:"4.5",transform:"rotate(120)",id:"ellipse3",cx:"0",cy:"0"})]}),q.jsx("animateTransform",{attributeName:"transform",type:"rotate",dur:n,values:"0 0 0;360 0 0;",repeatCount:"indefinite"})]})]})}se.memo(function({position:n="bottom-left"}){const{container:d}=PM({position:n,className:"maplibregl-ctrl maplibregl-ctrl-mrc-logo"});return G_.createPortal(q.jsx("a",{target:"_blank",rel:"noopener nofollow",href:"https://maplibre-react-components.pentatrion.com","aria-label":"MapLibre React components logo",children:q.jsx(Mz,{height:30})}),d)});function Az(i){const n=se.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return n.current=i,se.useCallback((...d)=>{var p;return(p=n.current)==null?void 0:p.call(n,...d)},[n])}function Rh({position:i="top-right",factory:n,onRemove:d}){const p=Hm(),_=se.useMemo(()=>n(p),[p]),S=Az(d||null);return se.useEffect(()=>(p.hasControl(_)||p.addControl(_,i),()=>{S&&S(p),p.hasControl(_)&&p.removeControl(_)}),[p,_,S,i]),_}se.memo(se.forwardRef(function({position:n="bottom-right",...d},p){const _=Rh({position:n,factory:()=>new hs.AttributionControl(d)});return se.useImperativeHandle(p,()=>_),null}));se.memo(se.forwardRef(function({position:n="top-right",...d},p){const _=Rh({position:n,factory:()=>new hs.FullscreenControl(d)});return se.useImperativeHandle(p,()=>_),null}));se.memo(se.forwardRef(function({position:n="top-right",...d},p){const _=Rh({position:n,factory:()=>new hs.GeolocateControl(d)});return se.useImperativeHandle(p,()=>_),null}));se.memo(se.forwardRef(function({position:n="top-right"},d){const p=Rh({position:n,factory:()=>new hs.GlobeControl});return se.useImperativeHandle(d,()=>p),null}));se.memo(se.forwardRef(function({position:n="bottom-left",...d},p){const _=Rh({position:n,factory:()=>new hs.LogoControl(d)});return se.useImperativeHandle(p,()=>_),null}));se.memo(se.forwardRef(function({position:n="top-right",...d},p){const _=Rh({position:n,factory:()=>new hs.NavigationControl(d)});return se.useImperativeHandle(p,()=>_),null}));se.memo(se.forwardRef(function({position:n="bottom-left",...d},p){const _=Rh({position:n,factory:()=>new hs.ScaleControl(d)});return se.useImperativeHandle(p,()=>_),null}));se.memo(se.forwardRef(function({position:n="top-right",...d},p){const _=Rh({position:n,factory:()=>new hs.TerrainControl(d)});return se.useImperativeHandle(p,()=>_),null}));function Cz(){const{currentTour:i}=ro(),n=se.useRef(null),[d,p]=se.useState(!1),_=i.locations.map(F=>F.coordinates),S=[Math.min(..._.map(F=>F[0])),Math.min(..._.map(F=>F[1]))],y=[Math.max(..._.map(F=>F[0])),Math.max(..._.map(F=>F[1]))],l=[S,y],C=S[0]===y[0]&&S[1]===y[1],P=()=>{n.current&&(C?(n.current.setCenter(S),n.current.setZoom(10)):n.current.fitBounds(l,{padding:{top:50,bottom:50,left:50,right:50},duration:1e3}),p(!1))},k=()=>{if(n.current){const F=n.current.getBounds(),G=F.getSouthWest().lng===S[0]&&F.getSouthWest().lat===S[1]&&F.getNorthEast().lng===y[0]&&F.getNorthEast().lat===y[1];p(!G)}},O=()=>{if(n.current){const F=n.current.getZoom();n.current.easeTo({zoom:F+1,duration:500})}},L=()=>{if(n.current){const F=n.current.getZoom();n.current.easeTo({zoom:F-1,duration:500})}};return q.jsxs("section",{className:"relative overflow-hidden",children:[q.jsx("div",{className:"h-[500px]",id:"map",children:q.jsxs(_z,{ref:n,initialCenter:C?S:[13.388,52.517],className:"maplibregl-theme-modern",minZoom:2,initialZoom:C?10:8,scrollZoom:!1,initialAttributionControl:!1,mapStyle:"/mapStyle/light.json",initialBounds:C?void 0:l,initialFitBoundsOptions:{padding:{top:100,bottom:50,left:100,right:100}},onMove:k,onZoom:k,children:[i.locations.map((F,G)=>q.jsx(Tz,{text:F.day,color:"#57534d",longitude:F.coordinates[0],latitude:F.coordinates[1]},G*3)),q.jsx(Ez,{})]})}),q.jsxs("div",{className:"absolute top-5 right-5 z-10 flex flex-col gap-2",children:[q.jsx("button",{onClick:O,className:"rounded-full bg-white p-3 shadow-md hover:bg-gray-100",title:"Zoom In",children:q.jsx(b6,{className:"text-gray-700",size:16})}),q.jsx("button",{onClick:L,className:"rounded-full bg-white p-3 shadow-md hover:bg-gray-100",title:"Zoom Out",children:q.jsx(x6,{className:"text-gray-700",size:16})})]}),d&&q.jsx("button",{onClick:P,className:"absolute right-5 bottom-5 z-10 rounded-full bg-white p-3 shadow-md hover:bg-gray-100",title:"Reset Map View",children:q.jsx(w6,{className:"text-gray-700",size:16})})]})}function Ez(){const{container:i}=PM({position:"bottom-left"});return G_.createPortal(q.jsx("div",{className:"rounded bg-stone-700 p-2",children:q.jsx("p",{className:"font-semibold text-white",children:"Number represents Day"})}),i)}var x_={},M2;function Pz(){if(M2)return x_;M2=1,Object.defineProperty(x_,"__esModule",{value:!0});var i=A2(),n=$_(),d=function(){return d=Object.assign||function(L){for(var F,G=1,ee=arguments.length;G<ee;G++)for(var X in F=arguments[G])Object.prototype.hasOwnProperty.call(F,X)&&(L[X]=F[X]);return L},d.apply(this,arguments)};function p(L,F,G){for(var ee,X=0,W=F.length;X<W;X++)!ee&&X in F||(ee||(ee=Array.prototype.slice.call(F,0,X)),ee[X]=F[X]);return L.concat(ee||Array.prototype.slice.call(F))}function _(L){var F=L.size,G=F===void 0?25:F,ee=L.SVGstrokeColor,X=ee===void 0?"currentColor":ee,W=L.SVGstorkeWidth,pe=W===void 0?0:W,me=L.SVGclassName,_e=me===void 0?"star-svg":me,Se=L.SVGstyle;return i.jsx("svg",d({className:_e,style:Se,stroke:X,fill:"currentColor",strokeWidth:pe,viewBox:"0 0 24 24",width:G,height:G,xmlns:"http://www.w3.org/2000/svg"},{children:i.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}))}function S(L,F){switch(F.type){case"PointerMove":return d(d({},L),{hoverValue:F.payload,hoverIndex:F.index});case"PointerLeave":return d(d({},L),{ratingValue:L.ratingValue,hoverIndex:0,hoverValue:null});case"MouseClick":return d(d({},L),{valueIndex:L.hoverIndex,ratingValue:F.payload});default:return L}}var y="style-module_starRatingWrap__q-lJC",l="style-module_simpleStarRating__nWUxf",C="style-module_fillIcons__6---A",P="style-module_emptyIcons__Bg-FZ",k="style-module_tooltip__tKc3i";function O(){return typeof window<"u"&&window.matchMedia("(pointer: coarse)").matches||"ontouchstart"in window||typeof navigator<"u"&&navigator.maxTouchPoints>0}return function(L,F){F===void 0&&(F={});var G=F.insertAt;if(typeof document<"u"){var ee=document.head||document.getElementsByTagName("head")[0],X=document.createElement("style");X.type="text/css",G==="top"&&ee.firstChild?ee.insertBefore(X,ee.firstChild):ee.appendChild(X),X.styleSheet?X.styleSheet.cssText=L:X.appendChild(document.createTextNode(L))}}(".style-module_starRatingWrap__q-lJC{display:inline-block;touch-action:none}.style-module_simpleStarRating__nWUxf{display:inline-block;overflow:hidden;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap}.style-module_fillIcons__6---A{display:inline-block;overflow:hidden;position:absolute;top:0;white-space:nowrap}.style-module_emptyIcons__Bg-FZ{display:inline-block}.style-module_tooltip__tKc3i{background-color:#333;border-radius:5px;color:#fff;display:inline-block;padding:5px 15px;vertical-align:middle}"),x_.Rating=function(L){var F,G,ee=L.onClick,X=L.onPointerMove,W=L.onPointerEnter,pe=L.onPointerLeave,me=L.initialValue,_e=me===void 0?0:me,Se=L.iconsCount,ke=Se===void 0?5:Se,nt=L.size,Ke=nt===void 0?40:nt,Ye=L.readonly,ht=Ye!==void 0&&Ye,kt=L.rtl,sr=kt!==void 0&&kt,ir=L.customIcons,Xt=ir===void 0?[]:ir,or=L.allowFraction,Ct=or!==void 0&&or,Nt=L.style,Rt=L.className,dr=Rt===void 0?"react-simple-star-rating":Rt,De=L.transition,wt=De!==void 0&&De,Zt=L.allowHover,Ht=Zt===void 0||Zt,zt=L.disableFillHover,er=zt!==void 0&&zt,nr=L.fillIcon,Qr=nr===void 0?null:nr,br=L.fillColor,ti=br===void 0?"#ffbc0b":br,Ur=L.fillColorArray,li=Ur===void 0?[]:Ur,Di=L.fillStyle,zr=L.fillClassName,pr=zr===void 0?"filled-icons":zr,Ki=L.emptyIcon,Fi=Ki===void 0?null:Ki,Yi=L.emptyColor,we=Yi===void 0?"#cccccc":Yi,Re=L.emptyStyle,We=L.emptyClassName,vt=We===void 0?"empty-icons":We,xt=L.allowTitleTag,Et=xt===void 0||xt,Ut=L.showTooltip,ur=Ut!==void 0&&Ut,_r=L.tooltipDefaultText,qr=_r===void 0?"Your Rate":_r,Pi=L.tooltipArray,Ui=Pi===void 0?[]:Pi,zi=L.tooltipStyle,Rn=L.tooltipClassName,In=Rn===void 0?"react-simple-star-rating-tooltip":Rn,ni=L.SVGclassName,ri=ni===void 0?"star-svg":ni,je=L.titleSeparator,ne=je===void 0?"out of":je,ae=L.SVGstyle,he=L.SVGstorkeWidth,be=he===void 0?0:he,oe=L.SVGstrokeColor,Be=oe===void 0?"currentColor":oe,Ve=n.useReducer(S,{hoverIndex:0,valueIndex:0,ratingValue:_e,hoverValue:null}),Ce=Ve[0],Ue=Ce.ratingValue,qe=Ce.hoverValue,Fe=Ce.hoverIndex,dt=Ce.valueIndex,Pt=Ve[1];n.useEffect(function(){_e&&Pt({type:"MouseClick",payload:0})},[_e]);var At=n.useMemo(function(){return Ct?2*ke:ke},[Ct,ke]),Ft=n.useMemo(function(){return _e>At?0:Ct||Math.floor(_e)===_e?Math.round(_e/ke*100):2*Math.ceil(_e)*10},[Ct,_e,ke,At]),lr=n.useMemo(function(){return(Ct?2*_e-1:_e-1)||0},[Ct,_e]),Je=n.useCallback(function(yt){return ke%2!=0?yt/2/10:yt*ke/100},[ke]),Wt=function(yt){for(var Lt=yt.clientX,Hr=yt.currentTarget.children[0].getBoundingClientRect(),Vi=Hr.left,si=Hr.right,ar=Hr.width,Za=sr?si-Lt:Lt-Vi,_n=At,qa=Math.round(ar/At),$i=0;$i<=At;$i+=1)if(Za<=qa*$i){_n=$i===0&&Za<qa?0:$i;break}var sa=_n-1;_n>0&&(Pt({type:"PointerMove",payload:100*_n/At,index:sa}),X&&qe&&X(Je(qe),sa,yt))},vr=function(yt){qe&&(Pt({type:"MouseClick",payload:qe}),ee&&ee(Je(qe),Fe,yt))},Vr=n.useMemo(function(){if(Ht){if(er){var yt=Ue&&Ue||Ft;return qe&&qe>yt?qe:yt}return qe&&qe||Ue&&Ue||Ft}return Ue&&Ue||Ft},[Ht,er,qe,Ue,Ft]);n.useEffect(function(){Ui.length>At&&console.error("tooltipArray Array length is bigger then Icons Count length.")},[Ui.length,At]);var Er=n.useCallback(function(yt){return qe&&yt[Fe]||Ue&&yt[dt]||_e&&yt[lr]},[qe,Fe,Ue,dt,_e,lr]),tt=n.useMemo(function(){return qe&&Je(qe)||Ue&&Je(Ue)||_e&&Je(Ft)},[qe,Je,Ue,_e,Ft]);return i.jsxs("span",d({className:y,style:{direction:"".concat(sr?"rtl":"ltr")}},{children:[i.jsxs("span",d({className:"".concat(l," ").concat(dr),style:d({cursor:ht?"":"pointer"},Nt),onPointerMove:ht?void 0:Wt,onPointerEnter:ht?void 0:function(yt){W&&W(yt),O()&&Wt(yt)},onPointerLeave:ht?void 0:function(yt){O()&&vr(),Pt({type:"PointerLeave"}),pe&&pe(yt)},onClick:ht?void 0:vr,"aria-hidden":"true"},{children:[i.jsx("span",d({className:"".concat(P," ").concat(vt),style:d({color:we},Re)},{children:p([],Array(ke)).map(function(yt,Lt){var Hr;return i.jsx(n.Fragment,{children:((Hr=Xt[Lt])===null||Hr===void 0?void 0:Hr.icon)||Fi||i.jsx(_,{SVGclassName:ri,SVGstyle:ae,SVGstorkeWidth:be,SVGstrokeColor:Be,size:Ke})},Lt)})})),i.jsx("span",d({className:"".concat(C," ").concat(pr),style:d((F={},F[sr?"right":"left"]=0,F.color=Er(li)||ti,F.transition=wt?"width .2s ease, color .2s ease":"",F.width="".concat(Vr,"%"),F),Di),title:Et?"".concat(tt," ").concat(ne," ").concat(ke):void 0},{children:p([],Array(ke)).map(function(yt,Lt){var Hr;return i.jsx(n.Fragment,{children:((Hr=Xt[Lt])===null||Hr===void 0?void 0:Hr.icon)||Qr||i.jsx(_,{SVGclassName:ri,SVGstyle:ae,SVGstorkeWidth:be,SVGstrokeColor:Be,size:Ke})},Lt)})}))]})),ur&&i.jsx("span",d({className:"".concat(k," ").concat(In),style:d((G={},G[sr?"marginRight":"marginLeft"]=20,G),zi)},{children:(Ui.length>0?Er(Ui):tt)||qr}))]}))},x_}var mx=Pz();function Rz({photo:i,userName:n,review:d,ratings:p}){return q.jsxs("div",{className:"mx-auto flex min-h-[19rem] min-w-[20rem] flex-col items-center justify-between space-y-10 rounded bg-white p-8 shadow-lg md:min-h-[300px] md:max-w-[400px] md:min-w-[350px]",children:[q.jsxs("div",{className:"space-y-5",children:[q.jsxs("div",{className:"flex items-center gap-5",children:[q.jsx("img",{className:"text-natours size-10 rounded-full shadow",src:i}),q.jsx("p",{className:"font-semibold text-stone-600",children:n})]}),q.jsx("div",{children:q.jsx("p",{className:"text-stone-800/50",children:d})})]}),q.jsx("div",{children:q.jsx(mx.Rating,{initialValue:Math.round(p),size:25,readonly:!0,fillColor:"#55c57a"})})]})}const Iz={myReviews:[],loading:!1,loadingUpdate:!1,loadingWrite:!1,loadingDelete:!1,error:null};function Dz(i,n){switch(n.type){case"loading":return{...i,loading:n.payload};case"loadingUpdate":return{...i,loadingUpdate:n.payload};case"loadingWrite":return{...i,loadingWrite:n.payload};case"loadingDelete":return{...i,loadingDelete:n.payload};case"loadMyReviews":return{...i,myReviews:n.payload,loading:!1};case"error":return{...i,error:n.payload,loading:!1};default:throw new Error(`Unhandled action type: ${n.type}`)}}const RM=se.createContext();function zz({children:i}){const[n,d]=se.useReducer(Dz,Iz),{userInitialized:p,isAuthenticated:_}=ps();se.useEffect(function(){async function P(){!p||!_||await S()}P()},[p,_]);async function S(){try{d({type:"loading",payload:!0});const P=await ei.get("/api/v1/reviews/user",{withCredentials:!0});d({type:"loadMyReviews",payload:P.data.reviews})}catch(P){d({type:"error",payload:P.message}),console.error(P)}finally{d({type:"loading",payload:!1})}}async function y(P){try{d({type:"loadingWrite",payload:!0}),await ei.post("/api/v1/reviews",P,{withCredentials:!0}),await S()}catch(k){d({type:"error",payload:k.message}),console.error(k)}finally{d({type:"loadingWrite",payload:!1})}}async function l(P,k){try{d({type:"loadingUpdate",payload:!0}),await ei.patch(`/api/v1/reviews/${P}`,k),await S()}catch(O){console.error(O)}finally{d({type:"loadingUpdate",payload:!1})}}async function C(P){try{d({type:"loadingDelete",payload:!0}),await ei.delete(`/api/v1/reviews/${P}`),await S()}catch(k){console.error(k)}finally{d({type:"loadingDelete",payload:!1})}}return q.jsx(RM.Provider,{value:{myReviews:n.myReviews,loading:n.loading,error:n.error,loadingUpdate:n.loadingUpdate,loadingWrite:n.loadingWrite,loadingDelete:n.loadingDelete,getMyReviews:S,deleteMyReview:C,writeReview:y,updateMyReview:l},children:i})}function gx(){const i=se.useContext(RM);if(!i)throw new Error("useReview must be used within a ReviewProvider");return i}function Lz({tourId:i}){const[n,d]=se.useState(""),[p,_]=se.useState(0),{user:S}=ps(),{getCurrentTour:y,currentTour:l}=ro(),{loadingWrite:C,writeReview:P}=gx(),k=F=>{_(F)};function O(F,G){let ee=!0;return!G&&!F?(Cr.error("You can't submit without review and ratings"),ee=!1):F.length<7?(Cr.error("Please write atleast two words!"),ee=!1):G===0?(Cr.error("You must select ratings"),ee=!1):ee}async function L(F){F.preventDefault();const G={review:n,rating:p,tour:i,user:S._id};O(n,p)&&(await P(G),await y(l.slug))}return q.jsx("div",{className:"flex min-h-[300px] max-w-md min-w-[300px] flex-col gap-3 space-y-1 rounded bg-white px-8 py-8 shadow-lg",children:q.jsxs("form",{className:"space-y-5",onSubmit:L,children:[q.jsxs("div",{className:"flex items-center gap-5",children:[q.jsx("img",{className:"text-natours size-10 rounded-full shadow",src:`/img/users/${S.photo}`}),q.jsx("p",{className:"font-semibold text-stone-600",children:S.name})]}),q.jsx("div",{className:"w-full",children:q.jsx("textarea",{rows:4,draggable:"false",value:n,placeholder:"Write your review",onChange:F=>d(F.target.value),className:"focus:ring-natours w-full resize-none rounded border border-stone-400/50 p-2 text-stone-600 outline-none focus:ring-2","aria-label":"Write your review"})}),q.jsx("div",{className:"flex w-full justify-center",children:q.jsx(mx.Rating,{size:25,className:"mx-auto",fillColor:"#55c57a",onClick:k})}),q.jsx("div",{className:"my-1 flex w-full justify-center",children:q.jsx("button",{className:"bg-natours w-full cursor-pointer rounded-full px-3 py-2 font-bold text-white",children:C?q.jsx(da,{}):"Submit"})})]})})}function kz(){const{currentTour:i,myBookings:n}=ro(),{user:d}=ps(),p=n.find(S=>S.tour.id===i.id),_=d&&(i.reviews.length===0||!i.reviews.some(S=>S.user._id===d.id))&&d.role==="user";return q.jsxs("section",{className:"natours-gradient flex flex-col items-center justify-center space-y-5 overflow-hidden",children:[q.jsxs("div",{className:"mt-8 flex flex-col items-center",children:[q.jsxs("p",{className:"flex items-center gap-2 text-2xl font-semibold text-white/80",children:[q.jsx("span",{children:q.jsx(p6,{className:"mt-1 p-0"})}),"User Reviews"]}),i.reviews.length!==0&&q.jsxs("p",{className:"text-2xl font-semibold text-white",children:[i.ratingsAverage," / 5"]})]}),q.jsxs("div",{className:"flex min-h-[40vh] w-full items-center justify-evenly gap-10 overflow-x-auto px-10 py-5 pb-15",children:[p&&_&&q.jsx(Lz,{tourId:i.id}),i.reviews.length===0?q.jsxs("p",{className:"flex flex-col items-center text-2xl font-bold whitespace-nowrap text-white/80 md:text-3xl",children:[q.jsx("span",{children:q.jsx(rz,{className:"size-12"})}),"No reviews found!"]}):[...i.reviews].reverse().map(S=>q.jsx(Rz,{ratings:S.rating,userName:S.user.name,photo:`/img/users/${S.user.photo}`,review:S.review},S._id))]})]})}function Bz(){const{slug:i}=vA(),{currentTour:n,loading:d,getCurrentTour:p,myBookings:_}=ro();return se.useEffect(()=>{async function S(){await p(i)}S()},[i]),d?q.jsx("div",{className:"flex h-[calc(100vh-10vh)] items-center justify-center",children:q.jsx(da,{className:"size-12",color:"green"})}):Object.keys(n).length===0?q.jsxs("div",{className:"flex h-[calc(100vh-10vh)] flex-col items-center justify-center gap-3",children:[q.jsx(da,{className:"size-12",color:"green"}),q.jsx("p",{className:"text-stone-600 md:text-xl",children:"Loading Tour . . ."})]}):q.jsxs(q.Fragment,{children:[q.jsx(iz,{}),q.jsx(lz,{}),q.jsx(ez,{}),q.jsx(Cz,{}),q.jsx(kz,{}),q.jsx("div",{children:!_.find(S=>n._id===S.tour._id)&&q.jsx(J6,{})})]})}function Oz(i){return Wi({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10.5 3.5a2.5 2.5 0 0 0-5 0V4h5zm1 0V4H15v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4h3.5v-.5a3.5 3.5 0 1 1 7 0m-.646 5.354a.5.5 0 0 0-.708-.708L7.5 10.793 6.354 9.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0z"},child:[]}]})(i)}function jz({tour:i}){const{myBookings:n}=ro(),d=n.find(_=>_.tour.id===i.id);function p(_){return _?_.charAt(0).toUpperCase()+_.slice(1):""}return q.jsx("section",{className:"relative m-7 flex items-center justify-center",children:q.jsxs("div",{className:"relative max-w-[388px] overflow-clip rounded bg-white shadow-lg",children:[d&&q.jsxs("div",{className:"bg-natours/50 absolute top-2 right-2 z-40 flex items-center gap-3 rounded-full px-4 py-1.5 text-white backdrop-blur-sm lg:top-3 lg:right-3",children:[q.jsx(Oz,{}),q.jsx("span",{className:"hidden lg:block",children:"Purchased"})]}),q.jsxs("div",{className:"relative",children:[q.jsxs("div",{className:"img-clip",children:[q.jsx("div",{className:"bg-natours/30 absolute h-full w-full"}),q.jsx("img",{src:`/img/tours/${i.imageCover}`,alt:"scenic image",className:"min-h-[250px] min-w-[300px] object-cover"})]}),q.jsx("h3",{className:"absolute right-5 bottom-6",children:q.jsx("span",{className:"natours-gradient-t px-3 py-2 text-2xl font-light text-white shadow-md lg:text-2xl",children:i.name})})]}),q.jsxs("div",{className:"space-y-5 p-8",children:[q.jsxs("div",{className:"space-y-4",children:[q.jsxs("p",{className:"font-semibold text-stone-600",children:[p(i.difficulty)," - ",i.duration," Days Tour"]}),q.jsx("p",{className:"font text-stone-800/50 italic",children:i.summary})]}),q.jsxs("div",{className:"mt-10 grid grid-cols-2 gap-7",children:[q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx(SM,{className:"text-natours size-7"}),q.jsx("p",{className:"text-stone-800/50",children:i.startLocation.description})]}),q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx(gM,{className:"text-natours size-7"}),q.jsx("p",{className:"text-stone-800/50",children:new Date(i.startDates[0]).toLocaleString("en-US",{month:"short",year:"numeric"})})]}),q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx(tz,{className:"text-natours size-7"}),q.jsxs("p",{className:"text-stone-800/50",children:[i.locations.length," Stops"]})]}),q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx(TM,{className:"text-natours size-7"}),q.jsxs("p",{className:"text-stone-800/50",children:[i.maxGroupSize," People"]})]})]})]}),q.jsxs("div",{className:"flex w-full items-center border-t border-stone-600/30 bg-stone-400/10 p-6",children:[q.jsxs("div",{className:"w-1/2 justify-baseline",children:[q.jsxs("p",{className:"text-lg font-bold text-stone-600",children:["$",i.price,q.jsx("span",{className:"ml-1 text-sm font-medium text-stone-800/50",children:"Per person"})]}),q.jsxs("p",{className:"text-lg font-bold text-stone-600",children:[i.ratingsAverage,q.jsx("span",{className:"ml-1 text-sm font-medium text-stone-800/50",children:"Ratings"})]})]}),q.jsx("div",{className:"flex w-1/2 items-center justify-center",children:q.jsx(ds,{to:`/tour/${i.slug}`,className:"btn-primary px-8 py-3 shadow-md",state:{tour:i},children:"Details"})})]})]})})}function Nz(){const{loading:i,error:n,tours:d}=ro();return q.jsxs(fs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"lg:grid lg:grid-cols-2 xl:grid-cols-3",children:[i&&q.jsx("div",{className:"flex h-[calc(100vh-10vh)] w-screen items-center justify-center",children:q.jsx(da,{className:"size-12",color:`
        green`})}),!i&&n&&q.jsx("p",{children:n}),!i&&!n&&d.map(p=>q.jsx(jz,{tour:p},p.id))]})}function Fz(){return q.jsxs("div",{className:"flex h-[calc(100vh-10vh)] flex-col items-center justify-center space-y-4",children:[q.jsxs("p",{className:"flex gap-3 text-5xl font-bold text-red-400",children:[q.jsx("span",{children:q.jsx(M6,{})}),"404!"]}),q.jsx("p",{className:"text-2xl font-semibold text-red-400",children:"Page Not Found"})]})}function b_({children:i}){const{isAuthenticated:n,loading:d,loadUser:p,userInitialized:_}=ps();return se.useEffect(()=>{async function S(){!n&&!d&&!_&&await p()}S()},[n,d,_]),d||!_?q.jsx(da,{color:"green"}):n?i:q.jsx(zA,{to:"/login",replace:!0})}function Uz(){const{loading:i,sendOtp:n,error:d,resetError:p,isAuthenticated:_}=ps(),S=to(),{emailTyped:y}=S.state||"",[l,C]=se.useState(!1),[P,k]=se.useState(""),O=Cu();se.useEffect(function(){if(_)return O("/account");p(),y&&k(y.trim())},[y]);async function L(){if(!t0.isEmail(P))return Cr.error("Please enter valid email address!"),C(!0);await n(P)&&O("/forgot-password/verify-otp",{state:{emailTyped:P}})}return q.jsx("section",{className:"my-auto flex w-full flex-col md:items-center",children:q.jsxs(fs.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},className:"mx-5 my-14 flex flex-col justify-between space-y-8 rounded-lg bg-white px-5 py-7 shadow-lg md:min-w-[600px] md:p-13 md:shadow-xl",children:[q.jsxs("div",{className:"flex items-center gap-3 space-y-1",children:[q.jsx(yM,{className:"text-natours m-0 size-7",onClick:()=>O(-1)}),q.jsx("h1",{className:"natours-gradient-text text-2xl font-bold",children:"Send Verification Code."})]}),q.jsxs("div",{className:"flex flex-col space-y-3",children:[q.jsx("div",{children:q.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Enter your Email Address."})}),q.jsx("input",{type:"text",className:`input-natours w-full text-stone-600 ${l?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"you@example.com",value:P,onChange:F=>{k(F.target.value.trim()),C(!1)}})]}),q.jsx("p",{className:"font-semibold text-red-400",children:d}),d&&q.jsx(ds,{to:"/forgot-password/verify-otp",className:"text-natours font-semibold",state:{emailTyped:P},children:"Already Have an Otp? Click here"}),q.jsx("div",{children:q.jsx(fs.button,{whileTap:{scale:.7},transition:{type:"keyframes",duration:.01},className:"btn-primary w-1/2 py-3 md:w-1/3",onClick:L,children:i?q.jsx(da,{}):"Send OTP"})})]})})}const Vz=({length:i,onOtpSubmit:n})=>{const[d,p]=se.useState(new Array(i).fill("")),_=se.useRef([]);se.useEffect(()=>{_.current[0]&&_.current[0].focus()},[]);const S=(C,P)=>{const k=C.target.value;if(isNaN(k))return;const O=[...d];O[P]=k.substring(k.length-1),p(O),k&&P<i-1&&_.current[P+1]&&_.current[P+1].focus();const L=O.join("");n(L)},y=(C,P)=>{if(C.key==="Backspace"){const k=[...d];k[P]="",p(k),P>0&&_.current[P-1]&&_.current[P-1].focus()}},l=C=>{_.current[C]&&_.current[C].focus()};return q.jsx("div",{className:"flex justify-between gap-2",children:d.map((C,P)=>q.jsx("input",{ref:k=>_.current[P]=k,value:C,onChange:k=>S(k,P),onKeyDown:k=>y(k,P),onClick:()=>l(P),type:"tel",maxLength:"1",className:"border-natours focus:ring-natours h-10 w-10 rounded bg-stone-200/70 text-center font-bold text-stone-700 outline-none focus:ring-3 md:h-14 md:w-14"},P))})};function $z(){const[i,n]=se.useState(""),{error:d,loading:p,verifyOtp:_,resetError:S,isAuthenticated:y}=ps(),l=Cu(),C=to(),{emailTyped:P}=C.state||"";se.useEffect(function(){if(y)return l("/account");if(S(),!P)return l("/forgot-password/send-otp")},[P,l]);function k(L){n(L)}async function O(){if(S(),i.length<6||!i)return Cr.error("Please Provide 6 digits otp!");await _(i,P)&&l("/forgot-password/reset-password",{state:{emailTyped:P}})}return q.jsx("section",{className:"my-auto flex w-full flex-col md:items-center",children:q.jsxs(fs.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},className:"mx-5 my-14 flex flex-col justify-between space-y-8 rounded-lg bg-white px-5 py-7 shadow-lg md:min-w-[600px] md:p-13 md:shadow-xl",children:[q.jsxs("div",{className:"flex items-center gap-3 space-y-1",children:[q.jsx(yM,{className:"text-natours m-0 size-7",onClick:()=>l(-1)}),q.jsx("h1",{className:"natours-gradient-text text-2xl font-bold",children:"Verify your OTP"})]}),q.jsxs("div",{className:"flex flex-col space-y-5",children:[q.jsx("div",{children:q.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Enter your Otp"})}),q.jsx(Vz,{length:6,onOtpSubmit:k})]}),q.jsx("p",{className:"font-semibold text-red-400",children:d}),q.jsx("div",{children:q.jsx(fs.button,{whileTap:{scale:.8},transition:{type:"keyframes",duration:.01},className:"btn-primary w-1/2 py-3 md:w-1/3",onClick:O,children:p?q.jsx(da,{}):"Verify"})})]})})}function Zz(){const{error:i,loading:n,resetPassword:d,resetError:p}=ps(),[_,S]=se.useState(""),[y,l]=se.useState(""),[C,P]=se.useState(!1),[k,O]=se.useState(!1),L=to(),{emailTyped:F}=L.state||"",G=Cu();se.useEffect(function(){if(p(),!F)return G("/forgot-password/send-otp")},[F,G]);function ee(W,pe){let me=!0;return W?W.length<8?(P(!0),Cr.error("Password must be at least 8 characters."),me=!1):P(!1):(P(!0),Cr.error("Password is required."),me=!1),pe?pe!==W?(O(!0),Cr.error("Passwords do not match."),me=!1):O(!1):(O(!0),Cr.error("Confirm Password id required"),me=!1),me}async function X(){if(!ee(_,y))return;await d(F,_,y)&&G("/login")}return q.jsx("section",{className:"my-auto flex w-full flex-col md:items-center",children:q.jsxs(fs.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},className:"mx-5 my-14 flex flex-col justify-between space-y-8 rounded-lg bg-white px-5 py-7 shadow-lg md:min-w-[600px] md:p-13 md:shadow-xl",children:[q.jsx("div",{className:"flex items-center gap-3 space-y-1",children:q.jsx("h1",{className:"natours-gradient-text text-2xl font-bold",children:"Change your password"})}),q.jsxs("div",{className:"flex flex-col space-y-3",children:[q.jsx("label",{htmlFor:"password",className:"font-semibold text-stone-600",children:"New Password"}),q.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${C?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"",name:"password",value:_,onChange:W=>{P(!1),S(W.target.value.trim())}})]}),q.jsxs("div",{className:"flex flex-col space-y-3",children:[q.jsx("label",{htmlFor:"confirm-password",className:"font-semibold text-stone-600",children:"Confirm Password"}),q.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${k?"border-3 border-red-400 focus:ring-0":""}`,placeholder:" ",name:"confirmPassword",value:y,onChange:W=>{O(!1),l(W.target.value.trim())}})]}),q.jsx("p",{className:"font-semibold text-red-400",children:i}),q.jsxs("div",{className:"flex gap-3",children:[q.jsx(fs.button,{whileTap:{scale:.8},transition:{type:"keyframes",duration:.01},className:"btn-primary w-1/2 px-4 py-3 text-xl",onClick:X,children:n?q.jsx(da,{}):"Save"}),q.jsx(fs.button,{whileTap:{scale:.8},transition:{type:"keyframes",duration:.01},className:"border-natours w-1/2 rounded-full border-3 font-bold text-stone-800",onClick:()=>G("/login"),children:"cancel"})]})]})})}function qz(){const{pathname:i}=to();return se.useEffect(()=>{window.scrollTo(0,0)},[i]),null}function Gz(i){return Wi({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"},child:[]},{tag:"path",attr:{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"},child:[]},{tag:"path",attr:{d:"M16 5l3 3"},child:[]}]})(i)}function Hz({myReview:i,i:n}){const[d,p]=se.useState(!1),[_,S]=se.useState(0),[y,l]=se.useState(i.review),{updateMyReview:C,loadingUpdate:P,loadingDelete:k,deleteMyReview:O}=gx();function L(X,W){let pe=!0;return X.length===0&&W===0?(Cr.error("Please provide review and ratings"),pe=!1):X.length<7?(Cr.error("Please write atleast two words for review! "),pe=!1):W<1?(Cr.error("Minimum 1 star is required!"),pe=!1):pe}async function F(){await O(i._id)}async function G(){if(!L(y,_))return;const X={rating:_,review:y};await C(i._id,X)}function ee(X){S(X)}return q.jsxs("div",{className:"mx-auto my-4 flex flex-col rounded bg-white p-5 shadow-md md:w-2/3 lg:w-1/2",children:[q.jsxs("div",{className:"flex items-center justify-between",children:[q.jsxs("div",{className:"flex items-center gap-4",children:[q.jsx("div",{className:"flex size-6 justify-center rounded-full bg-stone-400/30",children:q.jsx("p",{className:"font-semibold",children:n+1})}),q.jsx("div",{className:"flex size-12 items-center overflow-hidden rounded",children:q.jsx("img",{src:`/img/tours/${i.tour.imageCover}`,alt:"image",className:"h-8 rounded object-cover"})}),q.jsx("div",{children:q.jsx("p",{className:"font-bold text-stone-800",children:i.tour.name})})]}),q.jsx("div",{children:d?q.jsx(f6,{onClick:F,className:"size-6 text-red-500"}):q.jsx(Gz,{className:"text-natours size-6",onClick:()=>p(!0)})})]}),q.jsx("div",{className:"px-5 py-2 text-stone-500",children:d?q.jsx("textarea",{className:"focus:ring-natours w-full resize-none rounded p-1 text-stone-700 outline-none focus:ring-2",value:y,draggable:"false",onChange:X=>l(X.target.value),rows:4}):q.jsx("p",{children:i.review})}),q.jsx("div",{className:"mx-auto my-3",children:q.jsx(mx.Rating,{initialValue:!d&&Math.floor(i.rating),size:24,onClick:ee,readonly:!d,fillColor:"#55c57a"})}),d&&q.jsxs("div",{className:"my-2 flex justify-evenly",children:[q.jsx("button",{onClick:G,className:"btn-primary mx-3 w-1/2 cursor-pointer py-2 text-lg",children:P?q.jsx(da,{}):"Save"}),q.jsx("button",{onClick:()=>{p(!1),l(i.review)},className:"border-natours mx-3 w-1/2 cursor-pointer rounded-full border-2 text-lg font-semibold text-stone-800",children:"cancel"})]})]})}function Wz(){const{myReviews:i,loading:n}=gx();return n?q.jsx(da,{color:"green"}):q.jsxs("section",{className:"w-full",children:[q.jsxs("div",{className:"flex justify-center",children:[i.length>0&&q.jsx("p",{className:"natours-gradient-text text-[16px]",children:"Your reviews"}),i.length===0&&!n&&q.jsxs("p",{className:"natours-gradient-text text-center text-[16px] font-semibold",children:["No review available.",q.jsx("br",{}),q.jsx("br",{}),"You can add your review in tour detail page."]})]}),[...i].reverse().map((d,p)=>q.jsx(Hz,{myReview:d,i:p},p))]})}function Kz(){return q.jsx(OP,{children:q.jsx(j6,{children:q.jsx(zz,{children:q.jsxs(aC,{children:[q.jsx(qz,{}),q.jsx(kA,{children:q.jsxs(Fa,{path:"/",element:q.jsx(P6,{}),children:[q.jsx(Fa,{index:!0,element:q.jsx(mC,{})}),q.jsx(Fa,{path:"login",element:q.jsx(J4,{})}),q.jsxs(Fa,{path:"forgot-password",children:[q.jsx(Fa,{index:!0,path:"send-otp",element:q.jsx(Uz,{})}),q.jsx(Fa,{path:"verify-otp",element:q.jsx($z,{})}),q.jsx(Fa,{path:"reset-password",element:q.jsx(Zz,{})})]}),q.jsx(Fa,{path:"signup",element:q.jsx(e6,{})}),q.jsx(Fa,{path:"tours",element:q.jsx(Nz,{})}),q.jsx(Fa,{path:"tour/:slug",element:q.jsx(Bz,{})}),q.jsxs(Fa,{path:"account",element:q.jsx(b_,{children:q.jsx(L6,{})}),children:[q.jsx(Fa,{index:!0,element:q.jsx(b_,{children:q.jsx(z6,{})})}),q.jsx(Fa,{path:"my-bookings",element:q.jsx(b_,{children:q.jsx(N6,{})})}),q.jsx(Fa,{path:"my-review",element:q.jsx(b_,{children:q.jsx(Wz,{})})})]}),q.jsx(Fa,{path:"*",element:q.jsx(Fz,{})})]})})]})})})})}UM.createRoot(document.getElementById("root")).render(q.jsx(se.StrictMode,{children:q.jsx(Kz,{})}));

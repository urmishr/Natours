import{r as l,j as s,a as h,b as y,d as g,m,n as w,L as j,V as b}from"./index-JePda7sN.js";const N=({length:a,onOtpSubmit:p})=>{const[c,u]=l.useState(new Array(a).fill("")),n=l.useRef([]);l.useEffect(()=>{n.current[0]&&n.current[0].focus()},[]);const d=(o,e)=>{const t=o.target.value;if(isNaN(t))return;const i=[...c];i[e]=t.substring(t.length-1),u(i),t&&e<a-1&&n.current[e+1]&&n.current[e+1].focus();const f=i.join("");p(f)},x=(o,e)=>{if(o.key==="Backspace"){const t=[...c];t[e]="",u(t),e>0&&n.current[e-1]&&n.current[e-1].focus()}},r=o=>{n.current[o]&&n.current[o].focus()};return s.jsx("div",{className:"flex justify-between gap-2",children:c.map((o,e)=>s.jsx("input",{ref:t=>n.current[e]=t,value:o,onChange:t=>d(t,e),onKeyDown:t=>x(t,e),onClick:()=>r(e),type:"tel",maxLength:"1",className:"border-natours focus:ring-natours h-10 w-10 rounded bg-stone-200/70 text-center font-bold text-stone-700 outline-none focus:ring-3 md:h-14 md:w-14"},e))})};function O(){const[a,p]=l.useState(""),{error:c,loading:u,verifyOtp:n,resetError:d,isAuthenticated:x}=h(),r=y(),o=g(),{emailTyped:e}=o.state||"";l.useEffect(function(){if(x)return r("/account");if(d(),!e)return r("/forgot-password/send-otp")},[e,r]);function t(f){p(f)}async function i(){if(d(),a.length<6||!a)return b.error("Please Provide 6 digits otp!");await n(a,e)&&r("/forgot-password/reset-password",{state:{emailTyped:e}})}return s.jsx("section",{className:"my-auto flex w-full flex-col md:items-center",children:s.jsxs(m.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},className:"mx-5 my-14 flex flex-col justify-between space-y-8 rounded-lg bg-white px-5 py-7 shadow-lg md:min-w-[600px] md:p-13 md:shadow-xl",children:[s.jsxs("div",{className:"flex items-center gap-3 space-y-1",children:[s.jsx(w,{className:"text-natours m-0 size-7",onClick:()=>r(-1)}),s.jsx("h1",{className:"natours-gradient-text text-2xl font-bold",children:"Verify your OTP"})]}),s.jsxs("div",{className:"flex flex-col space-y-5",children:[s.jsx("div",{children:s.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Enter your Otp"})}),s.jsx(N,{length:6,onOtpSubmit:t})]}),s.jsx("p",{className:"font-semibold text-red-400",children:c}),s.jsx("div",{children:s.jsx(m.button,{whileTap:{scale:.8},transition:{type:"keyframes",duration:.01},className:"btn-primary w-1/2 py-3 md:w-1/3",onClick:i,children:u?s.jsx(j,{}):"Verify"})})]})})}export{O as default};

import{G as y,r as o,u as f,j as e,M,L as m,V as d}from"./index-JePda7sN.js";import{d as C}from"./index-DoP08BHp.js";function k(t){return y({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"},child:[]},{tag:"path",attr:{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"},child:[]},{tag:"path",attr:{d:"M16 5l3 3"},child:[]}]})(t)}function z({myReview:t,i:n}){const[r,a]=o.useState(!1),[c,h]=o.useState(0),[l,u]=o.useState(t.review),{updateMyReview:v,loadingUpdate:g,loadingDelete:R,deleteMyReview:j}=f();function p(s,x){let i=!0;return s.length===0&&x===0?(d.error("Please provide review and ratings"),i=!1):s.length<7?(d.error("Please write atleast two words for review! "),i=!1):x<1?(d.error("Minimum 1 star is required!"),i=!1):i}async function w(){await j(t._id)}async function N(){if(!p(l,c))return;const s={rating:c,review:l};await v(t._id,s)}function b(s){h(s)}return e.jsxs("div",{className:"mx-auto my-4 flex flex-col rounded bg-white p-5 shadow-md md:w-2/3 lg:w-1/2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex size-6 justify-center rounded-full bg-stone-400/30",children:e.jsx("p",{className:"font-semibold",children:n+1})}),e.jsx("div",{className:"flex size-12 items-center overflow-hidden rounded",children:e.jsx("img",{src:`/img/tours/${t.tour.imageCover}`,alt:"image",className:"h-8 rounded object-cover"})}),e.jsx("div",{children:e.jsx("p",{className:"font-bold text-stone-800",children:t.tour.name})})]}),e.jsx("div",{children:r?e.jsx(M,{onClick:w,className:"size-6 text-red-500"}):e.jsx(k,{className:"text-natours size-6",onClick:()=>a(!0)})})]}),e.jsx("div",{className:"px-5 py-2 text-stone-500",children:r?e.jsx("textarea",{className:"focus:ring-natours w-full resize-none rounded p-1 text-stone-700 outline-none focus:ring-2",value:l,draggable:"false",onChange:s=>u(s.target.value),rows:4}):e.jsx("p",{children:t.review})}),e.jsx("div",{className:"mx-auto my-3",children:e.jsx(C.Rating,{initialValue:!r&&Math.floor(t.rating),size:24,onClick:b,readonly:!r,fillColor:"#55c57a"})}),r&&e.jsxs("div",{className:"my-2 flex justify-evenly",children:[e.jsx("button",{onClick:N,className:"btn-primary mx-3 w-1/2 cursor-pointer py-2 text-lg",children:g?e.jsx(m,{}):"Save"}),e.jsx("button",{onClick:()=>{a(!1),u(t.review)},className:"border-natours mx-3 w-1/2 cursor-pointer rounded-full border-2 text-lg font-semibold text-stone-800",children:"cancel"})]})]})}function L(){const{myReviews:t,loading:n}=f();return n?e.jsx(m,{color:"green"}):e.jsxs("section",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-center",children:[t.length>0&&e.jsx("p",{className:"natours-gradient-text text-[16px]",children:"Your reviews"}),t.length===0&&!n&&e.jsxs("p",{className:"natours-gradient-text text-center text-[16px] font-semibold",children:["No review available.",e.jsx("br",{}),e.jsx("br",{}),"You can add your review in tour detail page."]})]}),[...t].reverse().map((r,a)=>e.jsx(z,{myReview:r,i:a},a))]})}export{L as default};

var PM=Object.defineProperty;var RM=(n,a,f)=>a in n?PM(n,a,{enumerable:!0,configurable:!0,writable:!0,value:f}):n[a]=f;var bn=(n,a,f)=>RM(n,typeof a!="symbol"?a+"":a,f);(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))p(_);new MutationObserver(_=>{for(const S of _)if(S.type==="childList")for(const y of S.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&p(y)}).observe(document,{childList:!0,subtree:!0});function f(_){const S={};return _.integrity&&(S.integrity=_.integrity),_.referrerPolicy&&(S.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?S.credentials="include":_.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function p(_){if(_.ep)return;_.ep=!0;const S=f(_);fetch(_.href,S)}})();function bv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var v0={exports:{}},um={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mx;function IM(){if(mx)return um;mx=1;var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function f(p,_,S){var y=null;if(S!==void 0&&(y=""+S),_.key!==void 0&&(y=""+_.key),"key"in _){S={};for(var u in _)u!=="key"&&(S[u]=_[u])}else S=_;return _=S.ref,{$$typeof:n,type:p,key:y,ref:_!==void 0?_:null,props:S}}return um.Fragment=a,um.jsx=f,um.jsxs=f,um}var gx;function T2(){return gx||(gx=1,v0.exports=IM()),v0.exports}var J=T2(),x0={exports:{}},Nr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx;function DM(){if(yx)return Nr;yx=1;var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),y=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),R=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),B=Symbol.iterator;function z(De){return De===null||typeof De!="object"?null:(De=B&&De[B]||De["@@iterator"],typeof De=="function"?De:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,te={};function K(De,wt,Zt){this.props=De,this.context=wt,this.refs=te,this.updater=Zt||F}K.prototype.isReactComponent={},K.prototype.setState=function(De,wt){if(typeof De!="object"&&typeof De!="function"&&De!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,De,wt,"setState")},K.prototype.forceUpdate=function(De){this.updater.enqueueForceUpdate(this,De,"forceUpdate")};function X(){}X.prototype=K.prototype;function ye(De,wt,Zt){this.props=De,this.context=wt,this.refs=te,this.updater=Zt||F}var pe=ye.prototype=new X;pe.constructor=ye,G(pe,K.prototype),pe.isPureReactComponent=!0;var xe=Array.isArray,Se={H:null,A:null,T:null,S:null},ke=Object.prototype.hasOwnProperty;function it(De,wt,Zt,Ht,zt,er){return Zt=er.ref,{$$typeof:n,type:De,key:wt,ref:Zt!==void 0?Zt:null,props:er}}function Ke(De,wt){return it(De.type,wt,void 0,void 0,void 0,De.props)}function Ye(De){return typeof De=="object"&&De!==null&&De.$$typeof===n}function ht(De){var wt={"=":"=0",":":"=2"};return"$"+De.replace(/[=:]/g,function(Zt){return wt[Zt]})}var Lt=/\/+/g;function sr(De,wt){return typeof De=="object"&&De!==null&&De.key!=null?ht(""+De.key):wt.toString(36)}function nr(){}function Xt(De){switch(De.status){case"fulfilled":return De.value;case"rejected":throw De.reason;default:switch(typeof De.status=="string"?De.then(nr,nr):(De.status="pending",De.then(function(wt){De.status==="pending"&&(De.status="fulfilled",De.value=wt)},function(wt){De.status==="pending"&&(De.status="rejected",De.reason=wt)})),De.status){case"fulfilled":return De.value;case"rejected":throw De.reason}}throw De}function or(De,wt,Zt,Ht,zt){var er=typeof De;(er==="undefined"||er==="boolean")&&(De=null);var ir=!1;if(De===null)ir=!0;else switch(er){case"bigint":case"string":case"number":ir=!0;break;case"object":switch(De.$$typeof){case n:case a:ir=!0;break;case O:return ir=De._init,or(ir(De._payload),wt,Zt,Ht,zt)}}if(ir)return zt=zt(De),ir=Ht===""?"."+sr(De,0):Ht,xe(zt)?(Zt="",ir!=null&&(Zt=ir.replace(Lt,"$&/")+"/"),or(zt,wt,Zt,"",function(en){return en})):zt!=null&&(Ye(zt)&&(zt=Ke(zt,Zt+(zt.key==null||De&&De.key===zt.key?"":(""+zt.key).replace(Lt,"$&/")+"/")+ir)),wt.push(zt)),1;ir=0;var Qr=Ht===""?".":Ht+":";if(xe(De))for(var br=0;br<De.length;br++)Ht=De[br],er=Qr+sr(Ht,br),ir+=or(Ht,wt,Zt,er,zt);else if(br=z(De),typeof br=="function")for(De=br.call(De),br=0;!(Ht=De.next()).done;)Ht=Ht.value,er=Qr+sr(Ht,br++),ir+=or(Ht,wt,Zt,er,zt);else if(er==="object"){if(typeof De.then=="function")return or(Xt(De),wt,Zt,Ht,zt);throw wt=String(De),Error("Objects are not valid as a React child (found: "+(wt==="[object Object]"?"object with keys {"+Object.keys(De).join(", ")+"}":wt)+"). If you meant to render a collection of children, use an array instead.")}return ir}function Ct(De,wt,Zt){if(De==null)return De;var Ht=[],zt=0;return or(De,Ht,"","",function(er){return wt.call(Zt,er,zt++)}),Ht}function Nt(De){if(De._status===-1){var wt=De._result;wt=wt(),wt.then(function(Zt){(De._status===0||De._status===-1)&&(De._status=1,De._result=Zt)},function(Zt){(De._status===0||De._status===-1)&&(De._status=2,De._result=Zt)}),De._status===-1&&(De._status=0,De._result=wt)}if(De._status===1)return De._result.default;throw De._result}var Rt=typeof reportError=="function"?reportError:function(De){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var wt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof De=="object"&&De!==null&&typeof De.message=="string"?String(De.message):String(De),error:De});if(!window.dispatchEvent(wt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",De);return}console.error(De)};function fr(){}return Nr.Children={map:Ct,forEach:function(De,wt,Zt){Ct(De,function(){wt.apply(this,arguments)},Zt)},count:function(De){var wt=0;return Ct(De,function(){wt++}),wt},toArray:function(De){return Ct(De,function(wt){return wt})||[]},only:function(De){if(!Ye(De))throw Error("React.Children.only expected to receive a single React element child.");return De}},Nr.Component=K,Nr.Fragment=f,Nr.Profiler=_,Nr.PureComponent=ye,Nr.StrictMode=p,Nr.Suspense=C,Nr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Se,Nr.act=function(){throw Error("act(...) is not supported in production builds of React.")},Nr.cache=function(De){return function(){return De.apply(null,arguments)}},Nr.cloneElement=function(De,wt,Zt){if(De==null)throw Error("The argument must be a React element, but you passed "+De+".");var Ht=G({},De.props),zt=De.key,er=void 0;if(wt!=null)for(ir in wt.ref!==void 0&&(er=void 0),wt.key!==void 0&&(zt=""+wt.key),wt)!ke.call(wt,ir)||ir==="key"||ir==="__self"||ir==="__source"||ir==="ref"&&wt.ref===void 0||(Ht[ir]=wt[ir]);var ir=arguments.length-2;if(ir===1)Ht.children=Zt;else if(1<ir){for(var Qr=Array(ir),br=0;br<ir;br++)Qr[br]=arguments[br+2];Ht.children=Qr}return it(De.type,zt,void 0,void 0,er,Ht)},Nr.createContext=function(De){return De={$$typeof:y,_currentValue:De,_currentValue2:De,_threadCount:0,Provider:null,Consumer:null},De.Provider=De,De.Consumer={$$typeof:S,_context:De},De},Nr.createElement=function(De,wt,Zt){var Ht,zt={},er=null;if(wt!=null)for(Ht in wt.key!==void 0&&(er=""+wt.key),wt)ke.call(wt,Ht)&&Ht!=="key"&&Ht!=="__self"&&Ht!=="__source"&&(zt[Ht]=wt[Ht]);var ir=arguments.length-2;if(ir===1)zt.children=Zt;else if(1<ir){for(var Qr=Array(ir),br=0;br<ir;br++)Qr[br]=arguments[br+2];zt.children=Qr}if(De&&De.defaultProps)for(Ht in ir=De.defaultProps,ir)zt[Ht]===void 0&&(zt[Ht]=ir[Ht]);return it(De,er,void 0,void 0,null,zt)},Nr.createRef=function(){return{current:null}},Nr.forwardRef=function(De){return{$$typeof:u,render:De}},Nr.isValidElement=Ye,Nr.lazy=function(De){return{$$typeof:O,_payload:{_status:-1,_result:De},_init:Nt}},Nr.memo=function(De,wt){return{$$typeof:R,type:De,compare:wt===void 0?null:wt}},Nr.startTransition=function(De){var wt=Se.T,Zt={};Se.T=Zt;try{var Ht=De(),zt=Se.S;zt!==null&&zt(Zt,Ht),typeof Ht=="object"&&Ht!==null&&typeof Ht.then=="function"&&Ht.then(fr,Rt)}catch(er){Rt(er)}finally{Se.T=wt}},Nr.unstable_useCacheRefresh=function(){return Se.H.useCacheRefresh()},Nr.use=function(De){return Se.H.use(De)},Nr.useActionState=function(De,wt,Zt){return Se.H.useActionState(De,wt,Zt)},Nr.useCallback=function(De,wt){return Se.H.useCallback(De,wt)},Nr.useContext=function(De){return Se.H.useContext(De)},Nr.useDebugValue=function(){},Nr.useDeferredValue=function(De,wt){return Se.H.useDeferredValue(De,wt)},Nr.useEffect=function(De,wt){return Se.H.useEffect(De,wt)},Nr.useId=function(){return Se.H.useId()},Nr.useImperativeHandle=function(De,wt,Zt){return Se.H.useImperativeHandle(De,wt,Zt)},Nr.useInsertionEffect=function(De,wt){return Se.H.useInsertionEffect(De,wt)},Nr.useLayoutEffect=function(De,wt){return Se.H.useLayoutEffect(De,wt)},Nr.useMemo=function(De,wt){return Se.H.useMemo(De,wt)},Nr.useOptimistic=function(De,wt){return Se.H.useOptimistic(De,wt)},Nr.useReducer=function(De,wt,Zt){return Se.H.useReducer(De,wt,Zt)},Nr.useRef=function(De){return Se.H.useRef(De)},Nr.useState=function(De){return Se.H.useState(De)},Nr.useSyncExternalStore=function(De,wt,Zt){return Se.H.useSyncExternalStore(De,wt,Zt)},Nr.useTransition=function(){return Se.H.useTransition()},Nr.version="19.0.0",Nr}var _x;function V_(){return _x||(_x=1,x0.exports=DM()),x0.exports}var oe=V_();const Vf=bv(oe);var b0={exports:{}},cm={},w0={exports:{}},S0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vx;function LM(){return vx||(vx=1,function(n){function a(Ct,Nt){var Rt=Ct.length;Ct.push(Nt);e:for(;0<Rt;){var fr=Rt-1>>>1,De=Ct[fr];if(0<_(De,Nt))Ct[fr]=Nt,Ct[Rt]=De,Rt=fr;else break e}}function f(Ct){return Ct.length===0?null:Ct[0]}function p(Ct){if(Ct.length===0)return null;var Nt=Ct[0],Rt=Ct.pop();if(Rt!==Nt){Ct[0]=Rt;e:for(var fr=0,De=Ct.length,wt=De>>>1;fr<wt;){var Zt=2*(fr+1)-1,Ht=Ct[Zt],zt=Zt+1,er=Ct[zt];if(0>_(Ht,Rt))zt<De&&0>_(er,Ht)?(Ct[fr]=er,Ct[zt]=Rt,fr=zt):(Ct[fr]=Ht,Ct[Zt]=Rt,fr=Zt);else if(zt<De&&0>_(er,Rt))Ct[fr]=er,Ct[zt]=Rt,fr=zt;else break e}}return Nt}function _(Ct,Nt){var Rt=Ct.sortIndex-Nt.sortIndex;return Rt!==0?Rt:Ct.id-Nt.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var S=performance;n.unstable_now=function(){return S.now()}}else{var y=Date,u=y.now();n.unstable_now=function(){return y.now()-u}}var C=[],R=[],O=1,B=null,z=3,F=!1,G=!1,te=!1,K=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,ye=typeof setImmediate<"u"?setImmediate:null;function pe(Ct){for(var Nt=f(R);Nt!==null;){if(Nt.callback===null)p(R);else if(Nt.startTime<=Ct)p(R),Nt.sortIndex=Nt.expirationTime,a(C,Nt);else break;Nt=f(R)}}function xe(Ct){if(te=!1,pe(Ct),!G)if(f(C)!==null)G=!0,Xt();else{var Nt=f(R);Nt!==null&&or(xe,Nt.startTime-Ct)}}var Se=!1,ke=-1,it=5,Ke=-1;function Ye(){return!(n.unstable_now()-Ke<it)}function ht(){if(Se){var Ct=n.unstable_now();Ke=Ct;var Nt=!0;try{e:{G=!1,te&&(te=!1,X(ke),ke=-1),F=!0;var Rt=z;try{t:{for(pe(Ct),B=f(C);B!==null&&!(B.expirationTime>Ct&&Ye());){var fr=B.callback;if(typeof fr=="function"){B.callback=null,z=B.priorityLevel;var De=fr(B.expirationTime<=Ct);if(Ct=n.unstable_now(),typeof De=="function"){B.callback=De,pe(Ct),Nt=!0;break t}B===f(C)&&p(C),pe(Ct)}else p(C);B=f(C)}if(B!==null)Nt=!0;else{var wt=f(R);wt!==null&&or(xe,wt.startTime-Ct),Nt=!1}}break e}finally{B=null,z=Rt,F=!1}Nt=void 0}}finally{Nt?Lt():Se=!1}}}var Lt;if(typeof ye=="function")Lt=function(){ye(ht)};else if(typeof MessageChannel<"u"){var sr=new MessageChannel,nr=sr.port2;sr.port1.onmessage=ht,Lt=function(){nr.postMessage(null)}}else Lt=function(){K(ht,0)};function Xt(){Se||(Se=!0,Lt())}function or(Ct,Nt){ke=K(function(){Ct(n.unstable_now())},Nt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Ct){Ct.callback=null},n.unstable_continueExecution=function(){G||F||(G=!0,Xt())},n.unstable_forceFrameRate=function(Ct){0>Ct||125<Ct?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):it=0<Ct?Math.floor(1e3/Ct):5},n.unstable_getCurrentPriorityLevel=function(){return z},n.unstable_getFirstCallbackNode=function(){return f(C)},n.unstable_next=function(Ct){switch(z){case 1:case 2:case 3:var Nt=3;break;default:Nt=z}var Rt=z;z=Nt;try{return Ct()}finally{z=Rt}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Ct,Nt){switch(Ct){case 1:case 2:case 3:case 4:case 5:break;default:Ct=3}var Rt=z;z=Ct;try{return Nt()}finally{z=Rt}},n.unstable_scheduleCallback=function(Ct,Nt,Rt){var fr=n.unstable_now();switch(typeof Rt=="object"&&Rt!==null?(Rt=Rt.delay,Rt=typeof Rt=="number"&&0<Rt?fr+Rt:fr):Rt=fr,Ct){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=Rt+De,Ct={id:O++,callback:Nt,priorityLevel:Ct,startTime:Rt,expirationTime:De,sortIndex:-1},Rt>fr?(Ct.sortIndex=Rt,a(R,Ct),f(C)===null&&Ct===f(R)&&(te?(X(ke),ke=-1):te=!0,or(xe,Rt-fr))):(Ct.sortIndex=De,a(C,Ct),G||F||(G=!0,Xt())),Ct},n.unstable_shouldYield=Ye,n.unstable_wrapCallback=function(Ct){var Nt=z;return function(){var Rt=z;z=Nt;try{return Ct.apply(this,arguments)}finally{z=Rt}}}}(S0)),S0}var xx;function zM(){return xx||(xx=1,w0.exports=LM()),w0.exports}var T0={exports:{}},ja={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bx;function kM(){if(bx)return ja;bx=1;var n=V_();function a(C){var R="https://react.dev/errors/"+C;if(1<arguments.length){R+="?args[]="+encodeURIComponent(arguments[1]);for(var O=2;O<arguments.length;O++)R+="&args[]="+encodeURIComponent(arguments[O])}return"Minified React error #"+C+"; visit "+R+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(){}var p={d:{f,r:function(){throw Error(a(522))},D:f,C:f,L:f,m:f,X:f,S:f,M:f},p:0,findDOMNode:null},_=Symbol.for("react.portal");function S(C,R,O){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:B==null?null:""+B,children:C,containerInfo:R,implementation:O}}var y=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(C,R){if(C==="font")return"";if(typeof R=="string")return R==="use-credentials"?R:""}return ja.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=p,ja.createPortal=function(C,R){var O=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!R||R.nodeType!==1&&R.nodeType!==9&&R.nodeType!==11)throw Error(a(299));return S(C,R,null,O)},ja.flushSync=function(C){var R=y.T,O=p.p;try{if(y.T=null,p.p=2,C)return C()}finally{y.T=R,p.p=O,p.d.f()}},ja.preconnect=function(C,R){typeof C=="string"&&(R?(R=R.crossOrigin,R=typeof R=="string"?R==="use-credentials"?R:"":void 0):R=null,p.d.C(C,R))},ja.prefetchDNS=function(C){typeof C=="string"&&p.d.D(C)},ja.preinit=function(C,R){if(typeof C=="string"&&R&&typeof R.as=="string"){var O=R.as,B=u(O,R.crossOrigin),z=typeof R.integrity=="string"?R.integrity:void 0,F=typeof R.fetchPriority=="string"?R.fetchPriority:void 0;O==="style"?p.d.S(C,typeof R.precedence=="string"?R.precedence:void 0,{crossOrigin:B,integrity:z,fetchPriority:F}):O==="script"&&p.d.X(C,{crossOrigin:B,integrity:z,fetchPriority:F,nonce:typeof R.nonce=="string"?R.nonce:void 0})}},ja.preinitModule=function(C,R){if(typeof C=="string")if(typeof R=="object"&&R!==null){if(R.as==null||R.as==="script"){var O=u(R.as,R.crossOrigin);p.d.M(C,{crossOrigin:O,integrity:typeof R.integrity=="string"?R.integrity:void 0,nonce:typeof R.nonce=="string"?R.nonce:void 0})}}else R==null&&p.d.M(C)},ja.preload=function(C,R){if(typeof C=="string"&&typeof R=="object"&&R!==null&&typeof R.as=="string"){var O=R.as,B=u(O,R.crossOrigin);p.d.L(C,O,{crossOrigin:B,integrity:typeof R.integrity=="string"?R.integrity:void 0,nonce:typeof R.nonce=="string"?R.nonce:void 0,type:typeof R.type=="string"?R.type:void 0,fetchPriority:typeof R.fetchPriority=="string"?R.fetchPriority:void 0,referrerPolicy:typeof R.referrerPolicy=="string"?R.referrerPolicy:void 0,imageSrcSet:typeof R.imageSrcSet=="string"?R.imageSrcSet:void 0,imageSizes:typeof R.imageSizes=="string"?R.imageSizes:void 0,media:typeof R.media=="string"?R.media:void 0})}},ja.preloadModule=function(C,R){if(typeof C=="string")if(R){var O=u(R.as,R.crossOrigin);p.d.m(C,{as:typeof R.as=="string"&&R.as!=="script"?R.as:void 0,crossOrigin:O,integrity:typeof R.integrity=="string"?R.integrity:void 0})}else p.d.m(C)},ja.requestFormReset=function(C){p.d.r(C)},ja.unstable_batchedUpdates=function(C,R){return C(R)},ja.useFormState=function(C,R,O){return y.H.useFormState(C,R,O)},ja.useFormStatus=function(){return y.H.useHostTransitionStatus()},ja.version="19.0.0",ja}var wx;function M2(){if(wx)return T0.exports;wx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(a){console.error(a)}}return n(),T0.exports=kM(),T0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx;function OM(){if(Sx)return cm;Sx=1;var n=zM(),a=V_(),f=M2();function p(r){var l="https://react.dev/errors/"+r;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+r+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function _(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}var S=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),F=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),xe=Symbol.for("react.memo_cache_sentinel"),Se=Symbol.iterator;function ke(r){return r===null||typeof r!="object"?null:(r=Se&&r[Se]||r["@@iterator"],typeof r=="function"?r:null)}var it=Symbol.for("react.client.reference");function Ke(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===it?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case C:return"Fragment";case u:return"Portal";case O:return"Profiler";case R:return"StrictMode";case te:return"Suspense";case K:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case F:return(r.displayName||"Context")+".Provider";case z:return(r._context.displayName||"Context")+".Consumer";case G:var l=r.render;return r=r.displayName,r||(r=l.displayName||l.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case X:return l=r.displayName||null,l!==null?l:Ke(r.type)||"Memo";case ye:l=r._payload,r=r._init;try{return Ke(r(l))}catch{}}return null}var Ye=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ht=Object.assign,Lt,sr;function nr(r){if(Lt===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);Lt=l&&l[1]||"",sr=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Lt+r+sr}var Xt=!1;function or(r,l){if(!r||Xt)return"";Xt=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(l){var Mt=function(){throw Error()};if(Object.defineProperty(Mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Mt,[])}catch(lt){var et=lt}Reflect.construct(r,[],Mt)}else{try{Mt.call()}catch(lt){et=lt}r.call(Mt.prototype)}}else{try{throw Error()}catch(lt){et=lt}(Mt=r())&&typeof Mt.catch=="function"&&Mt.catch(function(){})}}catch(lt){if(lt&&et&&typeof lt.stack=="string")return[lt.stack,et.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var L=b.DetermineComponentFrameRoot(),W=L[0],ue=L[1];if(W&&ue){var Me=W.split(`
`),Ne=ue.split(`
`);for(E=b=0;b<Me.length&&!Me[b].includes("DetermineComponentFrameRoot");)b++;for(;E<Ne.length&&!Ne[E].includes("DetermineComponentFrameRoot");)E++;if(b===Me.length||E===Ne.length)for(b=Me.length-1,E=Ne.length-1;1<=b&&0<=E&&Me[b]!==Ne[E];)E--;for(;1<=b&&0<=E;b--,E--)if(Me[b]!==Ne[E]){if(b!==1||E!==1)do if(b--,E--,0>E||Me[b]!==Ne[E]){var dt=`
`+Me[b].replace(" at new "," at ");return r.displayName&&dt.includes("<anonymous>")&&(dt=dt.replace("<anonymous>",r.displayName)),dt}while(1<=b&&0<=E);break}}}finally{Xt=!1,Error.prepareStackTrace=d}return(d=r?r.displayName||r.name:"")?nr(d):""}function Ct(r){switch(r.tag){case 26:case 27:case 5:return nr(r.type);case 16:return nr("Lazy");case 13:return nr("Suspense");case 19:return nr("SuspenseList");case 0:case 15:return r=or(r.type,!1),r;case 11:return r=or(r.type.render,!1),r;case 1:return r=or(r.type,!0),r;default:return""}}function Nt(r){try{var l="";do l+=Ct(r),r=r.return;while(r);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Rt(r){var l=r,d=r;if(r.alternate)for(;l.return;)l=l.return;else{r=l;do l=r,(l.flags&4098)!==0&&(d=l.return),r=l.return;while(r)}return l.tag===3?d:null}function fr(r){if(r.tag===13){var l=r.memoizedState;if(l===null&&(r=r.alternate,r!==null&&(l=r.memoizedState)),l!==null)return l.dehydrated}return null}function De(r){if(Rt(r)!==r)throw Error(p(188))}function wt(r){var l=r.alternate;if(!l){if(l=Rt(r),l===null)throw Error(p(188));return l!==r?null:r}for(var d=r,b=l;;){var E=d.return;if(E===null)break;var L=E.alternate;if(L===null){if(b=E.return,b!==null){d=b;continue}break}if(E.child===L.child){for(L=E.child;L;){if(L===d)return De(E),r;if(L===b)return De(E),l;L=L.sibling}throw Error(p(188))}if(d.return!==b.return)d=E,b=L;else{for(var W=!1,ue=E.child;ue;){if(ue===d){W=!0,d=E,b=L;break}if(ue===b){W=!0,b=E,d=L;break}ue=ue.sibling}if(!W){for(ue=L.child;ue;){if(ue===d){W=!0,d=L,b=E;break}if(ue===b){W=!0,b=L,d=E;break}ue=ue.sibling}if(!W)throw Error(p(189))}}if(d.alternate!==b)throw Error(p(190))}if(d.tag!==3)throw Error(p(188));return d.stateNode.current===d?r:l}function Zt(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r;for(r=r.child;r!==null;){if(l=Zt(r),l!==null)return l;r=r.sibling}return null}var Ht=Array.isArray,zt=f.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,er={pending:!1,data:null,method:null,action:null},ir=[],Qr=-1;function br(r){return{current:r}}function en(r){0>Qr||(r.current=ir[Qr],ir[Qr]=null,Qr--)}function Fr(r,l){Qr++,ir[Qr]=r.current,r.current=l}var ln=br(null),Ln=br(null),Dr=br(null),pr=br(null);function Kn(r,l){switch(Fr(Dr,l),Fr(Ln,r),Fr(ln,null),r=l.nodeType,r){case 9:case 11:l=(l=l.documentElement)&&(l=l.namespaceURI)?Jp(l):0;break;default:if(r=r===8?l.parentNode:l,l=r.tagName,r=r.namespaceURI)r=Jp(r),l=_g(r,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}en(ln),Fr(ln,l)}function Un(){en(ln),en(Ln),en(Dr)}function Yn(r){r.memoizedState!==null&&Fr(pr,r);var l=ln.current,d=_g(l,r.type);l!==d&&(Fr(Ln,r),Fr(ln,d))}function we(r){Ln.current===r&&(en(ln),en(Ln)),pr.current===r&&(en(pr),ge._currentValue=er)}var Re=Object.prototype.hasOwnProperty,We=n.unstable_scheduleCallback,vt=n.unstable_cancelCallback,xt=n.unstable_shouldYield,Et=n.unstable_requestPaint,Ut=n.unstable_now,ur=n.unstable_getCurrentPriorityLevel,_r=n.unstable_ImmediatePriority,Zr=n.unstable_UserBlockingPriority,Rn=n.unstable_NormalPriority,Vn=n.unstable_LowPriority,zn=n.unstable_IdlePriority,Pi=n.log,Ri=n.unstable_setDisableYieldValue,nn=null,tn=null;function je(r){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(nn,r,void 0,(r.current.flags&128)===128)}catch{}}function ie(r){if(typeof Pi=="function"&&Ri(r),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(nn,r)}catch{}}var ae=Math.clz32?Math.clz32:se,he=Math.log,be=Math.LN2;function se(r){return r>>>=0,r===0?32:31-(he(r)/be|0)|0}var Oe=128,Ve=4194304;function Ce(r){var l=r&42;if(l!==0)return l;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ue(r,l){var d=r.pendingLanes;if(d===0)return 0;var b=0,E=r.suspendedLanes,L=r.pingedLanes,W=r.warmLanes;r=r.finishedLanes!==0;var ue=d&134217727;return ue!==0?(d=ue&~E,d!==0?b=Ce(d):(L&=ue,L!==0?b=Ce(L):r||(W=ue&~W,W!==0&&(b=Ce(W))))):(ue=d&~E,ue!==0?b=Ce(ue):L!==0?b=Ce(L):r||(W=d&~W,W!==0&&(b=Ce(W)))),b===0?0:l!==0&&l!==b&&(l&E)===0&&(E=b&-b,W=l&-l,E>=W||E===32&&(W&4194176)!==0)?l:b}function qe(r,l){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&l)===0}function Fe(r,l){switch(r){case 1:case 2:case 4:case 8:return l+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ft(){var r=Oe;return Oe<<=1,(Oe&4194176)===0&&(Oe=128),r}function Pt(){var r=Ve;return Ve<<=1,(Ve&62914560)===0&&(Ve=4194304),r}function At(r){for(var l=[],d=0;31>d;d++)l.push(r);return l}function Ft(r,l){r.pendingLanes|=l,l!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function lr(r,l,d,b,E,L){var W=r.pendingLanes;r.pendingLanes=d,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=d,r.entangledLanes&=d,r.errorRecoveryDisabledLanes&=d,r.shellSuspendCounter=0;var ue=r.entanglements,Me=r.expirationTimes,Ne=r.hiddenUpdates;for(d=W&~d;0<d;){var dt=31-ae(d),Mt=1<<dt;ue[dt]=0,Me[dt]=-1;var et=Ne[dt];if(et!==null)for(Ne[dt]=null,dt=0;dt<et.length;dt++){var lt=et[dt];lt!==null&&(lt.lane&=-536870913)}d&=~Mt}b!==0&&Je(r,b,0),L!==0&&E===0&&r.tag!==0&&(r.suspendedLanes|=L&~(W&~l))}function Je(r,l,d){r.pendingLanes|=l,r.suspendedLanes&=~l;var b=31-ae(l);r.entangledLanes|=l,r.entanglements[b]=r.entanglements[b]|1073741824|d&4194218}function Wt(r,l){var d=r.entangledLanes|=l;for(r=r.entanglements;d;){var b=31-ae(d),E=1<<b;E&l|r[b]&l&&(r[b]|=l),d&=~E}}function vr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ur(){var r=zt.p;return r!==0?r:(r=window.event,r===void 0?32:Yt(r.type))}function Cr(r,l){var d=zt.p;try{return zt.p=r,l()}finally{zt.p=d}}var tt=Math.random().toString(36).slice(2),yt="__reactFiber$"+tt,kt="__reactProps$"+tt,Hr="__reactContainer$"+tt,$n="__reactEvents$"+tt,sn="__reactListeners$"+tt,ar="__reactHandles$"+tt,Va="__reactResources$"+tt,yi="__reactMarker$"+tt;function $a(r){delete r[yt],delete r[kt],delete r[$n],delete r[sn],delete r[ar]}function Zn(r){var l=r[yt];if(l)return l;for(var d=r.parentNode;d;){if(l=d[Hr]||d[yt]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(r=zi(r);r!==null;){if(d=r[yt])return d;r=zi(r)}return l}r=d,d=r.parentNode}return null}function sa(r){if(r=r[yt]||r[Hr]){var l=r.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return r}return null}function wn(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r.stateNode;throw Error(p(33))}function Pr(r){var l=r[Va];return l||(l=r[Va]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function ut(r){r[yi]=!0}var Js=new Set,Lo={};function wr(r,l){kn(r,l),kn(r+"Capture",l)}function kn(r,l){for(Lo[r]=l,r=0;r<l.length;r++)Js.add(l[r])}var _i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),eo={},oa={};function to(r){return Re.call(oa,r)?!0:Re.call(eo,r)?!1:Rs.test(r)?oa[r]=!0:(eo[r]=!0,!1)}function wc(r,l,d){if(to(l))if(d===null)r.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":r.removeAttribute(l);return;case"boolean":var b=l.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){r.removeAttribute(l);return}}r.setAttribute(l,""+d)}}function Sc(r,l,d){if(d===null)r.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttribute(l,""+d)}}function Is(r,l,d,b){if(b===null)r.removeAttribute(d);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(d);return}r.setAttributeNS(l,d,""+b)}}function fa(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ih(r){var l=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Dh(r){var l=Ih(r)?"checked":"value",d=Object.getOwnPropertyDescriptor(r.constructor.prototype,l),b=""+r[l];if(!r.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var E=d.get,L=d.set;return Object.defineProperty(r,l,{configurable:!0,get:function(){return E.call(this)},set:function(W){b=""+W,L.call(this,W)}}),Object.defineProperty(r,l,{enumerable:d.enumerable}),{getValue:function(){return b},setValue:function(W){b=""+W},stopTracking:function(){r._valueTracker=null,delete r[l]}}}}function El(r){r._valueTracker||(r._valueTracker=Dh(r))}function Tc(r){if(!r)return!1;var l=r._valueTracker;if(!l)return!0;var d=l.getValue(),b="";return r&&(b=Ih(r)?r.checked?"true":"false":r.value),r=b,r!==d?(l.setValue(r),!0):!1}function ds(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Lh=/[\n"\\]/g;function Yi(r){return r.replace(Lh,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function ro(r,l,d,b,E,L,W,ue){r.name="",W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?r.type=W:r.removeAttribute("type"),l!=null?W==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+fa(l)):r.value!==""+fa(l)&&(r.value=""+fa(l)):W!=="submit"&&W!=="reset"||r.removeAttribute("value"),l!=null?Mc(r,W,fa(l)):d!=null?Mc(r,W,fa(d)):b!=null&&r.removeAttribute("value"),E==null&&L!=null&&(r.defaultChecked=!!L),E!=null&&(r.checked=E&&typeof E!="function"&&typeof E!="symbol"),ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?r.name=""+fa(ue):r.removeAttribute("name")}function zo(r,l,d,b,E,L,W,ue){if(L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(r.type=L),l!=null||d!=null){if(!(L!=="submit"&&L!=="reset"||l!=null))return;d=d!=null?""+fa(d):"",l=l!=null?""+fa(l):d,ue||l===r.value||(r.value=l),r.defaultValue=l}b=b??E,b=typeof b!="function"&&typeof b!="symbol"&&!!b,r.checked=ue?r.checked:!!b,r.defaultChecked=!!b,W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"&&(r.name=W)}function Mc(r,l,d){l==="number"&&ds(r.ownerDocument)===r||r.defaultValue===""+d||(r.defaultValue=""+d)}function Pl(r,l,d,b){if(r=r.options,l){l={};for(var E=0;E<d.length;E++)l["$"+d[E]]=!0;for(d=0;d<r.length;d++)E=l.hasOwnProperty("$"+r[d].value),r[d].selected!==E&&(r[d].selected=E),E&&b&&(r[d].defaultSelected=!0)}else{for(d=""+fa(d),l=null,E=0;E<r.length;E++){if(r[E].value===d){r[E].selected=!0,b&&(r[E].defaultSelected=!0);return}l!==null||r[E].disabled||(l=r[E])}l!==null&&(l.selected=!0)}}function ps(r,l,d){if(l!=null&&(l=""+fa(l),l!==r.value&&(r.value=l),d==null)){r.defaultValue!==l&&(r.defaultValue=l);return}r.defaultValue=d!=null?""+fa(d):""}function ko(r,l,d,b){if(l==null){if(b!=null){if(d!=null)throw Error(p(92));if(Ht(b)){if(1<b.length)throw Error(p(93));b=b[0]}d=b}d==null&&(d=""),l=d}d=fa(l),r.defaultValue=d,b=r.textContent,b===d&&b!==""&&b!==null&&(r.value=b)}function cr(r,l){if(l){var d=r.firstChild;if(d&&d===r.lastChild&&d.nodeType===3){d.nodeValue=l;return}}r.textContent=l}var Or=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Oo(r,l,d){var b=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?b?r.setProperty(l,""):l==="float"?r.cssFloat="":r[l]="":b?r.setProperty(l,d):typeof d!="number"||d===0||Or.has(l)?l==="float"?r.cssFloat=d:r[l]=(""+d).trim():r[l]=d+"px"}function Za(r,l,d){if(l!=null&&typeof l!="object")throw Error(p(62));if(r=r.style,d!=null){for(var b in d)!d.hasOwnProperty(b)||l!=null&&l.hasOwnProperty(b)||(b.indexOf("--")===0?r.setProperty(b,""):b==="float"?r.cssFloat="":r[b]="");for(var E in l)b=l[E],l.hasOwnProperty(E)&&d[E]!==b&&Oo(r,E,b)}else for(var L in l)l.hasOwnProperty(L)&&Oo(r,L,l[L])}function Bi(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ji=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),On=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function no(r){return On.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var ui=null;function Xi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ei=null,da=null;function Rl(r){var l=sa(r);if(l&&(r=l.stateNode)){var d=r[kt]||null;e:switch(r=l.stateNode,l.type){case"input":if(ro(r,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=r;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Yi(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var b=d[l];if(b!==r&&b.form===r.form){var E=b[kt]||null;if(!E)throw Error(p(90));ro(b,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(l=0;l<d.length;l++)b=d[l],b.form===r.form&&Tc(b)}break e;case"textarea":ps(r,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&Pl(r,!!d.multiple,l,!1)}}}var Sn=!1;function qa(r,l,d){if(Sn)return r(l,d);Sn=!0;try{var b=r(l);return b}finally{if(Sn=!1,(ei!==null||da!==null)&&(uc(),ei&&(l=ei,r=da,da=ei=null,Rl(l),r)))for(l=0;l<r.length;l++)Rl(r[l])}}function ba(r,l){var d=r.stateNode;if(d===null)return null;var b=d[kt]||null;if(b===null)return null;d=b[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(r=r.type,b=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!b;break e;default:r=!1}if(r)return null;if(d&&typeof d!="function")throw Error(p(231,l,typeof d));return d}var Bo=!1;if(_i)try{var Ni={};Object.defineProperty(Ni,"passive",{get:function(){Bo=!0}}),window.addEventListener("test",Ni,Ni),window.removeEventListener("test",Ni,Ni)}catch{Bo=!1}var wa=null,Wr=null,Il=null;function Vr(){if(Il)return Il;var r,l=Wr,d=l.length,b,E="value"in wa?wa.value:wa.textContent,L=E.length;for(r=0;r<d&&l[r]===E[r];r++);var W=d-r;for(b=1;b<=W&&l[d-b]===E[L-b];b++);return Il=E.slice(r,1<b?1-b:void 0)}function hr(r){var l=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&l===13&&(r=13)):r=l,r===10&&(r=13),32<=r||r===13?r:0}function Ds(){return!0}function Lr(){return!1}function vi(r){function l(d,b,E,L,W){this._reactName=d,this._targetInst=E,this.type=b,this.nativeEvent=L,this.target=W,this.currentTarget=null;for(var ue in r)r.hasOwnProperty(ue)&&(d=r[ue],this[ue]=d?d(L):L[ue]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?Ds:Lr,this.isPropagationStopped=Lr,this}return ht(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ds)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ds)},persist:function(){},isPersistent:Ds}),l}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ls=vi(Ii),io=ht({},Ii,{view:0,detail:0}),Ac=vi(io),ao,jo,zs,Cu=ht({},io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zl,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==zs&&(zs&&r.type==="mousemove"?(ao=r.screenX-zs.screenX,jo=r.screenY-zs.screenY):jo=ao=0,zs=r),ao)},movementY:function(r){return"movementY"in r?r.movementY:jo}}),Eu=vi(Cu),Dl=ht({},Cu,{dataTransfer:0}),Fi=vi(Dl),Cc=ht({},io,{relatedTarget:0}),Ui=vi(Cc),Ll=ht({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),fn=vi(Ll),Pu=ht({},Ii,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ec=vi(Pu),zh=ht({},Ii,{data:0}),No=vi(zh),Pc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rc(r){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(r):(r=fp[r])?!!l[r]:!1}function zl(){return Rc}var Ga=ht({},io,{key:function(r){if(r.key){var l=Pc[r.key]||r.key;if(l!=="Unidentified")return l}return r.type==="keypress"?(r=hr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?kh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zl,charCode:function(r){return r.type==="keypress"?hr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?hr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ru=vi(Ga),kl=ht({},Cu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Iu=vi(kl),Du=ht({},io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zl}),Oh=vi(Du),ms=ht({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),dp=vi(ms),Bh=ht({},Cu,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),so=vi(Bh),Lu=ht({},Ii,{newState:0,oldState:0}),Hf=vi(Lu),zu=[9,13,27,32],jh=_i&&"CompositionEvent"in window,Ha=null;_i&&"documentMode"in document&&(Ha=document.documentMode);var pp=_i&&"TextEvent"in window&&!Ha,Nh=_i&&(!jh||Ha&&8<Ha&&11>=Ha),Wf=" ",Fh=!1;function Ic(r,l){switch(r){case"keyup":return zu.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dc(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var oo=!1;function Uh(r,l){switch(r){case"compositionend":return Dc(l);case"keypress":return l.which!==32?null:(Fh=!0,Wf);case"textInput":return r=l.data,r===Wf&&Fh?null:r;default:return null}}function Kf(r,l){if(oo)return r==="compositionend"||!jh&&Ic(r,l)?(r=Vr(),Il=Wr=wa=null,oo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Nh&&l.locale!=="ko"?null:l.data;default:return null}}var Fo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vh(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l==="input"?!!Fo[r.type]:l==="textarea"}function ku(r,l,d,b){ei?da?da.push(b):da=[b]:ei=b,l=Mf(l,"onChange"),0<l.length&&(d=new Ls("onChange","change",null,d,b),r.push({event:d,listeners:l}))}var ks=null,Ou=null;function Lc(r){Kp(r,0)}function Bu(r){var l=wn(r);if(Tc(l))return r}function $h(r,l){if(r==="change")return l}var Zh=!1;if(_i){var zc;if(_i){var ju="oninput"in document;if(!ju){var Nu=document.createElement("div");Nu.setAttribute("oninput","return;"),ju=typeof Nu.oninput=="function"}zc=ju}else zc=!1;Zh=zc&&(!document.documentMode||9<document.documentMode)}function qh(){ks&&(ks.detachEvent("onpropertychange",Fu),Ou=ks=null)}function Fu(r){if(r.propertyName==="value"&&Bu(Ou)){var l=[];ku(l,Ou,r,Xi(r)),qa(Lc,l)}}function Os(r,l,d){r==="focusin"?(qh(),ks=l,Ou=d,ks.attachEvent("onpropertychange",Fu)):r==="focusout"&&qh()}function kc(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Bu(Ou)}function Gh(r,l){if(r==="click")return Bu(l)}function Hh(r,l){if(r==="input"||r==="change")return Bu(l)}function Yf(r,l){return r===l&&(r!==0||1/r===1/l)||r!==r&&l!==l}var Qi=typeof Object.is=="function"?Object.is:Yf;function Sr(r,l){if(Qi(r,l))return!0;if(typeof r!="object"||r===null||typeof l!="object"||l===null)return!1;var d=Object.keys(r),b=Object.keys(l);if(d.length!==b.length)return!1;for(b=0;b<d.length;b++){var E=d[b];if(!Re.call(l,E)||!Qi(r[E],l[E]))return!1}return!0}function Oc(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Xf(r,l){var d=Oc(r);r=0;for(var b;d;){if(d.nodeType===3){if(b=r+d.textContent.length,r<=l&&b>=l)return{node:d,offset:l-r};r=b}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Oc(d)}}function Qf(r,l){return r&&l?r===l?!0:r&&r.nodeType===3?!1:l&&l.nodeType===3?Qf(r,l.parentNode):"contains"in r?r.contains(l):r.compareDocumentPosition?!!(r.compareDocumentPosition(l)&16):!1:!1}function Jf(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var l=ds(r.document);l instanceof r.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)r=l.contentWindow;else break;l=ds(r.document)}return l}function Wh(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l&&(l==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||l==="textarea"||r.contentEditable==="true")}function ed(r,l){var d=Jf(l);l=r.focusedElem;var b=r.selectionRange;if(d!==l&&l&&l.ownerDocument&&Qf(l.ownerDocument.documentElement,l)){if(b!==null&&Wh(l)){if(r=b.start,d=b.end,d===void 0&&(d=r),"selectionStart"in l)l.selectionStart=r,l.selectionEnd=Math.min(d,l.value.length);else if(d=(r=l.ownerDocument||document)&&r.defaultView||window,d.getSelection){d=d.getSelection();var E=l.textContent.length,L=Math.min(b.start,E);b=b.end===void 0?L:Math.min(b.end,E),!d.extend&&L>b&&(E=b,b=L,L=E),E=Xf(l,L);var W=Xf(l,b);E&&W&&(d.rangeCount!==1||d.anchorNode!==E.node||d.anchorOffset!==E.offset||d.focusNode!==W.node||d.focusOffset!==W.offset)&&(r=r.createRange(),r.setStart(E.node,E.offset),d.removeAllRanges(),L>b?(d.addRange(r),d.extend(W.node,W.offset)):(r.setEnd(W.node,W.offset),d.addRange(r)))}}for(r=[],d=l;d=d.parentNode;)d.nodeType===1&&r.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<r.length;l++)d=r[l],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var mp=_i&&"documentMode"in document&&11>=document.documentMode,Uo=null,Ol=null,lo=null,Bl=!1;function Bc(r,l,d){var b=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Bl||Uo==null||Uo!==ds(b)||(b=Uo,"selectionStart"in b&&Wh(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),lo&&Sr(lo,b)||(lo=b,b=Mf(Ol,"onSelect"),0<b.length&&(l=new Ls("onSelect","select",null,l,d),r.push({event:l,listeners:b}),l.target=Uo)))}function pa(r,l){var d={};return d[r.toLowerCase()]=l.toLowerCase(),d["Webkit"+r]="webkit"+l,d["Moz"+r]="moz"+l,d}var Wa={animationend:pa("Animation","AnimationEnd"),animationiteration:pa("Animation","AnimationIteration"),animationstart:pa("Animation","AnimationStart"),transitionrun:pa("Transition","TransitionRun"),transitionstart:pa("Transition","TransitionStart"),transitioncancel:pa("Transition","TransitionCancel"),transitionend:pa("Transition","TransitionEnd")},la={},Kh={};_i&&(Kh=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function uo(r){if(la[r])return la[r];if(!Wa[r])return r;var l=Wa[r],d;for(d in l)if(l.hasOwnProperty(d)&&d in Kh)return la[r]=l[d];return r}var jc=uo("animationend"),co=uo("animationiteration"),Uu=uo("animationstart"),Nc=uo("transitionrun"),Vu=uo("transitionstart"),Fc=uo("transitioncancel"),Yh=uo("transitionend"),Vo=new Map,$o="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Sa(r,l){Vo.set(r,l),wr(l,[r])}var ua=[],Er=0,jl=0;function Uc(){for(var r=Er,l=jl=Er=0;l<r;){var d=ua[l];ua[l++]=null;var b=ua[l];ua[l++]=null;var E=ua[l];ua[l++]=null;var L=ua[l];if(ua[l++]=null,b!==null&&E!==null){var W=b.pending;W===null?E.next=E:(E.next=W.next,W.next=E),b.pending=E}L!==0&&td(d,E,L)}}function Zo(r,l,d,b){ua[Er++]=r,ua[Er++]=l,ua[Er++]=d,ua[Er++]=b,jl|=b,r.lanes|=b,r=r.alternate,r!==null&&(r.lanes|=b)}function qo(r,l,d,b){return Zo(r,l,d,b),Nl(r)}function ho(r,l){return Zo(r,null,null,l),Nl(r)}function td(r,l,d){r.lanes|=d;var b=r.alternate;b!==null&&(b.lanes|=d);for(var E=!1,L=r.return;L!==null;)L.childLanes|=d,b=L.alternate,b!==null&&(b.childLanes|=d),L.tag===22&&(r=L.stateNode,r===null||r._visibility&1||(E=!0)),r=L,L=L.return;E&&l!==null&&r.tag===3&&(L=r.stateNode,E=31-ae(d),L=L.hiddenUpdates,r=L[E],r===null?L[E]=[l]:r.push(l),l.lane=d|536870912)}function Nl(r){if(50<xf)throw xf=0,Op=null,Error(p(185));for(var l=r.return;l!==null;)r=l,l=r.return;return r.tag===3?r.stateNode:null}var Fl={},Vc=new WeakMap;function xi(r,l){if(typeof r=="object"&&r!==null){var d=Vc.get(r);return d!==void 0?d:(l={value:r,source:l,stack:Nt(l)},Vc.set(r,l),l)}return{value:r,source:l,stack:Nt(l)}}var gs=[],fo=0,Ul=null,$u=0,Ji=[],ea=0,ys=null,_s=1,Ka="";function Go(r,l){gs[fo++]=$u,gs[fo++]=Ul,Ul=r,$u=l}function $c(r,l,d){Ji[ea++]=_s,Ji[ea++]=Ka,Ji[ea++]=ys,ys=r;var b=_s;r=Ka;var E=32-ae(b)-1;b&=~(1<<E),d+=1;var L=32-ae(l)+E;if(30<L){var W=E-E%5;L=(b&(1<<W)-1).toString(32),b>>=W,E-=W,_s=1<<32-ae(l)+E|d<<E|b,Ka=L+r}else _s=1<<L|d<<E|b,Ka=r}function Ho(r){r.return!==null&&(Go(r,1),$c(r,1,0))}function Vl(r){for(;r===Ul;)Ul=gs[--fo],gs[fo]=null,$u=gs[--fo],gs[fo]=null;for(;r===ys;)ys=Ji[--ea],Ji[ea]=null,Ka=Ji[--ea],Ji[ea]=null,_s=Ji[--ea],Ji[ea]=null}var Di=null,ti=null,Br=!1,ta=null,ma=!1,Zc=Error(p(519));function un(r){var l=Error(p(418,""));throw Yo(xi(l,r)),Zc}function po(r){var l=r.stateNode,d=r.type,b=r.memoizedProps;switch(l[yt]=r,l[kt]=b,d){case"dialog":Xr("cancel",l),Xr("close",l);break;case"iframe":case"object":case"embed":Xr("load",l);break;case"video":case"audio":for(d=0;d<vh.length;d++)Xr(vh[d],l);break;case"source":Xr("error",l);break;case"img":case"image":case"link":Xr("error",l),Xr("load",l);break;case"details":Xr("toggle",l);break;case"input":Xr("invalid",l),zo(l,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0),El(l);break;case"select":Xr("invalid",l);break;case"textarea":Xr("invalid",l),ko(l,b.value,b.defaultValue,b.children),El(l)}d=b.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||b.suppressHydrationWarning===!0||Xp(l.textContent,d)?(b.popover!=null&&(Xr("beforetoggle",l),Xr("toggle",l)),b.onScroll!=null&&Xr("scroll",l),b.onScrollEnd!=null&&Xr("scrollend",l),b.onClick!=null&&(l.onclick=Af),l=!0):l=!1,l||un(r)}function ga(r){for(Di=r.return;Di;)switch(Di.tag){case 3:case 27:ma=!0;return;case 5:case 13:ma=!1;return;default:Di=Di.return}}function Wo(r){if(r!==Di)return!1;if(!Br)return ga(r),Br=!0,!1;var l=!1,d;if((d=r.tag!==3&&r.tag!==27)&&((d=r.tag===5)&&(d=r.type,d=!(d!=="form"&&d!=="button")||em(r.type,r.memoizedProps)),d=!d),d&&(l=!0),l&&ti&&un(r),ga(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(p(317));e:{for(r=r.nextSibling,l=0;r;){if(r.nodeType===8)if(d=r.data,d==="/$"){if(l===0){ti=ha(r.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;r=r.nextSibling}ti=null}}else ti=Di?ha(r.stateNode.nextSibling):null;return!0}function Ko(){ti=Di=null,Br=!1}function Yo(r){ta===null?ta=[r]:ta.push(r)}var Ya=Error(p(460)),Bs=Error(p(474)),Zu={then:function(){}};function qc(r){return r=r.status,r==="fulfilled"||r==="rejected"}function $l(){}function Xh(r,l,d){switch(d=r[d],d===void 0?r.push(l):d!==l&&(l.then($l,$l),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,r===Ya?Error(p(483)):r;default:if(typeof l.status=="string")l.then($l,$l);else{if(r=En,r!==null&&100<r.shellSuspendCounter)throw Error(p(482));r=l,r.status="pending",r.then(function(b){if(l.status==="pending"){var E=l;E.status="fulfilled",E.value=b}},function(b){if(l.status==="pending"){var E=l;E.status="rejected",E.reason=b}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,r===Ya?Error(p(483)):r}throw Xo=l,Ya}}var Xo=null;function Gc(){if(Xo===null)throw Error(p(459));var r=Xo;return Xo=null,r}var Vi=null,Zl=0;function qu(r){var l=Zl;return Zl+=1,Vi===null&&(Vi=[]),Xh(Vi,r,l)}function ql(r,l){l=l.props.ref,r.ref=l!==void 0?l:null}function Gu(r,l){throw l.$$typeof===S?Error(p(525)):(r=Object.prototype.toString.call(l),Error(p(31,r==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":r)))}function Qh(r){var l=r._init;return l(r._payload)}function Jh(r){function l(Ze,Be){if(r){var Qe=Ze.deletions;Qe===null?(Ze.deletions=[Be],Ze.flags|=16):Qe.push(Be)}}function d(Ze,Be){if(!r)return null;for(;Be!==null;)l(Ze,Be),Be=Be.sibling;return null}function b(Ze){for(var Be=new Map;Ze!==null;)Ze.key!==null?Be.set(Ze.key,Ze):Be.set(Ze.index,Ze),Ze=Ze.sibling;return Be}function E(Ze,Be){return Ze=hu(Ze,Be),Ze.index=0,Ze.sibling=null,Ze}function L(Ze,Be,Qe){return Ze.index=Qe,r?(Qe=Ze.alternate,Qe!==null?(Qe=Qe.index,Qe<Be?(Ze.flags|=33554434,Be):Qe):(Ze.flags|=33554434,Be)):(Ze.flags|=1048576,Be)}function W(Ze){return r&&Ze.alternate===null&&(Ze.flags|=33554434),Ze}function ue(Ze,Be,Qe,_t){return Be===null||Be.tag!==6?(Be=Dp(Qe,Ze.mode,_t),Be.return=Ze,Be):(Be=E(Be,Qe),Be.return=Ze,Be)}function Me(Ze,Be,Qe,_t){var Gt=Qe.type;return Gt===C?dt(Ze,Be,Qe.props.children,_t,Qe.key):Be!==null&&(Be.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===ye&&Qh(Gt)===Be.type)?(Be=E(Be,Qe.props),ql(Be,Qe),Be.return=Ze,Be):(Be=fu(Qe.type,Qe.key,Qe.props,null,Ze.mode,_t),ql(Be,Qe),Be.return=Ze,Be)}function Ne(Ze,Be,Qe,_t){return Be===null||Be.tag!==4||Be.stateNode.containerInfo!==Qe.containerInfo||Be.stateNode.implementation!==Qe.implementation?(Be=gd(Qe,Ze.mode,_t),Be.return=Ze,Be):(Be=E(Be,Qe.children||[]),Be.return=Ze,Be)}function dt(Ze,Be,Qe,_t,Gt){return Be===null||Be.tag!==7?(Be=hl(Qe,Ze.mode,_t,Gt),Be.return=Ze,Be):(Be=E(Be,Qe),Be.return=Ze,Be)}function Mt(Ze,Be,Qe){if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return Be=Dp(""+Be,Ze.mode,Qe),Be.return=Ze,Be;if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case y:return Qe=fu(Be.type,Be.key,Be.props,null,Ze.mode,Qe),ql(Qe,Be),Qe.return=Ze,Qe;case u:return Be=gd(Be,Ze.mode,Qe),Be.return=Ze,Be;case ye:var _t=Be._init;return Be=_t(Be._payload),Mt(Ze,Be,Qe)}if(Ht(Be)||ke(Be))return Be=hl(Be,Ze.mode,Qe,null),Be.return=Ze,Be;if(typeof Be.then=="function")return Mt(Ze,qu(Be),Qe);if(Be.$$typeof===F)return Mt(Ze,nu(Ze,Be),Qe);Gu(Ze,Be)}return null}function et(Ze,Be,Qe,_t){var Gt=Be!==null?Be.key:null;if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Gt!==null?null:ue(Ze,Be,""+Qe,_t);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case y:return Qe.key===Gt?Me(Ze,Be,Qe,_t):null;case u:return Qe.key===Gt?Ne(Ze,Be,Qe,_t):null;case ye:return Gt=Qe._init,Qe=Gt(Qe._payload),et(Ze,Be,Qe,_t)}if(Ht(Qe)||ke(Qe))return Gt!==null?null:dt(Ze,Be,Qe,_t,null);if(typeof Qe.then=="function")return et(Ze,Be,qu(Qe),_t);if(Qe.$$typeof===F)return et(Ze,Be,nu(Ze,Qe),_t);Gu(Ze,Qe)}return null}function lt(Ze,Be,Qe,_t,Gt){if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return Ze=Ze.get(Qe)||null,ue(Be,Ze,""+_t,Gt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case y:return Ze=Ze.get(_t.key===null?Qe:_t.key)||null,Me(Be,Ze,_t,Gt);case u:return Ze=Ze.get(_t.key===null?Qe:_t.key)||null,Ne(Be,Ze,_t,Gt);case ye:var $r=_t._init;return _t=$r(_t._payload),lt(Ze,Be,Qe,_t,Gt)}if(Ht(_t)||ke(_t))return Ze=Ze.get(Qe)||null,dt(Be,Ze,_t,Gt,null);if(typeof _t.then=="function")return lt(Ze,Be,Qe,qu(_t),Gt);if(_t.$$typeof===F)return lt(Ze,Be,Qe,nu(Be,_t),Gt);Gu(Be,_t)}return null}function Qt(Ze,Be,Qe,_t){for(var Gt=null,$r=null,rr=Be,Jt=Be=0,pi=null;rr!==null&&Jt<Qe.length;Jt++){rr.index>Jt?(pi=rr,rr=null):pi=rr.sibling;var rn=et(Ze,rr,Qe[Jt],_t);if(rn===null){rr===null&&(rr=pi);break}r&&rr&&rn.alternate===null&&l(Ze,rr),Be=L(rn,Be,Jt),$r===null?Gt=rn:$r.sibling=rn,$r=rn,rr=pi}if(Jt===Qe.length)return d(Ze,rr),Br&&Go(Ze,Jt),Gt;if(rr===null){for(;Jt<Qe.length;Jt++)rr=Mt(Ze,Qe[Jt],_t),rr!==null&&(Be=L(rr,Be,Jt),$r===null?Gt=rr:$r.sibling=rr,$r=rr);return Br&&Go(Ze,Jt),Gt}for(rr=b(rr);Jt<Qe.length;Jt++)pi=lt(rr,Ze,Jt,Qe[Jt],_t),pi!==null&&(r&&pi.alternate!==null&&rr.delete(pi.key===null?Jt:pi.key),Be=L(pi,Be,Jt),$r===null?Gt=pi:$r.sibling=pi,$r=pi);return r&&rr.forEach(function(xu){return l(Ze,xu)}),Br&&Go(Ze,Jt),Gt}function xr(Ze,Be,Qe,_t){if(Qe==null)throw Error(p(151));for(var Gt=null,$r=null,rr=Be,Jt=Be=0,pi=null,rn=Qe.next();rr!==null&&!rn.done;Jt++,rn=Qe.next()){rr.index>Jt?(pi=rr,rr=null):pi=rr.sibling;var xu=et(Ze,rr,rn.value,_t);if(xu===null){rr===null&&(rr=pi);break}r&&rr&&xu.alternate===null&&l(Ze,rr),Be=L(xu,Be,Jt),$r===null?Gt=xu:$r.sibling=xu,$r=xu,rr=pi}if(rn.done)return d(Ze,rr),Br&&Go(Ze,Jt),Gt;if(rr===null){for(;!rn.done;Jt++,rn=Qe.next())rn=Mt(Ze,rn.value,_t),rn!==null&&(Be=L(rn,Be,Jt),$r===null?Gt=rn:$r.sibling=rn,$r=rn);return Br&&Go(Ze,Jt),Gt}for(rr=b(rr);!rn.done;Jt++,rn=Qe.next())rn=lt(rr,Ze,Jt,rn.value,_t),rn!==null&&(r&&rn.alternate!==null&&rr.delete(rn.key===null?Jt:rn.key),Be=L(rn,Be,Jt),$r===null?Gt=rn:$r.sibling=rn,$r=rn);return r&&rr.forEach(function(_0){return l(Ze,_0)}),Br&&Go(Ze,Jt),Gt}function oi(Ze,Be,Qe,_t){if(typeof Qe=="object"&&Qe!==null&&Qe.type===C&&Qe.key===null&&(Qe=Qe.props.children),typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case y:e:{for(var Gt=Qe.key;Be!==null;){if(Be.key===Gt){if(Gt=Qe.type,Gt===C){if(Be.tag===7){d(Ze,Be.sibling),_t=E(Be,Qe.props.children),_t.return=Ze,Ze=_t;break e}}else if(Be.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===ye&&Qh(Gt)===Be.type){d(Ze,Be.sibling),_t=E(Be,Qe.props),ql(_t,Qe),_t.return=Ze,Ze=_t;break e}d(Ze,Be);break}else l(Ze,Be);Be=Be.sibling}Qe.type===C?(_t=hl(Qe.props.children,Ze.mode,_t,Qe.key),_t.return=Ze,Ze=_t):(_t=fu(Qe.type,Qe.key,Qe.props,null,Ze.mode,_t),ql(_t,Qe),_t.return=Ze,Ze=_t)}return W(Ze);case u:e:{for(Gt=Qe.key;Be!==null;){if(Be.key===Gt)if(Be.tag===4&&Be.stateNode.containerInfo===Qe.containerInfo&&Be.stateNode.implementation===Qe.implementation){d(Ze,Be.sibling),_t=E(Be,Qe.children||[]),_t.return=Ze,Ze=_t;break e}else{d(Ze,Be);break}else l(Ze,Be);Be=Be.sibling}_t=gd(Qe,Ze.mode,_t),_t.return=Ze,Ze=_t}return W(Ze);case ye:return Gt=Qe._init,Qe=Gt(Qe._payload),oi(Ze,Be,Qe,_t)}if(Ht(Qe))return Qt(Ze,Be,Qe,_t);if(ke(Qe)){if(Gt=ke(Qe),typeof Gt!="function")throw Error(p(150));return Qe=Gt.call(Qe),xr(Ze,Be,Qe,_t)}if(typeof Qe.then=="function")return oi(Ze,Be,qu(Qe),_t);if(Qe.$$typeof===F)return oi(Ze,Be,nu(Ze,Qe),_t);Gu(Ze,Qe)}return typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint"?(Qe=""+Qe,Be!==null&&Be.tag===6?(d(Ze,Be.sibling),_t=E(Be,Qe),_t.return=Ze,Ze=_t):(d(Ze,Be),_t=Dp(Qe,Ze.mode,_t),_t.return=Ze,Ze=_t),W(Ze)):d(Ze,Be)}return function(Ze,Be,Qe,_t){try{Zl=0;var Gt=oi(Ze,Be,Qe,_t);return Vi=null,Gt}catch(rr){if(rr===Ya)throw rr;var $r=as(29,rr,null,Ze.mode);return $r.lanes=_t,$r.return=Ze,$r}finally{}}}var Ta=Jh(!0),js=Jh(!1),ci=br(null),bi=br(0);function Ma(r,l){r=Mo,Fr(bi,r),Fr(ci,l),Mo=r|l.baseLanes}function Hc(){Fr(bi,Mo),Fr(ci,ci.current)}function Aa(){Mo=bi.current,en(ci),en(bi)}var Xn=br(null),Xa=null;function vs(r){var l=r.alternate;Fr(dn,dn.current&1),Fr(Xn,r),Xa===null&&(l===null||ci.current!==null||l.memoizedState!==null)&&(Xa=r)}function rd(r){if(r.tag===22){if(Fr(dn,dn.current),Fr(Xn,r),Xa===null){var l=r.alternate;l!==null&&l.memoizedState!==null&&(Xa=r)}}else xs()}function xs(){Fr(dn,dn.current),Fr(Xn,Xn.current)}function bs(r){en(Xn),Xa===r&&(Xa=null),en(dn)}var dn=br(0);function Ca(r){for(var l=r;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ot=typeof AbortController<"u"?AbortController:function(){var r=[],l=this.signal={aborted:!1,addEventListener:function(d,b){r.push(b)}};this.abort=function(){l.aborted=!0,r.forEach(function(d){return d()})}},nd=n.unstable_scheduleCallback,ef=n.unstable_NormalPriority,Bn={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qo(){return{controller:new Ot,data:new Map,refCount:0}}function Qa(r){r.refCount--,r.refCount===0&&nd(ef,function(){r.controller.abort()})}var Ns=null,Tr=0,Fs=0,Jo=null;function Wc(r,l){if(Ns===null){var d=Ns=[];Tr=0,Fs=Td(),Jo={status:"pending",value:void 0,then:function(b){d.push(b)}}}return Tr++,l.then(Kc,Kc),l}function Kc(){if(--Tr===0&&Ns!==null){Jo!==null&&(Jo.status="fulfilled");var r=Ns;Ns=null,Fs=0,Jo=null;for(var l=0;l<r.length;l++)(0,r[l])()}}function id(r,l){var d=[],b={status:"pending",value:null,reason:null,then:function(E){d.push(E)}};return r.then(function(){b.status="fulfilled",b.value=l;for(var E=0;E<d.length;E++)(0,d[E])(l)},function(E){for(b.status="rejected",b.reason=E,E=0;E<d.length;E++)(0,d[E])(void 0)}),b}var tf=Ye.S;Ye.S=function(r,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&Wc(r,l),tf!==null&&tf(r,l)};var ws=br(null);function Yc(){var r=ws.current;return r!==null?r:En.pooledCache}function Hu(r,l){l===null?Fr(ws,ws.current):Fr(ws,l.pool)}function Xc(){var r=Yc();return r===null?null:{parent:Bn._currentValue,pool:r}}var Us=0,Rr=null,qr=null,mr=null,mo=!1,Vs=!1,$s=!1,go=0,Gl=0,yo=null,Ss=0;function In(){throw Error(p(321))}function $t(r,l){if(l===null)return!1;for(var d=0;d<l.length&&d<r.length;d++)if(!Qi(r[d],l[d]))return!1;return!0}function Kt(r,l,d,b,E,L){return Us=L,Rr=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Ye.H=r===null||r.memoizedState===null?zr:Mn,$s=!1,L=d(b,E),$s=!1,Vs&&(L=Qc(l,d,b,E)),Hl(r),L}function Hl(r){Ye.H=Ir;var l=qr!==null&&qr.next!==null;if(Us=0,mr=qr=Rr=null,mo=!1,Gl=0,yo=null,l)throw Error(p(300));r===null||Mr||(r=r.dependencies,r!==null&&ah(r)&&(Mr=!0))}function Qc(r,l,d,b){Rr=r;var E=0;do{if(Vs&&(yo=null),Gl=0,Vs=!1,25<=E)throw Error(p(301));if(E+=1,mr=qr=null,r.updateQueue!=null){var L=r.updateQueue;L.lastEffect=null,L.events=null,L.stores=null,L.memoCache!=null&&(L.memoCache.index=0)}Ye.H=An,L=l(d,b)}while(Vs);return L}function rf(){var r=Ye.H,l=r.useState()[0];return l=typeof l.then=="function"?Tn(l):l,r=r.useState()[0],(qr!==null?qr.memoizedState:null)!==r&&(Rr.flags|=1024),l}function $i(){var r=go!==0;return go=0,r}function Jc(r,l,d){l.updateQueue=r.updateQueue,l.flags&=-2053,r.lanes&=~d}function Ea(r){if(mo){for(r=r.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}mo=!1}Us=0,mr=qr=Rr=null,Vs=!1,Gl=go=0,yo=null}function hi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mr===null?Rr.memoizedState=mr=r:mr=mr.next=r,mr}function Dn(){if(qr===null){var r=Rr.alternate;r=r!==null?r.memoizedState:null}else r=qr.next;var l=mr===null?Rr.memoizedState:mr.next;if(l!==null)mr=l,qr=r;else{if(r===null)throw Rr.alternate===null?Error(p(467)):Error(p(310));qr=r,r={memoizedState:qr.memoizedState,baseState:qr.baseState,baseQueue:qr.baseQueue,queue:qr.queue,next:null},mr===null?Rr.memoizedState=mr=r:mr=mr.next=r}return mr}var _n;_n=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Tn(r){var l=Gl;return Gl+=1,yo===null&&(yo=[]),r=Xh(yo,r,l),l=Rr,(mr===null?l.memoizedState:mr.next)===null&&(l=l.alternate,Ye.H=l===null||l.memoizedState===null?zr:Mn),r}function Wl(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Tn(r);if(r.$$typeof===F)return qi(r)}throw Error(p(438,String(r)))}function el(r){var l=null,d=Rr.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var b=Rr.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(l={data:b.data.map(function(E){return E.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=_n(),Rr.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(r),b=0;b<r;b++)d[b]=xe;return l.index++,d}function Pa(r,l){return typeof l=="function"?l(r):l}function Ra(r){var l=Dn();return Kl(l,qr,r)}function Kl(r,l,d){var b=r.queue;if(b===null)throw Error(p(311));b.lastRenderedReducer=d;var E=r.baseQueue,L=b.pending;if(L!==null){if(E!==null){var W=E.next;E.next=L.next,L.next=W}l.baseQueue=E=L,b.pending=null}if(L=r.baseState,E===null)r.memoizedState=L;else{l=E.next;var ue=W=null,Me=null,Ne=l,dt=!1;do{var Mt=Ne.lane&-536870913;if(Mt!==Ne.lane?(Jr&Mt)===Mt:(Us&Mt)===Mt){var et=Ne.revertLane;if(et===0)Me!==null&&(Me=Me.next={lane:0,revertLane:0,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null}),Mt===Fs&&(dt=!0);else if((Us&et)===et){Ne=Ne.next,et===Fs&&(dt=!0);continue}else Mt={lane:0,revertLane:Ne.revertLane,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},Me===null?(ue=Me=Mt,W=L):Me=Me.next=Mt,Rr.lanes|=et,du|=et;Mt=Ne.action,$s&&d(L,Mt),L=Ne.hasEagerState?Ne.eagerState:d(L,Mt)}else et={lane:Mt,revertLane:Ne.revertLane,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},Me===null?(ue=Me=et,W=L):Me=Me.next=et,Rr.lanes|=Mt,du|=Mt;Ne=Ne.next}while(Ne!==null&&Ne!==l);if(Me===null?W=L:Me.next=ue,!Qi(L,r.memoizedState)&&(Mr=!0,dt&&(d=Jo,d!==null)))throw d;r.memoizedState=L,r.baseState=W,r.baseQueue=Me,b.lastRenderedState=L}return E===null&&(b.lanes=0),[r.memoizedState,b.dispatch]}function tl(r){var l=Dn(),d=l.queue;if(d===null)throw Error(p(311));d.lastRenderedReducer=r;var b=d.dispatch,E=d.pending,L=l.memoizedState;if(E!==null){d.pending=null;var W=E=E.next;do L=r(L,W.action),W=W.next;while(W!==E);Qi(L,l.memoizedState)||(Mr=!0),l.memoizedState=L,l.baseQueue===null&&(l.baseState=L),d.lastRenderedState=L}return[L,b]}function rl(r,l,d){var b=Rr,E=Dn(),L=Br;if(L){if(d===void 0)throw Error(p(407));d=d()}else d=l();var W=!Qi((qr||E).memoizedState,d);if(W&&(E.memoizedState=d,Mr=!0),E=E.queue,ee(nl.bind(null,b,E,r),[r]),E.getSnapshot!==l||W||mr!==null&&mr.memoizedState.tag&1){if(b.flags|=2048,D(9,eh.bind(null,b,E,d,l),{destroy:void 0},null),En===null)throw Error(p(349));L||(Us&60)!==0||Yl(b,l,d)}return d}function Yl(r,l,d){r.flags|=16384,r={getSnapshot:l,value:d},l=Rr.updateQueue,l===null?(l=_n(),Rr.updateQueue=l,l.stores=[r]):(d=l.stores,d===null?l.stores=[r]:d.push(r))}function eh(r,l,d,b){l.value=d,l.getSnapshot=b,_o(l)&&th(r)}function nl(r,l,d){return d(function(){_o(l)&&th(r)})}function _o(r){var l=r.getSnapshot;r=r.value;try{var d=l();return!Qi(r,d)}catch{return!0}}function th(r){var l=ho(r,2);l!==null&&ia(l,r,2)}function Xl(r){var l=hi();if(typeof r=="function"){var d=r;if(r=d(),$s){ie(!0);try{d()}finally{ie(!1)}}}return l.memoizedState=l.baseState=r,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:r},l}function vo(r,l,d,b){return r.baseState=d,Kl(r,qr,typeof b=="function"?b:Pa)}function nf(r,l,d,b,E){if(Kr(r))throw Error(p(485));if(r=l.action,r!==null){var L={payload:E,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(W){L.listeners.push(W)}};Ye.T!==null?d(!0):L.isTransition=!1,b(L),d=l.pending,d===null?(L.next=l.pending=L,Wu(l,L)):(L.next=d.next,l.pending=d.next=L)}}function Wu(r,l){var d=l.action,b=l.payload,E=r.state;if(l.isTransition){var L=Ye.T,W={};Ye.T=W;try{var ue=d(E,b),Me=Ye.S;Me!==null&&Me(W,ue),Ku(r,l,ue)}catch(Ne){v(r,l,Ne)}finally{Ye.T=L}}else try{L=d(E,b),Ku(r,l,L)}catch(Ne){v(r,l,Ne)}}function Ku(r,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(b){rh(r,l,b)},function(b){return v(r,l,b)}):rh(r,l,d)}function rh(r,l,d){l.status="fulfilled",l.value=d,e(l),r.state=d,l=r.pending,l!==null&&(d=l.next,d===l?r.pending=null:(d=d.next,l.next=d,Wu(r,d)))}function v(r,l,d){var b=r.pending;if(r.pending=null,b!==null){b=b.next;do l.status="rejected",l.reason=d,e(l),l=l.next;while(l!==b)}r.action=null}function e(r){r=r.listeners;for(var l=0;l<r.length;l++)(0,r[l])()}function i(r,l){return l}function h(r,l){if(Br){var d=En.formState;if(d!==null){e:{var b=Rr;if(Br){if(ti){t:{for(var E=ti,L=ma;E.nodeType!==8;){if(!L){E=null;break t}if(E=ha(E.nextSibling),E===null){E=null;break t}}L=E.data,E=L==="F!"||L==="F"?E:null}if(E){ti=ha(E.nextSibling),b=E.data==="F!";break e}}un(b)}b=!1}b&&(l=d[0])}}return d=hi(),d.memoizedState=d.baseState=l,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:l},d.queue=b,d=gr.bind(null,Rr,b),b.dispatch=d,b=Xl(!1),L=pn.bind(null,Rr,!1,b.queue),b=hi(),E={state:l,dispatch:null,action:r,pending:null},b.queue=E,d=nf.bind(null,Rr,E,L,d),E.dispatch=d,b.memoizedState=r,[l,d,!1]}function m(r){var l=Dn();return x(l,qr,r)}function x(r,l,d){l=Kl(r,l,i)[0],r=Ra(Pa)[0],l=typeof l=="object"&&l!==null&&typeof l.then=="function"?Tn(l):l;var b=Dn(),E=b.queue,L=E.dispatch;return d!==b.memoizedState&&(Rr.flags|=2048,D(9,M.bind(null,E,d),{destroy:void 0},null)),[l,L,r]}function M(r,l){r.action=l}function P(r){var l=Dn(),d=qr;if(d!==null)return x(l,d,r);Dn(),l=l.memoizedState,d=Dn();var b=d.queue.dispatch;return d.memoizedState=r,[l,b,!1]}function D(r,l,d,b){return r={tag:r,create:l,inst:d,deps:b,next:null},l=Rr.updateQueue,l===null&&(l=_n(),Rr.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=r.next=r:(b=d.next,d.next=r,r.next=b,l.lastEffect=r),r}function j(){return Dn().memoizedState}function U(r,l,d,b){var E=hi();Rr.flags|=r,E.memoizedState=D(1|l,d,{destroy:void 0},b===void 0?null:b)}function $(r,l,d,b){var E=Dn();b=b===void 0?null:b;var L=E.memoizedState.inst;qr!==null&&b!==null&&$t(b,qr.memoizedState.deps)?E.memoizedState=D(l,d,L,b):(Rr.flags|=r,E.memoizedState=D(1|l,d,L,b))}function Z(r,l){U(8390656,8,r,l)}function ee(r,l){$(2048,8,r,l)}function re(r,l){return $(4,2,r,l)}function de(r,l){return $(4,4,r,l)}function fe(r,l){if(typeof l=="function"){r=r();var d=l(r);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return r=r(),l.current=r,function(){l.current=null}}function me(r,l,d){d=d!=null?d.concat([r]):null,$(4,4,fe.bind(null,l,r),d)}function _e(){}function Ae(r,l){var d=Dn();l=l===void 0?null:l;var b=d.memoizedState;return l!==null&&$t(l,b[1])?b[0]:(d.memoizedState=[r,l],r)}function Ee(r,l){var d=Dn();l=l===void 0?null:l;var b=d.memoizedState;if(l!==null&&$t(l,b[1]))return b[0];if(b=r(),$s){ie(!0);try{r()}finally{ie(!1)}}return d.memoizedState=[b,l],b}function Pe(r,l,d){return d===void 0||(Us&1073741824)!==0?r.memoizedState=l:(r.memoizedState=d,r=ca(),Rr.lanes|=r,du|=r,d)}function ze(r,l,d,b){return Qi(d,l)?d:ci.current!==null?(r=Pe(r,d,b),Qi(r,l)||(Mr=!0),r):(Us&42)===0?(Mr=!0,r.memoizedState=d):(r=ca(),Rr.lanes|=r,du|=r,l)}function Ie(r,l,d,b,E){var L=zt.p;zt.p=L!==0&&8>L?L:8;var W=Ye.T,ue={};Ye.T=ue,pn(r,!1,l,d);try{var Me=E(),Ne=Ye.S;if(Ne!==null&&Ne(ue,Me),Me!==null&&typeof Me=="object"&&typeof Me.then=="function"){var dt=id(Me,b);tr(r,l,dt,ka(r))}else tr(r,l,b,ka(r))}catch(Mt){tr(r,l,{then:function(){},status:"rejected",reason:Mt},ka())}finally{zt.p=L,Ye.T=W}}function $e(){}function He(r,l,d,b){if(r.tag!==5)throw Error(p(476));var E=at(r).queue;Ie(r,E,l,er,d===null?$e:function(){return ot(r),d(b)})}function at(r){var l=r.memoizedState;if(l!==null)return l;l={memoizedState:er,baseState:er,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:er},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:d},next:null},r.memoizedState=l,r=r.alternate,r!==null&&(r.memoizedState=l),l}function ot(r){var l=at(r).next.queue;tr(r,l,{},ka())}function rt(){return qi(ge)}function It(){return Dn().memoizedState}function Tt(){return Dn().memoizedState}function pt(r){for(var l=r.return;l!==null;){switch(l.tag){case 24:case 3:var d=ka();r=ol(d);var b=iu(l,r,d);b!==null&&(ia(b,l,d),df(b,l,d)),l={cache:Qo()},r.payload=l;return}l=l.return}}function Vt(r,l,d){var b=ka();d={lane:b,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},Kr(r)?vn(l,d):(d=qo(r,l,d,b),d!==null&&(ia(d,r,b),mn(d,l,b)))}function gr(r,l,d){var b=ka();tr(r,l,d,b)}function tr(r,l,d,b){var E={lane:b,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(Kr(r))vn(l,E);else{var L=r.alternate;if(r.lanes===0&&(L===null||L.lanes===0)&&(L=l.lastRenderedReducer,L!==null))try{var W=l.lastRenderedState,ue=L(W,d);if(E.hasEagerState=!0,E.eagerState=ue,Qi(ue,W))return Zo(r,l,E,0),En===null&&Uc(),!1}catch{}finally{}if(d=qo(r,l,E,b),d!==null)return ia(d,r,b),mn(d,l,b),!0}return!1}function pn(r,l,d,b){if(b={lane:2,revertLane:Td(),action:b,hasEagerState:!1,eagerState:null,next:null},Kr(r)){if(l)throw Error(p(479))}else l=qo(r,d,b,2),l!==null&&ia(l,r,2)}function Kr(r){var l=r.alternate;return r===Rr||l!==null&&l===Rr}function vn(r,l){Vs=mo=!0;var d=r.pending;d===null?l.next=l:(l.next=d.next,d.next=l),r.pending=l}function mn(r,l,d){if((d&4194176)!==0){var b=l.lanes;b&=r.pendingLanes,d|=b,l.lanes=d,Wt(r,d)}}var Ir={readContext:qi,use:Wl,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useLayoutEffect:In,useInsertionEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useSyncExternalStore:In,useId:In};Ir.useCacheRefresh=In,Ir.useMemoCache=In,Ir.useHostTransitionStatus=In,Ir.useFormState=In,Ir.useActionState=In,Ir.useOptimistic=In;var zr={readContext:qi,use:Wl,useCallback:function(r,l){return hi().memoizedState=[r,l===void 0?null:l],r},useContext:qi,useEffect:Z,useImperativeHandle:function(r,l,d){d=d!=null?d.concat([r]):null,U(4194308,4,fe.bind(null,l,r),d)},useLayoutEffect:function(r,l){return U(4194308,4,r,l)},useInsertionEffect:function(r,l){U(4,2,r,l)},useMemo:function(r,l){var d=hi();l=l===void 0?null:l;var b=r();if($s){ie(!0);try{r()}finally{ie(!1)}}return d.memoizedState=[b,l],b},useReducer:function(r,l,d){var b=hi();if(d!==void 0){var E=d(l);if($s){ie(!0);try{d(l)}finally{ie(!1)}}}else E=l;return b.memoizedState=b.baseState=E,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:E},b.queue=r,r=r.dispatch=Vt.bind(null,Rr,r),[b.memoizedState,r]},useRef:function(r){var l=hi();return r={current:r},l.memoizedState=r},useState:function(r){r=Xl(r);var l=r.queue,d=gr.bind(null,Rr,l);return l.dispatch=d,[r.memoizedState,d]},useDebugValue:_e,useDeferredValue:function(r,l){var d=hi();return Pe(d,r,l)},useTransition:function(){var r=Xl(!1);return r=Ie.bind(null,Rr,r.queue,!0,!1),hi().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,l,d){var b=Rr,E=hi();if(Br){if(d===void 0)throw Error(p(407));d=d()}else{if(d=l(),En===null)throw Error(p(349));(Jr&60)!==0||Yl(b,l,d)}E.memoizedState=d;var L={value:d,getSnapshot:l};return E.queue=L,Z(nl.bind(null,b,L,r),[r]),b.flags|=2048,D(9,eh.bind(null,b,L,d,l),{destroy:void 0},null),d},useId:function(){var r=hi(),l=En.identifierPrefix;if(Br){var d=Ka,b=_s;d=(b&~(1<<32-ae(b)-1)).toString(32)+d,l=":"+l+"R"+d,d=go++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=Ss++,l=":"+l+"r"+d.toString(32)+":";return r.memoizedState=l},useCacheRefresh:function(){return hi().memoizedState=pt.bind(null,Rr)}};zr.useMemoCache=el,zr.useHostTransitionStatus=rt,zr.useFormState=h,zr.useActionState=h,zr.useOptimistic=function(r){var l=hi();l.memoizedState=l.baseState=r;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=pn.bind(null,Rr,!0,d),d.dispatch=l,[r,l]};var Mn={readContext:qi,use:Wl,useCallback:Ae,useContext:qi,useEffect:ee,useImperativeHandle:me,useInsertionEffect:re,useLayoutEffect:de,useMemo:Ee,useReducer:Ra,useRef:j,useState:function(){return Ra(Pa)},useDebugValue:_e,useDeferredValue:function(r,l){var d=Dn();return ze(d,qr.memoizedState,r,l)},useTransition:function(){var r=Ra(Pa)[0],l=Dn().memoizedState;return[typeof r=="boolean"?r:Tn(r),l]},useSyncExternalStore:rl,useId:It};Mn.useCacheRefresh=Tt,Mn.useMemoCache=el,Mn.useHostTransitionStatus=rt,Mn.useFormState=m,Mn.useActionState=m,Mn.useOptimistic=function(r,l){var d=Dn();return vo(d,qr,r,l)};var An={readContext:qi,use:Wl,useCallback:Ae,useContext:qi,useEffect:ee,useImperativeHandle:me,useInsertionEffect:re,useLayoutEffect:de,useMemo:Ee,useReducer:tl,useRef:j,useState:function(){return tl(Pa)},useDebugValue:_e,useDeferredValue:function(r,l){var d=Dn();return qr===null?Pe(d,r,l):ze(d,qr.memoizedState,r,l)},useTransition:function(){var r=tl(Pa)[0],l=Dn().memoizedState;return[typeof r=="boolean"?r:Tn(r),l]},useSyncExternalStore:rl,useId:It};An.useCacheRefresh=Tt,An.useMemoCache=el,An.useHostTransitionStatus=rt,An.useFormState=P,An.useActionState=P,An.useOptimistic=function(r,l){var d=Dn();return qr!==null?vo(d,qr,r,l):(d.baseState=r,[r,d.queue.dispatch])};function fi(r,l,d,b){l=r.memoizedState,d=d(b,l),d=d==null?l:ht({},l,d),r.memoizedState=d,r.lanes===0&&(r.updateQueue.baseState=d)}var wi={isMounted:function(r){return(r=r._reactInternals)?Rt(r)===r:!1},enqueueSetState:function(r,l,d){r=r._reactInternals;var b=ka(),E=ol(b);E.payload=l,d!=null&&(E.callback=d),l=iu(r,E,b),l!==null&&(ia(l,r,b),df(l,r,b))},enqueueReplaceState:function(r,l,d){r=r._reactInternals;var b=ka(),E=ol(b);E.tag=1,E.payload=l,d!=null&&(E.callback=d),l=iu(r,E,b),l!==null&&(ia(l,r,b),df(l,r,b))},enqueueForceUpdate:function(r,l){r=r._reactInternals;var d=ka(),b=ol(d);b.tag=2,l!=null&&(b.callback=l),l=iu(r,b,d),l!==null&&(ia(l,r,d),df(l,r,d))}};function Ja(r,l,d,b,E,L,W){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(b,L,W):l.prototype&&l.prototype.isPureReactComponent?!Sr(d,b)||!Sr(E,L):!0}function Zs(r,l,d,b){r=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,b),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,b),l.state!==r&&wi.enqueueReplaceState(l,l.state,null)}function ra(r,l){var d=l;if("ref"in l){d={};for(var b in l)b!=="ref"&&(d[b]=l[b])}if(r=r.defaultProps){d===l&&(d=ht({},d));for(var E in r)d[E]===void 0&&(d[E]=r[E])}return d}var Ia=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function es(r){Ia(r)}function xo(r){console.error(r)}function bo(r){Ia(r)}function Zi(r,l){try{var d=r.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(b){setTimeout(function(){throw b})}}function qs(r,l,d){try{var b=r.onCaughtError;b(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function ts(r,l,d){return d=ol(d),d.tag=3,d.payload={element:null},d.callback=function(){Zi(r,l)},d}function Ts(r){return r=ol(r),r.tag=3,r}function Cn(r,l,d,b){var E=d.type.getDerivedStateFromError;if(typeof E=="function"){var L=b.value;r.payload=function(){return E(L)},r.callback=function(){qs(l,d,b)}}var W=d.stateNode;W!==null&&typeof W.componentDidCatch=="function"&&(r.callback=function(){qs(l,d,b),typeof E!="function"&&(pu===null?pu=new Set([this]):pu.add(this));var ue=b.stack;this.componentDidCatch(b.value,{componentStack:ue!==null?ue:""})})}function xn(r,l,d,b,E){if(d.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(l=d.alternate,l!==null&&hf(l,d,E,!0),d=Xn.current,d!==null){switch(d.tag){case 13:return Xa===null?Fp():d.alternate===null&&ri===0&&(ri=3),d.flags&=-257,d.flags|=65536,d.lanes=E,b===Zu?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([b]):l.add(b),Co(r,b,E)),!1;case 22:return d.flags|=65536,b===Zu?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([b])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([b]):d.add(b)),Co(r,b,E)),!1}throw Error(p(435,d.tag))}return Co(r,b,E),Fp(),!1}if(Br)return l=Xn.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=E,b!==Zc&&(r=Error(p(422),{cause:b}),Yo(xi(r,d)))):(b!==Zc&&(l=Error(p(423),{cause:b}),Yo(xi(l,d))),r=r.current.alternate,r.flags|=65536,E&=-E,r.lanes|=E,b=xi(b,d),E=ts(r.stateNode,b,E),vp(r,E),ri!==4&&(ri=2)),!1;var L=Error(p(520),{cause:b});if(L=xi(L,d),ml===null?ml=[L]:ml.push(L),ri!==4&&(ri=2),l===null)return!0;b=xi(b,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,r=E&-E,d.lanes|=r,r=ts(d.stateNode,b,r),vp(d,r),!1;case 1:if(l=d.type,L=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(pu===null||!pu.has(L))))return d.flags|=65536,E&=-E,d.lanes|=E,E=Ts(E),Cn(E,r,d,b),vp(d,E),!1}d=d.return}while(d!==null);return!1}var jn=Error(p(461)),Mr=!1;function Si(r,l,d,b){l.child=r===null?js(l,null,d,b):Ta(l,r.child,d,b)}function wo(r,l,d,b,E){d=d.render;var L=l.ref;if("ref"in b){var W={};for(var ue in b)ue!=="ref"&&(W[ue]=b[ue])}else W=b;return ru(l),b=Kt(r,l,d,W,L,E),ue=$i(),r!==null&&!Mr?(Jc(r,l,E),il(r,l,E)):(Br&&ue&&Ho(l),l.flags|=1,Si(r,l,b,E),l.child)}function ad(r,l,d,b,E){if(r===null){var L=d.type;return typeof L=="function"&&!sc(L)&&L.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=L,af(r,l,L,b,E)):(r=fu(d.type,null,b,l,l.mode,E),r.ref=l.ref,r.return=l,l.child=r)}if(L=r.child,!Qu(r,E)){var W=L.memoizedProps;if(d=d.compare,d=d!==null?d:Sr,d(W,b)&&r.ref===l.ref)return il(r,l,E)}return l.flags|=1,r=hu(L,b),r.ref=l.ref,r.return=l,l.child=r}function af(r,l,d,b,E){if(r!==null){var L=r.memoizedProps;if(Sr(L,b)&&r.ref===l.ref)if(Mr=!1,l.pendingProps=b=L,Qu(r,E))(r.flags&131072)!==0&&(Mr=!0);else return l.lanes=r.lanes,il(r,l,E)}return Ms(r,l,d,b,E)}function nh(r,l,d){var b=l.pendingProps,E=b.children,L=(l.stateNode._pendingVisibility&2)!==0,W=r!==null?r.memoizedState:null;if(Li(r,l),b.mode==="hidden"||L){if((l.flags&128)!==0){if(b=W!==null?W.baseLanes|d:d,r!==null){for(E=l.child=r.child,L=0;E!==null;)L=L|E.lanes|E.childLanes,E=E.sibling;l.childLanes=L&~b}else l.childLanes=0,l.child=null;return sf(r,l,b,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},r!==null&&Hu(l,W!==null?W.cachePool:null),W!==null?Ma(l,W):Hc(),rd(l);else return l.lanes=l.childLanes=536870912,sf(r,l,W!==null?W.baseLanes|d:d,d)}else W!==null?(Hu(l,W.cachePool),Ma(l,W),xs(),l.memoizedState=null):(r!==null&&Hu(l,null),Hc(),xs());return Si(r,l,E,d),l.child}function sf(r,l,d,b){var E=Yc();return E=E===null?null:{parent:Bn._currentValue,pool:E},l.memoizedState={baseLanes:d,cachePool:E},r!==null&&Hu(l,null),Hc(),rd(l),r!==null&&hf(r,l,b,!0),null}function Li(r,l){var d=l.ref;if(d===null)r!==null&&r.ref!==null&&(l.flags|=2097664);else{if(typeof d!="function"&&typeof d!="object")throw Error(p(284));(r===null||r.ref!==d)&&(l.flags|=2097664)}}function Ms(r,l,d,b,E){return ru(l),d=Kt(r,l,d,b,void 0,E),b=$i(),r!==null&&!Mr?(Jc(r,l,E),il(r,l,E)):(Br&&b&&Ho(l),l.flags|=1,Si(r,l,d,E),l.child)}function ih(r,l,d,b,E,L){return ru(l),l.updateQueue=null,d=Qc(l,b,d,E),Hl(r),b=$i(),r!==null&&!Mr?(Jc(r,l,L),il(r,l,L)):(Br&&b&&Ho(l),l.flags|=1,Si(r,l,d,L),l.child)}function of(r,l,d,b,E){if(ru(l),l.stateNode===null){var L=Fl,W=d.contextType;typeof W=="object"&&W!==null&&(L=qi(W)),L=new d(b,L),l.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,L.updater=wi,l.stateNode=L,L._reactInternals=l,L=l.stateNode,L.props=b,L.state=l.memoizedState,L.refs={},ff(l),W=d.contextType,L.context=typeof W=="object"&&W!==null?qi(W):Fl,L.state=l.memoizedState,W=d.getDerivedStateFromProps,typeof W=="function"&&(fi(l,d,W,b),L.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(W=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),W!==L.state&&wi.enqueueReplaceState(L,L.state,null),ec(l,b,L,E),Ju(),L.state=l.memoizedState),typeof L.componentDidMount=="function"&&(l.flags|=4194308),b=!0}else if(r===null){L=l.stateNode;var ue=l.memoizedProps,Me=ra(d,ue);L.props=Me;var Ne=L.context,dt=d.contextType;W=Fl,typeof dt=="object"&&dt!==null&&(W=qi(dt));var Mt=d.getDerivedStateFromProps;dt=typeof Mt=="function"||typeof L.getSnapshotBeforeUpdate=="function",ue=l.pendingProps!==ue,dt||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(ue||Ne!==W)&&Zs(l,L,b,W),sl=!1;var et=l.memoizedState;L.state=et,ec(l,b,L,E),Ju(),Ne=l.memoizedState,ue||et!==Ne||sl?(typeof Mt=="function"&&(fi(l,d,Mt,b),Ne=l.memoizedState),(Me=sl||Ja(l,d,Me,b,et,Ne,W))?(dt||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(l.flags|=4194308)):(typeof L.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=b,l.memoizedState=Ne),L.props=b,L.state=Ne,L.context=W,b=Me):(typeof L.componentDidMount=="function"&&(l.flags|=4194308),b=!1)}else{L=l.stateNode,_p(r,l),W=l.memoizedProps,dt=ra(d,W),L.props=dt,Mt=l.pendingProps,et=L.context,Ne=d.contextType,Me=Fl,typeof Ne=="object"&&Ne!==null&&(Me=qi(Ne)),ue=d.getDerivedStateFromProps,(Ne=typeof ue=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(W!==Mt||et!==Me)&&Zs(l,L,b,Me),sl=!1,et=l.memoizedState,L.state=et,ec(l,b,L,E),Ju();var lt=l.memoizedState;W!==Mt||et!==lt||sl||r!==null&&r.dependencies!==null&&ah(r.dependencies)?(typeof ue=="function"&&(fi(l,d,ue,b),lt=l.memoizedState),(dt=sl||Ja(l,d,dt,b,et,lt,Me)||r!==null&&r.dependencies!==null&&ah(r.dependencies))?(Ne||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(b,lt,Me),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(b,lt,Me)),typeof L.componentDidUpdate=="function"&&(l.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof L.componentDidUpdate!="function"||W===r.memoizedProps&&et===r.memoizedState||(l.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||W===r.memoizedProps&&et===r.memoizedState||(l.flags|=1024),l.memoizedProps=b,l.memoizedState=lt),L.props=b,L.state=lt,L.context=Me,b=dt):(typeof L.componentDidUpdate!="function"||W===r.memoizedProps&&et===r.memoizedState||(l.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||W===r.memoizedProps&&et===r.memoizedState||(l.flags|=1024),b=!1)}return L=b,Li(r,l),b=(l.flags&128)!==0,L||b?(L=l.stateNode,d=b&&typeof d.getDerivedStateFromError!="function"?null:L.render(),l.flags|=1,r!==null&&b?(l.child=Ta(l,r.child,null,E),l.child=Ta(l,null,d,E)):Si(r,l,d,E),l.memoizedState=L.state,r=l.child):r=il(r,l,E),r}function Ql(r,l,d,b){return Ko(),l.flags|=256,Si(r,l,d,b),l.child}var Yu={dehydrated:null,treeContext:null,retryLane:0};function Xu(r){return{baseLanes:r,cachePool:Xc()}}function sd(r,l,d){return r=r!==null?r.childLanes&~d:0,l&&(r|=As),r}function Wm(r,l,d){var b=l.pendingProps,E=!1,L=(l.flags&128)!==0,W;if((W=L)||(W=r!==null&&r.memoizedState===null?!1:(dn.current&2)!==0),W&&(E=!0,l.flags&=-129),W=(l.flags&32)!==0,l.flags&=-33,r===null){if(Br){if(E?vs(l):xs(),Br){var ue=ti,Me;if(Me=ue){e:{for(Me=ue,ue=ma;Me.nodeType!==8;){if(!ue){ue=null;break e}if(Me=ha(Me.nextSibling),Me===null){ue=null;break e}}ue=Me}ue!==null?(l.memoizedState={dehydrated:ue,treeContext:ys!==null?{id:_s,overflow:Ka}:null,retryLane:536870912},Me=as(18,null,null,0),Me.stateNode=ue,Me.return=l,l.child=Me,Di=l,ti=null,Me=!0):Me=!1}Me||un(l)}if(ue=l.memoizedState,ue!==null&&(ue=ue.dehydrated,ue!==null))return ue.data==="$!"?l.lanes=16:l.lanes=536870912,null;bs(l)}return ue=b.children,b=b.fallback,E?(xs(),E=l.mode,ue=gp({mode:"hidden",children:ue},E),b=hl(b,E,d,null),ue.return=l,b.return=l,ue.sibling=b,l.child=ue,E=l.child,E.memoizedState=Xu(d),E.childLanes=sd(r,W,d),l.memoizedState=Yu,b):(vs(l),lf(l,ue))}if(Me=r.memoizedState,Me!==null&&(ue=Me.dehydrated,ue!==null)){if(L)l.flags&256?(vs(l),l.flags&=-257,l=uf(r,l,d)):l.memoizedState!==null?(xs(),l.child=r.child,l.flags|=128,l=null):(xs(),E=b.fallback,ue=l.mode,b=gp({mode:"visible",children:b.children},ue),E=hl(E,ue,d,null),E.flags|=2,b.return=l,E.return=l,b.sibling=E,l.child=b,Ta(l,r.child,null,d),b=l.child,b.memoizedState=Xu(d),b.childLanes=sd(r,W,d),l.memoizedState=Yu,l=E);else if(vs(l),ue.data==="$!"){if(W=ue.nextSibling&&ue.nextSibling.dataset,W)var Ne=W.dgst;W=Ne,b=Error(p(419)),b.stack="",b.digest=W,Yo({value:b,source:null,stack:null}),l=uf(r,l,d)}else if(Mr||hf(r,l,d,!1),W=(d&r.childLanes)!==0,Mr||W){if(W=En,W!==null){if(b=d&-d,(b&42)!==0)b=1;else switch(b){case 2:b=1;break;case 8:b=4;break;case 32:b=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:b=64;break;case 268435456:b=134217728;break;default:b=0}if(b=(b&(W.suspendedLanes|d))!==0?0:b,b!==0&&b!==Me.retryLane)throw Me.retryLane=b,ho(r,b),ia(W,r,b),jn}ue.data==="$?"||Fp(),l=uf(r,l,d)}else ue.data==="$?"?(l.flags|=128,l.child=r.child,l=h0.bind(null,r),ue._reactRetry=l,l=null):(r=Me.treeContext,ti=ha(ue.nextSibling),Di=l,Br=!0,ta=null,ma=!1,r!==null&&(Ji[ea++]=_s,Ji[ea++]=Ka,Ji[ea++]=ys,_s=r.id,Ka=r.overflow,ys=l),l=lf(l,b.children),l.flags|=4096);return l}return E?(xs(),E=b.fallback,ue=l.mode,Me=r.child,Ne=Me.sibling,b=hu(Me,{mode:"hidden",children:b.children}),b.subtreeFlags=Me.subtreeFlags&31457280,Ne!==null?E=hu(Ne,E):(E=hl(E,ue,d,null),E.flags|=2),E.return=l,b.return=l,b.sibling=E,l.child=b,b=E,E=l.child,ue=r.child.memoizedState,ue===null?ue=Xu(d):(Me=ue.cachePool,Me!==null?(Ne=Bn._currentValue,Me=Me.parent!==Ne?{parent:Ne,pool:Ne}:Me):Me=Xc(),ue={baseLanes:ue.baseLanes|d,cachePool:Me}),E.memoizedState=ue,E.childLanes=sd(r,W,d),l.memoizedState=Yu,b):(vs(l),d=r.child,r=d.sibling,d=hu(d,{mode:"visible",children:b.children}),d.return=l,d.sibling=null,r!==null&&(W=l.deletions,W===null?(l.deletions=[r],l.flags|=16):W.push(r)),l.child=d,l.memoizedState=null,d)}function lf(r,l){return l=gp({mode:"visible",children:l},r.mode),l.return=r,r.child=l}function gp(r,l){return rg(r,l,0,null)}function uf(r,l,d){return Ta(l,r.child,null,d),r=lf(l,l.pendingProps.children),r.flags|=2,l.memoizedState=null,r}function yp(r,l,d){r.lanes|=l;var b=r.alternate;b!==null&&(b.lanes|=l),cd(r.return,l,d)}function od(r,l,d,b,E){var L=r.memoizedState;L===null?r.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:b,tail:d,tailMode:E}:(L.isBackwards=l,L.rendering=null,L.renderingStartTime=0,L.last=b,L.tail=d,L.tailMode=E)}function Jl(r,l,d){var b=l.pendingProps,E=b.revealOrder,L=b.tail;if(Si(r,l,b.children,d),b=dn.current,(b&2)!==0)b=b&1|2,l.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=l.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&yp(r,d,l);else if(r.tag===19)yp(r,d,l);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===l)break e;for(;r.sibling===null;){if(r.return===null||r.return===l)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}b&=1}switch(Fr(dn,b),E){case"forwards":for(d=l.child,E=null;d!==null;)r=d.alternate,r!==null&&Ca(r)===null&&(E=d),d=d.sibling;d=E,d===null?(E=l.child,l.child=null):(E=d.sibling,d.sibling=null),od(l,!1,E,d,L);break;case"backwards":for(d=null,E=l.child,l.child=null;E!==null;){if(r=E.alternate,r!==null&&Ca(r)===null){l.child=E;break}r=E.sibling,E.sibling=d,d=E,E=r}od(l,!0,d,null,L);break;case"together":od(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function il(r,l,d){if(r!==null&&(l.dependencies=r.dependencies),du|=l.lanes,(d&l.childLanes)===0)if(r!==null){if(hf(r,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(r!==null&&l.child!==r.child)throw Error(p(153));if(l.child!==null){for(r=l.child,d=hu(r,r.pendingProps),l.child=d,d.return=l;r.sibling!==null;)r=r.sibling,d=d.sibling=hu(r,r.pendingProps),d.return=l;d.sibling=null}return l.child}function Qu(r,l){return(r.lanes&l)!==0?!0:(r=r.dependencies,!!(r!==null&&ah(r)))}function ld(r,l,d){switch(l.tag){case 3:Kn(l,l.stateNode.containerInfo),tu(l,Bn,r.memoizedState.cache),Ko();break;case 27:case 5:Yn(l);break;case 4:Kn(l,l.stateNode.containerInfo);break;case 10:tu(l,l.type,l.memoizedProps.value);break;case 13:var b=l.memoizedState;if(b!==null)return b.dehydrated!==null?(vs(l),l.flags|=128,null):(d&l.child.childLanes)!==0?Wm(r,l,d):(vs(l),r=il(r,l,d),r!==null?r.sibling:null);vs(l);break;case 19:var E=(r.flags&128)!==0;if(b=(d&l.childLanes)!==0,b||(hf(r,l,d,!1),b=(d&l.childLanes)!==0),E){if(b)return Jl(r,l,d);l.flags|=128}if(E=l.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Fr(dn,dn.current),b)break;return null;case 22:case 23:return l.lanes=0,nh(r,l,d);case 24:tu(l,Bn,r.memoizedState.cache)}return il(r,l,d)}function cf(r,l,d){if(r!==null)if(r.memoizedProps!==l.pendingProps)Mr=!0;else{if(!Qu(r,d)&&(l.flags&128)===0)return Mr=!1,ld(r,l,d);Mr=(r.flags&131072)!==0}else Mr=!1,Br&&(l.flags&1048576)!==0&&$c(l,$u,l.index);switch(l.lanes=0,l.tag){case 16:e:{r=l.pendingProps;var b=l.elementType,E=b._init;if(b=E(b._payload),l.type=b,typeof b=="function")sc(b)?(r=ra(b,r),l.tag=1,l=of(null,l,b,r,d)):(l.tag=0,l=Ms(null,l,b,r,d));else{if(b!=null){if(E=b.$$typeof,E===G){l.tag=11,l=wo(null,l,b,r,d);break e}else if(E===X){l.tag=14,l=ad(null,l,b,r,d);break e}}throw l=Ke(b)||b,Error(p(306,l,""))}}return l;case 0:return Ms(r,l,l.type,l.pendingProps,d);case 1:return b=l.type,E=ra(b,l.pendingProps),of(r,l,b,E,d);case 3:e:{if(Kn(l,l.stateNode.containerInfo),r===null)throw Error(p(387));var L=l.pendingProps;E=l.memoizedState,b=E.element,_p(r,l),ec(l,L,null,d);var W=l.memoizedState;if(L=W.cache,tu(l,Bn,L),L!==E.cache&&hd(l,[Bn],d,!0),Ju(),L=W.element,E.isDehydrated)if(E={element:L,isDehydrated:!1,cache:W.cache},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){l=Ql(r,l,L,d);break e}else if(L!==b){b=xi(Error(p(424)),l),Yo(b),l=Ql(r,l,L,d);break e}else for(ti=ha(l.stateNode.containerInfo.firstChild),Di=l,Br=!0,ta=null,ma=!0,d=js(l,null,L,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ko(),L===b){l=il(r,l,d);break e}Si(r,l,L,d)}l=l.child}return l;case 26:return Li(r,l),r===null?(d=zd(l.type,null,l.pendingProps,null))?l.memoizedState=d:Br||(d=l.type,r=l.pendingProps,b=Cf(Dr.current).createElement(d),b[yt]=l,b[kt]=r,Hi(b,d,r),ut(b),l.stateNode=b):l.memoizedState=zd(l.type,r.memoizedProps,l.pendingProps,r.memoizedState),null;case 27:return Yn(l),r===null&&Br&&(b=l.stateNode=yl(l.type,l.pendingProps,Dr.current),Di=l,ma=!0,ti=ha(b.firstChild)),b=l.pendingProps.children,r!==null||Br?Si(r,l,b,d):l.child=Ta(l,null,b,d),Li(r,l),l.child;case 5:return r===null&&Br&&((E=b=ti)&&(b=m0(b,l.type,l.pendingProps,ma),b!==null?(l.stateNode=b,Di=l,ti=ha(b.firstChild),ma=!1,E=!0):E=!1),E||un(l)),Yn(l),E=l.type,L=l.pendingProps,W=r!==null?r.memoizedProps:null,b=L.children,em(E,L)?b=null:W!==null&&em(E,W)&&(l.flags|=32),l.memoizedState!==null&&(E=Kt(r,l,rf,null,null,d),ge._currentValue=E),Li(r,l),Si(r,l,b,d),l.child;case 6:return r===null&&Br&&((r=d=ti)&&(d=g0(d,l.pendingProps,ma),d!==null?(l.stateNode=d,Di=l,ti=null,r=!0):r=!1),r||un(l)),null;case 13:return Wm(r,l,d);case 4:return Kn(l,l.stateNode.containerInfo),b=l.pendingProps,r===null?l.child=Ta(l,null,b,d):Si(r,l,b,d),l.child;case 11:return wo(r,l,l.type,l.pendingProps,d);case 7:return Si(r,l,l.pendingProps,d),l.child;case 8:return Si(r,l,l.pendingProps.children,d),l.child;case 12:return Si(r,l,l.pendingProps.children,d),l.child;case 10:return b=l.pendingProps,tu(l,l.type,b.value),Si(r,l,b.children,d),l.child;case 9:return E=l.type._context,b=l.pendingProps.children,ru(l),E=qi(E),b=b(E),l.flags|=1,Si(r,l,b,d),l.child;case 14:return ad(r,l,l.type,l.pendingProps,d);case 15:return af(r,l,l.type,l.pendingProps,d);case 19:return Jl(r,l,d);case 22:return nh(r,l,d);case 24:return ru(l),b=qi(Bn),r===null?(E=Yc(),E===null&&(E=En,L=Qo(),E.pooledCache=L,L.refCount++,L!==null&&(E.pooledCacheLanes|=d),E=L),l.memoizedState={parent:b,cache:E},ff(l),tu(l,Bn,E)):((r.lanes&d)!==0&&(_p(r,l),ec(l,null,null,d),Ju()),E=r.memoizedState,L=l.memoizedState,E.parent!==b?(E={parent:b,cache:b},l.memoizedState=E,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=E),tu(l,Bn,b)):(b=L.cache,tu(l,Bn,b),b!==E.cache&&hd(l,[Bn],d,!0))),Si(r,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(p(156,l.tag))}var ud=br(null),eu=null,al=null;function tu(r,l,d){Fr(ud,l._currentValue),l._currentValue=d}function So(r){r._currentValue=ud.current,en(ud)}function cd(r,l,d){for(;r!==null;){var b=r.alternate;if((r.childLanes&l)!==l?(r.childLanes|=l,b!==null&&(b.childLanes|=l)):b!==null&&(b.childLanes&l)!==l&&(b.childLanes|=l),r===d)break;r=r.return}}function hd(r,l,d,b){var E=r.child;for(E!==null&&(E.return=r);E!==null;){var L=E.dependencies;if(L!==null){var W=E.child;L=L.firstContext;e:for(;L!==null;){var ue=L;L=E;for(var Me=0;Me<l.length;Me++)if(ue.context===l[Me]){L.lanes|=d,ue=L.alternate,ue!==null&&(ue.lanes|=d),cd(L.return,d,r),b||(W=null);break e}L=ue.next}}else if(E.tag===18){if(W=E.return,W===null)throw Error(p(341));W.lanes|=d,L=W.alternate,L!==null&&(L.lanes|=d),cd(W,d,r),W=null}else W=E.child;if(W!==null)W.return=E;else for(W=E;W!==null;){if(W===r){W=null;break}if(E=W.sibling,E!==null){E.return=W.return,W=E;break}W=W.return}E=W}}function hf(r,l,d,b){r=null;for(var E=l,L=!1;E!==null;){if(!L){if((E.flags&524288)!==0)L=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var W=E.alternate;if(W===null)throw Error(p(387));if(W=W.memoizedProps,W!==null){var ue=E.type;Qi(E.pendingProps.value,W.value)||(r!==null?r.push(ue):r=[ue])}}else if(E===pr.current){if(W=E.alternate,W===null)throw Error(p(387));W.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(r!==null?r.push(ge):r=[ge])}E=E.return}r!==null&&hd(l,r,d,b),l.flags|=262144}function ah(r){for(r=r.firstContext;r!==null;){if(!Qi(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ru(r){eu=r,al=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function qi(r){return Da(eu,r)}function nu(r,l){return eu===null&&ru(r),Da(r,l)}function Da(r,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},al===null){if(r===null)throw Error(p(308));al=l,r.dependencies={lanes:0,firstContext:l},r.flags|=524288}else al=al.next=l;return d}var sl=!1;function ff(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _p(r,l){r=r.updateQueue,l.updateQueue===r&&(l.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ol(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function iu(r,l,d){var b=r.updateQueue;if(b===null)return null;if(b=b.shared,(Qn&2)!==0){var E=b.pending;return E===null?l.next=l:(l.next=E.next,E.next=l),b.pending=l,l=Nl(r),td(r,null,d),l}return Zo(r,b,l,d),Nl(r)}function df(r,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194176)!==0)){var b=l.lanes;b&=r.pendingLanes,d|=b,l.lanes=d,Wt(r,d)}}function vp(r,l){var d=r.updateQueue,b=r.alternate;if(b!==null&&(b=b.updateQueue,d===b)){var E=null,L=null;if(d=d.firstBaseUpdate,d!==null){do{var W={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};L===null?E=L=W:L=L.next=W,d=d.next}while(d!==null);L===null?E=L=l:L=L.next=l}else E=L=l;d={baseState:b.baseState,firstBaseUpdate:E,lastBaseUpdate:L,shared:b.shared,callbacks:b.callbacks},r.updateQueue=d;return}r=d.lastBaseUpdate,r===null?d.firstBaseUpdate=l:r.next=l,d.lastBaseUpdate=l}var xp=!1;function Ju(){if(xp){var r=Jo;if(r!==null)throw r}}function ec(r,l,d,b){xp=!1;var E=r.updateQueue;sl=!1;var L=E.firstBaseUpdate,W=E.lastBaseUpdate,ue=E.shared.pending;if(ue!==null){E.shared.pending=null;var Me=ue,Ne=Me.next;Me.next=null,W===null?L=Ne:W.next=Ne,W=Me;var dt=r.alternate;dt!==null&&(dt=dt.updateQueue,ue=dt.lastBaseUpdate,ue!==W&&(ue===null?dt.firstBaseUpdate=Ne:ue.next=Ne,dt.lastBaseUpdate=Me))}if(L!==null){var Mt=E.baseState;W=0,dt=Ne=Me=null,ue=L;do{var et=ue.lane&-536870913,lt=et!==ue.lane;if(lt?(Jr&et)===et:(b&et)===et){et!==0&&et===Fs&&(xp=!0),dt!==null&&(dt=dt.next={lane:0,tag:ue.tag,payload:ue.payload,callback:null,next:null});e:{var Qt=r,xr=ue;et=l;var oi=d;switch(xr.tag){case 1:if(Qt=xr.payload,typeof Qt=="function"){Mt=Qt.call(oi,Mt,et);break e}Mt=Qt;break e;case 3:Qt.flags=Qt.flags&-65537|128;case 0:if(Qt=xr.payload,et=typeof Qt=="function"?Qt.call(oi,Mt,et):Qt,et==null)break e;Mt=ht({},Mt,et);break e;case 2:sl=!0}}et=ue.callback,et!==null&&(r.flags|=64,lt&&(r.flags|=8192),lt=E.callbacks,lt===null?E.callbacks=[et]:lt.push(et))}else lt={lane:et,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},dt===null?(Ne=dt=lt,Me=Mt):dt=dt.next=lt,W|=et;if(ue=ue.next,ue===null){if(ue=E.shared.pending,ue===null)break;lt=ue,ue=lt.next,lt.next=null,E.lastBaseUpdate=lt,E.shared.pending=null}}while(!0);dt===null&&(Me=Mt),E.baseState=Me,E.firstBaseUpdate=Ne,E.lastBaseUpdate=dt,L===null&&(E.shared.lanes=0),du|=W,r.lanes=W,r.memoizedState=Mt}}function bp(r,l){if(typeof r!="function")throw Error(p(191,r));r.call(l)}function au(r,l){var d=r.callbacks;if(d!==null)for(r.callbacks=null,r=0;r<d.length;r++)bp(d[r],l)}function ll(r,l){try{var d=l.updateQueue,b=d!==null?d.lastEffect:null;if(b!==null){var E=b.next;d=E;do{if((d.tag&r)===r){b=void 0;var L=d.create,W=d.inst;b=L(),W.destroy=b}d=d.next}while(d!==E)}}catch(ue){Yr(l,l.return,ue)}}function su(r,l,d){try{var b=l.updateQueue,E=b!==null?b.lastEffect:null;if(E!==null){var L=E.next;b=L;do{if((b.tag&r)===r){var W=b.inst,ue=W.destroy;if(ue!==void 0){W.destroy=void 0,E=l;var Me=d;try{ue()}catch(Ne){Yr(E,Me,Ne)}}}b=b.next}while(b!==L)}}catch(Ne){Yr(l,l.return,Ne)}}function Km(r){var l=r.updateQueue;if(l!==null){var d=r.stateNode;try{au(l,d)}catch(b){Yr(r,r.return,b)}}}function Ym(r,l,d){d.props=ra(r.type,r.memoizedProps),d.state=r.memoizedState;try{d.componentWillUnmount()}catch(b){Yr(r,l,b)}}function tc(r,l){try{var d=r.ref;if(d!==null){var b=r.stateNode;switch(r.tag){case 26:case 27:case 5:var E=b;break;default:E=b}typeof d=="function"?r.refCleanup=d(E):d.current=E}}catch(L){Yr(r,l,L)}}function rs(r,l){var d=r.ref,b=r.refCleanup;if(d!==null)if(typeof b=="function")try{b()}catch(E){Yr(r,l,E)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(E){Yr(r,l,E)}else d.current=null}function Xm(r){var l=r.type,d=r.memoizedProps,b=r.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&b.focus();break e;case"img":d.src?b.src=d.src:d.srcSet&&(b.srcset=d.srcSet)}}catch(E){Yr(r,r.return,E)}}function Qm(r,l,d){try{var b=r.stateNode;_u(b,r.type,d,l),b[kt]=l}catch(E){Yr(r,r.return,E)}}function fd(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27||r.tag===4}function wp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||fd(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==27&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function dd(r,l,d){var b=r.tag;if(b===5||b===6)r=r.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(r,l):d.insertBefore(r,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(r,d)):(l=d,l.appendChild(r)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Af));else if(b!==4&&b!==27&&(r=r.child,r!==null))for(dd(r,l,d),r=r.sibling;r!==null;)dd(r,l,d),r=r.sibling}function ou(r,l,d){var b=r.tag;if(b===5||b===6)r=r.stateNode,l?d.insertBefore(r,l):d.appendChild(r);else if(b!==4&&b!==27&&(r=r.child,r!==null))for(ou(r,l,d),r=r.sibling;r!==null;)ou(r,l,d),r=r.sibling}var ul=!1,Ar=!1,lu=!1,Sp=typeof WeakSet=="function"?WeakSet:Set,di=null,pf=!1;function mf(r,l){if(r=r.containerInfo,Ed=Xe,r=Jf(r),Wh(r)){if("selectionStart"in r)var d={start:r.selectionStart,end:r.selectionEnd};else e:{d=(d=r.ownerDocument)&&d.defaultView||window;var b=d.getSelection&&d.getSelection();if(b&&b.rangeCount!==0){d=b.anchorNode;var E=b.anchorOffset,L=b.focusNode;b=b.focusOffset;try{d.nodeType,L.nodeType}catch{d=null;break e}var W=0,ue=-1,Me=-1,Ne=0,dt=0,Mt=r,et=null;t:for(;;){for(var lt;Mt!==d||E!==0&&Mt.nodeType!==3||(ue=W+E),Mt!==L||b!==0&&Mt.nodeType!==3||(Me=W+b),Mt.nodeType===3&&(W+=Mt.nodeValue.length),(lt=Mt.firstChild)!==null;)et=Mt,Mt=lt;for(;;){if(Mt===r)break t;if(et===d&&++Ne===E&&(ue=W),et===L&&++dt===b&&(Me=W),(lt=Mt.nextSibling)!==null)break;Mt=et,et=Mt.parentNode}Mt=lt}d=ue===-1||Me===-1?null:{start:ue,end:Me}}else d=null}d=d||{start:0,end:0}}else d=null;for(Pd={focusedElem:r,selectionRange:d},Xe=!1,di=l;di!==null;)if(l=di,r=l.child,(l.subtreeFlags&1028)!==0&&r!==null)r.return=l,di=r;else for(;di!==null;){switch(l=di,L=l.alternate,r=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&L!==null){r=void 0,d=l,E=L.memoizedProps,L=L.memoizedState,b=d.stateNode;try{var Qt=ra(d.type,E,d.elementType===d.type);r=b.getSnapshotBeforeUpdate(Qt,L),b.__reactInternalSnapshotBeforeUpdate=r}catch(xr){Yr(d,d.return,xr)}}break;case 3:if((r&1024)!==0){if(r=l.stateNode.containerInfo,d=r.nodeType,d===9)nm(r);else if(d===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":nm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(p(163))}if(r=l.sibling,r!==null){r.return=l.return,di=r;break}di=l.return}return Qt=pf,pf=!1,Qt}function Tp(r,l,d){var b=d.flags;switch(d.tag){case 0:case 11:case 15:Gs(r,d),b&4&&ll(5,d);break;case 1:if(Gs(r,d),b&4)if(r=d.stateNode,l===null)try{r.componentDidMount()}catch(ue){Yr(d,d.return,ue)}else{var E=ra(d.type,l.memoizedProps);l=l.memoizedState;try{r.componentDidUpdate(E,l,r.__reactInternalSnapshotBeforeUpdate)}catch(ue){Yr(d,d.return,ue)}}b&64&&Km(d),b&512&&tc(d,d.return);break;case 3:if(Gs(r,d),b&64&&(b=d.updateQueue,b!==null)){if(r=null,d.child!==null)switch(d.child.tag){case 27:case 5:r=d.child.stateNode;break;case 1:r=d.child.stateNode}try{au(b,r)}catch(ue){Yr(d,d.return,ue)}}break;case 26:Gs(r,d),b&512&&tc(d,d.return);break;case 27:case 5:Gs(r,d),l===null&&b&4&&Xm(d),b&512&&tc(d,d.return);break;case 12:Gs(r,d);break;case 13:Gs(r,d),b&4&&rc(r,d);break;case 22:if(E=d.memoizedState!==null||ul,!E){l=l!==null&&l.memoizedState!==null||Ar;var L=ul,W=Ar;ul=E,(Ar=l)&&!W?cl(r,d,(d.subtreeFlags&8772)!==0):Gs(r,d),ul=L,Ar=W}b&512&&(d.memoizedProps.mode==="manual"?tc(d,d.return):rs(d,d.return));break;default:Gs(r,d)}}function Mp(r){var l=r.alternate;l!==null&&(r.alternate=null,Mp(l)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(l=r.stateNode,l!==null&&$a(l)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var qn=null,ya=!1;function La(r,l,d){for(d=d.child;d!==null;)gf(r,l,d),d=d.sibling}function gf(r,l,d){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(nn,d)}catch{}switch(d.tag){case 26:Ar||rs(d,l),La(r,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Ar||rs(d,l);var b=qn,E=ya;for(qn=d.stateNode,La(r,l,d),d=d.stateNode,l=d.attributes;l.length;)d.removeAttributeNode(l[0]);$a(d),qn=b,ya=E;break;case 5:Ar||rs(d,l);case 6:E=qn;var L=ya;if(qn=null,La(r,l,d),qn=E,ya=L,qn!==null)if(ya)try{r=qn,b=d.stateNode,r.nodeType===8?r.parentNode.removeChild(b):r.removeChild(b)}catch(W){Yr(d,l,W)}else try{qn.removeChild(d.stateNode)}catch(W){Yr(d,l,W)}break;case 18:qn!==null&&(ya?(l=qn,d=d.stateNode,l.nodeType===8?wh(l.parentNode,d):l.nodeType===1&&wh(l,d),Wn(l)):wh(qn,d.stateNode));break;case 4:b=qn,E=ya,qn=d.stateNode.containerInfo,ya=!0,La(r,l,d),qn=b,ya=E;break;case 0:case 11:case 14:case 15:Ar||su(2,d,l),Ar||su(4,d,l),La(r,l,d);break;case 1:Ar||(rs(d,l),b=d.stateNode,typeof b.componentWillUnmount=="function"&&Ym(d,l,b)),La(r,l,d);break;case 21:La(r,l,d);break;case 22:Ar||rs(d,l),Ar=(b=Ar)||d.memoizedState!==null,La(r,l,d),Ar=b;break;default:La(r,l,d)}}function rc(r,l){if(l.memoizedState===null&&(r=l.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Wn(r)}catch(d){Yr(l,l.return,d)}}function yf(r){switch(r.tag){case 13:case 19:var l=r.stateNode;return l===null&&(l=r.stateNode=new Sp),l;case 22:return r=r.stateNode,l=r._retryCache,l===null&&(l=r._retryCache=new Sp),l;default:throw Error(p(435,r.tag))}}function Ap(r,l){var d=yf(r);l.forEach(function(b){var E=f0.bind(null,r,b);d.has(b)||(d.add(b),b.then(E,E))})}function ns(r,l){var d=l.deletions;if(d!==null)for(var b=0;b<d.length;b++){var E=d[b],L=r,W=l,ue=W;e:for(;ue!==null;){switch(ue.tag){case 27:case 5:qn=ue.stateNode,ya=!1;break e;case 3:qn=ue.stateNode.containerInfo,ya=!0;break e;case 4:qn=ue.stateNode.containerInfo,ya=!0;break e}ue=ue.return}if(qn===null)throw Error(p(160));gf(L,W,E),qn=null,ya=!1,L=E.alternate,L!==null&&(L.return=null),E.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)Jm(l,r),l=l.sibling}var na=null;function Jm(r,l){var d=r.alternate,b=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:ns(l,r),is(r),b&4&&(su(3,r,r.return),ll(3,r),su(5,r,r.return));break;case 1:ns(l,r),is(r),b&512&&(Ar||d===null||rs(d,d.return)),b&64&&ul&&(r=r.updateQueue,r!==null&&(b=r.callbacks,b!==null&&(d=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=d===null?b:d.concat(b))));break;case 26:var E=na;if(ns(l,r),is(r),b&512&&(Ar||d===null||rs(d,d.return)),b&4){var L=d!==null?d.memoizedState:null;if(b=r.memoizedState,d===null)if(b===null)if(r.stateNode===null){e:{b=r.type,d=r.memoizedProps,E=E.ownerDocument||E;t:switch(b){case"title":L=E.getElementsByTagName("title")[0],(!L||L[yi]||L[yt]||L.namespaceURI==="http://www.w3.org/2000/svg"||L.hasAttribute("itemprop"))&&(L=E.createElement(b),E.head.insertBefore(L,E.querySelector("head > title"))),Hi(L,b,d),L[yt]=r,ut(L),b=L;break e;case"link":var W=w("link","href",E).get(b+(d.href||""));if(W){for(var ue=0;ue<W.length;ue++)if(L=W[ue],L.getAttribute("href")===(d.href==null?null:d.href)&&L.getAttribute("rel")===(d.rel==null?null:d.rel)&&L.getAttribute("title")===(d.title==null?null:d.title)&&L.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){W.splice(ue,1);break t}}L=E.createElement(b),Hi(L,b,d),E.head.appendChild(L);break;case"meta":if(W=w("meta","content",E).get(b+(d.content||""))){for(ue=0;ue<W.length;ue++)if(L=W[ue],L.getAttribute("content")===(d.content==null?null:""+d.content)&&L.getAttribute("name")===(d.name==null?null:d.name)&&L.getAttribute("property")===(d.property==null?null:d.property)&&L.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&L.getAttribute("charset")===(d.charSet==null?null:d.charSet)){W.splice(ue,1);break t}}L=E.createElement(b),Hi(L,b,d),E.head.appendChild(L);break;default:throw Error(p(468,b))}L[yt]=r,ut(L),b=L}r.stateNode=b}else T(E,r.type,r.stateNode);else r.stateNode=s(E,b,r.memoizedProps);else L!==b?(L===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):L.count--,b===null?T(E,r.type,r.stateNode):s(E,b,r.memoizedProps)):b===null&&r.stateNode!==null&&Qm(r,r.memoizedProps,d.memoizedProps)}break;case 27:if(b&4&&r.alternate===null){E=r.stateNode,L=r.memoizedProps;try{for(var Me=E.firstChild;Me;){var Ne=Me.nextSibling,dt=Me.nodeName;Me[yi]||dt==="HEAD"||dt==="BODY"||dt==="SCRIPT"||dt==="STYLE"||dt==="LINK"&&Me.rel.toLowerCase()==="stylesheet"||E.removeChild(Me),Me=Ne}for(var Mt=r.type,et=E.attributes;et.length;)E.removeAttributeNode(et[0]);Hi(E,Mt,L),E[yt]=r,E[kt]=L}catch(Qt){Yr(r,r.return,Qt)}}case 5:if(ns(l,r),is(r),b&512&&(Ar||d===null||rs(d,d.return)),r.flags&32){E=r.stateNode;try{cr(E,"")}catch(Qt){Yr(r,r.return,Qt)}}b&4&&r.stateNode!=null&&(E=r.memoizedProps,Qm(r,E,d!==null?d.memoizedProps:E)),b&1024&&(lu=!0);break;case 6:if(ns(l,r),is(r),b&4){if(r.stateNode===null)throw Error(p(162));b=r.memoizedProps,d=r.stateNode;try{d.nodeValue=b}catch(Qt){Yr(r,r.return,Qt)}}break;case 3:if(g=null,E=na,na=Pf(l.containerInfo),ns(l,r),na=E,is(r),b&4&&d!==null&&d.memoizedState.isDehydrated)try{Wn(l.containerInfo)}catch(Qt){Yr(r,r.return,Qt)}lu&&(lu=!1,sh(r));break;case 4:b=na,na=Pf(r.stateNode.containerInfo),ns(l,r),is(r),na=b;break;case 12:ns(l,r),is(r);break;case 13:ns(l,r),is(r),r.child.flags&8192&&r.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(vd=Ut()),b&4&&(b=r.updateQueue,b!==null&&(r.updateQueue=null,Ap(r,b)));break;case 22:if(b&512&&(Ar||d===null||rs(d,d.return)),Me=r.memoizedState!==null,Ne=d!==null&&d.memoizedState!==null,dt=ul,Mt=Ar,ul=dt||Me,Ar=Mt||Ne,ns(l,r),Ar=Mt,ul=dt,is(r),l=r.stateNode,l._current=r,l._visibility&=-3,l._visibility|=l._pendingVisibility&2,b&8192&&(l._visibility=Me?l._visibility&-2:l._visibility|1,Me&&(l=ul||Ar,d===null||Ne||l||nc(r)),r.memoizedProps===null||r.memoizedProps.mode!=="manual"))e:for(d=null,l=r;;){if(l.tag===5||l.tag===26||l.tag===27){if(d===null){Ne=d=l;try{if(E=Ne.stateNode,Me)L=E.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none";else{W=Ne.stateNode,ue=Ne.memoizedProps.style;var lt=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;W.style.display=lt==null||typeof lt=="boolean"?"":(""+lt).trim()}}catch(Qt){Yr(Ne,Ne.return,Qt)}}}else if(l.tag===6){if(d===null){Ne=l;try{Ne.stateNode.nodeValue=Me?"":Ne.memoizedProps}catch(Qt){Yr(Ne,Ne.return,Qt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===r)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break e;for(;l.sibling===null;){if(l.return===null||l.return===r)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}b&4&&(b=r.updateQueue,b!==null&&(d=b.retryQueue,d!==null&&(b.retryQueue=null,Ap(r,d))));break;case 19:ns(l,r),is(r),b&4&&(b=r.updateQueue,b!==null&&(r.updateQueue=null,Ap(r,b)));break;case 21:break;default:ns(l,r),is(r)}}function is(r){var l=r.flags;if(l&2){try{if(r.tag!==27){e:{for(var d=r.return;d!==null;){if(fd(d)){var b=d;break e}d=d.return}throw Error(p(160))}switch(b.tag){case 27:var E=b.stateNode,L=wp(r);ou(r,L,E);break;case 5:var W=b.stateNode;b.flags&32&&(cr(W,""),b.flags&=-33);var ue=wp(r);ou(r,ue,W);break;case 3:case 4:var Me=b.stateNode.containerInfo,Ne=wp(r);dd(r,Ne,Me);break;default:throw Error(p(161))}}}catch(dt){Yr(r,r.return,dt)}r.flags&=-3}l&4096&&(r.flags&=-4097)}function sh(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var l=r;sh(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),r=r.sibling}}function Gs(r,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Tp(r,l.alternate,l),l=l.sibling}function nc(r){for(r=r.child;r!==null;){var l=r;switch(l.tag){case 0:case 11:case 14:case 15:su(4,l,l.return),nc(l);break;case 1:rs(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&Ym(l,l.return,d),nc(l);break;case 26:case 27:case 5:rs(l,l.return),nc(l);break;case 22:rs(l,l.return),l.memoizedState===null&&nc(l);break;default:nc(l)}r=r.sibling}}function cl(r,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var b=l.alternate,E=r,L=l,W=L.flags;switch(L.tag){case 0:case 11:case 15:cl(E,L,d),ll(4,L);break;case 1:if(cl(E,L,d),b=L,E=b.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(Ne){Yr(b,b.return,Ne)}if(b=L,E=b.updateQueue,E!==null){var ue=b.stateNode;try{var Me=E.shared.hiddenCallbacks;if(Me!==null)for(E.shared.hiddenCallbacks=null,E=0;E<Me.length;E++)bp(Me[E],ue)}catch(Ne){Yr(b,b.return,Ne)}}d&&W&64&&Km(L),tc(L,L.return);break;case 26:case 27:case 5:cl(E,L,d),d&&b===null&&W&4&&Xm(L),tc(L,L.return);break;case 12:cl(E,L,d);break;case 13:cl(E,L,d),d&&W&4&&rc(E,L);break;case 22:L.memoizedState===null&&cl(E,L,d),tc(L,L.return);break;default:cl(E,L,d)}l=l.sibling}}function Cp(r,l){var d=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),r=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==d&&(r!=null&&r.refCount++,d!=null&&Qa(d))}function Ep(r,l){r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&Qa(r))}function uu(r,l,d,b){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)eg(r,l,d,b),l=l.sibling}function eg(r,l,d,b){var E=l.flags;switch(l.tag){case 0:case 11:case 15:uu(r,l,d,b),E&2048&&ll(9,l);break;case 3:uu(r,l,d,b),E&2048&&(r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&Qa(r)));break;case 12:if(E&2048){uu(r,l,d,b),r=l.stateNode;try{var L=l.memoizedProps,W=L.id,ue=L.onPostCommit;typeof ue=="function"&&ue(W,l.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(Me){Yr(l,l.return,Me)}}else uu(r,l,d,b);break;case 23:break;case 22:L=l.stateNode,l.memoizedState!==null?L._visibility&4?uu(r,l,d,b):ic(r,l):L._visibility&4?uu(r,l,d,b):(L._visibility|=4,oh(r,l,d,b,(l.subtreeFlags&10256)!==0)),E&2048&&Cp(l.alternate,l);break;case 24:uu(r,l,d,b),E&2048&&Ep(l.alternate,l);break;default:uu(r,l,d,b)}}function oh(r,l,d,b,E){for(E=E&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var L=r,W=l,ue=d,Me=b,Ne=W.flags;switch(W.tag){case 0:case 11:case 15:oh(L,W,ue,Me,E),ll(8,W);break;case 23:break;case 22:var dt=W.stateNode;W.memoizedState!==null?dt._visibility&4?oh(L,W,ue,Me,E):ic(L,W):(dt._visibility|=4,oh(L,W,ue,Me,E)),E&&Ne&2048&&Cp(W.alternate,W);break;case 24:oh(L,W,ue,Me,E),E&&Ne&2048&&Ep(W.alternate,W);break;default:oh(L,W,ue,Me,E)}l=l.sibling}}function ic(r,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=r,b=l,E=b.flags;switch(b.tag){case 22:ic(d,b),E&2048&&Cp(b.alternate,b);break;case 24:ic(d,b),E&2048&&Ep(b.alternate,b);break;default:ic(d,b)}l=l.sibling}}var lh=8192;function cu(r){if(r.subtreeFlags&lh)for(r=r.child;r!==null;)Pp(r),r=r.sibling}function Pp(r){switch(r.tag){case 26:cu(r),r.flags&lh&&r.memoizedState!==null&&V(na,r.memoizedState,r.memoizedProps);break;case 5:cu(r);break;case 3:case 4:var l=na;na=Pf(r.stateNode.containerInfo),cu(r),na=l;break;case 22:r.memoizedState===null&&(l=r.alternate,l!==null&&l.memoizedState!==null?(l=lh,lh=16777216,cu(r),lh=l):cu(r));break;default:cu(r)}}function pd(r){var l=r.alternate;if(l!==null&&(r=l.child,r!==null)){l.child=null;do l=r.sibling,r.sibling=null,r=l;while(r!==null)}}function uh(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var b=l[d];di=b,Ip(b,r)}pd(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Rp(r),r=r.sibling}function Rp(r){switch(r.tag){case 0:case 11:case 15:uh(r),r.flags&2048&&su(9,r,r.return);break;case 3:uh(r);break;case 12:uh(r);break;case 22:var l=r.stateNode;r.memoizedState!==null&&l._visibility&4&&(r.return===null||r.return.tag!==13)?(l._visibility&=-5,ac(r)):uh(r);break;default:uh(r)}}function ac(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var b=l[d];di=b,Ip(b,r)}pd(r)}for(r=r.child;r!==null;){switch(l=r,l.tag){case 0:case 11:case 15:su(8,l,l.return),ac(l);break;case 22:d=l.stateNode,d._visibility&4&&(d._visibility&=-5,ac(l));break;default:ac(l)}r=r.sibling}}function Ip(r,l){for(;di!==null;){var d=di;switch(d.tag){case 0:case 11:case 15:su(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var b=d.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:Qa(d.memoizedState.cache)}if(b=d.child,b!==null)b.return=d,di=b;else e:for(d=r;di!==null;){b=di;var E=b.sibling,L=b.return;if(Mp(b),b===d){di=null;break e}if(E!==null){E.return=L,di=E;break e}di=L}}}function tg(r,l,d,b){this.tag=r,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function as(r,l,d,b){return new tg(r,l,d,b)}function sc(r){return r=r.prototype,!(!r||!r.isReactComponent)}function hu(r,l){var d=r.alternate;return d===null?(d=as(r.tag,l,r.key,r.mode),d.elementType=r.elementType,d.type=r.type,d.stateNode=r.stateNode,d.alternate=r,r.alternate=d):(d.pendingProps=l,d.type=r.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=r.flags&31457280,d.childLanes=r.childLanes,d.lanes=r.lanes,d.child=r.child,d.memoizedProps=r.memoizedProps,d.memoizedState=r.memoizedState,d.updateQueue=r.updateQueue,l=r.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=r.sibling,d.index=r.index,d.ref=r.ref,d.refCleanup=r.refCleanup,d}function md(r,l){r.flags&=31457282;var d=r.alternate;return d===null?(r.childLanes=0,r.lanes=l,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=d.childLanes,r.lanes=d.lanes,r.child=d.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=d.memoizedProps,r.memoizedState=d.memoizedState,r.updateQueue=d.updateQueue,r.type=d.type,l=d.dependencies,r.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),r}function fu(r,l,d,b,E,L){var W=0;if(b=r,typeof r=="function")sc(r)&&(W=1);else if(typeof r=="string")W=A(r,d,ln.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case C:return hl(d.children,E,L,l);case R:W=8,E|=24;break;case O:return r=as(12,d,l,E|2),r.elementType=O,r.lanes=L,r;case te:return r=as(13,d,l,E),r.elementType=te,r.lanes=L,r;case K:return r=as(19,d,l,E),r.elementType=K,r.lanes=L,r;case pe:return rg(d,E,L,l);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case B:case F:W=10;break e;case z:W=9;break e;case G:W=11;break e;case X:W=14;break e;case ye:W=16,b=null;break e}W=29,d=Error(p(130,r===null?"null":typeof r,"")),b=null}return l=as(W,d,l,E),l.elementType=r,l.type=b,l.lanes=L,l}function hl(r,l,d,b){return r=as(7,r,b,l),r.lanes=d,r}function rg(r,l,d,b){r=as(22,r,b,l),r.elementType=pe,r.lanes=d;var E={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var L=E._current;if(L===null)throw Error(p(456));if((E._pendingVisibility&2)===0){var W=ho(L,2);W!==null&&(E._pendingVisibility|=2,ia(W,L,2))}},attach:function(){var L=E._current;if(L===null)throw Error(p(456));if((E._pendingVisibility&2)!==0){var W=ho(L,2);W!==null&&(E._pendingVisibility&=-3,ia(W,L,2))}}};return r.stateNode=E,r}function Dp(r,l,d){return r=as(6,r,null,l),r.lanes=d,r}function gd(r,l,d){return l=as(4,r.children!==null?r.children:[],r.key,l),l.lanes=d,l.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},l}function To(r){r.flags|=4}function ng(r,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!I(l)){if(l=Xn.current,l!==null&&((Jr&4194176)===Jr?Xa!==null:(Jr&62914560)!==Jr&&(Jr&536870912)===0||l!==Xa))throw Xo=Zu,Bs;r.flags|=8192}}function yd(r,l){l!==null&&(r.flags|=4),r.flags&16384&&(l=r.tag!==22?Pt():536870912,r.lanes|=l,ch|=l)}function fl(r,l){if(!Br)switch(r.tailMode){case"hidden":l=r.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?r.tail=null:d.sibling=null;break;case"collapsed":d=r.tail;for(var b=null;d!==null;)d.alternate!==null&&(b=d),d=d.sibling;b===null?l||r.tail===null?r.tail=null:r.tail.sibling=null:b.sibling=null}}function Gn(r){var l=r.alternate!==null&&r.alternate.child===r.child,d=0,b=0;if(l)for(var E=r.child;E!==null;)d|=E.lanes|E.childLanes,b|=E.subtreeFlags&31457280,b|=E.flags&31457280,E.return=r,E=E.sibling;else for(E=r.child;E!==null;)d|=E.lanes|E.childLanes,b|=E.subtreeFlags,b|=E.flags,E.return=r,E=E.sibling;return r.subtreeFlags|=b,r.childLanes=d,l}function s0(r,l,d){var b=l.pendingProps;switch(Vl(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gn(l),null;case 1:return Gn(l),null;case 3:return d=l.stateNode,b=null,r!==null&&(b=r.memoizedState.cache),l.memoizedState.cache!==b&&(l.flags|=2048),So(Bn),Un(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(r===null||r.child===null)&&(Wo(l)?To(l):r===null||r.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,ta!==null&&(Ao(ta),ta=null))),Gn(l),null;case 26:return d=l.memoizedState,r===null?(To(l),d!==null?(Gn(l),ng(l,d)):(Gn(l),l.flags&=-16777217)):d?d!==r.memoizedState?(To(l),Gn(l),ng(l,d)):(Gn(l),l.flags&=-16777217):(r.memoizedProps!==b&&To(l),Gn(l),l.flags&=-16777217),null;case 27:we(l),d=Dr.current;var E=l.type;if(r!==null&&l.stateNode!=null)r.memoizedProps!==b&&To(l);else{if(!b){if(l.stateNode===null)throw Error(p(166));return Gn(l),null}r=ln.current,Wo(l)?po(l):(r=yl(E,b,d),l.stateNode=r,To(l))}return Gn(l),null;case 5:if(we(l),d=l.type,r!==null&&l.stateNode!=null)r.memoizedProps!==b&&To(l);else{if(!b){if(l.stateNode===null)throw Error(p(166));return Gn(l),null}if(r=ln.current,Wo(l))po(l);else{switch(E=Cf(Dr.current),r){case 1:r=E.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:r=E.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":r=E.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":r=E.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":r=E.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof b.is=="string"?E.createElement("select",{is:b.is}):E.createElement("select"),b.multiple?r.multiple=!0:b.size&&(r.size=b.size);break;default:r=typeof b.is=="string"?E.createElement(d,{is:b.is}):E.createElement(d)}}r[yt]=l,r[kt]=b;e:for(E=l.child;E!==null;){if(E.tag===5||E.tag===6)r.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===l)break e;for(;E.sibling===null;){if(E.return===null||E.return===l)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}l.stateNode=r;e:switch(Hi(r,d,b),d){case"button":case"input":case"select":case"textarea":r=!!b.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&To(l)}}return Gn(l),l.flags&=-16777217,null;case 6:if(r&&l.stateNode!=null)r.memoizedProps!==b&&To(l);else{if(typeof b!="string"&&l.stateNode===null)throw Error(p(166));if(r=Dr.current,Wo(l)){if(r=l.stateNode,d=l.memoizedProps,b=null,E=Di,E!==null)switch(E.tag){case 27:case 5:b=E.memoizedProps}r[yt]=l,r=!!(r.nodeValue===d||b!==null&&b.suppressHydrationWarning===!0||Xp(r.nodeValue,d)),r||un(l)}else r=Cf(r).createTextNode(b),r[yt]=l,l.stateNode=r}return Gn(l),null;case 13:if(b=l.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(E=Wo(l),b!==null&&b.dehydrated!==null){if(r===null){if(!E)throw Error(p(318));if(E=l.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(p(317));E[yt]=l}else Ko(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Gn(l),E=!1}else ta!==null&&(Ao(ta),ta=null),E=!0;if(!E)return l.flags&256?(bs(l),l):(bs(l),null)}if(bs(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=b!==null,r=r!==null&&r.memoizedState!==null,d){b=l.child,E=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(E=b.alternate.memoizedState.cachePool.pool);var L=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(L=b.memoizedState.cachePool.pool),L!==E&&(b.flags|=2048)}return d!==r&&d&&(l.child.flags|=8192),yd(l,l.updateQueue),Gn(l),null;case 4:return Un(),r===null&&Ad(l.stateNode.containerInfo),Gn(l),null;case 10:return So(l.type),Gn(l),null;case 19:if(en(dn),E=l.memoizedState,E===null)return Gn(l),null;if(b=(l.flags&128)!==0,L=E.rendering,L===null)if(b)fl(E,!1);else{if(ri!==0||r!==null&&(r.flags&128)!==0)for(r=l.child;r!==null;){if(L=Ca(r),L!==null){for(l.flags|=128,fl(E,!1),r=L.updateQueue,l.updateQueue=r,yd(l,r),l.subtreeFlags=0,r=d,d=l.child;d!==null;)md(d,r),d=d.sibling;return Fr(dn,dn.current&1|2),l.child}r=r.sibling}E.tail!==null&&Ut()>Hn&&(l.flags|=128,b=!0,fl(E,!1),l.lanes=4194304)}else{if(!b)if(r=Ca(L),r!==null){if(l.flags|=128,b=!0,r=r.updateQueue,l.updateQueue=r,yd(l,r),fl(E,!0),E.tail===null&&E.tailMode==="hidden"&&!L.alternate&&!Br)return Gn(l),null}else 2*Ut()-E.renderingStartTime>Hn&&d!==536870912&&(l.flags|=128,b=!0,fl(E,!1),l.lanes=4194304);E.isBackwards?(L.sibling=l.child,l.child=L):(r=E.last,r!==null?r.sibling=L:l.child=L,E.last=L)}return E.tail!==null?(l=E.tail,E.rendering=l,E.tail=l.sibling,E.renderingStartTime=Ut(),l.sibling=null,r=dn.current,Fr(dn,b?r&1|2:r&1),l):(Gn(l),null);case 22:case 23:return bs(l),Aa(),b=l.memoizedState!==null,r!==null?r.memoizedState!==null!==b&&(l.flags|=8192):b&&(l.flags|=8192),b?(d&536870912)!==0&&(l.flags&128)===0&&(Gn(l),l.subtreeFlags&6&&(l.flags|=8192)):Gn(l),d=l.updateQueue,d!==null&&yd(l,d.retryQueue),d=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),b=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(b=l.memoizedState.cachePool.pool),b!==d&&(l.flags|=2048),r!==null&&en(ws),null;case 24:return d=null,r!==null&&(d=r.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),So(Bn),Gn(l),null;case 25:return null}throw Error(p(156,l.tag))}function o0(r,l){switch(Vl(l),l.tag){case 1:return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 3:return So(Bn),Un(),r=l.flags,(r&65536)!==0&&(r&128)===0?(l.flags=r&-65537|128,l):null;case 26:case 27:case 5:return we(l),null;case 13:if(bs(l),r=l.memoizedState,r!==null&&r.dehydrated!==null){if(l.alternate===null)throw Error(p(340));Ko()}return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 19:return en(dn),null;case 4:return Un(),null;case 10:return So(l.type),null;case 22:case 23:return bs(l),Aa(),r!==null&&en(ws),r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 24:return So(Bn),null;case 25:return null;default:return null}}function ig(r,l){switch(Vl(l),l.tag){case 3:So(Bn),Un();break;case 26:case 27:case 5:we(l);break;case 4:Un();break;case 13:bs(l);break;case 19:en(dn);break;case 10:So(l.type);break;case 22:case 23:bs(l),Aa(),r!==null&&en(ws);break;case 24:So(Bn)}}var l0={getCacheForType:function(r){var l=qi(Bn),d=l.data.get(r);return d===void 0&&(d=r(),l.data.set(r,d)),d}},u0=typeof WeakMap=="function"?WeakMap:Map,Qn=0,En=null,jr=null,Jr=0,Pn=0,za=null,dl=!1,pl=!1,Lp=!1,Mo=0,ri=0,du=0,oc=0,_d=0,As=0,ch=0,ml=null,Hs=null,_f=!1,vd=0,Hn=1/0,hh=null,pu=null,vf=!1,gl=null,lc=0,zp=0,kp=null,xf=0,Op=null;function ka(){if((Qn&2)!==0&&Jr!==0)return Jr&-Jr;if(Ye.T!==null){var r=Fs;return r!==0?r:Td()}return Ur()}function ca(){As===0&&(As=(Jr&536870912)===0||Br?ft():536870912);var r=Xn.current;return r!==null&&(r.flags|=32),As}function ia(r,l,d){(r===En&&Pn===2||r.cancelPendingCommit!==null)&&(dh(r,0),Oa(r,Jr,As,!1)),Ft(r,d),((Qn&2)===0||r!==En)&&(r===En&&((Qn&2)===0&&(oc|=d),ri===4&&Oa(r,Jr,As,!1)),Ws(r))}function Bp(r,l,d){if((Qn&6)!==0)throw Error(p(327));var b=!d&&(l&60)===0&&(l&r.expiredLanes)===0||qe(r,l),E=b?Up(r,l):xd(r,l,!0),L=b;do{if(E===0){pl&&!b&&Oa(r,l,0,!1);break}else if(E===6)Oa(r,l,0,!dl);else{if(d=r.current.alternate,L&&!wf(d)){E=xd(r,l,!1),L=!1;continue}if(E===2){if(L=l,r.errorRecoveryDisabledLanes&L)var W=0;else W=r.pendingLanes&-536870913,W=W!==0?W:W&536870912?536870912:0;if(W!==0){l=W;e:{var ue=r;E=ml;var Me=ue.current.memoizedState.isDehydrated;if(Me&&(dh(ue,W).flags|=256),W=xd(ue,W,!1),W!==2){if(Lp&&!Me){ue.errorRecoveryDisabledLanes|=L,oc|=L,E=4;break e}L=Hs,Hs=E,L!==null&&Ao(L)}E=W}if(L=!1,E!==2)continue}}if(E===1){dh(r,0),Oa(r,l,0,!0);break}e:{switch(b=r,E){case 0:case 1:throw Error(p(345));case 4:if((l&4194176)===l){Oa(b,l,As,!dl);break e}break;case 2:Hs=null;break;case 3:case 5:break;default:throw Error(p(329))}if(b.finishedWork=d,b.finishedLanes=l,(l&62914560)===l&&(L=vd+300-Ut(),10<L)){if(Oa(b,l,As,!dl),Ue(b,0)!==0)break e;b.timeoutHandle=tm(bf.bind(null,b,d,Hs,hh,_f,l,As,oc,ch,dl,2,-0,0),L);break e}bf(b,d,Hs,hh,_f,l,As,oc,ch,dl,0,-0,0)}}break}while(!0);Ws(r)}function Ao(r){Hs===null?Hs=r:Hs.push.apply(Hs,r)}function bf(r,l,d,b,E,L,W,ue,Me,Ne,dt,Mt,et){var lt=l.subtreeFlags;if((lt&8192||(lt&16785408)===16785408)&&(k={stylesheets:null,count:0,unsuspend:N},Pp(l),l=q(),l!==null)){r.cancelPendingCommit=l(ug.bind(null,r,d,b,E,W,ue,Me,1,Mt,et)),Oa(r,L,W,!Ne);return}ug(r,d,b,E,W,ue,Me,dt,Mt,et)}function wf(r){for(var l=r;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var b=0;b<d.length;b++){var E=d[b],L=E.getSnapshot;E=E.value;try{if(!Qi(L(),E))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Oa(r,l,d,b){l&=~_d,l&=~oc,r.suspendedLanes|=l,r.pingedLanes&=~l,b&&(r.warmLanes|=l),b=r.expirationTimes;for(var E=l;0<E;){var L=31-ae(E),W=1<<L;b[L]=-1,E&=~W}d!==0&&Je(r,d,l)}function uc(){return(Qn&6)===0?(hc(0),!1):!0}function fh(){if(jr!==null){if(Pn===0)var r=jr.return;else r=jr,al=eu=null,Ea(r),Vi=null,Zl=0,r=jr;for(;r!==null;)ig(r.alternate,r),r=r.return;jr=null}}function dh(r,l){r.finishedWork=null,r.finishedLanes=0;var d=r.timeoutHandle;d!==-1&&(r.timeoutHandle=-1,Id(d)),d=r.cancelPendingCommit,d!==null&&(r.cancelPendingCommit=null,d()),fh(),En=r,jr=d=hu(r.current,null),Jr=l,Pn=0,za=null,dl=!1,pl=qe(r,l),Lp=!1,ch=As=_d=oc=du=ri=0,Hs=ml=null,_f=!1,(l&8)!==0&&(l|=l&32);var b=r.entangledLanes;if(b!==0)for(r=r.entanglements,b&=l;0<b;){var E=31-ae(b),L=1<<E;l|=r[E],b&=~L}return Mo=l,Uc(),d}function ag(r,l){Rr=null,Ye.H=Ir,l===Ya?(l=Gc(),Pn=3):l===Bs?(l=Gc(),Pn=4):Pn=l===jn?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,za=l,jr===null&&(ri=1,Zi(r,xi(l,r.current)))}function jp(){var r=Ye.H;return Ye.H=Ir,r===null?Ir:r}function Np(){var r=Ye.A;return Ye.A=l0,r}function Fp(){ri=4,dl||(Jr&4194176)!==Jr&&Xn.current!==null||(pl=!0),(du&134217727)===0&&(oc&134217727)===0||En===null||Oa(En,Jr,As,!1)}function xd(r,l,d){var b=Qn;Qn|=2;var E=jp(),L=Np();(En!==r||Jr!==l)&&(hh=null,dh(r,l)),l=!1;var W=ri;e:do try{if(Pn!==0&&jr!==null){var ue=jr,Me=za;switch(Pn){case 8:fh(),W=6;break e;case 3:case 2:case 6:Xn.current===null&&(l=!0);var Ne=Pn;if(Pn=0,za=null,ph(r,ue,Me,Ne),d&&pl){W=0;break e}break;default:Ne=Pn,Pn=0,za=null,ph(r,ue,Me,Ne)}}sg(),W=ri;break}catch(dt){ag(r,dt)}while(!0);return l&&r.shellSuspendCounter++,al=eu=null,Qn=b,Ye.H=E,Ye.A=L,jr===null&&(En=null,Jr=0,Uc()),W}function sg(){for(;jr!==null;)og(jr)}function Up(r,l){var d=Qn;Qn|=2;var b=jp(),E=Np();En!==r||Jr!==l?(hh=null,Hn=Ut()+500,dh(r,l)):pl=qe(r,l);e:do try{if(Pn!==0&&jr!==null){l=jr;var L=za;t:switch(Pn){case 1:Pn=0,za=null,ph(r,l,L,1);break;case 2:if(qc(L)){Pn=0,za=null,$p(l);break}l=function(){Pn===2&&En===r&&(Pn=7),Ws(r)},L.then(l,l);break e;case 3:Pn=7;break e;case 4:Pn=5;break e;case 7:qc(L)?(Pn=0,za=null,$p(l)):(Pn=0,za=null,ph(r,l,L,7));break;case 5:var W=null;switch(jr.tag){case 26:W=jr.memoizedState;case 5:case 27:var ue=jr;if(!W||I(W)){Pn=0,za=null;var Me=ue.sibling;if(Me!==null)jr=Me;else{var Ne=ue.return;Ne!==null?(jr=Ne,bd(Ne)):jr=null}break t}}Pn=0,za=null,ph(r,l,L,5);break;case 6:Pn=0,za=null,ph(r,l,L,6);break;case 8:fh(),ri=6;break e;default:throw Error(p(462))}}Vp();break}catch(dt){ag(r,dt)}while(!0);return al=eu=null,Ye.H=b,Ye.A=E,Qn=d,jr!==null?0:(En=null,Jr=0,Uc(),ri)}function Vp(){for(;jr!==null&&!xt();)og(jr)}function og(r){var l=cf(r.alternate,r,Mo);r.memoizedProps=r.pendingProps,l===null?bd(r):jr=l}function $p(r){var l=r,d=l.alternate;switch(l.tag){case 15:case 0:l=ih(d,l,l.pendingProps,l.type,void 0,Jr);break;case 11:l=ih(d,l,l.pendingProps,l.type.render,l.ref,Jr);break;case 5:Ea(l);default:ig(d,l),l=jr=md(l,Mo),l=cf(d,l,Mo)}r.memoizedProps=r.pendingProps,l===null?bd(r):jr=l}function ph(r,l,d,b){al=eu=null,Ea(l),Vi=null,Zl=0;var E=l.return;try{if(xn(r,E,l,d,Jr)){ri=1,Zi(r,xi(d,r.current)),jr=null;return}}catch(L){if(E!==null)throw jr=E,L;ri=1,Zi(r,xi(d,r.current)),jr=null;return}l.flags&32768?(Br||b===1?r=!0:pl||(Jr&536870912)!==0?r=!1:(dl=r=!0,(b===2||b===3||b===6)&&(b=Xn.current,b!==null&&b.tag===13&&(b.flags|=16384))),lg(l,r)):bd(l)}function bd(r){var l=r;do{if((l.flags&32768)!==0){lg(l,dl);return}r=l.return;var d=s0(l.alternate,l,Mo);if(d!==null){jr=d;return}if(l=l.sibling,l!==null){jr=l;return}jr=l=r}while(l!==null);ri===0&&(ri=5)}function lg(r,l){do{var d=o0(r.alternate,r);if(d!==null){d.flags&=32767,jr=d;return}if(d=r.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(r=r.sibling,r!==null)){jr=r;return}jr=r=d}while(r!==null);ri=6,jr=null}function ug(r,l,d,b,E,L,W,ue,Me,Ne){var dt=Ye.T,Mt=zt.p;try{zt.p=2,Ye.T=null,c0(r,l,d,b,Mt,E,L,W,ue,Me,Ne)}finally{Ye.T=dt,zt.p=Mt}}function c0(r,l,d,b,E,L,W,ue){do cc();while(gl!==null);if((Qn&6)!==0)throw Error(p(327));var Me=r.finishedWork;if(b=r.finishedLanes,Me===null)return null;if(r.finishedWork=null,r.finishedLanes=0,Me===r.current)throw Error(p(177));r.callbackNode=null,r.callbackPriority=0,r.cancelPendingCommit=null;var Ne=Me.lanes|Me.childLanes;if(Ne|=jl,lr(r,b,Ne,L,W,ue),r===En&&(jr=En=null,Jr=0),(Me.subtreeFlags&10256)===0&&(Me.flags&10256)===0||vf||(vf=!0,zp=Ne,kp=d,Sd(Rn,function(){return cc(),null})),d=(Me.flags&15990)!==0,(Me.subtreeFlags&15990)!==0||d?(d=Ye.T,Ye.T=null,L=zt.p,zt.p=2,W=Qn,Qn|=4,mf(r,Me),Jm(Me,r),ed(Pd,r.containerInfo),Xe=!!Ed,Pd=Ed=null,r.current=Me,Tp(r,Me.alternate,Me),Et(),Qn=W,zt.p=L,Ye.T=d):r.current=Me,vf?(vf=!1,gl=r,lc=b):Zp(r,Ne),Ne=r.pendingLanes,Ne===0&&(pu=null),je(Me.stateNode),Ws(r),l!==null)for(E=r.onRecoverableError,Me=0;Me<l.length;Me++)Ne=l[Me],E(Ne.value,{componentStack:Ne.stack});return(lc&3)!==0&&cc(),Ne=r.pendingLanes,(b&4194218)!==0&&(Ne&42)!==0?r===Op?xf++:(xf=0,Op=r):xf=0,hc(0),null}function Zp(r,l){(r.pooledCacheLanes&=l)===0&&(l=r.pooledCache,l!=null&&(r.pooledCache=null,Qa(l)))}function cc(){if(gl!==null){var r=gl,l=zp;zp=0;var d=vr(lc),b=Ye.T,E=zt.p;try{if(zt.p=32>d?32:d,Ye.T=null,gl===null)var L=!1;else{d=kp,kp=null;var W=gl,ue=lc;if(gl=null,lc=0,(Qn&6)!==0)throw Error(p(331));var Me=Qn;if(Qn|=4,Rp(W.current),eg(W,W.current,ue,d),Qn=Me,hc(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(nn,W)}catch{}L=!0}return L}finally{zt.p=E,Ye.T=b,Zp(r,l)}}return!1}function mh(r,l,d){l=xi(d,l),l=ts(r.stateNode,l,2),r=iu(r,l,2),r!==null&&(Ft(r,2),Ws(r))}function Yr(r,l,d){if(r.tag===3)mh(r,r,d);else for(;l!==null;){if(l.tag===3){mh(l,r,d);break}else if(l.tag===1){var b=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(pu===null||!pu.has(b))){r=xi(d,r),d=Ts(2),b=iu(l,d,2),b!==null&&(Cn(d,b,l,r),Ft(b,2),Ws(b));break}}l=l.return}}function Co(r,l,d){var b=r.pingCache;if(b===null){b=r.pingCache=new u0;var E=new Set;b.set(l,E)}else E=b.get(l),E===void 0&&(E=new Set,b.set(l,E));E.has(d)||(Lp=!0,E.add(d),r=cg.bind(null,r,l,d),l.then(r,r))}function cg(r,l,d){var b=r.pingCache;b!==null&&b.delete(l),r.pingedLanes|=r.suspendedLanes&d,r.warmLanes&=~d,En===r&&(Jr&d)===d&&(ri===4||ri===3&&(Jr&62914560)===Jr&&300>Ut()-vd?(Qn&2)===0&&dh(r,0):_d|=d,ch===Jr&&(ch=0)),Ws(r)}function wd(r,l){l===0&&(l=Pt()),r=ho(r,l),r!==null&&(Ft(r,l),Ws(r))}function h0(r){var l=r.memoizedState,d=0;l!==null&&(d=l.retryLane),wd(r,d)}function f0(r,l){var d=0;switch(r.tag){case 13:var b=r.stateNode,E=r.memoizedState;E!==null&&(d=E.retryLane);break;case 19:b=r.stateNode;break;case 22:b=r.stateNode._retryCache;break;default:throw Error(p(314))}b!==null&&b.delete(l),wd(r,d)}function Sd(r,l){return We(r,l)}var gh=null,yh=null,Sf=!1,_h=!1,mu=!1,gu=0;function Ws(r){r!==yh&&r.next===null&&(yh===null?gh=yh=r:yh=yh.next=r),_h=!0,Sf||(Sf=!0,d0(hg))}function hc(r,l){if(!mu&&_h){mu=!0;do for(var d=!1,b=gh;b!==null;){if(r!==0){var E=b.pendingLanes;if(E===0)var L=0;else{var W=b.suspendedLanes,ue=b.pingedLanes;L=(1<<31-ae(42|r)+1)-1,L&=E&~(W&~ue),L=L&201326677?L&201326677|1:L?L|2:0}L!==0&&(d=!0,fg(b,L))}else L=Jr,L=Ue(b,b===En?L:0),(L&3)===0||qe(b,L)||(d=!0,fg(b,L));b=b.next}while(d);mu=!1}}function hg(){_h=Sf=!1;var r=0;gu!==0&&(Ef()&&(r=gu),gu=0);for(var l=Ut(),d=null,b=gh;b!==null;){var E=b.next,L=Tf(b,l);L===0?(b.next=null,d===null?gh=E:d.next=E,E===null&&(yh=d)):(d=b,(r!==0||(L&3)!==0)&&(_h=!0)),b=E}hc(r)}function Tf(r,l){for(var d=r.suspendedLanes,b=r.pingedLanes,E=r.expirationTimes,L=r.pendingLanes&-62914561;0<L;){var W=31-ae(L),ue=1<<W,Me=E[W];Me===-1?((ue&d)===0||(ue&b)!==0)&&(E[W]=Fe(ue,l)):Me<=l&&(r.expiredLanes|=ue),L&=~ue}if(l=En,d=Jr,d=Ue(r,r===l?d:0),b=r.callbackNode,d===0||r===l&&Pn===2||r.cancelPendingCommit!==null)return b!==null&&b!==null&&vt(b),r.callbackNode=null,r.callbackPriority=0;if((d&3)===0||qe(r,d)){if(l=d&-d,l===r.callbackPriority)return l;switch(b!==null&&vt(b),vr(d)){case 2:case 8:d=Zr;break;case 32:d=Rn;break;case 268435456:d=zn;break;default:d=Rn}return b=qp.bind(null,r),d=We(d,b),r.callbackPriority=l,r.callbackNode=d,l}return b!==null&&b!==null&&vt(b),r.callbackPriority=2,r.callbackNode=null,2}function qp(r,l){var d=r.callbackNode;if(cc()&&r.callbackNode!==d)return null;var b=Jr;return b=Ue(r,r===En?b:0),b===0?null:(Bp(r,b,l),Tf(r,Ut()),r.callbackNode!=null&&r.callbackNode===d?qp.bind(null,r):null)}function fg(r,l){if(cc())return null;Bp(r,l,!0)}function d0(r){Dd(function(){(Qn&6)!==0?We(_r,r):r()})}function Td(){return gu===0&&(gu=ft()),gu}function dg(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:no(""+r)}function pg(r,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,r.id&&d.setAttribute("form",r.id),l.parentNode.insertBefore(d,l),r=new FormData(r),d.parentNode.removeChild(d),r}function p0(r,l,d,b,E){if(l==="submit"&&d&&d.stateNode===E){var L=dg((E[kt]||null).action),W=b.submitter;W&&(l=(l=W[kt]||null)?dg(l.formAction):W.getAttribute("formAction"),l!==null&&(L=l,W=null));var ue=new Ls("action","action",null,b,E);r.push({event:ue,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(gu!==0){var Me=W?pg(E,W):new FormData(E);He(d,{pending:!0,data:Me,method:E.method,action:L},null,Me)}}else typeof L=="function"&&(ue.preventDefault(),Me=W?pg(E,W):new FormData(E),He(d,{pending:!0,data:Me,method:E.method,action:L},L,Me))},currentTarget:E}]})}}for(var Gp=0;Gp<$o.length;Gp++){var Hp=$o[Gp],Wp=Hp.toLowerCase(),yu=Hp[0].toUpperCase()+Hp.slice(1);Sa(Wp,"on"+yu)}Sa(jc,"onAnimationEnd"),Sa(co,"onAnimationIteration"),Sa(Uu,"onAnimationStart"),Sa("dblclick","onDoubleClick"),Sa("focusin","onFocus"),Sa("focusout","onBlur"),Sa(Nc,"onTransitionRun"),Sa(Vu,"onTransitionStart"),Sa(Fc,"onTransitionCancel"),Sa(Yh,"onTransitionEnd"),kn("onMouseEnter",["mouseout","mouseover"]),kn("onMouseLeave",["mouseout","mouseover"]),kn("onPointerEnter",["pointerout","pointerover"]),kn("onPointerLeave",["pointerout","pointerover"]),wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wr("onBeforeInput",["compositionend","keypress","textInput","paste"]),wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vh));function Kp(r,l){l=(l&4)!==0;for(var d=0;d<r.length;d++){var b=r[d],E=b.event;b=b.listeners;e:{var L=void 0;if(l)for(var W=b.length-1;0<=W;W--){var ue=b[W],Me=ue.instance,Ne=ue.currentTarget;if(ue=ue.listener,Me!==L&&E.isPropagationStopped())break e;L=ue,E.currentTarget=Ne;try{L(E)}catch(dt){Ia(dt)}E.currentTarget=null,L=Me}else for(W=0;W<b.length;W++){if(ue=b[W],Me=ue.instance,Ne=ue.currentTarget,ue=ue.listener,Me!==L&&E.isPropagationStopped())break e;L=ue,E.currentTarget=Ne;try{L(E)}catch(dt){Ia(dt)}E.currentTarget=null,L=Me}}}}function Xr(r,l){var d=l[$n];d===void 0&&(d=l[$n]=new Set);var b=r+"__bubble";d.has(b)||(bh(l,r,2,!1),d.add(b))}function Md(r,l,d){var b=0;l&&(b|=4),bh(d,r,b,l)}var xh="_reactListening"+Math.random().toString(36).slice(2);function Ad(r){if(!r[xh]){r[xh]=!0,Js.forEach(function(d){d!=="selectionchange"&&(mg.has(d)||Md(d,!1,r),Md(d,!0,r))});var l=r.nodeType===9?r:r.ownerDocument;l===null||l[xh]||(l[xh]=!0,Md("selectionchange",!1,l))}}function bh(r,l,d,b){switch(Yt(l)){case 2:var E=nt;break;case 8:E=bt;break;default:E=gt}d=E.bind(null,l,d,r),E=void 0,!Bo||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(E=!0),b?E!==void 0?r.addEventListener(l,d,{capture:!0,passive:E}):r.addEventListener(l,d,!0):E!==void 0?r.addEventListener(l,d,{passive:E}):r.addEventListener(l,d,!1)}function Cd(r,l,d,b,E){var L=b;if((l&1)===0&&(l&2)===0&&b!==null)e:for(;;){if(b===null)return;var W=b.tag;if(W===3||W===4){var ue=b.stateNode.containerInfo;if(ue===E||ue.nodeType===8&&ue.parentNode===E)break;if(W===4)for(W=b.return;W!==null;){var Me=W.tag;if((Me===3||Me===4)&&(Me=W.stateNode.containerInfo,Me===E||Me.nodeType===8&&Me.parentNode===E))return;W=W.return}for(;ue!==null;){if(W=Zn(ue),W===null)return;if(Me=W.tag,Me===5||Me===6||Me===26||Me===27){b=L=W;continue e}ue=ue.parentNode}}b=b.return}qa(function(){var Ne=L,dt=Xi(d),Mt=[];e:{var et=Vo.get(r);if(et!==void 0){var lt=Ls,Qt=r;switch(r){case"keypress":if(hr(d)===0)break e;case"keydown":case"keyup":lt=Ru;break;case"focusin":Qt="focus",lt=Ui;break;case"focusout":Qt="blur",lt=Ui;break;case"beforeblur":case"afterblur":lt=Ui;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=Eu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=Fi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=Oh;break;case jc:case co:case Uu:lt=fn;break;case Yh:lt=dp;break;case"scroll":case"scrollend":lt=Ac;break;case"wheel":lt=so;break;case"copy":case"cut":case"paste":lt=Ec;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=Iu;break;case"toggle":case"beforetoggle":lt=Hf}var xr=(l&4)!==0,oi=!xr&&(r==="scroll"||r==="scrollend"),Ze=xr?et!==null?et+"Capture":null:et;xr=[];for(var Be=Ne,Qe;Be!==null;){var _t=Be;if(Qe=_t.stateNode,_t=_t.tag,_t!==5&&_t!==26&&_t!==27||Qe===null||Ze===null||(_t=ba(Be,Ze),_t!=null&&xr.push(fc(Be,_t,Qe))),oi)break;Be=Be.return}0<xr.length&&(et=new lt(et,Qt,null,d,dt),Mt.push({event:et,listeners:xr}))}}if((l&7)===0){e:{if(et=r==="mouseover"||r==="pointerover",lt=r==="mouseout"||r==="pointerout",et&&d!==ui&&(Qt=d.relatedTarget||d.fromElement)&&(Zn(Qt)||Qt[Hr]))break e;if((lt||et)&&(et=dt.window===dt?dt:(et=dt.ownerDocument)?et.defaultView||et.parentWindow:window,lt?(Qt=d.relatedTarget||d.toElement,lt=Ne,Qt=Qt?Zn(Qt):null,Qt!==null&&(oi=Rt(Qt),xr=Qt.tag,Qt!==oi||xr!==5&&xr!==27&&xr!==6)&&(Qt=null)):(lt=null,Qt=Ne),lt!==Qt)){if(xr=Eu,_t="onMouseLeave",Ze="onMouseEnter",Be="mouse",(r==="pointerout"||r==="pointerover")&&(xr=Iu,_t="onPointerLeave",Ze="onPointerEnter",Be="pointer"),oi=lt==null?et:wn(lt),Qe=Qt==null?et:wn(Qt),et=new xr(_t,Be+"leave",lt,d,dt),et.target=oi,et.relatedTarget=Qe,_t=null,Zn(dt)===Ne&&(xr=new xr(Ze,Be+"enter",Qt,d,dt),xr.target=Qe,xr.relatedTarget=oi,_t=xr),oi=_t,lt&&Qt)t:{for(xr=lt,Ze=Qt,Be=0,Qe=xr;Qe;Qe=Gi(Qe))Be++;for(Qe=0,_t=Ze;_t;_t=Gi(_t))Qe++;for(;0<Be-Qe;)xr=Gi(xr),Be--;for(;0<Qe-Be;)Ze=Gi(Ze),Qe--;for(;Be--;){if(xr===Ze||Ze!==null&&xr===Ze.alternate)break t;xr=Gi(xr),Ze=Gi(Ze)}xr=null}else xr=null;lt!==null&&dc(Mt,et,lt,xr,!1),Qt!==null&&oi!==null&&dc(Mt,oi,Qt,xr,!0)}}e:{if(et=Ne?wn(Ne):window,lt=et.nodeName&&et.nodeName.toLowerCase(),lt==="select"||lt==="input"&&et.type==="file")var Gt=$h;else if(Vh(et))if(Zh)Gt=Hh;else{Gt=kc;var $r=Os}else lt=et.nodeName,!lt||lt.toLowerCase()!=="input"||et.type!=="checkbox"&&et.type!=="radio"?Ne&&Bi(Ne.elementType)&&(Gt=$h):Gt=Gh;if(Gt&&(Gt=Gt(r,Ne))){ku(Mt,Gt,d,dt);break e}$r&&$r(r,et,Ne),r==="focusout"&&Ne&&et.type==="number"&&Ne.memoizedProps.value!=null&&Mc(et,"number",et.value)}switch($r=Ne?wn(Ne):window,r){case"focusin":(Vh($r)||$r.contentEditable==="true")&&(Uo=$r,Ol=Ne,lo=null);break;case"focusout":lo=Ol=Uo=null;break;case"mousedown":Bl=!0;break;case"contextmenu":case"mouseup":case"dragend":Bl=!1,Bc(Mt,d,dt);break;case"selectionchange":if(mp)break;case"keydown":case"keyup":Bc(Mt,d,dt)}var rr;if(jh)e:{switch(r){case"compositionstart":var Jt="onCompositionStart";break e;case"compositionend":Jt="onCompositionEnd";break e;case"compositionupdate":Jt="onCompositionUpdate";break e}Jt=void 0}else oo?Ic(r,d)&&(Jt="onCompositionEnd"):r==="keydown"&&d.keyCode===229&&(Jt="onCompositionStart");Jt&&(Nh&&d.locale!=="ko"&&(oo||Jt!=="onCompositionStart"?Jt==="onCompositionEnd"&&oo&&(rr=Vr()):(wa=dt,Wr="value"in wa?wa.value:wa.textContent,oo=!0)),$r=Mf(Ne,Jt),0<$r.length&&(Jt=new No(Jt,r,null,d,dt),Mt.push({event:Jt,listeners:$r}),rr?Jt.data=rr:(rr=Dc(d),rr!==null&&(Jt.data=rr)))),(rr=pp?Uh(r,d):Kf(r,d))&&(Jt=Mf(Ne,"onBeforeInput"),0<Jt.length&&($r=new No("onBeforeInput","beforeinput",null,d,dt),Mt.push({event:$r,listeners:Jt}),$r.data=rr)),p0(Mt,r,Ne,d,dt)}Kp(Mt,l)})}function fc(r,l,d){return{instance:r,listener:l,currentTarget:d}}function Mf(r,l){for(var d=l+"Capture",b=[];r!==null;){var E=r,L=E.stateNode;E=E.tag,E!==5&&E!==26&&E!==27||L===null||(E=ba(r,d),E!=null&&b.unshift(fc(r,E,L)),E=ba(r,l),E!=null&&b.push(fc(r,E,L))),r=r.return}return b}function Gi(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function dc(r,l,d,b,E){for(var L=l._reactName,W=[];d!==null&&d!==b;){var ue=d,Me=ue.alternate,Ne=ue.stateNode;if(ue=ue.tag,Me!==null&&Me===b)break;ue!==5&&ue!==26&&ue!==27||Ne===null||(Me=Ne,E?(Ne=ba(d,L),Ne!=null&&W.unshift(fc(d,Ne,Me))):E||(Ne=ba(d,L),Ne!=null&&W.push(fc(d,Ne,Me)))),d=d.return}W.length!==0&&r.push({event:l,listeners:W})}var gg=/\r\n?/g,yg=/\u0000|\uFFFD/g;function Yp(r){return(typeof r=="string"?r:""+r).replace(gg,`
`).replace(yg,"")}function Xp(r,l){return l=Yp(l),Yp(r)===l}function Af(){}function gn(r,l,d,b,E,L){switch(d){case"children":typeof b=="string"?l==="body"||l==="textarea"&&b===""||cr(r,b):(typeof b=="number"||typeof b=="bigint")&&l!=="body"&&cr(r,""+b);break;case"className":Sc(r,"class",b);break;case"tabIndex":Sc(r,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":Sc(r,d,b);break;case"style":Za(r,b,L);break;case"data":if(l!=="object"){Sc(r,"data",b);break}case"src":case"href":if(b===""&&(l!=="a"||d!=="href")){r.removeAttribute(d);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){r.removeAttribute(d);break}b=no(""+b),r.setAttribute(d,b);break;case"action":case"formAction":if(typeof b=="function"){r.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof L=="function"&&(d==="formAction"?(l!=="input"&&gn(r,l,"name",E.name,E,null),gn(r,l,"formEncType",E.formEncType,E,null),gn(r,l,"formMethod",E.formMethod,E,null),gn(r,l,"formTarget",E.formTarget,E,null)):(gn(r,l,"encType",E.encType,E,null),gn(r,l,"method",E.method,E,null),gn(r,l,"target",E.target,E,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){r.removeAttribute(d);break}b=no(""+b),r.setAttribute(d,b);break;case"onClick":b!=null&&(r.onclick=Af);break;case"onScroll":b!=null&&Xr("scroll",r);break;case"onScrollEnd":b!=null&&Xr("scrollend",r);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(p(61));if(d=b.__html,d!=null){if(E.children!=null)throw Error(p(60));r.innerHTML=d}}break;case"multiple":r.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":r.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){r.removeAttribute("xlink:href");break}d=no(""+b),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?r.setAttribute(d,""+b):r.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?r.setAttribute(d,""):r.removeAttribute(d);break;case"capture":case"download":b===!0?r.setAttribute(d,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?r.setAttribute(d,b):r.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?r.setAttribute(d,b):r.removeAttribute(d);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?r.removeAttribute(d):r.setAttribute(d,b);break;case"popover":Xr("beforetoggle",r),Xr("toggle",r),wc(r,"popover",b);break;case"xlinkActuate":Is(r,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":Is(r,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":Is(r,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":Is(r,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":Is(r,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":Is(r,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":Is(r,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":Is(r,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":Is(r,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":wc(r,"is",b);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=ji.get(d)||d,wc(r,d,b))}}function Qp(r,l,d,b,E,L){switch(d){case"style":Za(r,b,L);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(p(61));if(d=b.__html,d!=null){if(E.children!=null)throw Error(p(60));r.innerHTML=d}}break;case"children":typeof b=="string"?cr(r,b):(typeof b=="number"||typeof b=="bigint")&&cr(r,""+b);break;case"onScroll":b!=null&&Xr("scroll",r);break;case"onScrollEnd":b!=null&&Xr("scrollend",r);break;case"onClick":b!=null&&(r.onclick=Af);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lo.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(E=d.endsWith("Capture"),l=d.slice(2,E?d.length-7:void 0),L=r[kt]||null,L=L!=null?L[d]:null,typeof L=="function"&&r.removeEventListener(l,L,E),typeof b=="function")){typeof L!="function"&&L!==null&&(d in r?r[d]=null:r.hasAttribute(d)&&r.removeAttribute(d)),r.addEventListener(l,b,E);break e}d in r?r[d]=b:b===!0?r.setAttribute(d,""):wc(r,d,b)}}}function Hi(r,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xr("error",r),Xr("load",r);var b=!1,E=!1,L;for(L in d)if(d.hasOwnProperty(L)){var W=d[L];if(W!=null)switch(L){case"src":b=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(p(137,l));default:gn(r,l,L,W,d,null)}}E&&gn(r,l,"srcSet",d.srcSet,d,null),b&&gn(r,l,"src",d.src,d,null);return;case"input":Xr("invalid",r);var ue=L=W=E=null,Me=null,Ne=null;for(b in d)if(d.hasOwnProperty(b)){var dt=d[b];if(dt!=null)switch(b){case"name":E=dt;break;case"type":W=dt;break;case"checked":Me=dt;break;case"defaultChecked":Ne=dt;break;case"value":L=dt;break;case"defaultValue":ue=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(p(137,l));break;default:gn(r,l,b,dt,d,null)}}zo(r,L,ue,Me,Ne,W,E,!1),El(r);return;case"select":Xr("invalid",r),b=W=L=null;for(E in d)if(d.hasOwnProperty(E)&&(ue=d[E],ue!=null))switch(E){case"value":L=ue;break;case"defaultValue":W=ue;break;case"multiple":b=ue;default:gn(r,l,E,ue,d,null)}l=L,d=W,r.multiple=!!b,l!=null?Pl(r,!!b,l,!1):d!=null&&Pl(r,!!b,d,!0);return;case"textarea":Xr("invalid",r),L=E=b=null;for(W in d)if(d.hasOwnProperty(W)&&(ue=d[W],ue!=null))switch(W){case"value":b=ue;break;case"defaultValue":E=ue;break;case"children":L=ue;break;case"dangerouslySetInnerHTML":if(ue!=null)throw Error(p(91));break;default:gn(r,l,W,ue,d,null)}ko(r,b,E,L),El(r);return;case"option":for(Me in d)if(d.hasOwnProperty(Me)&&(b=d[Me],b!=null))switch(Me){case"selected":r.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:gn(r,l,Me,b,d,null)}return;case"dialog":Xr("cancel",r),Xr("close",r);break;case"iframe":case"object":Xr("load",r);break;case"video":case"audio":for(b=0;b<vh.length;b++)Xr(vh[b],r);break;case"image":Xr("error",r),Xr("load",r);break;case"details":Xr("toggle",r);break;case"embed":case"source":case"link":Xr("error",r),Xr("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ne in d)if(d.hasOwnProperty(Ne)&&(b=d[Ne],b!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":throw Error(p(137,l));default:gn(r,l,Ne,b,d,null)}return;default:if(Bi(l)){for(dt in d)d.hasOwnProperty(dt)&&(b=d[dt],b!==void 0&&Qp(r,l,dt,b,d,void 0));return}}for(ue in d)d.hasOwnProperty(ue)&&(b=d[ue],b!=null&&gn(r,l,ue,b,d,null))}function _u(r,l,d,b){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,L=null,W=null,ue=null,Me=null,Ne=null,dt=null;for(lt in d){var Mt=d[lt];if(d.hasOwnProperty(lt)&&Mt!=null)switch(lt){case"checked":break;case"value":break;case"defaultValue":Me=Mt;default:b.hasOwnProperty(lt)||gn(r,l,lt,null,b,Mt)}}for(var et in b){var lt=b[et];if(Mt=d[et],b.hasOwnProperty(et)&&(lt!=null||Mt!=null))switch(et){case"type":L=lt;break;case"name":E=lt;break;case"checked":Ne=lt;break;case"defaultChecked":dt=lt;break;case"value":W=lt;break;case"defaultValue":ue=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(p(137,l));break;default:lt!==Mt&&gn(r,l,et,lt,b,Mt)}}ro(r,W,ue,Me,Ne,dt,L,E);return;case"select":lt=W=ue=et=null;for(L in d)if(Me=d[L],d.hasOwnProperty(L)&&Me!=null)switch(L){case"value":break;case"multiple":lt=Me;default:b.hasOwnProperty(L)||gn(r,l,L,null,b,Me)}for(E in b)if(L=b[E],Me=d[E],b.hasOwnProperty(E)&&(L!=null||Me!=null))switch(E){case"value":et=L;break;case"defaultValue":ue=L;break;case"multiple":W=L;default:L!==Me&&gn(r,l,E,L,b,Me)}l=ue,d=W,b=lt,et!=null?Pl(r,!!d,et,!1):!!b!=!!d&&(l!=null?Pl(r,!!d,l,!0):Pl(r,!!d,d?[]:"",!1));return;case"textarea":lt=et=null;for(ue in d)if(E=d[ue],d.hasOwnProperty(ue)&&E!=null&&!b.hasOwnProperty(ue))switch(ue){case"value":break;case"children":break;default:gn(r,l,ue,null,b,E)}for(W in b)if(E=b[W],L=d[W],b.hasOwnProperty(W)&&(E!=null||L!=null))switch(W){case"value":et=E;break;case"defaultValue":lt=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(p(91));break;default:E!==L&&gn(r,l,W,E,b,L)}ps(r,et,lt);return;case"option":for(var Qt in d)if(et=d[Qt],d.hasOwnProperty(Qt)&&et!=null&&!b.hasOwnProperty(Qt))switch(Qt){case"selected":r.selected=!1;break;default:gn(r,l,Qt,null,b,et)}for(Me in b)if(et=b[Me],lt=d[Me],b.hasOwnProperty(Me)&&et!==lt&&(et!=null||lt!=null))switch(Me){case"selected":r.selected=et&&typeof et!="function"&&typeof et!="symbol";break;default:gn(r,l,Me,et,b,lt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xr in d)et=d[xr],d.hasOwnProperty(xr)&&et!=null&&!b.hasOwnProperty(xr)&&gn(r,l,xr,null,b,et);for(Ne in b)if(et=b[Ne],lt=d[Ne],b.hasOwnProperty(Ne)&&et!==lt&&(et!=null||lt!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(p(137,l));break;default:gn(r,l,Ne,et,b,lt)}return;default:if(Bi(l)){for(var oi in d)et=d[oi],d.hasOwnProperty(oi)&&et!==void 0&&!b.hasOwnProperty(oi)&&Qp(r,l,oi,void 0,b,et);for(dt in b)et=b[dt],lt=d[dt],!b.hasOwnProperty(dt)||et===lt||et===void 0&&lt===void 0||Qp(r,l,dt,et,b,lt);return}}for(var Ze in d)et=d[Ze],d.hasOwnProperty(Ze)&&et!=null&&!b.hasOwnProperty(Ze)&&gn(r,l,Ze,null,b,et);for(Mt in b)et=b[Mt],lt=d[Mt],!b.hasOwnProperty(Mt)||et===lt||et==null&&lt==null||gn(r,l,Mt,et,b,lt)}var Ed=null,Pd=null;function Cf(r){return r.nodeType===9?r:r.ownerDocument}function Jp(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _g(r,l){if(r===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&l==="foreignObject"?0:r}function em(r,l){return r==="textarea"||r==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Rd=null;function Ef(){var r=window.event;return r&&r.type==="popstate"?r===Rd?!1:(Rd=r,!0):(Rd=null,!1)}var tm=typeof setTimeout=="function"?setTimeout:void 0,Id=typeof clearTimeout=="function"?clearTimeout:void 0,rm=typeof Promise=="function"?Promise:void 0,Dd=typeof queueMicrotask=="function"?queueMicrotask:typeof rm<"u"?function(r){return rm.resolve(null).then(r).catch(Ld)}:tm;function Ld(r){setTimeout(function(){throw r})}function wh(r,l){var d=l,b=0;do{var E=d.nextSibling;if(r.removeChild(d),E&&E.nodeType===8)if(d=E.data,d==="/$"){if(b===0){r.removeChild(E),Wn(l);return}b--}else d!=="$"&&d!=="$?"&&d!=="$!"||b++;d=E}while(d);Wn(l)}function nm(r){var l=r.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":nm(d),$a(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}r.removeChild(d)}}function m0(r,l,d,b){for(;r.nodeType===1;){var E=d;if(r.nodeName.toLowerCase()!==l.toLowerCase()){if(!b&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(b){if(!r[yi])switch(l){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(L=r.getAttribute("rel"),L==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(L!==E.rel||r.getAttribute("href")!==(E.href==null?null:E.href)||r.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||r.getAttribute("title")!==(E.title==null?null:E.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(L=r.getAttribute("src"),(L!==(E.src==null?null:E.src)||r.getAttribute("type")!==(E.type==null?null:E.type)||r.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&L&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(l==="input"&&r.type==="hidden"){var L=E.name==null?null:""+E.name;if(E.type==="hidden"&&r.getAttribute("name")===L)return r}else return r;if(r=ha(r.nextSibling),r===null)break}return null}function g0(r,l,d){if(l==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!d||(r=ha(r.nextSibling),r===null))return null;return r}function ha(r){for(;r!=null;r=r.nextSibling){var l=r.nodeType;if(l===1||l===3)break;if(l===8){if(l=r.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return r}function zi(r){r=r.previousSibling;for(var l=0;r;){if(r.nodeType===8){var d=r.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return r;l--}else d==="/$"&&l++}r=r.previousSibling}return null}function yl(r,l,d){switch(l=Cf(d),r){case"html":if(r=l.documentElement,!r)throw Error(p(452));return r;case"head":if(r=l.head,!r)throw Error(p(453));return r;case"body":if(r=l.body,!r)throw Error(p(454));return r;default:throw Error(p(451))}}var Ba=new Map,im=new Set;function Pf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.ownerDocument}var Ks=zt.d;zt.d={f:y0,r:vg,D:bg,C:am,L:sm,m:wg,X:om,S:Rf,M:Sg};function y0(){var r=Ks.f(),l=uc();return r||l}function vg(r){var l=sa(r);l!==null&&l.tag===5&&l.type==="form"?ot(l):Ks.r(r)}var pc=typeof document>"u"?null:document;function xg(r,l,d){var b=pc;if(b&&typeof l=="string"&&l){var E=Yi(l);E='link[rel="'+r+'"][href="'+E+'"]',typeof d=="string"&&(E+='[crossorigin="'+d+'"]'),im.has(E)||(im.add(E),r={rel:r,crossOrigin:d,href:l},b.querySelector(E)===null&&(l=b.createElement("link"),Hi(l,"link",r),ut(l),b.head.appendChild(l)))}}function bg(r){Ks.D(r),xg("dns-prefetch",r,null)}function am(r,l){Ks.C(r,l),xg("preconnect",r,l)}function sm(r,l,d){Ks.L(r,l,d);var b=pc;if(b&&r&&l){var E='link[rel="preload"][as="'+Yi(l)+'"]';l==="image"&&d&&d.imageSrcSet?(E+='[imagesrcset="'+Yi(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(E+='[imagesizes="'+Yi(d.imageSizes)+'"]')):E+='[href="'+Yi(r)+'"]';var L=E;switch(l){case"style":L=_l(r);break;case"script":L=vu(r)}Ba.has(L)||(r=ht({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:r,as:l},d),Ba.set(L,r),b.querySelector(E)!==null||l==="style"&&b.querySelector(vl(L))||l==="script"&&b.querySelector(If(L))||(l=b.createElement("link"),Hi(l,"link",r),ut(l),b.head.appendChild(l)))}}function wg(r,l){Ks.m(r,l);var d=pc;if(d&&r){var b=l&&typeof l.as=="string"?l.as:"script",E='link[rel="modulepreload"][as="'+Yi(b)+'"][href="'+Yi(r)+'"]',L=E;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":L=vu(r)}if(!Ba.has(L)&&(r=ht({rel:"modulepreload",href:r},l),Ba.set(L,r),d.querySelector(E)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(If(L)))return}b=d.createElement("link"),Hi(b,"link",r),ut(b),d.head.appendChild(b)}}}function Rf(r,l,d){Ks.S(r,l,d);var b=pc;if(b&&r){var E=Pr(b).hoistableStyles,L=_l(r);l=l||"default";var W=E.get(L);if(!W){var ue={loading:0,preload:null};if(W=b.querySelector(vl(L)))ue.loading=5;else{r=ht({rel:"stylesheet",href:r,"data-precedence":l},d),(d=Ba.get(L))&&o(r,d);var Me=W=b.createElement("link");ut(Me),Hi(Me,"link",r),Me._p=new Promise(function(Ne,dt){Me.onload=Ne,Me.onerror=dt}),Me.addEventListener("load",function(){ue.loading|=1}),Me.addEventListener("error",function(){ue.loading|=2}),ue.loading|=4,t(W,l,b)}W={type:"stylesheet",instance:W,count:1,state:ue},E.set(L,W)}}}function om(r,l){Ks.X(r,l);var d=pc;if(d&&r){var b=Pr(d).hoistableScripts,E=vu(r),L=b.get(E);L||(L=d.querySelector(If(E)),L||(r=ht({src:r,async:!0},l),(l=Ba.get(E))&&c(r,l),L=d.createElement("script"),ut(L),Hi(L,"link",r),d.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},b.set(E,L))}}function Sg(r,l){Ks.M(r,l);var d=pc;if(d&&r){var b=Pr(d).hoistableScripts,E=vu(r),L=b.get(E);L||(L=d.querySelector(If(E)),L||(r=ht({src:r,async:!0,type:"module"},l),(l=Ba.get(E))&&c(r,l),L=d.createElement("script"),ut(L),Hi(L,"link",r),d.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},b.set(E,L))}}function zd(r,l,d,b){var E=(E=Dr.current)?Pf(E):null;if(!E)throw Error(p(446));switch(r){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=_l(d.href),d=Pr(E).hoistableStyles,b=d.get(l),b||(b={type:"style",instance:null,count:0,state:null},d.set(l,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){r=_l(d.href);var L=Pr(E).hoistableStyles,W=L.get(r);if(W||(E=E.ownerDocument||E,W={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},L.set(r,W),(L=E.querySelector(vl(r)))&&!L._p&&(W.instance=L,W.state.loading=5),Ba.has(r)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Ba.set(r,d),L||lm(E,r,d,W.state))),l&&b===null)throw Error(p(528,""));return W}if(l&&b!==null)throw Error(p(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=vu(d),d=Pr(E).hoistableScripts,b=d.get(l),b||(b={type:"script",instance:null,count:0,state:null},d.set(l,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(p(444,r))}}function _l(r){return'href="'+Yi(r)+'"'}function vl(r){return'link[rel="stylesheet"]['+r+"]"}function kd(r){return ht({},r,{"data-precedence":r.precedence,precedence:null})}function lm(r,l,d,b){r.querySelector('link[rel="preload"][as="style"]['+l+"]")?b.loading=1:(l=r.createElement("link"),b.preload=l,l.addEventListener("load",function(){return b.loading|=1}),l.addEventListener("error",function(){return b.loading|=2}),Hi(l,"link",d),ut(l),r.head.appendChild(l))}function vu(r){return'[src="'+Yi(r)+'"]'}function If(r){return"script[async]"+r}function s(r,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var b=r.querySelector('style[data-href~="'+Yi(d.href)+'"]');if(b)return l.instance=b,ut(b),b;var E=ht({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return b=(r.ownerDocument||r).createElement("style"),ut(b),Hi(b,"style",E),t(b,d.precedence,r),l.instance=b;case"stylesheet":E=_l(d.href);var L=r.querySelector(vl(E));if(L)return l.state.loading|=4,l.instance=L,ut(L),L;b=kd(d),(E=Ba.get(E))&&o(b,E),L=(r.ownerDocument||r).createElement("link"),ut(L);var W=L;return W._p=new Promise(function(ue,Me){W.onload=ue,W.onerror=Me}),Hi(L,"link",b),l.state.loading|=4,t(L,d.precedence,r),l.instance=L;case"script":return L=vu(d.src),(E=r.querySelector(If(L)))?(l.instance=E,ut(E),E):(b=d,(E=Ba.get(L))&&(b=ht({},d),c(b,E)),r=r.ownerDocument||r,E=r.createElement("script"),ut(E),Hi(E,"link",b),r.head.appendChild(E),l.instance=E);case"void":return null;default:throw Error(p(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(b=l.instance,l.state.loading|=4,t(b,d.precedence,r));return l.instance}function t(r,l,d){for(var b=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=b.length?b[b.length-1]:null,L=E,W=0;W<b.length;W++){var ue=b[W];if(ue.dataset.precedence===l)L=ue;else if(L!==E)break}L?L.parentNode.insertBefore(r,L.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(r,l.firstChild))}function o(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.title==null&&(r.title=l.title)}function c(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.integrity==null&&(r.integrity=l.integrity)}var g=null;function w(r,l,d){if(g===null){var b=new Map,E=g=new Map;E.set(d,b)}else E=g,b=E.get(d),b||(b=new Map,E.set(d,b));if(b.has(r))return b;for(b.set(r,null),d=d.getElementsByTagName(r),E=0;E<d.length;E++){var L=d[E];if(!(L[yi]||L[yt]||r==="link"&&L.getAttribute("rel")==="stylesheet")&&L.namespaceURI!=="http://www.w3.org/2000/svg"){var W=L.getAttribute(l)||"";W=r+W;var ue=b.get(W);ue?ue.push(L):b.set(W,[L])}}return b}function T(r,l,d){r=r.ownerDocument||r,r.head.insertBefore(d,l==="title"?r.querySelector("head > title"):null)}function A(r,l,d){if(d===1||l.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return r=l.disabled,typeof l.precedence=="string"&&r==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function I(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var k=null;function N(){}function V(r,l,d){if(k===null)throw Error(p(475));var b=k;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var E=_l(d.href),L=r.querySelector(vl(E));if(L){r=L._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(b.count++,b=Y.bind(b),r.then(b,b)),l.state.loading|=4,l.instance=L,ut(L);return}L=r.ownerDocument||r,d=kd(d),(E=Ba.get(E))&&o(d,E),L=L.createElement("link"),ut(L);var W=L;W._p=new Promise(function(ue,Me){W.onload=ue,W.onerror=Me}),Hi(L,"link",d),l.instance=L}b.stylesheets===null&&(b.stylesheets=new Map),b.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(b.count++,l=Y.bind(b),r.addEventListener("load",l),r.addEventListener("error",l))}}function q(){if(k===null)throw Error(p(475));var r=k;return r.stylesheets&&r.count===0&&ne(r,r.stylesheets),0<r.count?function(l){var d=setTimeout(function(){if(r.stylesheets&&ne(r,r.stylesheets),r.unsuspend){var b=r.unsuspend;r.unsuspend=null,b()}},6e4);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(d)}}:null}function Y(){if(this.count--,this.count===0){if(this.stylesheets)ne(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Q=null;function ne(r,l){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Q=new Map,l.forEach(ce,r),Q=null,Y.call(r))}function ce(r,l){if(!(l.state.loading&4)){var d=Q.get(r);if(d)var b=d.get(null);else{d=new Map,Q.set(r,d);for(var E=r.querySelectorAll("link[data-precedence],style[data-precedence]"),L=0;L<E.length;L++){var W=E[L];(W.nodeName==="LINK"||W.getAttribute("media")!=="not all")&&(d.set(W.dataset.precedence,W),b=W)}b&&d.set(null,b)}E=l.instance,W=E.getAttribute("data-precedence"),L=d.get(W)||b,L===b&&d.set(null,E),d.set(W,E),this.count++,b=Y.bind(this),E.addEventListener("load",b),E.addEventListener("error",b),L?L.parentNode.insertBefore(E,L.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(E,r.firstChild)),l.state.loading|=4}}var ge={$$typeof:F,Provider:null,Consumer:null,_currentValue:er,_currentValue2:er,_threadCount:0};function Le(r,l,d,b,E,L,W,ue){this.tag=1,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=At(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=At(0),this.hiddenUpdates=At(null),this.identifierPrefix=b,this.onUncaughtError=E,this.onCaughtError=L,this.onRecoverableError=W,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function ve(r,l,d,b,E,L,W,ue,Me,Ne,dt,Mt){return r=new Le(r,l,d,W,ue,Me,Ne,Mt),l=1,L===!0&&(l|=24),L=as(3,null,null,l),r.current=L,L.stateNode=r,l=Qo(),l.refCount++,r.pooledCache=l,l.refCount++,L.memoizedState={element:b,isDehydrated:d,cache:l},ff(L),r}function H(r){return r?(r=Fl,r):Fl}function le(r,l,d,b,E,L){E=H(E),b.context===null?b.context=E:b.pendingContext=E,b=ol(l),b.payload={element:d},L=L===void 0?null:L,L!==null&&(b.callback=L),d=iu(r,b,l),d!==null&&(ia(d,r,l),df(d,r,l))}function Te(r,l){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var d=r.retryLane;r.retryLane=d!==0&&d<l?d:l}}function Ge(r,l){Te(r,l),(r=r.alternate)&&Te(r,l)}function mt(r){if(r.tag===13){var l=ho(r,67108864);l!==null&&ia(l,r,67108864),Ge(r,67108864)}}var Xe=!0;function nt(r,l,d,b){var E=Ye.T;Ye.T=null;var L=zt.p;try{zt.p=2,gt(r,l,d,b)}finally{zt.p=L,Ye.T=E}}function bt(r,l,d,b){var E=Ye.T;Ye.T=null;var L=zt.p;try{zt.p=8,gt(r,l,d,b)}finally{zt.p=L,Ye.T=E}}function gt(r,l,d,b){if(Xe){var E=St(b);if(E===null)Cd(r,l,b,st,d),Mi(r,b);else if(Ai(E,r,l,d,b))b.stopPropagation();else if(Mi(r,b),l&4&&-1<_a.indexOf(r)){for(;E!==null;){var L=sa(E);if(L!==null)switch(L.tag){case 3:if(L=L.stateNode,L.current.memoizedState.isDehydrated){var W=Ce(L.pendingLanes);if(W!==0){var ue=L;for(ue.pendingLanes|=2,ue.entangledLanes|=2;W;){var Me=1<<31-ae(W);ue.entanglements[1]|=Me,W&=~Me}Ws(L),(Qn&6)===0&&(Hn=Ut()+500,hc(0))}}break;case 13:ue=ho(L,2),ue!==null&&ia(ue,L,2),uc(),Ge(L,2)}if(L=St(b),L===null&&Cd(r,l,b,st,d),L===E)break;E=L}E!==null&&b.stopPropagation()}else Cd(r,l,b,null,d)}}function St(r){return r=Xi(r),Bt(r)}var st=null;function Bt(r){if(st=null,r=Zn(r),r!==null){var l=Rt(r);if(l===null)r=null;else{var d=l.tag;if(d===13){if(r=fr(l),r!==null)return r;r=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;r=null}else l!==r&&(r=null)}}return st=r,null}function Yt(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ur()){case _r:return 2;case Zr:return 8;case Rn:case Vn:return 32;case zn:return 268435456;default:return 32}default:return 32}}var qt=!1,jt=null,dr=null,an=null,Nn=new Map,ni=new Map,Ti=[],_a="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mi(r,l){switch(r){case"focusin":case"focusout":jt=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":an=null;break;case"pointerover":case"pointerout":Nn.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":ni.delete(l.pointerId)}}function cn(r,l,d,b,E,L){return r===null||r.nativeEvent!==L?(r={blockedOn:l,domEventName:d,eventSystemFlags:b,nativeEvent:L,targetContainers:[E]},l!==null&&(l=sa(l),l!==null&&mt(l)),r):(r.eventSystemFlags|=b,l=r.targetContainers,E!==null&&l.indexOf(E)===-1&&l.push(E),r)}function Ai(r,l,d,b,E){switch(l){case"focusin":return jt=cn(jt,r,l,d,b,E),!0;case"dragenter":return dr=cn(dr,r,l,d,b,E),!0;case"mouseover":return an=cn(an,r,l,d,b,E),!0;case"pointerover":var L=E.pointerId;return Nn.set(L,cn(Nn.get(L)||null,r,l,d,b,E)),!0;case"gotpointercapture":return L=E.pointerId,ni.set(L,cn(ni.get(L)||null,r,l,d,b,E)),!0}return!1}function Ci(r){var l=Zn(r.target);if(l!==null){var d=Rt(l);if(d!==null){if(l=d.tag,l===13){if(l=fr(d),l!==null){r.blockedOn=l,Cr(r.priority,function(){if(d.tag===13){var b=ka(),E=ho(d,b);E!==null&&ia(E,d,b),Ge(d,b)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){r.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ii(r){if(r.blockedOn!==null)return!1;for(var l=r.targetContainers;0<l.length;){var d=St(r.nativeEvent);if(d===null){d=r.nativeEvent;var b=new d.constructor(d.type,d);ui=b,d.target.dispatchEvent(b),ui=null}else return l=sa(d),l!==null&&mt(l),r.blockedOn=d,!1;l.shift()}return!0}function aa(r,l,d){ii(r)&&d.delete(l)}function ss(){qt=!1,jt!==null&&ii(jt)&&(jt=null),dr!==null&&ii(dr)&&(dr=null),an!==null&&ii(an)&&(an=null),Nn.forEach(aa),ni.forEach(aa)}function Jn(r,l){r.blockedOn===l&&(r.blockedOn=null,qt||(qt=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,ss)))}var Wi=null;function ai(r){Wi!==r&&(Wi=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Wi===r&&(Wi=null);for(var l=0;l<r.length;l+=3){var d=r[l],b=r[l+1],E=r[l+2];if(typeof b!="function"){if(Bt(b||d)===null)continue;break}var L=sa(d);L!==null&&(r.splice(l,3),l-=3,He(L,{pending:!0,data:E,method:d.method,action:b},b,E))}}))}function Wn(r){function l(Me){return Jn(Me,r)}jt!==null&&Jn(jt,r),dr!==null&&Jn(dr,r),an!==null&&Jn(an,r),Nn.forEach(l),ni.forEach(l);for(var d=0;d<Ti.length;d++){var b=Ti[d];b.blockedOn===r&&(b.blockedOn=null)}for(;0<Ti.length&&(d=Ti[0],d.blockedOn===null);)Ci(d),d.blockedOn===null&&Ti.shift();if(d=(r.ownerDocument||r).$$reactFormReplay,d!=null)for(b=0;b<d.length;b+=3){var E=d[b],L=d[b+1],W=E[kt]||null;if(typeof L=="function")W||ai(d);else if(W){var ue=null;if(L&&L.hasAttribute("formAction")){if(E=L,W=L[kt]||null)ue=W.formAction;else if(Bt(E)!==null)continue}else ue=W.action;typeof ue=="function"?d[b+1]=ue:(d.splice(b,3),b-=3),ai(d)}}}function si(r){this._internalRoot=r}Fn.prototype.render=si.prototype.render=function(r){var l=this._internalRoot;if(l===null)throw Error(p(409));var d=l.current,b=ka();le(d,b,r,l,null,null)},Fn.prototype.unmount=si.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var l=r.containerInfo;r.tag===0&&cc(),le(r.current,2,null,r,null,null),uc(),l[Hr]=null}};function Fn(r){this._internalRoot=r}Fn.prototype.unstable_scheduleHydration=function(r){if(r){var l=Ur();r={blockedOn:null,target:r,priority:l};for(var d=0;d<Ti.length&&l!==0&&l<Ti[d].priority;d++);Ti.splice(d,0,r),d===0&&Ci(r)}};var yn=a.version;if(yn!=="19.0.0")throw Error(p(527,yn,"19.0.0"));zt.findDOMNode=function(r){var l=r._reactInternals;if(l===void 0)throw typeof r.render=="function"?Error(p(188)):(r=Object.keys(r).join(","),Error(p(268,r)));return r=wt(l),r=r!==null?Zt(r):null,r=r===null?null:r.stateNode,r};var Ys={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:Ye,findFiberByHostInstance:Zn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xl.isDisabled&&xl.supportsFiber)try{nn=xl.inject(Ys),tn=xl}catch{}}return cm.createRoot=function(r,l){if(!_(r))throw Error(p(299));var d=!1,b="",E=es,L=xo,W=bo,ue=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(b=l.identifierPrefix),l.onUncaughtError!==void 0&&(E=l.onUncaughtError),l.onCaughtError!==void 0&&(L=l.onCaughtError),l.onRecoverableError!==void 0&&(W=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(ue=l.unstable_transitionCallbacks)),l=ve(r,1,!1,null,null,d,b,E,L,W,ue,null),r[Hr]=l.current,Ad(r.nodeType===8?r.parentNode:r),new si(l)},cm.hydrateRoot=function(r,l,d){if(!_(r))throw Error(p(299));var b=!1,E="",L=es,W=xo,ue=bo,Me=null,Ne=null;return d!=null&&(d.unstable_strictMode===!0&&(b=!0),d.identifierPrefix!==void 0&&(E=d.identifierPrefix),d.onUncaughtError!==void 0&&(L=d.onUncaughtError),d.onCaughtError!==void 0&&(W=d.onCaughtError),d.onRecoverableError!==void 0&&(ue=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(Me=d.unstable_transitionCallbacks),d.formState!==void 0&&(Ne=d.formState)),l=ve(r,1,!0,l,d??null,b,E,L,W,ue,Me,Ne),l.context=H(null),d=l.current,b=ka(),E=ol(b),E.callback=null,iu(d,E,b),l.current.lanes=b,Ft(l,b),Ws(l),r[Hr]=l.current,Ad(r),new Fn(l)},cm.version="19.0.0",cm}var Tx;function BM(){if(Tx)return b0.exports;Tx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(a){console.error(a)}}return n(),b0.exports=OM(),b0.exports}var jM=BM(),hm={},Mx;function NM(){if(Mx)return hm;Mx=1,Object.defineProperty(hm,"__esModule",{value:!0}),hm.parse=y,hm.serialize=R;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,a=/^[\u0021-\u003A\u003C-\u007E]*$/,f=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,p=/^[\u0020-\u003A\u003D-\u007E]*$/,_=Object.prototype.toString,S=(()=>{const z=function(){};return z.prototype=Object.create(null),z})();function y(z,F){const G=new S,te=z.length;if(te<2)return G;const K=(F==null?void 0:F.decode)||O;let X=0;do{const ye=z.indexOf("=",X);if(ye===-1)break;const pe=z.indexOf(";",X),xe=pe===-1?te:pe;if(ye>xe){X=z.lastIndexOf(";",ye-1)+1;continue}const Se=u(z,X,ye),ke=C(z,ye,Se),it=z.slice(Se,ke);if(G[it]===void 0){let Ke=u(z,ye+1,xe),Ye=C(z,xe,Ke);const ht=K(z.slice(Ke,Ye));G[it]=ht}X=xe+1}while(X<te);return G}function u(z,F,G){do{const te=z.charCodeAt(F);if(te!==32&&te!==9)return F}while(++F<G);return G}function C(z,F,G){for(;F>G;){const te=z.charCodeAt(--F);if(te!==32&&te!==9)return F+1}return G}function R(z,F,G){const te=(G==null?void 0:G.encode)||encodeURIComponent;if(!n.test(z))throw new TypeError(`argument name is invalid: ${z}`);const K=te(F);if(!a.test(K))throw new TypeError(`argument val is invalid: ${F}`);let X=z+"="+K;if(!G)return X;if(G.maxAge!==void 0){if(!Number.isInteger(G.maxAge))throw new TypeError(`option maxAge is invalid: ${G.maxAge}`);X+="; Max-Age="+G.maxAge}if(G.domain){if(!f.test(G.domain))throw new TypeError(`option domain is invalid: ${G.domain}`);X+="; Domain="+G.domain}if(G.path){if(!p.test(G.path))throw new TypeError(`option path is invalid: ${G.path}`);X+="; Path="+G.path}if(G.expires){if(!B(G.expires)||!Number.isFinite(G.expires.valueOf()))throw new TypeError(`option expires is invalid: ${G.expires}`);X+="; Expires="+G.expires.toUTCString()}if(G.httpOnly&&(X+="; HttpOnly"),G.secure&&(X+="; Secure"),G.partitioned&&(X+="; Partitioned"),G.priority)switch(typeof G.priority=="string"?G.priority.toLowerCase():void 0){case"low":X+="; Priority=Low";break;case"medium":X+="; Priority=Medium";break;case"high":X+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${G.priority}`)}if(G.sameSite)switch(typeof G.sameSite=="string"?G.sameSite.toLowerCase():G.sameSite){case!0:case"strict":X+="; SameSite=Strict";break;case"lax":X+="; SameSite=Lax";break;case"none":X+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${G.sameSite}`)}return X}function O(z){if(z.indexOf("%")===-1)return z;try{return decodeURIComponent(z)}catch{return z}}function B(z){return _.call(z)==="[object Date]"}return hm}NM();var Ax="popstate";function FM(n={}){function a(p,_){let{pathname:S,search:y,hash:u}=p.location;return q0("",{pathname:S,search:y,hash:u},_.state&&_.state.usr||null,_.state&&_.state.key||"default")}function f(p,_){return typeof _=="string"?_:Mm(_)}return VM(a,f,null,n)}function li(n,a){if(n===!1||n===null||typeof n>"u")throw new Error(a)}function Sl(n,a){if(!n){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function UM(){return Math.random().toString(36).substring(2,10)}function Cx(n,a){return{usr:n.state,key:n.key,idx:a}}function q0(n,a,f=null,p){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof a=="string"?ip(a):a,state:f,key:a&&a.key||p||UM()}}function Mm({pathname:n="/",search:a="",hash:f=""}){return a&&a!=="?"&&(n+=a.charAt(0)==="?"?a:"?"+a),f&&f!=="#"&&(n+=f.charAt(0)==="#"?f:"#"+f),n}function ip(n){let a={};if(n){let f=n.indexOf("#");f>=0&&(a.hash=n.substring(f),n=n.substring(0,f));let p=n.indexOf("?");p>=0&&(a.search=n.substring(p),n=n.substring(0,p)),n&&(a.pathname=n)}return a}function VM(n,a,f,p={}){let{window:_=document.defaultView,v5Compat:S=!1}=p,y=_.history,u="POP",C=null,R=O();R==null&&(R=0,y.replaceState({...y.state,idx:R},""));function O(){return(y.state||{idx:null}).idx}function B(){u="POP";let K=O(),X=K==null?null:K-R;R=K,C&&C({action:u,location:te.location,delta:X})}function z(K,X){u="PUSH";let ye=q0(te.location,K,X);R=O()+1;let pe=Cx(ye,R),xe=te.createHref(ye);try{y.pushState(pe,"",xe)}catch(Se){if(Se instanceof DOMException&&Se.name==="DataCloneError")throw Se;_.location.assign(xe)}S&&C&&C({action:u,location:te.location,delta:1})}function F(K,X){u="REPLACE";let ye=q0(te.location,K,X);R=O();let pe=Cx(ye,R),xe=te.createHref(ye);y.replaceState(pe,"",xe),S&&C&&C({action:u,location:te.location,delta:0})}function G(K){let X=_.location.origin!=="null"?_.location.origin:_.location.href,ye=typeof K=="string"?K:Mm(K);return ye=ye.replace(/ $/,"%20"),li(X,`No window.location.(origin|href) available to create URL for href: ${ye}`),new URL(ye,X)}let te={get action(){return u},get location(){return n(_,y)},listen(K){if(C)throw new Error("A history only accepts one active listener");return _.addEventListener(Ax,B),C=K,()=>{_.removeEventListener(Ax,B),C=null}},createHref(K){return a(_,K)},createURL:G,encodeLocation(K){let X=G(K);return{pathname:X.pathname,search:X.search,hash:X.hash}},push:z,replace:F,go(K){return y.go(K)}};return te}function A2(n,a,f="/"){return $M(n,a,f,!1)}function $M(n,a,f,p){let _=typeof a=="string"?ip(a):a,S=yc(_.pathname||"/",f);if(S==null)return null;let y=C2(n);ZM(y);let u=null;for(let C=0;u==null&&C<y.length;++C){let R=tA(S);u=JM(y[C],R,p)}return u}function C2(n,a=[],f=[],p=""){let _=(S,y,u)=>{let C={relativePath:u===void 0?S.path||"":u,caseSensitive:S.caseSensitive===!0,childrenIndex:y,route:S};C.relativePath.startsWith("/")&&(li(C.relativePath.startsWith(p),`Absolute route path "${C.relativePath}" nested under path "${p}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(p.length));let R=gc([p,C.relativePath]),O=f.concat(C);S.children&&S.children.length>0&&(li(S.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${R}".`),C2(S.children,a,O,R)),!(S.path==null&&!S.index)&&a.push({path:R,score:XM(R,S.index),routesMeta:O})};return n.forEach((S,y)=>{var u;if(S.path===""||!((u=S.path)!=null&&u.includes("?")))_(S,y);else for(let C of E2(S.path))_(S,y,C)}),a}function E2(n){let a=n.split("/");if(a.length===0)return[];let[f,...p]=a,_=f.endsWith("?"),S=f.replace(/\?$/,"");if(p.length===0)return _?[S,""]:[S];let y=E2(p.join("/")),u=[];return u.push(...y.map(C=>C===""?S:[S,C].join("/"))),_&&u.push(...y),u.map(C=>n.startsWith("/")&&C===""?"/":C)}function ZM(n){n.sort((a,f)=>a.score!==f.score?f.score-a.score:QM(a.routesMeta.map(p=>p.childrenIndex),f.routesMeta.map(p=>p.childrenIndex)))}var qM=/^:[\w-]+$/,GM=3,HM=2,WM=1,KM=10,YM=-2,Ex=n=>n==="*";function XM(n,a){let f=n.split("/"),p=f.length;return f.some(Ex)&&(p+=YM),a&&(p+=HM),f.filter(_=>!Ex(_)).reduce((_,S)=>_+(qM.test(S)?GM:S===""?WM:KM),p)}function QM(n,a){return n.length===a.length&&n.slice(0,-1).every((p,_)=>p===a[_])?n[n.length-1]-a[a.length-1]:0}function JM(n,a,f=!1){let{routesMeta:p}=n,_={},S="/",y=[];for(let u=0;u<p.length;++u){let C=p[u],R=u===p.length-1,O=S==="/"?a:a.slice(S.length)||"/",B=I_({path:C.relativePath,caseSensitive:C.caseSensitive,end:R},O),z=C.route;if(!B&&R&&f&&!p[p.length-1].route.index&&(B=I_({path:C.relativePath,caseSensitive:C.caseSensitive,end:!1},O)),!B)return null;Object.assign(_,B.params),y.push({params:_,pathname:gc([S,B.pathname]),pathnameBase:aA(gc([S,B.pathnameBase])),route:z}),B.pathnameBase!=="/"&&(S=gc([S,B.pathnameBase]))}return y}function I_(n,a){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[f,p]=eA(n.path,n.caseSensitive,n.end),_=a.match(f);if(!_)return null;let S=_[0],y=S.replace(/(.)\/+$/,"$1"),u=_.slice(1);return{params:p.reduce((R,{paramName:O,isOptional:B},z)=>{if(O==="*"){let G=u[z]||"";y=S.slice(0,S.length-G.length).replace(/(.)\/+$/,"$1")}const F=u[z];return B&&!F?R[O]=void 0:R[O]=(F||"").replace(/%2F/g,"/"),R},{}),pathname:S,pathnameBase:y,pattern:n}}function eA(n,a=!1,f=!0){Sl(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let p=[],_="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,u,C)=>(p.push({paramName:u,isOptional:C!=null}),C?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(p.push({paramName:"*"}),_+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):f?_+="\\/*$":n!==""&&n!=="/"&&(_+="(?:(?=\\/|$))"),[new RegExp(_,a?void 0:"i"),p]}function tA(n){try{return n.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Sl(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),n}}function yc(n,a){if(a==="/")return n;if(!n.toLowerCase().startsWith(a.toLowerCase()))return null;let f=a.endsWith("/")?a.length-1:a.length,p=n.charAt(f);return p&&p!=="/"?null:n.slice(f)||"/"}function rA(n,a="/"){let{pathname:f,search:p="",hash:_=""}=typeof n=="string"?ip(n):n;return{pathname:f?f.startsWith("/")?f:nA(f,a):a,search:sA(p),hash:oA(_)}}function nA(n,a){let f=a.replace(/\/+$/,"").split("/");return n.split("/").forEach(_=>{_===".."?f.length>1&&f.pop():_!=="."&&f.push(_)}),f.length>1?f.join("/"):"/"}function M0(n,a,f,p){return`Cannot include a '${n}' character in a manually specified \`to.${a}\` field [${JSON.stringify(p)}].  Please separate it out to the \`to.${f}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iA(n){return n.filter((a,f)=>f===0||a.route.path&&a.route.path.length>0)}function wv(n){let a=iA(n);return a.map((f,p)=>p===a.length-1?f.pathname:f.pathnameBase)}function Sv(n,a,f,p=!1){let _;typeof n=="string"?_=ip(n):(_={...n},li(!_.pathname||!_.pathname.includes("?"),M0("?","pathname","search",_)),li(!_.pathname||!_.pathname.includes("#"),M0("#","pathname","hash",_)),li(!_.search||!_.search.includes("#"),M0("#","search","hash",_)));let S=n===""||_.pathname==="",y=S?"/":_.pathname,u;if(y==null)u=f;else{let B=a.length-1;if(!p&&y.startsWith("..")){let z=y.split("/");for(;z[0]==="..";)z.shift(),B-=1;_.pathname=z.join("/")}u=B>=0?a[B]:"/"}let C=rA(_,u),R=y&&y!=="/"&&y.endsWith("/"),O=(S||y===".")&&f.endsWith("/");return!C.pathname.endsWith("/")&&(R||O)&&(C.pathname+="/"),C}var gc=n=>n.join("/").replace(/\/\/+/g,"/"),aA=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),sA=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,oA=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function lA(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var P2=["POST","PUT","PATCH","DELETE"];new Set(P2);var uA=["GET",...P2];new Set(uA);var ap=oe.createContext(null);ap.displayName="DataRouter";var $_=oe.createContext(null);$_.displayName="DataRouterState";var R2=oe.createContext({isTransitioning:!1});R2.displayName="ViewTransition";var cA=oe.createContext(new Map);cA.displayName="Fetchers";var hA=oe.createContext(null);hA.displayName="Await";var Tl=oe.createContext(null);Tl.displayName="Navigation";var km=oe.createContext(null);km.displayName="Location";var Do=oe.createContext({outlet:null,matches:[],isDataRoute:!1});Do.displayName="Route";var Tv=oe.createContext(null);Tv.displayName="RouteError";function fA(n,{relative:a}={}){li(sp(),"useHref() may be used only in the context of a <Router> component.");let{basename:f,navigator:p}=oe.useContext(Tl),{hash:_,pathname:S,search:y}=Om(n,{relative:a}),u=S;return f!=="/"&&(u=S==="/"?f:gc([f,S])),p.createHref({pathname:u,search:y,hash:_})}function sp(){return oe.useContext(km)!=null}function Ml(){return li(sp(),"useLocation() may be used only in the context of a <Router> component."),oe.useContext(km).location}var I2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function D2(n){oe.useContext(Tl).static||oe.useLayoutEffect(n)}function bc(){let{isDataRoute:n}=oe.useContext(Do);return n?EA():dA()}function dA(){li(sp(),"useNavigate() may be used only in the context of a <Router> component.");let n=oe.useContext(ap),{basename:a,navigator:f}=oe.useContext(Tl),{matches:p}=oe.useContext(Do),{pathname:_}=Ml(),S=JSON.stringify(wv(p)),y=oe.useRef(!1);return D2(()=>{y.current=!0}),oe.useCallback((C,R={})=>{if(Sl(y.current,I2),!y.current)return;if(typeof C=="number"){f.go(C);return}let O=Sv(C,JSON.parse(S),_,R.relative==="path");n==null&&a!=="/"&&(O.pathname=O.pathname==="/"?a:gc([a,O.pathname])),(R.replace?f.replace:f.push)(O,R.state,R)},[a,f,S,_,n])}var pA=oe.createContext(null);function mA(n){let a=oe.useContext(Do).outlet;return a&&oe.createElement(pA.Provider,{value:n},a)}function gA(){let{matches:n}=oe.useContext(Do),a=n[n.length-1];return a?a.params:{}}function Om(n,{relative:a}={}){let{matches:f}=oe.useContext(Do),{pathname:p}=Ml(),_=JSON.stringify(wv(f));return oe.useMemo(()=>Sv(n,JSON.parse(_),p,a==="path"),[n,_,p,a])}function yA(n,a){return L2(n,a)}function L2(n,a,f,p){var ye;li(sp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:_,static:S}=oe.useContext(Tl),{matches:y}=oe.useContext(Do),u=y[y.length-1],C=u?u.params:{},R=u?u.pathname:"/",O=u?u.pathnameBase:"/",B=u&&u.route;{let pe=B&&B.path||"";z2(R,!B||pe.endsWith("*")||pe.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${R}" (under <Route path="${pe}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${pe}"> to <Route path="${pe==="/"?"*":`${pe}/*`}">.`)}let z=Ml(),F;if(a){let pe=typeof a=="string"?ip(a):a;li(O==="/"||((ye=pe.pathname)==null?void 0:ye.startsWith(O)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${O}" but pathname "${pe.pathname}" was given in the \`location\` prop.`),F=pe}else F=z;let G=F.pathname||"/",te=G;if(O!=="/"){let pe=O.replace(/^\//,"").split("/");te="/"+G.replace(/^\//,"").split("/").slice(pe.length).join("/")}let K=!S&&f&&f.matches&&f.matches.length>0?f.matches:A2(n,{pathname:te});Sl(B||K!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),Sl(K==null||K[K.length-1].route.element!==void 0||K[K.length-1].route.Component!==void 0||K[K.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let X=wA(K&&K.map(pe=>Object.assign({},pe,{params:Object.assign({},C,pe.params),pathname:gc([O,_.encodeLocation?_.encodeLocation(pe.pathname).pathname:pe.pathname]),pathnameBase:pe.pathnameBase==="/"?O:gc([O,_.encodeLocation?_.encodeLocation(pe.pathnameBase).pathname:pe.pathnameBase])})),y,f,p);return a&&X?oe.createElement(km.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},X):X}function _A(){let n=CA(),a=lA(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),f=n instanceof Error?n.stack:null,p="rgba(200,200,200, 0.5)",_={padding:"0.5rem",backgroundColor:p},S={padding:"2px 4px",backgroundColor:p},y=null;return console.error("Error handled by React Router default ErrorBoundary:",n),y=oe.createElement(oe.Fragment,null,oe.createElement("p",null," Hey developer "),oe.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",oe.createElement("code",{style:S},"ErrorBoundary")," or"," ",oe.createElement("code",{style:S},"errorElement")," prop on your route.")),oe.createElement(oe.Fragment,null,oe.createElement("h2",null,"Unexpected Application Error!"),oe.createElement("h3",{style:{fontStyle:"italic"}},a),f?oe.createElement("pre",{style:_},f):null,y)}var vA=oe.createElement(_A,null),xA=class extends oe.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,a){return a.location!==n.location||a.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:a.error,location:a.location,revalidation:n.revalidation||a.revalidation}}componentDidCatch(n,a){console.error("React Router caught the following error during render",n,a)}render(){return this.state.error!==void 0?oe.createElement(Do.Provider,{value:this.props.routeContext},oe.createElement(Tv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function bA({routeContext:n,match:a,children:f}){let p=oe.useContext(ap);return p&&p.static&&p.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(p.staticContext._deepestRenderedBoundaryId=a.route.id),oe.createElement(Do.Provider,{value:n},f)}function wA(n,a=[],f=null,p=null){if(n==null){if(!f)return null;if(f.errors)n=f.matches;else if(a.length===0&&!f.initialized&&f.matches.length>0)n=f.matches;else return null}let _=n,S=f==null?void 0:f.errors;if(S!=null){let C=_.findIndex(R=>R.route.id&&(S==null?void 0:S[R.route.id])!==void 0);li(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(S).join(",")}`),_=_.slice(0,Math.min(_.length,C+1))}let y=!1,u=-1;if(f)for(let C=0;C<_.length;C++){let R=_[C];if((R.route.HydrateFallback||R.route.hydrateFallbackElement)&&(u=C),R.route.id){let{loaderData:O,errors:B}=f,z=R.route.loader&&!O.hasOwnProperty(R.route.id)&&(!B||B[R.route.id]===void 0);if(R.route.lazy||z){y=!0,u>=0?_=_.slice(0,u+1):_=[_[0]];break}}}return _.reduceRight((C,R,O)=>{let B,z=!1,F=null,G=null;f&&(B=S&&R.route.id?S[R.route.id]:void 0,F=R.route.errorElement||vA,y&&(u<0&&O===0?(z2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),z=!0,G=null):u===O&&(z=!0,G=R.route.hydrateFallbackElement||null)));let te=a.concat(_.slice(0,O+1)),K=()=>{let X;return B?X=F:z?X=G:R.route.Component?X=oe.createElement(R.route.Component,null):R.route.element?X=R.route.element:X=C,oe.createElement(bA,{match:R,routeContext:{outlet:C,matches:te,isDataRoute:f!=null},children:X})};return f&&(R.route.ErrorBoundary||R.route.errorElement||O===0)?oe.createElement(xA,{location:f.location,revalidation:f.revalidation,component:F,error:B,children:K(),routeContext:{outlet:null,matches:te,isDataRoute:!0}}):K()},null)}function Mv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function SA(n){let a=oe.useContext(ap);return li(a,Mv(n)),a}function TA(n){let a=oe.useContext($_);return li(a,Mv(n)),a}function MA(n){let a=oe.useContext(Do);return li(a,Mv(n)),a}function Av(n){let a=MA(n),f=a.matches[a.matches.length-1];return li(f.route.id,`${n} can only be used on routes that contain a unique "id"`),f.route.id}function AA(){return Av("useRouteId")}function CA(){var p;let n=oe.useContext(Tv),a=TA("useRouteError"),f=Av("useRouteError");return n!==void 0?n:(p=a.errors)==null?void 0:p[f]}function EA(){let{router:n}=SA("useNavigate"),a=Av("useNavigate"),f=oe.useRef(!1);return D2(()=>{f.current=!0}),oe.useCallback(async(_,S={})=>{Sl(f.current,I2),f.current&&(typeof _=="number"?n.navigate(_):await n.navigate(_,{fromRouteId:a,...S}))},[n,a])}var Px={};function z2(n,a,f){!a&&!Px[n]&&(Px[n]=!0,Sl(!1,f))}oe.memo(PA);function PA({routes:n,future:a,state:f}){return L2(n,void 0,f,a)}function RA({to:n,replace:a,state:f,relative:p}){li(sp(),"<Navigate> may be used only in the context of a <Router> component.");let{static:_}=oe.useContext(Tl);Sl(!_,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:S}=oe.useContext(Do),{pathname:y}=Ml(),u=bc(),C=Sv(n,wv(S),y,p==="path"),R=JSON.stringify(C);return oe.useEffect(()=>{u(JSON.parse(R),{replace:a,state:f,relative:p})},[u,R,p,a,f]),null}function k2(n){return mA(n.context)}function os(n){li(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function IA({basename:n="/",children:a=null,location:f,navigationType:p="POP",navigator:_,static:S=!1}){li(!sp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=n.replace(/^\/*/,"/"),u=oe.useMemo(()=>({basename:y,navigator:_,static:S,future:{}}),[y,_,S]);typeof f=="string"&&(f=ip(f));let{pathname:C="/",search:R="",hash:O="",state:B=null,key:z="default"}=f,F=oe.useMemo(()=>{let G=yc(C,y);return G==null?null:{location:{pathname:G,search:R,hash:O,state:B,key:z},navigationType:p}},[y,C,R,O,B,z,p]);return Sl(F!=null,`<Router basename="${y}"> is not able to match the URL "${C}${R}${O}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:oe.createElement(Tl.Provider,{value:u},oe.createElement(km.Provider,{children:a,value:F}))}function DA({children:n,location:a}){return yA(G0(n),a)}function G0(n,a=[]){let f=[];return oe.Children.forEach(n,(p,_)=>{if(!oe.isValidElement(p))return;let S=[...a,_];if(p.type===oe.Fragment){f.push.apply(f,G0(p.props.children,S));return}li(p.type===os,`[${typeof p.type=="string"?p.type:p.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),li(!p.props.index||!p.props.children,"An index route cannot have child routes.");let y={id:p.props.id||S.join("-"),caseSensitive:p.props.caseSensitive,element:p.props.element,Component:p.props.Component,index:p.props.index,path:p.props.path,loader:p.props.loader,action:p.props.action,hydrateFallbackElement:p.props.hydrateFallbackElement,HydrateFallback:p.props.HydrateFallback,errorElement:p.props.errorElement,ErrorBoundary:p.props.ErrorBoundary,hasErrorBoundary:p.props.hasErrorBoundary===!0||p.props.ErrorBoundary!=null||p.props.errorElement!=null,shouldRevalidate:p.props.shouldRevalidate,handle:p.props.handle,lazy:p.props.lazy};p.props.children&&(y.children=G0(p.props.children,S)),f.push(y)}),f}var b_="get",w_="application/x-www-form-urlencoded";function Z_(n){return n!=null&&typeof n.tagName=="string"}function LA(n){return Z_(n)&&n.tagName.toLowerCase()==="button"}function zA(n){return Z_(n)&&n.tagName.toLowerCase()==="form"}function kA(n){return Z_(n)&&n.tagName.toLowerCase()==="input"}function OA(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function BA(n,a){return n.button===0&&(!a||a==="_self")&&!OA(n)}var Tg=null;function jA(){if(Tg===null)try{new FormData(document.createElement("form"),0),Tg=!1}catch{Tg=!0}return Tg}var NA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function A0(n){return n!=null&&!NA.has(n)?(Sl(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${w_}"`),null):n}function FA(n,a){let f,p,_,S,y;if(zA(n)){let u=n.getAttribute("action");p=u?yc(u,a):null,f=n.getAttribute("method")||b_,_=A0(n.getAttribute("enctype"))||w_,S=new FormData(n)}else if(LA(n)||kA(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let C=n.getAttribute("formaction")||u.getAttribute("action");if(p=C?yc(C,a):null,f=n.getAttribute("formmethod")||u.getAttribute("method")||b_,_=A0(n.getAttribute("formenctype"))||A0(u.getAttribute("enctype"))||w_,S=new FormData(u,n),!jA()){let{name:R,type:O,value:B}=n;if(O==="image"){let z=R?`${R}.`:"";S.append(`${z}x`,"0"),S.append(`${z}y`,"0")}else R&&S.append(R,B)}}else{if(Z_(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');f=b_,p=null,_=w_,y=n}return S&&_==="text/plain"&&(y=S,S=void 0),{action:p,method:f.toLowerCase(),encType:_,formData:S,body:y}}function Cv(n,a){if(n===!1||n===null||typeof n>"u")throw new Error(a)}async function UA(n,a){if(n.id in a)return a[n.id];try{let f=await import(n.module);return a[n.id]=f,f}catch(f){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(f),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function VA(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function $A(n,a,f){let p=await Promise.all(n.map(async _=>{let S=a.routes[_.route.id];if(S){let y=await UA(S,f);return y.links?y.links():[]}return[]}));return HA(p.flat(1).filter(VA).filter(_=>_.rel==="stylesheet"||_.rel==="preload").map(_=>_.rel==="stylesheet"?{..._,rel:"prefetch",as:"style"}:{..._,rel:"prefetch"}))}function Rx(n,a,f,p,_,S){let y=(C,R)=>f[R]?C.route.id!==f[R].route.id:!0,u=(C,R)=>{var O;return f[R].pathname!==C.pathname||((O=f[R].route.path)==null?void 0:O.endsWith("*"))&&f[R].params["*"]!==C.params["*"]};return S==="assets"?a.filter((C,R)=>y(C,R)||u(C,R)):S==="data"?a.filter((C,R)=>{var B;let O=p.routes[C.route.id];if(!O||!O.hasLoader)return!1;if(y(C,R)||u(C,R))return!0;if(C.route.shouldRevalidate){let z=C.route.shouldRevalidate({currentUrl:new URL(_.pathname+_.search+_.hash,window.origin),currentParams:((B=f[0])==null?void 0:B.params)||{},nextUrl:new URL(n,window.origin),nextParams:C.params,defaultShouldRevalidate:!0});if(typeof z=="boolean")return z}return!0}):[]}function ZA(n,a,{includeHydrateFallback:f}={}){return qA(n.map(p=>{let _=a.routes[p.route.id];if(!_)return[];let S=[_.module];return _.clientActionModule&&(S=S.concat(_.clientActionModule)),_.clientLoaderModule&&(S=S.concat(_.clientLoaderModule)),f&&_.hydrateFallbackModule&&(S=S.concat(_.hydrateFallbackModule)),_.imports&&(S=S.concat(_.imports)),S}).flat(1))}function qA(n){return[...new Set(n)]}function GA(n){let a={},f=Object.keys(n).sort();for(let p of f)a[p]=n[p];return a}function HA(n,a){let f=new Set;return new Set(a),n.reduce((p,_)=>{let S=JSON.stringify(GA(_));return f.has(S)||(f.add(S),p.push({key:S,link:_})),p},[])}var WA=new Set([100,101,204,205]);function KA(n,a){let f=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return f.pathname==="/"?f.pathname="_root.data":a&&yc(f.pathname,a)==="/"?f.pathname=`${a.replace(/\/$/,"")}/_root.data`:f.pathname=`${f.pathname.replace(/\/$/,"")}.data`,f}function O2(){let n=oe.useContext(ap);return Cv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function YA(){let n=oe.useContext($_);return Cv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ev=oe.createContext(void 0);Ev.displayName="FrameworkContext";function B2(){let n=oe.useContext(Ev);return Cv(n,"You must render this element inside a <HydratedRouter> element"),n}function XA(n,a){let f=oe.useContext(Ev),[p,_]=oe.useState(!1),[S,y]=oe.useState(!1),{onFocus:u,onBlur:C,onMouseEnter:R,onMouseLeave:O,onTouchStart:B}=a,z=oe.useRef(null);oe.useEffect(()=>{if(n==="render"&&y(!0),n==="viewport"){let te=X=>{X.forEach(ye=>{y(ye.isIntersecting)})},K=new IntersectionObserver(te,{threshold:.5});return z.current&&K.observe(z.current),()=>{K.disconnect()}}},[n]),oe.useEffect(()=>{if(p){let te=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(te)}}},[p]);let F=()=>{_(!0)},G=()=>{_(!1),y(!1)};return f?n!=="intent"?[S,z,{}]:[S,z,{onFocus:fm(u,F),onBlur:fm(C,G),onMouseEnter:fm(R,F),onMouseLeave:fm(O,G),onTouchStart:fm(B,F)}]:[!1,z,{}]}function fm(n,a){return f=>{n&&n(f),f.defaultPrevented||a(f)}}function QA({page:n,...a}){let{router:f}=O2(),p=oe.useMemo(()=>A2(f.routes,n,f.basename),[f.routes,n,f.basename]);return p?oe.createElement(eC,{page:n,matches:p,...a}):null}function JA(n){let{manifest:a,routeModules:f}=B2(),[p,_]=oe.useState([]);return oe.useEffect(()=>{let S=!1;return $A(n,a,f).then(y=>{S||_(y)}),()=>{S=!0}},[n,a,f]),p}function eC({page:n,matches:a,...f}){let p=Ml(),{manifest:_,routeModules:S}=B2(),{basename:y}=O2(),{loaderData:u,matches:C}=YA(),R=oe.useMemo(()=>Rx(n,a,C,_,p,"data"),[n,a,C,_,p]),O=oe.useMemo(()=>Rx(n,a,C,_,p,"assets"),[n,a,C,_,p]),B=oe.useMemo(()=>{if(n===p.pathname+p.search+p.hash)return[];let G=new Set,te=!1;if(a.forEach(X=>{var pe;let ye=_.routes[X.route.id];!ye||!ye.hasLoader||(!R.some(xe=>xe.route.id===X.route.id)&&X.route.id in u&&((pe=S[X.route.id])!=null&&pe.shouldRevalidate)||ye.hasClientLoader?te=!0:G.add(X.route.id))}),G.size===0)return[];let K=KA(n,y);return te&&G.size>0&&K.searchParams.set("_routes",a.filter(X=>G.has(X.route.id)).map(X=>X.route.id).join(",")),[K.pathname+K.search]},[y,u,p,_,R,a,n,S]),z=oe.useMemo(()=>ZA(O,_),[O,_]),F=JA(O);return oe.createElement(oe.Fragment,null,B.map(G=>oe.createElement("link",{key:G,rel:"prefetch",as:"fetch",href:G,...f})),z.map(G=>oe.createElement("link",{key:G,rel:"modulepreload",href:G,...f})),F.map(({key:G,link:te})=>oe.createElement("link",{key:G,...te})))}function tC(...n){return a=>{n.forEach(f=>{typeof f=="function"?f(a):f!=null&&(f.current=a)})}}var j2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{j2&&(window.__reactRouterVersion="7.5.2")}catch{}function rC({basename:n,children:a,window:f}){let p=oe.useRef();p.current==null&&(p.current=FM({window:f,v5Compat:!0}));let _=p.current,[S,y]=oe.useState({action:_.action,location:_.location}),u=oe.useCallback(C=>{oe.startTransition(()=>y(C))},[y]);return oe.useLayoutEffect(()=>_.listen(u),[_,u]),oe.createElement(IA,{basename:n,children:a,location:S.location,navigationType:S.action,navigator:_})}var N2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,F2=oe.forwardRef(function({onClick:a,discover:f="render",prefetch:p="none",relative:_,reloadDocument:S,replace:y,state:u,target:C,to:R,preventScrollReset:O,viewTransition:B,...z},F){let{basename:G}=oe.useContext(Tl),te=typeof R=="string"&&N2.test(R),K,X=!1;if(typeof R=="string"&&te&&(K=R,j2))try{let Ye=new URL(window.location.href),ht=R.startsWith("//")?new URL(Ye.protocol+R):new URL(R),Lt=yc(ht.pathname,G);ht.origin===Ye.origin&&Lt!=null?R=Lt+ht.search+ht.hash:X=!0}catch{Sl(!1,`<Link to="${R}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ye=fA(R,{relative:_}),[pe,xe,Se]=XA(p,z),ke=aC(R,{replace:y,state:u,target:C,preventScrollReset:O,relative:_,viewTransition:B});function it(Ye){a&&a(Ye),Ye.defaultPrevented||ke(Ye)}let Ke=oe.createElement("a",{...z,...Se,href:K||ye,onClick:X||S?a:it,ref:tC(F,xe),target:C,"data-discover":!te&&f==="render"?"true":void 0});return pe&&!te?oe.createElement(oe.Fragment,null,Ke,oe.createElement(QA,{page:ye})):Ke});F2.displayName="Link";var Es=oe.forwardRef(function({"aria-current":a="page",caseSensitive:f=!1,className:p="",end:_=!1,style:S,to:y,viewTransition:u,children:C,...R},O){let B=Om(y,{relative:R.relative}),z=Ml(),F=oe.useContext($_),{navigator:G,basename:te}=oe.useContext(Tl),K=F!=null&&cC(B)&&u===!0,X=G.encodeLocation?G.encodeLocation(B).pathname:B.pathname,ye=z.pathname,pe=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;f||(ye=ye.toLowerCase(),pe=pe?pe.toLowerCase():null,X=X.toLowerCase()),pe&&te&&(pe=yc(pe,te)||pe);const xe=X!=="/"&&X.endsWith("/")?X.length-1:X.length;let Se=ye===X||!_&&ye.startsWith(X)&&ye.charAt(xe)==="/",ke=pe!=null&&(pe===X||!_&&pe.startsWith(X)&&pe.charAt(X.length)==="/"),it={isActive:Se,isPending:ke,isTransitioning:K},Ke=Se?a:void 0,Ye;typeof p=="function"?Ye=p(it):Ye=[p,Se?"active":null,ke?"pending":null,K?"transitioning":null].filter(Boolean).join(" ");let ht=typeof S=="function"?S(it):S;return oe.createElement(F2,{...R,"aria-current":Ke,className:Ye,ref:O,style:ht,to:y,viewTransition:u},typeof C=="function"?C(it):C)});Es.displayName="NavLink";var nC=oe.forwardRef(({discover:n="render",fetcherKey:a,navigate:f,reloadDocument:p,replace:_,state:S,method:y=b_,action:u,onSubmit:C,relative:R,preventScrollReset:O,viewTransition:B,...z},F)=>{let G=lC(),te=uC(u,{relative:R}),K=y.toLowerCase()==="get"?"get":"post",X=typeof u=="string"&&N2.test(u),ye=pe=>{if(C&&C(pe),pe.defaultPrevented)return;pe.preventDefault();let xe=pe.nativeEvent.submitter,Se=(xe==null?void 0:xe.getAttribute("formmethod"))||y;G(xe||pe.currentTarget,{fetcherKey:a,method:Se,navigate:f,replace:_,state:S,relative:R,preventScrollReset:O,viewTransition:B})};return oe.createElement("form",{ref:F,method:K,action:te,onSubmit:p?C:ye,...z,"data-discover":!X&&n==="render"?"true":void 0})});nC.displayName="Form";function iC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function U2(n){let a=oe.useContext(ap);return li(a,iC(n)),a}function aC(n,{target:a,replace:f,state:p,preventScrollReset:_,relative:S,viewTransition:y}={}){let u=bc(),C=Ml(),R=Om(n,{relative:S});return oe.useCallback(O=>{if(BA(O,a)){O.preventDefault();let B=f!==void 0?f:Mm(C)===Mm(R);u(n,{replace:B,state:p,preventScrollReset:_,relative:S,viewTransition:y})}},[C,u,R,f,p,a,n,_,S,y])}var sC=0,oC=()=>`__${String(++sC)}__`;function lC(){let{router:n}=U2("useSubmit"),{basename:a}=oe.useContext(Tl),f=AA();return oe.useCallback(async(p,_={})=>{let{action:S,method:y,encType:u,formData:C,body:R}=FA(p,a);if(_.navigate===!1){let O=_.fetcherKey||oC();await n.fetch(O,f,_.action||S,{preventScrollReset:_.preventScrollReset,formData:C,body:R,formMethod:_.method||y,formEncType:_.encType||u,flushSync:_.flushSync})}else await n.navigate(_.action||S,{preventScrollReset:_.preventScrollReset,formData:C,body:R,formMethod:_.method||y,formEncType:_.encType||u,replace:_.replace,state:_.state,fromRouteId:f,flushSync:_.flushSync,viewTransition:_.viewTransition})},[n,a,f])}function uC(n,{relative:a}={}){let{basename:f}=oe.useContext(Tl),p=oe.useContext(Do);li(p,"useFormAction must be used inside a RouteContext");let[_]=p.matches.slice(-1),S={...Om(n||".",{relative:a})},y=Ml();if(n==null){S.search=y.search;let u=new URLSearchParams(S.search),C=u.getAll("index");if(C.some(O=>O==="")){u.delete("index"),C.filter(B=>B).forEach(B=>u.append("index",B));let O=u.toString();S.search=O?`?${O}`:""}}return(!n||n===".")&&_.route.index&&(S.search=S.search?S.search.replace(/^\?/,"?index&"):"?index"),f!=="/"&&(S.pathname=S.pathname==="/"?f:gc([f,S.pathname])),Mm(S)}function cC(n,a={}){let f=oe.useContext(R2);li(f!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:p}=U2("useViewTransitionState"),_=Om(n,{relative:a.relative});if(!f.isTransitioning)return!1;let S=yc(f.currentLocation.pathname,p)||f.currentLocation.pathname,y=yc(f.nextLocation.pathname,p)||f.nextLocation.pathname;return I_(_.pathname,y)!=null||I_(_.pathname,S)!=null}new TextEncoder;[...WA];var q_=M2();const hC="/assets/tour-1-cover-BQ_1IDva.jpg";function fC(){return J.jsxs("section",{className:"flex flex-col items-center justify-center space-y-7 lg:space-y-12",children:[J.jsx("div",{className:"my-5 lg:mt-10",children:J.jsx("h1",{className:"natours-gradient-text font-italic my-5 text-center text-3xl font-bold lg:text-4xl",children:"Discover Your next adventure"})}),J.jsxs("div",{className:"relative mx-4 mt-2 overflow-hidden rounded bg-white p-3 shadow-md md:w-3/4 lg:rounded-lg lg:p-4",children:[J.jsxs("div",{className:"img-clip relative lg:rounded",children:[J.jsx("div",{className:"bg-natours/40 absolute h-full w-full"}),J.jsx("img",{src:hC,alt:"scenic image",className:"lg:shadow"})]}),J.jsx("p",{className:"md:bottom:12 absolute right-5 bottom-5 md:right-7 md:bottom-14 lg:right-16 lg:bottom-16 lg:text-4xl xl:right-15 xl:bottom-20 xl:text-5xl",children:J.jsx("span",{className:"natours-gradient-t px-3 py-2 text-3xl font-light text-white shadow-md",children:"The Forest Hiker"})})]}),J.jsx("div",{className:"my-4 w-3/4",children:J.jsx("p",{className:"text-center text-xl text-stone-500 italic lg:text-2xl",children:'"Book tours with trusted guides worldwide"'})}),J.jsx("div",{className:"flex w-full items-center justify-evenly lg:w-1/2",children:J.jsx(Es,{to:"/tours",className:"btn-primary my-13 rounded-full px-4 py-3 text-xl text-white lg:px-8 lg:py-6",children:"Explore Tours"})})]})}function V2(n,a){return function(){return n.apply(a,arguments)}}const{toString:dC}=Object.prototype,{getPrototypeOf:Pv}=Object,G_=(n=>a=>{const f=dC.call(a);return n[f]||(n[f]=f.slice(8,-1).toLowerCase())})(Object.create(null)),Al=n=>(n=n.toLowerCase(),a=>G_(a)===n),H_=n=>a=>typeof a===n,{isArray:op}=Array,Am=H_("undefined");function pC(n){return n!==null&&!Am(n)&&n.constructor!==null&&!Am(n.constructor)&&Qs(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const $2=Al("ArrayBuffer");function mC(n){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(n):a=n&&n.buffer&&$2(n.buffer),a}const gC=H_("string"),Qs=H_("function"),Z2=H_("number"),W_=n=>n!==null&&typeof n=="object",yC=n=>n===!0||n===!1,S_=n=>{if(G_(n)!=="object")return!1;const a=Pv(n);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},_C=Al("Date"),vC=Al("File"),xC=Al("Blob"),bC=Al("FileList"),wC=n=>W_(n)&&Qs(n.pipe),SC=n=>{let a;return n&&(typeof FormData=="function"&&n instanceof FormData||Qs(n.append)&&((a=G_(n))==="formdata"||a==="object"&&Qs(n.toString)&&n.toString()==="[object FormData]"))},TC=Al("URLSearchParams"),[MC,AC,CC,EC]=["ReadableStream","Request","Response","Headers"].map(Al),PC=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bm(n,a,{allOwnKeys:f=!1}={}){if(n===null||typeof n>"u")return;let p,_;if(typeof n!="object"&&(n=[n]),op(n))for(p=0,_=n.length;p<_;p++)a.call(null,n[p],p,n);else{const S=f?Object.getOwnPropertyNames(n):Object.keys(n),y=S.length;let u;for(p=0;p<y;p++)u=S[p],a.call(null,n[u],u,n)}}function q2(n,a){a=a.toLowerCase();const f=Object.keys(n);let p=f.length,_;for(;p-- >0;)if(_=f[p],a===_.toLowerCase())return _;return null}const jf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,G2=n=>!Am(n)&&n!==jf;function H0(){const{caseless:n}=G2(this)&&this||{},a={},f=(p,_)=>{const S=n&&q2(a,_)||_;S_(a[S])&&S_(p)?a[S]=H0(a[S],p):S_(p)?a[S]=H0({},p):op(p)?a[S]=p.slice():a[S]=p};for(let p=0,_=arguments.length;p<_;p++)arguments[p]&&Bm(arguments[p],f);return a}const RC=(n,a,f,{allOwnKeys:p}={})=>(Bm(a,(_,S)=>{f&&Qs(_)?n[S]=V2(_,f):n[S]=_},{allOwnKeys:p}),n),IC=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),DC=(n,a,f,p)=>{n.prototype=Object.create(a.prototype,p),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:a.prototype}),f&&Object.assign(n.prototype,f)},LC=(n,a,f,p)=>{let _,S,y;const u={};if(a=a||{},n==null)return a;do{for(_=Object.getOwnPropertyNames(n),S=_.length;S-- >0;)y=_[S],(!p||p(y,n,a))&&!u[y]&&(a[y]=n[y],u[y]=!0);n=f!==!1&&Pv(n)}while(n&&(!f||f(n,a))&&n!==Object.prototype);return a},zC=(n,a,f)=>{n=String(n),(f===void 0||f>n.length)&&(f=n.length),f-=a.length;const p=n.indexOf(a,f);return p!==-1&&p===f},kC=n=>{if(!n)return null;if(op(n))return n;let a=n.length;if(!Z2(a))return null;const f=new Array(a);for(;a-- >0;)f[a]=n[a];return f},OC=(n=>a=>n&&a instanceof n)(typeof Uint8Array<"u"&&Pv(Uint8Array)),BC=(n,a)=>{const p=(n&&n[Symbol.iterator]).call(n);let _;for(;(_=p.next())&&!_.done;){const S=_.value;a.call(n,S[0],S[1])}},jC=(n,a)=>{let f;const p=[];for(;(f=n.exec(a))!==null;)p.push(f);return p},NC=Al("HTMLFormElement"),FC=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(f,p,_){return p.toUpperCase()+_}),Ix=(({hasOwnProperty:n})=>(a,f)=>n.call(a,f))(Object.prototype),UC=Al("RegExp"),H2=(n,a)=>{const f=Object.getOwnPropertyDescriptors(n),p={};Bm(f,(_,S)=>{let y;(y=a(_,S,n))!==!1&&(p[S]=y||_)}),Object.defineProperties(n,p)},VC=n=>{H2(n,(a,f)=>{if(Qs(n)&&["arguments","caller","callee"].indexOf(f)!==-1)return!1;const p=n[f];if(Qs(p)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+f+"'")})}})},$C=(n,a)=>{const f={},p=_=>{_.forEach(S=>{f[S]=!0})};return op(n)?p(n):p(String(n).split(a)),f},ZC=()=>{},qC=(n,a)=>n!=null&&Number.isFinite(n=+n)?n:a;function GC(n){return!!(n&&Qs(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const HC=n=>{const a=new Array(10),f=(p,_)=>{if(W_(p)){if(a.indexOf(p)>=0)return;if(!("toJSON"in p)){a[_]=p;const S=op(p)?[]:{};return Bm(p,(y,u)=>{const C=f(y,_+1);!Am(C)&&(S[u]=C)}),a[_]=void 0,S}}return p};return f(n,0)},WC=Al("AsyncFunction"),KC=n=>n&&(W_(n)||Qs(n))&&Qs(n.then)&&Qs(n.catch),W2=((n,a)=>n?setImmediate:a?((f,p)=>(jf.addEventListener("message",({source:_,data:S})=>{_===jf&&S===f&&p.length&&p.shift()()},!1),_=>{p.push(_),jf.postMessage(f,"*")}))(`axios@${Math.random()}`,[]):f=>setTimeout(f))(typeof setImmediate=="function",Qs(jf.postMessage)),YC=typeof queueMicrotask<"u"?queueMicrotask.bind(jf):typeof process<"u"&&process.nextTick||W2,ct={isArray:op,isArrayBuffer:$2,isBuffer:pC,isFormData:SC,isArrayBufferView:mC,isString:gC,isNumber:Z2,isBoolean:yC,isObject:W_,isPlainObject:S_,isReadableStream:MC,isRequest:AC,isResponse:CC,isHeaders:EC,isUndefined:Am,isDate:_C,isFile:vC,isBlob:xC,isRegExp:UC,isFunction:Qs,isStream:wC,isURLSearchParams:TC,isTypedArray:OC,isFileList:bC,forEach:Bm,merge:H0,extend:RC,trim:PC,stripBOM:IC,inherits:DC,toFlatObject:LC,kindOf:G_,kindOfTest:Al,endsWith:zC,toArray:kC,forEachEntry:BC,matchAll:jC,isHTMLForm:NC,hasOwnProperty:Ix,hasOwnProp:Ix,reduceDescriptors:H2,freezeMethods:VC,toObjectSet:$C,toCamelCase:FC,noop:ZC,toFiniteNumber:qC,findKey:q2,global:jf,isContextDefined:G2,isSpecCompliantForm:GC,toJSONObject:HC,isAsyncFn:WC,isThenable:KC,setImmediate:W2,asap:YC};function kr(n,a,f,p,_){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",a&&(this.code=a),f&&(this.config=f),p&&(this.request=p),_&&(this.response=_,this.status=_.status?_.status:null)}ct.inherits(kr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ct.toJSONObject(this.config),code:this.code,status:this.status}}});const K2=kr.prototype,Y2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Y2[n]={value:n}});Object.defineProperties(kr,Y2);Object.defineProperty(K2,"isAxiosError",{value:!0});kr.from=(n,a,f,p,_,S)=>{const y=Object.create(K2);return ct.toFlatObject(n,y,function(C){return C!==Error.prototype},u=>u!=="isAxiosError"),kr.call(y,n.message,a,f,p,_),y.cause=n,y.name=n.name,S&&Object.assign(y,S),y};const XC=null;function W0(n){return ct.isPlainObject(n)||ct.isArray(n)}function X2(n){return ct.endsWith(n,"[]")?n.slice(0,-2):n}function Dx(n,a,f){return n?n.concat(a).map(function(_,S){return _=X2(_),!f&&S?"["+_+"]":_}).join(f?".":""):a}function QC(n){return ct.isArray(n)&&!n.some(W0)}const JC=ct.toFlatObject(ct,{},null,function(a){return/^is[A-Z]/.test(a)});function K_(n,a,f){if(!ct.isObject(n))throw new TypeError("target must be an object");a=a||new FormData,f=ct.toFlatObject(f,{metaTokens:!0,dots:!1,indexes:!1},!1,function(te,K){return!ct.isUndefined(K[te])});const p=f.metaTokens,_=f.visitor||O,S=f.dots,y=f.indexes,C=(f.Blob||typeof Blob<"u"&&Blob)&&ct.isSpecCompliantForm(a);if(!ct.isFunction(_))throw new TypeError("visitor must be a function");function R(G){if(G===null)return"";if(ct.isDate(G))return G.toISOString();if(!C&&ct.isBlob(G))throw new kr("Blob is not supported. Use a Buffer instead.");return ct.isArrayBuffer(G)||ct.isTypedArray(G)?C&&typeof Blob=="function"?new Blob([G]):Buffer.from(G):G}function O(G,te,K){let X=G;if(G&&!K&&typeof G=="object"){if(ct.endsWith(te,"{}"))te=p?te:te.slice(0,-2),G=JSON.stringify(G);else if(ct.isArray(G)&&QC(G)||(ct.isFileList(G)||ct.endsWith(te,"[]"))&&(X=ct.toArray(G)))return te=X2(te),X.forEach(function(pe,xe){!(ct.isUndefined(pe)||pe===null)&&a.append(y===!0?Dx([te],xe,S):y===null?te:te+"[]",R(pe))}),!1}return W0(G)?!0:(a.append(Dx(K,te,S),R(G)),!1)}const B=[],z=Object.assign(JC,{defaultVisitor:O,convertValue:R,isVisitable:W0});function F(G,te){if(!ct.isUndefined(G)){if(B.indexOf(G)!==-1)throw Error("Circular reference detected in "+te.join("."));B.push(G),ct.forEach(G,function(X,ye){(!(ct.isUndefined(X)||X===null)&&_.call(a,X,ct.isString(ye)?ye.trim():ye,te,z))===!0&&F(X,te?te.concat(ye):[ye])}),B.pop()}}if(!ct.isObject(n))throw new TypeError("data must be an object");return F(n),a}function Lx(n){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(p){return a[p]})}function Rv(n,a){this._pairs=[],n&&K_(n,this,a)}const Q2=Rv.prototype;Q2.append=function(a,f){this._pairs.push([a,f])};Q2.toString=function(a){const f=a?function(p){return a.call(this,p,Lx)}:Lx;return this._pairs.map(function(_){return f(_[0])+"="+f(_[1])},"").join("&")};function eE(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function J2(n,a,f){if(!a)return n;const p=f&&f.encode||eE;ct.isFunction(f)&&(f={serialize:f});const _=f&&f.serialize;let S;if(_?S=_(a,f):S=ct.isURLSearchParams(a)?a.toString():new Rv(a,f).toString(p),S){const y=n.indexOf("#");y!==-1&&(n=n.slice(0,y)),n+=(n.indexOf("?")===-1?"?":"&")+S}return n}class zx{constructor(){this.handlers=[]}use(a,f,p){return this.handlers.push({fulfilled:a,rejected:f,synchronous:p?p.synchronous:!1,runWhen:p?p.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){ct.forEach(this.handlers,function(p){p!==null&&a(p)})}}const eS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},tE=typeof URLSearchParams<"u"?URLSearchParams:Rv,rE=typeof FormData<"u"?FormData:null,nE=typeof Blob<"u"?Blob:null,iE={isBrowser:!0,classes:{URLSearchParams:tE,FormData:rE,Blob:nE},protocols:["http","https","file","blob","url","data"]},Iv=typeof window<"u"&&typeof document<"u",K0=typeof navigator=="object"&&navigator||void 0,aE=Iv&&(!K0||["ReactNative","NativeScript","NS"].indexOf(K0.product)<0),sE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",oE=Iv&&window.location.href||"http://localhost",lE=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Iv,hasStandardBrowserEnv:aE,hasStandardBrowserWebWorkerEnv:sE,navigator:K0,origin:oE},Symbol.toStringTag,{value:"Module"})),Fa={...lE,...iE};function uE(n,a){return K_(n,new Fa.classes.URLSearchParams,Object.assign({visitor:function(f,p,_,S){return Fa.isNode&&ct.isBuffer(f)?(this.append(p,f.toString("base64")),!1):S.defaultVisitor.apply(this,arguments)}},a))}function cE(n){return ct.matchAll(/\w+|\[(\w*)]/g,n).map(a=>a[0]==="[]"?"":a[1]||a[0])}function hE(n){const a={},f=Object.keys(n);let p;const _=f.length;let S;for(p=0;p<_;p++)S=f[p],a[S]=n[S];return a}function tS(n){function a(f,p,_,S){let y=f[S++];if(y==="__proto__")return!0;const u=Number.isFinite(+y),C=S>=f.length;return y=!y&&ct.isArray(_)?_.length:y,C?(ct.hasOwnProp(_,y)?_[y]=[_[y],p]:_[y]=p,!u):((!_[y]||!ct.isObject(_[y]))&&(_[y]=[]),a(f,p,_[y],S)&&ct.isArray(_[y])&&(_[y]=hE(_[y])),!u)}if(ct.isFormData(n)&&ct.isFunction(n.entries)){const f={};return ct.forEachEntry(n,(p,_)=>{a(cE(p),_,f,0)}),f}return null}function fE(n,a,f){if(ct.isString(n))try{return(a||JSON.parse)(n),ct.trim(n)}catch(p){if(p.name!=="SyntaxError")throw p}return(f||JSON.stringify)(n)}const jm={transitional:eS,adapter:["xhr","http","fetch"],transformRequest:[function(a,f){const p=f.getContentType()||"",_=p.indexOf("application/json")>-1,S=ct.isObject(a);if(S&&ct.isHTMLForm(a)&&(a=new FormData(a)),ct.isFormData(a))return _?JSON.stringify(tS(a)):a;if(ct.isArrayBuffer(a)||ct.isBuffer(a)||ct.isStream(a)||ct.isFile(a)||ct.isBlob(a)||ct.isReadableStream(a))return a;if(ct.isArrayBufferView(a))return a.buffer;if(ct.isURLSearchParams(a))return f.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let u;if(S){if(p.indexOf("application/x-www-form-urlencoded")>-1)return uE(a,this.formSerializer).toString();if((u=ct.isFileList(a))||p.indexOf("multipart/form-data")>-1){const C=this.env&&this.env.FormData;return K_(u?{"files[]":a}:a,C&&new C,this.formSerializer)}}return S||_?(f.setContentType("application/json",!1),fE(a)):a}],transformResponse:[function(a){const f=this.transitional||jm.transitional,p=f&&f.forcedJSONParsing,_=this.responseType==="json";if(ct.isResponse(a)||ct.isReadableStream(a))return a;if(a&&ct.isString(a)&&(p&&!this.responseType||_)){const y=!(f&&f.silentJSONParsing)&&_;try{return JSON.parse(a)}catch(u){if(y)throw u.name==="SyntaxError"?kr.from(u,kr.ERR_BAD_RESPONSE,this,null,this.response):u}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Fa.classes.FormData,Blob:Fa.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ct.forEach(["delete","get","head","post","put","patch"],n=>{jm.headers[n]={}});const dE=ct.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),pE=n=>{const a={};let f,p,_;return n&&n.split(`
`).forEach(function(y){_=y.indexOf(":"),f=y.substring(0,_).trim().toLowerCase(),p=y.substring(_+1).trim(),!(!f||a[f]&&dE[f])&&(f==="set-cookie"?a[f]?a[f].push(p):a[f]=[p]:a[f]=a[f]?a[f]+", "+p:p)}),a},kx=Symbol("internals");function dm(n){return n&&String(n).trim().toLowerCase()}function T_(n){return n===!1||n==null?n:ct.isArray(n)?n.map(T_):String(n)}function mE(n){const a=Object.create(null),f=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let p;for(;p=f.exec(n);)a[p[1]]=p[2];return a}const gE=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function C0(n,a,f,p,_){if(ct.isFunction(p))return p.call(this,a,f);if(_&&(a=f),!!ct.isString(a)){if(ct.isString(p))return a.indexOf(p)!==-1;if(ct.isRegExp(p))return p.test(a)}}function yE(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,f,p)=>f.toUpperCase()+p)}function _E(n,a){const f=ct.toCamelCase(" "+a);["get","set","has"].forEach(p=>{Object.defineProperty(n,p+f,{value:function(_,S,y){return this[p].call(this,a,_,S,y)},configurable:!0})})}let Ps=class{constructor(a){a&&this.set(a)}set(a,f,p){const _=this;function S(u,C,R){const O=dm(C);if(!O)throw new Error("header name must be a non-empty string");const B=ct.findKey(_,O);(!B||_[B]===void 0||R===!0||R===void 0&&_[B]!==!1)&&(_[B||C]=T_(u))}const y=(u,C)=>ct.forEach(u,(R,O)=>S(R,O,C));if(ct.isPlainObject(a)||a instanceof this.constructor)y(a,f);else if(ct.isString(a)&&(a=a.trim())&&!gE(a))y(pE(a),f);else if(ct.isHeaders(a))for(const[u,C]of a.entries())S(C,u,p);else a!=null&&S(f,a,p);return this}get(a,f){if(a=dm(a),a){const p=ct.findKey(this,a);if(p){const _=this[p];if(!f)return _;if(f===!0)return mE(_);if(ct.isFunction(f))return f.call(this,_,p);if(ct.isRegExp(f))return f.exec(_);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,f){if(a=dm(a),a){const p=ct.findKey(this,a);return!!(p&&this[p]!==void 0&&(!f||C0(this,this[p],p,f)))}return!1}delete(a,f){const p=this;let _=!1;function S(y){if(y=dm(y),y){const u=ct.findKey(p,y);u&&(!f||C0(p,p[u],u,f))&&(delete p[u],_=!0)}}return ct.isArray(a)?a.forEach(S):S(a),_}clear(a){const f=Object.keys(this);let p=f.length,_=!1;for(;p--;){const S=f[p];(!a||C0(this,this[S],S,a,!0))&&(delete this[S],_=!0)}return _}normalize(a){const f=this,p={};return ct.forEach(this,(_,S)=>{const y=ct.findKey(p,S);if(y){f[y]=T_(_),delete f[S];return}const u=a?yE(S):String(S).trim();u!==S&&delete f[S],f[u]=T_(_),p[u]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const f=Object.create(null);return ct.forEach(this,(p,_)=>{p!=null&&p!==!1&&(f[_]=a&&ct.isArray(p)?p.join(", "):p)}),f}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,f])=>a+": "+f).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...f){const p=new this(a);return f.forEach(_=>p.set(_)),p}static accessor(a){const p=(this[kx]=this[kx]={accessors:{}}).accessors,_=this.prototype;function S(y){const u=dm(y);p[u]||(_E(_,y),p[u]=!0)}return ct.isArray(a)?a.forEach(S):S(a),this}};Ps.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ct.reduceDescriptors(Ps.prototype,({value:n},a)=>{let f=a[0].toUpperCase()+a.slice(1);return{get:()=>n,set(p){this[f]=p}}});ct.freezeMethods(Ps);function E0(n,a){const f=this||jm,p=a||f,_=Ps.from(p.headers);let S=p.data;return ct.forEach(n,function(u){S=u.call(f,S,_.normalize(),a?a.status:void 0)}),_.normalize(),S}function rS(n){return!!(n&&n.__CANCEL__)}function lp(n,a,f){kr.call(this,n??"canceled",kr.ERR_CANCELED,a,f),this.name="CanceledError"}ct.inherits(lp,kr,{__CANCEL__:!0});function nS(n,a,f){const p=f.config.validateStatus;!f.status||!p||p(f.status)?n(f):a(new kr("Request failed with status code "+f.status,[kr.ERR_BAD_REQUEST,kr.ERR_BAD_RESPONSE][Math.floor(f.status/100)-4],f.config,f.request,f))}function vE(n){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return a&&a[1]||""}function xE(n,a){n=n||10;const f=new Array(n),p=new Array(n);let _=0,S=0,y;return a=a!==void 0?a:1e3,function(C){const R=Date.now(),O=p[S];y||(y=R),f[_]=C,p[_]=R;let B=S,z=0;for(;B!==_;)z+=f[B++],B=B%n;if(_=(_+1)%n,_===S&&(S=(S+1)%n),R-y<a)return;const F=O&&R-O;return F?Math.round(z*1e3/F):void 0}}function bE(n,a){let f=0,p=1e3/a,_,S;const y=(R,O=Date.now())=>{f=O,_=null,S&&(clearTimeout(S),S=null),n.apply(null,R)};return[(...R)=>{const O=Date.now(),B=O-f;B>=p?y(R,O):(_=R,S||(S=setTimeout(()=>{S=null,y(_)},p-B)))},()=>_&&y(_)]}const D_=(n,a,f=3)=>{let p=0;const _=xE(50,250);return bE(S=>{const y=S.loaded,u=S.lengthComputable?S.total:void 0,C=y-p,R=_(C),O=y<=u;p=y;const B={loaded:y,total:u,progress:u?y/u:void 0,bytes:C,rate:R||void 0,estimated:R&&u&&O?(u-y)/R:void 0,event:S,lengthComputable:u!=null,[a?"download":"upload"]:!0};n(B)},f)},Ox=(n,a)=>{const f=n!=null;return[p=>a[0]({lengthComputable:f,total:n,loaded:p}),a[1]]},Bx=n=>(...a)=>ct.asap(()=>n(...a)),wE=Fa.hasStandardBrowserEnv?((n,a)=>f=>(f=new URL(f,Fa.origin),n.protocol===f.protocol&&n.host===f.host&&(a||n.port===f.port)))(new URL(Fa.origin),Fa.navigator&&/(msie|trident)/i.test(Fa.navigator.userAgent)):()=>!0,SE=Fa.hasStandardBrowserEnv?{write(n,a,f,p,_,S){const y=[n+"="+encodeURIComponent(a)];ct.isNumber(f)&&y.push("expires="+new Date(f).toGMTString()),ct.isString(p)&&y.push("path="+p),ct.isString(_)&&y.push("domain="+_),S===!0&&y.push("secure"),document.cookie=y.join("; ")},read(n){const a=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function TE(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function ME(n,a){return a?n.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):n}function iS(n,a,f){let p=!TE(a);return n&&(p||f==!1)?ME(n,a):a}const jx=n=>n instanceof Ps?{...n}:n;function qf(n,a){a=a||{};const f={};function p(R,O,B,z){return ct.isPlainObject(R)&&ct.isPlainObject(O)?ct.merge.call({caseless:z},R,O):ct.isPlainObject(O)?ct.merge({},O):ct.isArray(O)?O.slice():O}function _(R,O,B,z){if(ct.isUndefined(O)){if(!ct.isUndefined(R))return p(void 0,R,B,z)}else return p(R,O,B,z)}function S(R,O){if(!ct.isUndefined(O))return p(void 0,O)}function y(R,O){if(ct.isUndefined(O)){if(!ct.isUndefined(R))return p(void 0,R)}else return p(void 0,O)}function u(R,O,B){if(B in a)return p(R,O);if(B in n)return p(void 0,R)}const C={url:S,method:S,data:S,baseURL:y,transformRequest:y,transformResponse:y,paramsSerializer:y,timeout:y,timeoutMessage:y,withCredentials:y,withXSRFToken:y,adapter:y,responseType:y,xsrfCookieName:y,xsrfHeaderName:y,onUploadProgress:y,onDownloadProgress:y,decompress:y,maxContentLength:y,maxBodyLength:y,beforeRedirect:y,transport:y,httpAgent:y,httpsAgent:y,cancelToken:y,socketPath:y,responseEncoding:y,validateStatus:u,headers:(R,O,B)=>_(jx(R),jx(O),B,!0)};return ct.forEach(Object.keys(Object.assign({},n,a)),function(O){const B=C[O]||_,z=B(n[O],a[O],O);ct.isUndefined(z)&&B!==u||(f[O]=z)}),f}const aS=n=>{const a=qf({},n);let{data:f,withXSRFToken:p,xsrfHeaderName:_,xsrfCookieName:S,headers:y,auth:u}=a;a.headers=y=Ps.from(y),a.url=J2(iS(a.baseURL,a.url,a.allowAbsoluteUrls),n.params,n.paramsSerializer),u&&y.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let C;if(ct.isFormData(f)){if(Fa.hasStandardBrowserEnv||Fa.hasStandardBrowserWebWorkerEnv)y.setContentType(void 0);else if((C=y.getContentType())!==!1){const[R,...O]=C?C.split(";").map(B=>B.trim()).filter(Boolean):[];y.setContentType([R||"multipart/form-data",...O].join("; "))}}if(Fa.hasStandardBrowserEnv&&(p&&ct.isFunction(p)&&(p=p(a)),p||p!==!1&&wE(a.url))){const R=_&&S&&SE.read(S);R&&y.set(_,R)}return a},AE=typeof XMLHttpRequest<"u",CE=AE&&function(n){return new Promise(function(f,p){const _=aS(n);let S=_.data;const y=Ps.from(_.headers).normalize();let{responseType:u,onUploadProgress:C,onDownloadProgress:R}=_,O,B,z,F,G;function te(){F&&F(),G&&G(),_.cancelToken&&_.cancelToken.unsubscribe(O),_.signal&&_.signal.removeEventListener("abort",O)}let K=new XMLHttpRequest;K.open(_.method.toUpperCase(),_.url,!0),K.timeout=_.timeout;function X(){if(!K)return;const pe=Ps.from("getAllResponseHeaders"in K&&K.getAllResponseHeaders()),Se={data:!u||u==="text"||u==="json"?K.responseText:K.response,status:K.status,statusText:K.statusText,headers:pe,config:n,request:K};nS(function(it){f(it),te()},function(it){p(it),te()},Se),K=null}"onloadend"in K?K.onloadend=X:K.onreadystatechange=function(){!K||K.readyState!==4||K.status===0&&!(K.responseURL&&K.responseURL.indexOf("file:")===0)||setTimeout(X)},K.onabort=function(){K&&(p(new kr("Request aborted",kr.ECONNABORTED,n,K)),K=null)},K.onerror=function(){p(new kr("Network Error",kr.ERR_NETWORK,n,K)),K=null},K.ontimeout=function(){let xe=_.timeout?"timeout of "+_.timeout+"ms exceeded":"timeout exceeded";const Se=_.transitional||eS;_.timeoutErrorMessage&&(xe=_.timeoutErrorMessage),p(new kr(xe,Se.clarifyTimeoutError?kr.ETIMEDOUT:kr.ECONNABORTED,n,K)),K=null},S===void 0&&y.setContentType(null),"setRequestHeader"in K&&ct.forEach(y.toJSON(),function(xe,Se){K.setRequestHeader(Se,xe)}),ct.isUndefined(_.withCredentials)||(K.withCredentials=!!_.withCredentials),u&&u!=="json"&&(K.responseType=_.responseType),R&&([z,G]=D_(R,!0),K.addEventListener("progress",z)),C&&K.upload&&([B,F]=D_(C),K.upload.addEventListener("progress",B),K.upload.addEventListener("loadend",F)),(_.cancelToken||_.signal)&&(O=pe=>{K&&(p(!pe||pe.type?new lp(null,n,K):pe),K.abort(),K=null)},_.cancelToken&&_.cancelToken.subscribe(O),_.signal&&(_.signal.aborted?O():_.signal.addEventListener("abort",O)));const ye=vE(_.url);if(ye&&Fa.protocols.indexOf(ye)===-1){p(new kr("Unsupported protocol "+ye+":",kr.ERR_BAD_REQUEST,n));return}K.send(S||null)})},EE=(n,a)=>{const{length:f}=n=n?n.filter(Boolean):[];if(a||f){let p=new AbortController,_;const S=function(R){if(!_){_=!0,u();const O=R instanceof Error?R:this.reason;p.abort(O instanceof kr?O:new lp(O instanceof Error?O.message:O))}};let y=a&&setTimeout(()=>{y=null,S(new kr(`timeout ${a} of ms exceeded`,kr.ETIMEDOUT))},a);const u=()=>{n&&(y&&clearTimeout(y),y=null,n.forEach(R=>{R.unsubscribe?R.unsubscribe(S):R.removeEventListener("abort",S)}),n=null)};n.forEach(R=>R.addEventListener("abort",S));const{signal:C}=p;return C.unsubscribe=()=>ct.asap(u),C}},PE=function*(n,a){let f=n.byteLength;if(f<a){yield n;return}let p=0,_;for(;p<f;)_=p+a,yield n.slice(p,_),p=_},RE=async function*(n,a){for await(const f of IE(n))yield*PE(f,a)},IE=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const a=n.getReader();try{for(;;){const{done:f,value:p}=await a.read();if(f)break;yield p}}finally{await a.cancel()}},Nx=(n,a,f,p)=>{const _=RE(n,a);let S=0,y,u=C=>{y||(y=!0,p&&p(C))};return new ReadableStream({async pull(C){try{const{done:R,value:O}=await _.next();if(R){u(),C.close();return}let B=O.byteLength;if(f){let z=S+=B;f(z)}C.enqueue(new Uint8Array(O))}catch(R){throw u(R),R}},cancel(C){return u(C),_.return()}},{highWaterMark:2})},Y_=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",sS=Y_&&typeof ReadableStream=="function",DE=Y_&&(typeof TextEncoder=="function"?(n=>a=>n.encode(a))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),oS=(n,...a)=>{try{return!!n(...a)}catch{return!1}},LE=sS&&oS(()=>{let n=!1;const a=new Request(Fa.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!a}),Fx=64*1024,Y0=sS&&oS(()=>ct.isReadableStream(new Response("").body)),L_={stream:Y0&&(n=>n.body)};Y_&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(a=>{!L_[a]&&(L_[a]=ct.isFunction(n[a])?f=>f[a]():(f,p)=>{throw new kr(`Response type '${a}' is not supported`,kr.ERR_NOT_SUPPORT,p)})})})(new Response);const zE=async n=>{if(n==null)return 0;if(ct.isBlob(n))return n.size;if(ct.isSpecCompliantForm(n))return(await new Request(Fa.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(ct.isArrayBufferView(n)||ct.isArrayBuffer(n))return n.byteLength;if(ct.isURLSearchParams(n)&&(n=n+""),ct.isString(n))return(await DE(n)).byteLength},kE=async(n,a)=>{const f=ct.toFiniteNumber(n.getContentLength());return f??zE(a)},OE=Y_&&(async n=>{let{url:a,method:f,data:p,signal:_,cancelToken:S,timeout:y,onDownloadProgress:u,onUploadProgress:C,responseType:R,headers:O,withCredentials:B="same-origin",fetchOptions:z}=aS(n);R=R?(R+"").toLowerCase():"text";let F=EE([_,S&&S.toAbortSignal()],y),G;const te=F&&F.unsubscribe&&(()=>{F.unsubscribe()});let K;try{if(C&&LE&&f!=="get"&&f!=="head"&&(K=await kE(O,p))!==0){let Se=new Request(a,{method:"POST",body:p,duplex:"half"}),ke;if(ct.isFormData(p)&&(ke=Se.headers.get("content-type"))&&O.setContentType(ke),Se.body){const[it,Ke]=Ox(K,D_(Bx(C)));p=Nx(Se.body,Fx,it,Ke)}}ct.isString(B)||(B=B?"include":"omit");const X="credentials"in Request.prototype;G=new Request(a,{...z,signal:F,method:f.toUpperCase(),headers:O.normalize().toJSON(),body:p,duplex:"half",credentials:X?B:void 0});let ye=await fetch(G);const pe=Y0&&(R==="stream"||R==="response");if(Y0&&(u||pe&&te)){const Se={};["status","statusText","headers"].forEach(Ye=>{Se[Ye]=ye[Ye]});const ke=ct.toFiniteNumber(ye.headers.get("content-length")),[it,Ke]=u&&Ox(ke,D_(Bx(u),!0))||[];ye=new Response(Nx(ye.body,Fx,it,()=>{Ke&&Ke(),te&&te()}),Se)}R=R||"text";let xe=await L_[ct.findKey(L_,R)||"text"](ye,n);return!pe&&te&&te(),await new Promise((Se,ke)=>{nS(Se,ke,{data:xe,headers:Ps.from(ye.headers),status:ye.status,statusText:ye.statusText,config:n,request:G})})}catch(X){throw te&&te(),X&&X.name==="TypeError"&&/fetch/i.test(X.message)?Object.assign(new kr("Network Error",kr.ERR_NETWORK,n,G),{cause:X.cause||X}):kr.from(X,X&&X.code,n,G)}}),X0={http:XC,xhr:CE,fetch:OE};ct.forEach(X0,(n,a)=>{if(n){try{Object.defineProperty(n,"name",{value:a})}catch{}Object.defineProperty(n,"adapterName",{value:a})}});const Ux=n=>`- ${n}`,BE=n=>ct.isFunction(n)||n===null||n===!1,lS={getAdapter:n=>{n=ct.isArray(n)?n:[n];const{length:a}=n;let f,p;const _={};for(let S=0;S<a;S++){f=n[S];let y;if(p=f,!BE(f)&&(p=X0[(y=String(f)).toLowerCase()],p===void 0))throw new kr(`Unknown adapter '${y}'`);if(p)break;_[y||"#"+S]=p}if(!p){const S=Object.entries(_).map(([u,C])=>`adapter ${u} `+(C===!1?"is not supported by the environment":"is not available in the build"));let y=a?S.length>1?`since :
`+S.map(Ux).join(`
`):" "+Ux(S[0]):"as no adapter specified";throw new kr("There is no suitable adapter to dispatch the request "+y,"ERR_NOT_SUPPORT")}return p},adapters:X0};function P0(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new lp(null,n)}function Vx(n){return P0(n),n.headers=Ps.from(n.headers),n.data=E0.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),lS.getAdapter(n.adapter||jm.adapter)(n).then(function(p){return P0(n),p.data=E0.call(n,n.transformResponse,p),p.headers=Ps.from(p.headers),p},function(p){return rS(p)||(P0(n),p&&p.response&&(p.response.data=E0.call(n,n.transformResponse,p.response),p.response.headers=Ps.from(p.response.headers))),Promise.reject(p)})}const uS="1.8.4",X_={};["object","boolean","number","function","string","symbol"].forEach((n,a)=>{X_[n]=function(p){return typeof p===n||"a"+(a<1?"n ":" ")+n}});const $x={};X_.transitional=function(a,f,p){function _(S,y){return"[Axios v"+uS+"] Transitional option '"+S+"'"+y+(p?". "+p:"")}return(S,y,u)=>{if(a===!1)throw new kr(_(y," has been removed"+(f?" in "+f:"")),kr.ERR_DEPRECATED);return f&&!$x[y]&&($x[y]=!0,console.warn(_(y," has been deprecated since v"+f+" and will be removed in the near future"))),a?a(S,y,u):!0}};X_.spelling=function(a){return(f,p)=>(console.warn(`${p} is likely a misspelling of ${a}`),!0)};function jE(n,a,f){if(typeof n!="object")throw new kr("options must be an object",kr.ERR_BAD_OPTION_VALUE);const p=Object.keys(n);let _=p.length;for(;_-- >0;){const S=p[_],y=a[S];if(y){const u=n[S],C=u===void 0||y(u,S,n);if(C!==!0)throw new kr("option "+S+" must be "+C,kr.ERR_BAD_OPTION_VALUE);continue}if(f!==!0)throw new kr("Unknown option "+S,kr.ERR_BAD_OPTION)}}const M_={assertOptions:jE,validators:X_},wu=M_.validators;let $f=class{constructor(a){this.defaults=a,this.interceptors={request:new zx,response:new zx}}async request(a,f){try{return await this._request(a,f)}catch(p){if(p instanceof Error){let _={};Error.captureStackTrace?Error.captureStackTrace(_):_=new Error;const S=_.stack?_.stack.replace(/^.+\n/,""):"";try{p.stack?S&&!String(p.stack).endsWith(S.replace(/^.+\n.+\n/,""))&&(p.stack+=`
`+S):p.stack=S}catch{}}throw p}}_request(a,f){typeof a=="string"?(f=f||{},f.url=a):f=a||{},f=qf(this.defaults,f);const{transitional:p,paramsSerializer:_,headers:S}=f;p!==void 0&&M_.assertOptions(p,{silentJSONParsing:wu.transitional(wu.boolean),forcedJSONParsing:wu.transitional(wu.boolean),clarifyTimeoutError:wu.transitional(wu.boolean)},!1),_!=null&&(ct.isFunction(_)?f.paramsSerializer={serialize:_}:M_.assertOptions(_,{encode:wu.function,serialize:wu.function},!0)),f.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?f.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:f.allowAbsoluteUrls=!0),M_.assertOptions(f,{baseUrl:wu.spelling("baseURL"),withXsrfToken:wu.spelling("withXSRFToken")},!0),f.method=(f.method||this.defaults.method||"get").toLowerCase();let y=S&&ct.merge(S.common,S[f.method]);S&&ct.forEach(["delete","get","head","post","put","patch","common"],G=>{delete S[G]}),f.headers=Ps.concat(y,S);const u=[];let C=!0;this.interceptors.request.forEach(function(te){typeof te.runWhen=="function"&&te.runWhen(f)===!1||(C=C&&te.synchronous,u.unshift(te.fulfilled,te.rejected))});const R=[];this.interceptors.response.forEach(function(te){R.push(te.fulfilled,te.rejected)});let O,B=0,z;if(!C){const G=[Vx.bind(this),void 0];for(G.unshift.apply(G,u),G.push.apply(G,R),z=G.length,O=Promise.resolve(f);B<z;)O=O.then(G[B++],G[B++]);return O}z=u.length;let F=f;for(B=0;B<z;){const G=u[B++],te=u[B++];try{F=G(F)}catch(K){te.call(this,K);break}}try{O=Vx.call(this,F)}catch(G){return Promise.reject(G)}for(B=0,z=R.length;B<z;)O=O.then(R[B++],R[B++]);return O}getUri(a){a=qf(this.defaults,a);const f=iS(a.baseURL,a.url,a.allowAbsoluteUrls);return J2(f,a.params,a.paramsSerializer)}};ct.forEach(["delete","get","head","options"],function(a){$f.prototype[a]=function(f,p){return this.request(qf(p||{},{method:a,url:f,data:(p||{}).data}))}});ct.forEach(["post","put","patch"],function(a){function f(p){return function(S,y,u){return this.request(qf(u||{},{method:a,headers:p?{"Content-Type":"multipart/form-data"}:{},url:S,data:y}))}}$f.prototype[a]=f(),$f.prototype[a+"Form"]=f(!0)});let NE=class cS{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let f;this.promise=new Promise(function(S){f=S});const p=this;this.promise.then(_=>{if(!p._listeners)return;let S=p._listeners.length;for(;S-- >0;)p._listeners[S](_);p._listeners=null}),this.promise.then=_=>{let S;const y=new Promise(u=>{p.subscribe(u),S=u}).then(_);return y.cancel=function(){p.unsubscribe(S)},y},a(function(S,y,u){p.reason||(p.reason=new lp(S,y,u),f(p.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const f=this._listeners.indexOf(a);f!==-1&&this._listeners.splice(f,1)}toAbortSignal(){const a=new AbortController,f=p=>{a.abort(p)};return this.subscribe(f),a.signal.unsubscribe=()=>this.unsubscribe(f),a.signal}static source(){let a;return{token:new cS(function(_){a=_}),cancel:a}}};function FE(n){return function(f){return n.apply(null,f)}}function UE(n){return ct.isObject(n)&&n.isAxiosError===!0}const Q0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Q0).forEach(([n,a])=>{Q0[a]=n});function hS(n){const a=new $f(n),f=V2($f.prototype.request,a);return ct.extend(f,$f.prototype,a,{allOwnKeys:!0}),ct.extend(f,a,null,{allOwnKeys:!0}),f.create=function(_){return hS(qf(n,_))},f}const hn=hS(jm);hn.Axios=$f;hn.CanceledError=lp;hn.CancelToken=NE;hn.isCancel=rS;hn.VERSION=uS;hn.toFormData=K_;hn.AxiosError=kr;hn.Cancel=hn.CanceledError;hn.all=function(a){return Promise.all(a)};hn.spread=FE;hn.isAxiosError=UE;hn.mergeConfig=qf;hn.AxiosHeaders=Ps;hn.formToJSON=n=>tS(ct.isHTMLForm(n)?new FormData(n):n);hn.getAdapter=lS.getAdapter;hn.HttpStatusCode=Q0;hn.default=hn;const{Axios:Bz,AxiosError:jz,CanceledError:Nz,isCancel:Fz,CancelToken:Uz,VERSION:Vz,all:$z,Cancel:Zz,isAxiosError:qz,spread:Gz,toFormData:Hz,AxiosHeaders:Wz,HttpStatusCode:Kz,formToJSON:Yz,getAdapter:Xz,mergeConfig:Qz}=hn;let VE={data:""},$E=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||VE,ZE=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,qE=/\/\*[^]*?\*\/|  +/g,Zx=/\n+/g,Th=(n,a)=>{let f="",p="",_="";for(let S in n){let y=n[S];S[0]=="@"?S[1]=="i"?f=S+" "+y+";":p+=S[1]=="f"?Th(y,S):S+"{"+Th(y,S[1]=="k"?"":a)+"}":typeof y=="object"?p+=Th(y,a?a.replace(/([^,])+/g,u=>S.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,C=>/&/.test(C)?C.replace(/&/g,u):u?u+" "+C:C)):S):y!=null&&(S=/^--/.test(S)?S:S.replace(/[A-Z]/g,"-$&").toLowerCase(),_+=Th.p?Th.p(S,y):S+":"+y+";")}return f+(a&&_?a+"{"+_+"}":_)+p},mc={},fS=n=>{if(typeof n=="object"){let a="";for(let f in n)a+=f+fS(n[f]);return a}return n},GE=(n,a,f,p,_)=>{let S=fS(n),y=mc[S]||(mc[S]=(C=>{let R=0,O=11;for(;R<C.length;)O=101*O+C.charCodeAt(R++)>>>0;return"go"+O})(S));if(!mc[y]){let C=S!==n?n:(R=>{let O,B,z=[{}];for(;O=ZE.exec(R.replace(qE,""));)O[4]?z.shift():O[3]?(B=O[3].replace(Zx," ").trim(),z.unshift(z[0][B]=z[0][B]||{})):z[0][O[1]]=O[2].replace(Zx," ").trim();return z[0]})(n);mc[y]=Th(_?{["@keyframes "+y]:C}:C,f?"":"."+y)}let u=f&&mc.g?mc.g:null;return f&&(mc.g=mc[y]),((C,R,O,B)=>{B?R.data=R.data.replace(B,C):R.data.indexOf(C)===-1&&(R.data=O?C+R.data:R.data+C)})(mc[y],a,p,u),y},HE=(n,a,f)=>n.reduce((p,_,S)=>{let y=a[S];if(y&&y.call){let u=y(f),C=u&&u.props&&u.props.className||/^go/.test(u)&&u;y=C?"."+C:u&&typeof u=="object"?u.props?"":Th(u,""):u===!1?"":u}return p+_+(y??"")},"");function Q_(n){let a=this||{},f=n.call?n(a.p):n;return GE(f.unshift?f.raw?HE(f,[].slice.call(arguments,1),a.p):f.reduce((p,_)=>Object.assign(p,_&&_.call?_(a.p):_),{}):f,$E(a.target),a.g,a.o,a.k)}let dS,J0,ev;Q_.bind({g:1});let _c=Q_.bind({k:1});function WE(n,a,f,p){Th.p=a,dS=n,J0=f,ev=p}function Eh(n,a){let f=this||{};return function(){let p=arguments;function _(S,y){let u=Object.assign({},S),C=u.className||_.className;f.p=Object.assign({theme:J0&&J0()},u),f.o=/ *go\d+/.test(C),u.className=Q_.apply(f,p)+(C?" "+C:"");let R=n;return n[0]&&(R=u.as||n,delete u.as),ev&&R[0]&&ev(u),dS(R,u)}return _}}var KE=n=>typeof n=="function",z_=(n,a)=>KE(n)?n(a):n,YE=(()=>{let n=0;return()=>(++n).toString()})(),pS=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let a=matchMedia("(prefers-reduced-motion: reduce)");n=!a||a.matches}return n}})(),XE=20,mS=(n,a)=>{switch(a.type){case 0:return{...n,toasts:[a.toast,...n.toasts].slice(0,XE)};case 1:return{...n,toasts:n.toasts.map(S=>S.id===a.toast.id?{...S,...a.toast}:S)};case 2:let{toast:f}=a;return mS(n,{type:n.toasts.find(S=>S.id===f.id)?1:0,toast:f});case 3:let{toastId:p}=a;return{...n,toasts:n.toasts.map(S=>S.id===p||p===void 0?{...S,dismissed:!0,visible:!1}:S)};case 4:return a.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(S=>S.id!==a.toastId)};case 5:return{...n,pausedAt:a.time};case 6:let _=a.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(S=>({...S,pauseDuration:S.pauseDuration+_}))}}},A_=[],Nf={toasts:[],pausedAt:void 0},Gf=n=>{Nf=mS(Nf,n),A_.forEach(a=>{a(Nf)})},QE={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},JE=(n={})=>{let[a,f]=oe.useState(Nf),p=oe.useRef(Nf);oe.useEffect(()=>(p.current!==Nf&&f(Nf),A_.push(f),()=>{let S=A_.indexOf(f);S>-1&&A_.splice(S,1)}),[]);let _=a.toasts.map(S=>{var y,u,C;return{...n,...n[S.type],...S,removeDelay:S.removeDelay||((y=n[S.type])==null?void 0:y.removeDelay)||(n==null?void 0:n.removeDelay),duration:S.duration||((u=n[S.type])==null?void 0:u.duration)||(n==null?void 0:n.duration)||QE[S.type],style:{...n.style,...(C=n[S.type])==null?void 0:C.style,...S.style}}});return{...a,toasts:_}},eP=(n,a="blank",f)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:a,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...f,id:(f==null?void 0:f.id)||YE()}),Nm=n=>(a,f)=>{let p=eP(a,n,f);return Gf({type:2,toast:p}),p.id},ls=(n,a)=>Nm("blank")(n,a);ls.error=Nm("error");ls.success=Nm("success");ls.loading=Nm("loading");ls.custom=Nm("custom");ls.dismiss=n=>{Gf({type:3,toastId:n})};ls.remove=n=>Gf({type:4,toastId:n});ls.promise=(n,a,f)=>{let p=ls.loading(a.loading,{...f,...f==null?void 0:f.loading});return typeof n=="function"&&(n=n()),n.then(_=>{let S=a.success?z_(a.success,_):void 0;return S?ls.success(S,{id:p,...f,...f==null?void 0:f.success}):ls.dismiss(p),_}).catch(_=>{let S=a.error?z_(a.error,_):void 0;S?ls.error(S,{id:p,...f,...f==null?void 0:f.error}):ls.dismiss(p)}),n};var tP=(n,a)=>{Gf({type:1,toast:{id:n,height:a}})},rP=()=>{Gf({type:5,time:Date.now()})},vm=new Map,nP=1e3,iP=(n,a=nP)=>{if(vm.has(n))return;let f=setTimeout(()=>{vm.delete(n),Gf({type:4,toastId:n})},a);vm.set(n,f)},aP=n=>{let{toasts:a,pausedAt:f}=JE(n);oe.useEffect(()=>{if(f)return;let S=Date.now(),y=a.map(u=>{if(u.duration===1/0)return;let C=(u.duration||0)+u.pauseDuration-(S-u.createdAt);if(C<0){u.visible&&ls.dismiss(u.id);return}return setTimeout(()=>ls.dismiss(u.id),C)});return()=>{y.forEach(u=>u&&clearTimeout(u))}},[a,f]);let p=oe.useCallback(()=>{f&&Gf({type:6,time:Date.now()})},[f]),_=oe.useCallback((S,y)=>{let{reverseOrder:u=!1,gutter:C=8,defaultPosition:R}=y||{},O=a.filter(F=>(F.position||R)===(S.position||R)&&F.height),B=O.findIndex(F=>F.id===S.id),z=O.filter((F,G)=>G<B&&F.visible).length;return O.filter(F=>F.visible).slice(...u?[z+1]:[0,z]).reduce((F,G)=>F+(G.height||0)+C,0)},[a]);return oe.useEffect(()=>{a.forEach(S=>{if(S.dismissed)iP(S.id,S.removeDelay);else{let y=vm.get(S.id);y&&(clearTimeout(y),vm.delete(S.id))}})},[a]),{toasts:a,handlers:{updateHeight:tP,startPause:rP,endPause:p,calculateOffset:_}}},sP=_c`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,oP=_c`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,lP=_c`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,uP=Eh("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${sP} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${oP} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${lP} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,cP=_c`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,hP=Eh("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${cP} 1s linear infinite;
`,fP=_c`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,dP=_c`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,pP=Eh("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${fP} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${dP} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,mP=Eh("div")`
  position: absolute;
`,gP=Eh("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,yP=_c`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_P=Eh("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${yP} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,vP=({toast:n})=>{let{icon:a,type:f,iconTheme:p}=n;return a!==void 0?typeof a=="string"?oe.createElement(_P,null,a):a:f==="blank"?null:oe.createElement(gP,null,oe.createElement(hP,{...p}),f!=="loading"&&oe.createElement(mP,null,f==="error"?oe.createElement(uP,{...p}):oe.createElement(pP,{...p})))},xP=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,bP=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,wP="0%{opacity:0;} 100%{opacity:1;}",SP="0%{opacity:1;} 100%{opacity:0;}",TP=Eh("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,MP=Eh("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,AP=(n,a)=>{let f=n.includes("top")?1:-1,[p,_]=pS()?[wP,SP]:[xP(f),bP(f)];return{animation:a?`${_c(p)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${_c(_)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},CP=oe.memo(({toast:n,position:a,style:f,children:p})=>{let _=n.height?AP(n.position||a||"top-center",n.visible):{opacity:0},S=oe.createElement(vP,{toast:n}),y=oe.createElement(MP,{...n.ariaProps},z_(n.message,n));return oe.createElement(TP,{className:n.className,style:{..._,...f,...n.style}},typeof p=="function"?p({icon:S,message:y}):oe.createElement(oe.Fragment,null,S,y))});WE(oe.createElement);var EP=({id:n,className:a,style:f,onHeightUpdate:p,children:_})=>{let S=oe.useCallback(y=>{if(y){let u=()=>{let C=y.getBoundingClientRect().height;p(n,C)};u(),new MutationObserver(u).observe(y,{subtree:!0,childList:!0,characterData:!0})}},[n,p]);return oe.createElement("div",{ref:S,className:a,style:f},_)},PP=(n,a)=>{let f=n.includes("top"),p=f?{top:0}:{bottom:0},_=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:pS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${a*(f?1:-1)}px)`,...p,..._}},RP=Q_`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Mg=16,IP=({reverseOrder:n,position:a="top-center",toastOptions:f,gutter:p,children:_,containerStyle:S,containerClassName:y})=>{let{toasts:u,handlers:C}=aP(f);return oe.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Mg,left:Mg,right:Mg,bottom:Mg,pointerEvents:"none",...S},className:y,onMouseEnter:C.startPause,onMouseLeave:C.endPause},u.map(R=>{let O=R.position||a,B=C.calculateOffset(R,{reverseOrder:n,gutter:p,defaultPosition:a}),z=PP(O,B);return oe.createElement(EP,{id:R.id,key:R.id,onHeightUpdate:C.updateHeight,className:R.visible?RP:"",style:z},R.type==="custom"?z_(R.message,R):_?_(R):oe.createElement(CP,{toast:R,position:O}))}))},Gr=ls;const gS=oe.createContext(),DP={currentUser:null,error:"",loading:!1,isAuthenticated:!1};function LP(n,a){switch(a.type){case"login":return{...n,isAuthenticated:!0,currentUser:a.payload,loading:!1};case"error":return{...n,error:a.payload,loading:!1};case"loading":return{...n,loading:a.payload};case"logout":return{...n,currentUser:null,error:"",isAuthenticated:!1};case"resetError":return{...n,error:""};default:return new Error(`Error at ${a.type}`)}}function zP({children:n}){const[{currentUser:a,error:f,loading:p,isAuthenticated:_},S]=oe.useReducer(LP,DP);oe.useEffect(()=>{const K=localStorage.getItem("currentUser");S(K?{type:"login",payload:JSON.parse(K)}:{type:"logout"})},[]);async function y(K,X){try{S({type:"loading",payload:!0}),S({type:"resetError"});const ye=await hn({method:"POST",url:"/api/v1/users/login",data:{email:K,password:X},withCredentials:!0});console.log(ye),await u()}catch(ye){console.error(ye.response.data),Gr.error(ye.response.data.message),S({type:"error",payload:f.response.data.message}),S({type:"logout"})}finally{S({type:"loading",payload:!1})}}async function u(){try{const K=await hn("/api/v1/users/me",{withCredentials:!0});S({type:"resetError"}),console.log(K);const X={id:K.data.data.doc._id,name:K.data.data.doc.name,email:K.data.data.doc.email,photo:K.data.data.doc.photo,role:K.data.data.doc.role};S({type:"login",payload:X}),localStorage.setItem("currentUser",JSON.stringify(X))}catch(K){S({type:"error",payload:K.response.data.message})}}async function C(K){try{S({type:"loading",payload:!0}),S({type:"resetError"});const X=await hn.post("/api/v1/users/signup",K,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});console.log(X.data),Gr.success("Signup successful!"),await u()}catch(X){console.error(X.response.data),Gr.error(X.response.data.message),S({type:"error",payload:f.response.data.message})}finally{S({type:"loading",payload:!1})}}async function R(){try{S({type:"loading",payload:!0}),S({type:"resetError"});const K=await hn("/api/v1/users/logout");console.log(K),S({type:"logout"}),localStorage.removeItem("currentUser")}catch(K){console.log(K),S({type:"error",payload:K.response.data.message})}finally{S({type:"loading",payload:!1})}}async function O(K,X,ye){try{S({type:"loading",payload:!0}),S({type:"resetError"}),await hn({method:"PATCH",url:"/api/v1/users/update-password",data:{currentPassword:K,newPassword:X,confirmPassword:ye}}),Gr.success("Password Changed Successfully!"),await R()}catch(pe){console.error(pe),S({type:"error",payload:pe.response.data.message}),Gr.error(pe.response.data.message)}finally{S({type:"loading",payload:!1})}}async function B(K){try{S({type:"loading",payload:!0}),S({type:"resetError"});const X=await hn.post("/api/v1/users/forgot-password/send-otp",{email:K});return console.log(X.data),Gr.success("Verification code has been sent to your Email",{duration:4e3}),!0}catch(X){return console.log(X),S({type:"error",payload:X.response.data.message}),!1}finally{S({type:"loading",payload:!1})}}async function z(K,X){try{S({type:"loading",payload:!0}),S({type:"resetError"});const ye=await hn.post("/api/v1/users/forgot-password/verify-otp",{otp:K,email:X});return console.log(ye.data),Gr.success(ye.data.message),!0}catch(ye){return console.log(ye.response.data.message),S({type:"error",payload:ye.response.data.message}),!1}finally{S({type:"loading",payload:!1})}}async function F(K,X,ye){try{S({type:"loading",payload:!0}),S({type:"resetError"});const pe=await hn.patch("/api/v1/users/reset-password",{email:K,newPassword:X,confirmPassword:ye});return console.log(pe.data),Gr.success(pe.data.message),!0}catch(pe){console.error(pe.response.data.message),S({type:"error",payload:pe.response.data.message})}finally{S({type:"loading",payload:!1})}}async function G(K){var X,ye;try{S({type:"loading",payload:!0}),S({type:"resetError"});const pe=await hn({method:"PATCH",url:"/api/v1/users/update-me",data:K,headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});console.log(pe.data),Gr.success("Profile updated successfully!"),await u()}catch(pe){console.error(pe),Gr.error(((ye=(X=pe.response)==null?void 0:X.data)==null?void 0:ye.message)||"Failed to update profile"),S({type:"error",payload:pe.response.data.message})}finally{S({type:"loading",payload:!1})}}function te(){S({type:"resetError"})}return J.jsx(gS.Provider,{value:{login:y,signup:C,changePassword:O,changeProfile:G,sendOtp:B,verifyOtp:z,resetPassword:F,resetError:te,error:f,loading:p,user:a,logout:R,isAuthenticated:_},children:n})}function Cl(){const n=oe.useContext(gS);if(n===void 0)throw new Error("Auth context is used outside of the children");return n}function Io({color:n="white",className:a}){return n==="white"?J.jsx("span",{className:"loader"}):J.jsx("span",{className:`loaderGreen ${a}`})}var Ag={exports:{}},Cg={exports:{}},Eg={exports:{}},qx;function Dt(){return qx||(qx=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=p;function f(_){"@babel/helpers - typeof";return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},f(_)}function p(_){var S=typeof _=="string"||_ instanceof String;if(!S){var y=f(_);throw _===null?y="null":y==="object"&&(y=_.constructor.name),new TypeError("Expected a string but received a ".concat(y))}}n.exports=a.default,n.exports.default=a.default}(Eg,Eg.exports)),Eg.exports}var Gx;function Dv(){return Gx||(Gx=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var f=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S){return(0,f.default)(S),S=Date.parse(S),isNaN(S)?null:new Date(S)}n.exports=a.default,n.exports.default=a.default}(Cg,Cg.exports)),Cg.exports}var Pg={exports:{}},Od={},Rg={exports:{}},Hx;function yS(){return Hx||(Hx=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=f;function f(p){return p==null}n.exports=a.default,n.exports.default=a.default}(Rg,Rg.exports)),Rg.exports}var ki={},Wx;function Fm(){if(Wx)return ki;Wx=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.farsiLocales=ki.englishLocales=ki.dotDecimal=ki.decimal=ki.commaDecimal=ki.bengaliLocales=ki.arabicLocales=ki.alphanumeric=ki.alpha=void 0;for(var n=ki.alpha={"en-US":/^[A-Z]+$/i,"az-AZ":/^[A-VXYZ]+$/i,"bg-BG":/^[-]+$/i,"cs-CZ":/^[A-Z]+$/i,"da-DK":/^[A-Z]+$/i,"de-DE":/^[A-Z]+$/i,"el-GR":/^[-]+$/i,"es-ES":/^[A-Z]+$/i,"fa-IR":/^[]+$/i,"fi-FI":/^[A-Z]+$/i,"fr-FR":/^[A-Z]+$/i,"it-IT":/^[A-Z]+$/i,"ja-JP":/^[----]+$/i,"nb-NO":/^[A-Z]+$/i,"nl-NL":/^[A-Z]+$/i,"nn-NO":/^[A-Z]+$/i,"hu-HU":/^[A-Z]+$/i,"pl-PL":/^[A-Z]+$/i,"pt-PT":/^[A-Z]+$/i,"ru-RU":/^[-]+$/i,"kk-KZ":/^[-\u04D8\u04B0\u0406\u04A2\u0492\u04AE\u049A\u04E8\u04BA]+$/i,"sl-SI":/^[A-Z]+$/i,"sk-SK":/^[A-Z]+$/i,"sr-RS@latin":/^[A-Z]+$/i,"sr-RS":/^[-]+$/i,"sv-SE":/^[A-Z]+$/i,"th-TH":/^[-\s]+$/i,"tr-TR":/^[A-Z]+$/i,"uk-UA":/^[-I]+$/i,"vi-VN":/^[A-Z]+$/i,"ko-KR":/^[---]*$/,"ku-IQ":/^[]+$/i,ar:/^[]+$/,he:/^[-]+$/,fa:/^['']+$/i,bn:/^['']+$/,eo:/^[ABCD-GHIJK-PRSTUVZ]+$/i,"hi-IN":/^[\u0900-\u0961]+[\u0972-\u097F]*$/i,"si-LK":/^[\u0D80-\u0DFF]+$/},a=ki.alphanumeric={"en-US":/^[0-9A-Z]+$/i,"az-AZ":/^[0-9A-VXYZ]+$/i,"bg-BG":/^[0-9-]+$/i,"cs-CZ":/^[0-9A-Z]+$/i,"da-DK":/^[0-9A-Z]+$/i,"de-DE":/^[0-9A-Z]+$/i,"el-GR":/^[0-9-]+$/i,"es-ES":/^[0-9A-Z]+$/i,"fi-FI":/^[0-9A-Z]+$/i,"fr-FR":/^[0-9A-Z]+$/i,"it-IT":/^[0-9A-Z]+$/i,"ja-JP":/^[0-9-----]+$/i,"hu-HU":/^[0-9A-Z]+$/i,"nb-NO":/^[0-9A-Z]+$/i,"nl-NL":/^[0-9A-Z]+$/i,"nn-NO":/^[0-9A-Z]+$/i,"pl-PL":/^[0-9A-Z]+$/i,"pt-PT":/^[0-9A-Z]+$/i,"ru-RU":/^[0-9-]+$/i,"kk-KZ":/^[0-9-\u04D8\u04B0\u0406\u04A2\u0492\u04AE\u049A\u04E8\u04BA]+$/i,"sl-SI":/^[0-9A-Z]+$/i,"sk-SK":/^[0-9A-Z]+$/i,"sr-RS@latin":/^[0-9A-Z]+$/i,"sr-RS":/^[0-9-]+$/i,"sv-SE":/^[0-9A-Z]+$/i,"th-TH":/^[-\s]+$/i,"tr-TR":/^[0-9A-Z]+$/i,"uk-UA":/^[0-9-I]+$/i,"ko-KR":/^[0-9---]*$/,"ku-IQ":/^[0-9]+$/i,"vi-VN":/^[0-9A-Z]+$/i,ar:/^[0-9]+$/,he:/^[0-9-]+$/,fa:/^['0-9']+$/i,bn:/^['']+$/,eo:/^[0-9ABCD-GHIJK-PRSTUVZ]+$/i,"hi-IN":/^[\u0900-\u0963]+[\u0966-\u097F]*$/i,"si-LK":/^[0-9\u0D80-\u0DFF]+$/},f=ki.decimal={"en-US":".",ar:""},p=ki.englishLocales=["AU","GB","HK","IN","NZ","ZA","ZM"],_,S=0;S<p.length;S++)_="en-".concat(p[S]),n[_]=n["en-US"],a[_]=a["en-US"],f[_]=f["en-US"];for(var y=ki.arabicLocales=["AE","BH","DZ","EG","IQ","JO","KW","LB","LY","MA","QM","QA","SA","SD","SY","TN","YE"],u,C=0;C<y.length;C++)u="ar-".concat(y[C]),n[u]=n.ar,a[u]=a.ar,f[u]=f.ar;for(var R=ki.farsiLocales=["IR","AF"],O,B=0;B<R.length;B++)O="fa-".concat(R[B]),a[O]=a.fa,f[O]=f.ar;for(var z=ki.bengaliLocales=["BD","IN"],F,G=0;G<z.length;G++)F="bn-".concat(z[G]),n[F]=n.bn,a[F]=a.bn,f[F]=f["en-US"];for(var te=ki.dotDecimal=["ar-EG","ar-LB","ar-LY"],K=ki.commaDecimal=["bg-BG","cs-CZ","da-DK","de-DE","el-GR","en-ZM","eo","es-ES","fr-CA","fr-FR","id-ID","it-IT","ku-IQ","hi-IN","hu-HU","nb-NO","nn-NO","nl-NL","pl-PL","pt-PT","ru-RU","kk-KZ","si-LK","sl-SI","sr-RS@latin","sr-RS","sv-SE","tr-TR","uk-UA","vi-VN"],X=0;X<te.length;X++)f[te[X]]=f["en-US"];for(var ye=0;ye<K.length;ye++)f[K[ye]]=",";return n["fr-CA"]=n["fr-FR"],a["fr-CA"]=a["fr-FR"],n["pt-BR"]=n["pt-PT"],a["pt-BR"]=a["pt-PT"],f["pt-BR"]=f["pt-PT"],n["pl-Pl"]=n["pl-PL"],a["pl-Pl"]=a["pl-PL"],f["pl-Pl"]=f["pl-PL"],n["fa-AF"]=n.fa,ki}var Kx;function _S(){if(Kx)return Od;Kx=1,Object.defineProperty(Od,"__esModule",{value:!0}),Od.default=_,Od.locales=void 0;var n=p(Dt()),a=p(yS()),f=Fm();function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){(0,n.default)(S),y=y||{};var u=new RegExp("^(?:[-+])?(?:[0-9]+)?(?:\\".concat(y.locale?f.decimal[y.locale]:".","[0-9]*)?(?:[eE][\\+\\-]?(?:[0-9]+))?$"));if(S===""||S==="."||S===","||S==="-"||S==="+")return!1;var C=parseFloat(S.replace(",","."));return u.test(S)&&(!y.hasOwnProperty("min")||(0,a.default)(y.min)||C>=y.min)&&(!y.hasOwnProperty("max")||(0,a.default)(y.max)||C<=y.max)&&(!y.hasOwnProperty("lt")||(0,a.default)(y.lt)||C<y.lt)&&(!y.hasOwnProperty("gt")||(0,a.default)(y.gt)||C>y.gt)}return Od.locales=Object.keys(f.decimal),Od}var Yx;function vS(){return Yx||(Yx=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var f=p(_S());function p(S){return S&&S.__esModule?S:{default:S}}function _(S){return(0,f.default)(S)?parseFloat(S):NaN}n.exports=a.default,n.exports.default=a.default}(Pg,Pg.exports)),Pg.exports}var Ig={exports:{}},Xx;function kP(){return Xx||(Xx=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var f=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){return(0,f.default)(S),parseInt(S,y||10)}n.exports=a.default,n.exports.default=a.default}(Ig,Ig.exports)),Ig.exports}var Dg={exports:{}},Qx;function OP(){return Qx||(Qx=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var f=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){return(0,f.default)(S),y?S==="1"||/^true$/i.test(S):S!=="0"&&!/^false$/i.test(S)&&S!==""}n.exports=a.default,n.exports.default=a.default}(Dg,Dg.exports)),Dg.exports}var Lg={exports:{}},Jx;function BP(){return Jx||(Jx=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var f=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){return(0,f.default)(S),S===y}n.exports=a.default,n.exports.default=a.default}(Lg,Lg.exports)),Lg.exports}var zg={exports:{}},kg={exports:{}},e1;function xS(){return e1||(e1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=p;function f(_){"@babel/helpers - typeof";return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},f(_)}function p(_){return f(_)==="object"&&_!==null?typeof _.toString=="function"?_=_.toString():_="[object Object]":(_===null||typeof _>"u"||isNaN(_)&&!_.length)&&(_=""),String(_)}n.exports=a.default,n.exports.default=a.default}(kg,kg.exports)),kg.exports}var Og={exports:{}},t1;function fs(){return t1||(t1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=f;function f(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0;for(var S in _)typeof p[S]>"u"&&(p[S]=_[S]);return p}n.exports=a.default,n.exports.default=a.default}(Og,Og.exports)),Og.exports}var r1;function jP(){return r1||(r1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=u;var f=S(Dt()),p=S(xS()),_=S(fs());function S(C){return C&&C.__esModule?C:{default:C}}var y={ignoreCase:!1,minOccurrences:1};function u(C,R,O){return(0,f.default)(C),O=(0,_.default)(O,y),O.ignoreCase?C.toLowerCase().split((0,p.default)(R).toLowerCase()).length>O.minOccurrences:C.split((0,p.default)(R)).length>O.minOccurrences}n.exports=a.default,n.exports.default=a.default}(zg,zg.exports)),zg.exports}var Bg={exports:{}},n1;function NP(){return n1||(n1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var f=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y,u){return(0,f.default)(S),Object.prototype.toString.call(y)!=="[object RegExp]"&&(y=new RegExp(y,u)),!!S.match(y)}n.exports=a.default,n.exports.default=a.default}(Bg,Bg.exports)),Bg.exports}var jg={exports:{}},Ng={exports:{}},i1;function bS(){return i1||(i1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=p;function f(_){return Object.prototype.toString.call(_)==="[object RegExp]"}function p(_,S){for(var y=0;y<S.length;y++){var u=S[y];if(_===u||f(u)&&u.test(_))return!0}return!1}n.exports=a.default,n.exports.default=a.default}(Ng,Ng.exports)),Ng.exports}var Fg={exports:{}},a1;function wS(){return a1||(a1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}function _(y){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},_(y)}function S(y,u){(0,f.default)(y);var C,R;_(u)==="object"?(C=u.min||0,R=u.max):(C=arguments[1],R=arguments[2]);var O=encodeURI(y).split(/%..|./).length-1;return O>=C&&(typeof R>"u"||O<=R)}n.exports=a.default,n.exports.default=a.default}(Fg,Fg.exports)),Fg.exports}var Ug={exports:{}},s1;function Lv(){return s1||(s1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=y;var f=_(Dt()),p=_(fs());function _(u){return u&&u.__esModule?u:{default:u}}var S={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function y(u,C){(0,f.default)(u),C=(0,p.default)(C,S),C.allow_trailing_dot&&u[u.length-1]==="."&&(u=u.substring(0,u.length-1)),C.allow_wildcard===!0&&u.indexOf("*.")===0&&(u=u.substring(2));var R=u.split("."),O=R[R.length-1];return C.require_tld&&(R.length<2||!C.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(O)||/\s/.test(O))||!C.allow_numeric_tld&&/^\d+$/.test(O)?!1:R.every(function(B){return!(B.length>63&&!C.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(B)||/[\uff01-\uff5e]/.test(B)||/^-|-$/.test(B)||!C.allow_underscores&&/_/.test(B))})}n.exports=a.default,n.exports.default=a.default}(Ug,Ug.exports)),Ug.exports}var Vg={exports:{}},o1;function J_(){return o1||(o1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=R;var f=p(Dt());function p(O){return O&&O.__esModule?O:{default:O}}var _="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",S="(".concat(_,"[.]){3}").concat(_),y=new RegExp("^".concat(S,"$")),u="(?:[0-9a-fA-F]{1,4})",C=new RegExp("^("+"(?:".concat(u,":){7}(?:").concat(u,"|:)|")+"(?:".concat(u,":){6}(?:").concat(S,"|:").concat(u,"|:)|")+"(?:".concat(u,":){5}(?::").concat(S,"|(:").concat(u,"){1,2}|:)|")+"(?:".concat(u,":){4}(?:(:").concat(u,"){0,1}:").concat(S,"|(:").concat(u,"){1,3}|:)|")+"(?:".concat(u,":){3}(?:(:").concat(u,"){0,2}:").concat(S,"|(:").concat(u,"){1,4}|:)|")+"(?:".concat(u,":){2}(?:(:").concat(u,"){0,3}:").concat(S,"|(:").concat(u,"){1,5}|:)|")+"(?:".concat(u,":){1}(?:(:").concat(u,"){0,4}:").concat(S,"|(:").concat(u,"){1,6}|:)|")+"(?::((?::".concat(u,"){0,5}:").concat(S,"|(?::").concat(u,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function R(O){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(0,f.default)(O),B=String(B),B?B==="4"?y.test(O):B==="6"?C.test(O):!1:R(O,4)||R(O,6)}n.exports=a.default,n.exports.default=a.default}(Vg,Vg.exports)),Vg.exports}var l1;function SS(){return l1||(l1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=ye;var f=C(Dt()),p=C(bS()),_=C(wS()),S=C(Lv()),y=C(J_()),u=C(fs());function C(pe){return pe&&pe.__esModule?pe:{default:pe}}var R={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},O=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,B=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,z=/^[a-z\d]+$/,F=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,G=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,te=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,K=254;function X(pe){var xe=pe.replace(/^"(.+)"$/,"$1");if(!xe.trim())return!1;var Se=/[\.";<>]/.test(xe);if(Se){if(xe===pe)return!1;var ke=xe.split('"').length===xe.split('\\"').length;if(!ke)return!1}return!0}function ye(pe,xe){if((0,f.default)(pe),xe=(0,u.default)(xe,R),xe.require_display_name||xe.allow_display_name){var Se=pe.match(O);if(Se){var ke=Se[1];if(pe=pe.replace(ke,"").replace(/(^<|>$)/g,""),ke.endsWith(" ")&&(ke=ke.slice(0,-1)),!X(ke))return!1}else if(xe.require_display_name)return!1}if(!xe.ignore_max_length&&pe.length>K)return!1;var it=pe.split("@"),Ke=it.pop(),Ye=Ke.toLowerCase();if(xe.host_blacklist.length>0&&(0,p.default)(Ye,xe.host_blacklist)||xe.host_whitelist.length>0&&!(0,p.default)(Ye,xe.host_whitelist))return!1;var ht=it.join("@");if(xe.domain_specific_validation&&(Ye==="gmail.com"||Ye==="googlemail.com")){ht=ht.toLowerCase();var Lt=ht.split("+")[0];if(!(0,_.default)(Lt.replace(/\./g,""),{min:6,max:30}))return!1;for(var sr=Lt.split("."),nr=0;nr<sr.length;nr++)if(!z.test(sr[nr]))return!1}if(xe.ignore_max_length===!1&&(!(0,_.default)(ht,{max:64})||!(0,_.default)(Ke,{max:254})))return!1;if(!(0,S.default)(Ke,{require_tld:xe.require_tld,ignore_max_length:xe.ignore_max_length,allow_underscores:xe.allow_underscores})){if(!xe.allow_ip_domain)return!1;if(!(0,y.default)(Ke)){if(!Ke.startsWith("[")||!Ke.endsWith("]"))return!1;var Xt=Ke.slice(1,-1);if(Xt.length===0||!(0,y.default)(Xt))return!1}}if(xe.blacklisted_chars&&ht.search(new RegExp("[".concat(xe.blacklisted_chars,"]+"),"g"))!==-1)return!1;if(ht[0]==='"'&&ht[ht.length-1]==='"')return ht=ht.slice(1,ht.length-1),xe.allow_utf8_local_part?te.test(ht):F.test(ht);for(var or=xe.allow_utf8_local_part?G:B,Ct=ht.split("."),Nt=0;Nt<Ct.length;Nt++)if(!or.test(Ct[Nt]))return!1;return!0}n.exports=a.default,n.exports.default=a.default}(jg,jg.exports)),jg.exports}var $g={exports:{}},u1;function FP(){return u1||(u1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=K;var f=u(Dt()),p=u(bS()),_=u(Lv()),S=u(J_()),y=u(fs());function u(X){return X&&X.__esModule?X:{default:X}}function C(X,ye){return F(X)||z(X,ye)||O(X,ye)||R()}function R(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O(X,ye){if(X){if(typeof X=="string")return B(X,ye);var pe={}.toString.call(X).slice(8,-1);return pe==="Object"&&X.constructor&&(pe=X.constructor.name),pe==="Map"||pe==="Set"?Array.from(X):pe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(pe)?B(X,ye):void 0}}function B(X,ye){(ye==null||ye>X.length)&&(ye=X.length);for(var pe=0,xe=Array(ye);pe<ye;pe++)xe[pe]=X[pe];return xe}function z(X,ye){var pe=X==null?null:typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(pe!=null){var xe,Se,ke,it,Ke=[],Ye=!0,ht=!1;try{if(ke=(pe=pe.call(X)).next,ye!==0)for(;!(Ye=(xe=ke.call(pe)).done)&&(Ke.push(xe.value),Ke.length!==ye);Ye=!0);}catch(Lt){ht=!0,Se=Lt}finally{try{if(!Ye&&pe.return!=null&&(it=pe.return(),Object(it)!==it))return}finally{if(ht)throw Se}}return Ke}}function F(X){if(Array.isArray(X))return X}var G={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0,max_allowed_length:2084},te=/^\[([^\]]+)\](?::([0-9]+))?$/;function K(X,ye){if((0,f.default)(X),!X||/[\s<>]/.test(X)||X.indexOf("mailto:")===0||(ye=(0,y.default)(ye,G),ye.validate_length&&X.length>ye.max_allowed_length)||!ye.allow_fragments&&X.includes("#")||!ye.allow_query_components&&(X.includes("?")||X.includes("&")))return!1;var pe,xe,Se,ke,it,Ke,Ye,ht;if(Ye=X.split("#"),X=Ye.shift(),Ye=X.split("?"),X=Ye.shift(),Ye=X.split("://"),Ye.length>1){if(pe=Ye.shift().toLowerCase(),ye.require_valid_protocol&&ye.protocols.indexOf(pe)===-1)return!1}else{if(ye.require_protocol)return!1;if(X.slice(0,2)==="//"){if(!ye.allow_protocol_relative_urls)return!1;Ye[0]=X.slice(2)}}if(X=Ye.join("://"),X==="")return!1;if(Ye=X.split("/"),X=Ye.shift(),X===""&&!ye.require_host)return!0;if(Ye=X.split("@"),Ye.length>1){if(ye.disallow_auth||Ye[0]===""||(xe=Ye.shift(),xe.indexOf(":")>=0&&xe.split(":").length>2))return!1;var Lt=xe.split(":"),sr=C(Lt,2),nr=sr[0],Xt=sr[1];if(nr===""&&Xt==="")return!1}ke=Ye.join("@"),Ke=null,ht=null;var or=ke.match(te);if(or?(Se="",ht=or[1],Ke=or[2]||null):(Ye=ke.split(":"),Se=Ye.shift(),Ye.length&&(Ke=Ye.join(":"))),Ke!==null&&Ke.length>0){if(it=parseInt(Ke,10),!/^[0-9]+$/.test(Ke)||it<=0||it>65535)return!1}else if(ye.require_port)return!1;return ye.host_whitelist?(0,p.default)(Se,ye.host_whitelist):Se===""&&!ye.require_host?!0:!(!(0,S.default)(Se)&&!(0,_.default)(Se,ye)&&(!ht||!(0,S.default)(ht,6))||(Se=Se||ht,ye.host_blacklist&&(0,p.default)(Se,ye.host_blacklist)))}n.exports=a.default,n.exports.default=a.default}($g,$g.exports)),$g.exports}var Zg={exports:{}},c1;function UP(){return c1||(c1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=O;var f=p(Dt());function p(B){return B&&B.__esModule?B:{default:B}}var _=/^(?:[0-9a-fA-F]{2}([-:\s]))([0-9a-fA-F]{2}\1){4}([0-9a-fA-F]{2})$/,S=/^([0-9a-fA-F]){12}$/,y=/^([0-9a-fA-F]{4}\.){2}([0-9a-fA-F]{4})$/,u=/^(?:[0-9a-fA-F]{2}([-:\s]))([0-9a-fA-F]{2}\1){6}([0-9a-fA-F]{2})$/,C=/^([0-9a-fA-F]){16}$/,R=/^([0-9a-fA-F]{4}\.){3}([0-9a-fA-F]{4})$/;function O(B,z){return(0,f.default)(B),z!=null&&z.eui&&(z.eui=String(z.eui)),z!=null&&z.no_colons||z!=null&&z.no_separators?z.eui==="48"?S.test(B):z.eui==="64"?C.test(B):S.test(B)||C.test(B):(z==null?void 0:z.eui)==="48"?_.test(B)||y.test(B):(z==null?void 0:z.eui)==="64"?u.test(B)||R.test(B):O(B,{eui:"48"})||O(B,{eui:"64"})}n.exports=a.default,n.exports.default=a.default}(Zg,Zg.exports)),Zg.exports}var qg={exports:{}},h1;function VP(){return h1||(h1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=C;var f=_(Dt()),p=_(J_());function _(R){return R&&R.__esModule?R:{default:R}}var S=/^\d{1,3}$/,y=32,u=128;function C(R){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";(0,f.default)(R);var B=R.split("/");if(B.length!==2||!S.test(B[1])||B[1].length>1&&B[1].startsWith("0"))return!1;var z=(0,p.default)(B[0],O);if(!z)return!1;var F=null;switch(String(O)){case"4":F=y;break;case"6":F=u;break;default:F=(0,p.default)(B[0],"6")?u:y}return B[1]<=F&&B[1]>=0}n.exports=a.default,n.exports.default=a.default}(qg,qg.exports)),qg.exports}var Gg={exports:{}},f1;function TS(){return f1||(f1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=G;var f=p(fs());function p(te){return te&&te.__esModule?te:{default:te}}function _(te,K){return u(te)||y(te,K)||R(te,K)||S()}function S(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(te,K){var X=te==null?null:typeof Symbol<"u"&&te[Symbol.iterator]||te["@@iterator"];if(X!=null){var ye,pe,xe,Se,ke=[],it=!0,Ke=!1;try{if(xe=(X=X.call(te)).next,K!==0)for(;!(it=(ye=xe.call(X)).done)&&(ke.push(ye.value),ke.length!==K);it=!0);}catch(Ye){Ke=!0,pe=Ye}finally{try{if(!it&&X.return!=null&&(Se=X.return(),Object(Se)!==Se))return}finally{if(Ke)throw pe}}return ke}}function u(te){if(Array.isArray(te))return te}function C(te,K){var X=typeof Symbol<"u"&&te[Symbol.iterator]||te["@@iterator"];if(!X){if(Array.isArray(te)||(X=R(te))||K){X&&(te=X);var ye=0,pe=function(){};return{s:pe,n:function(){return ye>=te.length?{done:!0}:{done:!1,value:te[ye++]}},e:function(Ke){throw Ke},f:pe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xe,Se=!0,ke=!1;return{s:function(){X=X.call(te)},n:function(){var Ke=X.next();return Se=Ke.done,Ke},e:function(Ke){ke=!0,xe=Ke},f:function(){try{Se||X.return==null||X.return()}finally{if(ke)throw xe}}}}function R(te,K){if(te){if(typeof te=="string")return O(te,K);var X={}.toString.call(te).slice(8,-1);return X==="Object"&&te.constructor&&(X=te.constructor.name),X==="Map"||X==="Set"?Array.from(te):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?O(te,K):void 0}}function O(te,K){(K==null||K>te.length)&&(K=te.length);for(var X=0,ye=Array(K);X<K;X++)ye[X]=te[X];return ye}var B={format:"YYYY/MM/DD",delimiters:["/","-"],strictMode:!1};function z(te){return/(^(y{4}|y{2})[.\/-](m{1,2})[.\/-](d{1,2})$)|(^(m{1,2})[.\/-](d{1,2})[.\/-]((y{4}|y{2})$))|(^(d{1,2})[.\/-](m{1,2})[.\/-]((y{4}|y{2})$))/gi.test(te)}function F(te,K){for(var X=[],ye=Math.max(te.length,K.length),pe=0;pe<ye;pe++)X.push([te[pe],K[pe]]);return X}function G(te,K){if(typeof K=="string"?K=(0,f.default)({format:K},B):K=(0,f.default)(K,B),typeof te=="string"&&z(K.format)){if(K.strictMode&&te.length!==K.format.length)return!1;var X=K.delimiters.find(function(or){return K.format.indexOf(or)!==-1}),ye=K.strictMode?X:K.delimiters.find(function(or){return te.indexOf(or)!==-1}),pe=F(te.split(ye),K.format.toLowerCase().split(X)),xe={},Se=C(pe),ke;try{for(Se.s();!(ke=Se.n()).done;){var it=_(ke.value,2),Ke=it[0],Ye=it[1];if(!Ke||!Ye||Ke.length!==Ye.length)return!1;xe[Ye.charAt(0)]=Ke}}catch(or){Se.e(or)}finally{Se.f()}var ht=xe.y;if(ht.startsWith("-"))return!1;if(xe.y.length===2){var Lt=parseInt(xe.y,10);if(isNaN(Lt))return!1;var sr=new Date().getFullYear()%100;Lt<sr?ht="20".concat(xe.y):ht="19".concat(xe.y)}var nr=xe.m;xe.m.length===1&&(nr="0".concat(xe.m));var Xt=xe.d;return xe.d.length===1&&(Xt="0".concat(xe.d)),new Date("".concat(ht,"-").concat(nr,"-").concat(Xt,"T00:00:00.000Z")).getUTCDate()===+xe.d}return K.strictMode?!1:Object.prototype.toString.call(te)==="[object Date]"&&isFinite(te)}n.exports=a.default,n.exports.default=a.default}(Gg,Gg.exports)),Gg.exports}var Hg={exports:{}},d1;function $P(){return d1||(d1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=y;var f=p(fs());function p(u){return u&&u.__esModule?u:{default:u}}var _={hourFormat:"hour24",mode:"default"},S={hour24:{default:/^([01]?[0-9]|2[0-3]):([0-5][0-9])$/,withSeconds:/^([01]?[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/},hour12:{default:/^(0?[1-9]|1[0-2]):([0-5][0-9]) (A|P)M$/,withSeconds:/^(0?[1-9]|1[0-2]):([0-5][0-9]):([0-5][0-9]) (A|P)M$/}};function y(u,C){return C=(0,f.default)(C,_),typeof u!="string"?!1:S[C.hourFormat][C.mode].test(u)}n.exports=a.default,n.exports.default=a.default}(Hg,Hg.exports)),Hg.exports}var Wg={exports:{}},p1;function ZP(){return p1||(p1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=u;var f=p(Dt());function p(C){return C&&C.__esModule?C:{default:C}}var _={loose:!1},S=["true","false","1","0"],y=[].concat(S,["yes","no"]);function u(C){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_;return(0,f.default)(C),R.loose?y.includes(C.toLowerCase()):S.includes(C)}n.exports=a.default,n.exports.default=a.default}(Wg,Wg.exports)),Wg.exports}var Kg={exports:{}},m1;function qP(){return m1||(m1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=ye;var f=p(Dt());function p(pe){return pe&&pe.__esModule?pe:{default:pe}}var _="([A-Za-z]{3}(-[A-Za-z]{3}){0,2})",S="(([a-zA-Z]{2,3}(-".concat(_,")?)|([a-zA-Z]{5,8}))"),y="([A-Za-z]{4})",u="([A-Za-z]{2}|\\d{3})",C="([A-Za-z0-9]{5,8}|(\\d[A-Z-a-z0-9]{3}))",R="(\\d|[A-W]|[Y-Z]|[a-w]|[y-z])",O="(".concat(R,"(-[A-Za-z0-9]{2,8})+)"),B="(x(-[A-Za-z0-9]{1,8})+)",z="((en-GB-oed)|(i-ami)|(i-bnn)|(i-default)|(i-enochian)|(i-hak)|(i-klingon)|(i-lux)|(i-mingo)|(i-navajo)|(i-pwn)|(i-tao)|(i-tay)|(i-tsu)|(sgn-BE-FR)|(sgn-BE-NL)|(sgn-CH-DE))",F="((art-lojban)|(cel-gaulish)|(no-bok)|(no-nyn)|(zh-guoyu)|(zh-hakka)|(zh-min)|(zh-min-nan)|(zh-xiang))",G="(".concat(z,"|").concat(F,")"),te="(-|_)",K="".concat(S,"(").concat(te).concat(y,")?(").concat(te).concat(u,")?(").concat(te).concat(C,")*(").concat(te).concat(O,")*(").concat(te).concat(B,")?"),X=new RegExp("(^".concat(B,"$)|(^").concat(G,"$)|(^").concat(K,"$)"));function ye(pe){return(0,f.default)(pe),X.test(pe)}n.exports=a.default,n.exports.default=a.default}(Kg,Kg.exports)),Kg.exports}var Yg={exports:{}},g1;function GP(){return g1||(g1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^(?!(1[3-9])|(20)|(3[3-9])|(4[0-9])|(5[0-9])|(60)|(7[3-9])|(8[1-9])|(9[0-2])|(9[3-9]))[0-9]{9}$/;function S(y){if((0,f.default)(y),!_.test(y))return!1;for(var u=0,C=0;C<y.length;C++)C%3===0?u+=y[C]*3:C%3===1?u+=y[C]*7:u+=y[C]*1;return u%10===0}n.exports=a.default,n.exports.default=a.default}(Yg,Yg.exports)),Yg.exports}var Bd={},y1;function HP(){if(y1)return Bd;y1=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.default=p,Bd.locales=void 0;var n=f(Dt()),a=Fm();function f(_){return _&&_.__esModule?_:{default:_}}function p(_){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-US",y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,n.default)(_);var u=_,C=y.ignore;if(C)if(C instanceof RegExp)u=u.replace(C,"");else if(typeof C=="string")u=u.replace(new RegExp("[".concat(C.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),"]"),"g"),"");else throw new Error("ignore should be instance of a String or RegExp");if(S in a.alpha)return a.alpha[S].test(u);throw new Error("Invalid locale '".concat(S,"'"))}return Bd.locales=Object.keys(a.alpha),Bd}var jd={},_1;function WP(){if(_1)return jd;_1=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.default=p,jd.locales=void 0;var n=f(Dt()),a=Fm();function f(_){return _&&_.__esModule?_:{default:_}}function p(_){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-US",y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,n.default)(_);var u=_,C=y.ignore;if(C)if(C instanceof RegExp)u=u.replace(C,"");else if(typeof C=="string")u=u.replace(new RegExp("[".concat(C.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),"]"),"g"),"");else throw new Error("ignore should be instance of a String or RegExp");if(S in a.alphanumeric)return a.alphanumeric[S].test(u);throw new Error("Invalid locale '".concat(S,"'"))}return jd.locales=Object.keys(a.alphanumeric),jd}var Xg={exports:{}},v1;function KP(){return v1||(v1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=y;var f=_(Dt()),p=Fm();function _(u){return u&&u.__esModule?u:{default:u}}var S=/^[0-9]+$/;function y(u,C){return(0,f.default)(u),C&&C.no_symbols?S.test(u):new RegExp("^[+-]?([0-9]*[".concat((C||{}).locale?p.decimal[C.locale]:".","])?[0-9]+$")).test(u)}n.exports=a.default,n.exports.default=a.default}(Xg,Xg.exports)),Xg.exports}var Nd={},x1;function YP(){if(x1)return Nd;x1=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.default=p,Nd.locales=void 0;var n=a(Dt());function a(_){return _&&_.__esModule?_:{default:_}}var f={AM:/^[A-Z]{2}\d{7}$/,AR:/^[A-Z]{3}\d{6}$/,AT:/^[A-Z]\d{7}$/,AU:/^[A-Z]\d{7}$/,AZ:/^[A-Z]{1}\d{8}$/,BE:/^[A-Z]{2}\d{6}$/,BG:/^\d{9}$/,BR:/^[A-Z]{2}\d{6}$/,BY:/^[A-Z]{2}\d{7}$/,CA:/^[A-Z]{2}\d{6}$/,CH:/^[A-Z]\d{7}$/,CN:/^G\d{8}$|^E(?![IO])[A-Z0-9]\d{7}$/,CY:/^[A-Z](\d{6}|\d{8})$/,CZ:/^\d{8}$/,DE:/^[CFGHJKLMNPRTVWXYZ0-9]{9}$/,DK:/^\d{9}$/,DZ:/^\d{9}$/,EE:/^([A-Z]\d{7}|[A-Z]{2}\d{7})$/,ES:/^[A-Z0-9]{2}([A-Z0-9]?)\d{6}$/,FI:/^[A-Z]{2}\d{7}$/,FR:/^\d{2}[A-Z]{2}\d{5}$/,GB:/^\d{9}$/,GR:/^[A-Z]{2}\d{7}$/,HR:/^\d{9}$/,HU:/^[A-Z]{2}(\d{6}|\d{7})$/,IE:/^[A-Z0-9]{2}\d{7}$/,IN:/^[A-Z]{1}-?\d{7}$/,ID:/^[A-C]\d{7}$/,IR:/^[A-Z]\d{8}$/,IS:/^(A)\d{7}$/,IT:/^[A-Z0-9]{2}\d{7}$/,JM:/^[Aa]\d{7}$/,JP:/^[A-Z]{2}\d{7}$/,KR:/^[MS]\d{8}$/,KZ:/^[a-zA-Z]\d{7}$/,LI:/^[a-zA-Z]\d{5}$/,LT:/^[A-Z0-9]{8}$/,LU:/^[A-Z0-9]{8}$/,LV:/^[A-Z0-9]{2}\d{7}$/,LY:/^[A-Z0-9]{8}$/,MT:/^\d{7}$/,MZ:/^([A-Z]{2}\d{7})|(\d{2}[A-Z]{2}\d{5})$/,MY:/^[AHK]\d{8}$/,MX:/^\d{10,11}$/,NL:/^[A-Z]{2}[A-Z0-9]{6}\d$/,NZ:/^([Ll]([Aa]|[Dd]|[Ff]|[Hh])|[Ee]([Aa]|[Pp])|[Nn])\d{6}$/,PH:/^([A-Z](\d{6}|\d{7}[A-Z]))|([A-Z]{2}(\d{6}|\d{7}))$/,PK:/^[A-Z]{2}\d{7}$/,PL:/^[A-Z]{2}\d{7}$/,PT:/^[A-Z]\d{6}$/,RO:/^\d{8,9}$/,RU:/^\d{9}$/,SE:/^\d{8}$/,SL:/^(P)[A-Z]\d{7}$/,SK:/^[0-9A-Z]\d{7}$/,TH:/^[A-Z]{1,2}\d{6,7}$/,TR:/^[A-Z]\d{8}$/,UA:/^[A-Z]{2}\d{6}$/,US:/^\d{9}$/,ZA:/^[TAMD]\d{8}$/};Nd.locales=Object.keys(f);function p(_,S){(0,n.default)(_);var y=_.replace(/\s/g,"").toUpperCase();return S.toUpperCase()in f&&f[S].test(y)}return Nd}var Qg={exports:{}},Jg={exports:{}},b1;function zv(){return b1||(b1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=u;var f=_(Dt()),p=_(yS());function _(C){return C&&C.__esModule?C:{default:C}}var S=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,y=/^[-+]?[0-9]+$/;function u(C,R){(0,f.default)(C),R=R||{};var O=R.allow_leading_zeroes===!1?S:y,B=!R.hasOwnProperty("min")||(0,p.default)(R.min)||C>=R.min,z=!R.hasOwnProperty("max")||(0,p.default)(R.max)||C<=R.max,F=!R.hasOwnProperty("lt")||(0,p.default)(R.lt)||C<R.lt,G=!R.hasOwnProperty("gt")||(0,p.default)(R.gt)||C>R.gt;return O.test(C)&&B&&z&&F&&G}n.exports=a.default,n.exports.default=a.default}(Jg,Jg.exports)),Jg.exports}var w1;function XP(){return w1||(w1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var f=p(zv());function p(S){return S&&S.__esModule?S:{default:S}}function _(S){return(0,f.default)(S,{allow_leading_zeroes:!1,min:0,max:65535})}n.exports=a.default,n.exports.default=a.default}(Qg,Qg.exports)),Qg.exports}var ey={exports:{}},S1;function QP(){return S1||(S1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var f=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S){return(0,f.default)(S),S===S.toLowerCase()}n.exports=a.default,n.exports.default=a.default}(ey,ey.exports)),ey.exports}var ty={exports:{}},T1;function JP(){return T1||(T1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var f=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S){return(0,f.default)(S),S===S.toUpperCase()}n.exports=a.default,n.exports.default=a.default}(ty,ty.exports)),ty.exports}var ry={exports:{}},M1;function eR(){return M1||(M1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=y;var f=p(Dt());function p(u){return u&&u.__esModule?u:{default:u}}var _=/^[0-9]{15}$/,S=/^\d{2}-\d{6}-\d{6}-\d{1}$/;function y(u,C){(0,f.default)(u),C=C||{};var R=_;if(C.allow_hyphens&&(R=S),!R.test(u))return!1;u=u.replace(/-/g,"");for(var O=0,B=2,z=14,F=0;F<z;F++){var G=u.substring(z-F-1,z-F),te=parseInt(G,10)*B;te>=10?O+=te%10+1:O+=te,B===1?B+=1:B-=1}var K=(10-O%10)%10;return K===parseInt(u.substring(14,15),10)}n.exports=a.default,n.exports.default=a.default}(ry,ry.exports)),ry.exports}var ny={exports:{}},A1;function tR(){return A1||(A1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^[\x00-\x7F]+$/;function S(y){return(0,f.default)(y),_.test(y)}n.exports=a.default,n.exports.default=a.default}(ny,ny.exports)),ny.exports}var Fd={},C1;function MS(){if(C1)return Fd;C1=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.default=p,Fd.fullWidth=void 0;var n=a(Dt());function a(_){return _&&_.__esModule?_:{default:_}}var f=Fd.fullWidth=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;function p(_){return(0,n.default)(_),f.test(_)}return Fd}var Ud={},E1;function AS(){if(E1)return Ud;E1=1,Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.default=p,Ud.halfWidth=void 0;var n=a(Dt());function a(_){return _&&_.__esModule?_:{default:_}}var f=Ud.halfWidth=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;function p(_){return(0,n.default)(_),f.test(_)}return Ud}var iy={exports:{}},P1;function rR(){return P1||(P1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=y;var f=S(Dt()),p=MS(),_=AS();function S(u){return u&&u.__esModule?u:{default:u}}function y(u){return(0,f.default)(u),p.fullWidth.test(u)&&_.halfWidth.test(u)}n.exports=a.default,n.exports.default=a.default}(iy,iy.exports)),iy.exports}var ay={exports:{}},R1;function nR(){return R1||(R1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/[^\x00-\x7F]/;function S(y){return(0,f.default)(y),_.test(y)}n.exports=a.default,n.exports.default=a.default}(ay,ay.exports)),ay.exports}var sy={exports:{}},oy={exports:{}},I1;function iR(){return I1||(I1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=f;function f(p,_){var S=p.join("");return new RegExp(S,_)}n.exports=a.default,n.exports.default=a.default}(oy,oy.exports)),oy.exports}var D1;function aR(){return D1||(D1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=y;var f=_(Dt()),p=_(iR());function _(u){return u&&u.__esModule?u:{default:u}}var S=(0,p.default)(["^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)","(?:-((?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*))*))","?(?:\\+([0-9a-z-]+(?:\\.[0-9a-z-]+)*))?$"],"i");function y(u){return(0,f.default)(u),S.test(u)}n.exports=a.default,n.exports.default=a.default}(sy,sy.exports)),sy.exports}var ly={exports:{}},L1;function sR(){return L1||(L1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;function S(y){return(0,f.default)(y),_.test(y)}n.exports=a.default,n.exports.default=a.default}(ly,ly.exports)),ly.exports}var uy={exports:{}},cy={exports:{}},z1;function oR(){return z1||(z1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var f=function(_,S){return _.some(function(y){return S===y})};a.default=f,n.exports=a.default,n.exports.default=a.default}(cy,cy.exports)),cy.exports}var k1;function lR(){return k1||(k1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=O;var f=y(fs()),p=y(Dt()),_=y(oR()),S=Fm();function y(B){return B&&B.__esModule?B:{default:B}}function u(B){var z=new RegExp("^[-+]?([0-9]+)?(\\".concat(S.decimal[B.locale],"[0-9]{").concat(B.decimal_digits,"})").concat(B.force_decimal?"":"?","$"));return z}var C={force_decimal:!1,decimal_digits:"1,",locale:"en-US"},R=["","-","+"];function O(B,z){if((0,p.default)(B),z=(0,f.default)(z,C),z.locale in S.decimal)return!(0,_.default)(R,B.replace(/ /g,""))&&u(z).test(B);throw new Error("Invalid locale '".concat(z.locale,"'"))}n.exports=a.default,n.exports.default=a.default}(uy,uy.exports)),uy.exports}var hy={exports:{}},O1;function CS(){return O1||(O1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^(0x|0h)?[0-9A-F]+$/i;function S(y){return(0,f.default)(y),_.test(y)}n.exports=a.default,n.exports.default=a.default}(hy,hy.exports)),hy.exports}var fy={exports:{}},B1;function uR(){return B1||(B1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^(0o)?[0-7]+$/i;function S(y){return(0,f.default)(y),_.test(y)}n.exports=a.default,n.exports.default=a.default}(fy,fy.exports)),fy.exports}var dy={exports:{}},j1;function cR(){return j1||(j1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=_(Dt()),p=_(vS());function _(y){return y&&y.__esModule?y:{default:y}}function S(y,u){return(0,f.default)(y),(0,p.default)(y)%parseInt(u,10)===0}n.exports=a.default,n.exports.default=a.default}(dy,dy.exports)),dy.exports}var py={exports:{}},N1;function hR(){return N1||(N1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^#?([0-9A-F]{3}|[0-9A-F]{4}|[0-9A-F]{6}|[0-9A-F]{8})$/i;function S(y){return(0,f.default)(y),_.test(y)}n.exports=a.default,n.exports.default=a.default}(py,py.exports)),py.exports}var my={exports:{}},F1;function fR(){return F1||(F1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=O;var f=p(Dt());function p(B){return B&&B.__esModule?B:{default:B}}function _(B){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},_(B)}var S=/^rgb\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){2}([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\)$/,y=/^rgba\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){3}(0?\.\d|1(\.0)?|0(\.0)?)\)$/,u=/^rgb\((([0-9]%|[1-9][0-9]%|100%),){2}([0-9]%|[1-9][0-9]%|100%)\)$/,C=/^rgba\((([0-9]%|[1-9][0-9]%|100%),){3}(0?\.\d|1(\.0)?|0(\.0)?)\)$/,R=/^rgba?/;function O(B,z){(0,f.default)(B);var F=!1,G=!0;if(_(z)!=="object"?arguments.length>=2&&(G=arguments[1]):(F=z.allowSpaces!==void 0?z.allowSpaces:F,G=z.includePercentValues!==void 0?z.includePercentValues:G),F){if(!R.test(B))return!1;B=B.replace(/\s/g,"")}return G?S.test(B)||y.test(B)||u.test(B)||C.test(B):S.test(B)||y.test(B)}n.exports=a.default,n.exports.default=a.default}(my,my.exports)),my.exports}var gy={exports:{}},U1;function dR(){return U1||(U1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=y;var f=p(Dt());function p(u){return u&&u.__esModule?u:{default:u}}var _=/^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(,(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}(,((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?))?\)$/i,S=/^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(\s(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}\s?(\/\s((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?)\s?)?\)$/i;function y(u){(0,f.default)(u);var C=u.replace(/\s+/g," ").replace(/\s?(hsla?\(|\)|,)\s?/ig,"$1");return C.indexOf(",")!==-1?_.test(C):S.test(C)}n.exports=a.default,n.exports.default=a.default}(gy,gy.exports)),gy.exports}var yy={exports:{}},V1;function pR(){return V1||(V1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^[A-Z]{2}[0-9A-Z]{3}\d{2}\d{5}$/;function S(y){return(0,f.default)(y),_.test(y)}n.exports=a.default,n.exports.default=a.default}(yy,yy.exports)),yy.exports}var Vd={},$1;function mR(){if($1)return Vd;$1=1,Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.default=y,Vd.locales=void 0;var n=a(Dt());function a(u){return u&&u.__esModule?u:{default:u}}var f={AD:/^(AD[0-9]{2})\d{8}[A-Z0-9]{12}$/,AE:/^(AE[0-9]{2})\d{3}\d{16}$/,AL:/^(AL[0-9]{2})\d{8}[A-Z0-9]{16}$/,AT:/^(AT[0-9]{2})\d{16}$/,AZ:/^(AZ[0-9]{2})[A-Z0-9]{4}\d{20}$/,BA:/^(BA[0-9]{2})\d{16}$/,BE:/^(BE[0-9]{2})\d{12}$/,BG:/^(BG[0-9]{2})[A-Z]{4}\d{6}[A-Z0-9]{8}$/,BH:/^(BH[0-9]{2})[A-Z]{4}[A-Z0-9]{14}$/,BR:/^(BR[0-9]{2})\d{23}[A-Z]{1}[A-Z0-9]{1}$/,BY:/^(BY[0-9]{2})[A-Z0-9]{4}\d{20}$/,CH:/^(CH[0-9]{2})\d{5}[A-Z0-9]{12}$/,CR:/^(CR[0-9]{2})\d{18}$/,CY:/^(CY[0-9]{2})\d{8}[A-Z0-9]{16}$/,CZ:/^(CZ[0-9]{2})\d{20}$/,DE:/^(DE[0-9]{2})\d{18}$/,DK:/^(DK[0-9]{2})\d{14}$/,DO:/^(DO[0-9]{2})[A-Z]{4}\d{20}$/,DZ:/^(DZ\d{24})$/,EE:/^(EE[0-9]{2})\d{16}$/,EG:/^(EG[0-9]{2})\d{25}$/,ES:/^(ES[0-9]{2})\d{20}$/,FI:/^(FI[0-9]{2})\d{14}$/,FO:/^(FO[0-9]{2})\d{14}$/,FR:/^(FR[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,GB:/^(GB[0-9]{2})[A-Z]{4}\d{14}$/,GE:/^(GE[0-9]{2})[A-Z0-9]{2}\d{16}$/,GI:/^(GI[0-9]{2})[A-Z]{4}[A-Z0-9]{15}$/,GL:/^(GL[0-9]{2})\d{14}$/,GR:/^(GR[0-9]{2})\d{7}[A-Z0-9]{16}$/,GT:/^(GT[0-9]{2})[A-Z0-9]{4}[A-Z0-9]{20}$/,HR:/^(HR[0-9]{2})\d{17}$/,HU:/^(HU[0-9]{2})\d{24}$/,IE:/^(IE[0-9]{2})[A-Z]{4}\d{14}$/,IL:/^(IL[0-9]{2})\d{19}$/,IQ:/^(IQ[0-9]{2})[A-Z]{4}\d{15}$/,IR:/^(IR[0-9]{2})0\d{2}0\d{18}$/,IS:/^(IS[0-9]{2})\d{22}$/,IT:/^(IT[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,JO:/^(JO[0-9]{2})[A-Z]{4}\d{22}$/,KW:/^(KW[0-9]{2})[A-Z]{4}[A-Z0-9]{22}$/,KZ:/^(KZ[0-9]{2})\d{3}[A-Z0-9]{13}$/,LB:/^(LB[0-9]{2})\d{4}[A-Z0-9]{20}$/,LC:/^(LC[0-9]{2})[A-Z]{4}[A-Z0-9]{24}$/,LI:/^(LI[0-9]{2})\d{5}[A-Z0-9]{12}$/,LT:/^(LT[0-9]{2})\d{16}$/,LU:/^(LU[0-9]{2})\d{3}[A-Z0-9]{13}$/,LV:/^(LV[0-9]{2})[A-Z]{4}[A-Z0-9]{13}$/,MA:/^(MA[0-9]{26})$/,MC:/^(MC[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,MD:/^(MD[0-9]{2})[A-Z0-9]{20}$/,ME:/^(ME[0-9]{2})\d{18}$/,MK:/^(MK[0-9]{2})\d{3}[A-Z0-9]{10}\d{2}$/,MR:/^(MR[0-9]{2})\d{23}$/,MT:/^(MT[0-9]{2})[A-Z]{4}\d{5}[A-Z0-9]{18}$/,MU:/^(MU[0-9]{2})[A-Z]{4}\d{19}[A-Z]{3}$/,MZ:/^(MZ[0-9]{2})\d{21}$/,NL:/^(NL[0-9]{2})[A-Z]{4}\d{10}$/,NO:/^(NO[0-9]{2})\d{11}$/,PK:/^(PK[0-9]{2})[A-Z0-9]{4}\d{16}$/,PL:/^(PL[0-9]{2})\d{24}$/,PS:/^(PS[0-9]{2})[A-Z]{4}[A-Z0-9]{21}$/,PT:/^(PT[0-9]{2})\d{21}$/,QA:/^(QA[0-9]{2})[A-Z]{4}[A-Z0-9]{21}$/,RO:/^(RO[0-9]{2})[A-Z]{4}[A-Z0-9]{16}$/,RS:/^(RS[0-9]{2})\d{18}$/,SA:/^(SA[0-9]{2})\d{2}[A-Z0-9]{18}$/,SC:/^(SC[0-9]{2})[A-Z]{4}\d{20}[A-Z]{3}$/,SE:/^(SE[0-9]{2})\d{20}$/,SI:/^(SI[0-9]{2})\d{15}$/,SK:/^(SK[0-9]{2})\d{20}$/,SM:/^(SM[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,SV:/^(SV[0-9]{2})[A-Z0-9]{4}\d{20}$/,TL:/^(TL[0-9]{2})\d{19}$/,TN:/^(TN[0-9]{2})\d{20}$/,TR:/^(TR[0-9]{2})\d{5}[A-Z0-9]{17}$/,UA:/^(UA[0-9]{2})\d{6}[A-Z0-9]{19}$/,VA:/^(VA[0-9]{2})\d{18}$/,VG:/^(VG[0-9]{2})[A-Z]{4}\d{16}$/,XK:/^(XK[0-9]{2})\d{16}$/};function p(u){var C=u.filter(function(R){return!(R in f)});return!(C.length>0)}function _(u,C){var R=u.replace(/[\s\-]+/gi,"").toUpperCase(),O=R.slice(0,2).toUpperCase(),B=O in f;if(C.whitelist){if(!p(C.whitelist))return!1;var z=C.whitelist.includes(O);if(!z)return!1}if(C.blacklist){var F=C.blacklist.includes(O);if(F)return!1}return B&&f[O].test(R)}function S(u){var C=u.replace(/[^A-Z0-9]+/gi,"").toUpperCase(),R=C.slice(4)+C.slice(0,4),O=R.replace(/[A-Z]/g,function(z){return z.charCodeAt(0)-55}),B=O.match(/\d{1,7}/g).reduce(function(z,F){return Number(z+F)%97},"");return B===1}function y(u){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,n.default)(u),_(u,C)&&S(u)}return Vd.locales=Object.keys(f),Vd}var _y={exports:{}},$d={},Z1;function ES(){if(Z1)return $d;Z1=1,Object.defineProperty($d,"__esModule",{value:!0}),$d.CountryCodes=void 0,$d.default=p;var n=a(Dt());function a(_){return _&&_.__esModule?_:{default:_}}var f=new Set(["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"]);function p(_){return(0,n.default)(_),f.has(_.toUpperCase())}return $d.CountryCodes=f,$d}var q1;function gR(){return q1||(q1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=y;var f=_(Dt()),p=ES();function _(u){return u&&u.__esModule?u:{default:u}}var S=/^[A-Za-z]{6}[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/;function y(u){(0,f.default)(u);var C=u.slice(4,6).toUpperCase();return!p.CountryCodes.has(C)&&C!=="XK"?!1:S.test(u)}n.exports=a.default,n.exports.default=a.default}(_y,_y.exports)),_y.exports}var vy={exports:{}},G1;function yR(){return G1||(G1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^[a-f0-9]{32}$/;function S(y){return(0,f.default)(y),_.test(y)}n.exports=a.default,n.exports.default=a.default}(vy,vy.exports)),vy.exports}var xy={exports:{}},H1;function _R(){return H1||(H1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _={md5:32,md4:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8};function S(y,u){(0,f.default)(y);var C=new RegExp("^[a-fA-F0-9]{".concat(_[u],"}$"));return C.test(y)}n.exports=a.default,n.exports.default=a.default}(xy,xy.exports)),xy.exports}var by={exports:{}},wy={exports:{}},W1;function PS(){return W1||(W1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=C;var f=_(Dt()),p=_(fs());function _(R){return R&&R.__esModule?R:{default:R}}var S=/[^A-Z0-9+\/=]/i,y=/^[A-Z0-9_\-]*$/i,u={urlSafe:!1};function C(R,O){(0,f.default)(R),O=(0,p.default)(O,u);var B=R.length;if(O.urlSafe)return y.test(R);if(B%4!==0||S.test(R))return!1;var z=R.indexOf("=");return z===-1||z===B-1||z===B-2&&R[B-1]==="="}n.exports=a.default,n.exports.default=a.default}(wy,wy.exports)),wy.exports}var K1;function vR(){return K1||(K1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=_(Dt()),p=_(PS());function _(y){return y&&y.__esModule?y:{default:y}}function S(y){(0,f.default)(y);var u=y.split("."),C=u.length;return C!==3?!1:u.reduce(function(R,O){return R&&(0,p.default)(O,{urlSafe:!0})},!0)}n.exports=a.default,n.exports.default=a.default}(by,by.exports)),by.exports}var Sy={exports:{}},Y1;function xR(){return Y1||(Y1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=u;var f=_(Dt()),p=_(fs());function _(C){return C&&C.__esModule?C:{default:C}}function S(C){"@babel/helpers - typeof";return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},S(C)}var y={allow_primitives:!1};function u(C,R){(0,f.default)(C);try{R=(0,p.default)(R,y);var O=[];R.allow_primitives&&(O=[null,!1,!0]);var B=JSON.parse(C);return O.includes(B)||!!B&&S(B)==="object"}catch{}return!1}n.exports=a.default,n.exports.default=a.default}(Sy,Sy.exports)),Sy.exports}var Ty={exports:{}},X1;function bR(){return X1||(X1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=y;var f=_(Dt()),p=_(fs());function _(u){return u&&u.__esModule?u:{default:u}}var S={ignore_whitespace:!1};function y(u,C){return(0,f.default)(u),C=(0,p.default)(C,S),(C.ignore_whitespace?u.trim().length:u.length)===0}n.exports=a.default,n.exports.default=a.default}(Ty,Ty.exports)),Ty.exports}var My={exports:{}},Q1;function wR(){return Q1||(Q1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}function _(y){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},_(y)}function S(y,u){(0,f.default)(y);var C,R;_(u)==="object"?(C=u.min||0,R=u.max):(C=arguments[1]||0,R=arguments[2]);var O=y.match(/(\uFE0F|\uFE0E)/g)||[],B=y.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],z=y.length-O.length-B.length,F=z>=C&&(typeof R>"u"||z<=R);return F&&Array.isArray(u==null?void 0:u.discreteLengths)?u.discreteLengths.some(function(G){return G===z}):F}n.exports=a.default,n.exports.default=a.default}(My,My.exports)),My.exports}var Ay={exports:{}},J1;function SR(){return J1||(J1=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var f=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S){return(0,f.default)(S),/^[0-7][0-9A-HJKMNP-TV-Z]{25}$/i.test(S)}n.exports=a.default,n.exports.default=a.default}(Ay,Ay.exports)),Ay.exports}var Cy={exports:{}},eb;function TR(){return eb||(eb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _={1:/^[0-9A-F]{8}-[0-9A-F]{4}-1[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,2:/^[0-9A-F]{8}-[0-9A-F]{4}-2[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,6:/^[0-9A-F]{8}-[0-9A-F]{4}-6[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,7:/^[0-9A-F]{8}-[0-9A-F]{4}-7[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,8:/^[0-9A-F]{8}-[0-9A-F]{4}-8[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,nil:/^00000000-0000-0000-0000-000000000000$/i,max:/^ffffffff-ffff-ffff-ffff-ffffffffffff$/i,all:/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i};function S(y,u){return(0,f.default)(y),u==null&&(u="all"),u in _?_[u].test(y):!1}n.exports=a.default,n.exports.default=a.default}(Cy,Cy.exports)),Cy.exports}var Ey={exports:{}},tb;function MR(){return tb||(tb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=_(Dt()),p=_(CS());function _(y){return y&&y.__esModule?y:{default:y}}function S(y){return(0,f.default)(y),(0,p.default)(y)&&y.length===24}n.exports=a.default,n.exports.default=a.default}(Ey,Ey.exports)),Ey.exports}var Py={exports:{}},rb;function AR(){return rb||(rb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var f=p(Dv());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){var u=(y==null?void 0:y.comparisonDate)||y||Date().toString(),C=(0,f.default)(u),R=(0,f.default)(S);return!!(R&&C&&R>C)}n.exports=a.default,n.exports.default=a.default}(Py,Py.exports)),Py.exports}var Ry={exports:{}},nb;function CR(){return nb||(nb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=_(Dt()),p=_(Dv());function _(y){return y&&y.__esModule?y:{default:y}}function S(y){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:String(new Date);(0,f.default)(y);var C=(0,p.default)(u),R=(0,p.default)(y);return!!(R&&C&&R<C)}n.exports=a.default,n.exports.default=a.default}(Ry,Ry.exports)),Ry.exports}var Iy={exports:{}},ib;function ER(){return ib||(ib=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=y;var f=_(Dt()),p=_(xS());function _(u){return u&&u.__esModule?u:{default:u}}function S(u){"@babel/helpers - typeof";return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},S(u)}function y(u,C){(0,f.default)(u);var R;if(Object.prototype.toString.call(C)==="[object Array]"){var O=[];for(R in C)({}).hasOwnProperty.call(C,R)&&(O[R]=(0,p.default)(C[R]));return O.indexOf(u)>=0}else{if(S(C)==="object")return C.hasOwnProperty(u);if(C&&typeof C.indexOf=="function")return C.indexOf(u)>=0}return!1}n.exports=a.default,n.exports.default=a.default}(Iy,Iy.exports)),Iy.exports}var Dy={exports:{}},ab;function RS(){return ab||(ab=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var f=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S){(0,f.default)(S);for(var y=S.replace(/[- ]+/g,""),u=0,C,R,O,B=y.length-1;B>=0;B--)C=y.substring(B,B+1),R=parseInt(C,10),O?(R*=2,R>=10?u+=R%10+1:u+=R):u+=R,O=!O;return!!(u%10===0&&y)}n.exports=a.default,n.exports.default=a.default}(Dy,Dy.exports)),Dy.exports}var Ly={exports:{}},sb;function PR(){return sb||(sb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=u;var f=_(Dt()),p=_(RS());function _(C){return C&&C.__esModule?C:{default:C}}var S={amex:/^3[47][0-9]{13}$/,dinersclub:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,discover:/^6(?:011|5[0-9][0-9])[0-9]{12,15}$/,jcb:/^(?:2131|1800|35\d{3})\d{11}$/,mastercard:/^5[1-5][0-9]{2}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$/,unionpay:/^(6[27][0-9]{14}|^(81[0-9]{14,17}))$/,visa:/^(?:4[0-9]{12})(?:[0-9]{3,6})?$/},y=function(){var C=[];for(var R in S)S.hasOwnProperty(R)&&C.push(S[R]);return C}();function u(C){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,f.default)(C);var O=R.provider,B=C.replace(/[- ]+/g,"");if(O&&O.toLowerCase()in S){if(!S[O.toLowerCase()].test(B))return!1}else{if(O&&!(O.toLowerCase()in S))throw new Error("".concat(O," is not a valid credit card provider."));if(!y.some(function(z){return z.test(B)}))return!1}return(0,p.default)(C)}n.exports=a.default,n.exports.default=a.default}(Ly,Ly.exports)),Ly.exports}var zy={exports:{}},ob;function RR(){return ob||(ob=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=y;var f=_(Dt()),p=_(zv());function _(u){return u&&u.__esModule?u:{default:u}}var S={PL:function(C){(0,f.default)(C);var R={1:1,2:3,3:7,4:9,5:1,6:3,7:7,8:9,9:1,10:3,11:0};if(C!=null&&C.length===11&&(0,p.default)(C,{allow_leading_zeroes:!0})){var O=C.split("").slice(0,-1),B=O.reduce(function(G,te,K){return G+Number(te)*R[K+1]},0),z=B%10,F=Number(C.charAt(C.length-1));if(z===0&&F===0||F===10-z)return!0}return!1},ES:function(C){(0,f.default)(C);var R=/^[0-9X-Z][0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKE]$/,O={X:0,Y:1,Z:2},B=["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"],z=C.trim().toUpperCase();if(!R.test(z))return!1;var F=z.slice(0,-1).replace(/[X,Y,Z]/g,function(G){return O[G]});return z.endsWith(B[F%23])},FI:function(C){if((0,f.default)(C),C.length!==11||!C.match(/^\d{6}[\-A\+]\d{3}[0-9ABCDEFHJKLMNPRSTUVWXY]{1}$/))return!1;var R="0123456789ABCDEFHJKLMNPRSTUVWXY",O=parseInt(C.slice(0,6),10)*1e3+parseInt(C.slice(7,10),10),B=O%31,z=R[B];return z===C.slice(10,11)},IN:function(C){var R=/^[1-9]\d{3}\s?\d{4}\s?\d{4}$/,O=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],B=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],z=C.trim();if(!R.test(z))return!1;var F=0,G=z.replace(/\s/g,"").split("").map(Number).reverse();return G.forEach(function(te,K){F=O[F][B[K%8][te]]}),F===0},IR:function(C){if(!C.match(/^\d{10}$/)||(C="0000".concat(C).slice(C.length-6),parseInt(C.slice(3,9),10)===0))return!1;for(var R=parseInt(C.slice(9,10),10),O=0,B=0;B<9;B++)O+=parseInt(C.slice(B,B+1),10)*(10-B);return O%=11,O<2&&R===O||O>=2&&R===11-O},IT:function(C){return C.length!==9||C==="CA00000AA"?!1:C.search(/C[A-Z]\d{5}[A-Z]{2}/i)>-1},NO:function(C){var R=C.trim();if(isNaN(Number(R))||R.length!==11||R==="00000000000")return!1;var O=R.split("").map(Number),B=(11-(3*O[0]+7*O[1]+6*O[2]+1*O[3]+8*O[4]+9*O[5]+4*O[6]+5*O[7]+2*O[8])%11)%11,z=(11-(5*O[0]+4*O[1]+3*O[2]+2*O[3]+7*O[4]+6*O[5]+5*O[6]+4*O[7]+3*O[8]+2*B)%11)%11;return!(B!==O[9]||z!==O[10])},TH:function(C){if(!C.match(/^[1-8]\d{12}$/))return!1;for(var R=0,O=0;O<12;O++)R+=parseInt(C[O],10)*(13-O);return C[12]===((11-R%11)%10).toString()},LK:function(C){var R=/^[1-9]\d{8}[vx]$/i,O=/^[1-9]\d{11}$/i;return C.length===10&&R.test(C)?!0:!!(C.length===12&&O.test(C))},"he-IL":function(C){var R=/^\d{9}$/,O=C.trim();if(!R.test(O))return!1;for(var B=O,z=0,F,G=0;G<B.length;G++)F=Number(B[G])*(G%2+1),z+=F>9?F-9:F;return z%10===0},"ar-LY":function(C){var R=/^(1|2)\d{11}$/,O=C.trim();return!!R.test(O)},"ar-TN":function(C){var R=/^\d{8}$/,O=C.trim();return!!R.test(O)},"zh-CN":function(C){var R=["11","12","13","14","15","21","22","23","31","32","33","34","35","36","37","41","42","43","44","45","46","50","51","52","53","54","61","62","63","64","65","71","81","82","91"],O=["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"],B=["1","0","X","9","8","7","6","5","4","3","2"],z=function(xe){return R.includes(xe)},F=function(xe){var Se=parseInt(xe.substring(0,4),10),ke=parseInt(xe.substring(4,6),10),it=parseInt(xe.substring(6),10),Ke=new Date(Se,ke-1,it);return Ke>new Date?!1:Ke.getFullYear()===Se&&Ke.getMonth()===ke-1&&Ke.getDate()===it},G=function(xe){for(var Se=xe.substring(0,17),ke=0,it=0;it<17;it++)ke+=parseInt(Se.charAt(it),10)*parseInt(O[it],10);var Ke=ke%11;return B[Ke]},te=function(xe){return G(xe)===xe.charAt(17).toUpperCase()},K=function(xe){var Se=/^[1-9]\d{7}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}$/.test(xe);if(!Se)return!1;var ke=xe.substring(0,2);if(Se=z(ke),!Se)return!1;var it="19".concat(xe.substring(6,12));return Se=F(it),!!Se},X=function(xe){var Se=/^[1-9]\d{5}[1-9]\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}(\d|x|X)$/.test(xe);if(!Se)return!1;var ke=xe.substring(0,2);if(Se=z(ke),!Se)return!1;var it=xe.substring(6,14);return Se=F(it),Se?te(xe):!1},ye=function(xe){var Se=/^\d{15}|(\d{17}(\d|x|X))$/.test(xe);return Se?xe.length===15?K(xe):X(xe):!1};return ye(C)},"zh-HK":function(C){C=C.trim();var R=/^[A-Z]{1,2}[0-9]{6}((\([0-9A]\))|(\[[0-9A]\])|([0-9A]))$/,O=/^[0-9]$/;if(C=C.toUpperCase(),!R.test(C))return!1;C=C.replace(/\[|\]|\(|\)/g,""),C.length===8&&(C="3".concat(C));for(var B=0,z=0;z<=7;z++){var F=void 0;O.test(C[z])?F=C[z]:F=(C[z].charCodeAt(0)-55)%11,B+=F*(9-z)}B%=11;var G;return B===0?G="0":B===1?G="A":G=String(11-B),G===C[C.length-1]},"zh-TW":function(C){var R={A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:34,J:18,K:19,L:20,M:21,N:22,O:35,P:23,Q:24,R:25,S:26,T:27,U:28,V:29,W:32,X:30,Y:31,Z:33},O=C.trim().toUpperCase();return/^[A-Z][0-9]{9}$/.test(O)?Array.from(O).reduce(function(B,z,F){if(F===0){var G=R[z];return G%10*9+Math.floor(G/10)}return F===9?(10-B%10-Number(z))%10===0:B+Number(z)*(9-F)},0):!1},PK:function(C){var R=/^[1-7][0-9]{4}-[0-9]{7}-[1-9]$/,O=C.trim();return R.test(O)}};function y(u,C){if((0,f.default)(u),C in S)return S[C](u);if(C==="any"){for(var R in S)if(S.hasOwnProperty(R)){var O=S[R];if(O(u))return!0}return!1}throw new Error("Invalid locale '".concat(C,"'"))}n.exports=a.default,n.exports.default=a.default}(zy,zy.exports)),zy.exports}var ky={exports:{}},lb;function IR(){return lb||(lb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=R;var f=p(Dt());function p(O){return O&&O.__esModule?O:{default:O}}var _=8,S=14,y=/^(\d{8}|\d{13}|\d{14})$/;function u(O,B){return O===_||O===S?B%2===0?3:1:B%2===0?1:3}function C(O){var B=O.slice(0,-1).split("").map(function(F,G){return Number(F)*u(O.length,G)}).reduce(function(F,G){return F+G},0),z=10-B%10;return z<10?z:0}function R(O){(0,f.default)(O);var B=Number(O.slice(-1));return y.test(O)&&B===C(O)}n.exports=a.default,n.exports.default=a.default}(ky,ky.exports)),ky.exports}var Oy={exports:{}},ub;function DR(){return ub||(ub=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/;function S(y){if((0,f.default)(y),!_.test(y))return!1;for(var u=!0,C=0,R=y.length-2;R>=0;R--)if(y[R]>="A"&&y[R]<="Z")for(var O=y[R].charCodeAt(0)-55,B=O%10,z=Math.trunc(O/10),F=0,G=[B,z];F<G.length;F++){var te=G[F];u?te>=5?C+=1+(te-5)*2:C+=te*2:C+=te,u=!u}else{var K=y[R].charCodeAt(0)-48;u?K>=5?C+=1+(K-5)*2:C+=K*2:C+=K,u=!u}var X=Math.trunc((C+9)/10)*10-C;return+y[y.length-1]===X}n.exports=a.default,n.exports.default=a.default}(Oy,Oy.exports)),Oy.exports}var By={exports:{}},cb;function LR(){return cb||(cb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=u;var f=p(Dt());function p(C){return C&&C.__esModule?C:{default:C}}var _=/^(?:[0-9]{9}X|[0-9]{10})$/,S=/^(?:[0-9]{13})$/,y=[1,3];function u(C,R){(0,f.default)(C);var O=String((R==null?void 0:R.version)||R);if(!(R!=null&&R.version||R))return u(C,{version:10})||u(C,{version:13});var B=C.replace(/[\s-]+/g,""),z=0;if(O==="10"){if(!_.test(B))return!1;for(var F=0;F<O-1;F++)z+=(F+1)*B.charAt(F);if(B.charAt(9)==="X"?z+=10*10:z+=10*B.charAt(9),z%11===0)return!0}else if(O==="13"){if(!S.test(B))return!1;for(var G=0;G<12;G++)z+=y[G%2]*B.charAt(G);if(B.charAt(12)-(10-z%10)%10===0)return!0}return!1}n.exports=a.default,n.exports.default=a.default}(By,By.exports)),By.exports}var jy={exports:{}},hb;function zR(){return hb||(hb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _="^\\d{4}-?\\d{3}[\\dX]$";function S(y){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,f.default)(y);var C=_;if(C=u.require_hyphen?C.replace("?",""):C,C=u.case_sensitive?new RegExp(C):new RegExp(C,"i"),!C.test(y))return!1;for(var R=y.replace("-","").toUpperCase(),O=0,B=0;B<R.length;B++){var z=R[B];O+=(z==="X"?10:+z)*(8-B)}return O%11===0}n.exports=a.default,n.exports.default=a.default}(jy,jy.exports)),jy.exports}var Ny={exports:{}},zf={},fb;function IS(){if(fb)return zf;fb=1,Object.defineProperty(zf,"__esModule",{value:!0}),zf.iso7064Check=n,zf.luhnCheck=a,zf.reverseMultiplyAndSum=f,zf.verhoeffCheck=p;function n(_){for(var S=10,y=0;y<_.length-1;y++)S=(parseInt(_[y],10)+S)%10===0?10*2%11:(parseInt(_[y],10)+S)%10*2%11;return S=S===1?0:11-S,S===parseInt(_[10],10)}function a(_){for(var S=0,y=!1,u=_.length-1;u>=0;u--){if(y){var C=parseInt(_[u],10)*2;C>9?S+=C.toString().split("").map(function(R){return parseInt(R,10)}).reduce(function(R,O){return R+O},0):S+=C}else S+=parseInt(_[u],10);y=!y}return S%10===0}function f(_,S){for(var y=0,u=0;u<_.length;u++)y+=_[u]*(S-u);return y}function p(_){for(var S=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],y=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],u=_.split("").reverse().join(""),C=0,R=0;R<u.length;R++)C=S[C][y[R%8][parseInt(u[R],10)]];return C===0}return zf}var db;function kR(){return db||(db=1,function(n,a){function f(we){"@babel/helpers - typeof";return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Re){return typeof Re}:function(Re){return Re&&typeof Symbol=="function"&&Re.constructor===Symbol&&Re!==Symbol.prototype?"symbol":typeof Re},f(we)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=Yn;var p=C(Dt()),_=u(IS()),S=C(TS());function y(we){if(typeof WeakMap!="function")return null;var Re=new WeakMap,We=new WeakMap;return(y=function(xt){return xt?We:Re})(we)}function u(we,Re){if(we&&we.__esModule)return we;if(we===null||f(we)!="object"&&typeof we!="function")return{default:we};var We=y(Re);if(We&&We.has(we))return We.get(we);var vt={__proto__:null},xt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Et in we)if(Et!=="default"&&{}.hasOwnProperty.call(we,Et)){var Ut=xt?Object.getOwnPropertyDescriptor(we,Et):null;Ut&&(Ut.get||Ut.set)?Object.defineProperty(vt,Et,Ut):vt[Et]=we[Et]}return vt.default=we,We&&We.set(we,vt),vt}function C(we){return we&&we.__esModule?we:{default:we}}function R(we){return F(we)||z(we)||B(we)||O()}function O(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B(we,Re){if(we){if(typeof we=="string")return G(we,Re);var We={}.toString.call(we).slice(8,-1);return We==="Object"&&we.constructor&&(We=we.constructor.name),We==="Map"||We==="Set"?Array.from(we):We==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(We)?G(we,Re):void 0}}function z(we){if(typeof Symbol<"u"&&we[Symbol.iterator]!=null||we["@@iterator"]!=null)return Array.from(we)}function F(we){if(Array.isArray(we))return G(we)}function G(we,Re){(Re==null||Re>we.length)&&(Re=we.length);for(var We=0,vt=Array(Re);We<Re;We++)vt[We]=we[We];return vt}function te(we){var Re=we.slice(0,2),We=parseInt(we.slice(2,4),10);We>40?(We-=40,Re="20".concat(Re)):We>20?(We-=20,Re="18".concat(Re)):Re="19".concat(Re),We<10&&(We="0".concat(We));var vt="".concat(Re,"/").concat(We,"/").concat(we.slice(4,6));if(!(0,S.default)(vt,"YYYY/MM/DD"))return!1;for(var xt=we.split("").map(function(_r){return parseInt(_r,10)}),Et=[2,4,8,5,10,9,7,3,6],Ut=0,ur=0;ur<Et.length;ur++)Ut+=xt[ur]*Et[ur];return Ut=Ut%11===10?0:Ut%11,Ut===xt[9]}function K(we){var Re=we.split(""),We=Re.filter(function(xt,Et){return Et%2}).map(function(xt){return Number(xt)*2}).join("").split(""),vt=Re.filter(function(xt,Et){return!(Et%2)}).concat(We).map(function(xt){return Number(xt)}).reduce(function(xt,Et){return xt+Et});return vt%10===0}function X(we){we=we.replace(/\W/,"");var Re=parseInt(we.slice(0,2),10);if(we.length===10)Re<54?Re="20".concat(Re):Re="19".concat(Re);else{if(we.slice(6)==="000")return!1;if(Re<54)Re="19".concat(Re);else return!1}Re.length===3&&(Re=[Re.slice(0,2),"0",Re.slice(2)].join(""));var We=parseInt(we.slice(2,4),10);if(We>50&&(We-=50),We>20){if(parseInt(Re,10)<2004)return!1;We-=20}We<10&&(We="0".concat(We));var vt="".concat(Re,"/").concat(We,"/").concat(we.slice(4,6));if(!(0,S.default)(vt,"YYYY/MM/DD"))return!1;if(we.length===10&&parseInt(we,10)%11!==0){var xt=parseInt(we.slice(0,9),10)%11;if(parseInt(Re,10)<1986&&xt===10){if(parseInt(we.slice(9),10)!==0)return!1}else return!1}return!0}function ye(we){return _.luhnCheck(we)}function pe(we){for(var Re=we.split("").map(function(_r){return parseInt(_r,10)}),We=[],vt=0;vt<Re.length-1;vt++){We.push("");for(var xt=0;xt<Re.length-1;xt++)Re[vt]===Re[xt]&&(We[vt]+=xt)}if(We=We.filter(function(_r){return _r.length>1}),We.length!==2&&We.length!==3)return!1;if(We[0].length===3){for(var Et=We[0].split("").map(function(_r){return parseInt(_r,10)}),Ut=0,ur=0;ur<Et.length-1;ur++)Et[ur]+1===Et[ur+1]&&(Ut+=1);if(Ut===2)return!1}return _.iso7064Check(we)}function xe(we){we=we.replace(/\W/,"");var Re=parseInt(we.slice(4,6),10),We=we.slice(6,7);switch(We){case"0":case"1":case"2":case"3":Re="19".concat(Re);break;case"4":case"9":Re<37?Re="20".concat(Re):Re="19".concat(Re);break;default:if(Re<37)Re="20".concat(Re);else if(Re>58)Re="18".concat(Re);else return!1;break}Re.length===3&&(Re=[Re.slice(0,2),"0",Re.slice(2)].join(""));var vt="".concat(Re,"/").concat(we.slice(2,4),"/").concat(we.slice(0,2));if(!(0,S.default)(vt,"YYYY/MM/DD"))return!1;for(var xt=we.split("").map(function(_r){return parseInt(_r,10)}),Et=0,Ut=4,ur=0;ur<9;ur++)Et+=xt[ur]*Ut,Ut-=1,Ut===1&&(Ut=7);return Et%=11,Et===1?!1:Et===0?xt[9]===0:xt[9]===11-Et}function Se(we){for(var Re=we.slice(0,8).split("").map(function(Et){return parseInt(Et,10)}),We=0,vt=1;vt<Re.length;vt+=2)We+=Re[vt];for(var xt=0;xt<Re.length;xt+=2)Re[xt]<2?We+=1-Re[xt]:(We+=2*(Re[xt]-2)+5,Re[xt]>4&&(We+=2));return String.fromCharCode(We%26+65)===we.charAt(8)}function ke(we){for(var Re=we.split("").map(function(xt){return parseInt(xt,10)}),We=0,vt=0;vt<8;vt++)We+=Re[vt]*Math.pow(2,8-vt);return We%11%10===Re[8]}function it(we){var Re=_.reverseMultiplyAndSum(we.split("").slice(0,7).map(function(We){return parseInt(We,10)}),8);return we.length===9&&we[8]!=="W"&&(Re+=(we[8].charCodeAt(0)-64)*9),Re%=23,Re===0?we[7].toUpperCase()==="W":we[7].toUpperCase()===String.fromCharCode(64+Re)}var Ke={andover:["10","12"],atlanta:["60","67"],austin:["50","53"],brookhaven:["01","02","03","04","05","06","11","13","14","16","21","22","23","25","34","51","52","54","55","56","57","58","59","65"],cincinnati:["30","32","35","36","37","38","61"],fresno:["15","24"],internet:["20","26","27","45","46","47"],kansas:["40","44"],memphis:["94","95"],ogden:["80","90"],philadelphia:["33","39","41","42","43","46","48","62","63","64","66","68","71","72","73","74","75","76","77","81","82","83","84","85","86","87","88","91","92","93","98","99"],sba:["31"]};function Ye(){var we=[];for(var Re in Ke)Ke.hasOwnProperty(Re)&&we.push.apply(we,R(Ke[Re]));return we}function ht(we){return Ye().indexOf(we.slice(0,2))!==-1}function Lt(we){for(var Re=0,We=we.split(""),vt=parseInt(We.pop(),10),xt=0;xt<We.length;xt++)Re+=We[9-xt]*(2+xt%6);var Et=11-Re%11;return Et===11?Et=0:Et===10&&(Et=9),vt===Et}function sr(we){var Re=we.toUpperCase().split("");if(isNaN(parseInt(Re[0],10))&&Re.length>1){var We=0;switch(Re[0]){case"Y":We=1;break;case"Z":We=2;break}Re.splice(0,1,We)}else for(;Re.length<9;)Re.unshift(0);var vt=["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"];Re=Re.join("");var xt=parseInt(Re.slice(0,8),10)%23;return Re[8]===vt[xt]}function nr(we){var Re=we.slice(1,3),We=we.slice(0,1);switch(We){case"1":case"2":Re="18".concat(Re);break;case"3":case"4":Re="19".concat(Re);break;default:Re="20".concat(Re);break}var vt="".concat(Re,"/").concat(we.slice(3,5),"/").concat(we.slice(5,7));if(!(0,S.default)(vt,"YYYY/MM/DD"))return!1;for(var xt=we.split("").map(function(Zr){return parseInt(Zr,10)}),Et=0,Ut=1,ur=0;ur<10;ur++)Et+=xt[ur]*Ut,Ut+=1,Ut===10&&(Ut=1);if(Et%11===10){Et=0,Ut=3;for(var _r=0;_r<10;_r++)Et+=xt[_r]*Ut,Ut+=1,Ut===10&&(Ut=1);if(Et%11===10)return xt[10]===0}return Et%11===xt[10]}function Xt(we){var Re=we.slice(4,6),We=we.slice(6,7);switch(We){case"+":Re="18".concat(Re);break;case"-":Re="19".concat(Re);break;default:Re="20".concat(Re);break}var vt="".concat(Re,"/").concat(we.slice(2,4),"/").concat(we.slice(0,2));if(!(0,S.default)(vt,"YYYY/MM/DD"))return!1;var xt=parseInt(we.slice(0,6)+we.slice(7,10),10)%31;if(xt<10)return xt===parseInt(we.slice(10),10);xt-=10;var Et=["A","B","C","D","E","F","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y"];return Et[xt]===we.slice(10)}function or(we){if(we.slice(2,4)!=="00"||we.slice(4,6)!=="00"){var Re="".concat(we.slice(0,2),"/").concat(we.slice(2,4),"/").concat(we.slice(4,6));if(!(0,S.default)(Re,"YY/MM/DD"))return!1}var We=97-parseInt(we.slice(0,9),10)%97,vt=parseInt(we.slice(9,11),10);return!(We!==vt&&(We=97-parseInt("2".concat(we.slice(0,9)),10)%97,We!==vt))}function Ct(we){we=we.replace(/\s/g,"");var Re=parseInt(we.slice(0,10),10)%511,We=parseInt(we.slice(10,13),10);return Re===We}function Nt(we){var Re="".concat(we.slice(0,4),"/").concat(we.slice(4,6),"/").concat(we.slice(6,8));return!(0,S.default)(Re,"YYYY/MM/DD")||!_.luhnCheck(we.slice(0,12))?!1:_.verhoeffCheck("".concat(we.slice(0,11)).concat(we[12]))}function Rt(we){return _.iso7064Check(we)}function fr(we){for(var Re=we.split("").map(function(xt){return parseInt(xt,10)}),We=8,vt=1;vt<9;vt++)We+=Re[vt]*(vt+1);return We%11===Re[9]}function De(we){for(var Re=!1,We=!1,vt=0;vt<3;vt++)if(!Re&&/[AEIOU]/.test(we[vt]))Re=!0;else if(!We&&Re&&we[vt]==="X")We=!0;else if(vt>0&&(Re&&!We&&!/[AEIOU]/.test(we[vt])||We&&!/X/.test(we[vt])))return!1;return!0}function wt(we){var Re=we.toUpperCase().split("");if(!De(Re.slice(0,3))||!De(Re.slice(3,6)))return!1;for(var We=[6,7,9,10,12,13,14],vt={L:"0",M:"1",N:"2",P:"3",Q:"4",R:"5",S:"6",T:"7",U:"8",V:"9"},xt=0,Et=We;xt<Et.length;xt++){var Ut=Et[xt];Re[Ut]in vt&&Re.splice(Ut,1,vt[Re[Ut]])}var ur={A:"01",B:"02",C:"03",D:"04",E:"05",H:"06",L:"07",M:"08",P:"09",R:"10",S:"11",T:"12"},_r=ur[Re[8]],Zr=parseInt(Re[9]+Re[10],10);Zr>40&&(Zr-=40),Zr<10&&(Zr="0".concat(Zr));var Rn="".concat(Re[6]).concat(Re[7],"/").concat(_r,"/").concat(Zr);if(!(0,S.default)(Rn,"YY/MM/DD"))return!1;for(var Vn=0,zn=1;zn<Re.length-1;zn+=2){var Pi=parseInt(Re[zn],10);isNaN(Pi)&&(Pi=Re[zn].charCodeAt(0)-65),Vn+=Pi}for(var Ri={A:1,B:0,C:5,D:7,E:9,F:13,G:15,H:17,I:19,J:21,K:2,L:4,M:18,N:20,O:11,P:3,Q:6,R:8,S:12,T:14,U:16,V:10,W:22,X:25,Y:24,Z:23,0:1,1:0},nn=0;nn<Re.length-1;nn+=2){var tn=0;if(Re[nn]in Ri)tn=Ri[Re[nn]];else{var je=parseInt(Re[nn],10);tn=2*je+1,je>4&&(tn+=2)}Vn+=tn}return String.fromCharCode(65+Vn%26)===Re[15]}function Zt(we){we=we.replace(/\W/,"");var Re=we.slice(0,2);if(Re!=="32"){var We=we.slice(2,4);if(We!=="00"){var vt=we.slice(4,6);switch(we[6]){case"0":vt="18".concat(vt);break;case"1":vt="19".concat(vt);break;default:vt="20".concat(vt);break}var xt="".concat(vt,"/").concat(we.slice(2,4),"/").concat(Re);if(!(0,S.default)(xt,"YYYY/MM/DD"))return!1}for(var Et=1101,Ut=[1,6,3,7,9,10,5,8,4,2],ur=0;ur<we.length-1;ur++)Et-=parseInt(we[ur],10)*Ut[ur];return parseInt(we[10],10)===Et%11}return!0}function Ht(we){if(we.length!==9){for(var Re=we.toUpperCase().split("");Re.length<8;)Re.unshift(0);switch(we[7]){case"A":case"P":if(parseInt(Re[6],10)===0)return!1;break;default:{var We=parseInt(Re.join("").slice(0,5),10);if(We>32e3)return!1;var vt=parseInt(Re.join("").slice(5,7),10);if(We===vt)return!1}}}return!0}function zt(we){return _.reverseMultiplyAndSum(we.split("").slice(0,8).map(function(Re){return parseInt(Re,10)}),9)%11===parseInt(we[8],10)}function er(we){if(we.length===10){for(var Re=[6,5,7,2,3,4,5,6,7],We=0,vt=0;vt<Re.length;vt++)We+=parseInt(we[vt],10)*Re[vt];return We%=11,We===10?!1:We===parseInt(we[9],10)}var xt=we.slice(0,2),Et=parseInt(we.slice(2,4),10);Et>80?(xt="18".concat(xt),Et-=80):Et>60?(xt="22".concat(xt),Et-=60):Et>40?(xt="21".concat(xt),Et-=40):Et>20?(xt="20".concat(xt),Et-=20):xt="19".concat(xt),Et<10&&(Et="0".concat(Et));var Ut="".concat(xt,"/").concat(Et,"/").concat(we.slice(4,6));if(!(0,S.default)(Ut,"YYYY/MM/DD"))return!1;for(var ur=0,_r=1,Zr=0;Zr<we.length-1;Zr++)ur+=parseInt(we[Zr],10)*_r%10,_r+=2,_r>10?_r=1:_r===5&&(_r+=2);return ur=10-ur%10,ur===parseInt(we[10],10)}function ir(we){if(we.length===11){var Re,We;if(Re=0,we==="11111111111"||we==="22222222222"||we==="33333333333"||we==="44444444444"||we==="55555555555"||we==="66666666666"||we==="77777777777"||we==="88888888888"||we==="99999999999"||we==="00000000000")return!1;for(var vt=1;vt<=9;vt++)Re+=parseInt(we.substring(vt-1,vt),10)*(11-vt);if(We=Re*10%11,We===10&&(We=0),We!==parseInt(we.substring(9,10),10))return!1;Re=0;for(var xt=1;xt<=10;xt++)Re+=parseInt(we.substring(xt-1,xt),10)*(12-xt);return We=Re*10%11,We===10&&(We=0),We===parseInt(we.substring(10,11),10)}if(we==="00000000000000"||we==="11111111111111"||we==="22222222222222"||we==="33333333333333"||we==="44444444444444"||we==="55555555555555"||we==="66666666666666"||we==="77777777777777"||we==="88888888888888"||we==="99999999999999")return!1;for(var Et=we.length-2,Ut=we.substring(0,Et),ur=we.substring(Et),_r=0,Zr=Et-7,Rn=Et;Rn>=1;Rn--)_r+=Ut.charAt(Et-Rn)*Zr,Zr-=1,Zr<2&&(Zr=9);var Vn=_r%11<2?0:11-_r%11;if(Vn!==parseInt(ur.charAt(0),10))return!1;Et+=1,Ut=we.substring(0,Et),_r=0,Zr=Et-7;for(var zn=Et;zn>=1;zn--)_r+=Ut.charAt(Et-zn)*Zr,Zr-=1,Zr<2&&(Zr=9);return Vn=_r%11<2?0:11-_r%11,Vn===parseInt(ur.charAt(1),10)}function Qr(we){var Re=11-_.reverseMultiplyAndSum(we.split("").slice(0,8).map(function(We){return parseInt(We,10)}),9)%11;return Re>9?parseInt(we[8],10)===0:Re===parseInt(we[8],10)}function br(we){if(we.slice(0,4)!=="9000"){var Re=we.slice(1,3);switch(we[0]){case"1":case"2":Re="19".concat(Re);break;case"3":case"4":Re="18".concat(Re);break;case"5":case"6":Re="20".concat(Re);break}var We="".concat(Re,"/").concat(we.slice(3,5),"/").concat(we.slice(5,7));if(We.length===8){if(!(0,S.default)(We,"YY/MM/DD"))return!1}else if(!(0,S.default)(We,"YYYY/MM/DD"))return!1;for(var vt=we.split("").map(function(ur){return parseInt(ur,10)}),xt=[2,7,9,1,4,6,3,5,8,2,7,9],Et=0,Ut=0;Ut<xt.length;Ut++)Et+=vt[Ut]*xt[Ut];return Et%11===10?vt[12]===1:vt[12]===Et%11}return!0}function en(we){if(we.length===9){if(we=we.replace(/\W/,""),we.slice(6)==="000")return!1;var Re=parseInt(we.slice(0,2),10);if(Re>53)return!1;Re<10?Re="190".concat(Re):Re="19".concat(Re);var We=parseInt(we.slice(2,4),10);We>50&&(We-=50),We<10&&(We="0".concat(We));var vt="".concat(Re,"/").concat(We,"/").concat(we.slice(4,6));if(!(0,S.default)(vt,"YYYY/MM/DD"))return!1}return!0}function Fr(we){var Re=11-_.reverseMultiplyAndSum(we.split("").slice(0,7).map(function(We){return parseInt(We,10)}),8)%11;return Re===10?parseInt(we[7],10)===0:Re===parseInt(we[7],10)}function ln(we){var Re=we.slice(0);we.length>11&&(Re=Re.slice(2));var We="",vt=Re.slice(2,4),xt=parseInt(Re.slice(4,6),10);if(we.length>11)We=we.slice(0,4);else if(We=we.slice(0,2),we.length===11&&xt<60){var Et=new Date().getFullYear().toString(),Ut=parseInt(Et.slice(0,2),10);if(Et=parseInt(Et,10),we[6]==="-")parseInt("".concat(Ut).concat(We),10)>Et?We="".concat(Ut-1).concat(We):We="".concat(Ut).concat(We);else if(We="".concat(Ut-1).concat(We),Et-parseInt(We,10)<100)return!1}xt>60&&(xt-=60),xt<10&&(xt="0".concat(xt));var ur="".concat(We,"/").concat(vt,"/").concat(xt);if(ur.length===8){if(!(0,S.default)(ur,"YY/MM/DD"))return!1}else if(!(0,S.default)(ur,"YYYY/MM/DD"))return!1;return _.luhnCheck(we.replace(/\W/,""))}function Ln(we){for(var Re=we.split("").map(function(Et){return parseInt(Et,10)}),We=[-1,5,7,9,4,6,10,5,7],vt=0,xt=0;xt<We.length;xt++)vt+=Re[xt]*We[xt];return vt%11===10?Re[9]===0:Re[9]===vt%11}var Dr={"bg-BG":/^\d{10}$/,"cs-CZ":/^\d{6}\/{0,1}\d{3,4}$/,"de-AT":/^\d{9}$/,"de-DE":/^[1-9]\d{10}$/,"dk-DK":/^\d{6}-{0,1}\d{4}$/,"el-CY":/^[09]\d{7}[A-Z]$/,"el-GR":/^([0-4]|[7-9])\d{8}$/,"en-CA":/^\d{9}$/,"en-GB":/^\d{10}$|^(?!GB|NK|TN|ZZ)(?![DFIQUV])[A-Z](?![DFIQUVO])[A-Z]\d{6}[ABCD ]$/i,"en-IE":/^\d{7}[A-W][A-IW]{0,1}$/i,"en-US":/^\d{2}[- ]{0,1}\d{7}$/,"es-AR":/(20|23|24|27|30|33|34)[0-9]{8}[0-9]/,"es-ES":/^(\d{0,8}|[XYZKLM]\d{7})[A-HJ-NP-TV-Z]$/i,"et-EE":/^[1-6]\d{6}(00[1-9]|0[1-9][0-9]|[1-6][0-9]{2}|70[0-9]|710)\d$/,"fi-FI":/^\d{6}[-+A]\d{3}[0-9A-FHJ-NPR-Y]$/i,"fr-BE":/^\d{11}$/,"fr-FR":/^[0-3]\d{12}$|^[0-3]\d\s\d{2}(\s\d{3}){3}$/,"fr-LU":/^\d{13}$/,"hr-HR":/^\d{11}$/,"hu-HU":/^8\d{9}$/,"it-IT":/^[A-Z]{6}[L-NP-V0-9]{2}[A-EHLMPRST][L-NP-V0-9]{2}[A-ILMZ][L-NP-V0-9]{3}[A-Z]$/i,"lv-LV":/^\d{6}-{0,1}\d{5}$/,"mt-MT":/^\d{3,7}[APMGLHBZ]$|^([1-8])\1\d{7}$/i,"nl-NL":/^\d{9}$/,"pl-PL":/^\d{10,11}$/,"pt-BR":/(?:^\d{11}$)|(?:^\d{14}$)/,"pt-PT":/^\d{9}$/,"ro-RO":/^\d{13}$/,"sk-SK":/^\d{6}\/{0,1}\d{3,4}$/,"sl-SI":/^[1-9]\d{7}$/,"sv-SE":/^(\d{6}[-+]{0,1}\d{4}|(18|19|20)\d{6}[-+]{0,1}\d{4})$/,"uk-UA":/^\d{10}$/};Dr["lb-LU"]=Dr["fr-LU"],Dr["lt-LT"]=Dr["et-EE"],Dr["nl-BE"]=Dr["fr-BE"],Dr["fr-CA"]=Dr["en-CA"];var pr={"bg-BG":te,"cs-CZ":X,"de-AT":ye,"de-DE":pe,"dk-DK":xe,"el-CY":Se,"el-GR":ke,"en-CA":K,"en-IE":it,"en-US":ht,"es-AR":Lt,"es-ES":sr,"et-EE":nr,"fi-FI":Xt,"fr-BE":or,"fr-FR":Ct,"fr-LU":Nt,"hr-HR":Rt,"hu-HU":fr,"it-IT":wt,"lv-LV":Zt,"mt-MT":Ht,"nl-NL":zt,"pl-PL":er,"pt-BR":ir,"pt-PT":Qr,"ro-RO":br,"sk-SK":en,"sl-SI":Fr,"sv-SE":ln,"uk-UA":Ln};pr["lb-LU"]=pr["fr-LU"],pr["lt-LT"]=pr["et-EE"],pr["nl-BE"]=pr["fr-BE"],pr["fr-CA"]=pr["en-CA"];var Kn=/[-\\\/!@#$%\^&\*\(\)\+\=\[\]]+/g,Un={"de-AT":Kn,"de-DE":/[\/\\]/g,"fr-BE":Kn};Un["nl-BE"]=Un["fr-BE"];function Yn(we){var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-US";(0,p.default)(we);var We=we.slice(0);if(Re in Dr)return Re in Un&&(We=We.replace(Un[Re],"")),Dr[Re].test(We)?Re in pr?pr[Re](We):!0:!1;throw new Error("Invalid locale '".concat(Re,"'"))}n.exports=a.default,n.exports.default=a.default}(Ny,Ny.exports)),Ny.exports}var Zd={},pb;function OR(){if(pb)return Zd;pb=1,Object.defineProperty(Zd,"__esModule",{value:!0}),Zd.default=p,Zd.locales=void 0;var n=a(Dt());function a(_){return _&&_.__esModule?_:{default:_}}var f={"am-AM":/^(\+?374|0)(33|4[134]|55|77|88|9[13-689])\d{6}$/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)([569]\d{7}|41\d{6})$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-OM":/^((\+|00)968)?(9[1-9])\d{6}$/,"ar-PS":/^(\+?970|0)5[6|9](\d{7})$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SD":/^((\+?249)|0)?(9[012369]|1[012])\d{7}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(10|5[015]|7[07]|99)\d{7}$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^((\+49|0)1)(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7,9}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)([1-9])\d{1,9}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"dv-MV":/^(\+?960)?(7[2-9]|9[1-9])\d{5}$/,"el-GR":/^(\+?30|0)?6(8[5-9]|9(?![26])[0-9])\d{7}$/,"el-CY":/^(\+?357?)?(9(9|6)\d{6})$/,"en-AI":/^(\+?1|0)264(?:2(35|92)|4(?:6[1-2]|76|97)|5(?:3[6-9]|8[1-4])|7(?:2(4|9)|72))\d{4}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-AG":/^(?:\+1|1)268(?:464|7(?:1[3-9]|[28]\d|3[0246]|64|7[0-689]))\d{4}$/,"en-BM":/^(\+?1)?441(((3|7)\d{6}$)|(5[0-3][0-9]\d{4}$)|(59\d{5}$))/,"en-BS":/^(\+?1[-\s]?|0)?\(?242\)?[-\s]?\d{3}[-\s]?\d{4}$/,"en-GB":/^(\+?44|0)7[1-9]\d{8}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|53|28|55|59)\d{7}$/,"en-GY":/^(\+592|0)6\d{6}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-JM":/^(\+?876)?\d{7}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"fr-CF":/^(\+?236| ?)(70|75|77|72|21|22)\d{6}$/,"en-SS":/^(\+?211|0)(9[1257])\d{7}$/,"en-KI":/^((\+686|686)?)?( )?((6|7)(2|3|8)[0-9]{6})$/,"en-KN":/^(?:\+1|1)869(?:46\d|48[89]|55[6-8]|66\d|76[02-7])\d{4}$/,"en-LS":/^(\+?266)(22|28|57|58|59|27|52)\d{6}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-MW":/^(\+?265|0)(((77|88|31|99|98|21)\d{7})|(((111)|1)\d{6})|(32000\d{4}))$/,"en-NA":/^(\+?264|0)(6|8)\d{7}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PG":/^(\+?675|0)?(7\d|8[18])\d{6}$/,"en-PK":/^((00|\+)?92|0)3[0-6]\d{8}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[3689]\d{7}$/,"en-SL":/^(\+?232|0)\d{8}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?0[79][567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"en-BW":/^(\+?267)?(7[1-8]{1})\d{6}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?3(0(0|1|2|4|5)|1\d|2[0-4]|5(0|1))\d{7}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-CU":/^(\+53|0053)?5\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8|3|2]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-GT":/^(\+?502)?[2|6|7]\d{7}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-NI":/^(\+?505)\d{7,8}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-SV":/^(\+?503)?[67]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"es-VE":/^(\+?58)?(2|4)\d{9}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4[0-6]|50)\s?(\d\s?){4,8}$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-BF":/^(\+226|0)[67]\d{7}$/,"fr-BJ":/^(\+229)\d{8}$/,"fr-CD":/^(\+?243|0)?(8|9)\d{8}$/,"fr-CM":/^(\+?237)6[0-9]{8}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-PF":/^(\+?689)?8[789]\d{6}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"fr-WF":/^(\+681)?\d{6}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36|06)(20|30|31|50|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"ir-IR":/^(\+98|0)?9\d{9}$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(79\d{7}|5\d{8})$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"ky-KG":/^(\+996\s?)?(22[0-9]|50[0-9]|55[0-9]|70[0-9]|75[0-9]|77[0-9]|880|990|995|996|997|998)\s?\d{3}\s?\d{3}$/,"lt-LT":/^(\+370|8)\d{8}$/,"lv-LV":/^(\+?371)2\d{7}$/,"mg-MG":/^((\+?261|0)(2|3)\d)?\d{7}$/,"mn-MN":/^(\+|00|011)?976(77|81|88|91|94|95|96|99)\d{6}$/,"my-MM":/^(\+?959|09|9)(2[5-7]|3[1-2]|4[0-5]|6[6-9]|7[5-9]|9[6-9])[0-9]{7}$/,"ms-MY":/^(\+?60|0)1(([0145](-|\s)?\d{7,8})|([236-9](-|\s)?\d{7}))$/,"mz-MZ":/^(\+?258)?8[234567]\d{7}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nl-AW":/^(\+)?297(56|59|64|73|74|99)\d{5}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?([5-8]\d|45) ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[1-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"pt-AO":/^(\+244)\d{9}$/,"ro-MD":/^(\+?373|0)((6(0|1|2|6|7|8|9))|(7(6|7|8|9)))\d{6}$/,"ro-RO":/^(\+?40|0)\s?7\d{2}(\/|\s|\.|-)?\d{3}(\s|\.|-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"si-LK":/^(?:0|94|\+94)?(7(0|1|2|4|5|6|7|8)( |-)?)\d{7}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"so-SO":/^(\+?252|0)((6[0-9])\d{7}|(7[1-9])\d{7})$/,"sq-AL":/^(\+355|0)6[2-9]\d{7}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"tg-TJ":/^(\+?992)?[5][5]\d{7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"tk-TM":/^(\+993|993|8)\d{8}$/,"uk-UA":/^(\+?38)?0(50|6[36-8]|7[357]|9[1-9])\d{7}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^((\+?84)|0)((3([2-9]))|(5([25689]))|(7([0|6-9]))|(8([1-9]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?(1[3-9]|9[28])\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/,"dz-BT":/^(\+?975|0)?(17|16|77|02)\d{6}$/,"ar-YE":/^(((\+|00)9677|0?7)[0137]\d{7}|((\+|00)967|0)[1-7]\d{6})$/,"ar-EH":/^(\+?212|0)[\s\-]?(5288|5289)[\s\-]?\d{5}$/,"fa-AF":/^(\+93|0)?(2{1}[0-8]{1}|[3-5]{1}[0-4]{1})(\d{7})$/,"mk-MK":/^(\+?389|0)?((?:2[2-9]\d{6}|(?:3[1-4]|4[2-8])\d{6}|500\d{5}|5[2-9]\d{6}|7[0-9][2-9]\d{5}|8[1-9]\d{6}|800\d{5}|8009\d{4}))$/};f["en-CA"]=f["en-US"],f["fr-CA"]=f["en-CA"],f["fr-BE"]=f["nl-BE"],f["zh-HK"]=f["en-HK"],f["zh-MO"]=f["en-MO"],f["ga-IE"]=f["en-IE"],f["fr-CH"]=f["de-CH"],f["it-CH"]=f["fr-CH"];function p(_,S,y){if((0,n.default)(_),y&&y.strictMode&&!_.startsWith("+"))return!1;if(Array.isArray(S))return S.some(function(R){if(f.hasOwnProperty(R)){var O=f[R];if(O.test(_))return!0}return!1});if(S in f)return f[S].test(_);if(!S||S==="any"){for(var u in f)if(f.hasOwnProperty(u)){var C=f[u];if(C.test(_))return!0}return!1}throw new Error("Invalid locale '".concat(S,"'"))}return Zd.locales=Object.keys(f),Zd}var Fy={exports:{}},mb;function BR(){return mb||(mb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^(0x)[0-9a-f]{40}$/i;function S(y){return(0,f.default)(y),_.test(y)}n.exports=a.default,n.exports.default=a.default}(Fy,Fy.exports)),Fy.exports}var Uy={exports:{}},gb;function jR(){return gb||(gb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=u;var f=_(fs()),p=_(Dt());function _(C){return C&&C.__esModule?C:{default:C}}function S(C){var R="\\d{".concat(C.digits_after_decimal[0],"}");C.digits_after_decimal.forEach(function(ye,pe){pe!==0&&(R="".concat(R,"|\\d{").concat(ye,"}"))});var O="(".concat(C.symbol.replace(/\W/,function(ye){return"\\".concat(ye)}),")").concat(C.require_symbol?"":"?"),B="-?",z="[1-9]\\d*",F="[1-9]\\d{0,2}(\\".concat(C.thousands_separator,"\\d{3})*"),G=["0",z,F],te="(".concat(G.join("|"),")?"),K="(\\".concat(C.decimal_separator,"(").concat(R,"))").concat(C.require_decimal?"":"?"),X=te+(C.allow_decimal||C.require_decimal?K:"");return C.allow_negatives&&!C.parens_for_negatives&&(C.negative_sign_after_digits?X+=B:C.negative_sign_before_digits&&(X=B+X)),C.allow_negative_sign_placeholder?X="( (?!\\-))?".concat(X):C.allow_space_after_symbol?X=" ?".concat(X):C.allow_space_after_digits&&(X+="( (?!$))?"),C.symbol_after_digits?X+=O:X=O+X,C.allow_negatives&&(C.parens_for_negatives?X="(\\(".concat(X,"\\)|").concat(X,")"):C.negative_sign_before_digits||C.negative_sign_after_digits||(X=B+X)),new RegExp("^(?!-? )(?=.*\\d)".concat(X,"$"))}var y={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_decimal:!0,require_decimal:!1,digits_after_decimal:[2],allow_space_after_digits:!1};function u(C,R){return(0,p.default)(C),R=(0,f.default)(R,y),S(R).test(C)}n.exports=a.default,n.exports.default=a.default}(Uy,Uy.exports)),Uy.exports}var Vy={exports:{}},yb;function NR(){return yb||(yb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=y;var f=p(Dt());function p(u){return u&&u.__esModule?u:{default:u}}var _=/^(bc1|tb1|bc1p|tb1p)[ac-hj-np-z02-9]{39,58}$/,S=/^(1|2|3|m)[A-HJ-NP-Za-km-z1-9]{25,39}$/;function y(u){return(0,f.default)(u),_.test(u)||S.test(u)}n.exports=a.default,n.exports.default=a.default}(Vy,Vy.exports)),Vy.exports}var qd={},_b;function FR(){if(_b)return qd;_b=1,Object.defineProperty(qd,"__esModule",{value:!0}),qd.isFreightContainerID=void 0,qd.isISO6346=_;var n=a(Dt());function a(S){return S&&S.__esModule?S:{default:S}}var f=/^[A-Z]{3}(U[0-9]{7})|([J,Z][0-9]{6,7})$/,p=/^[0-9]$/;function _(S){if((0,n.default)(S),S=S.toUpperCase(),!f.test(S))return!1;if(S.length===11){for(var y=0,u=0;u<S.length-1;u++)if(p.test(S[u]))y+=S[u]*Math.pow(2,u);else{var C=void 0,R=S.charCodeAt(u)-55;R<11?C=R:R>=11&&R<=20?C=12+R%11:R>=21&&R<=30?C=23+R%21:C=34+R%31,y+=C*Math.pow(2,u)}var O=y%11;return O===10&&(O=0),Number(S[S.length-1])===O}return!0}return qd.isFreightContainerID=_,qd}var $y={exports:{}},vb;function UR(){return vb||(vb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=new Set(["aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu"]);function S(y){return(0,f.default)(y),_.has(y)}n.exports=a.default,n.exports.default=a.default}($y,$y.exports)),$y.exports}var Zy={exports:{}},xb;function VR(){return xb||(xb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=u;var f=p(Dt());function p(C){return C&&C.__esModule?C:{default:C}}var _=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,S=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,y=function(R){var O=R.match(/^(\d{4})-?(\d{3})([ T]{1}\.*|$)/);if(O){var B=Number(O[1]),z=Number(O[2]);return B%4===0&&B%100!==0||B%400===0?z<=366:z<=365}var F=R.match(/(\d{4})-?(\d{0,2})-?(\d*)/).map(Number),G=F[1],te=F[2],K=F[3],X=te&&"0".concat(te).slice(-2),ye=K&&"0".concat(K).slice(-2),pe=new Date("".concat(G,"-").concat(X||"01","-").concat(ye||"01"));return te&&K?pe.getUTCFullYear()===G&&pe.getUTCMonth()+1===te&&pe.getUTCDate()===K:!0};function u(C){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,f.default)(C);var O=R.strictSeparator?S.test(C):_.test(C);return O&&R.strict?y(C):O}n.exports=a.default,n.exports.default=a.default}(Zy,Zy.exports)),Zy.exports}var qy={exports:{}},bb;function $R(){return bb||(bb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=X;var f=p(Dt());function p(ye){return ye&&ye.__esModule?ye:{default:ye}}var _=/[0-9]{4}/,S=/(0[1-9]|1[0-2])/,y=/([12]\d|0[1-9]|3[01])/,u=/([01][0-9]|2[0-3])/,C=/[0-5][0-9]/,R=/([0-5][0-9]|60)/,O=/(\.[0-9]+)?/,B=new RegExp("[-+]".concat(u.source,":").concat(C.source)),z=new RegExp("([zZ]|".concat(B.source,")")),F=new RegExp("".concat(u.source,":").concat(C.source,":").concat(R.source).concat(O.source)),G=new RegExp("".concat(_.source,"-").concat(S.source,"-").concat(y.source)),te=new RegExp("".concat(F.source).concat(z.source)),K=new RegExp("^".concat(G.source,"[ tT]").concat(te.source,"$"));function X(ye){return(0,f.default)(ye),K.test(ye)}n.exports=a.default,n.exports.default=a.default}(qy,qy.exports)),qy.exports}var Gd={},wb;function ZR(){if(wb)return Gd;wb=1,Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.ScriptCodes=void 0,Gd.default=p;var n=a(Dt());function a(_){return _&&_.__esModule?_:{default:_}}var f=new Set(["Adlm","Afak","Aghb","Ahom","Arab","Aran","Armi","Armn","Avst","Bali","Bamu","Bass","Batk","Beng","Bhks","Blis","Bopo","Brah","Brai","Bugi","Buhd","Cakm","Cans","Cari","Cham","Cher","Chis","Chrs","Cirt","Copt","Cpmn","Cprt","Cyrl","Cyrs","Deva","Diak","Dogr","Dsrt","Dupl","Egyd","Egyh","Egyp","Elba","Elym","Ethi","Gara","Geok","Geor","Glag","Gong","Gonm","Goth","Gran","Grek","Gujr","Gukh","Guru","Hanb","Hang","Hani","Hano","Hans","Hant","Hatr","Hebr","Hira","Hluw","Hmng","Hmnp","Hrkt","Hung","Inds","Ital","Jamo","Java","Jpan","Jurc","Kali","Kana","Kawi","Khar","Khmr","Khoj","Kitl","Kits","Knda","Kore","Kpel","Krai","Kthi","Lana","Laoo","Latf","Latg","Latn","Leke","Lepc","Limb","Lina","Linb","Lisu","Loma","Lyci","Lydi","Mahj","Maka","Mand","Mani","Marc","Maya","Medf","Mend","Merc","Mero","Mlym","Modi","Mong","Moon","Mroo","Mtei","Mult","Mymr","Nagm","Nand","Narb","Nbat","Newa","Nkdb","Nkgb","Nkoo","Nshu","Ogam","Olck","Onao","Orkh","Orya","Osge","Osma","Ougr","Palm","Pauc","Pcun","Pelm","Perm","Phag","Phli","Phlp","Phlv","Phnx","Plrd","Piqd","Prti","Psin","Qaaa","Qaab","Qaac","Qaad","Qaae","Qaaf","Qaag","Qaah","Qaai","Qaaj","Qaak","Qaal","Qaam","Qaan","Qaao","Qaap","Qaaq","Qaar","Qaas","Qaat","Qaau","Qaav","Qaaw","Qaax","Qaay","Qaaz","Qaba","Qabb","Qabc","Qabd","Qabe","Qabf","Qabg","Qabh","Qabi","Qabj","Qabk","Qabl","Qabm","Qabn","Qabo","Qabp","Qabq","Qabr","Qabs","Qabt","Qabu","Qabv","Qabw","Qabx","Ranj","Rjng","Rohg","Roro","Runr","Samr","Sara","Sarb","Saur","Sgnw","Shaw","Shrd","Shui","Sidd","Sidt","Sind","Sinh","Sogd","Sogo","Sora","Soyo","Sund","Sunu","Sylo","Syrc","Syre","Syrj","Syrn","Tagb","Takr","Tale","Talu","Taml","Tang","Tavt","Tayo","Telu","Teng","Tfng","Tglg","Thaa","Thai","Tibt","Tirh","Tnsa","Todr","Tols","Toto","Tutg","Ugar","Vaii","Visp","Vith","Wara","Wcho","Wole","Xpeo","Xsux","Yezi","Yiii","Zanb","Zinh","Zmth","Zsye","Zsym","Zxxx","Zyyy","Zzzz"]);function p(_){return(0,n.default)(_),f.has(_)}return Gd.ScriptCodes=f,Gd}var Gy={exports:{}},Sb;function qR(){return Sb||(Sb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=new Set(["AFG","ALA","ALB","DZA","ASM","AND","AGO","AIA","ATA","ATG","ARG","ARM","ABW","AUS","AUT","AZE","BHS","BHR","BGD","BRB","BLR","BEL","BLZ","BEN","BMU","BTN","BOL","BES","BIH","BWA","BVT","BRA","IOT","BRN","BGR","BFA","BDI","KHM","CMR","CAN","CPV","CYM","CAF","TCD","CHL","CHN","CXR","CCK","COL","COM","COG","COD","COK","CRI","CIV","HRV","CUB","CUW","CYP","CZE","DNK","DJI","DMA","DOM","ECU","EGY","SLV","GNQ","ERI","EST","ETH","FLK","FRO","FJI","FIN","FRA","GUF","PYF","ATF","GAB","GMB","GEO","DEU","GHA","GIB","GRC","GRL","GRD","GLP","GUM","GTM","GGY","GIN","GNB","GUY","HTI","HMD","VAT","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","IMN","ISR","ITA","JAM","JPN","JEY","JOR","KAZ","KEN","KIR","PRK","KOR","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LIE","LTU","LUX","MAC","MKD","MDG","MWI","MYS","MDV","MLI","MLT","MHL","MTQ","MRT","MUS","MYT","MEX","FSM","MDA","MCO","MNG","MNE","MSR","MAR","MOZ","MMR","NAM","NRU","NPL","NLD","NCL","NZL","NIC","NER","NGA","NIU","NFK","MNP","NOR","OMN","PAK","PLW","PSE","PAN","PNG","PRY","PER","PHL","PCN","POL","PRT","PRI","QAT","REU","ROU","RUS","RWA","BLM","SHN","KNA","LCA","MAF","SPM","VCT","WSM","SMR","STP","SAU","SEN","SRB","SYC","SLE","SGP","SXM","SVK","SVN","SLB","SOM","ZAF","SGS","SSD","ESP","LKA","SDN","SUR","SJM","SWZ","SWE","CHE","SYR","TWN","TJK","TZA","THA","TLS","TGO","TKL","TON","TTO","TUN","TUR","TKM","TCA","TUV","UGA","UKR","ARE","GBR","USA","UMI","URY","UZB","VUT","VEN","VNM","VGB","VIR","WLF","ESH","YEM","ZMB","ZWE"]);function S(y){return(0,f.default)(y),_.has(y.toUpperCase())}n.exports=a.default,n.exports.default=a.default}(Gy,Gy.exports)),Gy.exports}var Hy={exports:{}},Tb;function GR(){return Tb||(Tb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=new Set(["004","008","010","012","016","020","024","028","031","032","036","040","044","048","050","051","052","056","060","064","068","070","072","074","076","084","086","090","092","096","100","104","108","112","116","120","124","132","136","140","144","148","152","156","158","162","166","170","174","175","178","180","184","188","191","192","196","203","204","208","212","214","218","222","226","231","232","233","234","238","239","242","246","248","250","254","258","260","262","266","268","270","275","276","288","292","296","300","304","308","312","316","320","324","328","332","334","336","340","344","348","352","356","360","364","368","372","376","380","384","388","392","398","400","404","408","410","414","417","418","422","426","428","430","434","438","440","442","446","450","454","458","462","466","470","474","478","480","484","492","496","498","499","500","504","508","512","516","520","524","528","531","533","534","535","540","548","554","558","562","566","570","574","578","580","581","583","584","585","586","591","598","600","604","608","612","616","620","624","626","630","634","638","642","643","646","652","654","659","660","662","663","666","670","674","678","682","686","688","690","694","702","703","704","705","706","710","716","724","728","729","732","740","744","748","752","756","760","762","764","768","772","776","780","784","788","792","795","796","798","800","804","807","818","826","831","832","833","834","840","850","854","858","860","862","876","882","887","894"]);function S(y){return(0,f.default)(y),_.has(y)}n.exports=a.default,n.exports.default=a.default}(Hy,Hy.exports)),Hy.exports}var Hd={},Mb;function HR(){if(Mb)return Hd;Mb=1,Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.CurrencyCodes=void 0,Hd.default=p;var n=a(Dt());function a(_){return _&&_.__esModule?_:{default:_}}var f=new Set(["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRU","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLE","SLL","SOS","SRD","SSP","STN","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UYW","UZS","VED","VES","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"]);function p(_){return(0,n.default)(_),f.has(_.toUpperCase())}return Hd.CurrencyCodes=f,Hd}var Wy={exports:{}},Ab;function WR(){return Ab||(Ab=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=C;var f=_(Dt()),p=_(fs());function _(R){return R&&R.__esModule?R:{default:R}}var S=/^[A-Z2-7]+=*$/,y=/^[A-HJKMNP-TV-Z0-9]+$/,u={crockford:!1};function C(R,O){if((0,f.default)(R),O=(0,p.default)(O,u),O.crockford)return y.test(R);var B=R.length;return!!(B%8===0&&S.test(R))}n.exports=a.default,n.exports.default=a.default}(Wy,Wy.exports)),Wy.exports}var Ky={exports:{}},Cb;function KR(){return Cb||(Cb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^[A-HJ-NP-Za-km-z1-9]*$/;function S(y){return(0,f.default)(y),!!_.test(y)}n.exports=a.default,n.exports.default=a.default}(Ky,Ky.exports)),Ky.exports}var Yy={exports:{}},Eb;function YR(){return Eb||(Eb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=u;var f=p(Dt());function p(C){return C&&C.__esModule?C:{default:C}}var _=/^[a-z]+\/[a-z0-9\-\+\._]+$/i,S=/^[a-z\-]+=[a-z0-9\-]+$/i,y=/^[a-z0-9!\$&'\(\)\*\+,;=\-\._~:@\/\?%\s]*$/i;function u(C){(0,f.default)(C);var R=C.split(",");if(R.length<2)return!1;var O=R.shift().trim().split(";"),B=O.shift();if(B.slice(0,5)!=="data:")return!1;var z=B.slice(5);if(z!==""&&!_.test(z))return!1;for(var F=0;F<O.length;F++)if(!(F===O.length-1&&O[F].toLowerCase()==="base64")&&!S.test(O[F]))return!1;for(var G=0;G<R.length;G++)if(!y.test(R[G]))return!1;return!0}n.exports=a.default,n.exports.default=a.default}(Yy,Yy.exports)),Yy.exports}var Xy={exports:{}},Pb;function XR(){return Pb||(Pb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/(?:^magnet:\?|[^?&]&)xt(?:\.1)?=urn:(?:(?:aich|bitprint|btih|ed2k|ed2khash|kzhash|md5|sha1|tree:tiger):[a-z0-9]{32}(?:[a-z0-9]{8})?|btmh:1220[a-z0-9]{64})(?:$|&)/i;function S(y){return(0,f.default)(y),y.indexOf("magnet:?")!==0?!1:_.test(y)}n.exports=a.default,n.exports.default=a.default}(Xy,Xy.exports)),Xy.exports}var Qy={exports:{}},Jy={exports:{}},e_={exports:{}},Rb;function DS(){return Rb||(Rb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var f=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){if((0,f.default)(S),y){var u=new RegExp("[".concat(y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+$"),"g");return S.replace(u,"")}for(var C=S.length-1;/\s/.test(S.charAt(C));)C-=1;return S.slice(0,C+1)}n.exports=a.default,n.exports.default=a.default}(e_,e_.exports)),e_.exports}var t_={exports:{}},Ib;function LS(){return Ib||(Ib=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var f=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){(0,f.default)(S);var u=y?new RegExp("^[".concat(y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+"),"g"):/^\s+/g;return S.replace(u,"")}n.exports=a.default,n.exports.default=a.default}(t_,t_.exports)),t_.exports}var Db;function zS(){return Db||(Db=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=_(DS()),p=_(LS());function _(y){return y&&y.__esModule?y:{default:y}}function S(y,u){return(0,f.default)((0,p.default)(y,u),u)}n.exports=a.default,n.exports.default=a.default}(Jy,Jy.exports)),Jy.exports}var Lb;function QR(){return Lb||(Lb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=G;var f=S(zS()),p=S(SS()),_=S(Dt());function S(te){return te&&te.__esModule?te:{default:te}}function y(te,K){return R(te)||C(te,K)||B(te,K)||u()}function u(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C(te,K){var X=te==null?null:typeof Symbol<"u"&&te[Symbol.iterator]||te["@@iterator"];if(X!=null){var ye,pe,xe,Se,ke=[],it=!0,Ke=!1;try{if(xe=(X=X.call(te)).next,K!==0)for(;!(it=(ye=xe.call(X)).done)&&(ke.push(ye.value),ke.length!==K);it=!0);}catch(Ye){Ke=!0,pe=Ye}finally{try{if(!it&&X.return!=null&&(Se=X.return(),Object(Se)!==Se))return}finally{if(Ke)throw pe}}return ke}}function R(te){if(Array.isArray(te))return te}function O(te,K){var X=typeof Symbol<"u"&&te[Symbol.iterator]||te["@@iterator"];if(!X){if(Array.isArray(te)||(X=B(te))||K){X&&(te=X);var ye=0,pe=function(){};return{s:pe,n:function(){return ye>=te.length?{done:!0}:{done:!1,value:te[ye++]}},e:function(Ke){throw Ke},f:pe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xe,Se=!0,ke=!1;return{s:function(){X=X.call(te)},n:function(){var Ke=X.next();return Se=Ke.done,Ke},e:function(Ke){ke=!0,xe=Ke},f:function(){try{Se||X.return==null||X.return()}finally{if(ke)throw xe}}}}function B(te,K){if(te){if(typeof te=="string")return z(te,K);var X={}.toString.call(te).slice(8,-1);return X==="Object"&&te.constructor&&(X=te.constructor.name),X==="Map"||X==="Set"?Array.from(te):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?z(te,K):void 0}}function z(te,K){(K==null||K>te.length)&&(K=te.length);for(var X=0,ye=Array(K);X<K;X++)ye[X]=te[X];return ye}function F(te){var K=new Set(["subject","body","cc","bcc"]),X={cc:"",bcc:""},ye=!1,pe=te.split("&");if(pe.length>4)return!1;var xe=O(pe),Se;try{for(xe.s();!(Se=xe.n()).done;){var ke=Se.value,it=ke.split("="),Ke=y(it,2),Ye=Ke[0],ht=Ke[1];if(Ye&&!K.has(Ye)){ye=!0;break}ht&&(Ye==="cc"||Ye==="bcc")&&(X[Ye]=ht),Ye&&K.delete(Ye)}}catch(Lt){xe.e(Lt)}finally{xe.f()}return ye?!1:X}function G(te,K){if((0,_.default)(te),te.indexOf("mailto:")!==0)return!1;var X=te.replace("mailto:","").split("?"),ye=y(X,2),pe=ye[0],xe=ye[1],Se=xe===void 0?"":xe;if(!pe&&!Se)return!0;var ke=F(Se);return ke?"".concat(pe,",").concat(ke.cc,",").concat(ke.bcc).split(",").every(function(it){return it=(0,f.default)(it," "),it?(0,p.default)(it,K):!0}):!1}n.exports=a.default,n.exports.default=a.default}(Qy,Qy.exports)),Qy.exports}var r_={exports:{}},zb;function JR(){return zb||(zb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=u;var f=p(Dt());function p(C){return C&&C.__esModule?C:{default:C}}var _=/^(application|audio|font|image|message|model|multipart|text|video)\/[a-zA-Z0-9\.\-\+_]{1,100}$/i,S=/^text\/[a-zA-Z0-9\.\-\+]{1,100};\s?charset=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?$/i,y=/^multipart\/[a-zA-Z0-9\.\-\+]{1,100}(;\s?(boundary|charset)=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?){0,2}$/i;function u(C){return(0,f.default)(C),_.test(C)||S.test(C)||y.test(C)}n.exports=a.default,n.exports.default=a.default}(r_,r_.exports)),r_.exports}var n_={exports:{}},kb;function e3(){return kb||(kb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=O;var f=_(Dt()),p=_(fs());function _(B){return B&&B.__esModule?B:{default:B}}var S=/^\(?[+-]?(90(\.0+)?|[1-8]?\d(\.\d+)?)$/,y=/^\s?[+-]?(180(\.0+)?|1[0-7]\d(\.\d+)?|\d{1,2}(\.\d+)?)\)?$/,u=/^(([1-8]?\d)\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|90\D+0\D+0)\D+[NSns]?$/i,C=/^\s*([1-7]?\d{1,2}\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|180\D+0\D+0)\D+[EWew]?$/i,R={checkDMS:!1};function O(B,z){if((0,f.default)(B),z=(0,p.default)(z,R),!B.includes(","))return!1;var F=B.split(",");return F[0].startsWith("(")&&!F[1].endsWith(")")||F[1].endsWith(")")&&!F[0].startsWith("(")?!1:z.checkDMS?u.test(F[0])&&C.test(F[1]):S.test(F[0])&&y.test(F[1])}n.exports=a.default,n.exports.default=a.default}(n_,n_.exports)),n_.exports}var Wd={},Ob;function t3(){if(Ob)return Wd;Ob=1,Object.defineProperty(Wd,"__esModule",{value:!0}),Wd.default=u,Wd.locales=void 0;var n=a(Dt());function a(C){return C&&C.__esModule?C:{default:C}}var f=/^\d{3}$/,p=/^\d{4}$/,_=/^\d{5}$/,S=/^\d{6}$/,y={AD:/^AD\d{3}$/,AT:p,AU:p,AZ:/^AZ\d{4}$/,BA:/^([7-8]\d{4}$)/,BE:p,BG:p,BR:/^\d{5}-?\d{3}$/,BY:/^2[1-4]\d{4}$/,CA:/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][\s\-]?\d[ABCEGHJ-NPRSTV-Z]\d$/i,CH:p,CN:/^(0[1-7]|1[012356]|2[0-7]|3[0-6]|4[0-7]|5[1-7]|6[1-7]|7[1-5]|8[1345]|9[09])\d{4}$/,CO:/^(05|08|11|13|15|17|18|19|20|23|25|27|41|44|47|50|52|54|63|66|68|70|73|76|81|85|86|88|91|94|95|97|99)(\d{4})$/,CZ:/^\d{3}\s?\d{2}$/,DE:_,DK:p,DO:_,DZ:_,EE:_,ES:/^(5[0-2]{1}|[0-4]{1}\d{1})\d{3}$/,FI:_,FR:/^\d{2}\s?\d{3}$/,GB:/^(gir\s?0aa|[a-z]{1,2}\d[\da-z]?\s?(\d[a-z]{2})?)$/i,GR:/^\d{3}\s?\d{2}$/,HR:/^([1-5]\d{4}$)/,HT:/^HT\d{4}$/,HU:p,ID:_,IE:/^(?!.*(?:o))[A-Za-z]\d[\dw]\s\w{4}$/i,IL:/^(\d{5}|\d{7})$/,IN:/^((?!10|29|35|54|55|65|66|86|87|88|89)[1-9][0-9]{5})$/,IR:/^(?!(\d)\1{3})[13-9]{4}[1346-9][013-9]{5}$/,IS:f,IT:_,JP:/^\d{3}\-\d{4}$/,KE:_,KR:/^(\d{5}|\d{6})$/,LI:/^(948[5-9]|949[0-7])$/,LT:/^LT\-\d{5}$/,LU:p,LV:/^LV\-\d{4}$/,LK:_,MG:f,MX:_,MT:/^[A-Za-z]{3}\s{0,1}\d{4}$/,MY:_,NL:/^[1-9]\d{3}\s?(?!sa|sd|ss)[a-z]{2}$/i,NO:p,NP:/^(10|21|22|32|33|34|44|45|56|57)\d{3}$|^(977)$/i,NZ:p,PL:/^\d{2}\-\d{3}$/,PR:/^00[679]\d{2}([ -]\d{4})?$/,PT:/^\d{4}\-\d{3}?$/,RO:S,RU:S,SA:_,SE:/^[1-9]\d{2}\s?\d{2}$/,SG:S,SI:p,SK:/^\d{3}\s?\d{2}$/,TH:_,TN:p,TW:/^\d{3}(\d{2})?$/,UA:_,US:/^\d{5}(-\d{4})?$/,ZA:p,ZM:_};Wd.locales=Object.keys(y);function u(C,R){if((0,n.default)(C),R in y)return y[R].test(C);if(R==="any"){for(var O in y)if(y.hasOwnProperty(O)){var B=y[O];if(B.test(C))return!0}return!1}throw new Error("Invalid locale '".concat(R,"'"))}return Wd}var i_={exports:{}},Bb;function r3(){return Bb||(Bb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var f=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S){return(0,f.default)(S),S.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;")}n.exports=a.default,n.exports.default=a.default}(i_,i_.exports)),i_.exports}var a_={exports:{}},jb;function n3(){return jb||(jb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var f=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S){return(0,f.default)(S),S.replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#x2F;/g,"/").replace(/&#x5C;/g,"\\").replace(/&#96;/g,"`").replace(/&amp;/g,"&")}n.exports=a.default,n.exports.default=a.default}(a_,a_.exports)),a_.exports}var s_={exports:{}},o_={exports:{}},Nb;function kS(){return Nb||(Nb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var f=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){return(0,f.default)(S),S.replace(new RegExp("[".concat(y,"]+"),"g"),"")}n.exports=a.default,n.exports.default=a.default}(o_,o_.exports)),o_.exports}var Fb;function i3(){return Fb||(Fb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=_(Dt()),p=_(kS());function _(y){return y&&y.__esModule?y:{default:y}}function S(y,u){(0,f.default)(y);var C=u?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return(0,p.default)(y,C)}n.exports=a.default,n.exports.default=a.default}(s_,s_.exports)),s_.exports}var l_={exports:{}},Ub;function a3(){return Ub||(Ub=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var f=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){return(0,f.default)(S),S.replace(new RegExp("[^".concat(y,"]+"),"g"),"")}n.exports=a.default,n.exports.default=a.default}(l_,l_.exports)),l_.exports}var u_={exports:{}},Vb;function s3(){return Vb||(Vb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var f=p(Dt());function p(S){return S&&S.__esModule?S:{default:S}}function _(S,y){(0,f.default)(S);for(var u=S.length-1;u>=0;u--)if(y.indexOf(S[u])===-1)return!1;return!0}n.exports=a.default,n.exports.default=a.default}(u_,u_.exports)),u_.exports}var c_={exports:{}},$b;function o3(){return $b||($b=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=O;var f=p(fs());function p(B){return B&&B.__esModule?B:{default:B}}var _={all_lowercase:!0,gmail_lowercase:!0,gmail_remove_dots:!0,gmail_remove_subaddress:!0,gmail_convert_googlemaildotcom:!0,outlookdotcom_lowercase:!0,outlookdotcom_remove_subaddress:!0,yahoo_lowercase:!0,yahoo_remove_subaddress:!0,yandex_lowercase:!0,yandex_convert_yandexru:!0,icloud_lowercase:!0,icloud_remove_subaddress:!0},S=["icloud.com","me.com"],y=["hotmail.at","hotmail.be","hotmail.ca","hotmail.cl","hotmail.co.il","hotmail.co.nz","hotmail.co.th","hotmail.co.uk","hotmail.com","hotmail.com.ar","hotmail.com.au","hotmail.com.br","hotmail.com.gr","hotmail.com.mx","hotmail.com.pe","hotmail.com.tr","hotmail.com.vn","hotmail.cz","hotmail.de","hotmail.dk","hotmail.es","hotmail.fr","hotmail.hu","hotmail.id","hotmail.ie","hotmail.in","hotmail.it","hotmail.jp","hotmail.kr","hotmail.lv","hotmail.my","hotmail.ph","hotmail.pt","hotmail.sa","hotmail.sg","hotmail.sk","live.be","live.co.uk","live.com","live.com.ar","live.com.mx","live.de","live.es","live.eu","live.fr","live.it","live.nl","msn.com","outlook.at","outlook.be","outlook.cl","outlook.co.il","outlook.co.nz","outlook.co.th","outlook.com","outlook.com.ar","outlook.com.au","outlook.com.br","outlook.com.gr","outlook.com.pe","outlook.com.tr","outlook.com.vn","outlook.cz","outlook.de","outlook.dk","outlook.es","outlook.fr","outlook.hu","outlook.id","outlook.ie","outlook.in","outlook.it","outlook.jp","outlook.kr","outlook.lv","outlook.my","outlook.ph","outlook.pt","outlook.sa","outlook.sg","outlook.sk","passport.com"],u=["rocketmail.com","yahoo.ca","yahoo.co.uk","yahoo.com","yahoo.de","yahoo.fr","yahoo.in","yahoo.it","ymail.com"],C=["yandex.ru","yandex.ua","yandex.kz","yandex.com","yandex.by","ya.ru"];function R(B){return B.length>1?B:""}function O(B,z){z=(0,f.default)(z,_);var F=B.split("@"),G=F.pop(),te=F.join("@"),K=[te,G];if(K[1]=K[1].toLowerCase(),K[1]==="gmail.com"||K[1]==="googlemail.com"){if(z.gmail_remove_subaddress&&(K[0]=K[0].split("+")[0]),z.gmail_remove_dots&&(K[0]=K[0].replace(/\.+/g,R)),!K[0].length)return!1;(z.all_lowercase||z.gmail_lowercase)&&(K[0]=K[0].toLowerCase()),K[1]=z.gmail_convert_googlemaildotcom?"gmail.com":K[1]}else if(S.indexOf(K[1])>=0){if(z.icloud_remove_subaddress&&(K[0]=K[0].split("+")[0]),!K[0].length)return!1;(z.all_lowercase||z.icloud_lowercase)&&(K[0]=K[0].toLowerCase())}else if(y.indexOf(K[1])>=0){if(z.outlookdotcom_remove_subaddress&&(K[0]=K[0].split("+")[0]),!K[0].length)return!1;(z.all_lowercase||z.outlookdotcom_lowercase)&&(K[0]=K[0].toLowerCase())}else if(u.indexOf(K[1])>=0){if(z.yahoo_remove_subaddress){var X=K[0].split("-");K[0]=X.length>1?X.slice(0,-1).join("-"):X[0]}if(!K[0].length)return!1;(z.all_lowercase||z.yahoo_lowercase)&&(K[0]=K[0].toLowerCase())}else C.indexOf(K[1])>=0?((z.all_lowercase||z.yandex_lowercase)&&(K[0]=K[0].toLowerCase()),K[1]=z.yandex_convert_yandexru?"yandex.ru":K[1]):z.all_lowercase&&(K[0]=K[0].toLowerCase());return K.join("@")}n.exports=a.default,n.exports.default=a.default}(c_,c_.exports)),c_.exports}var h_={exports:{}},Zb;function l3(){return Zb||(Zb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _=/^[^\s-_](?!.*?[-_]{2,})[a-z0-9-\\][^\s]*[^-_\s]$/;function S(y){return(0,f.default)(y),_.test(y)}n.exports=a.default,n.exports.default=a.default}(h_,h_.exports)),h_.exports}var f_={exports:{}},qb;function u3(){return qb||(qb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var f=p(Dt());function p(y){return y&&y.__esModule?y:{default:y}}var _={"cs-CZ":function(u){return/^(([ABCDEFHIJKLMNPRSTUVXYZ]|[0-9])-?){5,8}$/.test(u)},"de-DE":function(u){return/^((A|AA|AB|AC|AE|AH|AK|AM|AN|A|AP|AS|AT|AU|AW|AZ|B|BA|BB|BC|BE|BF|BH|BI|BK|BL|BM|BN|BO|B|BS|BT|BZ|C|CA|CB|CE|CO|CR|CW|D|DA|DD|DE|DH|DI|DL|DM|DN|DO|DU|DW|DZ|E|EA|EB|ED|EE|EF|EG|EH|EI|EL|EM|EN|ER|ES|EU|EW|F|FB|FD|FF|FG|FI|FL|FN|FO|FR|FS|FT|F|FW|FZ|G|GA|GC|GD|GE|GF|GG|GI|GK|GL|GM|GN|G|GP|GR|GS|GT|G|GV|GW|GZ|H|HA|HB|HC|HD|HE|HF|HG|HH|HI|HK|HL|HM|HN|HO|HP|HR|HS|HU|HV|HX|HY|HZ|IK|IL|IN|IZ|J|JE|JL|K|KA|KB|KC|KE|KF|KG|KH|KI|KK|KL|KM|KN|KO|KR|KS|KT|KU|KW|KY|L|LA|LB|LC|LD|LF|LG|LH|LI|LL|LM|LN|L|LP|LR|LU|M|MA|MB|MC|MD|ME|MG|MH|MI|MK|ML|MM|MN|MO|MQ|MR|MS|M|MW|MY|MZ|N|NB|ND|NE|NF|NH|NI|NK|NM|N|NP|NR|NT|NU|NW|NY|NZ|OA|OB|OC|OD|OE|OF|OG|OH|OK|OL|OP|OS|OZ|P|PA|PB|PE|PF|PI|PL|PM|PN|PR|PS|PW|PZ|R|RA|RC|RD|RE|RG|RH|RI|RL|RM|RN|RO|RP|RS|RT|RU|RV|RW|RZ|S|SB|SC|SE|SG|SI|SK|SL|SM|SN|SO|SP|SR|ST|SU|SW|SY|SZ|TE|TF|TG|TO|TP|TR|TS|TT|T|B|UE|UH|UL|UM|UN|V|VB|VG|VK|VR|VS|W|WA|WB|WE|WF|WI|WK|WL|WM|WN|WO|WR|WS|WT|W|WW|WZ|Z|ZE|ZI|ZP|ZR|ZW|ZZ)[- ]?[A-Z]{1,2}[- ]?\d{1,4}|(ABG|ABI|AIB|AIC|ALF|ALZ|ANA|ANG|ANK|APD|ARN|ART|ASL|ASZ|AUR|AZE|BAD|BAR|BBG|BCH|BED|BER|BGD|BGL|BID|BIN|BIR|BIT|BIW|BKS|BLB|BLK|BNA|BOG|BOH|BOR|BOT|BRA|BRB|BRG|BRK|BRL|BRV|BSB|BSK|BTF|BD|BUL|BR|BS|BZ|CAS|CHA|CLP|CLZ|COC|COE|CUX|DAH|DAN|DAU|DBR|DEG|DEL|DGF|DIL|DIN|DIZ|DKB|DLG|DON|DUD|DW|EBE|EBN|EBS|ECK|EIC|EIL|EIN|EIS|EMD|EMS|ERB|ERH|ERK|ERZ|ESB|ESW|FDB|FDS|FEU|FFB|FKB|FL|FOR|FRG|FRI|FRW|FTL|FS|GAN|GAP|GDB|GEL|GEO|GER|GHA|GHC|GLA|GMN|GNT|GOA|GOH|GRA|GRH|GRI|GRM|GRZ|GTH|GUB|GUN|GVM|HAB|HAL|HAM|HAS|HBN|HBS|HCH|HDH|HDL|HEB|HEF|HEI|HER|HET|HGN|HGW|HHM|HIG|HIP|HM|HOG|HOH|HOL|HOM|HOR|HS|HOT|HRO|HSK|HST|HVL|HWI|IGB|ILL|JL|KEH|KEL|KEM|KIB|KLE|KLZ|KN|KT|KZ|KRU|KN|KUS|KYF|LAN|LAU|LBS|LBZ|LDK|LDS|LEO|LER|LEV|LIB|LIF|LIP|LB|LOS|LRO|LSZ|LN|LUP|LWL|MAB|MAI|MAK|MAL|MED|MEG|MEI|MEK|MEL|MER|MET|MGH|MGN|MHL|MIL|MKK|MOD|MOL|MON|MOS|MSE|MSH|MSP|MST|MTK|MTL|MB|MR|MYK|MZG|NAB|NAI|NAU|NDH|NEA|NEB|NEC|NEN|NES|NEW|NMB|NMS|NOH|NOL|NOM|NOR|NVP|NWM|OAL|OBB|OBG|OCH|OHA|HR|OHV|OHZ|OPR|OSL|OVI|OVL|OVP|PAF|PAN|PAR|PCH|PEG|PIR|PL|PR|QFT|QLB|RDG|REG|REH|REI|RID|RIE|ROD|ROF|ROK|ROL|ROS|ROT|ROW|RSL|RD|RG|SAB|SAD|SAN|SAW|SBG|SBK|SCZ|SDH|SDL|SDT|SEB|SEE|SEF|SEL|SFB|SFT|SGH|SHA|SHG|SHK|SHL|SIG|SIM|SLE|SLF|SLK|SLN|SLS|SL|SLZ|SM|SOB|SOG|SOK|SM|SON|SPB|SPN|SRB|SRO|STA|STB|STD|STE|STL|SUL|SW|SWA|SZB|TBB|TDO|TET|TIR|TL|TUT|UEM|UER|UFF|USI|VAI|VEC|VER|VIB|VIE|VIT|VOH|WAF|WAK|WAN|WAR|WAT|WBS|WDA|WEL|WEN|WER|WES|WHV|WIL|WIS|WIT|WIZ|WLG|WMS|WND|WOB|WOH|WOL|WOR|WOS|WRN|WSF|WST|WSW|WTL|WTM|WUG|WM|WUN|WUR|WZL|ZEL|ZIG)[- ]?(([A-Z][- ]?\d{1,4})|([A-Z]{2}[- ]?\d{1,3})))[- ]?(E|H)?$/.test(u)},"de-LI":function(u){return/^FL[- ]?\d{1,5}[UZ]?$/.test(u)},"en-IN":function(u){return/^[A-Z]{2}[ -]?[0-9]{1,2}(?:[ -]?[A-Z])(?:[ -]?[A-Z]*)?[ -]?[0-9]{4}$/.test(u)},"en-SG":function(u){return/^[A-Z]{3}[ -]?[\d]{4}[ -]?[A-Z]{1}$/.test(u)},"es-AR":function(u){return/^(([A-Z]{2} ?[0-9]{3} ?[A-Z]{2})|([A-Z]{3} ?[0-9]{3}))$/.test(u)},"fi-FI":function(u){return/^(?=.{4,7})(([A-Z]{1,3}|[0-9]{1,3})[\s-]?([A-Z]{1,3}|[0-9]{1,5}))$/.test(u)},"hu-HU":function(u){return/^((((?!AAA)(([A-NPRSTVZWXY]{1})([A-PR-Z]{1})([A-HJ-NPR-Z]))|(A[ABC]I)|A[ABC]O|A[A-W]Q|BPI|BPO|UCO|UDO|XAO)-(?!000)\d{3})|(M\d{6})|((CK|DT|CD|HC|H[ABEFIKLMNPRSTVX]|MA|OT|R[A-Z]) \d{2}-\d{2})|(CD \d{3}-\d{3})|(C-(C|X) \d{4})|(X-(A|B|C) \d{4})|(([EPVZ]-\d{5}))|(S A[A-Z]{2} \d{2})|(SP \d{2}-\d{2}))$/.test(u)},"pt-BR":function(u){return/^[A-Z]{3}[ -]?[0-9][A-Z][0-9]{2}|[A-Z]{3}[ -]?[0-9]{4}$/.test(u)},"pt-PT":function(u){return/^([A-Z]{2}|[0-9]{2})[ -]?([A-Z]{2}|[0-9]{2})[ -]?([A-Z]{2}|[0-9]{2})$/.test(u)},"sq-AL":function(u){return/^[A-Z]{2}[- ]?((\d{3}[- ]?(([A-Z]{2})|T))|(R[- ]?\d{3}))$/.test(u)},"sv-SE":function(u){return/^[A-HJ-PR-UW-Z]{3} ?[\d]{2}[A-HJ-PR-UW-Z1-9]$|(^[A-Z ]{2,7}$)/.test(u.trim())},"en-PK":function(u){return/(^[A-Z]{2}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]{3}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]{4}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]((\s|-){0,1})[0-9]{4}((\s|-)[0-9]{2}){0,1}$)/.test(u.trim())}};function S(y,u){if((0,f.default)(y),u in _)return _[u](y);if(u==="any"){for(var C in _){var R=_[C];if(R(y))return!0}return!1}throw new Error("Invalid locale '".concat(u,"'"))}n.exports=a.default,n.exports.default=a.default}(f_,f_.exports)),f_.exports}var d_={exports:{}},Gb;function c3(){return Gb||(Gb=1,function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=F;var f=_(fs()),p=_(Dt());function _(G){return G&&G.__esModule?G:{default:G}}var S=/^[A-Z]$/,y=/^[a-z]$/,u=/^[0-9]$/,C=/^[-#!$@%^&*()_+|~=`{}\[\]:";'<>?,.\/\\ ]$/,R={minLength:8,minLowercase:1,minUppercase:1,minNumbers:1,minSymbols:1,returnScore:!1,pointsPerUnique:1,pointsPerRepeat:.5,pointsForContainingLower:10,pointsForContainingUpper:10,pointsForContainingNumber:10,pointsForContainingSymbol:10};function O(G){var te={};return Array.from(G).forEach(function(K){var X=te[K];X?te[K]+=1:te[K]=1}),te}function B(G){var te=O(G),K={length:G.length,uniqueChars:Object.keys(te).length,uppercaseCount:0,lowercaseCount:0,numberCount:0,symbolCount:0};return Object.keys(te).forEach(function(X){S.test(X)?K.uppercaseCount+=te[X]:y.test(X)?K.lowercaseCount+=te[X]:u.test(X)?K.numberCount+=te[X]:C.test(X)&&(K.symbolCount+=te[X])}),K}function z(G,te){var K=0;return K+=G.uniqueChars*te.pointsPerUnique,K+=(G.length-G.uniqueChars)*te.pointsPerRepeat,G.lowercaseCount>0&&(K+=te.pointsForContainingLower),G.uppercaseCount>0&&(K+=te.pointsForContainingUpper),G.numberCount>0&&(K+=te.pointsForContainingNumber),G.symbolCount>0&&(K+=te.pointsForContainingSymbol),K}function F(G){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;(0,p.default)(G);var K=B(G);return te=(0,f.default)(te||{},R),te.returnScore?z(K,te):K.length>=te.minLength&&K.lowercaseCount>=te.minLowercase&&K.uppercaseCount>=te.minUppercase&&K.numberCount>=te.minNumbers&&K.symbolCount>=te.minSymbols}n.exports=a.default,n.exports.default=a.default}(d_,d_.exports)),d_.exports}var Kd={},Hb;function h3(){if(Hb)return Kd;Hb=1;function n(B){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},n(B)}Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.default=O,Kd.vatMatchers=void 0;var a=S(Dt()),f=_(IS());function p(B){if(typeof WeakMap!="function")return null;var z=new WeakMap,F=new WeakMap;return(p=function(te){return te?F:z})(B)}function _(B,z){if(B&&B.__esModule)return B;if(B===null||n(B)!="object"&&typeof B!="function")return{default:B};var F=p(z);if(F&&F.has(B))return F.get(B);var G={__proto__:null},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in B)if(K!=="default"&&{}.hasOwnProperty.call(B,K)){var X=te?Object.getOwnPropertyDescriptor(B,K):null;X&&(X.get||X.set)?Object.defineProperty(G,K,X):G[K]=B[K]}return G.default=B,F&&F.set(B,G),G}function S(B){return B&&B.__esModule?B:{default:B}}var y=function(z){var F=z.match(/^(AU)?(\d{11})$/);if(!F)return!1;var G=[10,1,3,5,7,9,11,13,15,17,19];z=z.replace(/^AU/,"");for(var te=(parseInt(z.slice(0,1),10)-1).toString()+z.slice(1),K=0,X=0;X<11;X++)K+=G[X]*te.charAt(X);return K!==0&&K%89===0},u=function(z){var F=function(te){var K=te.pop(),X=[5,4,3,2,7,6,5,4],ye=(11-te.reduce(function(pe,xe,Se){return pe+xe*X[Se]},0)%11)%11;return K===ye};return/^(CHE[- ]?)?(\d{9}|(\d{3}\.\d{3}\.\d{3})|(\d{3} \d{3} \d{3})) ?(TVA|MWST|IVA)?$/.test(z)&&F(z.match(/\d/g).map(function(G){return+G}))},C=function(z){var F=z.match(/^(PT)?(\d{9})$/);if(!F)return!1;var G=F[2],te=11-f.reverseMultiplyAndSum(G.split("").slice(0,8).map(function(K){return parseInt(K,10)}),9)%11;return te>9?parseInt(G[8],10)===0:te===parseInt(G[8],10)},R=Kd.vatMatchers={AT:function(z){return/^(AT)?U\d{8}$/.test(z)},BE:function(z){return/^(BE)?\d{10}$/.test(z)},BG:function(z){return/^(BG)?\d{9,10}$/.test(z)},HR:function(z){return/^(HR)?\d{11}$/.test(z)},CY:function(z){return/^(CY)?\w{9}$/.test(z)},CZ:function(z){return/^(CZ)?\d{8,10}$/.test(z)},DK:function(z){return/^(DK)?\d{8}$/.test(z)},EE:function(z){return/^(EE)?\d{9}$/.test(z)},FI:function(z){return/^(FI)?\d{8}$/.test(z)},FR:function(z){return/^(FR)?\w{2}\d{9}$/.test(z)},DE:function(z){return/^(DE)?\d{9}$/.test(z)},EL:function(z){return/^(EL)?\d{9}$/.test(z)},HU:function(z){return/^(HU)?\d{8}$/.test(z)},IE:function(z){return/^(IE)?\d{7}\w{1}(W)?$/.test(z)},IT:function(z){return/^(IT)?\d{11}$/.test(z)},LV:function(z){return/^(LV)?\d{11}$/.test(z)},LT:function(z){return/^(LT)?\d{9,12}$/.test(z)},LU:function(z){return/^(LU)?\d{8}$/.test(z)},MT:function(z){return/^(MT)?\d{8}$/.test(z)},NL:function(z){return/^(NL)?\d{9}B\d{2}$/.test(z)},PL:function(z){return/^(PL)?(\d{10}|(\d{3}-\d{3}-\d{2}-\d{2})|(\d{3}-\d{2}-\d{2}-\d{3}))$/.test(z)},PT:C,RO:function(z){return/^(RO)?\d{2,10}$/.test(z)},SK:function(z){return/^(SK)?\d{10}$/.test(z)},SI:function(z){return/^(SI)?\d{8}$/.test(z)},ES:function(z){return/^(ES)?\w\d{7}[A-Z]$/.test(z)},SE:function(z){return/^(SE)?\d{12}$/.test(z)},AL:function(z){return/^(AL)?\w{9}[A-Z]$/.test(z)},MK:function(z){return/^(MK)?\d{13}$/.test(z)},AU:y,BY:function(z){return/^( )?\d{9}$/.test(z)},CA:function(z){return/^(CA)?\d{9}$/.test(z)},IS:function(z){return/^(IS)?\d{5,6}$/.test(z)},IN:function(z){return/^(IN)?\d{15}$/.test(z)},ID:function(z){return/^(ID)?(\d{15}|(\d{2}.\d{3}.\d{3}.\d{1}-\d{3}.\d{3}))$/.test(z)},IL:function(z){return/^(IL)?\d{9}$/.test(z)},KZ:function(z){return/^(KZ)?\d{12}$/.test(z)},NZ:function(z){return/^(NZ)?\d{9}$/.test(z)},NG:function(z){return/^(NG)?(\d{12}|(\d{8}-\d{4}))$/.test(z)},NO:function(z){return/^(NO)?\d{9}MVA$/.test(z)},PH:function(z){return/^(PH)?(\d{12}|\d{3} \d{3} \d{3} \d{3})$/.test(z)},RU:function(z){return/^(RU)?(\d{10}|\d{12})$/.test(z)},SM:function(z){return/^(SM)?\d{5}$/.test(z)},SA:function(z){return/^(SA)?\d{15}$/.test(z)},RS:function(z){return/^(RS)?\d{9}$/.test(z)},CH:u,TR:function(z){return/^(TR)?\d{10}$/.test(z)},UA:function(z){return/^(UA)?\d{12}$/.test(z)},GB:function(z){return/^GB((\d{3} \d{4} ([0-8][0-9]|9[0-6]))|(\d{9} \d{3})|(((GD[0-4])|(HA[5-9]))[0-9]{2}))$/.test(z)},UZ:function(z){return/^(UZ)?\d{9}$/.test(z)},AR:function(z){return/^(AR)?\d{11}$/.test(z)},BO:function(z){return/^(BO)?\d{7}$/.test(z)},BR:function(z){return/^(BR)?((\d{2}.\d{3}.\d{3}\/\d{4}-\d{2})|(\d{3}.\d{3}.\d{3}-\d{2}))$/.test(z)},CL:function(z){return/^(CL)?\d{8}-\d{1}$/.test(z)},CO:function(z){return/^(CO)?\d{10}$/.test(z)},CR:function(z){return/^(CR)?\d{9,12}$/.test(z)},EC:function(z){return/^(EC)?\d{13}$/.test(z)},SV:function(z){return/^(SV)?\d{4}-\d{6}-\d{3}-\d{1}$/.test(z)},GT:function(z){return/^(GT)?\d{7}-\d{1}$/.test(z)},HN:function(z){return/^(HN)?$/.test(z)},MX:function(z){return/^(MX)?\w{3,4}\d{6}\w{3}$/.test(z)},NI:function(z){return/^(NI)?\d{3}-\d{6}-\d{4}\w{1}$/.test(z)},PA:function(z){return/^(PA)?$/.test(z)},PY:function(z){return/^(PY)?\d{6,8}-\d{1}$/.test(z)},PE:function(z){return/^(PE)?\d{11}$/.test(z)},DO:function(z){return/^(DO)?(\d{11}|(\d{3}-\d{7}-\d{1})|[1,4,5]{1}\d{8}|([1,4,5]{1})-\d{2}-\d{5}-\d{1})$/.test(z)},UY:function(z){return/^(UY)?\d{12}$/.test(z)},VE:function(z){return/^(VE)?[J,G,V,E]{1}-(\d{9}|(\d{8}-\d{1}))$/.test(z)}};function O(B,z){if((0,a.default)(B),(0,a.default)(z),z in R)return R[z](B);throw new Error("Invalid country code: '".concat(z,"'"))}return Kd}var Wb;function f3(){return Wb||(Wb=1,function(n,a){function f(wr){"@babel/helpers - typeof";return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(kn){return typeof kn}:function(kn){return kn&&typeof Symbol=="function"&&kn.constructor===Symbol&&kn!==Symbol.prototype?"symbol":typeof kn},f(wr)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var p=ut(Dv()),_=ut(vS()),S=ut(kP()),y=ut(OP()),u=ut(BP()),C=ut(jP()),R=ut(NP()),O=ut(SS()),B=ut(FP()),z=ut(UP()),F=ut(J_()),G=ut(VP()),te=ut(Lv()),K=ut(TS()),X=ut($P()),ye=ut(ZP()),pe=ut(qP()),xe=ut(GP()),Se=Pr(HP()),ke=Pr(WP()),it=ut(KP()),Ke=Pr(YP()),Ye=ut(XP()),ht=ut(QP()),Lt=ut(JP()),sr=ut(eR()),nr=ut(tR()),Xt=ut(MS()),or=ut(AS()),Ct=ut(rR()),Nt=ut(nR()),Rt=ut(aR()),fr=ut(sR()),De=ut(zv()),wt=Pr(_S()),Zt=ut(lR()),Ht=ut(CS()),zt=ut(uR()),er=ut(cR()),ir=ut(hR()),Qr=ut(fR()),br=ut(dR()),en=ut(pR()),Fr=Pr(mR()),ln=ut(gR()),Ln=ut(yR()),Dr=ut(_R()),pr=ut(vR()),Kn=ut(xR()),Un=ut(bR()),Yn=ut(wR()),we=ut(wS()),Re=ut(SR()),We=ut(TR()),vt=ut(MR()),xt=ut(AR()),Et=ut(CR()),Ut=ut(ER()),ur=ut(RS()),_r=ut(PR()),Zr=ut(RR()),Rn=ut(IR()),Vn=ut(DR()),zn=ut(LR()),Pi=ut(zR()),Ri=ut(kR()),nn=Pr(OR()),tn=ut(BR()),je=ut(jR()),ie=ut(NR()),ae=FR(),he=ut(UR()),be=ut(VR()),se=ut($R()),Oe=ut(ZR()),Ve=ut(ES()),Ce=ut(qR()),Ue=ut(GR()),qe=ut(HR()),Fe=ut(WR()),ft=ut(KR()),Pt=ut(PS()),At=ut(YR()),Ft=ut(XR()),lr=ut(QR()),Je=ut(JR()),Wt=ut(e3()),vr=Pr(t3()),Ur=ut(LS()),Cr=ut(DS()),tt=ut(zS()),yt=ut(r3()),kt=ut(n3()),Hr=ut(i3()),$n=ut(a3()),sn=ut(kS()),ar=ut(s3()),Va=ut(o3()),yi=ut(l3()),$a=ut(u3()),Zn=ut(c3()),sa=ut(h3());function wn(wr){if(typeof WeakMap!="function")return null;var kn=new WeakMap,_i=new WeakMap;return(wn=function(eo){return eo?_i:kn})(wr)}function Pr(wr,kn){if(wr&&wr.__esModule)return wr;if(wr===null||f(wr)!="object"&&typeof wr!="function")return{default:wr};var _i=wn(kn);if(_i&&_i.has(wr))return _i.get(wr);var Rs={__proto__:null},eo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var oa in wr)if(oa!=="default"&&{}.hasOwnProperty.call(wr,oa)){var to=eo?Object.getOwnPropertyDescriptor(wr,oa):null;to&&(to.get||to.set)?Object.defineProperty(Rs,oa,to):Rs[oa]=wr[oa]}return Rs.default=wr,_i&&_i.set(wr,Rs),Rs}function ut(wr){return wr&&wr.__esModule?wr:{default:wr}}var Js="13.15.0",Lo={version:Js,toDate:p.default,toFloat:_.default,toInt:S.default,toBoolean:y.default,equals:u.default,contains:C.default,matches:R.default,isEmail:O.default,isURL:B.default,isMACAddress:z.default,isIP:F.default,isIPRange:G.default,isFQDN:te.default,isBoolean:ye.default,isIBAN:Fr.default,isBIC:ln.default,isAbaRouting:xe.default,isAlpha:Se.default,isAlphaLocales:Se.locales,isAlphanumeric:ke.default,isAlphanumericLocales:ke.locales,isNumeric:it.default,isPassportNumber:Ke.default,passportNumberLocales:Ke.locales,isPort:Ye.default,isLowercase:ht.default,isUppercase:Lt.default,isAscii:nr.default,isFullWidth:Xt.default,isHalfWidth:or.default,isVariableWidth:Ct.default,isMultibyte:Nt.default,isSemVer:Rt.default,isSurrogatePair:fr.default,isInt:De.default,isIMEI:sr.default,isFloat:wt.default,isFloatLocales:wt.locales,isDecimal:Zt.default,isHexadecimal:Ht.default,isOctal:zt.default,isDivisibleBy:er.default,isHexColor:ir.default,isRgbColor:Qr.default,isHSL:br.default,isISRC:en.default,isMD5:Ln.default,isHash:Dr.default,isJWT:pr.default,isJSON:Kn.default,isEmpty:Un.default,isLength:Yn.default,isLocale:pe.default,isByteLength:we.default,isULID:Re.default,isUUID:We.default,isMongoId:vt.default,isAfter:xt.default,isBefore:Et.default,isIn:Ut.default,isLuhnNumber:ur.default,isCreditCard:_r.default,isIdentityCard:Zr.default,isEAN:Rn.default,isISIN:Vn.default,isISBN:zn.default,isISSN:Pi.default,isMobilePhone:nn.default,isMobilePhoneLocales:nn.locales,isPostalCode:vr.default,isPostalCodeLocales:vr.locales,isEthereumAddress:tn.default,isCurrency:je.default,isBtcAddress:ie.default,isISO6346:ae.isISO6346,isFreightContainerID:ae.isFreightContainerID,isISO6391:he.default,isISO8601:be.default,isISO15924:Oe.default,isRFC3339:se.default,isISO31661Alpha2:Ve.default,isISO31661Alpha3:Ce.default,isISO31661Numeric:Ue.default,isISO4217:qe.default,isBase32:Fe.default,isBase58:ft.default,isBase64:Pt.default,isDataURI:At.default,isMagnetURI:Ft.default,isMailtoURI:lr.default,isMimeType:Je.default,isLatLong:Wt.default,ltrim:Ur.default,rtrim:Cr.default,trim:tt.default,escape:yt.default,unescape:kt.default,stripLow:Hr.default,whitelist:$n.default,blacklist:sn.default,isWhitelisted:ar.default,normalizeEmail:Va.default,toString,isSlug:yi.default,isStrongPassword:Zn.default,isTaxID:Ri.default,isDate:K.default,isTime:X.default,isLicensePlate:$a.default,isVAT:sa.default,ibanLocales:Fr.locales};a.default=Lo,n.exports=a.default,n.exports.default=a.default}(Ag,Ag.exports)),Ag.exports}var d3=f3();const e0=bv(d3),kv=oe.createContext({});function Ov(n){const a=oe.useRef(null);return a.current===null&&(a.current=n()),a.current}const Bv=typeof window<"u",OS=Bv?oe.useLayoutEffect:oe.useEffect,t0=oe.createContext(null),jv=oe.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class p3 extends oe.Component{getSnapshotBeforeUpdate(a){const f=this.props.childRef.current;if(f&&a.isPresent&&!this.props.isPresent){const p=f.offsetParent,_=p instanceof HTMLElement&&p.offsetWidth||0,S=this.props.sizeRef.current;S.height=f.offsetHeight||0,S.width=f.offsetWidth||0,S.top=f.offsetTop,S.left=f.offsetLeft,S.right=_-S.width-S.left}return null}componentDidUpdate(){}render(){return this.props.children}}function m3({children:n,isPresent:a,anchorX:f}){const p=oe.useId(),_=oe.useRef(null),S=oe.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:y}=oe.useContext(jv);return oe.useInsertionEffect(()=>{const{width:u,height:C,top:R,left:O,right:B}=S.current;if(a||!_.current||!u||!C)return;const z=f==="left"?`left: ${O}`:`right: ${B}`;_.current.dataset.motionPopId=p;const F=document.createElement("style");return y&&(F.nonce=y),document.head.appendChild(F),F.sheet&&F.sheet.insertRule(`
          [data-motion-pop-id="${p}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${C}px !important;
            ${z}px !important;
            top: ${R}px !important;
          }
        `),()=>{document.head.removeChild(F)}},[a]),J.jsx(p3,{isPresent:a,childRef:_,sizeRef:S,children:oe.cloneElement(n,{ref:_})})}const g3=({children:n,initial:a,isPresent:f,onExitComplete:p,custom:_,presenceAffectsLayout:S,mode:y,anchorX:u})=>{const C=Ov(y3),R=oe.useId();let O=!0,B=oe.useMemo(()=>(O=!1,{id:R,initial:a,isPresent:f,custom:_,onExitComplete:z=>{C.set(z,!0);for(const F of C.values())if(!F)return;p&&p()},register:z=>(C.set(z,!1),()=>C.delete(z))}),[f,C,p]);return S&&O&&(B={...B}),oe.useMemo(()=>{C.forEach((z,F)=>C.set(F,!1))},[f]),oe.useEffect(()=>{!f&&!C.size&&p&&p()},[f]),y==="popLayout"&&(n=J.jsx(m3,{isPresent:f,anchorX:u,children:n})),J.jsx(t0.Provider,{value:B,children:n})};function y3(){return new Map}function BS(n=!0){const a=oe.useContext(t0);if(a===null)return[!0,null];const{isPresent:f,onExitComplete:p,register:_}=a,S=oe.useId();oe.useEffect(()=>{if(n)return _(S)},[n]);const y=oe.useCallback(()=>n&&p&&p(S),[S,p,n]);return!f&&p?[!1,y]:[!0]}const p_=n=>n.key||"";function Kb(n){const a=[];return oe.Children.forEach(n,f=>{oe.isValidElement(f)&&a.push(f)}),a}const jS=({children:n,custom:a,initial:f=!0,onExitComplete:p,presenceAffectsLayout:_=!0,mode:S="sync",propagate:y=!1,anchorX:u="left"})=>{const[C,R]=BS(y),O=oe.useMemo(()=>Kb(n),[n]),B=y&&!C?[]:O.map(p_),z=oe.useRef(!0),F=oe.useRef(O),G=Ov(()=>new Map),[te,K]=oe.useState(O),[X,ye]=oe.useState(O);OS(()=>{z.current=!1,F.current=O;for(let Se=0;Se<X.length;Se++){const ke=p_(X[Se]);B.includes(ke)?G.delete(ke):G.get(ke)!==!0&&G.set(ke,!1)}},[X,B.length,B.join("-")]);const pe=[];if(O!==te){let Se=[...O];for(let ke=0;ke<X.length;ke++){const it=X[ke],Ke=p_(it);B.includes(Ke)||(Se.splice(ke,0,it),pe.push(it))}return S==="wait"&&pe.length&&(Se=pe),ye(Kb(Se)),K(O),null}const{forceRender:xe}=oe.useContext(kv);return J.jsx(J.Fragment,{children:X.map(Se=>{const ke=p_(Se),it=y&&!C?!1:O===X||B.includes(ke),Ke=()=>{if(G.has(ke))G.set(ke,!0);else return;let Ye=!0;G.forEach(ht=>{ht||(Ye=!1)}),Ye&&(xe==null||xe(),ye(F.current),y&&(R==null||R()),p&&p())};return J.jsx(g3,{isPresent:it,initial:!z.current||f?void 0:!1,custom:a,presenceAffectsLayout:_,mode:S,onExitComplete:it?void 0:Ke,anchorX:u,children:Se},ke)})})},m_=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Yb={value:null};function _3(n,a){let f=new Set,p=new Set,_=!1,S=!1;const y=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},C=0;function R(B){y.has(B)&&(O.schedule(B),n()),C++,B(u)}const O={schedule:(B,z=!1,F=!1)=>{const te=F&&_?f:p;return z&&y.add(B),te.has(B)||te.add(B),B},cancel:B=>{p.delete(B),y.delete(B)},process:B=>{if(u=B,_){S=!0;return}_=!0,[f,p]=[p,f],f.forEach(R),a&&Yb.value&&Yb.value.frameloop[a].push(C),C=0,f.clear(),_=!1,S&&(S=!1,O.process(B))}};return O}const vc={},v3=40;function NS(n,a){let f=!1,p=!0;const _={delta:0,timestamp:0,isProcessing:!1},S=()=>f=!0,y=m_.reduce((pe,xe)=>(pe[xe]=_3(S,a?xe:void 0),pe),{}),{setup:u,read:C,resolveKeyframes:R,preUpdate:O,update:B,preRender:z,render:F,postRender:G}=y,te=()=>{const pe=vc.useManualTiming?_.timestamp:performance.now();f=!1,vc.useManualTiming||(_.delta=p?1e3/60:Math.max(Math.min(pe-_.timestamp,v3),1)),_.timestamp=pe,_.isProcessing=!0,u.process(_),C.process(_),R.process(_),O.process(_),B.process(_),z.process(_),F.process(_),G.process(_),_.isProcessing=!1,f&&a&&(p=!1,n(te))},K=()=>{f=!0,p=!0,_.isProcessing||n(te)};return{schedule:m_.reduce((pe,xe)=>{const Se=y[xe];return pe[xe]=(ke,it=!1,Ke=!1)=>(f||K(),Se.schedule(ke,it,Ke)),pe},{}),cancel:pe=>{for(let xe=0;xe<m_.length;xe++)y[m_[xe]].cancel(pe)},state:_,steps:y}}const Ro=n=>n,{schedule:gi,cancel:Ah,state:xa,steps:R0}=NS(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ro,!0),FS=oe.createContext({strict:!1}),Xb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rp={};for(const n in Xb)rp[n]={isEnabled:a=>Xb[n].some(f=>!!a[f])};function x3(n){for(const a in n)rp[a]={...rp[a],...n[a]}}const b3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function k_(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||b3.has(n)}let US=n=>!k_(n);function w3(n){n&&(US=a=>a.startsWith("on")?!k_(a):n(a))}try{w3(require("@emotion/is-prop-valid").default)}catch{}function S3(n,a,f){const p={};for(const _ in n)_==="values"&&typeof n.values=="object"||(US(_)||f===!0&&k_(_)||!a&&!k_(_)||n.draggable&&_.startsWith("onDrag"))&&(p[_]=n[_]);return p}function T3(n){if(typeof Proxy>"u")return n;const a=new Map,f=(...p)=>n(...p);return new Proxy(f,{get:(p,_)=>_==="create"?n:(a.has(_)||a.set(_,n(_)),a.get(_))})}const r0=oe.createContext({});function n0(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Cm(n){return typeof n=="string"||Array.isArray(n)}const Nv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Fv=["initial",...Nv];function i0(n){return n0(n.animate)||Fv.some(a=>Cm(n[a]))}function VS(n){return!!(i0(n)||n.variants)}function M3(n,a){if(i0(n)){const{initial:f,animate:p}=n;return{initial:f===!1||Cm(f)?f:void 0,animate:Cm(p)?p:void 0}}return n.inherit!==!1?a:{}}function A3(n){const{initial:a,animate:f}=M3(n,oe.useContext(r0));return oe.useMemo(()=>({initial:a,animate:f}),[Qb(a),Qb(f)])}function Qb(n){return Array.isArray(n)?n.join(" "):n}const C3=Symbol.for("motionComponentSymbol");function Yd(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function E3(n,a,f){return oe.useCallback(p=>{p&&n.onMount&&n.onMount(p),a&&(p?a.mount(p):a.unmount()),f&&(typeof f=="function"?f(p):Yd(f)&&(f.current=p))},[a])}const Uv=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),P3="framerAppearId",$S="data-"+Uv(P3),ZS=oe.createContext({}),{schedule:Vv}=NS(queueMicrotask,!1);function R3(n,a,f,p,_){var te,K;const{visualElement:S}=oe.useContext(r0),y=oe.useContext(FS),u=oe.useContext(t0),C=oe.useContext(jv).reducedMotion,R=oe.useRef(null);p=p||y.renderer,!R.current&&p&&(R.current=p(n,{visualState:a,parent:S,props:f,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:C}));const O=R.current,B=oe.useContext(ZS);O&&!O.projection&&_&&(O.type==="html"||O.type==="svg")&&I3(R.current,f,_,B);const z=oe.useRef(!1);oe.useInsertionEffect(()=>{O&&z.current&&O.update(f,u)});const F=f[$S],G=oe.useRef(!!F&&!((te=window.MotionHandoffIsComplete)!=null&&te.call(window,F))&&((K=window.MotionHasOptimisedAnimation)==null?void 0:K.call(window,F)));return OS(()=>{O&&(z.current=!0,window.MotionIsMounted=!0,O.updateFeatures(),Vv.render(O.render),G.current&&O.animationState&&O.animationState.animateChanges())}),oe.useEffect(()=>{O&&(!G.current&&O.animationState&&O.animationState.animateChanges(),G.current&&(queueMicrotask(()=>{var X;(X=window.MotionHandoffMarkAsComplete)==null||X.call(window,F)}),G.current=!1))}),O}function I3(n,a,f,p){const{layoutId:_,layout:S,drag:y,dragConstraints:u,layoutScroll:C,layoutRoot:R,layoutCrossfade:O}=a;n.projection=new f(n.latestValues,a["data-framer-portal-id"]?void 0:qS(n.parent)),n.projection.setOptions({layoutId:_,layout:S,alwaysMeasureLayout:!!y||u&&Yd(u),visualElement:n,animationType:typeof S=="string"?S:"both",initialPromotionConfig:p,crossfade:O,layoutScroll:C,layoutRoot:R})}function qS(n){if(n)return n.options.allowProjection!==!1?n.projection:qS(n.parent)}let $v=()=>{};function D3({preloadedFeatures:n,createVisualElement:a,useRender:f,useVisualState:p,Component:_}){n&&x3(n);function S(u,C){let R;const O={...oe.useContext(jv),...u,layoutId:L3(u)},{isStatic:B}=O,z=A3(u),F=p(u,B);if(!B&&Bv){z3();const G=k3(O);R=G.MeasureLayout,z.visualElement=R3(_,F,O,a,G.ProjectionNode)}return J.jsxs(r0.Provider,{value:z,children:[R&&z.visualElement?J.jsx(R,{visualElement:z.visualElement,...O}):null,f(_,u,E3(F,z.visualElement,C),F,B,z.visualElement)]})}S.displayName=`motion.${typeof _=="string"?_:`create(${_.displayName??_.name??""})`}`;const y=oe.forwardRef(S);return y[C3]=_,y}function L3({layoutId:n}){const a=oe.useContext(kv).id;return a&&n!==void 0?a+"-"+n:n}function z3(n,a){oe.useContext(FS).strict}function k3(n){const{drag:a,layout:f}=rp;if(!a&&!f)return{};const p={...a,...f};return{MeasureLayout:a!=null&&a.isEnabled(n)||f!=null&&f.isEnabled(n)?p.MeasureLayout:void 0,ProjectionNode:p.ProjectionNode}}const GS=n=>a=>typeof a=="string"&&a.startsWith(n),Zv=GS("--"),O3=GS("var(--"),qv=n=>O3(n)?B3.test(n.split("/*")[0].trim()):!1,B3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Em={};function j3(n){for(const a in n)Em[a]=n[a],Zv(a)&&(Em[a].isCSSVariable=!0)}const up=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],cp=new Set(up);function HS(n,{layout:a,layoutId:f}){return cp.has(n)||n.startsWith("origin")||(a||f!==void 0)&&(!!Em[n]||n==="opacity")}const Ua=n=>!!(n&&n.getVelocity),WS=(n,a)=>a&&typeof n=="number"?a.transform(n):n,xc=(n,a,f)=>f>a?a:f<n?n:f,hp={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Pm={...hp,transform:n=>xc(0,1,n)},g_={...hp,default:1},Jb={...hp,transform:Math.round},Um=n=>({test:a=>typeof a=="string"&&a.endsWith(n)&&a.split(" ").length===1,parse:parseFloat,transform:a=>`${a}${n}`}),Sh=Um("deg"),Su=Um("%"),yr=Um("px"),N3=Um("vh"),F3=Um("vw"),ew={...Su,parse:n=>Su.parse(n)/100,transform:n=>Su.transform(n*100)},U3={rotate:Sh,rotateX:Sh,rotateY:Sh,rotateZ:Sh,scale:g_,scaleX:g_,scaleY:g_,scaleZ:g_,skew:Sh,skewX:Sh,skewY:Sh,distance:yr,translateX:yr,translateY:yr,translateZ:yr,x:yr,y:yr,z:yr,perspective:yr,transformPerspective:yr,opacity:Pm,originX:ew,originY:ew,originZ:yr},Gv={borderWidth:yr,borderTopWidth:yr,borderRightWidth:yr,borderBottomWidth:yr,borderLeftWidth:yr,borderRadius:yr,radius:yr,borderTopLeftRadius:yr,borderTopRightRadius:yr,borderBottomRightRadius:yr,borderBottomLeftRadius:yr,width:yr,maxWidth:yr,height:yr,maxHeight:yr,top:yr,right:yr,bottom:yr,left:yr,padding:yr,paddingTop:yr,paddingRight:yr,paddingBottom:yr,paddingLeft:yr,margin:yr,marginTop:yr,marginRight:yr,marginBottom:yr,marginLeft:yr,backgroundPositionX:yr,backgroundPositionY:yr,...U3,zIndex:Jb,fillOpacity:Pm,strokeOpacity:Pm,numOctaves:Jb},V3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$3=up.length;function Z3(n,a,f){let p="",_=!0;for(let S=0;S<$3;S++){const y=up[S],u=n[y];if(u===void 0)continue;let C=!0;if(typeof u=="number"?C=u===(y.startsWith("scale")?1:0):C=parseFloat(u)===0,!C||f){const R=WS(u,Gv[y]);if(!C){_=!1;const O=V3[y]||y;p+=`${O}(${R}) `}f&&(a[y]=R)}}return p=p.trim(),f?p=f(a,_?"":p):_&&(p="none"),p}function Hv(n,a,f){const{style:p,vars:_,transformOrigin:S}=n;let y=!1,u=!1;for(const C in a){const R=a[C];if(cp.has(C)){y=!0;continue}else if(Zv(C)){_[C]=R;continue}else{const O=WS(R,Gv[C]);C.startsWith("origin")?(u=!0,S[C]=O):p[C]=O}}if(a.transform||(y||f?p.transform=Z3(a,n.transform,f):p.transform&&(p.transform="none")),u){const{originX:C="50%",originY:R="50%",originZ:O=0}=S;p.transformOrigin=`${C} ${R} ${O}`}}const Wv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function KS(n,a,f){for(const p in a)!Ua(a[p])&&!HS(p,f)&&(n[p]=a[p])}function q3({transformTemplate:n},a){return oe.useMemo(()=>{const f=Wv();return Hv(f,a,n),Object.assign({},f.vars,f.style)},[a])}function G3(n,a){const f=n.style||{},p={};return KS(p,f,n),Object.assign(p,q3(n,a)),p}function H3(n,a){const f={},p=G3(n,a);return n.drag&&n.dragListener!==!1&&(f.draggable=!1,p.userSelect=p.WebkitUserSelect=p.WebkitTouchCallout="none",p.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(f.tabIndex=0),f.style=p,f}const W3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Kv(n){return typeof n!="string"||n.includes("-")?!1:!!(W3.indexOf(n)>-1||/[A-Z]/u.test(n))}const K3={offset:"stroke-dashoffset",array:"stroke-dasharray"},Y3={offset:"strokeDashoffset",array:"strokeDasharray"};function X3(n,a,f=1,p=0,_=!0){n.pathLength=1;const S=_?K3:Y3;n[S.offset]=yr.transform(-p);const y=yr.transform(a),u=yr.transform(f);n[S.array]=`${y} ${u}`}function YS(n,{attrX:a,attrY:f,attrScale:p,pathLength:_,pathSpacing:S=1,pathOffset:y=0,...u},C,R){if(Hv(n,u,R),C){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:O,style:B}=n;O.transform&&(B.transform=O.transform,delete O.transform),(B.transform||O.transformOrigin)&&(B.transformOrigin=O.transformOrigin??"50% 50%",delete O.transformOrigin),B.transform&&(B.transformBox="fill-box",delete O.transformBox),a!==void 0&&(O.x=a),f!==void 0&&(O.y=f),p!==void 0&&(O.scale=p),_!==void 0&&X3(O,_,S,y,!1)}const XS=()=>({...Wv(),attrs:{}}),QS=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Q3(n,a,f,p){const _=oe.useMemo(()=>{const S=XS();return YS(S,a,QS(p),n.transformTemplate),{...S.attrs,style:{...S.style}}},[a]);if(n.style){const S={};KS(S,n.style,n),_.style={...S,..._.style}}return _}function J3(n=!1){return(f,p,_,{latestValues:S},y)=>{const C=(Kv(f)?Q3:H3)(p,S,y,f),R=S3(p,typeof f=="string",n),O=f!==oe.Fragment?{...R,...C,ref:_}:{},{children:B}=p,z=oe.useMemo(()=>Ua(B)?B.get():B,[B]);return oe.createElement(f,{...O,children:z})}}function tw(n){const a=[{},{}];return n==null||n.values.forEach((f,p)=>{a[0][p]=f.get(),a[1][p]=f.getVelocity()}),a}function Yv(n,a,f,p){if(typeof a=="function"){const[_,S]=tw(p);a=a(f!==void 0?f:n.custom,_,S)}if(typeof a=="string"&&(a=n.variants&&n.variants[a]),typeof a=="function"){const[_,S]=tw(p);a=a(f!==void 0?f:n.custom,_,S)}return a}function C_(n){return Ua(n)?n.get():n}function eI({scrapeMotionValuesFromProps:n,createRenderState:a},f,p,_){return{latestValues:tI(f,p,_,n),renderState:a()}}const JS=n=>(a,f)=>{const p=oe.useContext(r0),_=oe.useContext(t0),S=()=>eI(n,a,p,_);return f?S():Ov(S)};function tI(n,a,f,p){const _={},S=p(n,{});for(const z in S)_[z]=C_(S[z]);let{initial:y,animate:u}=n;const C=i0(n),R=VS(n);a&&R&&!C&&n.inherit!==!1&&(y===void 0&&(y=a.initial),u===void 0&&(u=a.animate));let O=f?f.initial===!1:!1;O=O||y===!1;const B=O?u:y;if(B&&typeof B!="boolean"&&!n0(B)){const z=Array.isArray(B)?B:[B];for(let F=0;F<z.length;F++){const G=Yv(n,z[F]);if(G){const{transitionEnd:te,transition:K,...X}=G;for(const ye in X){let pe=X[ye];if(Array.isArray(pe)){const xe=O?pe.length-1:0;pe=pe[xe]}pe!==null&&(_[ye]=pe)}for(const ye in te)_[ye]=te[ye]}}}return _}function Xv(n,a,f){var S;const{style:p}=n,_={};for(const y in p)(Ua(p[y])||a.style&&Ua(a.style[y])||HS(y,n)||((S=f==null?void 0:f.getValue(y))==null?void 0:S.liveStyle)!==void 0)&&(_[y]=p[y]);return _}const rI={useVisualState:JS({scrapeMotionValuesFromProps:Xv,createRenderState:Wv})};function eT(n,a,f){const p=Xv(n,a,f);for(const _ in n)if(Ua(n[_])||Ua(a[_])){const S=up.indexOf(_)!==-1?"attr"+_.charAt(0).toUpperCase()+_.substring(1):_;p[S]=n[_]}return p}const nI={useVisualState:JS({scrapeMotionValuesFromProps:eT,createRenderState:XS})};function iI(n,a){return function(p,{forwardMotionProps:_}={forwardMotionProps:!1}){const y={...Kv(p)?nI:rI,preloadedFeatures:n,useRender:J3(_),createVisualElement:a,Component:p};return D3(y)}}function Rm(n,a,f){const p=n.getProps();return Yv(p,a,f!==void 0?f:p.custom,n)}const tv=n=>Array.isArray(n);let E_;function aI(){E_=void 0}const Cs={now:()=>(E_===void 0&&Cs.set(xa.isProcessing||vc.useManualTiming?xa.timestamp:performance.now()),E_),set:n=>{E_=n,queueMicrotask(aI)}};function Qv(n,a){n.indexOf(a)===-1&&n.push(a)}function Jv(n,a){const f=n.indexOf(a);f>-1&&n.splice(f,1)}class ex{constructor(){this.subscriptions=[]}add(a){return Qv(this.subscriptions,a),()=>Jv(this.subscriptions,a)}notify(a,f,p){const _=this.subscriptions.length;if(_)if(_===1)this.subscriptions[0](a,f,p);else for(let S=0;S<_;S++){const y=this.subscriptions[S];y&&y(a,f,p)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function tT(n,a){return a?n*(1e3/a):0}const rw=30,sI=n=>!isNaN(parseFloat(n));class oI{constructor(a,f={}){this.version="12.9.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(p,_=!0)=>{var y,u;const S=Cs.now();this.updatedAt!==S&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(p),this.current!==this.prev&&((y=this.events.change)==null||y.notify(this.current)),_&&((u=this.events.renderRequest)==null||u.notify(this.current))},this.hasAnimated=!1,this.setCurrent(a),this.owner=f.owner}setCurrent(a){this.current=a,this.updatedAt=Cs.now(),this.canTrackVelocity===null&&a!==void 0&&(this.canTrackVelocity=sI(this.current))}setPrevFrameValue(a=this.current){this.prevFrameValue=a,this.prevUpdatedAt=this.updatedAt}onChange(a){return this.on("change",a)}on(a,f){this.events[a]||(this.events[a]=new ex);const p=this.events[a].add(f);return a==="change"?()=>{p(),gi.read(()=>{this.events.change.getSize()||this.stop()})}:p}clearListeners(){for(const a in this.events)this.events[a].clear()}attach(a,f){this.passiveEffect=a,this.stopPassiveEffect=f}set(a,f=!0){!f||!this.passiveEffect?this.updateAndNotify(a,f):this.passiveEffect(a,this.updateAndNotify)}setWithVelocity(a,f,p){this.set(f),this.prev=void 0,this.prevFrameValue=a,this.prevUpdatedAt=this.updatedAt-p}jump(a,f=!0){this.updateAndNotify(a),this.prev=a,this.prevUpdatedAt=this.prevFrameValue=void 0,f&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const a=Cs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||a-this.updatedAt>rw)return 0;const f=Math.min(this.updatedAt-this.prevUpdatedAt,rw);return tT(parseFloat(this.current)-parseFloat(this.prevFrameValue),f)}start(a){return this.stop(),new Promise(f=>{this.hasAnimated=!0,this.animation=a(f),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var a;(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Im(n,a){return new oI(n,a)}function lI(n,a,f){n.hasValue(a)?n.getValue(a).set(f):n.addValue(a,Im(f))}function uI(n){return tv(n)?n[n.length-1]||0:n}function cI(n,a){const f=Rm(n,a);let{transitionEnd:p={},transition:_={},...S}=f||{};S={...S,...p};for(const y in S){const u=uI(S[y]);lI(n,y,u)}}function hI(n){return!!(Ua(n)&&n.add)}function rv(n,a){const f=n.getValue("willChange");if(hI(f))return f.add(a);if(!f&&vc.WillChange){const p=new vc.WillChange("auto");n.addValue("willChange",p),p.add(a)}}function rT(n){return n.props[$S]}const fI=n=>n!==null;function dI(n,{repeat:a,repeatType:f="loop"},p){const _=n.filter(fI),S=a&&f!=="loop"&&a%2===1?0:_.length-1;return _[S]}const pI={type:"spring",stiffness:500,damping:25,restSpeed:10},mI=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),gI={type:"keyframes",duration:.8},yI={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_I=(n,{keyframes:a})=>a.length>2?gI:cp.has(n)?n.startsWith("scale")?mI(a[1]):pI:yI;function vI({when:n,delay:a,delayChildren:f,staggerChildren:p,staggerDirection:_,repeat:S,repeatType:y,repeatDelay:u,from:C,elapsed:R,...O}){return!!Object.keys(O).length}function tx(n,a){return(n==null?void 0:n[a])??(n==null?void 0:n.default)??n}const Tu=n=>n*1e3,Mu=n=>n/1e3,xm=n=>Math.round(n*1e5)/1e5,rx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function xI(n){return n==null}const bI=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,nx=(n,a)=>f=>!!(typeof f=="string"&&bI.test(f)&&f.startsWith(n)||a&&!xI(f)&&Object.prototype.hasOwnProperty.call(f,a)),nT=(n,a,f)=>p=>{if(typeof p!="string")return p;const[_,S,y,u]=p.match(rx);return{[n]:parseFloat(_),[a]:parseFloat(S),[f]:parseFloat(y),alpha:u!==void 0?parseFloat(u):1}},wI=n=>xc(0,255,n),I0={...hp,transform:n=>Math.round(wI(n))},Ff={test:nx("rgb","red"),parse:nT("red","green","blue"),transform:({red:n,green:a,blue:f,alpha:p=1})=>"rgba("+I0.transform(n)+", "+I0.transform(a)+", "+I0.transform(f)+", "+xm(Pm.transform(p))+")"};function SI(n){let a="",f="",p="",_="";return n.length>5?(a=n.substring(1,3),f=n.substring(3,5),p=n.substring(5,7),_=n.substring(7,9)):(a=n.substring(1,2),f=n.substring(2,3),p=n.substring(3,4),_=n.substring(4,5),a+=a,f+=f,p+=p,_+=_),{red:parseInt(a,16),green:parseInt(f,16),blue:parseInt(p,16),alpha:_?parseInt(_,16)/255:1}}const nv={test:nx("#"),parse:SI,transform:Ff.transform},Xd={test:nx("hsl","hue"),parse:nT("hue","saturation","lightness"),transform:({hue:n,saturation:a,lightness:f,alpha:p=1})=>"hsla("+Math.round(n)+", "+Su.transform(xm(a))+", "+Su.transform(xm(f))+", "+xm(Pm.transform(p))+")"},Na={test:n=>Ff.test(n)||nv.test(n)||Xd.test(n),parse:n=>Ff.test(n)?Ff.parse(n):Xd.test(n)?Xd.parse(n):nv.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Ff.transform(n):Xd.transform(n)},TI=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function MI(n){var a,f;return isNaN(n)&&typeof n=="string"&&(((a=n.match(rx))==null?void 0:a.length)||0)+(((f=n.match(TI))==null?void 0:f.length)||0)>0}const iT="number",aT="color",AI="var",CI="var(",nw="${}",EI=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Dm(n){const a=n.toString(),f=[],p={color:[],number:[],var:[]},_=[];let S=0;const u=a.replace(EI,C=>(Na.test(C)?(p.color.push(S),_.push(aT),f.push(Na.parse(C))):C.startsWith(CI)?(p.var.push(S),_.push(AI),f.push(C)):(p.number.push(S),_.push(iT),f.push(parseFloat(C))),++S,nw)).split(nw);return{values:f,split:u,indexes:p,types:_}}function sT(n){return Dm(n).values}function oT(n){const{split:a,types:f}=Dm(n),p=a.length;return _=>{let S="";for(let y=0;y<p;y++)if(S+=a[y],_[y]!==void 0){const u=f[y];u===iT?S+=xm(_[y]):u===aT?S+=Na.transform(_[y]):S+=_[y]}return S}}const PI=n=>typeof n=="number"?0:n;function RI(n){const a=sT(n);return oT(n)(a.map(PI))}const Ch={test:MI,parse:sT,createTransformer:oT,getAnimatableNone:RI};function D0(n,a,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?n+(a-n)*6*f:f<1/2?a:f<2/3?n+(a-n)*(2/3-f)*6:n}function II({hue:n,saturation:a,lightness:f,alpha:p}){n/=360,a/=100,f/=100;let _=0,S=0,y=0;if(!a)_=S=y=f;else{const u=f<.5?f*(1+a):f+a-f*a,C=2*f-u;_=D0(C,u,n+1/3),S=D0(C,u,n),y=D0(C,u,n-1/3)}return{red:Math.round(_*255),green:Math.round(S*255),blue:Math.round(y*255),alpha:p}}function O_(n,a){return f=>f>0?a:n}const mi=(n,a,f)=>n+(a-n)*f,L0=(n,a,f)=>{const p=n*n,_=f*(a*a-p)+p;return _<0?0:Math.sqrt(_)},DI=[nv,Ff,Xd],LI=n=>DI.find(a=>a.test(n));function iw(n){const a=LI(n);if(!a)return!1;let f=a.parse(n);return a===Xd&&(f=II(f)),f}const aw=(n,a)=>{const f=iw(n),p=iw(a);if(!f||!p)return O_(n,a);const _={...f};return S=>(_.red=L0(f.red,p.red,S),_.green=L0(f.green,p.green,S),_.blue=L0(f.blue,p.blue,S),_.alpha=mi(f.alpha,p.alpha,S),Ff.transform(_))},iv=new Set(["none","hidden"]);function zI(n,a){return iv.has(n)?f=>f<=0?n:a:f=>f>=1?a:n}const kI=(n,a)=>f=>a(n(f)),Vm=(...n)=>n.reduce(kI);function OI(n,a){return f=>mi(n,a,f)}function ix(n){return typeof n=="number"?OI:typeof n=="string"?qv(n)?O_:Na.test(n)?aw:NI:Array.isArray(n)?lT:typeof n=="object"?Na.test(n)?aw:BI:O_}function lT(n,a){const f=[...n],p=f.length,_=n.map((S,y)=>ix(S)(S,a[y]));return S=>{for(let y=0;y<p;y++)f[y]=_[y](S);return f}}function BI(n,a){const f={...n,...a},p={};for(const _ in f)n[_]!==void 0&&a[_]!==void 0&&(p[_]=ix(n[_])(n[_],a[_]));return _=>{for(const S in p)f[S]=p[S](_);return f}}function jI(n,a){const f=[],p={color:0,var:0,number:0};for(let _=0;_<a.values.length;_++){const S=a.types[_],y=n.indexes[S][p[S]],u=n.values[y]??0;f[_]=u,p[S]++}return f}const NI=(n,a)=>{const f=Ch.createTransformer(a),p=Dm(n),_=Dm(a);return p.indexes.var.length===_.indexes.var.length&&p.indexes.color.length===_.indexes.color.length&&p.indexes.number.length>=_.indexes.number.length?iv.has(n)&&!_.values.length||iv.has(a)&&!p.values.length?zI(n,a):Vm(lT(jI(p,_),_.values),f):O_(n,a)};function uT(n,a,f){return typeof n=="number"&&typeof a=="number"&&typeof f=="number"?mi(n,a,f):ix(n)(n,a)}const FI=n=>{const a=({timestamp:f})=>n(f);return{start:()=>gi.update(a,!0),stop:()=>Ah(a),now:()=>xa.isProcessing?xa.timestamp:Cs.now()}},cT=(n,a,f=10)=>{let p="";const _=Math.max(Math.round(a/f),2);for(let S=0;S<_;S++)p+=n(S/(_-1))+", ";return`linear(${p.substring(0,p.length-2)})`},B_=2e4;function ax(n){let a=0;const f=50;let p=n.next(a);for(;!p.done&&a<B_;)a+=f,p=n.next(a);return a>=B_?1/0:a}function UI(n,a=100,f){const p=f({...n,keyframes:[0,a]}),_=Math.min(ax(p),B_);return{type:"keyframes",ease:S=>p.next(_*S).value/a,duration:Mu(_)}}const VI=5;function hT(n,a,f){const p=Math.max(a-VI,0);return tT(f-n(p),a-p)}const Ei={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},sw=.001;function $I({duration:n=Ei.duration,bounce:a=Ei.bounce,velocity:f=Ei.velocity,mass:p=Ei.mass}){let _,S,y=1-a;y=xc(Ei.minDamping,Ei.maxDamping,y),n=xc(Ei.minDuration,Ei.maxDuration,Mu(n)),y<1?(_=R=>{const O=R*y,B=O*n,z=O-f,F=av(R,y),G=Math.exp(-B);return sw-z/F*G},S=R=>{const B=R*y*n,z=B*f+f,F=Math.pow(y,2)*Math.pow(R,2)*n,G=Math.exp(-B),te=av(Math.pow(R,2),y);return(-_(R)+sw>0?-1:1)*((z-F)*G)/te}):(_=R=>{const O=Math.exp(-R*n),B=(R-f)*n+1;return-.001+O*B},S=R=>{const O=Math.exp(-R*n),B=(f-R)*(n*n);return O*B});const u=5/n,C=qI(_,S,u);if(n=Tu(n),isNaN(C))return{stiffness:Ei.stiffness,damping:Ei.damping,duration:n};{const R=Math.pow(C,2)*p;return{stiffness:R,damping:y*2*Math.sqrt(p*R),duration:n}}}const ZI=12;function qI(n,a,f){let p=f;for(let _=1;_<ZI;_++)p=p-n(p)/a(p);return p}function av(n,a){return n*Math.sqrt(1-a*a)}const GI=["duration","bounce"],HI=["stiffness","damping","mass"];function ow(n,a){return a.some(f=>n[f]!==void 0)}function WI(n){let a={velocity:Ei.velocity,stiffness:Ei.stiffness,damping:Ei.damping,mass:Ei.mass,isResolvedFromDuration:!1,...n};if(!ow(n,HI)&&ow(n,GI))if(n.visualDuration){const f=n.visualDuration,p=2*Math.PI/(f*1.2),_=p*p,S=2*xc(.05,1,1-(n.bounce||0))*Math.sqrt(_);a={...a,mass:Ei.mass,stiffness:_,damping:S}}else{const f=$I(n);a={...a,...f,mass:Ei.mass},a.isResolvedFromDuration=!0}return a}function j_(n=Ei.visualDuration,a=Ei.bounce){const f=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:a}:n;let{restSpeed:p,restDelta:_}=f;const S=f.keyframes[0],y=f.keyframes[f.keyframes.length-1],u={done:!1,value:S},{stiffness:C,damping:R,mass:O,duration:B,velocity:z,isResolvedFromDuration:F}=WI({...f,velocity:-Mu(f.velocity||0)}),G=z||0,te=R/(2*Math.sqrt(C*O)),K=y-S,X=Mu(Math.sqrt(C/O)),ye=Math.abs(K)<5;p||(p=ye?Ei.restSpeed.granular:Ei.restSpeed.default),_||(_=ye?Ei.restDelta.granular:Ei.restDelta.default);let pe;if(te<1){const Se=av(X,te);pe=ke=>{const it=Math.exp(-te*X*ke);return y-it*((G+te*X*K)/Se*Math.sin(Se*ke)+K*Math.cos(Se*ke))}}else if(te===1)pe=Se=>y-Math.exp(-X*Se)*(K+(G+X*K)*Se);else{const Se=X*Math.sqrt(te*te-1);pe=ke=>{const it=Math.exp(-te*X*ke),Ke=Math.min(Se*ke,300);return y-it*((G+te*X*K)*Math.sinh(Ke)+Se*K*Math.cosh(Ke))/Se}}const xe={calculatedDuration:F&&B||null,next:Se=>{const ke=pe(Se);if(F)u.done=Se>=B;else{let it=Se===0?G:0;te<1&&(it=Se===0?Tu(G):hT(pe,Se,ke));const Ke=Math.abs(it)<=p,Ye=Math.abs(y-ke)<=_;u.done=Ke&&Ye}return u.value=u.done?y:ke,u},toString:()=>{const Se=Math.min(ax(xe),B_),ke=cT(it=>xe.next(Se*it).value,Se,30);return Se+"ms "+ke},toTransition:()=>{}};return xe}j_.applyToOptions=n=>{const a=UI(n,100,j_);return n.ease=a.ease,n.duration=Tu(a.duration),n.type="keyframes",n};function sv({keyframes:n,velocity:a=0,power:f=.8,timeConstant:p=325,bounceDamping:_=10,bounceStiffness:S=500,modifyTarget:y,min:u,max:C,restDelta:R=.5,restSpeed:O}){const B=n[0],z={done:!1,value:B},F=Ke=>u!==void 0&&Ke<u||C!==void 0&&Ke>C,G=Ke=>u===void 0?C:C===void 0||Math.abs(u-Ke)<Math.abs(C-Ke)?u:C;let te=f*a;const K=B+te,X=y===void 0?K:y(K);X!==K&&(te=X-B);const ye=Ke=>-te*Math.exp(-Ke/p),pe=Ke=>X+ye(Ke),xe=Ke=>{const Ye=ye(Ke),ht=pe(Ke);z.done=Math.abs(Ye)<=R,z.value=z.done?X:ht};let Se,ke;const it=Ke=>{F(z.value)&&(Se=Ke,ke=j_({keyframes:[z.value,G(z.value)],velocity:hT(pe,Ke,z.value),damping:_,stiffness:S,restDelta:R,restSpeed:O}))};return it(0),{calculatedDuration:null,next:Ke=>{let Ye=!1;return!ke&&Se===void 0&&(Ye=!0,xe(Ke),it(Ke)),Se!==void 0&&Ke>=Se?ke.next(Ke-Se):(!Ye&&xe(Ke),z)}}}const Lm=(n,a,f)=>{const p=a-n;return p===0?1:(f-n)/p};function KI(n,a,f){const p=[],_=f||vc.mix||uT,S=n.length-1;for(let y=0;y<S;y++){let u=_(n[y],n[y+1]);if(a){const C=Array.isArray(a)?a[y]||Ro:a;u=Vm(C,u)}p.push(u)}return p}function YI(n,a,{clamp:f=!0,ease:p,mixer:_}={}){const S=n.length;if($v(S===a.length),S===1)return()=>a[0];if(S===2&&a[0]===a[1])return()=>a[1];const y=n[0]===n[1];n[0]>n[S-1]&&(n=[...n].reverse(),a=[...a].reverse());const u=KI(a,p,_),C=u.length,R=O=>{if(y&&O<n[0])return a[0];let B=0;if(C>1)for(;B<n.length-2&&!(O<n[B+1]);B++);const z=Lm(n[B],n[B+1],O);return u[B](z)};return f?O=>R(xc(n[0],n[S-1],O)):R}function XI(n,a){const f=n[n.length-1];for(let p=1;p<=a;p++){const _=Lm(0,a,p);n.push(mi(f,1,_))}}function QI(n){const a=[0];return XI(a,n.length-1),a}function JI(n,a){return n.map(f=>f*a)}const fT=(n,a,f)=>(((1-3*f+3*a)*n+(3*f-6*a))*n+3*a)*n,eD=1e-7,tD=12;function rD(n,a,f,p,_){let S,y,u=0;do y=a+(f-a)/2,S=fT(y,p,_)-n,S>0?f=y:a=y;while(Math.abs(S)>eD&&++u<tD);return y}function $m(n,a,f,p){if(n===a&&f===p)return Ro;const _=S=>rD(S,0,1,n,f);return S=>S===0||S===1?S:fT(_(S),a,p)}const nD=$m(.42,0,1,1),iD=$m(0,0,.58,1),dT=$m(.42,0,.58,1),aD=n=>Array.isArray(n)&&typeof n[0]!="number",pT=n=>a=>a<=.5?n(2*a)/2:(2-n(2*(1-a)))/2,mT=n=>a=>1-n(1-a),gT=$m(.33,1.53,.69,.99),sx=mT(gT),yT=pT(sx),_T=n=>(n*=2)<1?.5*sx(n):.5*(2-Math.pow(2,-10*(n-1))),ox=n=>1-Math.sin(Math.acos(n)),vT=mT(ox),xT=pT(ox),bT=n=>Array.isArray(n)&&typeof n[0]=="number",sD={linear:Ro,easeIn:nD,easeInOut:dT,easeOut:iD,circIn:ox,circInOut:xT,circOut:vT,backIn:sx,backInOut:yT,backOut:gT,anticipate:_T},oD=n=>typeof n=="string",lw=n=>{if(bT(n)){$v(n.length===4);const[a,f,p,_]=n;return $m(a,f,p,_)}else if(oD(n))return sD[n];return n};function lD(n,a){return n.map(()=>a||dT).splice(0,n.length-1)}function bm({duration:n=300,keyframes:a,times:f,ease:p="easeInOut"}){const _=aD(p)?p.map(lw):lw(p),S={done:!1,value:a[0]},y=JI(f&&f.length===a.length?f:QI(a),n),u=YI(y,a,{ease:Array.isArray(_)?_:lD(a,_)});return{calculatedDuration:n,next:C=>(S.value=u(C),S.done=C>=n,S)}}const uD=n=>n!==null;function lx(n,{repeat:a,repeatType:f="loop"},p,_=1){const S=n.filter(uD),u=_<0||a&&f!=="loop"&&a%2===1?0:S.length-1;return!u||p===void 0?S[u]:p}const cD={decay:sv,inertia:sv,tween:bm,keyframes:bm,spring:j_};function wT(n){typeof n.type=="string"&&(n.type=cD[n.type])}class ux{constructor(){this.count=0,this.updateFinished()}get finished(){return this._finished}updateFinished(){this.count++,this._finished=new Promise(a=>{this.resolve=a})}notifyFinished(){this.resolve()}then(a,f){return this.finished.then(a,f)}}const hD=n=>n/100;class ST extends ux{constructor(a){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:f}=this.options;if(f&&f.updatedAt!==Cs.now()&&this.tick(Cs.now()),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:p}=this.options;p&&p()},this.options=a,this.initAnimation(),this.play(),a.autoplay===!1&&this.pause()}initAnimation(){const{options:a}=this;wT(a);const{type:f=bm,repeat:p=0,repeatDelay:_=0,repeatType:S,velocity:y=0}=a;let{keyframes:u}=a;const C=f||bm;C!==bm&&typeof u[0]!="number"&&(this.mixKeyframes=Vm(hD,uT(u[0],u[1])),u=[0,100]);const R=C({...a,keyframes:u});S==="mirror"&&(this.mirroredGenerator=C({...a,keyframes:[...u].reverse(),velocity:-y})),R.calculatedDuration===null&&(R.calculatedDuration=ax(R));const{calculatedDuration:O}=R;this.calculatedDuration=O,this.resolvedDuration=O+_,this.totalDuration=this.resolvedDuration*(p+1)-_,this.generator=R}updateTime(a){const f=Math.round(a-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=f}tick(a,f=!1){const{generator:p,totalDuration:_,mixKeyframes:S,mirroredGenerator:y,resolvedDuration:u,calculatedDuration:C}=this;if(this.startTime===null)return p.next(0);const{delay:R=0,keyframes:O,repeat:B,repeatType:z,repeatDelay:F,type:G,onUpdate:te,finalKeyframe:K}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,a):this.speed<0&&(this.startTime=Math.min(a-_/this.speed,this.startTime)),f?this.currentTime=a:this.updateTime(a);const X=this.currentTime-R*(this.playbackSpeed>=0?1:-1),ye=this.playbackSpeed>=0?X<0:X>_;this.currentTime=Math.max(X,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=_);let pe=this.currentTime,xe=p;if(B){const Ke=Math.min(this.currentTime,_)/u;let Ye=Math.floor(Ke),ht=Ke%1;!ht&&Ke>=1&&(ht=1),ht===1&&Ye--,Ye=Math.min(Ye,B+1),!!(Ye%2)&&(z==="reverse"?(ht=1-ht,F&&(ht-=F/u)):z==="mirror"&&(xe=y)),pe=xc(0,1,ht)*u}const Se=ye?{done:!1,value:O[0]}:xe.next(pe);S&&(Se.value=S(Se.value));let{done:ke}=Se;!ye&&C!==null&&(ke=this.playbackSpeed>=0?this.currentTime>=_:this.currentTime<=0);const it=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ke);return it&&G!==sv&&(Se.value=lx(O,this.options,K,this.speed)),te&&te(Se.value),it&&this.finish(),Se}then(a,f){return this.finished.then(a,f)}get duration(){return Mu(this.calculatedDuration)}get time(){return Mu(this.currentTime)}set time(a){a=Tu(a),this.currentTime=a,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=a:this.driver&&(this.startTime=this.driver.now()-a/this.playbackSpeed)}get speed(){return this.playbackSpeed}set speed(a){this.updateTime(Cs.now());const f=this.playbackSpeed!==a;this.playbackSpeed=a,f&&(this.time=Mu(this.currentTime))}play(){if(this.isStopped)return;const{driver:a=FI,onPlay:f,startTime:p}=this.options;this.driver||(this.driver=a(S=>this.tick(S))),f&&f();const _=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=_):this.holdTime!==null?this.startTime=_-this.holdTime:this.startTime||(this.startTime=p??_),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Cs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:a}=this.options;a&&a()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown()}teardown(){this.notifyFinished(),this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(a){return this.startTime=0,this.tick(a,!0)}attachTimeline(a){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),a.observe(this)}}function fD(n){for(let a=1;a<n.length;a++)n[a]??(n[a]=n[a-1])}const Uf=n=>n*180/Math.PI,ov=n=>{const a=Uf(Math.atan2(n[1],n[0]));return lv(a)},dD={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:ov,rotateZ:ov,skewX:n=>Uf(Math.atan(n[1])),skewY:n=>Uf(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},lv=n=>(n=n%360,n<0&&(n+=360),n),uw=ov,cw=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),hw=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),pD={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:cw,scaleY:hw,scale:n=>(cw(n)+hw(n))/2,rotateX:n=>lv(Uf(Math.atan2(n[6],n[5]))),rotateY:n=>lv(Uf(Math.atan2(-n[2],n[0]))),rotateZ:uw,rotate:uw,skewX:n=>Uf(Math.atan(n[4])),skewY:n=>Uf(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function fw(n){return n.includes("scale")?1:0}function uv(n,a){if(!n||n==="none")return fw(a);const f=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let p,_;if(f)p=pD,_=f;else{const u=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);p=dD,_=u}if(!_)return fw(a);const S=p[a],y=_[1].split(",").map(gD);return typeof S=="function"?S(y):y[S]}const mD=(n,a)=>{const{transform:f="none"}=getComputedStyle(n);return uv(f,a)};function gD(n){return parseFloat(n.trim())}const dw=n=>n===hp||n===yr,yD=new Set(["x","y","z"]),_D=up.filter(n=>!yD.has(n));function vD(n){const a=[];return _D.forEach(f=>{const p=n.getValue(f);p!==void 0&&(a.push([f,p.get()]),p.set(f.startsWith("scale")?1:0))}),a}const np={width:({x:n},{paddingLeft:a="0",paddingRight:f="0"})=>n.max-n.min-parseFloat(a)-parseFloat(f),height:({y:n},{paddingTop:a="0",paddingBottom:f="0"})=>n.max-n.min-parseFloat(a)-parseFloat(f),top:(n,{top:a})=>parseFloat(a),left:(n,{left:a})=>parseFloat(a),bottom:({y:n},{top:a})=>parseFloat(a)+(n.max-n.min),right:({x:n},{left:a})=>parseFloat(a)+(n.max-n.min),x:(n,{transform:a})=>uv(a,"x"),y:(n,{transform:a})=>uv(a,"y")};np.translateX=np.x;np.translateY=np.y;const Zf=new Set;let cv=!1,hv=!1,fv=!1;function TT(){if(hv){const n=Array.from(Zf).filter(p=>p.needsMeasurement),a=new Set(n.map(p=>p.element)),f=new Map;a.forEach(p=>{const _=vD(p);_.length&&(f.set(p,_),p.render())}),n.forEach(p=>p.measureInitialState()),a.forEach(p=>{p.render();const _=f.get(p);_&&_.forEach(([S,y])=>{var u;(u=p.getValue(S))==null||u.set(y)})}),n.forEach(p=>p.measureEndState()),n.forEach(p=>{p.suspendedScrollY!==void 0&&window.scrollTo(0,p.suspendedScrollY)})}hv=!1,cv=!1,Zf.forEach(n=>n.complete(fv)),Zf.clear()}function MT(){Zf.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(hv=!0)})}function xD(){fv=!0,MT(),TT(),fv=!1}class cx{constructor(a,f,p,_,S,y=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...a],this.onComplete=f,this.name=p,this.motionValue=_,this.element=S,this.isAsync=y}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Zf.add(this),cv||(cv=!0,gi.read(MT),gi.resolveKeyframes(TT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:a,name:f,element:p,motionValue:_}=this;if(a[0]===null){const S=_==null?void 0:_.get(),y=a[a.length-1];if(S!==void 0)a[0]=S;else if(p&&f){const u=p.readValue(f,y);u!=null&&(a[0]=u)}a[0]===void 0&&(a[0]=y),_&&S===void 0&&_.set(a[0])}fD(a)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(a=!1){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,a),Zf.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Zf.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const bD=n=>n.startsWith("--");function wD(n,a,f){bD(a)?n.style.setProperty(a,f):n.style[a]=f}function hx(n){let a;return()=>(a===void 0&&(a=n()),a)}const SD=hx(()=>window.ScrollTimeline!==void 0),TD={};function MD(n,a){const f=hx(n);return()=>TD[a]??f()}const AT=MD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ym=([n,a,f,p])=>`cubic-bezier(${n}, ${a}, ${f}, ${p})`,pw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ym([0,.65,.55,1]),circOut:ym([.55,0,1,.45]),backIn:ym([.31,.01,.66,-.59]),backOut:ym([.33,1.53,.69,.99])};function CT(n,a){if(n)return typeof n=="function"?AT()?cT(n,a):"ease-out":bT(n)?ym(n):Array.isArray(n)?n.map(f=>CT(f,a)||pw.easeOut):pw[n]}function AD(n,a,f,{delay:p=0,duration:_=300,repeat:S=0,repeatType:y="loop",ease:u="easeOut",times:C}={},R=void 0){const O={[a]:f};C&&(O.offset=C);const B=CT(u,_);Array.isArray(B)&&(O.easing=B);const z={delay:p,duration:_,easing:Array.isArray(B)?"linear":B,fill:"both",iterations:S+1,direction:y==="reverse"?"alternate":"normal"};return R&&(z.pseudoElement=R),n.animate(O,z)}function ET(n){return typeof n=="function"&&"applyToOptions"in n}function CD({type:n,...a}){return ET(n)&&AT()?n.applyToOptions(a):(a.duration??(a.duration=300),a.ease??(a.ease="easeOut"),a)}class ED extends ux{constructor(a){if(super(),this.finishedTime=null,this.isStopped=!1,!a)return;const{element:f,name:p,keyframes:_,pseudoElement:S,allowFlatten:y=!1,finalKeyframe:u,onComplete:C}=a;this.isPseudoElement=!!S,this.allowFlatten=y,this.options=a,$v(typeof a.type!="string");const R=CD(a);this.animation=AD(f,p,_,R,S),R.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!S){const O=lx(_,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(O):wD(f,p,O),this.animation.cancel()}C==null||C(),this.notifyFinished()},this.animation.oncancel=()=>this.notifyFinished()}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var a,f;(f=(a=this.animation).finish)==null||f.call(a)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:a}=this;a==="idle"||a==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var a,f;this.isPseudoElement||(f=(a=this.animation).commitStyles)==null||f.call(a)}get duration(){var f,p;const a=((p=(f=this.animation.effect)==null?void 0:f.getComputedTiming)==null?void 0:p.call(f).duration)||0;return Mu(Number(a))}get time(){return Mu(Number(this.animation.currentTime)||0)}set time(a){this.finishedTime=null,this.animation.currentTime=Tu(a)}get speed(){return this.animation.playbackRate}set speed(a){a<0&&(this.finishedTime=null),this.animation.playbackRate=a}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(a){this.animation.startTime=a}attachTimeline({timeline:a,observe:f}){var p;return this.allowFlatten&&((p=this.animation.effect)==null||p.updateTiming({easing:"linear"})),this.animation.onfinish=null,a&&SD()?(this.animation.timeline=a,Ro):f(this)}}const PT={anticipate:_T,backInOut:yT,circInOut:xT};function PD(n){return n in PT}function RD(n){typeof n.ease=="string"&&PD(n.ease)&&(n.ease=PT[n.ease])}const mw=10;class ID extends ED{constructor(a){RD(a),wT(a),super(a),a.startTime&&(this.startTime=a.startTime),this.options=a}updateMotionValue(a){const{motionValue:f,onUpdate:p,onComplete:_,element:S,...y}=this.options;if(!f)return;if(a!==void 0){f.set(a);return}const u=new ST({...y,autoplay:!1}),C=Tu(this.finishedTime??this.time);f.setWithVelocity(u.sample(C-mw).value,u.sample(C).value,mw),u.stop()}}const gw=(n,a)=>a==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ch.test(n)||n==="0")&&!n.startsWith("url("));function DD(n){const a=n[0];if(n.length===1)return!0;for(let f=0;f<n.length;f++)if(n[f]!==a)return!0}function LD(n,a,f,p){const _=n[0];if(_===null)return!1;if(a==="display"||a==="visibility")return!0;const S=n[n.length-1],y=gw(_,a),u=gw(S,a);return!y||!u?!1:DD(n)||(f==="spring"||ET(f))&&p}const zD=new Set(["opacity","clipPath","filter","transform"]),kD=hx(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function OD(n){const{motionValue:a,name:f,repeatDelay:p,repeatType:_,damping:S,type:y}=n;if(!a||!a.owner||!(a.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:C}=a.owner.getProps();return kD()&&f&&zD.has(f)&&(f!=="transform"||!C)&&!u&&!p&&_!=="mirror"&&S!==0&&y!=="inertia"}const BD=40;class jD extends ux{constructor({autoplay:a=!0,delay:f=0,type:p="keyframes",repeat:_=0,repeatDelay:S=0,repeatType:y="loop",keyframes:u,name:C,motionValue:R,element:O,...B}){var G;super(),this.stop=()=>{var te,K;this._animation?(this._animation.stop(),(te=this.stopTimeline)==null||te.call(this)):(K=this.keyframeResolver)==null||K.cancel()},this.createdAt=Cs.now();const z={autoplay:a,delay:f,type:p,repeat:_,repeatDelay:S,repeatType:y,name:C,motionValue:R,element:O,...B},F=(O==null?void 0:O.KeyframeResolver)||cx;this.keyframeResolver=new F(u,(te,K,X)=>this.onKeyframesResolved(te,K,z,!X),C,R,O),(G=this.keyframeResolver)==null||G.scheduleResolve()}onKeyframesResolved(a,f,p,_){this.keyframeResolver=void 0;const{name:S,type:y,velocity:u,delay:C,isHandoff:R,onUpdate:O}=p;this.resolvedAt=Cs.now(),LD(a,S,y,u)||((vc.instantAnimations||!C)&&(O==null||O(lx(a,p,f))),a[0]=a[a.length-1],p.duration=0,p.repeat=0);const z={startTime:_?this.resolvedAt?this.resolvedAt-this.createdAt>BD?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:f,...p,keyframes:a},F=!R&&OD(z)?new ID({...z,element:z.motionValue.owner.current}):new ST(z);F.finished.then(()=>this.notifyFinished()).catch(Ro),this.pendingTimeline&&(this.stopTimeline=F.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=F}get finished(){return this._animation?this.animation.finished:this._finished}then(a,f){return this.finished.finally(a).then(()=>{})}get animation(){return this._animation||xD(),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(a){this.animation.time=a}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(a){this.animation.speed=a}get startTime(){return this.animation.startTime}attachTimeline(a){return this._animation?this.stopTimeline=this.animation.attachTimeline(a):this.pendingTimeline=a,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this.animation.cancel()}}const fx=(n,a,f,p={},_,S)=>y=>{const u=tx(p,n)||{},C=u.delay||p.delay||0;let{elapsed:R=0}=p;R=R-Tu(C);const O={keyframes:Array.isArray(f)?f:[null,f],ease:"easeOut",velocity:a.getVelocity(),...u,delay:-R,onUpdate:z=>{a.set(z),u.onUpdate&&u.onUpdate(z)},onComplete:()=>{y(),u.onComplete&&u.onComplete()},name:n,motionValue:a,element:S?void 0:_};vI(u)||Object.assign(O,_I(n,O)),O.duration&&(O.duration=Tu(O.duration)),O.repeatDelay&&(O.repeatDelay=Tu(O.repeatDelay)),O.from!==void 0&&(O.keyframes[0]=O.from);let B=!1;if((O.type===!1||O.duration===0&&!O.repeatDelay)&&(O.duration=0,O.delay===0&&(B=!0)),(vc.instantAnimations||vc.skipAnimations)&&(B=!0,O.duration=0,O.delay=0),O.allowFlatten=!u.type&&!u.ease,B&&!S&&a.get()!==void 0){const z=dI(O.keyframes,u);if(z!==void 0){gi.update(()=>{O.onUpdate(z),O.onComplete()});return}}return new jD(O)},RT=new Set(["width","height","top","left","right","bottom",...up]);function ND({protectedKeys:n,needsAnimating:a},f){const p=n.hasOwnProperty(f)&&a[f]!==!0;return a[f]=!1,p}function IT(n,a,{delay:f=0,transitionOverride:p,type:_}={}){let{transition:S=n.getDefaultTransition(),transitionEnd:y,...u}=a;p&&(S=p);const C=[],R=_&&n.animationState&&n.animationState.getState()[_];for(const O in u){const B=n.getValue(O,n.latestValues[O]??null),z=u[O];if(z===void 0||R&&ND(R,O))continue;const F={delay:f,...tx(S||{},O)},G=B.get();if(G!==void 0&&!B.isAnimating&&!Array.isArray(z)&&z===G&&!F.velocity)continue;let te=!1;if(window.MotionHandoffAnimation){const X=rT(n);if(X){const ye=window.MotionHandoffAnimation(X,O,gi);ye!==null&&(F.startTime=ye,te=!0)}}rv(n,O),B.start(fx(O,B,z,n.shouldReduceMotion&&RT.has(O)?{type:!1}:F,n,te));const K=B.animation;K&&C.push(K)}return y&&Promise.all(C).then(()=>{gi.update(()=>{y&&cI(n,y)})}),C}function dv(n,a,f={}){var C;const p=Rm(n,a,f.type==="exit"?(C=n.presenceContext)==null?void 0:C.custom:void 0);let{transition:_=n.getDefaultTransition()||{}}=p||{};f.transitionOverride&&(_=f.transitionOverride);const S=p?()=>Promise.all(IT(n,p,f)):()=>Promise.resolve(),y=n.variantChildren&&n.variantChildren.size?(R=0)=>{const{delayChildren:O=0,staggerChildren:B,staggerDirection:z}=_;return FD(n,a,O+R,B,z,f)}:()=>Promise.resolve(),{when:u}=_;if(u){const[R,O]=u==="beforeChildren"?[S,y]:[y,S];return R().then(()=>O())}else return Promise.all([S(),y(f.delay)])}function FD(n,a,f=0,p=0,_=1,S){const y=[],u=(n.variantChildren.size-1)*p,C=_===1?(R=0)=>R*p:(R=0)=>u-R*p;return Array.from(n.variantChildren).sort(UD).forEach((R,O)=>{R.notify("AnimationStart",a),y.push(dv(R,a,{...S,delay:f+C(O)}).then(()=>R.notify("AnimationComplete",a)))}),Promise.all(y)}function UD(n,a){return n.sortNodePosition(a)}function VD(n,a,f={}){n.notify("AnimationStart",a);let p;if(Array.isArray(a)){const _=a.map(S=>dv(n,S,f));p=Promise.all(_)}else if(typeof a=="string")p=dv(n,a,f);else{const _=typeof a=="function"?Rm(n,a,f.custom):a;p=Promise.all(IT(n,_,f))}return p.then(()=>{n.notify("AnimationComplete",a)})}function DT(n,a){if(!Array.isArray(a))return!1;const f=a.length;if(f!==n.length)return!1;for(let p=0;p<f;p++)if(a[p]!==n[p])return!1;return!0}const $D=Fv.length;function LT(n){if(!n)return;if(!n.isControllingVariants){const f=n.parent?LT(n.parent)||{}:{};return n.props.initial!==void 0&&(f.initial=n.props.initial),f}const a={};for(let f=0;f<$D;f++){const p=Fv[f],_=n.props[p];(Cm(_)||_===!1)&&(a[p]=_)}return a}const ZD=[...Nv].reverse(),qD=Nv.length;function GD(n){return a=>Promise.all(a.map(({animation:f,options:p})=>VD(n,f,p)))}function HD(n){let a=GD(n),f=yw(),p=!0;const _=C=>(R,O)=>{var z;const B=Rm(n,O,C==="exit"?(z=n.presenceContext)==null?void 0:z.custom:void 0);if(B){const{transition:F,transitionEnd:G,...te}=B;R={...R,...te,...G}}return R};function S(C){a=C(n)}function y(C){const{props:R}=n,O=LT(n.parent)||{},B=[],z=new Set;let F={},G=1/0;for(let K=0;K<qD;K++){const X=ZD[K],ye=f[X],pe=R[X]!==void 0?R[X]:O[X],xe=Cm(pe),Se=X===C?ye.isActive:null;Se===!1&&(G=K);let ke=pe===O[X]&&pe!==R[X]&&xe;if(ke&&p&&n.manuallyAnimateOnMount&&(ke=!1),ye.protectedKeys={...F},!ye.isActive&&Se===null||!pe&&!ye.prevProp||n0(pe)||typeof pe=="boolean")continue;const it=WD(ye.prevProp,pe);let Ke=it||X===C&&ye.isActive&&!ke&&xe||K>G&&xe,Ye=!1;const ht=Array.isArray(pe)?pe:[pe];let Lt=ht.reduce(_(X),{});Se===!1&&(Lt={});const{prevResolvedValues:sr={}}=ye,nr={...sr,...Lt},Xt=Nt=>{Ke=!0,z.has(Nt)&&(Ye=!0,z.delete(Nt)),ye.needsAnimating[Nt]=!0;const Rt=n.getValue(Nt);Rt&&(Rt.liveStyle=!1)};for(const Nt in nr){const Rt=Lt[Nt],fr=sr[Nt];if(F.hasOwnProperty(Nt))continue;let De=!1;tv(Rt)&&tv(fr)?De=!DT(Rt,fr):De=Rt!==fr,De?Rt!=null?Xt(Nt):z.add(Nt):Rt!==void 0&&z.has(Nt)?Xt(Nt):ye.protectedKeys[Nt]=!0}ye.prevProp=pe,ye.prevResolvedValues=Lt,ye.isActive&&(F={...F,...Lt}),p&&n.blockInitialAnimation&&(Ke=!1),Ke&&(!(ke&&it)||Ye)&&B.push(...ht.map(Nt=>({animation:Nt,options:{type:X}})))}if(z.size){const K={};if(typeof R.initial!="boolean"){const X=Rm(n,Array.isArray(R.initial)?R.initial[0]:R.initial);X&&X.transition&&(K.transition=X.transition)}z.forEach(X=>{const ye=n.getBaseTarget(X),pe=n.getValue(X);pe&&(pe.liveStyle=!0),K[X]=ye??null}),B.push({animation:K})}let te=!!B.length;return p&&(R.initial===!1||R.initial===R.animate)&&!n.manuallyAnimateOnMount&&(te=!1),p=!1,te?a(B):Promise.resolve()}function u(C,R){var B;if(f[C].isActive===R)return Promise.resolve();(B=n.variantChildren)==null||B.forEach(z=>{var F;return(F=z.animationState)==null?void 0:F.setActive(C,R)}),f[C].isActive=R;const O=y(C);for(const z in f)f[z].protectedKeys={};return O}return{animateChanges:y,setActive:u,setAnimateFunction:S,getState:()=>f,reset:()=>{f=yw(),p=!0}}}function WD(n,a){return typeof a=="string"?a!==n:Array.isArray(a)?!DT(a,n):!1}function kf(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function yw(){return{animate:kf(!0),whileInView:kf(),whileHover:kf(),whileTap:kf(),whileDrag:kf(),whileFocus:kf(),exit:kf()}}class Ph{constructor(a){this.isMounted=!1,this.node=a}update(){}}class KD extends Ph{constructor(a){super(a),a.animationState||(a.animationState=HD(a))}updateAnimationControlsSubscription(){const{animate:a}=this.node.getProps();n0(a)&&(this.unmountControls=a.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:a}=this.node.getProps(),{animate:f}=this.node.prevProps||{};a!==f&&this.updateAnimationControlsSubscription()}unmount(){var a;this.node.animationState.reset(),(a=this.unmountControls)==null||a.call(this)}}let YD=0;class XD extends Ph{constructor(){super(...arguments),this.id=YD++}update(){if(!this.node.presenceContext)return;const{isPresent:a,onExitComplete:f}=this.node.presenceContext,{isPresent:p}=this.node.prevPresenceContext||{};if(!this.node.animationState||a===p)return;const _=this.node.animationState.setActive("exit",!a);f&&!a&&_.then(()=>{f(this.id)})}mount(){const{register:a,onExitComplete:f}=this.node.presenceContext||{};f&&f(this.id),a&&(this.unmount=a(this.id))}unmount(){}}const QD={animation:{Feature:KD},exit:{Feature:XD}};function zm(n,a,f,p={passive:!0}){return n.addEventListener(a,f,p),()=>n.removeEventListener(a,f)}const dx=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Zm(n){return{point:{x:n.pageX,y:n.pageY}}}const JD=n=>a=>dx(a)&&n(a,Zm(a));function wm(n,a,f,p){return zm(n,a,JD(f),p)}function zT({top:n,left:a,right:f,bottom:p}){return{x:{min:a,max:f},y:{min:n,max:p}}}function e5({x:n,y:a}){return{top:a.min,right:n.max,bottom:a.max,left:n.min}}function t5(n,a){if(!a)return n;const f=a({x:n.left,y:n.top}),p=a({x:n.right,y:n.bottom});return{top:f.y,left:f.x,bottom:p.y,right:p.x}}const kT=1e-4,r5=1-kT,n5=1+kT,OT=.01,i5=0-OT,a5=0+OT;function us(n){return n.max-n.min}function s5(n,a,f){return Math.abs(n-a)<=f}function _w(n,a,f,p=.5){n.origin=p,n.originPoint=mi(a.min,a.max,n.origin),n.scale=us(f)/us(a),n.translate=mi(f.min,f.max,n.origin)-n.originPoint,(n.scale>=r5&&n.scale<=n5||isNaN(n.scale))&&(n.scale=1),(n.translate>=i5&&n.translate<=a5||isNaN(n.translate))&&(n.translate=0)}function Sm(n,a,f,p){_w(n.x,a.x,f.x,p?p.originX:void 0),_w(n.y,a.y,f.y,p?p.originY:void 0)}function vw(n,a,f){n.min=f.min+a.min,n.max=n.min+us(a)}function o5(n,a,f){vw(n.x,a.x,f.x),vw(n.y,a.y,f.y)}function xw(n,a,f){n.min=a.min-f.min,n.max=n.min+us(a)}function Tm(n,a,f){xw(n.x,a.x,f.x),xw(n.y,a.y,f.y)}const bw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Qd=()=>({x:bw(),y:bw()}),ww=()=>({min:0,max:0}),Oi=()=>({x:ww(),y:ww()});function Po(n){return[n("x"),n("y")]}function z0(n){return n===void 0||n===1}function pv({scale:n,scaleX:a,scaleY:f}){return!z0(n)||!z0(a)||!z0(f)}function Bf(n){return pv(n)||BT(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function BT(n){return Sw(n.x)||Sw(n.y)}function Sw(n){return n&&n!=="0%"}function N_(n,a,f){const p=n-f,_=a*p;return f+_}function Tw(n,a,f,p,_){return _!==void 0&&(n=N_(n,_,p)),N_(n,f,p)+a}function mv(n,a=0,f=1,p,_){n.min=Tw(n.min,a,f,p,_),n.max=Tw(n.max,a,f,p,_)}function jT(n,{x:a,y:f}){mv(n.x,a.translate,a.scale,a.originPoint),mv(n.y,f.translate,f.scale,f.originPoint)}const Mw=.999999999999,Aw=1.0000000000001;function l5(n,a,f,p=!1){const _=f.length;if(!_)return;a.x=a.y=1;let S,y;for(let u=0;u<_;u++){S=f[u],y=S.projectionDelta;const{visualElement:C}=S.options;C&&C.props.style&&C.props.style.display==="contents"||(p&&S.options.layoutScroll&&S.scroll&&S!==S.root&&ep(n,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),y&&(a.x*=y.x.scale,a.y*=y.y.scale,jT(n,y)),p&&Bf(S.latestValues)&&ep(n,S.latestValues))}a.x<Aw&&a.x>Mw&&(a.x=1),a.y<Aw&&a.y>Mw&&(a.y=1)}function Jd(n,a){n.min=n.min+a,n.max=n.max+a}function Cw(n,a,f,p,_=.5){const S=mi(n.min,n.max,_);mv(n,a,f,S,p)}function ep(n,a){Cw(n.x,a.x,a.scaleX,a.scale,a.originX),Cw(n.y,a.y,a.scaleY,a.scale,a.originY)}function NT(n,a){return zT(t5(n.getBoundingClientRect(),a))}function u5(n,a,f){const p=NT(n,f),{scroll:_}=a;return _&&(Jd(p.x,_.offset.x),Jd(p.y,_.offset.y)),p}const FT=({current:n})=>n?n.ownerDocument.defaultView:null,Ew=(n,a)=>Math.abs(n-a);function c5(n,a){const f=Ew(n.x,a.x),p=Ew(n.y,a.y);return Math.sqrt(f**2+p**2)}class UT{constructor(a,f,{transformPagePoint:p,contextWindow:_,dragSnapToOrigin:S=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=O0(this.lastMoveEventInfo,this.history),z=this.startEvent!==null,F=c5(B.offset,{x:0,y:0})>=3;if(!z&&!F)return;const{point:G}=B,{timestamp:te}=xa;this.history.push({...G,timestamp:te});const{onStart:K,onMove:X}=this.handlers;z||(K&&K(this.lastMoveEvent,B),this.startEvent=this.lastMoveEvent),X&&X(this.lastMoveEvent,B)},this.handlePointerMove=(B,z)=>{this.lastMoveEvent=B,this.lastMoveEventInfo=k0(z,this.transformPagePoint),gi.update(this.updatePoint,!0)},this.handlePointerUp=(B,z)=>{this.end();const{onEnd:F,onSessionEnd:G,resumeAnimation:te}=this.handlers;if(this.dragSnapToOrigin&&te&&te(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const K=O0(B.type==="pointercancel"?this.lastMoveEventInfo:k0(z,this.transformPagePoint),this.history);this.startEvent&&F&&F(B,K),G&&G(B,K)},!dx(a))return;this.dragSnapToOrigin=S,this.handlers=f,this.transformPagePoint=p,this.contextWindow=_||window;const y=Zm(a),u=k0(y,this.transformPagePoint),{point:C}=u,{timestamp:R}=xa;this.history=[{...C,timestamp:R}];const{onSessionStart:O}=f;O&&O(a,O0(u,this.history)),this.removeListeners=Vm(wm(this.contextWindow,"pointermove",this.handlePointerMove),wm(this.contextWindow,"pointerup",this.handlePointerUp),wm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(a){this.handlers=a}end(){this.removeListeners&&this.removeListeners(),Ah(this.updatePoint)}}function k0(n,a){return a?{point:a(n.point)}:n}function Pw(n,a){return{x:n.x-a.x,y:n.y-a.y}}function O0({point:n},a){return{point:n,delta:Pw(n,VT(a)),offset:Pw(n,h5(a)),velocity:f5(a,.1)}}function h5(n){return n[0]}function VT(n){return n[n.length-1]}function f5(n,a){if(n.length<2)return{x:0,y:0};let f=n.length-1,p=null;const _=VT(n);for(;f>=0&&(p=n[f],!(_.timestamp-p.timestamp>Tu(a)));)f--;if(!p)return{x:0,y:0};const S=Mu(_.timestamp-p.timestamp);if(S===0)return{x:0,y:0};const y={x:(_.x-p.x)/S,y:(_.y-p.y)/S};return y.x===1/0&&(y.x=0),y.y===1/0&&(y.y=0),y}function d5(n,{min:a,max:f},p){return a!==void 0&&n<a?n=p?mi(a,n,p.min):Math.max(n,a):f!==void 0&&n>f&&(n=p?mi(f,n,p.max):Math.min(n,f)),n}function Rw(n,a,f){return{min:a!==void 0?n.min+a:void 0,max:f!==void 0?n.max+f-(n.max-n.min):void 0}}function p5(n,{top:a,left:f,bottom:p,right:_}){return{x:Rw(n.x,f,_),y:Rw(n.y,a,p)}}function Iw(n,a){let f=a.min-n.min,p=a.max-n.max;return a.max-a.min<n.max-n.min&&([f,p]=[p,f]),{min:f,max:p}}function m5(n,a){return{x:Iw(n.x,a.x),y:Iw(n.y,a.y)}}function g5(n,a){let f=.5;const p=us(n),_=us(a);return _>p?f=Lm(a.min,a.max-p,n.min):p>_&&(f=Lm(n.min,n.max-_,a.min)),xc(0,1,f)}function y5(n,a){const f={};return a.min!==void 0&&(f.min=a.min-n.min),a.max!==void 0&&(f.max=a.max-n.min),f}const gv=.35;function _5(n=gv){return n===!1?n=0:n===!0&&(n=gv),{x:Dw(n,"left","right"),y:Dw(n,"top","bottom")}}function Dw(n,a,f){return{min:Lw(n,a),max:Lw(n,f)}}function Lw(n,a){return typeof n=="number"?n:n[a]||0}const wl={x:!1,y:!1};function $T(){return wl.x||wl.y}function v5(n){return n==="x"||n==="y"?wl[n]?null:(wl[n]=!0,()=>{wl[n]=!1}):wl.x||wl.y?null:(wl.x=wl.y=!0,()=>{wl.x=wl.y=!1})}const x5=new WeakMap;class b5{constructor(a){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Oi(),this.visualElement=a}start(a,{snapToCursor:f=!1}={}){const{presenceContext:p}=this.visualElement;if(p&&p.isPresent===!1)return;const _=O=>{const{dragSnapToOrigin:B}=this.getProps();B?this.pauseAnimation():this.stopAnimation(),f&&this.snapToCursor(Zm(O).point)},S=(O,B)=>{const{drag:z,dragPropagation:F,onDragStart:G}=this.getProps();if(z&&!F&&(this.openDragLock&&this.openDragLock(),this.openDragLock=v5(z),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Po(K=>{let X=this.getAxisMotionValue(K).get()||0;if(Su.test(X)){const{projection:ye}=this.visualElement;if(ye&&ye.layout){const pe=ye.layout.layoutBox[K];pe&&(X=us(pe)*(parseFloat(X)/100))}}this.originPoint[K]=X}),G&&gi.postRender(()=>G(O,B)),rv(this.visualElement,"transform");const{animationState:te}=this.visualElement;te&&te.setActive("whileDrag",!0)},y=(O,B)=>{const{dragPropagation:z,dragDirectionLock:F,onDirectionLock:G,onDrag:te}=this.getProps();if(!z&&!this.openDragLock)return;const{offset:K}=B;if(F&&this.currentDirection===null){this.currentDirection=w5(K),this.currentDirection!==null&&G&&G(this.currentDirection);return}this.updateAxis("x",B.point,K),this.updateAxis("y",B.point,K),this.visualElement.render(),te&&te(O,B)},u=(O,B)=>this.stop(O,B),C=()=>Po(O=>{var B;return this.getAnimationState(O)==="paused"&&((B=this.getAxisMotionValue(O).animation)==null?void 0:B.play())}),{dragSnapToOrigin:R}=this.getProps();this.panSession=new UT(a,{onSessionStart:_,onStart:S,onMove:y,onSessionEnd:u,resumeAnimation:C},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:R,contextWindow:FT(this.visualElement)})}stop(a,f){const p=this.isDragging;if(this.cancel(),!p)return;const{velocity:_}=f;this.startAnimation(_);const{onDragEnd:S}=this.getProps();S&&gi.postRender(()=>S(a,f))}cancel(){this.isDragging=!1;const{projection:a,animationState:f}=this.visualElement;a&&(a.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:p}=this.getProps();!p&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),f&&f.setActive("whileDrag",!1)}updateAxis(a,f,p){const{drag:_}=this.getProps();if(!p||!y_(a,_,this.currentDirection))return;const S=this.getAxisMotionValue(a);let y=this.originPoint[a]+p[a];this.constraints&&this.constraints[a]&&(y=d5(y,this.constraints[a],this.elastic[a])),S.set(y)}resolveConstraints(){var S;const{dragConstraints:a,dragElastic:f}=this.getProps(),p=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(S=this.visualElement.projection)==null?void 0:S.layout,_=this.constraints;a&&Yd(a)?this.constraints||(this.constraints=this.resolveRefConstraints()):a&&p?this.constraints=p5(p.layoutBox,a):this.constraints=!1,this.elastic=_5(f),_!==this.constraints&&p&&this.constraints&&!this.hasMutatedConstraints&&Po(y=>{this.constraints!==!1&&this.getAxisMotionValue(y)&&(this.constraints[y]=y5(p.layoutBox[y],this.constraints[y]))})}resolveRefConstraints(){const{dragConstraints:a,onMeasureDragConstraints:f}=this.getProps();if(!a||!Yd(a))return!1;const p=a.current,{projection:_}=this.visualElement;if(!_||!_.layout)return!1;const S=u5(p,_.root,this.visualElement.getTransformPagePoint());let y=m5(_.layout.layoutBox,S);if(f){const u=f(e5(y));this.hasMutatedConstraints=!!u,u&&(y=zT(u))}return y}startAnimation(a){const{drag:f,dragMomentum:p,dragElastic:_,dragTransition:S,dragSnapToOrigin:y,onDragTransitionEnd:u}=this.getProps(),C=this.constraints||{},R=Po(O=>{if(!y_(O,f,this.currentDirection))return;let B=C&&C[O]||{};y&&(B={min:0,max:0});const z=_?200:1e6,F=_?40:1e7,G={type:"inertia",velocity:p?a[O]:0,bounceStiffness:z,bounceDamping:F,timeConstant:750,restDelta:1,restSpeed:10,...S,...B};return this.startAxisValueAnimation(O,G)});return Promise.all(R).then(u)}startAxisValueAnimation(a,f){const p=this.getAxisMotionValue(a);return rv(this.visualElement,a),p.start(fx(a,p,0,f,this.visualElement,!1))}stopAnimation(){Po(a=>this.getAxisMotionValue(a).stop())}pauseAnimation(){Po(a=>{var f;return(f=this.getAxisMotionValue(a).animation)==null?void 0:f.pause()})}getAnimationState(a){var f;return(f=this.getAxisMotionValue(a).animation)==null?void 0:f.state}getAxisMotionValue(a){const f=`_drag${a.toUpperCase()}`,p=this.visualElement.getProps(),_=p[f];return _||this.visualElement.getValue(a,(p.initial?p.initial[a]:void 0)||0)}snapToCursor(a){Po(f=>{const{drag:p}=this.getProps();if(!y_(f,p,this.currentDirection))return;const{projection:_}=this.visualElement,S=this.getAxisMotionValue(f);if(_&&_.layout){const{min:y,max:u}=_.layout.layoutBox[f];S.set(a[f]-mi(y,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:a,dragConstraints:f}=this.getProps(),{projection:p}=this.visualElement;if(!Yd(f)||!p||!this.constraints)return;this.stopAnimation();const _={x:0,y:0};Po(y=>{const u=this.getAxisMotionValue(y);if(u&&this.constraints!==!1){const C=u.get();_[y]=g5({min:C,max:C},this.constraints[y])}});const{transformTemplate:S}=this.visualElement.getProps();this.visualElement.current.style.transform=S?S({},""):"none",p.root&&p.root.updateScroll(),p.updateLayout(),this.resolveConstraints(),Po(y=>{if(!y_(y,a,null))return;const u=this.getAxisMotionValue(y),{min:C,max:R}=this.constraints[y];u.set(mi(C,R,_[y]))})}addListeners(){if(!this.visualElement.current)return;x5.set(this.visualElement,this);const a=this.visualElement.current,f=wm(a,"pointerdown",C=>{const{drag:R,dragListener:O=!0}=this.getProps();R&&O&&this.start(C)}),p=()=>{const{dragConstraints:C}=this.getProps();Yd(C)&&C.current&&(this.constraints=this.resolveRefConstraints())},{projection:_}=this.visualElement,S=_.addEventListener("measure",p);_&&!_.layout&&(_.root&&_.root.updateScroll(),_.updateLayout()),gi.read(p);const y=zm(window,"resize",()=>this.scalePositionWithinConstraints()),u=_.addEventListener("didUpdate",({delta:C,hasLayoutChanged:R})=>{this.isDragging&&R&&(Po(O=>{const B=this.getAxisMotionValue(O);B&&(this.originPoint[O]+=C[O].translate,B.set(B.get()+C[O].translate))}),this.visualElement.render())});return()=>{y(),f(),S(),u&&u()}}getProps(){const a=this.visualElement.getProps(),{drag:f=!1,dragDirectionLock:p=!1,dragPropagation:_=!1,dragConstraints:S=!1,dragElastic:y=gv,dragMomentum:u=!0}=a;return{...a,drag:f,dragDirectionLock:p,dragPropagation:_,dragConstraints:S,dragElastic:y,dragMomentum:u}}}function y_(n,a,f){return(a===!0||a===n)&&(f===null||f===n)}function w5(n,a=10){let f=null;return Math.abs(n.y)>a?f="y":Math.abs(n.x)>a&&(f="x"),f}class S5 extends Ph{constructor(a){super(a),this.removeGroupControls=Ro,this.removeListeners=Ro,this.controls=new b5(a)}mount(){const{dragControls:a}=this.node.getProps();a&&(this.removeGroupControls=a.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ro}unmount(){this.removeGroupControls(),this.removeListeners()}}const zw=n=>(a,f)=>{n&&gi.postRender(()=>n(a,f))};class T5 extends Ph{constructor(){super(...arguments),this.removePointerDownListener=Ro}onPointerDown(a){this.session=new UT(a,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:FT(this.node)})}createPanHandlers(){const{onPanSessionStart:a,onPanStart:f,onPan:p,onPanEnd:_}=this.node.getProps();return{onSessionStart:zw(a),onStart:zw(f),onMove:p,onEnd:(S,y)=>{delete this.session,_&&gi.postRender(()=>_(S,y))}}}mount(){this.removePointerDownListener=wm(this.node.current,"pointerdown",a=>this.onPointerDown(a))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const P_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kw(n,a){return a.max===a.min?0:n/(a.max-a.min)*100}const pm={correct:(n,a)=>{if(!a.target)return n;if(typeof n=="string")if(yr.test(n))n=parseFloat(n);else return n;const f=kw(n,a.target.x),p=kw(n,a.target.y);return`${f}% ${p}%`}},M5={correct:(n,{treeScale:a,projectionDelta:f})=>{const p=n,_=Ch.parse(n);if(_.length>5)return p;const S=Ch.createTransformer(n),y=typeof _[0]!="number"?1:0,u=f.x.scale*a.x,C=f.y.scale*a.y;_[0+y]/=u,_[1+y]/=C;const R=mi(u,C,.5);return typeof _[2+y]=="number"&&(_[2+y]/=R),typeof _[3+y]=="number"&&(_[3+y]/=R),S(_)}};class A5 extends oe.Component{componentDidMount(){const{visualElement:a,layoutGroup:f,switchLayoutGroup:p,layoutId:_}=this.props,{projection:S}=a;j3(C5),S&&(f.group&&f.group.add(S),p&&p.register&&_&&p.register(S),S.root.didUpdate(),S.addEventListener("animationComplete",()=>{this.safeToRemove()}),S.setOptions({...S.options,onExitComplete:()=>this.safeToRemove()})),P_.hasEverUpdated=!0}getSnapshotBeforeUpdate(a){const{layoutDependency:f,visualElement:p,drag:_,isPresent:S}=this.props,y=p.projection;return y&&(y.isPresent=S,_||a.layoutDependency!==f||f===void 0||a.isPresent!==S?y.willUpdate():this.safeToRemove(),a.isPresent!==S&&(S?y.promote():y.relegate()||gi.postRender(()=>{const u=y.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:a}=this.props.visualElement;a&&(a.root.didUpdate(),Vv.postRender(()=>{!a.currentAnimation&&a.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:a,layoutGroup:f,switchLayoutGroup:p}=this.props,{projection:_}=a;_&&(_.scheduleCheckAfterUnmount(),f&&f.group&&f.group.remove(_),p&&p.deregister&&p.deregister(_))}safeToRemove(){const{safeToRemove:a}=this.props;a&&a()}render(){return null}}function ZT(n){const[a,f]=BS(),p=oe.useContext(kv);return J.jsx(A5,{...n,layoutGroup:p,switchLayoutGroup:oe.useContext(ZS),isPresent:a,safeToRemove:f})}const C5={borderRadius:{...pm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:pm,borderTopRightRadius:pm,borderBottomLeftRadius:pm,borderBottomRightRadius:pm,boxShadow:M5};function E5(n,a,f){const p=Ua(n)?n:Im(n);return p.start(fx("",p,a,f)),p.animation}function P5(n){return n instanceof SVGElement&&n.tagName!=="svg"}const R5=(n,a)=>n.depth-a.depth;class I5{constructor(){this.children=[],this.isDirty=!1}add(a){Qv(this.children,a),this.isDirty=!0}remove(a){Jv(this.children,a),this.isDirty=!0}forEach(a){this.isDirty&&this.children.sort(R5),this.isDirty=!1,this.children.forEach(a)}}function D5(n,a){const f=Cs.now(),p=({timestamp:_})=>{const S=_-f;S>=a&&(Ah(p),n(S-a))};return gi.setup(p,!0),()=>Ah(p)}const qT=["TopLeft","TopRight","BottomLeft","BottomRight"],L5=qT.length,Ow=n=>typeof n=="string"?parseFloat(n):n,Bw=n=>typeof n=="number"||yr.test(n);function z5(n,a,f,p,_,S){_?(n.opacity=mi(0,f.opacity??1,k5(p)),n.opacityExit=mi(a.opacity??1,0,O5(p))):S&&(n.opacity=mi(a.opacity??1,f.opacity??1,p));for(let y=0;y<L5;y++){const u=`border${qT[y]}Radius`;let C=jw(a,u),R=jw(f,u);if(C===void 0&&R===void 0)continue;C||(C=0),R||(R=0),C===0||R===0||Bw(C)===Bw(R)?(n[u]=Math.max(mi(Ow(C),Ow(R),p),0),(Su.test(R)||Su.test(C))&&(n[u]+="%")):n[u]=R}(a.rotate||f.rotate)&&(n.rotate=mi(a.rotate||0,f.rotate||0,p))}function jw(n,a){return n[a]!==void 0?n[a]:n.borderRadius}const k5=GT(0,.5,vT),O5=GT(.5,.95,Ro);function GT(n,a,f){return p=>p<n?0:p>a?1:f(Lm(n,a,p))}function Nw(n,a){n.min=a.min,n.max=a.max}function Eo(n,a){Nw(n.x,a.x),Nw(n.y,a.y)}function Fw(n,a){n.translate=a.translate,n.scale=a.scale,n.originPoint=a.originPoint,n.origin=a.origin}function Uw(n,a,f,p,_){return n-=a,n=N_(n,1/f,p),_!==void 0&&(n=N_(n,1/_,p)),n}function B5(n,a=0,f=1,p=.5,_,S=n,y=n){if(Su.test(a)&&(a=parseFloat(a),a=mi(y.min,y.max,a/100)-y.min),typeof a!="number")return;let u=mi(S.min,S.max,p);n===S&&(u-=a),n.min=Uw(n.min,a,f,u,_),n.max=Uw(n.max,a,f,u,_)}function Vw(n,a,[f,p,_],S,y){B5(n,a[f],a[p],a[_],a.scale,S,y)}const j5=["x","scaleX","originX"],N5=["y","scaleY","originY"];function $w(n,a,f,p){Vw(n.x,a,j5,f?f.x:void 0,p?p.x:void 0),Vw(n.y,a,N5,f?f.y:void 0,p?p.y:void 0)}function Zw(n){return n.translate===0&&n.scale===1}function HT(n){return Zw(n.x)&&Zw(n.y)}function qw(n,a){return n.min===a.min&&n.max===a.max}function F5(n,a){return qw(n.x,a.x)&&qw(n.y,a.y)}function Gw(n,a){return Math.round(n.min)===Math.round(a.min)&&Math.round(n.max)===Math.round(a.max)}function WT(n,a){return Gw(n.x,a.x)&&Gw(n.y,a.y)}function Hw(n){return us(n.x)/us(n.y)}function Ww(n,a){return n.translate===a.translate&&n.scale===a.scale&&n.originPoint===a.originPoint}class U5{constructor(){this.members=[]}add(a){Qv(this.members,a),a.scheduleRender()}remove(a){if(Jv(this.members,a),a===this.prevLead&&(this.prevLead=void 0),a===this.lead){const f=this.members[this.members.length-1];f&&this.promote(f)}}relegate(a){const f=this.members.findIndex(_=>a===_);if(f===0)return!1;let p;for(let _=f;_>=0;_--){const S=this.members[_];if(S.isPresent!==!1){p=S;break}}return p?(this.promote(p),!0):!1}promote(a,f){const p=this.lead;if(a!==p&&(this.prevLead=p,this.lead=a,a.show(),p)){p.instance&&p.scheduleRender(),a.scheduleRender(),a.resumeFrom=p,f&&(a.resumeFrom.preserveOpacity=!0),p.snapshot&&(a.snapshot=p.snapshot,a.snapshot.latestValues=p.animationValues||p.latestValues),a.root&&a.root.isUpdating&&(a.isLayoutDirty=!0);const{crossfade:_}=a.options;_===!1&&p.hide()}}exitAnimationComplete(){this.members.forEach(a=>{const{options:f,resumingFrom:p}=a;f.onExitComplete&&f.onExitComplete(),p&&p.options.onExitComplete&&p.options.onExitComplete()})}scheduleRender(){this.members.forEach(a=>{a.instance&&a.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function V5(n,a,f){let p="";const _=n.x.translate/a.x,S=n.y.translate/a.y,y=(f==null?void 0:f.z)||0;if((_||S||y)&&(p=`translate3d(${_}px, ${S}px, ${y}px) `),(a.x!==1||a.y!==1)&&(p+=`scale(${1/a.x}, ${1/a.y}) `),f){const{transformPerspective:R,rotate:O,rotateX:B,rotateY:z,skewX:F,skewY:G}=f;R&&(p=`perspective(${R}px) ${p}`),O&&(p+=`rotate(${O}deg) `),B&&(p+=`rotateX(${B}deg) `),z&&(p+=`rotateY(${z}deg) `),F&&(p+=`skewX(${F}deg) `),G&&(p+=`skewY(${G}deg) `)}const u=n.x.scale*a.x,C=n.y.scale*a.y;return(u!==1||C!==1)&&(p+=`scale(${u}, ${C})`),p||"none"}const B0=["","X","Y","Z"],$5={visibility:"hidden"},Kw=1e3;let Z5=0;function j0(n,a,f,p){const{latestValues:_}=a;_[n]&&(f[n]=_[n],a.setStaticValue(n,0),p&&(p[n]=0))}function KT(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:a}=n.options;if(!a)return;const f=rT(a);if(window.MotionHasOptimisedAnimation(f,"transform")){const{layout:_,layoutId:S}=n.options;window.MotionCancelOptimisedAnimation(f,"transform",gi,!(_||S))}const{parent:p}=n;p&&!p.hasCheckedOptimisedAppear&&KT(p)}function YT({attachResizeListener:n,defaultParent:a,measureScroll:f,checkIsScrollRoot:p,resetTransform:_}){return class{constructor(y={},u=a==null?void 0:a()){this.id=Z5++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(H5),this.nodes.forEach(Q5),this.nodes.forEach(J5),this.nodes.forEach(W5)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=y,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let C=0;C<this.path.length;C++)this.path[C].shouldResetTransform=!0;this.root===this&&(this.nodes=new I5)}addEventListener(y,u){return this.eventHandlers.has(y)||this.eventHandlers.set(y,new ex),this.eventHandlers.get(y).add(u)}notifyListeners(y,...u){const C=this.eventHandlers.get(y);C&&C.notify(...u)}hasListeners(y){return this.eventHandlers.has(y)}mount(y,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=P5(y),this.instance=y;const{layoutId:C,layout:R,visualElement:O}=this.options;if(O&&!O.current&&O.mount(y),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(R||C)&&(this.isLayoutDirty=!0),n){let B;const z=()=>this.root.updateBlockedByResize=!1;n(y,()=>{this.root.updateBlockedByResize=!0,B&&B(),B=D5(z,250),P_.hasAnimatedSinceResize&&(P_.hasAnimatedSinceResize=!1,this.nodes.forEach(Xw))})}C&&this.root.registerSharedNode(C,this),this.options.animate!==!1&&O&&(C||R)&&this.addEventListener("didUpdate",({delta:B,hasLayoutChanged:z,hasRelativeLayoutChanged:F,layout:G})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const te=this.options.transition||O.getDefaultTransition()||i4,{onLayoutAnimationStart:K,onLayoutAnimationComplete:X}=O.getProps(),ye=!this.targetLayout||!WT(this.targetLayout,G),pe=!z&&F;if(this.options.layoutRoot||this.resumeFrom||pe||z&&(ye||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(B,pe);const xe={...tx(te,"layout"),onPlay:K,onComplete:X};(O.shouldReduceMotion||this.options.layoutRoot)&&(xe.delay=0,xe.type=!1),this.startAnimation(xe)}else z||Xw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=G})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const y=this.getStack();y&&y.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ah(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(e4),this.animationId++)}getTransformTemplate(){const{visualElement:y}=this.options;return y&&y.getProps().transformTemplate}willUpdate(y=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&KT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let O=0;O<this.path.length;O++){const B=this.path[O];B.shouldResetTransform=!0,B.updateScroll("snapshot"),B.options.layoutRoot&&B.willUpdate(!1)}const{layoutId:u,layout:C}=this.options;if(u===void 0&&!C)return;const R=this.getTransformTemplate();this.prevTransformTemplateValue=R?R(this.latestValues,""):void 0,this.updateSnapshot(),y&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Yw);return}this.isUpdating||this.nodes.forEach(Y5),this.isUpdating=!1,this.nodes.forEach(X5),this.nodes.forEach(q5),this.nodes.forEach(G5),this.clearAllSnapshots();const u=Cs.now();xa.delta=xc(0,1e3/60,u-xa.timestamp),xa.timestamp=u,xa.isProcessing=!0,R0.update.process(xa),R0.preRender.process(xa),R0.render.process(xa),xa.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Vv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(K5),this.sharedNodes.forEach(t4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,gi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){gi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!us(this.snapshot.measuredBox.x)&&!us(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let C=0;C<this.path.length;C++)this.path[C].updateScroll();const y=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Oi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,y?y.layoutBox:void 0)}updateScroll(y="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===y&&(u=!1),u){const C=p(this.instance);this.scroll={animationId:this.root.animationId,phase:y,isRoot:C,offset:f(this.instance),wasRoot:this.scroll?this.scroll.isRoot:C}}}resetTransform(){if(!_)return;const y=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!HT(this.projectionDelta),C=this.getTransformTemplate(),R=C?C(this.latestValues,""):void 0,O=R!==this.prevTransformTemplateValue;y&&(u||Bf(this.latestValues)||O)&&(_(this.instance,R),this.shouldResetTransform=!1,this.scheduleRender())}measure(y=!0){const u=this.measurePageBox();let C=this.removeElementScroll(u);return y&&(C=this.removeTransform(C)),a4(C),{animationId:this.root.animationId,measuredBox:u,layoutBox:C,latestValues:{},source:this.id}}measurePageBox(){var R;const{visualElement:y}=this.options;if(!y)return Oi();const u=y.measureViewportBox();if(!(((R=this.scroll)==null?void 0:R.wasRoot)||this.path.some(s4))){const{scroll:O}=this.root;O&&(Jd(u.x,O.offset.x),Jd(u.y,O.offset.y))}return u}removeElementScroll(y){var C;const u=Oi();if(Eo(u,y),(C=this.scroll)!=null&&C.wasRoot)return u;for(let R=0;R<this.path.length;R++){const O=this.path[R],{scroll:B,options:z}=O;O!==this.root&&B&&z.layoutScroll&&(B.wasRoot&&Eo(u,y),Jd(u.x,B.offset.x),Jd(u.y,B.offset.y))}return u}applyTransform(y,u=!1){const C=Oi();Eo(C,y);for(let R=0;R<this.path.length;R++){const O=this.path[R];!u&&O.options.layoutScroll&&O.scroll&&O!==O.root&&ep(C,{x:-O.scroll.offset.x,y:-O.scroll.offset.y}),Bf(O.latestValues)&&ep(C,O.latestValues)}return Bf(this.latestValues)&&ep(C,this.latestValues),C}removeTransform(y){const u=Oi();Eo(u,y);for(let C=0;C<this.path.length;C++){const R=this.path[C];if(!R.instance||!Bf(R.latestValues))continue;pv(R.latestValues)&&R.updateSnapshot();const O=Oi(),B=R.measurePageBox();Eo(O,B),$w(u,R.latestValues,R.snapshot?R.snapshot.layoutBox:void 0,O)}return Bf(this.latestValues)&&$w(u,this.latestValues),u}setTargetDelta(y){this.targetDelta=y,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(y){this.options={...this.options,...y,crossfade:y.crossfade!==void 0?y.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xa.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(y=!1){var z;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const C=!!this.resumingFrom||this!==u;if(!(y||C&&this.isSharedProjectionDirty||this.isProjectionDirty||(z=this.parent)!=null&&z.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:O,layoutId:B}=this.options;if(!(!this.layout||!(O||B))){if(this.resolvedRelativeTargetAt=xa.timestamp,!this.targetDelta&&!this.relativeTarget){const F=this.getClosestProjectingParent();F&&F.layout&&this.animationProgress!==1?(this.relativeParent=F,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Oi(),this.relativeTargetOrigin=Oi(),Tm(this.relativeTargetOrigin,this.layout.layoutBox,F.layout.layoutBox),Eo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Oi(),this.targetWithTransforms=Oi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o5(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Eo(this.target,this.layout.layoutBox),jT(this.target,this.targetDelta)):Eo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const F=this.getClosestProjectingParent();F&&!!F.resumingFrom==!!this.resumingFrom&&!F.options.layoutScroll&&F.target&&this.animationProgress!==1?(this.relativeParent=F,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Oi(),this.relativeTargetOrigin=Oi(),Tm(this.relativeTargetOrigin,this.target,F.target),Eo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||pv(this.parent.latestValues)||BT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var G;const y=this.getLead(),u=!!this.resumingFrom||this!==y;let C=!0;if((this.isProjectionDirty||(G=this.parent)!=null&&G.isProjectionDirty)&&(C=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(C=!1),this.resolvedRelativeTargetAt===xa.timestamp&&(C=!1),C)return;const{layout:R,layoutId:O}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(R||O))return;Eo(this.layoutCorrected,this.layout.layoutBox);const B=this.treeScale.x,z=this.treeScale.y;l5(this.layoutCorrected,this.treeScale,this.path,u),y.layout&&!y.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(y.target=y.layout.layoutBox,y.targetWithTransforms=Oi());const{target:F}=y;if(!F){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Fw(this.prevProjectionDelta.x,this.projectionDelta.x),Fw(this.prevProjectionDelta.y,this.projectionDelta.y)),Sm(this.projectionDelta,this.layoutCorrected,F,this.latestValues),(this.treeScale.x!==B||this.treeScale.y!==z||!Ww(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ww(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",F))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(y=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),y){const C=this.getStack();C&&C.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Qd(),this.projectionDelta=Qd(),this.projectionDeltaWithTransform=Qd()}setAnimationOrigin(y,u=!1){const C=this.snapshot,R=C?C.latestValues:{},O={...this.latestValues},B=Qd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const z=Oi(),F=C?C.source:void 0,G=this.layout?this.layout.source:void 0,te=F!==G,K=this.getStack(),X=!K||K.members.length<=1,ye=!!(te&&!X&&this.options.crossfade===!0&&!this.path.some(n4));this.animationProgress=0;let pe;this.mixTargetDelta=xe=>{const Se=xe/1e3;Qw(B.x,y.x,Se),Qw(B.y,y.y,Se),this.setTargetDelta(B),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Tm(z,this.layout.layoutBox,this.relativeParent.layout.layoutBox),r4(this.relativeTarget,this.relativeTargetOrigin,z,Se),pe&&F5(this.relativeTarget,pe)&&(this.isProjectionDirty=!1),pe||(pe=Oi()),Eo(pe,this.relativeTarget)),te&&(this.animationValues=O,z5(O,R,this.latestValues,Se,ye,X)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Se},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(y){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ah(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=gi.update(()=>{P_.hasAnimatedSinceResize=!0,this.currentAnimation=E5(0,Kw,{...y,onUpdate:u=>{this.mixTargetDelta(u),y.onUpdate&&y.onUpdate(u)},onStop:()=>{},onComplete:()=>{y.onComplete&&y.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const y=this.getStack();y&&y.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Kw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const y=this.getLead();let{targetWithTransforms:u,target:C,layout:R,latestValues:O}=y;if(!(!u||!C||!R)){if(this!==y&&this.layout&&R&&XT(this.options.animationType,this.layout.layoutBox,R.layoutBox)){C=this.target||Oi();const B=us(this.layout.layoutBox.x);C.x.min=y.target.x.min,C.x.max=C.x.min+B;const z=us(this.layout.layoutBox.y);C.y.min=y.target.y.min,C.y.max=C.y.min+z}Eo(u,C),ep(u,O),Sm(this.projectionDeltaWithTransform,this.layoutCorrected,u,O)}}registerSharedNode(y,u){this.sharedNodes.has(y)||this.sharedNodes.set(y,new U5),this.sharedNodes.get(y).add(u);const R=u.options.initialPromotionConfig;u.promote({transition:R?R.transition:void 0,preserveFollowOpacity:R&&R.shouldPreserveFollowOpacity?R.shouldPreserveFollowOpacity(u):void 0})}isLead(){const y=this.getStack();return y?y.lead===this:!0}getLead(){var u;const{layoutId:y}=this.options;return y?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:y}=this.options;return y?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:y}=this.options;if(y)return this.root.sharedNodes.get(y)}promote({needsReset:y,transition:u,preserveFollowOpacity:C}={}){const R=this.getStack();R&&R.promote(this,C),y&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const y=this.getStack();return y?y.relegate(this):!1}resetSkewAndRotation(){const{visualElement:y}=this.options;if(!y)return;let u=!1;const{latestValues:C}=y;if((C.z||C.rotate||C.rotateX||C.rotateY||C.rotateZ||C.skewX||C.skewY)&&(u=!0),!u)return;const R={};C.z&&j0("z",y,R,this.animationValues);for(let O=0;O<B0.length;O++)j0(`rotate${B0[O]}`,y,R,this.animationValues),j0(`skew${B0[O]}`,y,R,this.animationValues);y.render();for(const O in R)y.setStaticValue(O,R[O]),this.animationValues&&(this.animationValues[O]=R[O]);y.scheduleRender()}getProjectionStyles(y){if(!this.instance||this.isSVG)return;if(!this.isVisible)return $5;const u={visibility:""},C=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=C_(y==null?void 0:y.pointerEvents)||"",u.transform=C?C(this.latestValues,""):"none",u;const R=this.getLead();if(!this.projectionDelta||!this.layout||!R.target){const F={};return this.options.layoutId&&(F.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,F.pointerEvents=C_(y==null?void 0:y.pointerEvents)||""),this.hasProjected&&!Bf(this.latestValues)&&(F.transform=C?C({},""):"none",this.hasProjected=!1),F}const O=R.animationValues||R.latestValues;this.applyTransformsToTarget(),u.transform=V5(this.projectionDeltaWithTransform,this.treeScale,O),C&&(u.transform=C(O,u.transform));const{x:B,y:z}=this.projectionDelta;u.transformOrigin=`${B.origin*100}% ${z.origin*100}% 0`,R.animationValues?u.opacity=R===this?O.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:O.opacityExit:u.opacity=R===this?O.opacity!==void 0?O.opacity:"":O.opacityExit!==void 0?O.opacityExit:0;for(const F in Em){if(O[F]===void 0)continue;const{correct:G,applyTo:te,isCSSVariable:K}=Em[F],X=u.transform==="none"?O[F]:G(O[F],R);if(te){const ye=te.length;for(let pe=0;pe<ye;pe++)u[te[pe]]=X}else K?this.options.visualElement.renderState.vars[F]=X:u[F]=X}return this.options.layoutId&&(u.pointerEvents=R===this?C_(y==null?void 0:y.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(y=>{var u;return(u=y.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(Yw),this.root.sharedNodes.clear()}}}function q5(n){n.updateLayout()}function G5(n){var f;const a=((f=n.resumeFrom)==null?void 0:f.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&a&&n.hasListeners("didUpdate")){const{layoutBox:p,measuredBox:_}=n.layout,{animationType:S}=n.options,y=a.source!==n.layout.source;S==="size"?Po(B=>{const z=y?a.measuredBox[B]:a.layoutBox[B],F=us(z);z.min=p[B].min,z.max=z.min+F}):XT(S,a.layoutBox,p)&&Po(B=>{const z=y?a.measuredBox[B]:a.layoutBox[B],F=us(p[B]);z.max=z.min+F,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[B].max=n.relativeTarget[B].min+F)});const u=Qd();Sm(u,p,a.layoutBox);const C=Qd();y?Sm(C,n.applyTransform(_,!0),a.measuredBox):Sm(C,p,a.layoutBox);const R=!HT(u);let O=!1;if(!n.resumeFrom){const B=n.getClosestProjectingParent();if(B&&!B.resumeFrom){const{snapshot:z,layout:F}=B;if(z&&F){const G=Oi();Tm(G,a.layoutBox,z.layoutBox);const te=Oi();Tm(te,p,F.layoutBox),WT(G,te)||(O=!0),B.options.layoutRoot&&(n.relativeTarget=te,n.relativeTargetOrigin=G,n.relativeParent=B)}}}n.notifyListeners("didUpdate",{layout:p,snapshot:a,delta:C,layoutDelta:u,hasLayoutChanged:R,hasRelativeLayoutChanged:O})}else if(n.isLead()){const{onExitComplete:p}=n.options;p&&p()}n.options.transition=void 0}function H5(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function W5(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function K5(n){n.clearSnapshot()}function Yw(n){n.clearMeasurements()}function Y5(n){n.isLayoutDirty=!1}function X5(n){const{visualElement:a}=n.options;a&&a.getProps().onBeforeLayoutMeasure&&a.notify("BeforeLayoutMeasure"),n.resetTransform()}function Xw(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Q5(n){n.resolveTargetDelta()}function J5(n){n.calcProjection()}function e4(n){n.resetSkewAndRotation()}function t4(n){n.removeLeadSnapshot()}function Qw(n,a,f){n.translate=mi(a.translate,0,f),n.scale=mi(a.scale,1,f),n.origin=a.origin,n.originPoint=a.originPoint}function Jw(n,a,f,p){n.min=mi(a.min,f.min,p),n.max=mi(a.max,f.max,p)}function r4(n,a,f,p){Jw(n.x,a.x,f.x,p),Jw(n.y,a.y,f.y,p)}function n4(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const i4={duration:.45,ease:[.4,0,.1,1]},e2=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),t2=e2("applewebkit/")&&!e2("chrome/")?Math.round:Ro;function r2(n){n.min=t2(n.min),n.max=t2(n.max)}function a4(n){r2(n.x),r2(n.y)}function XT(n,a,f){return n==="position"||n==="preserve-aspect"&&!s5(Hw(a),Hw(f),.2)}function s4(n){var a;return n!==n.root&&((a=n.scroll)==null?void 0:a.wasRoot)}const o4=YT({attachResizeListener:(n,a)=>zm(n,"resize",a),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),N0={current:void 0},QT=YT({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!N0.current){const n=new o4({});n.mount(window),n.setOptions({layoutScroll:!0}),N0.current=n}return N0.current},resetTransform:(n,a)=>{n.style.transform=a!==void 0?a:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),l4={pan:{Feature:T5},drag:{Feature:S5,ProjectionNode:QT,MeasureLayout:ZT}};function u4(n,a,f){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let p=document;const _=(f==null?void 0:f[n])??p.querySelectorAll(n);return _?Array.from(_):[]}return Array.from(n)}function JT(n,a){const f=u4(n),p=new AbortController,_={passive:!0,...a,signal:p.signal};return[f,_,()=>p.abort()]}function n2(n){return!(n.pointerType==="touch"||$T())}function c4(n,a,f={}){const[p,_,S]=JT(n,f),y=u=>{if(!n2(u))return;const{target:C}=u,R=a(C,u);if(typeof R!="function"||!C)return;const O=B=>{n2(B)&&(R(B),C.removeEventListener("pointerleave",O))};C.addEventListener("pointerleave",O,_)};return p.forEach(u=>{u.addEventListener("pointerenter",y,_)}),S}function i2(n,a,f){const{props:p}=n;n.animationState&&p.whileHover&&n.animationState.setActive("whileHover",f==="Start");const _="onHover"+f,S=p[_];S&&gi.postRender(()=>S(a,Zm(a)))}class h4 extends Ph{mount(){const{current:a}=this.node;a&&(this.unmount=c4(a,(f,p)=>(i2(this.node,p,"Start"),_=>i2(this.node,_,"End"))))}unmount(){}}class f4 extends Ph{constructor(){super(...arguments),this.isActive=!1}onFocus(){let a=!1;try{a=this.node.current.matches(":focus-visible")}catch{a=!0}!a||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vm(zm(this.node.current,"focus",()=>this.onFocus()),zm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const eM=(n,a)=>a?n===a?!0:eM(n,a.parentElement):!1,d4=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function p4(n){return d4.has(n.tagName)||n.tabIndex!==-1}const _m=new WeakSet;function a2(n){return a=>{a.key==="Enter"&&n(a)}}function F0(n,a){n.dispatchEvent(new PointerEvent("pointer"+a,{isPrimary:!0,bubbles:!0}))}const m4=(n,a)=>{const f=n.currentTarget;if(!f)return;const p=a2(()=>{if(_m.has(f))return;F0(f,"down");const _=a2(()=>{F0(f,"up")}),S=()=>F0(f,"cancel");f.addEventListener("keyup",_,a),f.addEventListener("blur",S,a)});f.addEventListener("keydown",p,a),f.addEventListener("blur",()=>f.removeEventListener("keydown",p),a)};function s2(n){return dx(n)&&!$T()}function g4(n,a,f={}){const[p,_,S]=JT(n,f),y=u=>{const C=u.currentTarget;if(!s2(u)||_m.has(C))return;_m.add(C);const R=a(C,u),O=(F,G)=>{window.removeEventListener("pointerup",B),window.removeEventListener("pointercancel",z),!(!s2(F)||!_m.has(C))&&(_m.delete(C),typeof R=="function"&&R(F,{success:G}))},B=F=>{O(F,C===window||C===document||f.useGlobalTarget||eM(C,F.target))},z=F=>{O(F,!1)};window.addEventListener("pointerup",B,_),window.addEventListener("pointercancel",z,_)};return p.forEach(u=>{(f.useGlobalTarget?window:u).addEventListener("pointerdown",y,_),u instanceof HTMLElement&&(u.addEventListener("focus",R=>m4(R,_)),!p4(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),S}function o2(n,a,f){const{props:p}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&p.whileTap&&n.animationState.setActive("whileTap",f==="Start");const _="onTap"+(f==="End"?"":f),S=p[_];S&&gi.postRender(()=>S(a,Zm(a)))}class y4 extends Ph{mount(){const{current:a}=this.node;a&&(this.unmount=g4(a,(f,p)=>(o2(this.node,p,"Start"),(_,{success:S})=>o2(this.node,_,S?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const yv=new WeakMap,U0=new WeakMap,_4=n=>{const a=yv.get(n.target);a&&a(n)},v4=n=>{n.forEach(_4)};function x4({root:n,...a}){const f=n||document;U0.has(f)||U0.set(f,{});const p=U0.get(f),_=JSON.stringify(a);return p[_]||(p[_]=new IntersectionObserver(v4,{root:n,...a})),p[_]}function b4(n,a,f){const p=x4(a);return yv.set(n,f),p.observe(n),()=>{yv.delete(n),p.unobserve(n)}}const w4={some:0,all:1};class S4 extends Ph{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:a={}}=this.node.getProps(),{root:f,margin:p,amount:_="some",once:S}=a,y={root:f?f.current:void 0,rootMargin:p,threshold:typeof _=="number"?_:w4[_]},u=C=>{const{isIntersecting:R}=C;if(this.isInView===R||(this.isInView=R,S&&!R&&this.hasEnteredView))return;R&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",R);const{onViewportEnter:O,onViewportLeave:B}=this.node.getProps(),z=R?O:B;z&&z(C)};return b4(this.node.current,y,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:a,prevProps:f}=this.node;["amount","margin","root"].some(T4(a,f))&&this.startObserver()}unmount(){}}function T4({viewport:n={}},{viewport:a={}}={}){return f=>n[f]!==a[f]}const M4={inView:{Feature:S4},tap:{Feature:y4},focus:{Feature:f4},hover:{Feature:h4}},A4={layout:{ProjectionNode:QT,MeasureLayout:ZT}},_v={current:null},tM={current:!1};function C4(){if(tM.current=!0,!!Bv)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),a=()=>_v.current=n.matches;n.addListener(a),a()}else _v.current=!1}const E4=new WeakMap;function P4(n,a,f){for(const p in a){const _=a[p],S=f[p];if(Ua(_))n.addValue(p,_);else if(Ua(S))n.addValue(p,Im(_,{owner:n}));else if(S!==_)if(n.hasValue(p)){const y=n.getValue(p);y.liveStyle===!0?y.jump(_):y.hasAnimated||y.set(_)}else{const y=n.getStaticValue(p);n.addValue(p,Im(y!==void 0?y:_,{owner:n}))}}for(const p in f)a[p]===void 0&&n.removeValue(p);return a}const rM=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),nM=n=>/^0[^.\s]+$/u.test(n),R4={test:n=>n==="auto",parse:n=>n},iM=n=>a=>a.test(n),aM=[hp,yr,Su,Sh,F3,N3,R4],l2=n=>aM.find(iM(n)),I4=[...aM,Na,Ch],D4=n=>I4.find(iM(n)),L4=new Set(["brightness","contrast","saturate","opacity"]);function z4(n){const[a,f]=n.slice(0,-1).split("(");if(a==="drop-shadow")return n;const[p]=f.match(rx)||[];if(!p)return n;const _=f.replace(p,"");let S=L4.has(a)?1:0;return p!==f&&(S*=100),a+"("+S+_+")"}const k4=/\b([a-z-]*)\(.*?\)/gu,vv={...Ch,getAnimatableNone:n=>{const a=n.match(k4);return a?a.map(z4).join(" "):n}},O4={...Gv,color:Na,backgroundColor:Na,outlineColor:Na,fill:Na,stroke:Na,borderColor:Na,borderTopColor:Na,borderRightColor:Na,borderBottomColor:Na,borderLeftColor:Na,filter:vv,WebkitFilter:vv},sM=n=>O4[n];function oM(n,a){let f=sM(n);return f!==vv&&(f=Ch),f.getAnimatableNone?f.getAnimatableNone(a):void 0}const u2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class B4{scrapeMotionValuesFromProps(a,f,p){return{}}constructor({parent:a,props:f,presenceContext:p,reducedMotionConfig:_,blockInitialAnimation:S,visualState:y},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=cx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const z=Cs.now();this.renderScheduledAt<z&&(this.renderScheduledAt=z,gi.render(this.render,!1,!0))};const{latestValues:C,renderState:R}=y;this.latestValues=C,this.baseTarget={...C},this.initialValues=f.initial?{...C}:{},this.renderState=R,this.parent=a,this.props=f,this.presenceContext=p,this.depth=a?a.depth+1:0,this.reducedMotionConfig=_,this.options=u,this.blockInitialAnimation=!!S,this.isControllingVariants=i0(f),this.isVariantNode=VS(f),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(a&&a.current);const{willChange:O,...B}=this.scrapeMotionValuesFromProps(f,{},this);for(const z in B){const F=B[z];C[z]!==void 0&&Ua(F)&&F.set(C[z],!1)}}mount(a){this.current=a,E4.set(a,this),this.projection&&!this.projection.instance&&this.projection.mount(a),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((f,p)=>this.bindToMotionValue(p,f)),tM.current||C4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_v.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ah(this.notifyUpdate),Ah(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const f=this.features[a];f&&(f.unmount(),f.isMounted=!1)}this.current=null}bindToMotionValue(a,f){this.valueSubscriptions.has(a)&&this.valueSubscriptions.get(a)();const p=cp.has(a);p&&this.onBindTransform&&this.onBindTransform();const _=f.on("change",u=>{this.latestValues[a]=u,this.props.onUpdate&&gi.preRender(this.notifyUpdate),p&&this.projection&&(this.projection.isTransformDirty=!0)}),S=f.on("renderRequest",this.scheduleRender);let y;window.MotionCheckAppearSync&&(y=window.MotionCheckAppearSync(this,a,f)),this.valueSubscriptions.set(a,()=>{_(),S(),y&&y(),f.owner&&f.stop()})}sortNodePosition(a){return!this.current||!this.sortInstanceNodePosition||this.type!==a.type?0:this.sortInstanceNodePosition(this.current,a.current)}updateFeatures(){let a="animation";for(a in rp){const f=rp[a];if(!f)continue;const{isEnabled:p,Feature:_}=f;if(!this.features[a]&&_&&p(this.props)&&(this.features[a]=new _(this)),this.features[a]){const S=this.features[a];S.isMounted?S.update():(S.mount(),S.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Oi()}getStaticValue(a){return this.latestValues[a]}setStaticValue(a,f){this.latestValues[a]=f}update(a,f){(a.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=a,this.prevPresenceContext=this.presenceContext,this.presenceContext=f;for(let p=0;p<u2.length;p++){const _=u2[p];this.propEventSubscriptions[_]&&(this.propEventSubscriptions[_](),delete this.propEventSubscriptions[_]);const S="on"+_,y=a[S];y&&(this.propEventSubscriptions[_]=this.on(_,y))}this.prevMotionValues=P4(this,this.scrapeMotionValuesFromProps(a,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(a){return this.props.variants?this.props.variants[a]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(a){const f=this.getClosestVariantNode();if(f)return f.variantChildren&&f.variantChildren.add(a),()=>f.variantChildren.delete(a)}addValue(a,f){const p=this.values.get(a);f!==p&&(p&&this.removeValue(a),this.bindToMotionValue(a,f),this.values.set(a,f),this.latestValues[a]=f.get())}removeValue(a){this.values.delete(a);const f=this.valueSubscriptions.get(a);f&&(f(),this.valueSubscriptions.delete(a)),delete this.latestValues[a],this.removeValueFromRenderState(a,this.renderState)}hasValue(a){return this.values.has(a)}getValue(a,f){if(this.props.values&&this.props.values[a])return this.props.values[a];let p=this.values.get(a);return p===void 0&&f!==void 0&&(p=Im(f===null?void 0:f,{owner:this}),this.addValue(a,p)),p}readValue(a,f){let p=this.latestValues[a]!==void 0||!this.current?this.latestValues[a]:this.getBaseTargetFromProps(this.props,a)??this.readValueFromInstance(this.current,a,this.options);return p!=null&&(typeof p=="string"&&(rM(p)||nM(p))?p=parseFloat(p):!D4(p)&&Ch.test(f)&&(p=oM(a,f)),this.setBaseTarget(a,Ua(p)?p.get():p)),Ua(p)?p.get():p}setBaseTarget(a,f){this.baseTarget[a]=f}getBaseTarget(a){var S;const{initial:f}=this.props;let p;if(typeof f=="string"||typeof f=="object"){const y=Yv(this.props,f,(S=this.presenceContext)==null?void 0:S.custom);y&&(p=y[a])}if(f&&p!==void 0)return p;const _=this.getBaseTargetFromProps(this.props,a);return _!==void 0&&!Ua(_)?_:this.initialValues[a]!==void 0&&p===void 0?void 0:this.baseTarget[a]}on(a,f){return this.events[a]||(this.events[a]=new ex),this.events[a].add(f)}notify(a,...f){this.events[a]&&this.events[a].notify(...f)}}const j4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function N4(n){const a=j4.exec(n);if(!a)return[,];const[,f,p,_]=a;return[`--${f??p}`,_]}function lM(n,a,f=1){const[p,_]=N4(n);if(!p)return;const S=window.getComputedStyle(a).getPropertyValue(p);if(S){const y=S.trim();return rM(y)?parseFloat(y):y}return qv(_)?lM(_,a,f+1):_}function F4(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||nM(n):!0}const U4=new Set(["auto","none","0"]);function V4(n,a,f){let p=0,_;for(;p<n.length&&!_;){const S=n[p];typeof S=="string"&&!U4.has(S)&&Dm(S).values.length&&(_=n[p]),p++}if(_&&f)for(const S of a)n[S]=oM(f,_)}class $4 extends cx{constructor(a,f,p,_,S){super(a,f,p,_,S,!0)}readKeyframes(){const{unresolvedKeyframes:a,element:f,name:p}=this;if(!f||!f.current)return;super.readKeyframes();for(let C=0;C<a.length;C++){let R=a[C];if(typeof R=="string"&&(R=R.trim(),qv(R))){const O=lM(R,f.current);O!==void 0&&(a[C]=O),C===a.length-1&&(this.finalKeyframe=R)}}if(this.resolveNoneKeyframes(),!RT.has(p)||a.length!==2)return;const[_,S]=a,y=l2(_),u=l2(S);if(y!==u)if(dw(y)&&dw(u))for(let C=0;C<a.length;C++){const R=a[C];typeof R=="string"&&(a[C]=parseFloat(R))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:a,name:f}=this,p=[];for(let _=0;_<a.length;_++)(a[_]===null||F4(a[_]))&&p.push(_);p.length&&V4(a,p,f)}measureInitialState(){const{element:a,unresolvedKeyframes:f,name:p}=this;if(!a||!a.current)return;p==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=np[p](a.measureViewportBox(),window.getComputedStyle(a.current)),f[0]=this.measuredOrigin;const _=f[f.length-1];_!==void 0&&a.getValue(p,_).jump(_,!1)}measureEndState(){var u;const{element:a,name:f,unresolvedKeyframes:p}=this;if(!a||!a.current)return;const _=a.getValue(f);_&&_.jump(this.measuredOrigin,!1);const S=p.length-1,y=p[S];p[S]=np[f](a.measureViewportBox(),window.getComputedStyle(a.current)),y!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=y),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([C,R])=>{a.getValue(C).set(R)}),this.resolveNoneKeyframes()}}class uM extends B4{constructor(){super(...arguments),this.KeyframeResolver=$4}sortInstanceNodePosition(a,f){return a.compareDocumentPosition(f)&2?1:-1}getBaseTargetFromProps(a,f){return a.style?a.style[f]:void 0}removeValueFromRenderState(a,{vars:f,style:p}){delete f[a],delete p[a]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:a}=this.props;Ua(a)&&(this.childSubscription=a.on("change",f=>{this.current&&(this.current.textContent=`${f}`)}))}}function cM(n,{style:a,vars:f},p,_){Object.assign(n.style,a,_&&_.getProjectionStyles(p));for(const S in f)n.style.setProperty(S,f[S])}function Z4(n){return window.getComputedStyle(n)}class q4 extends uM{constructor(){super(...arguments),this.type="html",this.renderInstance=cM}readValueFromInstance(a,f){if(cp.has(f))return mD(a,f);{const p=Z4(a),_=(Zv(f)?p.getPropertyValue(f):p[f])||0;return typeof _=="string"?_.trim():_}}measureInstanceViewportBox(a,{transformPagePoint:f}){return NT(a,f)}build(a,f,p){Hv(a,f,p.transformTemplate)}scrapeMotionValuesFromProps(a,f,p){return Xv(a,f,p)}}const hM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function G4(n,a,f,p){cM(n,a,void 0,p);for(const _ in a.attrs)n.setAttribute(hM.has(_)?_:Uv(_),a.attrs[_])}class H4 extends uM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Oi}getBaseTargetFromProps(a,f){return a[f]}readValueFromInstance(a,f){if(cp.has(f)){const p=sM(f);return p&&p.default||0}return f=hM.has(f)?f:Uv(f),a.getAttribute(f)}scrapeMotionValuesFromProps(a,f,p){return eT(a,f,p)}build(a,f,p){YS(a,f,this.isSVGTag,p.transformTemplate)}renderInstance(a,f,p,_){G4(a,f,p,_)}mount(a){this.isSVGTag=QS(a.tagName),super.mount(a)}}const W4=(n,a)=>Kv(n)?new H4(a):new q4(a,{allowProjection:n!==oe.Fragment}),K4=iI({...QD,...M4,...l4,...A4},W4),hs=T3(K4);function Y4(){const{loading:n,login:a,isAuthenticated:f}=Cl(),[p,_]=oe.useState(!1),[S,y]=oe.useState(!1),[u,C]=oe.useState(""),[R,O]=oe.useState(""),B=bc();function z(G,te){let K=!0;return G?e0.isEmail(G)||(_(!0),Gr.error("Incorrect email address format!"),K=!1):(_(!0),K=!1),te?te.length<8&&(y(!0),Gr.error("Password length must be at least 8 characters"),K=!1):(y(!0),K=!1),!K&&(!G||!te)&&Gr.error("Please provide both email and password!"),K}async function F(){z(u.trim(),R.trim())&&await a(u.trim(),R.trim())}return oe.useEffect(()=>{f&&!n&&B("/tours")},[f,n,B]),J.jsx("section",{className:"my-auto flex w-full flex-col md:items-center",children:J.jsxs(hs.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},className:"mx-5 my-14 flex flex-col justify-between space-y-8 rounded-lg bg-white px-5 py-7 shadow-lg md:min-w-[600px] md:p-13 md:shadow-xl",children:[J.jsxs("div",{className:"flex flex-col space-y-1",children:[J.jsx("h1",{className:"natours-gradient-text text-2xl font-bold",children:"Log into Your account"}),J.jsxs(Es,{to:"/signup",className:"font-semibold text-stone-600",children:[J.jsx("span",{className:"mr-2 text-stone-800/50",children:"Don't have an Account?"}),"Signup"]})]}),J.jsxs("div",{className:"flex flex-col space-y-3",children:[J.jsx("div",{children:J.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Email Address"})}),J.jsx("input",{type:"text",className:`input-natours w-full text-stone-600 ${p?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"you@example.com",value:u,onChange:G=>{C(G.target.value),_(!1)}})]}),J.jsxs("div",{className:"flex flex-col space-y-3",children:[J.jsx("div",{children:J.jsx("label",{htmlFor:"password",className:"font-semibold text-stone-600",children:"Password"})}),J.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${S&&"border-3 border-red-400 focus:ring-0"}`,placeholder:"",value:R,onChange:G=>{O(G.target.value),y(!1)}})]}),J.jsx("div",{children:J.jsx(Es,{to:"/forgot-password/send-otp",className:"text-natours font-semibold",state:{emailTyped:u},children:"Forgot Password?"})}),J.jsx("div",{children:J.jsx(hs.button,{whileTap:{scale:.8},transition:{type:"keyframes",duration:.01},className:"btn-primary w-1/2 py-3 md:w-1/3",onClick:F,disabled:n,children:n?J.jsx(Io,{}):"Login"})})]})})}function X4(){const n=bc(),{signup:a,loading:f}=Cl(),[p,_]=oe.useState(null),[S,y]=oe.useState(""),[u,C]=oe.useState(""),[R,O]=oe.useState(""),[B,z]=oe.useState(""),[F,G]=oe.useState(null),[te,K]=oe.useState(!1),[X,ye]=oe.useState(!1),[pe,xe]=oe.useState(!1),[Se,ke]=oe.useState(!1);function it(ht,Lt,sr,nr){let Xt=!0;return!ht&&!Lt&&!sr&&!nr?(Gr.error("All fields are required"),K(!0),ye(!0),xe(!0),ke(!0),Xt=!1):(!ht.trim()||ht.trim().split(" ").length<2?(K(!0),Gr.error("Please enter your full name ."),Xt=!1):K(!1),Lt?e0.isEmail(Lt)?ye(!1):(ye(!0),Gr.error("Invalid email format."),Xt=!1):(ye(!0),Gr.error("Email is required."),Xt=!1),sr?sr.length<8?(xe(!0),Gr.error("Password must be at least 8 characters."),Xt=!1):xe(!1):(xe(!0),Gr.error("Password is required."),Xt=!1),nr?nr!==sr?(ke(!0),Gr.error("Passwords do not match."),Xt=!1):ke(!1):(ke(!0),Gr.error("Confirm Password id required"),Xt=!1),Xt)}async function Ke(ht){ht.preventDefault();const Lt=new FormData;Lt.append("name",S),Lt.append("email",u),Lt.append("password",R),Lt.append("confirmPassword",B),F&&Lt.append("photo",F),console.log(Lt),it(S,u,R,B)&&(await a(Lt),n("/tours"))}const Ye=ht=>{const Lt=ht.target.files[0];if(console.log(Lt.type.split("/")[1]),Lt.type.split("/")[1]!=="jpeg"&&Lt.type.split("/")[1]!=="png")return Gr.error("Please Upload Jpeg or Png image only!");if(console.log(Lt),Lt){const sr=URL.createObjectURL(Lt);_(sr),G(Lt)}else _(null)};return J.jsx("section",{className:"my-10 flex w-full flex-col md:items-center",children:J.jsx("form",{onSubmit:Ke,children:J.jsxs(hs.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},className:"mx-5 flex flex-col justify-between space-y-8 rounded-lg bg-white px-5 py-7 shadow-lg md:min-w-[600px] md:p-13 md:shadow-xl",children:[J.jsxs("div",{className:"flex flex-col space-y-1",children:[J.jsx("h1",{className:"natours-gradient-text text-2xl font-bold",children:"Register your Account"}),J.jsxs(Es,{to:"/login",className:"font-semibold text-stone-600",children:[J.jsx("span",{className:"mr-2 text-stone-800/50",children:"Already have an Account?"}),"Login"]})]}),J.jsxs("div",{className:"flex flex-col space-y-3",children:[J.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Full Name"}),J.jsx("input",{type:"text",className:`input-natours w-full text-stone-600 ${te?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"John Doe",name:"name",value:S,onChange:ht=>{K(!1),y(ht.target.value)}})]}),J.jsxs("div",{className:"flex flex-col space-y-3",children:[J.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Email Address"}),J.jsx("input",{type:"text",className:`input-natours w-full text-stone-600 ${X?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"you@example.com",name:"email",value:u,onChange:ht=>{ye(!1),C(ht.target.value)}})]}),J.jsxs("div",{className:"flex flex-col space-y-3",children:[J.jsx("label",{htmlFor:"password",className:"font-semibold text-stone-600",children:"Password"}),J.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${pe?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"",name:"password",value:R,onChange:ht=>{xe(!1),O(ht.target.value)}})]}),J.jsxs("div",{className:"flex flex-col space-y-3",children:[J.jsx("label",{htmlFor:"confirm-password",className:"font-semibold text-stone-600",children:"Confirm Password"}),J.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${Se?"border-3 border-red-400 focus:ring-0":""}`,placeholder:" ",name:"confirmPassword",value:B,onChange:ht=>{ke(!1),z(ht.target.value)}})]}),J.jsxs("div",{className:"flex flex-col space-y-3",children:[J.jsx("input",{type:"file",id:"photo-upload",accept:"image/*",name:"photo",className:"hidden",onChange:Ye}),p&&J.jsx("label",{htmlFor:"photo-upload",className:"font-semibold text-stone-600",children:"Click to choose different photo"}),J.jsx("label",{htmlFor:"photo-upload",className:"hover:border-natours relative size-20 cursor-pointer rounded-full border-3 border-stone-300 bg-stone-100 p-1 transition-colors md:size-24 lg:size-26",children:p?J.jsx("img",{src:p,alt:"Profile Preview",className:"h-full w-full rounded-full object-cover"}):J.jsx("div",{className:"flex h-full w-full items-center justify-center",children:J.jsx("span",{className:"text-center text-sm text-stone-600 select-none",children:"Choose Photo"})})})]}),J.jsx("div",{children:J.jsx(hs.button,{whileTap:{scale:.8},transition:{type:"keyframes",duration:.01},className:"btn-primary w-1/2 py-3 md:w-1/3",children:f?J.jsx(Io,{}):"Signup"})})]})})})}var fM={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},c2=Vf.createContext&&Vf.createContext(fM),Q4=["attr","size","title"];function J4(n,a){if(n==null)return{};var f=eL(n,a),p,_;if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(n);for(_=0;_<S.length;_++)p=S[_],!(a.indexOf(p)>=0)&&Object.prototype.propertyIsEnumerable.call(n,p)&&(f[p]=n[p])}return f}function eL(n,a){if(n==null)return{};var f={};for(var p in n)if(Object.prototype.hasOwnProperty.call(n,p)){if(a.indexOf(p)>=0)continue;f[p]=n[p]}return f}function F_(){return F_=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var f=arguments[a];for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(n[p]=f[p])}return n},F_.apply(this,arguments)}function h2(n,a){var f=Object.keys(n);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(n);a&&(p=p.filter(function(_){return Object.getOwnPropertyDescriptor(n,_).enumerable})),f.push.apply(f,p)}return f}function U_(n){for(var a=1;a<arguments.length;a++){var f=arguments[a]!=null?arguments[a]:{};a%2?h2(Object(f),!0).forEach(function(p){tL(n,p,f[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(f)):h2(Object(f)).forEach(function(p){Object.defineProperty(n,p,Object.getOwnPropertyDescriptor(f,p))})}return n}function tL(n,a,f){return a=rL(a),a in n?Object.defineProperty(n,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):n[a]=f,n}function rL(n){var a=nL(n,"string");return typeof a=="symbol"?a:a+""}function nL(n,a){if(typeof n!="object"||!n)return n;var f=n[Symbol.toPrimitive];if(f!==void 0){var p=f.call(n,a);if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(n)}function dM(n){return n&&n.map((a,f)=>Vf.createElement(a.tag,U_({key:f},a.attr),dM(a.child)))}function Ki(n){return a=>Vf.createElement(iL,F_({attr:U_({},n.attr)},a),dM(n.child))}function iL(n){var a=f=>{var{attr:p,size:_,title:S}=n,y=J4(n,Q4),u=_||f.size||"1em",C;return f.className&&(C=f.className),n.className&&(C=(C?C+" ":"")+n.className),Vf.createElement("svg",F_({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},f.attr,p,y,{className:C,style:U_(U_({color:n.color||f.color},f.style),n.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),S&&Vf.createElement("title",null,S),n.children)};return c2!==void 0?Vf.createElement(c2.Consumer,null,f=>a(f)):a(fM)}function aL(n){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm52.7 283.3L256 278.6l-52.7 52.7c-6.2 6.2-16.4 6.2-22.6 0-3.1-3.1-4.7-7.2-4.7-11.3 0-4.1 1.6-8.2 4.7-11.3l52.7-52.7-52.7-52.7c-3.1-3.1-4.7-7.2-4.7-11.3 0-4.1 1.6-8.2 4.7-11.3 6.2-6.2 16.4-6.2 22.6 0l52.7 52.7 52.7-52.7c6.2-6.2 16.4-6.2 22.6 0 6.2 6.2 6.2 16.4 0 22.6L278.6 256l52.7 52.7c6.2 6.2 6.2 16.4 0 22.6-6.2 6.3-16.4 6.3-22.6 0z"},child:[]}]})(n)}function sL(n){return Ki({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"},child:[]},{tag:"path",attr:{d:"M16 2v4"},child:[]},{tag:"path",attr:{d:"M8 2v4"},child:[]},{tag:"path",attr:{d:"M3 10h5"},child:[]},{tag:"path",attr:{d:"M17.5 17.5 16 16.3V14"},child:[]},{tag:"circle",attr:{cx:"16",cy:"16",r:"6"},child:[]}]})(n)}function oL(n){return Ki({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"4",x2:"20",y1:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"4",x2:"20",y1:"6",y2:"6"},child:[]},{tag:"line",attr:{x1:"4",x2:"20",y1:"18",y2:"18"},child:[]}]})(n)}const lL="/assets/logo-green-Cpft2RYs.png";function pM(n){return Ki({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"},child:[]}]})(n)}function uL(n){return Ki({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"},child:[]}]})(n)}function cL(n){return Ki({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19.3 16.9c.4-.7.7-1.5.7-2.4 0-2.5-2-4.5-4.5-4.5S11 12 11 14.5s2 4.5 4.5 4.5c.9 0 1.7-.3 2.4-.7l3.2 3.2 1.4-1.4-3.2-3.2zm-3.8.1c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zM12 20v2C6.48 22 2 17.52 2 12S6.48 2 12 2c4.84 0 8.87 3.44 9.8 8h-2.07A8 8 0 0 0 15 4.59V5c0 1.1-.9 2-2 2h-2v2c0 .55-.45 1-1 1H8v2h2v3H9l-4.79-4.79C4.08 10.79 4 11.38 4 12c0 4.41 3.59 8 8 8z"},child:[]}]})(n)}function mM(n){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 256c0 114.87 93.13 208 208 208s208-93.13 208-208S370.87 48 256 48 48 141.13 48 256zm212.65-91.36a16 16 0 0 1 .09 22.63L208.42 240H342a16 16 0 0 1 0 32H208.42l52.32 52.73A16 16 0 1 1 238 347.27l-79.39-80a16 16 0 0 1 0-22.54l79.39-80a16 16 0 0 1 22.65-.09z"},child:[]}]})(n)}function hL(n){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M392 80H232a56.06 56.06 0 0 0-56 56v104h153.37l-52.68-52.69a16 16 0 0 1 22.62-22.62l80 80a16 16 0 0 1 0 22.62l-80 80a16 16 0 0 1-22.62-22.62L329.37 272H176v104c0 32.05 33.79 56 64 56h152a56.06 56.06 0 0 0 56-56V136a56.06 56.06 0 0 0-56-56zM80 240a16 16 0 0 0 0 32h96v-32z"},child:[]}]})(n)}function fL(n){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M160 256a16 16 0 0 1 16-16h144V136c0-32-33.79-56-64-56H104a56.06 56.06 0 0 0-56 56v240a56.06 56.06 0 0 0 56 56h160a56.06 56.06 0 0 0 56-56V272H176a16 16 0 0 1-16-16zm299.31-11.31-80-80a16 16 0 0 0-22.62 22.62L409.37 240H320v32h89.37l-52.68 52.69a16 16 0 1 0 22.62 22.62l80-80a16 16 0 0 0 0-22.62z"},child:[]}]})(n)}function dL(n){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M352 144h112v112"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m48 368 121.37-121.37a32 32 0 0 1 45.26 0l50.74 50.74a32 32 0 0 0 45.26 0L448 160"},child:[]}]})(n)}function pL(n){return Ki({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function mL(n){return Ki({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function gL(n){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(n)}function yL(n){return Ki({attr:{viewBox:"0 0 536 512"},child:[{tag:"path",attr:{d:"M508.55 171.51L362.18 150.2 296.77 17.81C290.89 5.98 279.42 0 267.95 0c-11.4 0-22.79 5.9-28.69 17.81l-65.43 132.38-146.38 21.29c-26.25 3.8-36.77 36.09-17.74 54.59l105.89 103-25.06 145.48C86.98 495.33 103.57 512 122.15 512c4.93 0 10-1.17 14.87-3.75l130.95-68.68 130.94 68.7c4.86 2.55 9.92 3.71 14.83 3.71 18.6 0 35.22-16.61 31.66-37.4l-25.03-145.49 105.91-102.98c19.04-18.5 8.52-50.8-17.73-54.6zm-121.74 123.2l-18.12 17.62 4.28 24.88 19.52 113.45-102.13-53.59-22.38-11.74.03-317.19 51.03 103.29 11.18 22.63 25.01 3.64 114.23 16.63-82.65 80.38z"},child:[]}]})(n)}function _L(n){return Ki({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}function vL(n){return Ki({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm-48-248c0-17.7-14.3-32-32-32s-32 14.3-32 32 14.3 32 32 32 32-14.3 32-32zm128-32c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32zm-80 112c-35.6 0-88.8 21.3-95.8 61.2-2 11.8 9 21.5 20.5 18.1 31.2-9.6 59.4-15.3 75.3-15.3s44.1 5.7 75.3 15.3c11.4 3.5 22.5-6.3 20.5-18.1-7-39.9-60.2-61.2-95.8-61.2z"},child:[]}]})(n)}function f2({setIsOpen:n}){const{isAuthenticated:a,logout:f,loading:p}=Cl(),_=bc();async function S(){console.log("clicked"),await f(),n(!1),_("/")}return J.jsxs("div",{className:"flex gap-3 md:flex-row md:items-center md:justify-center",children:[!a&&J.jsxs(J.Fragment,{children:[J.jsx("div",{className:"flex items-center",children:J.jsxs(Es,{to:"/login",className:({isActive:y})=>`text-natours flex items-center space-x-2 p-2 font-bold ${y?"border-b":""}`,onClick:()=>{n(!1)},children:[J.jsx(hL,{className:"text-natours size-8"}),J.jsx("span",{children:"Login"})]})}),J.jsx("div",{className:"flex items-center",children:J.jsxs(Es,{to:"/signup",className:({isActive:y})=>`text-natours flex items-center space-x-2 p-2 font-bold ${y?"border-b":""}`,onClick:()=>{n(!1)},children:[J.jsx(_L,{className:"text-natours size-8"}),J.jsx("span",{children:"Signup"})]})})]}),J.jsx("div",{className:"flex items-center",children:J.jsxs(Es,{to:"/tours",className:({isActive:y})=>`text-natours flex items-center space-x-2 p-2 font-bold ${y?"border-b":""}`,onClick:()=>{n(!1)},children:[J.jsx(cL,{className:"text-natours size-8"}),J.jsx("span",{children:"Tours"})]})}),a&&J.jsx("div",{className:"flex items-center",children:J.jsxs("button",{className:"text-natours flex items-center space-x-2 p-2 font-bold hover:cursor-pointer",onClick:S,children:[J.jsx(fL,{className:"text-natours size-8"}),J.jsx("span",{children:"Logout"}),p&&J.jsx("span",{children:J.jsx(Io,{color:"green",className:"size-6"})})]})})]})}function xL(){const{user:n}=Cl(),a=n&&n.photo?`/img/users/${n.photo}`:"/img/users/default.jpg",[f,p]=oe.useState(!1),_=bc();function S(y){const u=y==null?void 0:y.split(" ").map(C=>(C=C.toLowerCase(),C.charAt(0).toUpperCase()+C.slice(1)));return u==null?void 0:u.join(" ")}return J.jsxs("header",{className:"w-full",children:[J.jsx("nav",{className:"relative w-full bg-stone-800 py-5",children:J.jsxs("div",{className:"mx-5 flex items-center justify-between lg:mx-10",children:[J.jsx("img",{src:lL,alt:"natours_logo_white",className:"h-8",onClick:()=>{_("/"),p(!1)}}),f?J.jsx(aL,{className:"text-natours ml-auto size-8 md:hidden",onClick:()=>p(!f)}):J.jsx(oL,{className:"text-natours group size-8 md:hidden",onClick:()=>p(!f)}),J.jsxs("div",{className:"hidden gap-2 md:flex",children:[J.jsx(f2,{setIsOpen:p}),n&&J.jsxs(Es,{to:"/account",className:({isActive:y})=>`text-natours flex items-center space-x-2 p-2 font-bold ${y?"border-b":""}`,onClick:()=>{p(!1)},children:[J.jsx("img",{src:a,className:"size-8 rounded-full"}),J.jsx("span",{className:"text-xl",children:S(n.name)})]})]})]})}),J.jsx(jS,{children:f?J.jsxs(hs.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},exit:{opacity:0,y:-30},transition:{type:"tween",duration:.1},className:"border-natours absolute z-50 flex h-fit w-full flex-col bg-stone-800 py-3 shadow-2xl md:hidden",children:[J.jsx("div",{className:"p-3",children:J.jsx("ul",{className:"flex flex-col items-center justify-center space-y-3 text-xl",children:J.jsx(f2,{setIsOpen:p})})}),n&&J.jsx("div",{className:"flex items-end justify-center p-3",children:J.jsxs(Es,{to:"/account",className:({isActive:y})=>`text-natours flex items-center space-x-2 p-2 font-bold ${y?"border-b":""}`,onClick:()=>{p(!1)},children:[J.jsx("img",{src:a,className:"size-12 rounded-full"}),J.jsx("span",{className:"text-xl",children:S(n.name)})]})})]},"navbar"):null})]})}const bL="/assets/logo-green-round-ClxvHQlP.png";function wL(){return J.jsx("footer",{className:"mt-4 border-t border-stone-400 bg-stone-500/10 lg:mt-8",children:J.jsxs("div",{className:"mx-4 my-8 flex flex-col items-center lg:mx-15 lg:mt-7 lg:flex-row lg:justify-between",children:[J.jsx("img",{src:bL,alt:"natours round logo",className:"size-15"}),J.jsxs("div",{className:"flex flex-col items-center lg:items-end",children:[J.jsxs("ul",{className:"flex space-x-3 p-2 text-[12px] font-semibold text-stone-600/80 md:text-[0.9rem] lg:text-[1rem]",children:[J.jsx("a",{href:"#",children:"About us"}),J.jsx("a",{href:"#",children:"Download app"}),J.jsx("a",{href:"#",children:"Become a guide"}),J.jsx("a",{href:"#",children:"Careers"}),J.jsx("a",{href:"#",children:"Contact"})]}),J.jsxs("p",{className:"pr-2 text-[12px] text-stone-400 md:text-[0.9rem] lg:text-[1rem]",children:[new Date().getFullYear(),"  By Urmish Ramani. All Rights Reserved"]})]})]})})}function SL(){return J.jsxs("div",{className:"flex min-h-screen flex-col",children:[J.jsx(xL,{}),J.jsx(IP,{}),J.jsx("main",{className:"min-h-[calc(100vh-100px)]",children:J.jsx(k2,{})}),J.jsx(wL,{})]})}function TL(){const{loading:n,user:a,changeProfile:f}=Cl(),[p,_]=oe.useState(!1),[S,y]=oe.useState(""),[u,C]=oe.useState(""),[R,O]=oe.useState(null),[B,z]=oe.useState(!1),[F,G]=oe.useState(!1),[te,K]=oe.useState(null);oe.useEffect(function(){C(a.name),y(a.email);const xe=`/img/users/${a.photo}`;K(xe)},[a]);function X(xe,Se){let ke=!0;return console.log(),Se?e0.isEmail(Se)||(z(!0),Gr.error("Incorrect email address format!"),ke=!1):(z(!0),ke=!1),xe.trim()?G(!1):(G(!0),Gr.error("Please enter your full name ."),ke=!1),ke}const ye=xe=>{const Se=xe.target.files[0];if(Se.type.split("/")[1]!=="jpeg"&&Se.type.split("/")[1]!=="png")return Gr.error("Please Upload Jpeg or Png image only!");if(Se){const ke=URL.createObjectURL(Se);K(ke),O(Se)}else K(null)};async function pe(xe){if(xe.preventDefault(),!X(u,S))return;const Se=new FormData;Se.append("name",u),Se.append("email",S),Se.append("photo",R),console.log(Se),await f(Se)}return oe.useEffect(()=>{const xe=u!==a.name||S!==a.email||R!==null;_(xe)},[u,S,R,a]),J.jsx("form",{className:"w-full md:w-3/4 lg:w-1/2",onSubmit:pe,children:J.jsx(jS,{children:J.jsxs(hs.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"my-7 flex flex-col justify-between space-y-8 rounded-lg bg-white px-6 py-7 shadow-lg md:min-w-[600px] md:p-13 md:shadow-xl",children:[J.jsx("div",{className:"flex flex-col space-y-1",children:J.jsx("h1",{className:"natours-gradient-text text-2xl font-bold",children:"Change Your Profile"})}),J.jsxs("div",{className:"flex flex-col space-y-3",children:[J.jsx("div",{children:J.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Full Name"})}),J.jsx("input",{type:"text",className:`input-natours w-full text-stone-600 ${F?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"John Doe",value:u,onChange:xe=>{C(xe.target.value),G(!1)}})]}),J.jsxs("div",{className:"flex flex-col space-y-3",children:[J.jsx("div",{children:J.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Email Address"})}),J.jsx("input",{type:"text",className:`input-natours w-full text-stone-600 ${B?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"you@example.com",value:S,onChange:xe=>{y(xe.target.value),z(!1)}})]}),J.jsxs("div",{className:"flex flex-col space-y-3",children:[J.jsx("input",{type:"file",id:"photo-upload",accept:"image/*",name:"photo",className:"hidden",onChange:ye}),te&&J.jsx("label",{htmlFor:"photo-upload",className:"font-semibold text-stone-600",children:"Click to choose different photo"}),J.jsx("label",{htmlFor:"photo-upload",className:"hover:border-natours relative size-20 cursor-pointer rounded-full border-3 border-stone-300 bg-stone-100 p-1 transition-colors lg:size-26",children:te?J.jsx("img",{src:te||`/img/users/${a.photo}`,alt:"Profile Preview",className:"h-full w-full rounded-full object-cover"}):J.jsx("div",{className:"flex h-full w-full items-center justify-center text-stone-400",children:J.jsx("span",{className:"text-center text-sm select-none",children:"Choose Photo"})})})]}),J.jsx("div",{children:J.jsx("button",{className:"btn-primary w-1/2 py-3 disabled:cursor-not-allowed md:w-1/3",onClick:pe,disabled:n||!p,children:n?J.jsx(Io,{}):"Save"})})]})})})}function ML(){const{loading:n,changePassword:a}=Cl(),[f,p]=oe.useState(""),[_,S]=oe.useState(""),[y,u]=oe.useState(""),[C,R]=oe.useState(!1),[O,B]=oe.useState(!1),[z,F]=oe.useState(!1);function G(X,ye,pe){let xe=!0;return X?B(!1):(B(!0),Gr.error("Current password is required."),xe=!1),ye?ye.length<8?(R(!0),Gr.error("New password must be at least 8 characters."),xe=!1):R(!1):(R(!0),Gr.error("New password is required."),xe=!1),pe?pe!==ye?(F(!0),Gr.error("Passwords do not match."),xe=!1):F(!1):(F(!0),Gr.error("Confirm password is required."),xe=!1),xe}function te(){p(""),S(""),u("")}async function K(X){X.preventDefault(),G(y,f,_)&&(await a(y,f,_),te())}return J.jsx("form",{className:"w-full md:w-3/4 lg:w-1/2",onSubmit:K,children:J.jsxs(hs.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},className:"my-7 flex flex-col justify-between space-y-8 rounded-lg bg-white px-6 py-7 shadow-lg md:min-w-[600px] md:p-13 md:shadow-xl",children:[J.jsx("div",{className:"flex flex-col space-y-1",children:J.jsx("h1",{className:"natours-gradient-text text-2xl font-bold",children:"Change Your Password"})}),J.jsxs("div",{className:"flex flex-col space-y-3",children:[J.jsx("label",{htmlFor:"password",className:"font-semibold text-stone-600",children:"Current Password"}),J.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${O?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"",value:y,onChange:X=>{B(!1),u(X.target.value)}})]}),J.jsxs("div",{className:"flex flex-col space-y-3",children:[J.jsx("label",{htmlFor:"password",className:"font-semibold text-stone-600",children:"Password"}),J.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${C?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"",name:"password",value:f,onChange:X=>{R(!1),p(X.target.value)}})]}),J.jsxs("div",{className:"flex flex-col space-y-3",children:[J.jsx("label",{htmlFor:"confirm-password",className:"font-semibold text-stone-600",children:"Confirm Password"}),J.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${z?"border-3 border-red-400 focus:ring-0":""}`,placeholder:" ",name:"confirmPassword",value:_,onChange:X=>{F(!1),S(X.target.value)}})]}),J.jsx("div",{children:J.jsx("button",{className:"btn-primary w-1/2 py-3 md:w-1/3",onClick:K,disabled:n,children:n?J.jsx(Io,{}):"Save"})})]})})}function AL(n){return Ki({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"},child:[]}]})(n)}function CL(){const[n,a]=oe.useState("profile");return J.jsxs("div",{className:"flex w-full flex-col items-center justify-center",children:[J.jsxs("div",{className:"my-4 flex space-x-5 rounded-full bg-white p-3 shadow-md",children:[J.jsxs("button",{className:`text-natours flex items-center gap-2 ${n==="profile"?"bg-natours flex items-center gap-2 rounded-full px-3 py-0.5 text-white shadow-md":""}`,onClick:()=>a("profile"),children:[J.jsx("span",{children:J.jsx(AL,{})}),"Profile"]}),J.jsxs("button",{className:`text-natours flex items-center gap-2 ${n==="security"?"bg-natours rounded-full px-3 py-0.5 text-white shadow-md":""}`,onClick:()=>a("security"),children:[J.jsx("span",{children:J.jsx(uL,{})}),"Security"]})]}),n==="profile"&&J.jsx(TL,{}),n==="security"&&J.jsx(ML,{})]})}function EL(){return J.jsxs("section",{className:"flex flex-col items-center justify-center px-5 py-8",children:[J.jsxs("div",{className:"my-5 space-x-5 rounded bg-white p-6 shadow-md",children:[J.jsx(Es,{to:"/account",end:!0,className:({isActive:n})=>`text-natours p-3 text-lg font-semibold ${n&&"natours-gradient rounded px-3 py-3 text-white shadow-md"} `,children:"Account Settings"}),J.jsx(Es,{to:"my-bookings",end:!0,className:({isActive:n})=>`text-natours p-3 text-lg font-semibold ${n&&"natours-gradient rounded px-3 py-3 text-white shadow-md"} `,children:"My Bookings"})]}),J.jsx(k2,{})]})}function PL(){return J.jsx("div",{children:J.jsx("h1",{children:"my bookings"})})}const RL={tours:[],loading:!1,error:"",currentTour:{}};function IL(n,a){switch(a.type){case"loadTours":return{...n,tours:a.payload};case"loading":return{...n,loading:a.payload};case"error":return{...n,error:a.payload};case"setCurrentTour":return{...n,currentTour:a.payload};default:throw new Error(`Error occoured at action type:${a.type}`)}}const gM=oe.createContext();function DL({children:n}){const[{tours:a,loading:f,error:p,currentTour:_},S]=oe.useReducer(IL,RL);async function y(){try{S({type:"loading",payload:!0});const C=await hn.get("/api/v1/tours");S({type:"loadTours",payload:C.data.data.docs})}catch(C){S({type:"error",payload:C.response}),console.error(C)}finally{S({type:"loading",payload:!1})}}async function u(C){try{S({type:"loading",payload:!0});const R=await hn.get(`/api/v1/tours/tour/${C}`);S({type:"setCurrentTour",payload:R.data.data})}catch(R){console.log(R)}finally{S({type:"loading",payload:!1})}}return J.jsx(gM.Provider,{value:{tours:a,loading:f,error:p,getAllTours:y,getCurrentTour:u,currentTour:_},children:n})}function Au(){const n=oe.useContext(gM);if(n===void 0)throw new Error("Tour Context is used out side of the children");return n}var yM="basil",LL=function(a){return a===3?"v3":a},_M="https://js.stripe.com",zL="".concat(_M,"/").concat(yM,"/stripe.js"),kL=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,OL=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var BL=function(a){return kL.test(a)||OL.test(a)},jL=function(){for(var a=document.querySelectorAll('script[src^="'.concat(_M,'"]')),f=0;f<a.length;f++){var p=a[f];if(BL(p.src))return p}return null},d2=function(a){var f="",p=document.createElement("script");p.src="".concat(zL).concat(f);var _=document.head||document.body;if(!_)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return _.appendChild(p),p},NL=function(a,f){!a||!a._registerWrapper||a._registerWrapper({name:"stripe-js",version:"7.2.0",startTime:f})},mm=null,__=null,v_=null,FL=function(a){return function(f){a(new Error("Failed to load Stripe.js",{cause:f}))}},UL=function(a,f){return function(){window.Stripe?a(window.Stripe):f(new Error("Stripe.js not available"))}},VL=function(a){return mm!==null?mm:(mm=new Promise(function(f,p){if(typeof window>"u"||typeof document>"u"){f(null);return}if(window.Stripe){f(window.Stripe);return}try{var _=jL();if(!(_&&a)){if(!_)_=d2(a);else if(_&&v_!==null&&__!==null){var S;_.removeEventListener("load",v_),_.removeEventListener("error",__),(S=_.parentNode)===null||S===void 0||S.removeChild(_),_=d2(a)}}v_=UL(f,p),__=FL(p),_.addEventListener("load",v_),_.addEventListener("error",__)}catch(y){p(y);return}}),mm.catch(function(f){return mm=null,Promise.reject(f)}))},$L=function(a,f,p){if(a===null)return null;var _=f[0],S=_.match(/^pk_test/),y=LL(a.version),u=yM;S&&y!==u&&console.warn("Stripe.js@".concat(y," was loaded on the page, but @stripe/stripe-js@").concat("7.2.0"," expected Stripe.js@").concat(u,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var C=a.apply(void 0,f);return NL(C,p),C},gm,vM=!1,xM=function(){return gm||(gm=VL(null).catch(function(a){return gm=null,Promise.reject(a)}),gm)};Promise.resolve().then(function(){return xM()}).catch(function(n){vM||console.warn(n)});var ZL=function(){for(var a=arguments.length,f=new Array(a),p=0;p<a;p++)f[p]=arguments[p];vM=!0;var _=Date.now();return xM().then(function(S){return $L(S,f,_)})};const qL=ZL("pk_test_51RGC81EDUE7FyaOzVQA0GjPNpiAihbVqW82AGrsxvNfNlweKRobsfx9yme635KBhoFNyqkrYY8E34tcQ5gUrjd1C00AH5ZWBCT");function GL(){const{currentTour:n}=Au(),{isAuthenticated:a}=Cl(),[f,p]=oe.useState(!1),_=async()=>{if(!a)return Gr.error("You need to log in to book this tour!");try{p(!0);const S=await qL,y=await hn.get(`/api/v1/bookings/checkout-session/${n._id}`,{headers:{"X-Forwarded-Host":window.location.origin}});await S.redirectToCheckout({sessionId:y.data.session.id}),Gr.success("Purchase Completed")}catch(S){console.error(S),Gr.error("Something went wrong. Please try again later.")}finally{p(!1)}};return J.jsx("section",{className:"px-5 py-7 md:px-10 lg:px-20",children:J.jsx("div",{className:"relative flex flex-col justify-center overflow-hidden rounded-3xl bg-stone-300/20 py-10 shadow-lg",children:J.jsxs("div",{className:"flex flex-col items-center justify-evenly space-y-5 md:flex-row",children:[J.jsxs("div",{className:"flex flex-col items-center justify-baseline space-y-5 px-5 md:px-10",children:[J.jsx("h1",{className:"natours-gradient-text font-italic text-center text-2xl font-bold md:text-2xl lg:text-4xl",children:"What are you waiting for?"}),J.jsxs("p",{className:"text-center text-stone-800/50 italic",children:[J.jsxs("span",{className:"font-semibold text-stone-600",children:[n.duration," days. 1 adventure"]}),".",J.jsx("br",{}),"Infinite memories. Make it yours today! ",J.jsx("br",{}),!a&&J.jsx("span",{className:"text-red-400",children:"Login to book this tour"})]})]}),J.jsx("button",{className:"btn-primary min-w-[200px] px-4 py-2 lg:py-4",onClick:_,disabled:f,children:f?J.jsx(Io,{}):"Book Yours Now!"})]})})})}function HL(){const{currentTour:n}=Au();return J.jsx("section",{className:"flex flex-col lg:my-10 lg:flex-row",children:J.jsx("div",{className:"flex w-full flex-col lg:flex-row lg:overflow-auto",children:n.images.map((a,f)=>J.jsx("img",{src:`/img/tours/${a}`,alt:"tour Image 1",className:"mx-6 my-5 rounded object-cover shadow-xl md:mx-12 md:my-10 lg:mx-6 lg:my-8 lg:w-[40vw] lg:transition-all lg:hover:scale-105"},f))})})}function bM(n){return Ki({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M429.6 92.1c4.9-11.9 2.1-25.6-7-34.7s-22.8-11.9-34.7-7l-352 144c-14.2 5.8-22.2 20.8-19.3 35.8s16.1 25.8 31.4 25.8l176 0 0 176c0 15.3 10.8 28.4 25.8 31.4s30-5.1 35.8-19.3l144-352z"},child:[]}]})(n)}function WL(n){return Ki({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M16 144a144 144 0 1 1 288 0A144 144 0 1 1 16 144zM160 80c8.8 0 16-7.2 16-16s-7.2-16-16-16c-53 0-96 43-96 96c0 8.8 7.2 16 16 16s16-7.2 16-16c0-35.3 28.7-64 64-64zM128 480l0-162.9c10.4 1.9 21.1 2.9 32 2.9s21.6-1 32-2.9L192 480c0 17.7-14.3 32-32 32s-32-14.3-32-32z"},child:[]}]})(n)}function wM(n){return Ki({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M72 88a56 56 0 1 1 112 0A56 56 0 1 1 72 88zM64 245.7C54 256.9 48 271.8 48 288s6 31.1 16 42.3l0-84.7zm144.4-49.3C178.7 222.7 160 261.2 160 304c0 34.3 12 65.8 32 90.5l0 21.5c0 17.7-14.3 32-32 32l-64 0c-17.7 0-32-14.3-32-32l0-26.8C26.2 371.2 0 332.7 0 288c0-61.9 50.1-112 112-112l32 0c24 0 46.2 7.5 64.4 20.3zM448 416l0-21.5c20-24.7 32-56.2 32-90.5c0-42.8-18.7-81.3-48.4-107.7C449.8 183.5 472 176 496 176l32 0c61.9 0 112 50.1 112 112c0 44.7-26.2 83.2-64 101.2l0 26.8c0 17.7-14.3 32-32 32l-64 0c-17.7 0-32-14.3-32-32zm8-328a56 56 0 1 1 112 0A56 56 0 1 1 456 88zM576 245.7l0 84.7c10-11.3 16-26.1 16-42.3s-6-31.1-16-42.3zM320 32a64 64 0 1 1 0 128 64 64 0 1 1 0-128zM240 304c0 16.2 6 31 16 42.3l0-84.7c-10 11.3-16 26.1-16 42.3zm144-42.3l0 84.7c10-11.3 16-26.1 16-42.3s-6-31.1-16-42.3zM448 304c0 44.7-26.2 83.2-64 101.2l0 42.8c0 17.7-14.3 32-32 32l-64 0c-17.7 0-32-14.3-32-32l0-42.8c-37.8-18-64-56.5-64-101.2c0-61.9 50.1-112 112-112l32 0c61.9 0 112 50.1 112 112z"},child:[]}]})(n)}function KL(){const{currentTour:n}=Au();return J.jsxs("section",{className:"relative",children:[J.jsxs("div",{className:"relative z-2 md:h-[380px] lg:h-[470px]",children:[J.jsx("div",{className:"bg-natours/40 absolute h-full w-full"}),J.jsx("img",{src:`/img/tours/${n.imageCover}`,alt:"scenic image",className:"block h-full w-full object-cover"})]}),J.jsxs("div",{className:"absolute inset-0 z-4 flex flex-col items-center justify-center",children:[J.jsx("p",{children:J.jsx("span",{className:"natours-gradient-t px-3 py-2 text-3xl font-light text-white shadow-md lg:text-4xl",children:n.name})}),J.jsxs("div",{className:"flex gap-2 p-5 lg:gap-5",children:[J.jsxs("p",{className:"flex items-center gap-2 text-lg text-white",children:[J.jsx("span",{children:J.jsx(sL,{})}),n.duration," Days"]}),J.jsxs("p",{className:"flex items-center gap-2 text-lg text-white",children:[J.jsx("span",{children:J.jsx(bM,{})}),n.startLocation.description]})]})]})]})}function YL(){const{currentTour:n}=Au();return J.jsx("div",{className:"flex flex-col bg-stone-300/10 p-10 lg:h-full lg:w-1/2 lg:py-30",children:J.jsxs("div",{className:"flex flex-col justify-center space-y-4",children:[J.jsx("h1",{className:"natours-gradient-text font-italic text-center text-2xl font-bold lg:text-3xl",children:"Discover Your next adventure"}),n.description.split(`
`).map((a,f)=>J.jsx("p",{className:"text-center text-stone-800/50",children:a},f))]})})}function XL(){const{currentTour:n}=Au(),a=f=>f[0].toUpperCase()+f.slice(1).toLowerCase();return J.jsxs("div",{className:"my-4 items-center justify-center space-y-6",children:[J.jsx("h1",{className:"natours-gradient-text font-italic w-full text-center text-3xl font-bold lg:text-3xl",children:"Tour Facts"}),J.jsxs("div",{className:"flex items-center gap-2",children:[J.jsx(pM,{className:"text-natours size-7"}),J.jsxs("p",{className:"font-semibold text-stone-600",children:["Next Date",J.jsx("span",{className:"ml-3 font-medium text-stone-800/50",children:new Date(n.startDates[0]).toLocaleDateString("en-US",{month:"long",year:"numeric"})})]})]}),J.jsxs("div",{className:"flex items-center gap-2",children:[J.jsx(dL,{className:"text-natours size-7"}),J.jsxs("p",{className:"font-semibold text-stone-600",children:["Difficulty",J.jsx("span",{className:"ml-3 font-medium text-stone-800/50",children:a(n.difficulty)})]})]}),J.jsxs("div",{className:"flex items-center gap-2",children:[J.jsx(wM,{className:"text-natours size-7"}),J.jsxs("p",{className:"font-semibold text-stone-600",children:["Participants",J.jsx("span",{className:"ml-3 font-medium text-stone-800/50",children:n.maxGroupSize})]})]}),J.jsxs("div",{className:"flex items-center gap-2",children:[J.jsx(yL,{className:"text-natours size-7"}),J.jsxs("p",{className:"font-semibold text-stone-600",children:["Ratings",J.jsxs("span",{className:"ml-3 font-medium text-stone-800/50",children:[n.ratingsAverage," / 5"]})]})]})]})}function QL({photo:n,guideRole:a,guideName:f}){return J.jsxs("div",{className:"flex items-center gap-2",children:[J.jsx("img",{className:"text-natours size-10 rounded-full",src:n}),J.jsxs("p",{className:"font-semibold text-stone-600",children:[a,J.jsx("span",{className:"ml-3 font-medium text-stone-800/50",children:f})]})]})}function JL(){const{currentTour:n}=Au(),a=f=>{let p=f;return p==="guide"?p="Tour Guide":(p=p.split("-").map(_=>_[0].toUpperCase()+_.slice(1).toLowerCase()).join(" "),p)};return J.jsxs("div",{className:"my-4 items-center justify-center space-y-6",children:[J.jsx("h1",{className:"natours-gradient-text font-italic w-full text-center text-3xl font-bold lg:text-3xl",children:"Tour Guides"}),n.guides.length===0?J.jsx("h1",{className:"text-stone-600",children:"No guides are available at the moment."}):n.guides.map(f=>J.jsx(QL,{photo:`/img/users/${f.photo}`,guideName:f.name,guideRole:a(f.role)},f._id))]})}function ez(){return J.jsxs("section",{className:"flex flex-col items-center justify-center lg:min-h-[500px] lg:flex-row lg:items-start",children:[J.jsx(YL,{}),J.jsxs("div",{className:"flex w-full flex-col items-center justify-evenly gap-10 py-10 md:flex-row md:items-baseline lg:h-full lg:w-1/2 lg:flex-col lg:items-center lg:py-5",children:[J.jsx(XL,{}),J.jsx(JL,{})]})]})}var R_={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.4.0/LICENSE.txt
 */var tz=R_.exports,p2;function rz(){return p2||(p2=1,function(n,a){(function(f,p){n.exports=p()})(tz,function(){var f={},p={};function _(y,u,C){if(p[y]=C,y==="index"){var R="var sharedModule = {}; ("+p.shared+")(sharedModule); ("+p.worker+")(sharedModule);",O={};return p.shared(O),p.index(f,O),typeof window<"u"&&f.setWorkerUrl(window.URL.createObjectURL(new Blob([R],{type:"text/javascript"}))),f}}_("shared",["exports"],function(y){function u(s,t,o,c){return new(o||(o=Promise))(function(g,w){function T(k){try{I(c.next(k))}catch(N){w(N)}}function A(k){try{I(c.throw(k))}catch(N){w(N)}}function I(k){var N;k.done?g(k.value):(N=k.value,N instanceof o?N:new o(function(V){V(N)})).then(T,A)}I((c=c.apply(s,t||[])).next())})}function C(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var R,O;function B(){if(O)return R;function s(t,o){this.x=t,this.y=o}return O=1,R=s,s.prototype={clone:function(){return new s(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,o){return this.clone()._rotateAround(t,o)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var o=t.x-this.x,c=t.y-this.y;return o*o+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,o){return Math.atan2(this.x*o-this.y*t,this.x*t+this.y*o)},_matMult:function(t){var o=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=o,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var o=Math.cos(t),c=Math.sin(t),g=c*this.x+o*this.y;return this.x=o*this.x-c*this.y,this.y=g,this},_rotateAround:function(t,o){var c=Math.cos(t),g=Math.sin(t),w=o.y+g*(this.x-o.x)+c*(this.y-o.y);return this.x=o.x+c*(this.x-o.x)-g*(this.y-o.y),this.y=w,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},s.convert=function(t){return t instanceof s?t:Array.isArray(t)?new s(t[0],t[1]):t},R}typeof SuppressedError=="function"&&SuppressedError;var z,F,G=C(B()),te=function(){if(F)return z;function s(t,o,c,g){this.cx=3*t,this.bx=3*(c-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(g-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=o,this.p2x=c,this.p2y=g}return F=1,z=s,s.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,o){if(o===void 0&&(o=1e-6),t<0)return 0;if(t>1)return 1;for(var c=t,g=0;g<8;g++){var w=this.sampleCurveX(c)-t;if(Math.abs(w)<o)return c;var T=this.sampleCurveDerivativeX(c);if(Math.abs(T)<1e-6)break;c-=w/T}var A=0,I=1;for(c=t,g=0;g<20&&(w=this.sampleCurveX(c),!(Math.abs(w-t)<o));g++)t>w?A=c:I=c,c=.5*(I-A)+A;return c},solve:function(t,o){return this.sampleCurveY(this.solveCurveX(t,o))}},z}(),K=C(te);let X,ye;function pe(){return X==null&&(X=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),X}function xe(){if(ye==null&&(ye=!1,pe())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let c=0;c<5*5;c++){const g=4*c;t.fillStyle=`rgb(${g},${g+1},${g+2})`,t.fillRect(c%5,Math.floor(c/5),1,1)}const o=t.getImageData(0,0,5,5).data;for(let c=0;c<5*5*4;c++)if(c%4!=3&&o[c]!==c){ye=!0;break}}}return ye||!1}var Se=1e-6,ke=typeof Float32Array<"u"?Float32Array:Array;function it(){var s=new ke(9);return ke!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function Ke(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Ye(){var s=new ke(3);return ke!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function ht(s){return Math.hypot(s[0],s[1],s[2])}function Lt(s,t,o){var c=new ke(3);return c[0]=s,c[1]=t,c[2]=o,c}Math.hypot||(Math.hypot=function(){for(var s=0,t=arguments.length;t--;)s+=arguments[t]*arguments[t];return Math.sqrt(s)});var sr,nr=ht;function Xt(s,t,o){var c=t[0],g=t[1],w=t[2],T=t[3];return s[0]=o[0]*c+o[4]*g+o[8]*w+o[12]*T,s[1]=o[1]*c+o[5]*g+o[9]*w+o[13]*T,s[2]=o[2]*c+o[6]*g+o[10]*w+o[14]*T,s[3]=o[3]*c+o[7]*g+o[11]*w+o[15]*T,s}function or(){var s=new ke(4);return ke!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function Ct(){var s=new ke(2);return ke!=Float32Array&&(s[0]=0,s[1]=0),s}function Nt(s,t){var o=new ke(2);return o[0]=s,o[1]=t,o}Ye(),sr=new ke(4),ke!=Float32Array&&(sr[0]=0,sr[1]=0,sr[2]=0,sr[3]=0),Ye(),Lt(1,0,0),Lt(0,1,0),or(),or(),it(),Ct();const Rt=8192;function fr(s,t,o){return t*(Rt/(s.tileSize*Math.pow(2,o-s.tileID.overscaledZ)))}function De(s,t){return(s%t+t)%t}function wt(s,t,o){return s*(1-o)+t*o}function Zt(s){if(s<=0)return 0;if(s>=1)return 1;const t=s*s,o=t*s;return 4*(s<.5?o:3*(s-t)+o-.75)}function Ht(s,t,o,c){const g=new K(s,t,o,c);return w=>g.solve(w)}const zt=Ht(.25,.1,.25,1);function er(s,t,o){return Math.min(o,Math.max(t,s))}function ir(s,t,o){const c=o-t,g=((s-t)%c+c)%c+t;return g===t?o:g}function Qr(s,...t){for(const o of t)for(const c in o)s[c]=o[c];return s}let br=1;function en(s,t,o){const c={};for(const g in s)c[g]=t.call(this,s[g],g,s);return c}function Fr(s,t,o){const c={};for(const g in s)t.call(this,s[g],g,s)&&(c[g]=s[g]);return c}function ln(s){return Array.isArray(s)?s.map(ln):typeof s=="object"&&s?en(s,ln):s}const Ln={};function Dr(s){Ln[s]||(typeof console<"u"&&console.warn(s),Ln[s]=!0)}function pr(s,t,o){return(o.y-s.y)*(t.x-s.x)>(t.y-s.y)*(o.x-s.x)}function Kn(s){return typeof WorkerGlobalScope<"u"&&s!==void 0&&s instanceof WorkerGlobalScope}let Un=null;function Yn(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const we="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Re(s,t,o,c,g){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const w=new VideoFrame(s,{timestamp:0});try{const T=w==null?void 0:w.format;if(!T||!T.startsWith("BGR")&&!T.startsWith("RGB"))throw new Error(`Unrecognized format ${T}`);const A=T.startsWith("BGR"),I=new Uint8ClampedArray(c*g*4);if(yield w.copyTo(I,function(k,N,V,q,Y){const Q=4*Math.max(1,0),ne=(Math.max(0,V)-V)*q*4+Q,ce=4*q,ge=Math.max(0,N),Le=Math.max(0,V);return{rect:{x:ge,y:Le,width:Math.min(k.width,N+q)-ge,height:Math.min(k.height,V+Y)-Le},layout:[{offset:ne,stride:ce}]}}(s,t,o,c,g)),A)for(let k=0;k<I.length;k+=4){const N=I[k];I[k]=I[k+2],I[k+2]=N}return I}finally{w.close()}})}let We,vt;function xt(s,t,o,c){return s.addEventListener(t,o,c),{unsubscribe:()=>{s.removeEventListener(t,o,c)}}}function Et(s){return s/Math.PI*180}const Ut={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},ur={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},_r="AbortError";function Zr(){return new Error(_r)}const Rn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Vn(s){return Rn.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}const zn="global-dispatcher";class Pi extends Error{constructor(t,o,c,g){super(`AJAXError: ${o} (${t}): ${c}`),this.status=t,this.statusText=o,this.url=c,this.body=g}}const Ri=()=>Kn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,nn=function(s,t){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){const c=Vn(s.url);if(c)return c(s,t);if(Kn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:zn},t)}if(!(/^file:/.test(o=s.url)||/^file:/.test(Ri())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(c,g){return u(this,void 0,void 0,function*(){const w=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,cache:c.cache,referrer:Ri(),signal:g.signal});let T,A;c.type!=="json"||w.headers.has("Accept")||w.headers.set("Accept","application/json");try{T=yield fetch(w)}catch(k){throw new Pi(0,k.message,c.url,new Blob)}if(!T.ok){const k=yield T.blob();throw new Pi(T.status,T.statusText,c.url,k)}A=c.type==="arrayBuffer"||c.type==="image"?T.arrayBuffer():c.type==="json"?T.json():T.text();const I=yield A;if(g.signal.aborted)throw Zr();return{data:I,cacheControl:T.headers.get("Cache-Control"),expires:T.headers.get("Expires")}})}(s,t);if(Kn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:zn},t)}var o;return function(c,g){return new Promise((w,T)=>{var A;const I=new XMLHttpRequest;I.open(c.method||"GET",c.url,!0),c.type!=="arrayBuffer"&&c.type!=="image"||(I.responseType="arraybuffer");for(const k in c.headers)I.setRequestHeader(k,c.headers[k]);c.type==="json"&&(I.responseType="text",!((A=c.headers)===null||A===void 0)&&A.Accept||I.setRequestHeader("Accept","application/json")),I.withCredentials=c.credentials==="include",I.onerror=()=>{T(new Error(I.statusText))},I.onload=()=>{if(!g.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let k=I.response;if(c.type==="json")try{k=JSON.parse(I.response)}catch(N){return void T(N)}w({data:k,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{const k=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});T(new Pi(I.status,I.statusText,c.url,k))}},g.signal.addEventListener("abort",()=>{I.abort(),T(Zr())}),I.send(c.body)})}(s,t)};function tn(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const t=new URL(s),o=window.location;return t.protocol===o.protocol&&t.host===o.host}function je(s,t,o){o[s]&&o[s].indexOf(t)!==-1||(o[s]=o[s]||[],o[s].push(t))}function ie(s,t,o){if(o&&o[s]){const c=o[s].indexOf(t);c!==-1&&o[s].splice(c,1)}}class ae{constructor(t,o={}){Qr(this,o),this.type=t}}class he extends ae{constructor(t,o={}){super("error",Qr({error:t},o))}}class be{on(t,o){return this._listeners=this._listeners||{},je(t,o,this._listeners),{unsubscribe:()=>{this.off(t,o)}}}off(t,o){return ie(t,o,this._listeners),ie(t,o,this._oneTimeListeners),this}once(t,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},je(t,o,this._oneTimeListeners),this):new Promise(c=>this.once(t,c))}fire(t,o){typeof t=="string"&&(t=new ae(t,o||{}));const c=t.type;if(this.listens(c)){t.target=this;const g=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];for(const A of g)A.call(this,t);const w=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];for(const A of w)ie(c,A,this._oneTimeListeners),A.call(this,t);const T=this._eventedParent;T&&(Qr(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(t))}else t instanceof he&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,o){return this._eventedParent=t,this._eventedParentData=o,this}}var se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Oe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ve(s,t){const o={};for(const c in s)c!=="ref"&&(o[c]=s[c]);return Oe.forEach(c=>{c in t&&(o[c]=t[c])}),o}function Ce(s,t){if(Array.isArray(s)){if(!Array.isArray(t)||s.length!==t.length)return!1;for(let o=0;o<s.length;o++)if(!Ce(s[o],t[o]))return!1;return!0}if(typeof s=="object"&&s!==null&&t!==null){if(typeof t!="object"||Object.keys(s).length!==Object.keys(t).length)return!1;for(const o in s)if(!Ce(s[o],t[o]))return!1;return!0}return s===t}function Ue(s,t){s.push(t)}function qe(s,t,o){Ue(o,{command:"addSource",args:[s,t[s]]})}function Fe(s,t,o){Ue(t,{command:"removeSource",args:[s]}),o[s]=!0}function ft(s,t,o,c){Fe(s,o,c),qe(s,t,o)}function Pt(s,t,o){let c;for(c in s[o])if(Object.prototype.hasOwnProperty.call(s[o],c)&&c!=="data"&&!Ce(s[o][c],t[o][c]))return!1;for(c in t[o])if(Object.prototype.hasOwnProperty.call(t[o],c)&&c!=="data"&&!Ce(s[o][c],t[o][c]))return!1;return!0}function At(s,t,o,c,g,w){s=s||{},t=t||{};for(const T in s)Object.prototype.hasOwnProperty.call(s,T)&&(Ce(s[T],t[T])||o.push({command:w,args:[c,T,t[T],g]}));for(const T in t)Object.prototype.hasOwnProperty.call(t,T)&&!Object.prototype.hasOwnProperty.call(s,T)&&(Ce(s[T],t[T])||o.push({command:w,args:[c,T,t[T],g]}))}function Ft(s){return s.id}function lr(s,t){return s[t.id]=t,s}class Je{constructor(t,o,c,g){this.message=(t?`${t}: `:"")+c,g&&(this.identifier=g),o!=null&&o.__line__&&(this.line=o.__line__)}}function Wt(s,...t){for(const o of t)for(const c in o)s[c]=o[c];return s}class vr extends Error{constructor(t,o){super(o),this.message=o,this.key=t}}class Ur{constructor(t,o=[]){this.parent=t,this.bindings={};for(const[c,g]of o)this.bindings[c]=g}concat(t){return new Ur(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const Cr={kind:"null"},tt={kind:"number"},yt={kind:"string"},kt={kind:"boolean"},Hr={kind:"color"},$n={kind:"projectionDefinition"},sn={kind:"object"},ar={kind:"value"},Va={kind:"collator"},yi={kind:"formatted"},$a={kind:"padding"},Zn={kind:"resolvedImage"},sa={kind:"variableAnchorOffsetCollection"};function wn(s,t){return{kind:"array",itemType:s,N:t}}function Pr(s){if(s.kind==="array"){const t=Pr(s.itemType);return typeof s.N=="number"?`array<${t}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${t}>`}return s.kind}const ut=[Cr,tt,yt,kt,Hr,$n,yi,sn,wn(ar),$a,Zn,sa];function Js(s,t){if(t.kind==="error")return null;if(s.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Js(s.itemType,t.itemType))&&(typeof s.N!="number"||s.N===t.N))return null}else{if(s.kind===t.kind)return null;if(s.kind==="value"){for(const o of ut)if(!Js(o,t))return null}}return`Expected ${Pr(s)} but found ${Pr(t)} instead.`}function Lo(s,t){return t.some(o=>o.kind===s.kind)}function wr(s,t){return t.some(o=>o==="null"?s===null:o==="array"?Array.isArray(s):o==="object"?s&&!Array.isArray(s)&&typeof s=="object":o===typeof s)}function kn(s,t){return s.kind==="array"&&t.kind==="array"?s.itemType.kind===t.itemType.kind&&typeof s.N=="number":s.kind===t.kind}const _i=.96422,Rs=.82521,eo=4/29,oa=6/29,to=3*oa*oa,wc=oa*oa*oa,Sc=Math.PI/180,Is=180/Math.PI;function fa(s){return(s%=360)<0&&(s+=360),s}function Ih([s,t,o,c]){let g,w;const T=El((.2225045*(s=Dh(s))+.7168786*(t=Dh(t))+.0606169*(o=Dh(o)))/1);s===t&&t===o?g=w=T:(g=El((.4360747*s+.3850649*t+.1430804*o)/_i),w=El((.0139322*s+.0971045*t+.7141733*o)/Rs));const A=116*T-16;return[A<0?0:A,500*(g-T),200*(T-w),c]}function Dh(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function El(s){return s>wc?Math.pow(s,1/3):s/to+eo}function Tc([s,t,o,c]){let g=(s+16)/116,w=isNaN(t)?g:g+t/500,T=isNaN(o)?g:g-o/200;return g=1*Lh(g),w=_i*Lh(w),T=Rs*Lh(T),[ds(3.1338561*w-1.6168667*g-.4906146*T),ds(-.9787684*w+1.9161415*g+.033454*T),ds(.0719453*w-.2289914*g+1.4052427*T),c]}function ds(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Lh(s){return s>oa?s*s*s:to*(s-eo)}function Yi(s){return parseInt(s.padEnd(2,s),16)/255}function ro(s,t){return zo(t?s/100:s,0,1)}function zo(s,t,o){return Math.min(Math.max(t,s),o)}function Mc(s){return!s.some(Number.isNaN)}const Pl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ps(s,t,o){return s+o*(t-s)}function ko(s,t,o){return s.map((c,g)=>ps(c,t[g],o))}class cr{constructor(t,o,c,g=1,w=!0){this.r=t,this.g=o,this.b=c,this.a=g,w||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[t,o,c,g]))}static parse(t){if(t instanceof cr)return t;if(typeof t!="string")return;const o=function(c){if((c=c.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=Pl[c];if(g){const[T,A,I]=g;return[T/255,A/255,I/255,1]}if(c.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(c)){const T=c.length<6?1:2;let A=1;return[Yi(c.slice(A,A+=T)),Yi(c.slice(A,A+=T)),Yi(c.slice(A,A+=T)),Yi(c.slice(A,A+T)||"ff")]}if(c.startsWith("rgb")){const T=c.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[A,I,k,N,V,q,Y,Q,ne,ce,ge,Le]=T,ve=[N||" ",Y||" ",ce].join("");if(ve==="  "||ve==="  /"||ve===",,"||ve===",,,"){const H=[k,q,ne].join(""),le=H==="%%%"?100:H===""?255:0;if(le){const Te=[zo(+I/le,0,1),zo(+V/le,0,1),zo(+Q/le,0,1),ge?ro(+ge,Le):1];if(Mc(Te))return Te}}return}}const w=c.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[T,A,I,k,N,V,q,Y,Q]=w,ne=[I||" ",N||" ",q].join("");if(ne==="  "||ne==="  /"||ne===",,"||ne===",,,"){const ce=[+A,zo(+k,0,100),zo(+V,0,100),Y?ro(+Y,Q):1];if(Mc(ce))return function([ge,Le,ve,H]){function le(Te){const Ge=(Te+ge/30)%12,mt=Le*Math.min(ve,1-ve);return ve-mt*Math.max(-1,Math.min(Ge-3,9-Ge,1))}return ge=fa(ge),Le/=100,ve/=100,[le(0),le(8),le(4),H]}(ce)}}}(t);return o?new cr(...o,!1):void 0}get rgb(){const{r:t,g:o,b:c,a:g}=this,w=g||1/0;return this.overwriteGetter("rgb",[t/w,o/w,c/w,g])}get hcl(){return this.overwriteGetter("hcl",function(t){const[o,c,g,w]=Ih(t),T=Math.sqrt(c*c+g*g);return[Math.round(1e4*T)?fa(Math.atan2(g,c)*Is):NaN,T,o,w]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ih(this.rgb))}overwriteGetter(t,o){return Object.defineProperty(this,t,{value:o}),o}toString(){const[t,o,c,g]=this.rgb;return`rgba(${[t,o,c].map(w=>Math.round(255*w)).join(",")},${g})`}static interpolate(t,o,c,g="rgb"){switch(g){case"rgb":{const[w,T,A,I]=ko(t.rgb,o.rgb,c);return new cr(w,T,A,I,!1)}case"hcl":{const[w,T,A,I]=t.hcl,[k,N,V,q]=o.hcl;let Y,Q;if(isNaN(w)||isNaN(k))isNaN(w)?isNaN(k)?Y=NaN:(Y=k,A!==1&&A!==0||(Q=N)):(Y=w,V!==1&&V!==0||(Q=T));else{let ve=k-w;k>w&&ve>180?ve-=360:k<w&&w-k>180&&(ve+=360),Y=w+c*ve}const[ne,ce,ge,Le]=function([ve,H,le,Te]){return ve=isNaN(ve)?0:ve*Sc,Tc([le,Math.cos(ve)*H,Math.sin(ve)*H,Te])}([Y,Q??ps(T,N,c),ps(A,V,c),ps(I,q,c)]);return new cr(ne,ce,ge,Le,!1)}case"lab":{const[w,T,A,I]=Tc(ko(t.lab,o.lab,c));return new cr(w,T,A,I,!1)}}}}cr.black=new cr(0,0,0,1),cr.white=new cr(1,1,1,1),cr.transparent=new cr(0,0,0,0),cr.red=new cr(1,0,0,1);class Or{constructor(t,o,c){this.sensitivity=t?o?"variant":"case":o?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,o){return this.collator.compare(t,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Oo=["bottom","center","top"];class Za{constructor(t,o,c,g,w,T){this.text=t,this.image=o,this.scale=c,this.fontStack=g,this.textColor=w,this.verticalAlign=T}}class Bi{constructor(t){this.sections=t}static fromString(t){return new Bi([new Za(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof Bi?t:Bi.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class ji{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof ji)return t;if(typeof t=="number")return new ji([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const o of t)if(typeof o!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new ji(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,o,c){return new ji(ko(t.values,o.values,c))}}class On{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const no=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ui{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof ui)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let o=0;o<t.length;o+=2){const c=t[o],g=t[o+1];if(typeof c!="string"||!no.has(c)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new ui(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,o,c){const g=t.values,w=o.values;if(g.length!==w.length)throw new On(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${o.toString()}`);const T=[];for(let A=0;A<g.length;A+=2){if(g[A]!==w[A])throw new On(`Cannot interpolate values containing mismatched anchors. from[${A}]: ${g[A]}, to[${A}]: ${w[A]}`);T.push(g[A]);const[I,k]=g[A+1],[N,V]=w[A+1];T.push([ps(I,N,c),ps(k,V,c)])}return new ui(T)}}class Xi{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Xi({name:t,available:!1}):null}}class ei{constructor(t,o,c){this.from=t,this.to=o,this.transition=c}static interpolate(t,o,c){return new ei(t,o,c)}static parse(t){return t instanceof ei?t:Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number"?new ei(t[0],t[1],t[2]):typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number"?new ei(t.from,t.to,t.transition):typeof t=="string"?new ei(t,t,1):void 0}}function da(s,t,o,c){return typeof s=="number"&&s>=0&&s<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof o=="number"&&o>=0&&o<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:`Invalid rgba value [${[s,t,o,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof c=="number"?[s,t,o,c]:[s,t,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Rl(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof ei||s instanceof cr||s instanceof Or||s instanceof Bi||s instanceof ji||s instanceof ui||s instanceof Xi)return!0;if(Array.isArray(s)){for(const t of s)if(!Rl(t))return!1;return!0}if(typeof s=="object"){for(const t in s)if(!Rl(s[t]))return!1;return!0}return!1}function Sn(s){if(s===null)return Cr;if(typeof s=="string")return yt;if(typeof s=="boolean")return kt;if(typeof s=="number")return tt;if(s instanceof cr)return Hr;if(s instanceof ei)return $n;if(s instanceof Or)return Va;if(s instanceof Bi)return yi;if(s instanceof ji)return $a;if(s instanceof ui)return sa;if(s instanceof Xi)return Zn;if(Array.isArray(s)){const t=s.length;let o;for(const c of s){const g=Sn(c);if(o){if(o===g)continue;o=ar;break}o=g}return wn(o||ar,t)}return sn}function qa(s){const t=typeof s;return s===null?"":t==="string"||t==="number"||t==="boolean"?String(s):s instanceof cr||s instanceof ei||s instanceof Bi||s instanceof ji||s instanceof ui||s instanceof Xi?s.toString():JSON.stringify(s)}class ba{constructor(t,o){this.type=t,this.value=o}static parse(t,o){if(t.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Rl(t[1]))return o.error("invalid value");const c=t[1];let g=Sn(c);const w=o.expectedType;return g.kind!=="array"||g.N!==0||!w||w.kind!=="array"||typeof w.N=="number"&&w.N!==0||(g=w),new ba(g,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Bo={string:yt,number:tt,boolean:kt,object:sn};class Ni{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");let c,g=1;const w=t[0];if(w==="array"){let A,I;if(t.length>2){const k=t[1];if(typeof k!="string"||!(k in Bo)||k==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);A=Bo[k],g++}else A=ar;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return o.error('The length argument to "array" must be a positive integer literal',2);I=t[2],g++}c=wn(A,I)}else{if(!Bo[w])throw new Error(`Types doesn't contain name = ${w}`);c=Bo[w]}const T=[];for(;g<t.length;g++){const A=o.parse(t[g],g,ar);if(!A)return null;T.push(A)}return new Ni(c,T)}evaluate(t){for(let o=0;o<this.args.length;o++){const c=this.args[o].evaluate(t);if(!Js(this.type,Sn(c)))return c;if(o===this.args.length-1)throw new On(`Expected value to be of type ${Pr(this.type)}, but found ${Pr(Sn(c))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const wa={"to-boolean":kt,"to-color":Hr,"to-number":tt,"to-string":yt};class Wr{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const c=t[0];if(!wa[c])throw new Error(`Can't parse ${c} as it is not part of the known types`);if((c==="to-boolean"||c==="to-string")&&t.length!==2)return o.error("Expected one argument.");const g=wa[c],w=[];for(let T=1;T<t.length;T++){const A=o.parse(t[T],T,ar);if(!A)return null;w.push(A)}return new Wr(g,w)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let o,c;for(const g of this.args){if(o=g.evaluate(t),c=null,o instanceof cr)return o;if(typeof o=="string"){const w=t.parseColor(o);if(w)return w}else if(Array.isArray(o)&&(c=o.length<3||o.length>4?`Invalid rgba value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:da(o[0],o[1],o[2],o[3]),!c))return new cr(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new On(c||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"padding":{let o;for(const c of this.args){o=c.evaluate(t);const g=ji.parse(o);if(g)return g}throw new On(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"variableAnchorOffsetCollection":{let o;for(const c of this.args){o=c.evaluate(t);const g=ui.parse(o);if(g)return g}throw new On(`Could not parse variableAnchorOffsetCollection from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"number":{let o=null;for(const c of this.args){if(o=c.evaluate(t),o===null)return 0;const g=Number(o);if(!isNaN(g))return g}throw new On(`Could not convert ${JSON.stringify(o)} to number.`)}case"formatted":return Bi.fromString(qa(this.args[0].evaluate(t)));case"resolvedImage":return Xi.fromString(qa(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return qa(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Il=["Unknown","Point","LineString","Polygon"];class Vr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Il[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let o=this._parseColorCache[t];return o||(o=this._parseColorCache[t]=cr.parse(t)),o}}class hr{constructor(t,o,c=[],g,w=new Ur,T=[]){this.registry=t,this.path=c,this.key=c.map(A=>`[${A}]`).join(""),this.scope=w,this.errors=T,this.expectedType=g,this._isConstant=o}parse(t,o,c,g,w={}){return o?this.concat(o,c,g)._parse(t,w):this._parse(t,w)}_parse(t,o){function c(g,w,T){return T==="assert"?new Ni(w,[g]):T==="coerce"?new Wr(w,[g]):g}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=t[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const w=this.registry[g];if(w){let T=w.parse(t,this);if(!T)return null;if(this.expectedType){const A=this.expectedType,I=T.type;if(A.kind!=="string"&&A.kind!=="number"&&A.kind!=="boolean"&&A.kind!=="object"&&A.kind!=="array"||I.kind!=="value")if(A.kind!=="projectionDefinition"||I.kind!=="string"&&I.kind!=="array")if(A.kind!=="color"&&A.kind!=="formatted"&&A.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string")if(A.kind!=="padding"||I.kind!=="value"&&I.kind!=="number"&&I.kind!=="array")if(A.kind!=="variableAnchorOffsetCollection"||I.kind!=="value"&&I.kind!=="array"){if(this.checkSubtype(A,I))return null}else T=c(T,A,o.typeAnnotation||"coerce");else T=c(T,A,o.typeAnnotation||"coerce");else T=c(T,A,o.typeAnnotation||"coerce");else T=c(T,A,o.typeAnnotation||"coerce");else T=c(T,A,o.typeAnnotation||"assert")}if(!(T instanceof ba)&&T.type.kind!=="resolvedImage"&&this._isConstant(T)){const A=new Vr;try{T=new ba(T.type,T.evaluate(A))}catch(I){return this.error(I.message),null}}return T}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,o,c){const g=typeof t=="number"?this.path.concat(t):this.path,w=c?this.scope.concat(c):this.scope;return new hr(this.registry,this._isConstant,g,o||null,w,this.errors)}error(t,...o){const c=`${this.key}${o.map(g=>`[${g}]`).join("")}`;this.errors.push(new vr(c,t))}checkSubtype(t,o){const c=Js(t,o);return c&&this.error(c),c}}class Ds{constructor(t,o){this.type=o.type,this.bindings=[].concat(t),this.result=o}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const o of this.bindings)t(o[1]);t(this.result)}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const c=[];for(let w=1;w<t.length-1;w+=2){const T=t[w];if(typeof T!="string")return o.error(`Expected string, but found ${typeof T} instead.`,w);if(/[^a-zA-Z0-9_]/.test(T))return o.error("Variable names must contain only alphanumeric characters or '_'.",w);const A=o.parse(t[w+1],w+1);if(!A)return null;c.push([T,A])}const g=o.parse(t[t.length-1],t.length-1,o.expectedType,c);return g?new Ds(c,g):null}outputDefined(){return this.result.outputDefined()}}class Lr{constructor(t,o){this.type=o.type,this.name=t,this.boundExpression=o}static parse(t,o){if(t.length!==2||typeof t[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const c=t[1];return o.scope.has(c)?new Lr(c,o.scope.get(c)):o.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class vi{constructor(t,o,c){this.type=t,this.index=o,this.input=c}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,tt),g=o.parse(t[2],2,wn(o.expectedType||ar));return c&&g?new vi(g.type.itemType,c,g):null}evaluate(t){const o=this.index.evaluate(t),c=this.input.evaluate(t);if(o<0)throw new On(`Array index out of bounds: ${o} < 0.`);if(o>=c.length)throw new On(`Array index out of bounds: ${o} > ${c.length-1}.`);if(o!==Math.floor(o))throw new On(`Array index must be an integer, but found ${o} instead.`);return c[o]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class Ii{constructor(t,o){this.type=kt,this.needle=t,this.haystack=o}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,ar),g=o.parse(t[2],2,ar);return c&&g?Lo(c.type,[kt,yt,tt,Cr,ar])?new Ii(c,g):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Pr(c.type)} instead`):null}evaluate(t){const o=this.needle.evaluate(t),c=this.haystack.evaluate(t);if(!c)return!1;if(!wr(o,["boolean","string","number","null"]))throw new On(`Expected first argument to be of type boolean, string, number or null, but found ${Pr(Sn(o))} instead.`);if(!wr(c,["string","array"]))throw new On(`Expected second argument to be of type array or string, but found ${Pr(Sn(c))} instead.`);return c.indexOf(o)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class Ls{constructor(t,o,c){this.type=tt,this.needle=t,this.haystack=o,this.fromIndex=c}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,ar),g=o.parse(t[2],2,ar);if(!c||!g)return null;if(!Lo(c.type,[kt,yt,tt,Cr,ar]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Pr(c.type)} instead`);if(t.length===4){const w=o.parse(t[3],3,tt);return w?new Ls(c,g,w):null}return new Ls(c,g)}evaluate(t){const o=this.needle.evaluate(t),c=this.haystack.evaluate(t);if(!wr(o,["boolean","string","number","null"]))throw new On(`Expected first argument to be of type boolean, string, number or null, but found ${Pr(Sn(o))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(t)),wr(c,["string"])){const w=c.indexOf(o,g);return w===-1?-1:[...c.slice(0,w)].length}if(wr(c,["array"]))return c.indexOf(o,g);throw new On(`Expected second argument to be of type array or string, but found ${Pr(Sn(c))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class io{constructor(t,o,c,g,w,T){this.inputType=t,this.type=o,this.input=c,this.cases=g,this.outputs=w,this.otherwise=T}static parse(t,o){if(t.length<5)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return o.error("Expected an even number of arguments.");let c,g;o.expectedType&&o.expectedType.kind!=="value"&&(g=o.expectedType);const w={},T=[];for(let k=2;k<t.length-1;k+=2){let N=t[k];const V=t[k+1];Array.isArray(N)||(N=[N]);const q=o.concat(k);if(N.length===0)return q.error("Expected at least one branch label.");for(const Q of N){if(typeof Q!="number"&&typeof Q!="string")return q.error("Branch labels must be numbers or strings.");if(typeof Q=="number"&&Math.abs(Q)>Number.MAX_SAFE_INTEGER)return q.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Q=="number"&&Math.floor(Q)!==Q)return q.error("Numeric branch labels must be integer values.");if(c){if(q.checkSubtype(c,Sn(Q)))return null}else c=Sn(Q);if(w[String(Q)]!==void 0)return q.error("Branch labels must be unique.");w[String(Q)]=T.length}const Y=o.parse(V,k,g);if(!Y)return null;g=g||Y.type,T.push(Y)}const A=o.parse(t[1],1,ar);if(!A)return null;const I=o.parse(t[t.length-1],t.length-1,g);return I?A.type.kind!=="value"&&o.concat(1).checkSubtype(c,A.type)?null:new io(c,g,A,w,T,I):null}evaluate(t){const o=this.input.evaluate(t);return(Sn(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class Ac{constructor(t,o,c){this.type=t,this.branches=o,this.otherwise=c}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return o.error("Expected an odd number of arguments.");let c;o.expectedType&&o.expectedType.kind!=="value"&&(c=o.expectedType);const g=[];for(let T=1;T<t.length-1;T+=2){const A=o.parse(t[T],T,kt);if(!A)return null;const I=o.parse(t[T+1],T+1,c);if(!I)return null;g.push([A,I]),c=c||I.type}const w=o.parse(t[t.length-1],t.length-1,c);if(!w)return null;if(!c)throw new Error("Can't infer output type");return new Ac(c,g,w)}evaluate(t){for(const[o,c]of this.branches)if(o.evaluate(t))return c.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[o,c]of this.branches)t(o),t(c);t(this.otherwise)}outputDefined(){return this.branches.every(([t,o])=>o.outputDefined())&&this.otherwise.outputDefined()}}class ao{constructor(t,o,c,g){this.type=t,this.input=o,this.beginIndex=c,this.endIndex=g}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,ar),g=o.parse(t[2],2,tt);if(!c||!g)return null;if(!Lo(c.type,[wn(ar),yt,ar]))return o.error(`Expected first argument to be of type array or string, but found ${Pr(c.type)} instead`);if(t.length===4){const w=o.parse(t[3],3,tt);return w?new ao(c.type,c,g,w):null}return new ao(c.type,c,g)}evaluate(t){const o=this.input.evaluate(t),c=this.beginIndex.evaluate(t);let g;if(this.endIndex&&(g=this.endIndex.evaluate(t)),wr(o,["string"]))return[...o].slice(c,g).join("");if(wr(o,["array"]))return o.slice(c,g);throw new On(`Expected first argument to be of type array or string, but found ${Pr(Sn(o))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function jo(s,t){const o=s.length-1;let c,g,w=0,T=o,A=0;for(;w<=T;)if(A=Math.floor((w+T)/2),c=s[A],g=s[A+1],c<=t){if(A===o||t<g)return A;w=A+1}else{if(!(c>t))throw new On("Input is not a number.");T=A-1}return 0}class zs{constructor(t,o,c){this.type=t,this.input=o,this.labels=[],this.outputs=[];for(const[g,w]of c)this.labels.push(g),this.outputs.push(w)}static parse(t,o){if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");const c=o.parse(t[1],1,tt);if(!c)return null;const g=[];let w=null;o.expectedType&&o.expectedType.kind!=="value"&&(w=o.expectedType);for(let T=1;T<t.length;T+=2){const A=T===1?-1/0:t[T],I=t[T+1],k=T,N=T+1;if(typeof A!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(g.length&&g[g.length-1][0]>=A)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const V=o.parse(I,N,w);if(!V)return null;w=w||V.type,g.push([A,V])}return new zs(w,c,g)}evaluate(t){const o=this.labels,c=this.outputs;if(o.length===1)return c[0].evaluate(t);const g=this.input.evaluate(t);if(g<=o[0])return c[0].evaluate(t);const w=o.length;return g>=o[w-1]?c[w-1].evaluate(t):c[jo(o,g)].evaluate(t)}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Cu(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Eu,Dl,Fi=function(){if(Dl)return Eu;function s(t,o,c,g){this.cx=3*t,this.bx=3*(c-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(g-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=o,this.p2x=c,this.p2y=g}return Dl=1,Eu=s,s.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,o){if(o===void 0&&(o=1e-6),t<0)return 0;if(t>1)return 1;for(var c=t,g=0;g<8;g++){var w=this.sampleCurveX(c)-t;if(Math.abs(w)<o)return c;var T=this.sampleCurveDerivativeX(c);if(Math.abs(T)<1e-6)break;c-=w/T}var A=0,I=1;for(c=t,g=0;g<20&&(w=this.sampleCurveX(c),!(Math.abs(w-t)<o));g++)t>w?A=c:I=c,c=.5*(I-A)+A;return c},solve:function(t,o){return this.sampleCurveY(this.solveCurveX(t,o))}},Eu}(),Cc=Cu(Fi);class Ui{constructor(t,o,c,g,w){this.type=t,this.operator=o,this.interpolation=c,this.input=g,this.labels=[],this.outputs=[];for(const[T,A]of w)this.labels.push(T),this.outputs.push(A)}static interpolationFactor(t,o,c,g){let w=0;if(t.name==="exponential")w=Ll(o,t.base,c,g);else if(t.name==="linear")w=Ll(o,1,c,g);else if(t.name==="cubic-bezier"){const T=t.controlPoints;w=new Cc(T[0],T[1],T[2],T[3]).solve(Ll(o,1,c,g))}return w}static parse(t,o){let[c,g,w,...T]=t;if(!Array.isArray(g)||g.length===0)return o.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const k=g[1];if(typeof k!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:k}}else{if(g[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const k=g.slice(1);if(k.length!==4||k.some(N=>typeof N!="number"||N<0||N>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:k}}}if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(w=o.parse(w,2,tt),!w)return null;const A=[];let I=null;c==="interpolate-hcl"||c==="interpolate-lab"?I=Hr:o.expectedType&&o.expectedType.kind!=="value"&&(I=o.expectedType);for(let k=0;k<T.length;k+=2){const N=T[k],V=T[k+1],q=k+3,Y=k+4;if(typeof N!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',q);if(A.length&&A[A.length-1][0]>=N)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',q);const Q=o.parse(V,Y,I);if(!Q)return null;I=I||Q.type,A.push([N,Q])}return kn(I,tt)||kn(I,$n)||kn(I,Hr)||kn(I,$a)||kn(I,sa)||kn(I,wn(tt))?new Ui(I,c,g,w,A):o.error(`Type ${Pr(I)} is not interpolatable.`)}evaluate(t){const o=this.labels,c=this.outputs;if(o.length===1)return c[0].evaluate(t);const g=this.input.evaluate(t);if(g<=o[0])return c[0].evaluate(t);const w=o.length;if(g>=o[w-1])return c[w-1].evaluate(t);const T=jo(o,g),A=Ui.interpolationFactor(this.interpolation,g,o[T],o[T+1]),I=c[T].evaluate(t),k=c[T+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ps(I,k,A);case"color":return cr.interpolate(I,k,A);case"padding":return ji.interpolate(I,k,A);case"variableAnchorOffsetCollection":return ui.interpolate(I,k,A);case"array":return ko(I,k,A);case"projectionDefinition":return ei.interpolate(I,k,A)}case"interpolate-hcl":return cr.interpolate(I,k,A,"hcl");case"interpolate-lab":return cr.interpolate(I,k,A,"lab")}}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Ll(s,t,o,c){const g=c-o,w=s-o;return g===0?0:t===1?w/g:(Math.pow(t,w)-1)/(Math.pow(t,g)-1)}const fn={color:cr.interpolate,number:ps,padding:ji.interpolate,variableAnchorOffsetCollection:ui.interpolate,array:ko};class Pu{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");let c=null;const g=o.expectedType;g&&g.kind!=="value"&&(c=g);const w=[];for(const A of t.slice(1)){const I=o.parse(A,1+w.length,c,void 0,{typeAnnotation:"omit"});if(!I)return null;c=c||I.type,w.push(I)}if(!c)throw new Error("No output type");const T=g&&w.some(A=>Js(g,A.type));return new Pu(T?ar:c,w)}evaluate(t){let o,c=null,g=0;for(const w of this.args)if(g++,c=w.evaluate(t),c&&c instanceof Xi&&!c.available&&(o||(o=c.name),c=null,g===this.args.length&&(c=o)),c!==null)break;return c}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function Ec(s,t){return s==="=="||s==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function zh(s,t,o,c){return c.compare(t,o)===0}function No(s,t,o){const c=s!=="=="&&s!=="!=";return class SM{constructor(w,T,A){this.type=kt,this.lhs=w,this.rhs=T,this.collator=A,this.hasUntypedArgument=w.type.kind==="value"||T.type.kind==="value"}static parse(w,T){if(w.length!==3&&w.length!==4)return T.error("Expected two or three arguments.");const A=w[0];let I=T.parse(w[1],1,ar);if(!I)return null;if(!Ec(A,I.type))return T.concat(1).error(`"${A}" comparisons are not supported for type '${Pr(I.type)}'.`);let k=T.parse(w[2],2,ar);if(!k)return null;if(!Ec(A,k.type))return T.concat(2).error(`"${A}" comparisons are not supported for type '${Pr(k.type)}'.`);if(I.type.kind!==k.type.kind&&I.type.kind!=="value"&&k.type.kind!=="value")return T.error(`Cannot compare types '${Pr(I.type)}' and '${Pr(k.type)}'.`);c&&(I.type.kind==="value"&&k.type.kind!=="value"?I=new Ni(k.type,[I]):I.type.kind!=="value"&&k.type.kind==="value"&&(k=new Ni(I.type,[k])));let N=null;if(w.length===4){if(I.type.kind!=="string"&&k.type.kind!=="string"&&I.type.kind!=="value"&&k.type.kind!=="value")return T.error("Cannot use collator to compare non-string types.");if(N=T.parse(w[3],3,Va),!N)return null}return new SM(I,k,N)}evaluate(w){const T=this.lhs.evaluate(w),A=this.rhs.evaluate(w);if(c&&this.hasUntypedArgument){const I=Sn(T),k=Sn(A);if(I.kind!==k.kind||I.kind!=="string"&&I.kind!=="number")throw new On(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${I.kind}, ${k.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const I=Sn(T),k=Sn(A);if(I.kind!=="string"||k.kind!=="string")return t(w,T,A)}return this.collator?o(w,T,A,this.collator.evaluate(w)):t(w,T,A)}eachChild(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)}outputDefined(){return!0}}}const Pc=No("==",function(s,t,o){return t===o},zh),kh=No("!=",function(s,t,o){return t!==o},function(s,t,o,c){return!zh(0,t,o,c)}),fp=No("<",function(s,t,o){return t<o},function(s,t,o,c){return c.compare(t,o)<0}),Rc=No(">",function(s,t,o){return t>o},function(s,t,o,c){return c.compare(t,o)>0}),zl=No("<=",function(s,t,o){return t<=o},function(s,t,o,c){return c.compare(t,o)<=0}),Ga=No(">=",function(s,t,o){return t>=o},function(s,t,o,c){return c.compare(t,o)>=0});class Ru{constructor(t,o,c){this.type=Va,this.locale=c,this.caseSensitive=t,this.diacriticSensitive=o}static parse(t,o){if(t.length!==2)return o.error("Expected one argument.");const c=t[1];if(typeof c!="object"||Array.isArray(c))return o.error("Collator options argument must be an object.");const g=o.parse(c["case-sensitive"]!==void 0&&c["case-sensitive"],1,kt);if(!g)return null;const w=o.parse(c["diacritic-sensitive"]!==void 0&&c["diacritic-sensitive"],1,kt);if(!w)return null;let T=null;return c.locale&&(T=o.parse(c.locale,1,yt),!T)?null:new Ru(g,w,T)}evaluate(t){return new Or(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class kl{constructor(t,o,c,g,w){this.type=yt,this.number=t,this.locale=o,this.currency=c,this.minFractionDigits=g,this.maxFractionDigits=w}static parse(t,o){if(t.length!==3)return o.error("Expected two arguments.");const c=o.parse(t[1],1,tt);if(!c)return null;const g=t[2];if(typeof g!="object"||Array.isArray(g))return o.error("NumberFormat options argument must be an object.");let w=null;if(g.locale&&(w=o.parse(g.locale,1,yt),!w))return null;let T=null;if(g.currency&&(T=o.parse(g.currency,1,yt),!T))return null;let A=null;if(g["min-fraction-digits"]&&(A=o.parse(g["min-fraction-digits"],1,tt),!A))return null;let I=null;return g["max-fraction-digits"]&&(I=o.parse(g["max-fraction-digits"],1,tt),!I)?null:new kl(c,w,T,A,I)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class Iu{constructor(t){this.type=yi,this.sections=t}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const c=t[1];if(!Array.isArray(c)&&typeof c=="object")return o.error("First argument must be an image or text section.");const g=[];let w=!1;for(let T=1;T<=t.length-1;++T){const A=t[T];if(w&&typeof A=="object"&&!Array.isArray(A)){w=!1;let I=null;if(A["font-scale"]&&(I=o.parse(A["font-scale"],1,tt),!I))return null;let k=null;if(A["text-font"]&&(k=o.parse(A["text-font"],1,wn(yt)),!k))return null;let N=null;if(A["text-color"]&&(N=o.parse(A["text-color"],1,Hr),!N))return null;let V=null;if(A["vertical-align"]){if(typeof A["vertical-align"]=="string"&&!Oo.includes(A["vertical-align"]))return o.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${A["vertical-align"]}' instead.`);if(V=o.parse(A["vertical-align"],1,yt),!V)return null}const q=g[g.length-1];q.scale=I,q.font=k,q.textColor=N,q.verticalAlign=V}else{const I=o.parse(t[T],1,ar);if(!I)return null;const k=I.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,g.push({content:I,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Iu(g)}evaluate(t){return new Bi(this.sections.map(o=>{const c=o.content.evaluate(t);return Sn(c)===Zn?new Za("",c,null,null,null,o.verticalAlign?o.verticalAlign.evaluate(t):null):new Za(qa(c),null,o.scale?o.scale.evaluate(t):null,o.font?o.font.evaluate(t).join(","):null,o.textColor?o.textColor.evaluate(t):null,o.verticalAlign?o.verticalAlign.evaluate(t):null)}))}eachChild(t){for(const o of this.sections)t(o.content),o.scale&&t(o.scale),o.font&&t(o.font),o.textColor&&t(o.textColor),o.verticalAlign&&t(o.verticalAlign)}outputDefined(){return!1}}class Du{constructor(t){this.type=Zn,this.input=t}static parse(t,o){if(t.length!==2)return o.error("Expected two arguments.");const c=o.parse(t[1],1,yt);return c?new Du(c):o.error("No image name provided.")}evaluate(t){const o=this.input.evaluate(t),c=Xi.fromString(o);return c&&t.availableImages&&(c.available=t.availableImages.indexOf(o)>-1),c}eachChild(t){t(this.input)}outputDefined(){return!1}}class Oh{constructor(t){this.type=tt,this.input=t}static parse(t,o){if(t.length!==2)return o.error(`Expected 1 argument, but found ${t.length-1} instead.`);const c=o.parse(t[1],1);return c?c.type.kind!=="array"&&c.type.kind!=="string"&&c.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${Pr(c.type)} instead.`):new Oh(c):null}evaluate(t){const o=this.input.evaluate(t);if(typeof o=="string")return[...o].length;if(Array.isArray(o))return o.length;throw new On(`Expected value to be of type string or array, but found ${Pr(Sn(o))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const ms=8192;function dp(s,t){const o=(180+s[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,g=Math.pow(2,t.z);return[Math.round(o*g*ms),Math.round(c*g*ms)]}function Bh(s,t){const o=Math.pow(2,t.z);return[(g=(s[0]/ms+t.x)/o,360*g-180),(c=(s[1]/ms+t.y)/o,360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90)];var c,g}function so(s,t){s[0]=Math.min(s[0],t[0]),s[1]=Math.min(s[1],t[1]),s[2]=Math.max(s[2],t[0]),s[3]=Math.max(s[3],t[1])}function Lu(s,t){return!(s[0]<=t[0]||s[2]>=t[2]||s[1]<=t[1]||s[3]>=t[3])}function Hf(s,t,o){const c=s[0]-t[0],g=s[1]-t[1],w=s[0]-o[0],T=s[1]-o[1];return c*T-w*g==0&&c*w<=0&&g*T<=0}function zu(s,t,o,c){return(g=[c[0]-o[0],c[1]-o[1]])[0]*(w=[t[0]-s[0],t[1]-s[1]])[1]-g[1]*w[0]!=0&&!(!Fh(s,t,o,c)||!Fh(o,c,s,t));var g,w}function jh(s,t,o){for(const c of o)for(let g=0;g<c.length-1;++g)if(zu(s,t,c[g],c[g+1]))return!0;return!1}function Ha(s,t,o=!1){let c=!1;for(const A of t)for(let I=0;I<A.length-1;I++){if(Hf(s,A[I],A[I+1]))return o;(w=A[I])[1]>(g=s)[1]!=(T=A[I+1])[1]>g[1]&&g[0]<(T[0]-w[0])*(g[1]-w[1])/(T[1]-w[1])+w[0]&&(c=!c)}var g,w,T;return c}function pp(s,t){for(const o of t)if(Ha(s,o))return!0;return!1}function Nh(s,t){for(const o of s)if(!Ha(o,t))return!1;for(let o=0;o<s.length-1;++o)if(jh(s[o],s[o+1],t))return!1;return!0}function Wf(s,t){for(const o of t)if(Nh(s,o))return!0;return!1}function Fh(s,t,o,c){const g=c[0]-o[0],w=c[1]-o[1],T=(s[0]-o[0])*w-g*(s[1]-o[1]),A=(t[0]-o[0])*w-g*(t[1]-o[1]);return T>0&&A<0||T<0&&A>0}function Ic(s,t,o){const c=[];for(let g=0;g<s.length;g++){const w=[];for(let T=0;T<s[g].length;T++){const A=dp(s[g][T],o);so(t,A),w.push(A)}c.push(w)}return c}function Dc(s,t,o){const c=[];for(let g=0;g<s.length;g++){const w=Ic(s[g],t,o);c.push(w)}return c}function oo(s,t,o,c){if(s[0]<o[0]||s[0]>o[2]){const g=.5*c;let w=s[0]-o[0]>g?-c:o[0]-s[0]>g?c:0;w===0&&(w=s[0]-o[2]>g?-c:o[2]-s[0]>g?c:0),s[0]+=w}so(t,s)}function Uh(s,t,o,c){const g=Math.pow(2,c.z)*ms,w=[c.x*ms,c.y*ms],T=[];for(const A of s)for(const I of A){const k=[I.x+w[0],I.y+w[1]];oo(k,t,o,g),T.push(k)}return T}function Kf(s,t,o,c){const g=Math.pow(2,c.z)*ms,w=[c.x*ms,c.y*ms],T=[];for(const I of s){const k=[];for(const N of I){const V=[N.x+w[0],N.y+w[1]];so(t,V),k.push(V)}T.push(k)}if(t[2]-t[0]<=g/2){(A=t)[0]=A[1]=1/0,A[2]=A[3]=-1/0;for(const I of T)for(const k of I)oo(k,t,o,g)}var A;return T}class Fo{constructor(t,o){this.type=kt,this.geojson=t,this.geometries=o}static parse(t,o){if(t.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Rl(t[1])){const c=t[1];if(c.type==="FeatureCollection"){const g=[];for(const w of c.features){const{type:T,coordinates:A}=w.geometry;T==="Polygon"&&g.push(A),T==="MultiPolygon"&&g.push(...A)}if(g.length)return new Fo(c,{type:"MultiPolygon",coordinates:g})}else if(c.type==="Feature"){const g=c.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Fo(c,c.geometry)}else if(c.type==="Polygon"||c.type==="MultiPolygon")return new Fo(c,c)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(o,c){const g=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],T=o.canonicalID();if(c.type==="Polygon"){const A=Ic(c.coordinates,w,T),I=Uh(o.geometry(),g,w,T);if(!Lu(g,w))return!1;for(const k of I)if(!Ha(k,A))return!1}if(c.type==="MultiPolygon"){const A=Dc(c.coordinates,w,T),I=Uh(o.geometry(),g,w,T);if(!Lu(g,w))return!1;for(const k of I)if(!pp(k,A))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(o,c){const g=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],T=o.canonicalID();if(c.type==="Polygon"){const A=Ic(c.coordinates,w,T),I=Kf(o.geometry(),g,w,T);if(!Lu(g,w))return!1;for(const k of I)if(!Nh(k,A))return!1}if(c.type==="MultiPolygon"){const A=Dc(c.coordinates,w,T),I=Kf(o.geometry(),g,w,T);if(!Lu(g,w))return!1;for(const k of I)if(!Wf(k,A))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Vh=class{constructor(s=[],t=(o,c)=>o<c?-1:o>c?1:0){if(this.data=s,this.length=this.data.length,this.compare=t,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:t,compare:o}=this,c=t[s];for(;s>0;){const g=s-1>>1,w=t[g];if(o(c,w)>=0)break;t[s]=w,s=g}t[s]=c}_down(s){const{data:t,compare:o}=this,c=this.length>>1,g=t[s];for(;s<c;){let w=1+(s<<1);const T=w+1;if(T<this.length&&o(t[T],t[w])<0&&(w=T),o(t[w],g)>=0)break;t[s]=t[w],s=w}t[s]=g}};function ku(s,t,o=0,c=s.length-1,g=Ou){for(;c>o;){if(c-o>600){const I=c-o+1,k=t-o+1,N=Math.log(I),V=.5*Math.exp(2*N/3),q=.5*Math.sqrt(N*V*(I-V)/I)*(k-I/2<0?-1:1);ku(s,t,Math.max(o,Math.floor(t-k*V/I+q)),Math.min(c,Math.floor(t+(I-k)*V/I+q)),g)}const w=s[t];let T=o,A=c;for(ks(s,o,t),g(s[c],w)>0&&ks(s,o,c);T<A;){for(ks(s,T,A),T++,A--;g(s[T],w)<0;)T++;for(;g(s[A],w)>0;)A--}g(s[o],w)===0?ks(s,o,A):(A++,ks(s,A,c)),A<=t&&(o=A+1),t<=A&&(c=A-1)}}function ks(s,t,o){const c=s[t];s[t]=s[o],s[o]=c}function Ou(s,t){return s<t?-1:s>t?1:0}function Lc(s,t){if(s.length<=1)return[s];const o=[];let c,g;for(const w of s){const T=$h(w);T!==0&&(w.area=Math.abs(T),g===void 0&&(g=T<0),g===T<0?(c&&o.push(c),c=[w]):c.push(w))}if(c&&o.push(c),t>1)for(let w=0;w<o.length;w++)o[w].length<=t||(ku(o[w],t,1,o[w].length-1,Bu),o[w]=o[w].slice(0,t));return o}function Bu(s,t){return t.area-s.area}function $h(s){let t=0;for(let o,c,g=0,w=s.length,T=w-1;g<w;T=g++)o=s[g],c=s[T],t+=(c.x-o.x)*(o.y+c.y);return t}const Zh=1/298.257223563,zc=Zh*(2-Zh),ju=Math.PI/180;class Nu{constructor(t){const o=6378.137*ju*1e3,c=Math.cos(t*ju),g=1/(1-zc*(1-c*c)),w=Math.sqrt(g);this.kx=o*w*c,this.ky=o*w*g*(1-zc)}distance(t,o){const c=this.wrap(t[0]-o[0])*this.kx,g=(t[1]-o[1])*this.ky;return Math.sqrt(c*c+g*g)}pointOnLine(t,o){let c,g,w,T,A=1/0;for(let I=0;I<t.length-1;I++){let k=t[I][0],N=t[I][1],V=this.wrap(t[I+1][0]-k)*this.kx,q=(t[I+1][1]-N)*this.ky,Y=0;V===0&&q===0||(Y=(this.wrap(o[0]-k)*this.kx*V+(o[1]-N)*this.ky*q)/(V*V+q*q),Y>1?(k=t[I+1][0],N=t[I+1][1]):Y>0&&(k+=V/this.kx*Y,N+=q/this.ky*Y)),V=this.wrap(o[0]-k)*this.kx,q=(o[1]-N)*this.ky;const Q=V*V+q*q;Q<A&&(A=Q,c=k,g=N,w=I,T=Y)}return{point:[c,g],index:w,t:Math.max(0,Math.min(1,T))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function qh(s,t){return t[0]-s[0]}function Fu(s){return s[1]-s[0]+1}function Os(s,t){return s[1]>=s[0]&&s[1]<t}function kc(s,t){if(s[0]>s[1])return[null,null];const o=Fu(s);if(t){if(o===2)return[s,null];const g=Math.floor(o/2);return[[s[0],s[0]+g],[s[0]+g,s[1]]]}if(o===1)return[s,null];const c=Math.floor(o/2)-1;return[[s[0],s[0]+c],[s[0]+c+1,s[1]]]}function Gh(s,t){if(!Os(t,s.length))return[1/0,1/0,-1/0,-1/0];const o=[1/0,1/0,-1/0,-1/0];for(let c=t[0];c<=t[1];++c)so(o,s[c]);return o}function Hh(s){const t=[1/0,1/0,-1/0,-1/0];for(const o of s)for(const c of o)so(t,c);return t}function Yf(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function Qi(s,t,o){if(!Yf(s)||!Yf(t))return NaN;let c=0,g=0;return s[2]<t[0]&&(c=t[0]-s[2]),s[0]>t[2]&&(c=s[0]-t[2]),s[1]>t[3]&&(g=s[1]-t[3]),s[3]<t[1]&&(g=t[1]-s[3]),o.distance([0,0],[c,g])}function Sr(s,t,o){const c=o.pointOnLine(t,s);return o.distance(s,c.point)}function Oc(s,t,o,c,g){const w=Math.min(Sr(s,[o,c],g),Sr(t,[o,c],g)),T=Math.min(Sr(o,[s,t],g),Sr(c,[s,t],g));return Math.min(w,T)}function Xf(s,t,o,c,g){if(!Os(t,s.length)||!Os(c,o.length))return 1/0;let w=1/0;for(let T=t[0];T<t[1];++T){const A=s[T],I=s[T+1];for(let k=c[0];k<c[1];++k){const N=o[k],V=o[k+1];if(zu(A,I,N,V))return 0;w=Math.min(w,Oc(A,I,N,V,g))}}return w}function Qf(s,t,o,c,g){if(!Os(t,s.length)||!Os(c,o.length))return NaN;let w=1/0;for(let T=t[0];T<=t[1];++T)for(let A=c[0];A<=c[1];++A)if(w=Math.min(w,g.distance(s[T],o[A])),w===0)return w;return w}function Jf(s,t,o){if(Ha(s,t,!0))return 0;let c=1/0;for(const g of t){const w=g[0],T=g[g.length-1];if(w!==T&&(c=Math.min(c,Sr(s,[T,w],o)),c===0))return c;const A=o.pointOnLine(g,s);if(c=Math.min(c,o.distance(s,A.point)),c===0)return c}return c}function Wh(s,t,o,c){if(!Os(t,s.length))return NaN;for(let w=t[0];w<=t[1];++w)if(Ha(s[w],o,!0))return 0;let g=1/0;for(let w=t[0];w<t[1];++w){const T=s[w],A=s[w+1];for(const I of o)for(let k=0,N=I.length,V=N-1;k<N;V=k++){const q=I[V],Y=I[k];if(zu(T,A,q,Y))return 0;g=Math.min(g,Oc(T,A,q,Y,c))}}return g}function ed(s,t){for(const o of s)for(const c of o)if(Ha(c,t,!0))return!0;return!1}function mp(s,t,o,c=1/0){const g=Hh(s),w=Hh(t);if(c!==1/0&&Qi(g,w,o)>=c)return c;if(Lu(g,w)){if(ed(s,t))return 0}else if(ed(t,s))return 0;let T=1/0;for(const A of s)for(let I=0,k=A.length,N=k-1;I<k;N=I++){const V=A[N],q=A[I];for(const Y of t)for(let Q=0,ne=Y.length,ce=ne-1;Q<ne;ce=Q++){const ge=Y[ce],Le=Y[Q];if(zu(V,q,ge,Le))return 0;T=Math.min(T,Oc(V,q,ge,Le,o))}}return T}function Uo(s,t,o,c,g,w){if(!w)return;const T=Qi(Gh(c,w),g,o);T<t&&s.push([T,w,[0,0]])}function Ol(s,t,o,c,g,w,T){if(!w||!T)return;const A=Qi(Gh(c,w),Gh(g,T),o);A<t&&s.push([A,w,T])}function lo(s,t,o,c,g=1/0){let w=Math.min(c.distance(s[0],o[0][0]),g);if(w===0)return w;const T=new Vh([[0,[0,s.length-1],[0,0]]],qh),A=Hh(o);for(;T.length>0;){const I=T.pop();if(I[0]>=w)continue;const k=I[1],N=t?50:100;if(Fu(k)<=N){if(!Os(k,s.length))return NaN;if(t){const V=Wh(s,k,o,c);if(isNaN(V)||V===0)return V;w=Math.min(w,V)}else for(let V=k[0];V<=k[1];++V){const q=Jf(s[V],o,c);if(w=Math.min(w,q),w===0)return 0}}else{const V=kc(k,t);Uo(T,w,c,s,A,V[0]),Uo(T,w,c,s,A,V[1])}}return w}function Bl(s,t,o,c,g,w=1/0){let T=Math.min(w,g.distance(s[0],o[0]));if(T===0)return T;const A=new Vh([[0,[0,s.length-1],[0,o.length-1]]],qh);for(;A.length>0;){const I=A.pop();if(I[0]>=T)continue;const k=I[1],N=I[2],V=t?50:100,q=c?50:100;if(Fu(k)<=V&&Fu(N)<=q){if(!Os(k,s.length)&&Os(N,o.length))return NaN;let Y;if(t&&c)Y=Xf(s,k,o,N,g),T=Math.min(T,Y);else if(t&&!c){const Q=s.slice(k[0],k[1]+1);for(let ne=N[0];ne<=N[1];++ne)if(Y=Sr(o[ne],Q,g),T=Math.min(T,Y),T===0)return T}else if(!t&&c){const Q=o.slice(N[0],N[1]+1);for(let ne=k[0];ne<=k[1];++ne)if(Y=Sr(s[ne],Q,g),T=Math.min(T,Y),T===0)return T}else Y=Qf(s,k,o,N,g),T=Math.min(T,Y)}else{const Y=kc(k,t),Q=kc(N,c);Ol(A,T,g,s,o,Y[0],Q[0]),Ol(A,T,g,s,o,Y[0],Q[1]),Ol(A,T,g,s,o,Y[1],Q[0]),Ol(A,T,g,s,o,Y[1],Q[1])}}return T}function Bc(s){return s.type==="MultiPolygon"?s.coordinates.map(t=>({type:"Polygon",coordinates:t})):s.type==="MultiLineString"?s.coordinates.map(t=>({type:"LineString",coordinates:t})):s.type==="MultiPoint"?s.coordinates.map(t=>({type:"Point",coordinates:t})):[s]}class pa{constructor(t,o){this.type=tt,this.geojson=t,this.geometries=o}static parse(t,o){if(t.length!==2)return o.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Rl(t[1])){const c=t[1];if(c.type==="FeatureCollection")return new pa(c,c.features.map(g=>Bc(g.geometry)).flat());if(c.type==="Feature")return new pa(c,Bc(c.geometry));if("type"in c&&"coordinates"in c)return new pa(c,Bc(c))}return o.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(o,c){const g=o.geometry(),w=g.flat().map(I=>Bh([I.x,I.y],o.canonical));if(g.length===0)return NaN;const T=new Nu(w[0][1]);let A=1/0;for(const I of c){switch(I.type){case"Point":A=Math.min(A,Bl(w,!1,[I.coordinates],!1,T,A));break;case"LineString":A=Math.min(A,Bl(w,!1,I.coordinates,!0,T,A));break;case"Polygon":A=Math.min(A,lo(w,!1,I.coordinates,T,A))}if(A===0)return A}return A}(t,this.geometries);if(t.geometryType()==="LineString")return function(o,c){const g=o.geometry(),w=g.flat().map(I=>Bh([I.x,I.y],o.canonical));if(g.length===0)return NaN;const T=new Nu(w[0][1]);let A=1/0;for(const I of c){switch(I.type){case"Point":A=Math.min(A,Bl(w,!0,[I.coordinates],!1,T,A));break;case"LineString":A=Math.min(A,Bl(w,!0,I.coordinates,!0,T,A));break;case"Polygon":A=Math.min(A,lo(w,!0,I.coordinates,T,A))}if(A===0)return A}return A}(t,this.geometries);if(t.geometryType()==="Polygon")return function(o,c){const g=o.geometry();if(g.length===0||g[0].length===0)return NaN;const w=Lc(g,0).map(I=>I.map(k=>k.map(N=>Bh([N.x,N.y],o.canonical)))),T=new Nu(w[0][0][0][1]);let A=1/0;for(const I of c)for(const k of w){switch(I.type){case"Point":A=Math.min(A,lo([I.coordinates],!1,k,T,A));break;case"LineString":A=Math.min(A,lo(I.coordinates,!0,k,T,A));break;case"Polygon":A=Math.min(A,mp(k,I.coordinates,T,A))}if(A===0)return A}return A}(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Wa={"==":Pc,"!=":kh,">":Rc,"<":fp,">=":Ga,"<=":zl,array:Ni,at:vi,boolean:Ni,case:Ac,coalesce:Pu,collator:Ru,format:Iu,image:Du,in:Ii,"index-of":Ls,interpolate:Ui,"interpolate-hcl":Ui,"interpolate-lab":Ui,length:Oh,let:Ds,literal:ba,match:io,number:Ni,"number-format":kl,object:Ni,slice:ao,step:zs,string:Ni,"to-boolean":Wr,"to-color":Wr,"to-number":Wr,"to-string":Wr,var:Lr,within:Fo,distance:pa};class la{constructor(t,o,c,g){this.name=t,this.type=o,this._evaluate=c,this.args=g}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,o){const c=t[0],g=la.definitions[c];if(!g)return o.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const w=Array.isArray(g)?g[0]:g.type,T=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,A=T.filter(([k])=>!Array.isArray(k)||k.length===t.length-1);let I=null;for(const[k,N]of A){I=new hr(o.registry,Uu,o.path,null,o.scope);const V=[];let q=!1;for(let Y=1;Y<t.length;Y++){const Q=t[Y],ne=Array.isArray(k)?k[Y-1]:k.type,ce=I.parse(Q,1+V.length,ne);if(!ce){q=!0;break}V.push(ce)}if(!q)if(Array.isArray(k)&&k.length!==V.length)I.error(`Expected ${k.length} arguments, but found ${V.length} instead.`);else{for(let Y=0;Y<V.length;Y++){const Q=Array.isArray(k)?k[Y]:k.type,ne=V[Y];I.concat(Y+1).checkSubtype(Q,ne.type)}if(I.errors.length===0)return new la(c,w,N,V)}}if(A.length===1)o.errors.push(...I.errors);else{const k=(A.length?A:T).map(([V])=>{return q=V,Array.isArray(q)?`(${q.map(Pr).join(", ")})`:`(${Pr(q.type)}...)`;var q}).join(" | "),N=[];for(let V=1;V<t.length;V++){const q=o.parse(t[V],1+N.length);if(!q)return null;N.push(Pr(q.type))}o.error(`Expected arguments of type ${k}, but found (${N.join(", ")}) instead.`)}return null}static register(t,o){la.definitions=o;for(const c in o)t[c]=la}}function Kh(s,[t,o,c,g]){t=t.evaluate(s),o=o.evaluate(s),c=c.evaluate(s);const w=g?g.evaluate(s):1,T=da(t,o,c,w);if(T)throw new On(T);return new cr(t/255,o/255,c/255,w,!1)}function uo(s,t){return s in t}function jc(s,t){const o=t[s];return o===void 0?null:o}function co(s){return{type:s}}function Uu(s){if(s instanceof Lr)return Uu(s.boundExpression);if(s instanceof la&&s.name==="error"||s instanceof Ru||s instanceof Fo||s instanceof pa)return!1;const t=s instanceof Wr||s instanceof Ni;let o=!0;return s.eachChild(c=>{o=t?o&&Uu(c):o&&c instanceof ba}),!!o&&Nc(s)&&Fc(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Nc(s){if(s instanceof la&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof Fo||s instanceof pa)return!1;let t=!0;return s.eachChild(o=>{t&&!Nc(o)&&(t=!1)}),t}function Vu(s){if(s instanceof la&&s.name==="feature-state")return!1;let t=!0;return s.eachChild(o=>{t&&!Vu(o)&&(t=!1)}),t}function Fc(s,t){if(s instanceof la&&t.indexOf(s.name)>=0)return!1;let o=!0;return s.eachChild(c=>{o&&!Fc(c,t)&&(o=!1)}),o}function Yh(s){return{result:"success",value:s}}function Vo(s){return{result:"error",value:s}}function $o(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function Sa(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function ua(s){return!!s.expression&&s.expression.interpolated}function Er(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function jl(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function Uc(s){return s}function Zo(s,t){const o=t.type==="color",c=s.stops&&typeof s.stops[0][0]=="object",g=c||!(c||s.property!==void 0),w=s.type||(ua(t)?"exponential":"interval");if(o||t.type==="padding"){const N=o?cr.parse:ji.parse;(s=Wt({},s)).stops&&(s.stops=s.stops.map(V=>[V[0],N(V[1])])),s.default=N(s.default?s.default:t.default)}if(s.colorSpace&&(T=s.colorSpace)!=="rgb"&&T!=="hcl"&&T!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var T;let A,I,k;if(w==="exponential")A=Nl;else if(w==="interval")A=td;else if(w==="categorical"){A=ho,I=Object.create(null);for(const N of s.stops)I[N[0]]=N[1];k=typeof s.stops[0][0]}else{if(w!=="identity")throw new Error(`Unknown function type "${w}"`);A=Fl}if(c){const N={},V=[];for(let Q=0;Q<s.stops.length;Q++){const ne=s.stops[Q],ce=ne[0].zoom;N[ce]===void 0&&(N[ce]={zoom:ce,type:s.type,property:s.property,default:s.default,stops:[]},V.push(ce)),N[ce].stops.push([ne[0].value,ne[1]])}const q=[];for(const Q of V)q.push([N[Q].zoom,Zo(N[Q],t)]);const Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:Ui.interpolationFactor.bind(void 0,Y),zoomStops:q.map(Q=>Q[0]),evaluate:({zoom:Q},ne)=>Nl({stops:q,base:s.base},t,Q).evaluate(Q,ne)}}if(g){const N=w==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:N,interpolationFactor:Ui.interpolationFactor.bind(void 0,N),zoomStops:s.stops.map(V=>V[0]),evaluate:({zoom:V})=>A(s,t,V,I,k)}}return{kind:"source",evaluate(N,V){const q=V&&V.properties?V.properties[s.property]:void 0;return q===void 0?qo(s.default,t.default):A(s,t,q,I,k)}}}function qo(s,t,o){return s!==void 0?s:t!==void 0?t:o!==void 0?o:void 0}function ho(s,t,o,c,g){return qo(typeof o===g?c[o]:void 0,s.default,t.default)}function td(s,t,o){if(Er(o)!=="number")return qo(s.default,t.default);const c=s.stops.length;if(c===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[c-1][0])return s.stops[c-1][1];const g=jo(s.stops.map(w=>w[0]),o);return s.stops[g][1]}function Nl(s,t,o){const c=s.base!==void 0?s.base:1;if(Er(o)!=="number")return qo(s.default,t.default);const g=s.stops.length;if(g===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[g-1][0])return s.stops[g-1][1];const w=jo(s.stops.map(N=>N[0]),o),T=function(N,V,q,Y){const Q=Y-q,ne=N-q;return Q===0?0:V===1?ne/Q:(Math.pow(V,ne)-1)/(Math.pow(V,Q)-1)}(o,c,s.stops[w][0],s.stops[w+1][0]),A=s.stops[w][1],I=s.stops[w+1][1],k=fn[t.type]||Uc;return typeof A.evaluate=="function"?{evaluate(...N){const V=A.evaluate.apply(void 0,N),q=I.evaluate.apply(void 0,N);if(V!==void 0&&q!==void 0)return k(V,q,T,s.colorSpace)}}:k(A,I,T,s.colorSpace)}function Fl(s,t,o){switch(t.type){case"color":o=cr.parse(o);break;case"formatted":o=Bi.fromString(o.toString());break;case"resolvedImage":o=Xi.fromString(o.toString());break;case"padding":o=ji.parse(o);break;default:Er(o)===t.type||t.type==="enum"&&t.values[o]||(o=void 0)}return qo(o,s.default,t.default)}la.register(Wa,{error:[{kind:"error"},[yt],(s,[t])=>{throw new On(t.evaluate(s))}],typeof:[yt,[ar],(s,[t])=>Pr(Sn(t.evaluate(s)))],"to-rgba":[wn(tt,4),[Hr],(s,[t])=>{const[o,c,g,w]=t.evaluate(s).rgb;return[255*o,255*c,255*g,w]}],rgb:[Hr,[tt,tt,tt],Kh],rgba:[Hr,[tt,tt,tt,tt],Kh],has:{type:kt,overloads:[[[yt],(s,[t])=>uo(t.evaluate(s),s.properties())],[[yt,sn],(s,[t,o])=>uo(t.evaluate(s),o.evaluate(s))]]},get:{type:ar,overloads:[[[yt],(s,[t])=>jc(t.evaluate(s),s.properties())],[[yt,sn],(s,[t,o])=>jc(t.evaluate(s),o.evaluate(s))]]},"feature-state":[ar,[yt],(s,[t])=>jc(t.evaluate(s),s.featureState||{})],properties:[sn,[],s=>s.properties()],"geometry-type":[yt,[],s=>s.geometryType()],id:[ar,[],s=>s.id()],zoom:[tt,[],s=>s.globals.zoom],"heatmap-density":[tt,[],s=>s.globals.heatmapDensity||0],"line-progress":[tt,[],s=>s.globals.lineProgress||0],accumulated:[ar,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[tt,co(tt),(s,t)=>{let o=0;for(const c of t)o+=c.evaluate(s);return o}],"*":[tt,co(tt),(s,t)=>{let o=1;for(const c of t)o*=c.evaluate(s);return o}],"-":{type:tt,overloads:[[[tt,tt],(s,[t,o])=>t.evaluate(s)-o.evaluate(s)],[[tt],(s,[t])=>-t.evaluate(s)]]},"/":[tt,[tt,tt],(s,[t,o])=>t.evaluate(s)/o.evaluate(s)],"%":[tt,[tt,tt],(s,[t,o])=>t.evaluate(s)%o.evaluate(s)],ln2:[tt,[],()=>Math.LN2],pi:[tt,[],()=>Math.PI],e:[tt,[],()=>Math.E],"^":[tt,[tt,tt],(s,[t,o])=>Math.pow(t.evaluate(s),o.evaluate(s))],sqrt:[tt,[tt],(s,[t])=>Math.sqrt(t.evaluate(s))],log10:[tt,[tt],(s,[t])=>Math.log(t.evaluate(s))/Math.LN10],ln:[tt,[tt],(s,[t])=>Math.log(t.evaluate(s))],log2:[tt,[tt],(s,[t])=>Math.log(t.evaluate(s))/Math.LN2],sin:[tt,[tt],(s,[t])=>Math.sin(t.evaluate(s))],cos:[tt,[tt],(s,[t])=>Math.cos(t.evaluate(s))],tan:[tt,[tt],(s,[t])=>Math.tan(t.evaluate(s))],asin:[tt,[tt],(s,[t])=>Math.asin(t.evaluate(s))],acos:[tt,[tt],(s,[t])=>Math.acos(t.evaluate(s))],atan:[tt,[tt],(s,[t])=>Math.atan(t.evaluate(s))],min:[tt,co(tt),(s,t)=>Math.min(...t.map(o=>o.evaluate(s)))],max:[tt,co(tt),(s,t)=>Math.max(...t.map(o=>o.evaluate(s)))],abs:[tt,[tt],(s,[t])=>Math.abs(t.evaluate(s))],round:[tt,[tt],(s,[t])=>{const o=t.evaluate(s);return o<0?-Math.round(-o):Math.round(o)}],floor:[tt,[tt],(s,[t])=>Math.floor(t.evaluate(s))],ceil:[tt,[tt],(s,[t])=>Math.ceil(t.evaluate(s))],"filter-==":[kt,[yt,ar],(s,[t,o])=>s.properties()[t.value]===o.value],"filter-id-==":[kt,[ar],(s,[t])=>s.id()===t.value],"filter-type-==":[kt,[yt],(s,[t])=>s.geometryType()===t.value],"filter-<":[kt,[yt,ar],(s,[t,o])=>{const c=s.properties()[t.value],g=o.value;return typeof c==typeof g&&c<g}],"filter-id-<":[kt,[ar],(s,[t])=>{const o=s.id(),c=t.value;return typeof o==typeof c&&o<c}],"filter->":[kt,[yt,ar],(s,[t,o])=>{const c=s.properties()[t.value],g=o.value;return typeof c==typeof g&&c>g}],"filter-id->":[kt,[ar],(s,[t])=>{const o=s.id(),c=t.value;return typeof o==typeof c&&o>c}],"filter-<=":[kt,[yt,ar],(s,[t,o])=>{const c=s.properties()[t.value],g=o.value;return typeof c==typeof g&&c<=g}],"filter-id-<=":[kt,[ar],(s,[t])=>{const o=s.id(),c=t.value;return typeof o==typeof c&&o<=c}],"filter->=":[kt,[yt,ar],(s,[t,o])=>{const c=s.properties()[t.value],g=o.value;return typeof c==typeof g&&c>=g}],"filter-id->=":[kt,[ar],(s,[t])=>{const o=s.id(),c=t.value;return typeof o==typeof c&&o>=c}],"filter-has":[kt,[ar],(s,[t])=>t.value in s.properties()],"filter-has-id":[kt,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[kt,[wn(yt)],(s,[t])=>t.value.indexOf(s.geometryType())>=0],"filter-id-in":[kt,[wn(ar)],(s,[t])=>t.value.indexOf(s.id())>=0],"filter-in-small":[kt,[yt,wn(ar)],(s,[t,o])=>o.value.indexOf(s.properties()[t.value])>=0],"filter-in-large":[kt,[yt,wn(ar)],(s,[t,o])=>function(c,g,w,T){for(;w<=T;){const A=w+T>>1;if(g[A]===c)return!0;g[A]>c?T=A-1:w=A+1}return!1}(s.properties()[t.value],o.value,0,o.value.length-1)],all:{type:kt,overloads:[[[kt,kt],(s,[t,o])=>t.evaluate(s)&&o.evaluate(s)],[co(kt),(s,t)=>{for(const o of t)if(!o.evaluate(s))return!1;return!0}]]},any:{type:kt,overloads:[[[kt,kt],(s,[t,o])=>t.evaluate(s)||o.evaluate(s)],[co(kt),(s,t)=>{for(const o of t)if(o.evaluate(s))return!0;return!1}]]},"!":[kt,[kt],(s,[t])=>!t.evaluate(s)],"is-supported-script":[kt,[yt],(s,[t])=>{const o=s.globals&&s.globals.isSupportedScript;return!o||o(t.evaluate(s))}],upcase:[yt,[yt],(s,[t])=>t.evaluate(s).toUpperCase()],downcase:[yt,[yt],(s,[t])=>t.evaluate(s).toLowerCase()],concat:[yt,co(ar),(s,t)=>t.map(o=>qa(o.evaluate(s))).join("")],"resolved-locale":[yt,[Va],(s,[t])=>t.evaluate(s).resolvedLocale()]});class Vc{constructor(t,o){var c;this.expression=t,this._warningHistory={},this._evaluator=new Vr,this._defaultValue=o?(c=o).type==="color"&&jl(c.default)?new cr(0,0,0,0):c.type==="color"?cr.parse(c.default)||null:c.type==="padding"?ji.parse(c.default)||null:c.type==="variableAnchorOffsetCollection"?ui.parse(c.default)||null:c.type==="projectionDefinition"?ei.parse(c.default)||null:c.default===void 0?null:c.default:null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(t,o,c,g,w,T){return this._evaluator.globals=t,this._evaluator.feature=o,this._evaluator.featureState=c,this._evaluator.canonical=g,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=T,this.expression.evaluate(this._evaluator)}evaluate(t,o,c,g,w,T){this._evaluator.globals=t,this._evaluator.feature=o||null,this._evaluator.featureState=c||null,this._evaluator.canonical=g,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=T||null;try{const A=this.expression.evaluate(this._evaluator);if(A==null||typeof A=="number"&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new On(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(A)} instead.`);return A}catch(A){return this._warningHistory[A.message]||(this._warningHistory[A.message]=!0,typeof console<"u"&&console.warn(A.message)),this._defaultValue}}}function xi(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in Wa}function gs(s,t){const o=new hr(Wa,Uu,[],t?function(g){const w={color:Hr,string:yt,number:tt,enum:yt,boolean:kt,formatted:yi,padding:$a,projectionDefinition:$n,resolvedImage:Zn,variableAnchorOffsetCollection:sa};return g.type==="array"?wn(w[g.value]||ar,g.length):w[g.type]}(t):void 0),c=o.parse(s,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return c?Yh(new Vc(c,t)):Vo(o.errors)}class fo{constructor(t,o){this.kind=t,this._styleExpression=o,this.isStateDependent=t!=="constant"&&!Vu(o.expression)}evaluateWithoutErrorHandling(t,o,c,g,w,T){return this._styleExpression.evaluateWithoutErrorHandling(t,o,c,g,w,T)}evaluate(t,o,c,g,w,T){return this._styleExpression.evaluate(t,o,c,g,w,T)}}class Ul{constructor(t,o,c,g){this.kind=t,this.zoomStops=c,this._styleExpression=o,this.isStateDependent=t!=="camera"&&!Vu(o.expression),this.interpolationType=g}evaluateWithoutErrorHandling(t,o,c,g,w,T){return this._styleExpression.evaluateWithoutErrorHandling(t,o,c,g,w,T)}evaluate(t,o,c,g,w,T){return this._styleExpression.evaluate(t,o,c,g,w,T)}interpolationFactor(t,o,c){return this.interpolationType?Ui.interpolationFactor(this.interpolationType,t,o,c):0}}function $u(s,t){const o=gs(s,t);if(o.result==="error")return o;const c=o.value.expression,g=Nc(c);if(!g&&!$o(t))return Vo([new vr("","data expressions not supported")]);const w=Fc(c,["zoom"]);if(!w&&!Sa(t))return Vo([new vr("","zoom expressions not supported")]);const T=ea(c);return T||w?T instanceof vr?Vo([T]):T instanceof Ui&&!ua(t)?Vo([new vr("",'"interpolate" expressions cannot be used with this property')]):Yh(T?new Ul(g?"camera":"composite",o.value,T.labels,T instanceof Ui?T.interpolation:void 0):new fo(g?"constant":"source",o.value)):Vo([new vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ji{constructor(t,o){this._parameters=t,this._specification=o,Wt(this,Zo(this._parameters,this._specification))}static deserialize(t){return new Ji(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function ea(s){let t=null;if(s instanceof Ds)t=ea(s.result);else if(s instanceof Pu){for(const o of s.args)if(t=ea(o),t)break}else(s instanceof zs||s instanceof Ui)&&s.input instanceof la&&s.input.name==="zoom"&&(t=s);return t instanceof vr||s.eachChild(o=>{const c=ea(o);c instanceof vr?t=c:!t&&c?t=new vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&c&&t!==c&&(t=new vr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function ys(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const t of s.slice(1))if(!ys(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const _s={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ka(s){if(s==null)return{filter:()=>!0,needGeometry:!1};ys(s)||(s=Ho(s));const t=gs(s,_s);if(t.result==="error")throw new Error(t.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,c,g)=>t.value.evaluate(o,c,{},g),needGeometry:$c(s)}}function Go(s,t){return s<t?-1:s>t?1:0}function $c(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let t=1;t<s.length;t++)if($c(s[t]))return!0;return!1}function Ho(s){if(!s)return!0;const t=s[0];return s.length<=1?t!=="any":t==="=="?Vl(s[1],s[2],"=="):t==="!="?Br(Vl(s[1],s[2],"==")):t==="<"||t===">"||t==="<="||t===">="?Vl(s[1],s[2],t):t==="any"?(o=s.slice(1),["any"].concat(o.map(Ho))):t==="all"?["all"].concat(s.slice(1).map(Ho)):t==="none"?["all"].concat(s.slice(1).map(Ho).map(Br)):t==="in"?Di(s[1],s.slice(2)):t==="!in"?Br(Di(s[1],s.slice(2))):t==="has"?ti(s[1]):t!=="!has"||Br(ti(s[1]));var o}function Vl(s,t,o){switch(s){case"$type":return[`filter-type-${o}`,t];case"$id":return[`filter-id-${o}`,t];default:return[`filter-${o}`,s,t]}}function Di(s,t){if(t.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(o=>typeof o!=typeof t[0])?["filter-in-large",s,["literal",t.sort(Go)]]:["filter-in-small",s,["literal",t]]}}function ti(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Br(s){return["!",s]}function ta(s){const t=typeof s;if(t==="number"||t==="boolean"||t==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let g="[";for(const w of s)g+=`${ta(w)},`;return`${g}]`}const o=Object.keys(s).sort();let c="{";for(let g=0;g<o.length;g++)c+=`${JSON.stringify(o[g])}:${ta(s[o[g]])},`;return`${c}}`}function ma(s){let t="";for(const o of Oe)t+=`/${ta(s[o])}`;return t}function Zc(s){const t=s.value;return t?[new Je(s.key,t,"constants have been deprecated as of v8")]:[]}function un(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function po(s){if(Array.isArray(s))return s.map(po);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const t={};for(const o in s)t[o]=po(s[o]);return t}return un(s)}function ga(s){const t=s.key,o=s.value,c=s.valueSpec||{},g=s.objectElementValidators||{},w=s.style,T=s.styleSpec,A=s.validateSpec;let I=[];const k=Er(o);if(k!=="object")return[new Je(t,o,`object expected, ${k} found`)];for(const N in o){const V=N.split(".")[0],q=c[V]||c["*"];let Y;if(g[V])Y=g[V];else if(c[V])Y=A;else if(g["*"])Y=g["*"];else{if(!c["*"]){I.push(new Je(t,o[N],`unknown property "${N}"`));continue}Y=A}I=I.concat(Y({key:(t&&`${t}.`)+N,value:o[N],valueSpec:q,style:w,styleSpec:T,object:o,objectKey:N,validateSpec:A},o))}for(const N in c)g[N]||c[N].required&&c[N].default===void 0&&o[N]===void 0&&I.push(new Je(t,o,`missing required property "${N}"`));return I}function Wo(s){const t=s.value,o=s.valueSpec,c=s.style,g=s.styleSpec,w=s.key,T=s.arrayElementValidator||s.validateSpec;if(Er(t)!=="array")return[new Je(w,t,`array expected, ${Er(t)} found`)];if(o.length&&t.length!==o.length)return[new Je(w,t,`array length ${o.length} expected, length ${t.length} found`)];if(o["min-length"]&&t.length<o["min-length"])return[new Je(w,t,`array length at least ${o["min-length"]} expected, length ${t.length} found`)];let A={type:o.value,values:o.values};g.$version<7&&(A.function=o.function),Er(o.value)==="object"&&(A=o.value);let I=[];for(let k=0;k<t.length;k++)I=I.concat(T({array:t,arrayIndex:k,value:t[k],valueSpec:A,validateSpec:s.validateSpec,style:c,styleSpec:g,key:`${w}[${k}]`}));return I}function Ko(s){const t=s.key,o=s.value,c=s.valueSpec;let g=Er(o);return g==="number"&&o!=o&&(g="NaN"),g!=="number"?[new Je(t,o,`number expected, ${g} found`)]:"minimum"in c&&o<c.minimum?[new Je(t,o,`${o} is less than the minimum value ${c.minimum}`)]:"maximum"in c&&o>c.maximum?[new Je(t,o,`${o} is greater than the maximum value ${c.maximum}`)]:[]}function Yo(s){const t=s.valueSpec,o=un(s.value.type);let c,g,w,T={};const A=o!=="categorical"&&s.value.property===void 0,I=!A,k=Er(s.value.stops)==="array"&&Er(s.value.stops[0])==="array"&&Er(s.value.stops[0][0])==="object",N=ga({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(Y){if(o==="identity")return[new Je(Y.key,Y.value,'identity function may not have a "stops" property')];let Q=[];const ne=Y.value;return Q=Q.concat(Wo({key:Y.key,value:ne,valueSpec:Y.valueSpec,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,arrayElementValidator:V})),Er(ne)==="array"&&ne.length===0&&Q.push(new Je(Y.key,ne,"array must have at least one stop")),Q},default:function(Y){return Y.validateSpec({key:Y.key,value:Y.value,valueSpec:t,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec})}}});return o==="identity"&&A&&N.push(new Je(s.key,s.value,'missing required property "property"')),o==="identity"||s.value.stops||N.push(new Je(s.key,s.value,'missing required property "stops"')),o==="exponential"&&s.valueSpec.expression&&!ua(s.valueSpec)&&N.push(new Je(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(I&&!$o(s.valueSpec)?N.push(new Je(s.key,s.value,"property functions not supported")):A&&!Sa(s.valueSpec)&&N.push(new Je(s.key,s.value,"zoom functions not supported"))),o!=="categorical"&&!k||s.value.property!==void 0||N.push(new Je(s.key,s.value,'"property" property is required')),N;function V(Y){let Q=[];const ne=Y.value,ce=Y.key;if(Er(ne)!=="array")return[new Je(ce,ne,`array expected, ${Er(ne)} found`)];if(ne.length!==2)return[new Je(ce,ne,`array length 2 expected, length ${ne.length} found`)];if(k){if(Er(ne[0])!=="object")return[new Je(ce,ne,`object expected, ${Er(ne[0])} found`)];if(ne[0].zoom===void 0)return[new Je(ce,ne,"object stop key must have zoom")];if(ne[0].value===void 0)return[new Je(ce,ne,"object stop key must have value")];if(w&&w>un(ne[0].zoom))return[new Je(ce,ne[0].zoom,"stop zoom values must appear in ascending order")];un(ne[0].zoom)!==w&&(w=un(ne[0].zoom),g=void 0,T={}),Q=Q.concat(ga({key:`${ce}[0]`,value:ne[0],valueSpec:{zoom:{}},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{zoom:Ko,value:q}}))}else Q=Q.concat(q({key:`${ce}[0]`,value:ne[0],validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec},ne));return xi(po(ne[1]))?Q.concat([new Je(`${ce}[1]`,ne[1],"expressions are not allowed in function stops.")]):Q.concat(Y.validateSpec({key:`${ce}[1]`,value:ne[1],valueSpec:t,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec}))}function q(Y,Q){const ne=Er(Y.value),ce=un(Y.value),ge=Y.value!==null?Y.value:Q;if(c){if(ne!==c)return[new Je(Y.key,ge,`${ne} stop domain type must match previous stop domain type ${c}`)]}else c=ne;if(ne!=="number"&&ne!=="string"&&ne!=="boolean")return[new Je(Y.key,ge,"stop domain value must be a number, string, or boolean")];if(ne!=="number"&&o!=="categorical"){let Le=`number expected, ${ne} found`;return $o(t)&&o===void 0&&(Le+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Je(Y.key,ge,Le)]}return o!=="categorical"||ne!=="number"||isFinite(ce)&&Math.floor(ce)===ce?o!=="categorical"&&ne==="number"&&g!==void 0&&ce<g?[new Je(Y.key,ge,"stop domain values must appear in ascending order")]:(g=ce,o==="categorical"&&ce in T?[new Je(Y.key,ge,"stop domain values must be unique")]:(T[ce]=!0,[])):[new Je(Y.key,ge,`integer expected, found ${ce}`)]}}function Ya(s){const t=(s.expressionContext==="property"?$u:gs)(po(s.value),s.valueSpec);if(t.result==="error")return t.value.map(c=>new Je(`${s.key}${c.key}`,s.value,c.message));const o=t.value.expression||t.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!o.outputDefined())return[new Je(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!Vu(o))return[new Je(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!Vu(o))return[new Je(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!Fc(o,["zoom","feature-state"]))return[new Je(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!Nc(o))return[new Je(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Bs(s){const t=s.key,o=s.value,c=s.valueSpec,g=[];return Array.isArray(c.values)?c.values.indexOf(un(o))===-1&&g.push(new Je(t,o,`expected one of [${c.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(c.values).indexOf(un(o))===-1&&g.push(new Je(t,o,`expected one of [${Object.keys(c.values).join(", ")}], ${JSON.stringify(o)} found`)),g}function Zu(s){return ys(po(s.value))?Ya(Wt({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):qc(s)}function qc(s){const t=s.value,o=s.key;if(Er(t)!=="array")return[new Je(o,t,`array expected, ${Er(t)} found`)];const c=s.styleSpec;let g,w=[];if(t.length<1)return[new Je(o,t,"filter array must have at least 1 element")];switch(w=w.concat(Bs({key:`${o}[0]`,value:t[0],valueSpec:c.filter_operator,style:s.style,styleSpec:s.styleSpec})),un(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&un(t[1])==="$type"&&w.push(new Je(o,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&w.push(new Je(o,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(g=Er(t[1]),g!=="string"&&w.push(new Je(`${o}[1]`,t[1],`string expected, ${g} found`)));for(let T=2;T<t.length;T++)g=Er(t[T]),un(t[1])==="$type"?w=w.concat(Bs({key:`${o}[${T}]`,value:t[T],valueSpec:c.geometry_type,style:s.style,styleSpec:s.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&w.push(new Je(`${o}[${T}]`,t[T],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let T=1;T<t.length;T++)w=w.concat(qc({key:`${o}[${T}]`,value:t[T],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":g=Er(t[1]),t.length!==2?w.push(new Je(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):g!=="string"&&w.push(new Je(`${o}[1]`,t[1],`string expected, ${g} found`))}return w}function $l(s,t){const o=s.key,c=s.validateSpec,g=s.style,w=s.styleSpec,T=s.value,A=s.objectKey,I=w[`${t}_${s.layerType}`];if(!I)return[];const k=A.match(/^(.*)-transition$/);if(t==="paint"&&k&&I[k[1]]&&I[k[1]].transition)return c({key:o,value:T,valueSpec:w.transition,style:g,styleSpec:w});const N=s.valueSpec||I[A];if(!N)return[new Je(o,T,`unknown property "${A}"`)];let V;if(Er(T)==="string"&&$o(N)&&!N.tokens&&(V=/^{([^}]+)}$/.exec(T)))return[new Je(o,T,`"${A}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(V[1])} }\`.`)];const q=[];return s.layerType==="symbol"&&(A==="text-field"&&g&&!g.glyphs&&q.push(new Je(o,T,'use of "text-field" requires a style "glyphs" property')),A==="text-font"&&jl(po(T))&&un(T.type)==="identity"&&q.push(new Je(o,T,'"text-font" does not support identity functions'))),q.concat(c({key:s.key,value:T,valueSpec:N,style:g,styleSpec:w,expressionContext:"property",propertyType:t,propertyKey:A}))}function Xh(s){return $l(s,"paint")}function Xo(s){return $l(s,"layout")}function Gc(s){let t=[];const o=s.value,c=s.key,g=s.style,w=s.styleSpec;o.type||o.ref||t.push(new Je(c,o,'either "type" or "ref" is required'));let T=un(o.type);const A=un(o.ref);if(o.id){const I=un(o.id);for(let k=0;k<s.arrayIndex;k++){const N=g.layers[k];un(N.id)===I&&t.push(new Je(c,o.id,`duplicate layer id "${o.id}", previously used at line ${N.id.__line__}`))}}if("ref"in o){let I;["type","source","source-layer","filter","layout"].forEach(k=>{k in o&&t.push(new Je(c,o[k],`"${k}" is prohibited for ref layers`))}),g.layers.forEach(k=>{un(k.id)===A&&(I=k)}),I?I.ref?t.push(new Je(c,o.ref,"ref cannot reference another ref layer")):T=un(I.type):t.push(new Je(c,o.ref,`ref layer "${A}" not found`))}else if(T!=="background")if(o.source){const I=g.sources&&g.sources[o.source],k=I&&un(I.type);I?k==="vector"&&T==="raster"?t.push(new Je(c,o.source,`layer "${o.id}" requires a raster source`)):k!=="raster-dem"&&T==="hillshade"?t.push(new Je(c,o.source,`layer "${o.id}" requires a raster-dem source`)):k==="raster"&&T!=="raster"?t.push(new Je(c,o.source,`layer "${o.id}" requires a vector source`)):k!=="vector"||o["source-layer"]?k==="raster-dem"&&T!=="hillshade"?t.push(new Je(c,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):T!=="line"||!o.paint||!o.paint["line-gradient"]||k==="geojson"&&I.lineMetrics||t.push(new Je(c,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Je(c,o,`layer "${o.id}" must specify a "source-layer"`)):t.push(new Je(c,o.source,`source "${o.source}" not found`))}else t.push(new Je(c,o,'missing required property "source"'));return t=t.concat(ga({key:c,value:o,valueSpec:w.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${c}.type`,value:o.type,valueSpec:w.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:o,objectKey:"type"}),filter:Zu,layout:I=>ga({layer:o,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":k=>Xo(Wt({layerType:T},k))}}),paint:I=>ga({layer:o,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":k=>Xh(Wt({layerType:T},k))}})}})),t}function Vi(s){const t=s.value,o=s.key,c=Er(t);return c!=="string"?[new Je(o,t,`string expected, ${c} found`)]:[]}const Zl={promoteId:function({key:s,value:t}){if(Er(t)==="string")return Vi({key:s,value:t});{const o=[];for(const c in t)o.push(...Vi({key:`${s}.${c}`,value:t[c]}));return o}}};function qu(s){const t=s.value,o=s.key,c=s.styleSpec,g=s.style,w=s.validateSpec;if(!t.type)return[new Je(o,t,'"type" is required')];const T=un(t.type);let A;switch(T){case"vector":case"raster":return A=ga({key:o,value:t,valueSpec:c[`source_${T.replace("-","_")}`],style:s.style,styleSpec:c,objectElementValidators:Zl,validateSpec:w}),A;case"raster-dem":return A=function(I){var k;const N=(k=I.sourceName)!==null&&k!==void 0?k:"",V=I.value,q=I.styleSpec,Y=q.source_raster_dem,Q=I.style;let ne=[];const ce=Er(V);if(V===void 0)return ne;if(ce!=="object")return ne.push(new Je("source_raster_dem",V,`object expected, ${ce} found`)),ne;const ge=un(V.encoding)==="custom",Le=["redFactor","greenFactor","blueFactor","baseShift"],ve=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const H in V)!ge&&Le.includes(H)?ne.push(new Je(H,V[H],`In "${N}": "${H}" is only valid when "encoding" is set to "custom". ${ve} encoding found`)):Y[H]?ne=ne.concat(I.validateSpec({key:H,value:V[H],valueSpec:Y[H],validateSpec:I.validateSpec,style:Q,styleSpec:q})):ne.push(new Je(H,V[H],`unknown property "${H}"`));return ne}({sourceName:o,value:t,style:s.style,styleSpec:c,validateSpec:w}),A;case"geojson":if(A=ga({key:o,value:t,valueSpec:c.source_geojson,style:g,styleSpec:c,validateSpec:w,objectElementValidators:Zl}),t.cluster)for(const I in t.clusterProperties){const[k,N]=t.clusterProperties[I],V=typeof k=="string"?[k,["accumulated"],["get",I]]:k;A.push(...Ya({key:`${o}.${I}.map`,value:N,expressionContext:"cluster-map"})),A.push(...Ya({key:`${o}.${I}.reduce`,value:V,expressionContext:"cluster-reduce"}))}return A;case"video":return ga({key:o,value:t,valueSpec:c.source_video,style:g,validateSpec:w,styleSpec:c});case"image":return ga({key:o,value:t,valueSpec:c.source_image,style:g,validateSpec:w,styleSpec:c});case"canvas":return[new Je(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Bs({key:`${o}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function ql(s){const t=s.value,o=s.styleSpec,c=o.light,g=s.style;let w=[];const T=Er(t);if(t===void 0)return w;if(T!=="object")return w=w.concat([new Je("light",t,`object expected, ${T} found`)]),w;for(const A in t){const I=A.match(/^(.*)-transition$/);w=w.concat(I&&c[I[1]]&&c[I[1]].transition?s.validateSpec({key:A,value:t[A],valueSpec:o.transition,validateSpec:s.validateSpec,style:g,styleSpec:o}):c[A]?s.validateSpec({key:A,value:t[A],valueSpec:c[A],validateSpec:s.validateSpec,style:g,styleSpec:o}):[new Je(A,t[A],`unknown property "${A}"`)])}return w}function Gu(s){const t=s.value,o=s.styleSpec,c=o.sky,g=s.style,w=Er(t);if(t===void 0)return[];if(w!=="object")return[new Je("sky",t,`object expected, ${w} found`)];let T=[];for(const A in t)T=T.concat(c[A]?s.validateSpec({key:A,value:t[A],valueSpec:c[A],style:g,styleSpec:o}):[new Je(A,t[A],`unknown property "${A}"`)]);return T}function Qh(s){const t=s.value,o=s.styleSpec,c=o.terrain,g=s.style;let w=[];const T=Er(t);if(t===void 0)return w;if(T!=="object")return w=w.concat([new Je("terrain",t,`object expected, ${T} found`)]),w;for(const A in t)w=w.concat(c[A]?s.validateSpec({key:A,value:t[A],valueSpec:c[A],validateSpec:s.validateSpec,style:g,styleSpec:o}):[new Je(A,t[A],`unknown property "${A}"`)]);return w}function Jh(s){let t=[];const o=s.value,c=s.key;if(Array.isArray(o)){const g=[],w=[];for(const T in o)o[T].id&&g.includes(o[T].id)&&t.push(new Je(c,o,`all the sprites' ids must be unique, but ${o[T].id} is duplicated`)),g.push(o[T].id),o[T].url&&w.includes(o[T].url)&&t.push(new Je(c,o,`all the sprites' URLs must be unique, but ${o[T].url} is duplicated`)),w.push(o[T].url),t=t.concat(ga({key:`${c}[${T}]`,value:o[T],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return t}return Vi({key:c,value:o})}const Ta={"*":()=>[],array:Wo,boolean:function(s){const t=s.value,o=s.key,c=Er(t);return c!=="boolean"?[new Je(o,t,`boolean expected, ${c} found`)]:[]},number:Ko,color:function(s){const t=s.key,o=s.value,c=Er(o);return c!=="string"?[new Je(t,o,`color expected, ${c} found`)]:cr.parse(String(o))?[]:[new Je(t,o,`color expected, "${o}" found`)]},constants:Zc,enum:Bs,filter:Zu,function:Yo,layer:Gc,object:ga,source:qu,light:ql,sky:Gu,terrain:Qh,projection:function(s){const t=s.value,o=s.styleSpec,c=o.projection,g=s.style,w=Er(t);if(t===void 0)return[];if(w!=="object")return[new Je("projection",t,`object expected, ${w} found`)];let T=[];for(const A in t)T=T.concat(c[A]?s.validateSpec({key:A,value:t[A],valueSpec:c[A],style:g,styleSpec:o}):[new Je(A,t[A],`unknown property "${A}"`)]);return T},projectionDefinition:function(s){const t=s.key;let o=s.value;o=o instanceof String?o.valueOf():o;const c=Er(o);return c!=="array"||function(g){return Array.isArray(g)&&g.length===3&&typeof g[0]=="string"&&typeof g[1]=="string"&&typeof g[2]=="number"}(o)||function(g){return!!["interpolate","step","literal"].includes(g[0])}(o)?["array","string"].includes(c)?[]:[new Je(t,o,`projection expected, invalid type "${c}" found`)]:[new Je(t,o,`projection expected, invalid array ${JSON.stringify(o)} found`)]},string:Vi,formatted:function(s){return Vi(s).length===0?[]:Ya(s)},resolvedImage:function(s){return Vi(s).length===0?[]:Ya(s)},padding:function(s){const t=s.key,o=s.value;if(Er(o)==="array"){if(o.length<1||o.length>4)return[new Je(t,o,`padding requires 1 to 4 values; ${o.length} values found`)];const c={type:"number"};let g=[];for(let w=0;w<o.length;w++)g=g.concat(s.validateSpec({key:`${t}[${w}]`,value:o[w],validateSpec:s.validateSpec,valueSpec:c}));return g}return Ko({key:t,value:o,valueSpec:{}})},variableAnchorOffsetCollection:function(s){const t=s.key,o=s.value,c=Er(o),g=s.styleSpec;if(c!=="array"||o.length<1||o.length%2!=0)return[new Je(t,o,"variableAnchorOffsetCollection requires a non-empty array of even length")];let w=[];for(let T=0;T<o.length;T+=2)w=w.concat(Bs({key:`${t}[${T}]`,value:o[T],valueSpec:g.layout_symbol["text-anchor"]})),w=w.concat(Wo({key:`${t}[${T+1}]`,value:o[T+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:g}));return w},sprite:Jh};function js(s){const t=s.value,o=s.valueSpec,c=s.styleSpec;return s.validateSpec=js,o.expression&&jl(un(t))?Yo(s):o.expression&&xi(po(t))?Ya(s):o.type&&Ta[o.type]?Ta[o.type](s):ga(Wt({},s,{valueSpec:o.type?c[o.type]:o}))}function ci(s){const t=s.value,o=s.key,c=Vi(s);return c.length||(t.indexOf("{fontstack}")===-1&&c.push(new Je(o,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&c.push(new Je(o,t,'"glyphs" url must include a "{range}" token'))),c}function bi(s,t=se){let o=[];return o=o.concat(js({key:"",value:s,valueSpec:t.$root,styleSpec:t,style:s,validateSpec:js,objectElementValidators:{glyphs:ci,"*":()=>[]}})),s.constants&&(o=o.concat(Zc({key:"constants",value:s.constants}))),Hc(o)}function Ma(s){return function(t){return s({...t,validateSpec:js})}}function Hc(s){return[].concat(s).sort((t,o)=>t.line-o.line)}function Aa(s){return function(...t){return Hc(s.apply(this,t))}}bi.source=Aa(Ma(qu)),bi.sprite=Aa(Ma(Jh)),bi.glyphs=Aa(Ma(ci)),bi.light=Aa(Ma(ql)),bi.sky=Aa(Ma(Gu)),bi.terrain=Aa(Ma(Qh)),bi.layer=Aa(Ma(Gc)),bi.filter=Aa(Ma(Zu)),bi.paintProperty=Aa(Ma(Xh)),bi.layoutProperty=Aa(Ma(Xo));const Xn=bi,Xa=Xn.light,vs=Xn.sky,rd=Xn.paintProperty,xs=Xn.layoutProperty;function bs(s,t){let o=!1;if(t&&t.length)for(const c of t)s.fire(new he(new Error(c.message))),o=!0;return o}class dn{constructor(t,o,c){const g=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const T=new Int32Array(this.arrayBuffer);t=T[0],this.d=(o=T[1])+2*(c=T[2]);for(let I=0;I<this.d*this.d;I++){const k=T[3+I],N=T[3+I+1];g.push(k===N?null:T.subarray(k,N))}const A=T[3+g.length+1];this.keys=T.subarray(T[3+g.length],A),this.bboxes=T.subarray(A),this.insert=this._insertReadonly}else{this.d=o+2*c;for(let T=0;T<this.d*this.d;T++)g.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=t,this.padding=c,this.scale=o/t,this.uid=0;const w=c/o*t;this.min=-w,this.max=t+w}insert(t,o,c,g,w){this._forEachCell(o,c,g,w,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(o),this.bboxes.push(c),this.bboxes.push(g),this.bboxes.push(w)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,o,c,g,w,T){this.cells[w].push(T)}query(t,o,c,g,w){const T=this.min,A=this.max;if(t<=T&&o<=T&&A<=c&&A<=g&&!w)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(t,o,c,g,this._queryCell,I,{},w),I}}_queryCell(t,o,c,g,w,T,A,I){const k=this.cells[w];if(k!==null){const N=this.keys,V=this.bboxes;for(let q=0;q<k.length;q++){const Y=k[q];if(A[Y]===void 0){const Q=4*Y;(I?I(V[Q+0],V[Q+1],V[Q+2],V[Q+3]):t<=V[Q+2]&&o<=V[Q+3]&&c>=V[Q+0]&&g>=V[Q+1])?(A[Y]=!0,T.push(N[Y])):A[Y]=!1}}}}_forEachCell(t,o,c,g,w,T,A,I){const k=this._convertToCellCoord(t),N=this._convertToCellCoord(o),V=this._convertToCellCoord(c),q=this._convertToCellCoord(g);for(let Y=k;Y<=V;Y++)for(let Q=N;Q<=q;Q++){const ne=this.d*Q+Y;if((!I||I(this._convertFromCellCoord(Y),this._convertFromCellCoord(Q),this._convertFromCellCoord(Y+1),this._convertFromCellCoord(Q+1)))&&w.call(this,t,o,c,g,ne,T,A,I))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,o=3+this.cells.length+1+1;let c=0;for(let T=0;T<this.cells.length;T++)c+=this.cells[T].length;const g=new Int32Array(o+c+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let w=o;for(let T=0;T<t.length;T++){const A=t[T];g[3+T]=w,g.set(A,w),w+=A.length}return g[3+t.length]=w,g.set(this.keys,w),w+=this.keys.length,g[3+t.length+1]=w,g.set(this.bboxes,w),w+=this.bboxes.length,g.buffer}static serialize(t,o){const c=t.toArrayBuffer();return o&&o.push(c),{buffer:c}}static deserialize(t){return new dn(t.buffer)}}const Ca={};function Ot(s,t,o={}){if(Ca[s])throw new Error(`${s} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:s,writeable:!1}),Ca[s]={klass:t,omit:o.omit||[],shallow:o.shallow||[]}}Ot("Object",Object),Ot("TransferableGridIndex",dn),Ot("Color",cr),Ot("Error",Error),Ot("AJAXError",Pi),Ot("ResolvedImage",Xi),Ot("StylePropertyFunction",Ji),Ot("StyleExpression",Vc,{omit:["_evaluator"]}),Ot("ZoomDependentExpression",Ul),Ot("ZoomConstantExpression",fo),Ot("CompoundExpression",la,{omit:["_evaluate"]});for(const s in Wa)Wa[s]._classRegistryKey||Ot(`Expression_${s}`,Wa[s]);function nd(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function ef(s){return s.$name||s.constructor._classRegistryKey}function Bn(s){return!function(t){if(t===null||typeof t!="object")return!1;const o=ef(t);return!(!o||o==="Object")}(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||nd(s)||Yn(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function Qo(s,t){if(Bn(s))return(nd(s)||Yn(s))&&t&&t.push(s),ArrayBuffer.isView(s)&&t&&t.push(s.buffer),s instanceof ImageData&&t&&t.push(s.data.buffer),s;if(Array.isArray(s)){const w=[];for(const T of s)w.push(Qo(T,t));return w}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);const o=ef(s);if(!o)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!Ca[o])throw new Error(`${o} is not registered.`);const{klass:c}=Ca[o],g=c.serialize?c.serialize(s,t):{};if(c.serialize){if(t&&g===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const w in s){if(!s.hasOwnProperty(w)||Ca[o].omit.indexOf(w)>=0)continue;const T=s[w];g[w]=Ca[o].shallow.indexOf(w)>=0?T:Qo(T,t)}s instanceof Error&&(g.message=s.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(g.$name=o),g}function Qa(s){if(Bn(s))return s;if(Array.isArray(s))return s.map(Qa);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);const t=ef(s)||"Object";if(!Ca[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:o}=Ca[t];if(!o)throw new Error(`can't deserialize unregistered class ${t}`);if(o.deserialize)return o.deserialize(s);const c=Object.create(o.prototype);for(const g of Object.keys(s)){if(g==="$name")continue;const w=s[g];c[g]=Ca[t].shallow.indexOf(g)>=0?w:Qa(w)}return c}class Ns{constructor(){this.first=!0}update(t,o){const c=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=c,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=c,!0):(this.lastFloorZoom>c?(this.lastIntegerZoom=c+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<c&&(this.lastIntegerZoom=c,this.lastIntegerZoomTime=o),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=c,!0))}}const Tr={"Latin-1 Supplement":s=>s>=128&&s<=255,"Hangul Jamo":s=>s>=4352&&s<=4607,Khmer:s=>s>=6016&&s<=6143,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Hiragana:s=>s>=12352&&s<=12447,Katakana:s=>s>=12448&&s<=12543,Kanbun:s=>s>=12688&&s<=12703,"CJK Strokes":s=>s>=12736&&s<=12783,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"CJK Unified Ideographs":s=>s>=19968&&s<=40959,"Hangul Syllables":s=>s>=44032&&s<=55215,"Private Use Area":s=>s>=57344&&s<=63743,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function Fs(s){for(const t of s)if(ws(t.charCodeAt(0)))return!0;return!1}function Jo(s){for(const t of s)if(!id(t.charCodeAt(0)))return!1;return!0}function Wc(s){const t=s.map(o=>{try{return new RegExp(`\\p{sc=${o}}`,"u").source}catch{return null}}).filter(o=>o);return new RegExp(t.join("|"),"u")}const Kc=Wc(["Arab","Dupl","Mong","Ougr","Syrc"]);function id(s){return!Kc.test(String.fromCodePoint(s))}const tf=Wc(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function ws(s){return!(s!==746&&s!==747&&(s<4352||!(Tr["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||Tr["CJK Compatibility"](s)||Tr["CJK Strokes"](s)||!(!Tr["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||Tr["Enclosed CJK Letters and Months"](s)||Tr["Ideographic Description Characters"](s)||Tr.Kanbun(s)||Tr.Katakana(s)&&s!==12540||!(!Tr["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!Tr["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||Tr["Vertical Forms"](s)||Tr["Yijing Hexagram Symbols"](s)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(s))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(s))||tf.test(String.fromCodePoint(s)))))}function Yc(s){return!(ws(s)||function(t){return!!(Tr["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||Tr["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||Tr["Letterlike Symbols"](t)||Tr["Number Forms"](t)||Tr["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||Tr["Control Pictures"](t)&&t!==9251||Tr["Optical Character Recognition"](t)||Tr["Enclosed Alphanumerics"](t)||Tr["Geometric Shapes"](t)||Tr["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Tr["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Tr["CJK Symbols and Punctuation"](t)||Tr.Katakana(t)||Tr["Private Use Area"](t)||Tr["CJK Compatibility Forms"](t)||Tr["Small Form Variants"](t)||Tr["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(s))}const Hu=Wc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Xc(s){return Hu.test(String.fromCodePoint(s))}function Us(s,t){return!(!t&&Xc(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||Tr.Khmer(s))}function Rr(s){for(const t of s)if(Xc(t.charCodeAt(0)))return!0;return!1}const qr=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){if(qr.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(s,t){return u(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(s.pluginStatus!=="loading")return this.setState(s),s;const o=s.pluginURL,c=new Promise(w=>{this.loadScriptResolve=w});t(o);const g=new Promise(w=>setTimeout(()=>w(),this.TIMEOUT));if(yield Promise.race([c,g]),this.isParsed()){const w={pluginStatus:"loaded",pluginURL:o};return this.setState(w),w}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${o}`)})}};class mr{constructor(t,o){this.zoom=t,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ns,this.transition={})}isSupportedScript(t){return function(o,c){for(const g of o)if(!Us(g.charCodeAt(0),c))return!1;return!0}(t,qr.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,o=t-Math.floor(t),c=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*c}:{fromScale:.5,toScale:1,t:1-(1-c)*o}}}class mo{constructor(t,o){this.property=t,this.value=o,this.expression=function(c,g){if(jl(c))return new Ji(c,g);if(xi(c)){const w=$u(c,g);if(w.result==="error")throw new Error(w.value.map(T=>`${T.key}: ${T.message}`).join(", "));return w.value}{let w=c;return g.type==="color"&&typeof c=="string"?w=cr.parse(c):g.type!=="padding"||typeof c!="number"&&!Array.isArray(c)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(c)?w=ui.parse(c):g.type==="projectionDefinition"&&typeof c=="string"&&(w=ei.parse(c)):w=ji.parse(c),{kind:"constant",evaluate:()=>w}}}(o===void 0?t.specification.default:o,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,o,c){return this.property.possiblyEvaluate(this,t,o,c)}}class Vs{constructor(t){this.property=t,this.value=new mo(t,void 0)}transitioned(t,o){return new go(this.property,this.value,o,Qr({},t.transition,this.transition),t.now)}untransitioned(){return new go(this.property,this.value,null,{},0)}}class $s{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return ln(this._values[t].value.value)}setValue(t,o){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Vs(this._values[t].property)),this._values[t].value=new mo(this._values[t].property,o===null?void 0:ln(o))}getTransition(t){return ln(this._values[t].transition)}setTransition(t,o){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Vs(this._values[t].property)),this._values[t].transition=ln(o)||void 0}serialize(){const t={};for(const o of Object.keys(this._values)){const c=this.getValue(o);c!==void 0&&(t[o]=c);const g=this.getTransition(o);g!==void 0&&(t[`${o}-transition`]=g)}return t}transitioned(t,o){const c=new Gl(this._properties);for(const g of Object.keys(this._values))c._values[g]=this._values[g].transitioned(t,o._values[g]);return c}untransitioned(){const t=new Gl(this._properties);for(const o of Object.keys(this._values))t._values[o]=this._values[o].untransitioned();return t}}class go{constructor(t,o,c,g,w){this.property=t,this.value=o,this.begin=w+g.delay||0,this.end=this.begin+g.duration||0,t.specification.transition&&(g.delay||g.duration)&&(this.prior=c)}possiblyEvaluate(t,o,c){const g=t.now||0,w=this.value.possiblyEvaluate(t,o,c),T=this.prior;if(T){if(g>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(g<this.begin)return T.possiblyEvaluate(t,o,c);{const A=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(T.possiblyEvaluate(t,o,c),w,Zt(A))}}return w}}class Gl{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,o,c){const g=new In(this._properties);for(const w of Object.keys(this._values))g._values[w]=this._values[w].possiblyEvaluate(t,o,c);return g}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class yo{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return this._values[t].value!==void 0}getValue(t){return ln(this._values[t].value)}setValue(t,o){this._values[t]=new mo(this._values[t].property,o===null?void 0:ln(o))}serialize(){const t={};for(const o of Object.keys(this._values)){const c=this.getValue(o);c!==void 0&&(t[o]=c)}return t}possiblyEvaluate(t,o,c){const g=new In(this._properties);for(const w of Object.keys(this._values))g._values[w]=this._values[w].possiblyEvaluate(t,o,c);return g}}class Ss{constructor(t,o,c){this.property=t,this.value=o,this.parameters=c}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,o,c,g){return this.property.evaluate(this.value,this.parameters,t,o,c,g)}}class In{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class $t{constructor(t){this.specification=t}possiblyEvaluate(t,o){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(o)}interpolate(t,o,c){const g=fn[this.specification.type];return g?g(t,o,c):t}}class Kt{constructor(t,o){this.specification=t,this.overrides=o}possiblyEvaluate(t,o,c,g){return new Ss(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(o,null,{},c,g)}:t.expression,o)}interpolate(t,o,c){if(t.value.kind!=="constant"||o.value.kind!=="constant")return t;if(t.value.value===void 0||o.value.value===void 0)return new Ss(this,{kind:"constant",value:void 0},t.parameters);const g=fn[this.specification.type];if(g){const w=g(t.value.value,o.value.value,c);return new Ss(this,{kind:"constant",value:w},t.parameters)}return t}evaluate(t,o,c,g,w,T){return t.kind==="constant"?t.value:t.evaluate(o,c,g,w,T)}}class Hl extends Kt{possiblyEvaluate(t,o,c,g){if(t.value===void 0)return new Ss(this,{kind:"constant",value:void 0},o);if(t.expression.kind==="constant"){const w=t.expression.evaluate(o,null,{},c,g),T=t.property.specification.type==="resolvedImage"&&typeof w!="string"?w.name:w,A=this._calculate(T,T,T,o);return new Ss(this,{kind:"constant",value:A},o)}if(t.expression.kind==="camera"){const w=this._calculate(t.expression.evaluate({zoom:o.zoom-1}),t.expression.evaluate({zoom:o.zoom}),t.expression.evaluate({zoom:o.zoom+1}),o);return new Ss(this,{kind:"constant",value:w},o)}return new Ss(this,t.expression,o)}evaluate(t,o,c,g,w,T){if(t.kind==="source"){const A=t.evaluate(o,c,g,w,T);return this._calculate(A,A,A,o)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(o.zoom)-1},c,g),t.evaluate({zoom:Math.floor(o.zoom)},c,g),t.evaluate({zoom:Math.floor(o.zoom)+1},c,g),o):t.value}_calculate(t,o,c,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:t,to:o}:{from:c,to:o}}interpolate(t){return t}}class Qc{constructor(t){this.specification=t}possiblyEvaluate(t,o,c,g){if(t.value!==void 0){if(t.expression.kind==="constant"){const w=t.expression.evaluate(o,null,{},c,g);return this._calculate(w,w,w,o)}return this._calculate(t.expression.evaluate(new mr(Math.floor(o.zoom-1),o)),t.expression.evaluate(new mr(Math.floor(o.zoom),o)),t.expression.evaluate(new mr(Math.floor(o.zoom+1),o)),o)}}_calculate(t,o,c,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:t,to:o}:{from:c,to:o}}interpolate(t){return t}}class rf{constructor(t){this.specification=t}possiblyEvaluate(t,o,c,g){return!!t.expression.evaluate(o,null,{},c,g)}interpolate(){return!1}}class $i{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in t){const c=t[o];c.specification.overridable&&this.overridableProperties.push(o);const g=this.defaultPropertyValues[o]=new mo(c,void 0),w=this.defaultTransitionablePropertyValues[o]=new Vs(c);this.defaultTransitioningPropertyValues[o]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=g.possiblyEvaluate({})}}}Ot("DataDrivenProperty",Kt),Ot("DataConstantProperty",$t),Ot("CrossFadedDataDrivenProperty",Hl),Ot("CrossFadedProperty",Qc),Ot("ColorRampProperty",rf);const Jc="-transition";class Ea extends be{constructor(t,o){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),o.layout&&(this._unevaluatedLayout=new yo(o.layout)),o.paint)){this._transitionablePaint=new $s(o.paint);for(const c in t.paint)this.setPaintProperty(c,t.paint[c],{validate:!1});for(const c in t.layout)this.setLayoutProperty(c,t.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new In(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,o,c={}){o!=null&&this._validate(xs,`layers.${this.id}.layout.${t}`,t,o,c)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,o):this.visibility=o)}getPaintProperty(t){return t.endsWith(Jc)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,o,c={}){if(o!=null&&this._validate(rd,`layers.${this.id}.paint.${t}`,t,o,c))return!1;if(t.endsWith(Jc))return this._transitionablePaint.setTransition(t.slice(0,-11),o||void 0),!1;{const g=this._transitionablePaint._values[t],w=g.property.specification["property-type"]==="cross-faded-data-driven",T=g.value.isDataDriven(),A=g.value;this._transitionablePaint.setValue(t,o),this._handleSpecialPaintPropertyUpdate(t);const I=this._transitionablePaint._values[t].value;return I.isDataDriven()||T||w||this._handleOverridablePaintPropertyUpdate(t,A,I)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,o,c){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,o){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,o)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),Fr(t,(o,c)=>!(o===void 0||c==="layout"&&!Object.keys(o).length||c==="paint"&&!Object.keys(o).length))}_validate(t,o,c,g,w={}){return(!w||w.validate!==!1)&&bs(this,t.call(Xn,{key:o,layerType:this.type,objectKey:c,value:g,styleSpec:se,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const o=this.paint.get(t);if(o instanceof Ss&&$o(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}const hi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Dn{constructor(t,o){this._structArray=t,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class _n{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,o){return t._trim(),o&&(t.isTransferred=!0,o.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const o=Object.create(this.prototype);return o.arrayBuffer=t.arrayBuffer,o.length=t.length,o.capacity=t.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Tn(s,t=1){let o=0,c=0;return{members:s.map(g=>{const w=hi[g.type].BYTES_PER_ELEMENT,T=o=Wl(o,Math.max(t,w)),A=g.components||1;return c=Math.max(c,w),o+=w*A,{name:g.name,type:g.type,components:A,offset:T}}),size:Wl(o,Math.max(c,t)),alignment:t}}function Wl(s,t){return Math.ceil(s/t)*t}class el extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o){const c=this.length;return this.resize(c+1),this.emplace(c,t,o)}emplace(t,o,c){const g=2*t;return this.int16[g+0]=o,this.int16[g+1]=c,t}}el.prototype.bytesPerElement=4,Ot("StructArrayLayout2i4",el);class Pa extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,c)}emplace(t,o,c,g){const w=3*t;return this.int16[w+0]=o,this.int16[w+1]=c,this.int16[w+2]=g,t}}Pa.prototype.bytesPerElement=6,Ot("StructArrayLayout3i6",Pa);class Ra extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,g){const w=this.length;return this.resize(w+1),this.emplace(w,t,o,c,g)}emplace(t,o,c,g,w){const T=4*t;return this.int16[T+0]=o,this.int16[T+1]=c,this.int16[T+2]=g,this.int16[T+3]=w,t}}Ra.prototype.bytesPerElement=8,Ot("StructArrayLayout4i8",Ra);class Kl extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w,T){const A=this.length;return this.resize(A+1),this.emplace(A,t,o,c,g,w,T)}emplace(t,o,c,g,w,T,A){const I=6*t;return this.int16[I+0]=o,this.int16[I+1]=c,this.int16[I+2]=g,this.int16[I+3]=w,this.int16[I+4]=T,this.int16[I+5]=A,t}}Kl.prototype.bytesPerElement=12,Ot("StructArrayLayout2i4i12",Kl);class tl extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w,T){const A=this.length;return this.resize(A+1),this.emplace(A,t,o,c,g,w,T)}emplace(t,o,c,g,w,T,A){const I=4*t,k=8*t;return this.int16[I+0]=o,this.int16[I+1]=c,this.uint8[k+4]=g,this.uint8[k+5]=w,this.uint8[k+6]=T,this.uint8[k+7]=A,t}}tl.prototype.bytesPerElement=8,Ot("StructArrayLayout2i4ub8",tl);class rl extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o){const c=this.length;return this.resize(c+1),this.emplace(c,t,o)}emplace(t,o,c){const g=2*t;return this.float32[g+0]=o,this.float32[g+1]=c,t}}rl.prototype.bytesPerElement=8,Ot("StructArrayLayout2f8",rl);class Yl extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w,T,A,I,k,N){const V=this.length;return this.resize(V+1),this.emplace(V,t,o,c,g,w,T,A,I,k,N)}emplace(t,o,c,g,w,T,A,I,k,N,V){const q=10*t;return this.uint16[q+0]=o,this.uint16[q+1]=c,this.uint16[q+2]=g,this.uint16[q+3]=w,this.uint16[q+4]=T,this.uint16[q+5]=A,this.uint16[q+6]=I,this.uint16[q+7]=k,this.uint16[q+8]=N,this.uint16[q+9]=V,t}}Yl.prototype.bytesPerElement=20,Ot("StructArrayLayout10ui20",Yl);class eh extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w,T,A,I,k,N,V,q){const Y=this.length;return this.resize(Y+1),this.emplace(Y,t,o,c,g,w,T,A,I,k,N,V,q)}emplace(t,o,c,g,w,T,A,I,k,N,V,q,Y){const Q=12*t;return this.int16[Q+0]=o,this.int16[Q+1]=c,this.int16[Q+2]=g,this.int16[Q+3]=w,this.uint16[Q+4]=T,this.uint16[Q+5]=A,this.uint16[Q+6]=I,this.uint16[Q+7]=k,this.int16[Q+8]=N,this.int16[Q+9]=V,this.int16[Q+10]=q,this.int16[Q+11]=Y,t}}eh.prototype.bytesPerElement=24,Ot("StructArrayLayout4i4ui4i24",eh);class nl extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,c)}emplace(t,o,c,g){const w=3*t;return this.float32[w+0]=o,this.float32[w+1]=c,this.float32[w+2]=g,t}}nl.prototype.bytesPerElement=12,Ot("StructArrayLayout3f12",nl);class _o extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint32[1*t+0]=o,t}}_o.prototype.bytesPerElement=4,Ot("StructArrayLayout1ul4",_o);class th extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w,T,A,I,k){const N=this.length;return this.resize(N+1),this.emplace(N,t,o,c,g,w,T,A,I,k)}emplace(t,o,c,g,w,T,A,I,k,N){const V=10*t,q=5*t;return this.int16[V+0]=o,this.int16[V+1]=c,this.int16[V+2]=g,this.int16[V+3]=w,this.int16[V+4]=T,this.int16[V+5]=A,this.uint32[q+3]=I,this.uint16[V+8]=k,this.uint16[V+9]=N,t}}th.prototype.bytesPerElement=20,Ot("StructArrayLayout6i1ul2ui20",th);class Xl extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w,T){const A=this.length;return this.resize(A+1),this.emplace(A,t,o,c,g,w,T)}emplace(t,o,c,g,w,T,A){const I=6*t;return this.int16[I+0]=o,this.int16[I+1]=c,this.int16[I+2]=g,this.int16[I+3]=w,this.int16[I+4]=T,this.int16[I+5]=A,t}}Xl.prototype.bytesPerElement=12,Ot("StructArrayLayout2i2i2i12",Xl);class vo extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w){const T=this.length;return this.resize(T+1),this.emplace(T,t,o,c,g,w)}emplace(t,o,c,g,w,T){const A=4*t,I=8*t;return this.float32[A+0]=o,this.float32[A+1]=c,this.float32[A+2]=g,this.int16[I+6]=w,this.int16[I+7]=T,t}}vo.prototype.bytesPerElement=16,Ot("StructArrayLayout2f1f2i16",vo);class nf extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w,T){const A=this.length;return this.resize(A+1),this.emplace(A,t,o,c,g,w,T)}emplace(t,o,c,g,w,T,A){const I=16*t,k=4*t,N=8*t;return this.uint8[I+0]=o,this.uint8[I+1]=c,this.float32[k+1]=g,this.float32[k+2]=w,this.int16[N+6]=T,this.int16[N+7]=A,t}}nf.prototype.bytesPerElement=16,Ot("StructArrayLayout2ub2f2i16",nf);class Wu extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,c)}emplace(t,o,c,g){const w=3*t;return this.uint16[w+0]=o,this.uint16[w+1]=c,this.uint16[w+2]=g,t}}Wu.prototype.bytesPerElement=6,Ot("StructArrayLayout3ui6",Wu);class Ku extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w,T,A,I,k,N,V,q,Y,Q,ne,ce,ge){const Le=this.length;return this.resize(Le+1),this.emplace(Le,t,o,c,g,w,T,A,I,k,N,V,q,Y,Q,ne,ce,ge)}emplace(t,o,c,g,w,T,A,I,k,N,V,q,Y,Q,ne,ce,ge,Le){const ve=24*t,H=12*t,le=48*t;return this.int16[ve+0]=o,this.int16[ve+1]=c,this.uint16[ve+2]=g,this.uint16[ve+3]=w,this.uint32[H+2]=T,this.uint32[H+3]=A,this.uint32[H+4]=I,this.uint16[ve+10]=k,this.uint16[ve+11]=N,this.uint16[ve+12]=V,this.float32[H+7]=q,this.float32[H+8]=Y,this.uint8[le+36]=Q,this.uint8[le+37]=ne,this.uint8[le+38]=ce,this.uint32[H+10]=ge,this.int16[ve+22]=Le,t}}Ku.prototype.bytesPerElement=48,Ot("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ku);class rh extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,g,w,T,A,I,k,N,V,q,Y,Q,ne,ce,ge,Le,ve,H,le,Te,Ge,mt,Xe,nt,bt,gt){const St=this.length;return this.resize(St+1),this.emplace(St,t,o,c,g,w,T,A,I,k,N,V,q,Y,Q,ne,ce,ge,Le,ve,H,le,Te,Ge,mt,Xe,nt,bt,gt)}emplace(t,o,c,g,w,T,A,I,k,N,V,q,Y,Q,ne,ce,ge,Le,ve,H,le,Te,Ge,mt,Xe,nt,bt,gt,St){const st=32*t,Bt=16*t;return this.int16[st+0]=o,this.int16[st+1]=c,this.int16[st+2]=g,this.int16[st+3]=w,this.int16[st+4]=T,this.int16[st+5]=A,this.int16[st+6]=I,this.int16[st+7]=k,this.uint16[st+8]=N,this.uint16[st+9]=V,this.uint16[st+10]=q,this.uint16[st+11]=Y,this.uint16[st+12]=Q,this.uint16[st+13]=ne,this.uint16[st+14]=ce,this.uint16[st+15]=ge,this.uint16[st+16]=Le,this.uint16[st+17]=ve,this.uint16[st+18]=H,this.uint16[st+19]=le,this.uint16[st+20]=Te,this.uint16[st+21]=Ge,this.uint16[st+22]=mt,this.uint32[Bt+12]=Xe,this.float32[Bt+13]=nt,this.float32[Bt+14]=bt,this.uint16[st+30]=gt,this.uint16[st+31]=St,t}}rh.prototype.bytesPerElement=64,Ot("StructArrayLayout8i15ui1ul2f2ui64",rh);class v extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.float32[1*t+0]=o,t}}v.prototype.bytesPerElement=4,Ot("StructArrayLayout1f4",v);class e extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,c)}emplace(t,o,c,g){const w=3*t;return this.uint16[6*t+0]=o,this.float32[w+1]=c,this.float32[w+2]=g,t}}e.prototype.bytesPerElement=12,Ot("StructArrayLayout1ui2f12",e);class i extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,c)}emplace(t,o,c,g){const w=4*t;return this.uint32[2*t+0]=o,this.uint16[w+2]=c,this.uint16[w+3]=g,t}}i.prototype.bytesPerElement=8,Ot("StructArrayLayout1ul2ui8",i);class h extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o){const c=this.length;return this.resize(c+1),this.emplace(c,t,o)}emplace(t,o,c){const g=2*t;return this.uint16[g+0]=o,this.uint16[g+1]=c,t}}h.prototype.bytesPerElement=4,Ot("StructArrayLayout2ui4",h);class m extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint16[1*t+0]=o,t}}m.prototype.bytesPerElement=2,Ot("StructArrayLayout1ui2",m);class x extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,g){const w=this.length;return this.resize(w+1),this.emplace(w,t,o,c,g)}emplace(t,o,c,g,w){const T=4*t;return this.float32[T+0]=o,this.float32[T+1]=c,this.float32[T+2]=g,this.float32[T+3]=w,t}}x.prototype.bytesPerElement=16,Ot("StructArrayLayout4f16",x);class M extends Dn{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new G(this.anchorPointX,this.anchorPointY)}}M.prototype.size=20;class P extends th{get(t){return new M(this,t)}}Ot("CollisionBoxArray",P);class D extends Dn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}D.prototype.size=48;class j extends Ku{get(t){return new D(this,t)}}Ot("PlacedSymbolArray",j);class U extends Dn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}U.prototype.size=64;class $ extends rh{get(t){return new U(this,t)}}Ot("SymbolInstanceArray",$);class Z extends v{getoffsetX(t){return this.float32[1*t+0]}}Ot("GlyphOffsetArray",Z);class ee extends Pa{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}Ot("SymbolLineVertexArray",ee);class re extends Dn{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}re.prototype.size=12;class de extends e{get(t){return new re(this,t)}}Ot("TextAnchorOffsetArray",de);class fe extends Dn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}fe.prototype.size=8;class me extends i{get(t){return new fe(this,t)}}Ot("FeatureIndexArray",me);class _e extends el{}class Ae extends el{}class Ee extends el{}class Pe extends Kl{}class ze extends tl{}class Ie extends rl{}class $e extends Yl{}class He extends eh{}class at extends nl{}class ot extends _o{}class rt extends Xl{}class It extends nf{}class Tt extends Wu{}class pt extends h{}const Vt=Tn([{name:"a_pos",components:2,type:"Int16"}],4),{members:gr}=Vt;class tr{constructor(t=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=t}prepareSegment(t,o,c,g){const w=this.segments[this.segments.length-1];return t>tr.MAX_VERTEX_ARRAY_LENGTH&&Dr(`Max vertices per segment is ${tr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${tr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!w||w.vertexLength+t>tr.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==g?this.createNewSegment(o,c,g):w}createNewSegment(t,o,c){const g={vertexOffset:t.length,primitiveOffset:o.length,vertexLength:0,primitiveLength:0,vaos:{}};return c!==void 0&&(g.sortKey=c),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(g),g}getOrCreateLatestSegment(t,o,c){return this.prepareSegment(0,t,o,c)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const t of this.segments)for(const o in t.vaos)t.vaos[o].destroy()}static simpleSegment(t,o,c,g){return new tr([{vertexOffset:t,primitiveOffset:o,vertexLength:c,primitiveLength:g,vaos:{},sortKey:0}])}}function pn(s,t){return 256*(s=er(Math.floor(s),0,255))+er(Math.floor(t),0,255)}tr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ot("SegmentVector",tr);const Kr=Tn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var vn,mn,Ir,zr={exports:{}},Mn={exports:{}},An={exports:{}},fi=function(){if(Ir)return zr.exports;Ir=1;var s=(vn||(vn=1,Mn.exports=function(o,c){var g,w,T,A,I,k,N,V;for(w=o.length-(g=3&o.length),T=c,I=3432918353,k=461845907,V=0;V<w;)N=255&o.charCodeAt(V)|(255&o.charCodeAt(++V))<<8|(255&o.charCodeAt(++V))<<16|(255&o.charCodeAt(++V))<<24,++V,T=27492+(65535&(A=5*(65535&(T=(T^=N=(65535&(N=(N=(65535&N)*I+(((N>>>16)*I&65535)<<16)&4294967295)<<15|N>>>17))*k+(((N>>>16)*k&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(A>>>16)&65535)<<16);switch(N=0,g){case 3:N^=(255&o.charCodeAt(V+2))<<16;case 2:N^=(255&o.charCodeAt(V+1))<<8;case 1:T^=N=(65535&(N=(N=(65535&(N^=255&o.charCodeAt(V)))*I+(((N>>>16)*I&65535)<<16)&4294967295)<<15|N>>>17))*k+(((N>>>16)*k&65535)<<16)&4294967295}return T^=o.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^=T>>>16)>>>0}),Mn.exports),t=(mn||(mn=1,An.exports=function(o,c){for(var g,w=o.length,T=c^w,A=0;w>=4;)g=1540483477*(65535&(g=255&o.charCodeAt(A)|(255&o.charCodeAt(++A))<<8|(255&o.charCodeAt(++A))<<16|(255&o.charCodeAt(++A))<<24))+((1540483477*(g>>>16)&65535)<<16),T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),w-=4,++A;switch(w){case 3:T^=(255&o.charCodeAt(A+2))<<16;case 2:T^=(255&o.charCodeAt(A+1))<<8;case 1:T=1540483477*(65535&(T^=255&o.charCodeAt(A)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*(T>>>16)&65535)<<16),(T^=T>>>15)>>>0}),An.exports);return zr.exports=s,zr.exports.murmur3=s,zr.exports.murmur2=t,zr.exports}(),wi=C(fi);class Ja{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,o,c,g){this.ids.push(Zs(t)),this.positions.push(o,c,g)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const o=Zs(t);let c=0,g=this.ids.length-1;for(;c<g;){const T=c+g>>1;this.ids[T]>=o?g=T:c=T+1}const w=[];for(;this.ids[c]===o;)w.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return w}static serialize(t,o){const c=new Float64Array(t.ids),g=new Uint32Array(t.positions);return ra(c,g,0,c.length-1),o&&o.push(c.buffer,g.buffer),{ids:c,positions:g}}static deserialize(t){const o=new Ja;return o.ids=t.ids,o.positions=t.positions,o.indexed=!0,o}}function Zs(s){const t=+s;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:wi(String(s))}function ra(s,t,o,c){for(;o<c;){const g=s[o+c>>1];let w=o-1,T=c+1;for(;;){do w++;while(s[w]<g);do T--;while(s[T]>g);if(w>=T)break;Ia(s,w,T),Ia(t,3*w,3*T),Ia(t,3*w+1,3*T+1),Ia(t,3*w+2,3*T+2)}T-o<c-T?(ra(s,t,o,T),o=T+1):(ra(s,t,T+1,c),c=T)}}function Ia(s,t,o){const c=s[t];s[t]=s[o],s[o]=c}Ot("FeaturePositionMap",Ja);class es{constructor(t,o){this.gl=t.gl,this.location=o}}class xo extends es{constructor(t,o){super(t,o),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class bo extends es{constructor(t,o){super(t,o),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Zi extends es{constructor(t,o){super(t,o),this.current=cr.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const qs=new Float32Array(16);function ts(s){return[pn(255*s.r,255*s.g),pn(255*s.b,255*s.a)]}class Ts{constructor(t,o,c){this.value=t,this.uniformNames=o.map(g=>`u_${g}`),this.type=c}setUniform(t,o,c){t.set(c.constantOr(this.value))}getBinding(t,o,c){return this.type==="color"?new Zi(t,o):new xo(t,o)}}class Cn{constructor(t,o){this.uniformNames=o.map(c=>`u_${c}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=t.tlbr}setUniform(t,o,c,g){const w=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;w&&t.set(w)}getBinding(t,o,c){return c.substr(0,9)==="u_pattern"?new bo(t,o):new xo(t,o)}}class xn{constructor(t,o,c,g){this.expression=t,this.type=c,this.maxValue=0,this.paintVertexAttributes=o.map(w=>({name:`a_${w}`,type:"Float32",components:c==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(t,o,c,g,w){const T=this.paintVertexArray.length,A=this.expression.evaluate(new mr(0),o,{},g,[],w);this.paintVertexArray.resize(t),this._setPaintValue(T,t,A)}updatePaintArray(t,o,c,g){const w=this.expression.evaluate({zoom:0},c,g);this._setPaintValue(t,o,w)}_setPaintValue(t,o,c){if(this.type==="color"){const g=ts(c);for(let w=t;w<o;w++)this.paintVertexArray.emplace(w,g[0],g[1])}else{for(let g=t;g<o;g++)this.paintVertexArray.emplace(g,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class jn{constructor(t,o,c,g,w,T){this.expression=t,this.uniformNames=o.map(A=>`u_${A}_t`),this.type=c,this.useIntegerZoom=g,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=o.map(A=>({name:`a_${A}`,type:"Float32",components:c==="color"?4:2,offset:0})),this.paintVertexArray=new T}populatePaintArray(t,o,c,g,w){const T=this.expression.evaluate(new mr(this.zoom),o,{},g,[],w),A=this.expression.evaluate(new mr(this.zoom+1),o,{},g,[],w),I=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(I,t,T,A)}updatePaintArray(t,o,c,g){const w=this.expression.evaluate({zoom:this.zoom},c,g),T=this.expression.evaluate({zoom:this.zoom+1},c,g);this._setPaintValue(t,o,w,T)}_setPaintValue(t,o,c,g){if(this.type==="color"){const w=ts(c),T=ts(g);for(let A=t;A<o;A++)this.paintVertexArray.emplace(A,w[0],w[1],T[0],T[1])}else{for(let w=t;w<o;w++)this.paintVertexArray.emplace(w,c,g);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(g))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,o){const c=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,g=er(this.expression.interpolationFactor(c,this.zoom,this.zoom+1),0,1);t.set(g)}getBinding(t,o,c){return new xo(t,o)}}class Mr{constructor(t,o,c,g,w,T){this.expression=t,this.type=o,this.useIntegerZoom=c,this.zoom=g,this.layerId=T,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w}populatePaintArray(t,o,c){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(g,t,o.patterns&&o.patterns[this.layerId],c)}updatePaintArray(t,o,c,g,w){this._setPaintValues(t,o,c.patterns&&c.patterns[this.layerId],w)}_setPaintValues(t,o,c,g){if(!g||!c)return;const{min:w,mid:T,max:A}=c,I=g[w],k=g[T],N=g[A];if(I&&k&&N)for(let V=t;V<o;V++)this.zoomInPaintVertexArray.emplace(V,k.tl[0],k.tl[1],k.br[0],k.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],k.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(V,k.tl[0],k.tl[1],k.br[0],k.br[1],N.tl[0],N.tl[1],N.br[0],N.br[1],k.pixelRatio,N.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Kr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Kr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Si{constructor(t,o,c){this.binders={},this._buffers=[];const g=[];for(const w in t.paint._values){if(!c(w))continue;const T=t.paint.get(w);if(!(T instanceof Ss&&$o(T.property.specification)))continue;const A=ad(w,t.type),I=T.value,k=T.property.specification.type,N=T.property.useIntegerZoom,V=T.property.specification["property-type"],q=V==="cross-faded"||V==="cross-faded-data-driven";if(I.kind==="constant")this.binders[w]=q?new Cn(I.value,A):new Ts(I.value,A,k),g.push(`/u_${w}`);else if(I.kind==="source"||q){const Y=af(w,k,"source");this.binders[w]=q?new Mr(I,k,N,o,Y,t.id):new xn(I,A,k,Y),g.push(`/a_${w}`)}else{const Y=af(w,k,"composite");this.binders[w]=new jn(I,A,k,N,o,Y),g.push(`/z_${w}`)}}this.cacheKey=g.sort().join("")}getMaxValue(t){const o=this.binders[t];return o instanceof xn||o instanceof jn?o.maxValue:0}populatePaintArrays(t,o,c,g,w){for(const T in this.binders){const A=this.binders[T];(A instanceof xn||A instanceof jn||A instanceof Mr)&&A.populatePaintArray(t,o,c,g,w)}}setConstantPatternPositions(t,o){for(const c in this.binders){const g=this.binders[c];g instanceof Cn&&g.setConstantPatternPositions(t,o)}}updatePaintArrays(t,o,c,g,w){let T=!1;for(const A in t){const I=o.getPositions(A);for(const k of I){const N=c.feature(k.index);for(const V in this.binders){const q=this.binders[V];if((q instanceof xn||q instanceof jn||q instanceof Mr)&&q.expression.isStateDependent===!0){const Y=g.paint.get(V);q.expression=Y.value,q.updatePaintArray(k.start,k.end,N,t[A],w),T=!0}}}}return T}defines(){const t=[];for(const o in this.binders){const c=this.binders[o];(c instanceof Ts||c instanceof Cn)&&t.push(...c.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return t}getBinderAttributes(){const t=[];for(const o in this.binders){const c=this.binders[o];if(c instanceof xn||c instanceof jn)for(let g=0;g<c.paintVertexAttributes.length;g++)t.push(c.paintVertexAttributes[g].name);else if(c instanceof Mr)for(let g=0;g<Kr.members.length;g++)t.push(Kr.members[g].name)}return t}getBinderUniforms(){const t=[];for(const o in this.binders){const c=this.binders[o];if(c instanceof Ts||c instanceof Cn||c instanceof jn)for(const g of c.uniformNames)t.push(g)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,o){const c=[];for(const g in this.binders){const w=this.binders[g];if(w instanceof Ts||w instanceof Cn||w instanceof jn){for(const T of w.uniformNames)if(o[T]){const A=w.getBinding(t,o[T],T);c.push({name:T,property:g,binding:A})}}}return c}setUniforms(t,o,c,g){for(const{name:w,property:T,binding:A}of o)this.binders[T].setUniform(A,g,c.get(T),w)}updatePaintBuffers(t){this._buffers=[];for(const o in this.binders){const c=this.binders[o];if(t&&c instanceof Mr){const g=t.fromScale===2?c.zoomInPaintVertexBuffer:c.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(c instanceof xn||c instanceof jn)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}}upload(t){for(const o in this.binders){const c=this.binders[o];(c instanceof xn||c instanceof jn||c instanceof Mr)&&c.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const o=this.binders[t];(o instanceof xn||o instanceof jn||o instanceof Mr)&&o.destroy()}}}class wo{constructor(t,o,c=()=>!0){this.programConfigurations={};for(const g of t)this.programConfigurations[g.id]=new Si(g,o,c);this.needsUpload=!1,this._featureMap=new Ja,this._bufferOffset=0}populatePaintArrays(t,o,c,g,w,T){for(const A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(t,o,g,w,T);o.id!==void 0&&this._featureMap.add(o.id,c,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,o,c,g){for(const w of c)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(t,this._featureMap,o,w,g)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function ad(s,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${t}-`,"").replace(/-/g,"_")]}function af(s,t,o){const c={color:{source:rl,composite:x},number:{source:v,composite:rl}},g=function(w){return{"line-pattern":{source:$e,composite:$e},"fill-pattern":{source:$e,composite:$e},"fill-extrusion-pattern":{source:$e,composite:$e}}[w]}(s);return g&&g[o]||c[t][o]}Ot("ConstantBinder",Ts),Ot("CrossFadedConstantBinder",Cn),Ot("SourceExpressionBinder",xn),Ot("CrossFadedCompositeBinder",Mr),Ot("CompositeExpressionBinder",jn),Ot("ProgramConfiguration",Si,{omit:["_buffers"]}),Ot("ProgramConfigurationSet",wo);const nh=Math.pow(2,14)-1,sf=-nh-1;function Li(s){const t=Rt/s.extent,o=s.loadGeometry();for(let c=0;c<o.length;c++){const g=o[c];for(let w=0;w<g.length;w++){const T=g[w],A=Math.round(T.x*t),I=Math.round(T.y*t);T.x=er(A,sf,nh),T.y=er(I,sf,nh),(A<T.x||A>T.x+1||I<T.y||I>T.y+1)&&Dr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function Ms(s,t){return{type:s.type,id:s.id,properties:s.properties,geometry:t?Li(s):[]}}const ih=-32768;function of(s,t,o,c,g){s.emplaceBack(ih+8*t+c,ih+8*o+g)}class Ql{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ae,this.indexArray=new Tt,this.segments=new tr,this.programConfigurations=new wo(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,c){const g=this.layers[0],w=[];let T=null,A=!1,I=g.type==="heatmap";if(g.type==="circle"){const N=g;T=N.layout.get("circle-sort-key"),A=!T.isConstant(),I=I||N.paint.get("circle-pitch-alignment")==="map"}const k=I?o.subdivisionGranularity.circle:1;for(const{feature:N,id:V,index:q,sourceLayerIndex:Y}of t){const Q=this.layers[0]._featureFilter.needGeometry,ne=Ms(N,Q);if(!this.layers[0]._featureFilter.filter(new mr(this.zoom),ne,c))continue;const ce=A?T.evaluate(ne,{},c):void 0,ge={id:V,properties:N.properties,type:N.type,sourceLayerIndex:Y,index:q,geometry:Q?ne.geometry:Li(N),patterns:{},sortKey:ce};w.push(ge)}A&&w.sort((N,V)=>N.sortKey-V.sortKey);for(const N of w){const{geometry:V,index:q,sourceLayerIndex:Y}=N,Q=t[q].feature;this.addFeature(N,V,q,c,k),o.featureIndex.insert(Q,V,q,Y,this.index)}}update(t,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,gr),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,o,c,g,w=1){let T;switch(w){case 1:T=[0,7];break;case 3:T=[0,2,5,7];break;case 5:T=[0,1,3,4,6,7];break;case 7:T=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${w}; valid values are 1, 3, 5, 7.`)}const A=T.length;for(const I of o)for(const k of I){const N=k.x,V=k.y;if(N<0||N>=Rt||V<0||V>=Rt)continue;const q=this.segments.prepareSegment(A*A,this.layoutVertexArray,this.indexArray,t.sortKey),Y=q.vertexLength;for(let Q=0;Q<A;Q++)for(let ne=0;ne<A;ne++)of(this.layoutVertexArray,N,V,T[ne],T[Q]);for(let Q=0;Q<A-1;Q++)for(let ne=0;ne<A-1;ne++){const ce=Y+Q*A+ne,ge=Y+(Q+1)*A+ne;this.indexArray.emplaceBack(ce,ge+1,ce+1),this.indexArray.emplaceBack(ce,ge,ge+1)}q.vertexLength+=A*A,q.primitiveLength+=(A-1)*(A-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,{},g)}}function Yu(s,t){for(let o=0;o<s.length;o++)if(Jl(t,s[o]))return!0;for(let o=0;o<t.length;o++)if(Jl(s,t[o]))return!0;return!!lf(s,t)}function Xu(s,t,o){return!!Jl(s,t)||!!uf(t,s,o)}function sd(s,t){if(s.length===1)return od(t,s[0]);for(let o=0;o<t.length;o++){const c=t[o];for(let g=0;g<c.length;g++)if(Jl(s,c[g]))return!0}for(let o=0;o<s.length;o++)if(od(t,s[o]))return!0;for(let o=0;o<t.length;o++)if(lf(s,t[o]))return!0;return!1}function Wm(s,t,o){if(s.length>1){if(lf(s,t))return!0;for(let c=0;c<t.length;c++)if(uf(t[c],s,o))return!0}for(let c=0;c<s.length;c++)if(uf(s[c],t,o))return!0;return!1}function lf(s,t){if(s.length===0||t.length===0)return!1;for(let o=0;o<s.length-1;o++){const c=s[o],g=s[o+1];for(let w=0;w<t.length-1;w++)if(gp(c,g,t[w],t[w+1]))return!0}return!1}function gp(s,t,o,c){return pr(s,o,c)!==pr(t,o,c)&&pr(s,t,o)!==pr(s,t,c)}function uf(s,t,o){const c=o*o;if(t.length===1)return s.distSqr(t[0])<c;for(let g=1;g<t.length;g++)if(yp(s,t[g-1],t[g])<c)return!0;return!1}function yp(s,t,o){const c=t.distSqr(o);if(c===0)return s.distSqr(t);const g=((s.x-t.x)*(o.x-t.x)+(s.y-t.y)*(o.y-t.y))/c;return s.distSqr(g<0?t:g>1?o:o.sub(t)._mult(g)._add(t))}function od(s,t){for(let o=0;o<s.length;o++)if(Jl(s[o],t))return!0;return!1}function Jl(s,t){let o=!1;for(let c=0,g=s.length-1;c<s.length;g=c++){const w=s[c],T=s[g];w.y>t.y!=T.y>t.y&&t.x<(T.x-w.x)*(t.y-w.y)/(T.y-w.y)+w.x&&(o=!o)}return o}function il(s,t,o){const c=o[0],g=o[2];if(s.x<c.x&&t.x<c.x||s.x>g.x&&t.x>g.x||s.y<c.y&&t.y<c.y||s.y>g.y&&t.y>g.y)return!1;const w=pr(s,t,o[0]);return w!==pr(s,t,o[1])||w!==pr(s,t,o[2])||w!==pr(s,t,o[3])}function Qu(s,t,o){const c=t.paint.get(s).value;return c.kind==="constant"?c.value:o.programConfigurations.get(t.id).getMaxValue(s)}function ld(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function cf(s,t,o,c,g){if(!t[0]&&!t[1])return s;const w=G.convert(t)._mult(g);o==="viewport"&&w._rotate(-c);const T=[];for(let A=0;A<s.length;A++)T.push(s[A].sub(w));return T}let ud,eu;Ot("CircleBucket",Ql,{omit:["layers"]});var al={get paint(){return eu=eu||new $i({"circle-radius":new Kt(se.paint_circle["circle-radius"]),"circle-color":new Kt(se.paint_circle["circle-color"]),"circle-blur":new Kt(se.paint_circle["circle-blur"]),"circle-opacity":new Kt(se.paint_circle["circle-opacity"]),"circle-translate":new $t(se.paint_circle["circle-translate"]),"circle-translate-anchor":new $t(se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new $t(se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new $t(se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Kt(se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Kt(se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Kt(se.paint_circle["circle-stroke-opacity"])})},get layout(){return ud=ud||new $i({"circle-sort-key":new Kt(se.layout_circle["circle-sort-key"])})}};class tu extends Ea{constructor(t){super(t,al)}createBucket(t){return new Ql(t)}queryRadius(t){const o=t;return Qu("circle-radius",this,o)+Qu("circle-stroke-width",this,o)+ld(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:t,feature:o,featureState:c,geometry:g,transform:w,pixelsToTileUnits:T,unwrappedTileID:A,getElevation:I}){const k=cf(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-w.bearingInRadians,T),N=this.paint.get("circle-radius").evaluate(o,c)+this.paint.get("circle-stroke-width").evaluate(o,c),V=this.paint.get("circle-pitch-alignment")==="map",q=V?k:function(Q,ne,ce,ge){return Q.map(Le=>So(Le,ne,ce,ge))}(k,w,A,I),Y=V?N*T:N;for(const Q of g)for(const ne of Q){const ce=V?ne:So(ne,w,A,I);let ge=Y;const Le=w.projectTileCoordinates(ne.x,ne.y,A,I).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ge*=Le/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ge*=w.cameraToCenterDistance/Le),Xu(q,ce,ge))return!0}return!1}}function So(s,t,o,c){const g=t.projectTileCoordinates(s.x,s.y,o,c).point;return new G((.5*g.x+.5)*t.width,(.5*-g.y+.5)*t.height)}class cd extends Ql{}let hd;Ot("HeatmapBucket",cd,{omit:["layers"]});var hf={get paint(){return hd=hd||new $i({"heatmap-radius":new Kt(se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Kt(se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new $t(se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new rf(se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new $t(se.paint_heatmap["heatmap-opacity"])})}};function ah(s,{width:t,height:o},c,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==t*o*c)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${t*o*c}`)}else g=new Uint8Array(t*o*c);return s.width=t,s.height=o,s.data=g,s}function ru(s,{width:t,height:o},c){if(t===s.width&&o===s.height)return;const g=ah({},{width:t,height:o},c);qi(s,g,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,t),height:Math.min(s.height,o)},c),s.width=t,s.height=o,s.data=g.data}function qi(s,t,o,c,g,w){if(g.width===0||g.height===0)return t;if(g.width>s.width||g.height>s.height||o.x>s.width-g.width||o.y>s.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>t.width||g.height>t.height||c.x>t.width-g.width||c.y>t.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const T=s.data,A=t.data;if(T===A)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<g.height;I++){const k=((o.y+I)*s.width+o.x)*w,N=((c.y+I)*t.width+c.x)*w;for(let V=0;V<g.width*w;V++)A[N+V]=T[k+V]}return t}class nu{constructor(t,o){ah(this,t,1,o)}resize(t){ru(this,t,1)}clone(){return new nu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,c,g,w){qi(t,o,c,g,w,1)}}class Da{constructor(t,o){ah(this,t,4,o)}resize(t){ru(this,t,4)}replace(t,o){o?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Da({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,c,g,w){qi(t,o,c,g,w,4)}}function sl(s){const t={},o=s.resolution||256,c=s.clips?s.clips.length:1,g=s.image||new Da({width:o,height:c});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);const w=(T,A,I)=>{t[s.evaluationKey]=I;const k=s.expression.evaluate(t);g.data[T+A+0]=Math.floor(255*k.r/k.a),g.data[T+A+1]=Math.floor(255*k.g/k.a),g.data[T+A+2]=Math.floor(255*k.b/k.a),g.data[T+A+3]=Math.floor(255*k.a)};if(s.clips)for(let T=0,A=0;T<c;++T,A+=4*o)for(let I=0,k=0;I<o;I++,k+=4){const N=I/(o-1),{start:V,end:q}=s.clips[T];w(A,k,V*(1-N)+q*N)}else for(let T=0,A=0;T<o;T++,A+=4)w(0,A,T/(o-1));return g}Ot("AlphaImage",nu),Ot("RGBAImage",Da);const ff="big-fb";class _p extends Ea{createBucket(t){return new cd(t)}constructor(t){super(t,hf),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=sl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(ff)&&this.heatmapFbos.delete(ff)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let ol;var iu={get paint(){return ol=ol||new $i({"hillshade-illumination-direction":new $t(se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new $t(se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new $t(se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new $t(se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new $t(se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new $t(se.paint_hillshade["hillshade-accent-color"])})}};class df extends Ea{constructor(t){super(t,iu)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const vp=Tn([{name:"a_pos",components:2,type:"Int16"}],4),{members:xp}=vp;function Ju(s,t,o){const c=o.patternDependencies;let g=!1;for(const w of t){const T=w.paint.get(`${s}-pattern`);T.isConstant()||(g=!0);const A=T.constantOr(null);A&&(g=!0,c[A.to]=!0,c[A.from]=!0)}return g}function ec(s,t,o,c,g){const w=g.patternDependencies;for(const T of t){const A=T.paint.get(`${s}-pattern`).value;if(A.kind!=="constant"){let I=A.evaluate({zoom:c-1},o,{},g.availableImages),k=A.evaluate({zoom:c},o,{},g.availableImages),N=A.evaluate({zoom:c+1},o,{},g.availableImages);I=I&&I.name?I.name:I,k=k&&k.name?k.name:k,N=N&&N.name?N.name:N,w[I]=!0,w[k]=!0,w[N]=!0,o.patterns[T.id]={min:I,mid:k,max:N}}}return o}function bp(s,t,o,c,g){let w;if(g===function(T,A,I,k){let N=0;for(let V=A,q=I-k;V<I;V+=k)N+=(T[q]-T[V])*(T[V+1]+T[q+1]),q=V;return N}(s,t,o,c)>0)for(let T=t;T<o;T+=c)w=Mp(T/c|0,s[T],s[T+1],w);else for(let T=o-c;T>=t;T-=c)w=Mp(T/c|0,s[T],s[T+1],w);return w&&lu(w,w.next)&&(qn(w),w=w.next),w}function au(s,t){if(!s)return s;t||(t=s);let o,c=s;do if(o=!1,c.steiner||!lu(c,c.next)&&Ar(c.prev,c,c.next)!==0)c=c.next;else{if(qn(c),c=t=c.prev,c===c.next)break;o=!0}while(o||c!==t);return t}function ll(s,t,o,c,g,w,T){if(!s)return;!T&&w&&function(I,k,N,V){let q=I;do q.z===0&&(q.z=fd(q.x,q.y,k,N,V)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==I);q.prevZ.nextZ=null,q.prevZ=null,function(Y){let Q,ne=1;do{let ce,ge=Y;Y=null;let Le=null;for(Q=0;ge;){Q++;let ve=ge,H=0;for(let Te=0;Te<ne&&(H++,ve=ve.nextZ,ve);Te++);let le=ne;for(;H>0||le>0&&ve;)H!==0&&(le===0||!ve||ge.z<=ve.z)?(ce=ge,ge=ge.nextZ,H--):(ce=ve,ve=ve.nextZ,le--),Le?Le.nextZ=ce:Y=ce,ce.prevZ=Le,Le=ce;ge=ve}Le.nextZ=null,ne*=2}while(Q>1)}(q)}(s,c,g,w);let A=s;for(;s.prev!==s.next;){const I=s.prev,k=s.next;if(w?Km(s,c,g,w):su(s))t.push(I.i,s.i,k.i),qn(s),s=k.next,A=k.next;else if((s=k)===A){T?T===1?ll(s=Ym(au(s),t),t,o,c,g,w,2):T===2&&tc(s,t,o,c,g,w):ll(au(s),t,o,c,g,w,1);break}}}function su(s){const t=s.prev,o=s,c=s.next;if(Ar(t,o,c)>=0)return!1;const g=t.x,w=o.x,T=c.x,A=t.y,I=o.y,k=c.y,N=Math.min(g,w,T),V=Math.min(A,I,k),q=Math.max(g,w,T),Y=Math.max(A,I,k);let Q=c.next;for(;Q!==t;){if(Q.x>=N&&Q.x<=q&&Q.y>=V&&Q.y<=Y&&ou(g,A,w,I,T,k,Q.x,Q.y)&&Ar(Q.prev,Q,Q.next)>=0)return!1;Q=Q.next}return!0}function Km(s,t,o,c){const g=s.prev,w=s,T=s.next;if(Ar(g,w,T)>=0)return!1;const A=g.x,I=w.x,k=T.x,N=g.y,V=w.y,q=T.y,Y=Math.min(A,I,k),Q=Math.min(N,V,q),ne=Math.max(A,I,k),ce=Math.max(N,V,q),ge=fd(Y,Q,t,o,c),Le=fd(ne,ce,t,o,c);let ve=s.prevZ,H=s.nextZ;for(;ve&&ve.z>=ge&&H&&H.z<=Le;){if(ve.x>=Y&&ve.x<=ne&&ve.y>=Q&&ve.y<=ce&&ve!==g&&ve!==T&&ou(A,N,I,V,k,q,ve.x,ve.y)&&Ar(ve.prev,ve,ve.next)>=0||(ve=ve.prevZ,H.x>=Y&&H.x<=ne&&H.y>=Q&&H.y<=ce&&H!==g&&H!==T&&ou(A,N,I,V,k,q,H.x,H.y)&&Ar(H.prev,H,H.next)>=0))return!1;H=H.nextZ}for(;ve&&ve.z>=ge;){if(ve.x>=Y&&ve.x<=ne&&ve.y>=Q&&ve.y<=ce&&ve!==g&&ve!==T&&ou(A,N,I,V,k,q,ve.x,ve.y)&&Ar(ve.prev,ve,ve.next)>=0)return!1;ve=ve.prevZ}for(;H&&H.z<=Le;){if(H.x>=Y&&H.x<=ne&&H.y>=Q&&H.y<=ce&&H!==g&&H!==T&&ou(A,N,I,V,k,q,H.x,H.y)&&Ar(H.prev,H,H.next)>=0)return!1;H=H.nextZ}return!0}function Ym(s,t){let o=s;do{const c=o.prev,g=o.next.next;!lu(c,g)&&Sp(c,o,o.next,g)&&mf(c,g)&&mf(g,c)&&(t.push(c.i,o.i,g.i),qn(o),qn(o.next),o=s=g),o=o.next}while(o!==s);return au(o)}function tc(s,t,o,c,g,w){let T=s;do{let A=T.next.next;for(;A!==T.prev;){if(T.i!==A.i&&ul(T,A)){let I=Tp(T,A);return T=au(T,T.next),I=au(I,I.next),ll(T,t,o,c,g,w,0),void ll(I,t,o,c,g,w,0)}A=A.next}T=T.next}while(T!==s)}function rs(s,t){let o=s.x-t.x;return o===0&&(o=s.y-t.y,o===0)&&(o=(s.next.y-s.y)/(s.next.x-s.x)-(t.next.y-t.y)/(t.next.x-t.x)),o}function Xm(s,t){const o=function(g,w){let T=w;const A=g.x,I=g.y;let k,N=-1/0;if(lu(g,T))return T;do{if(lu(g,T.next))return T.next;if(I<=T.y&&I>=T.next.y&&T.next.y!==T.y){const ne=T.x+(I-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(ne<=A&&ne>N&&(N=ne,k=T.x<T.next.x?T:T.next,ne===A))return k}T=T.next}while(T!==w);if(!k)return null;const V=k,q=k.x,Y=k.y;let Q=1/0;T=k;do{if(A>=T.x&&T.x>=q&&A!==T.x&&dd(I<Y?A:N,I,q,Y,I<Y?N:A,I,T.x,T.y)){const ne=Math.abs(I-T.y)/(A-T.x);mf(T,g)&&(ne<Q||ne===Q&&(T.x>k.x||T.x===k.x&&Qm(k,T)))&&(k=T,Q=ne)}T=T.next}while(T!==V);return k}(s,t);if(!o)return t;const c=Tp(o,s);return au(c,c.next),au(o,o.next)}function Qm(s,t){return Ar(s.prev,s,t.prev)<0&&Ar(t.next,s,s.next)<0}function fd(s,t,o,c,g){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-o)*g|0)|s<<8))|s<<4))|s<<2))|s<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-c)*g|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function wp(s){let t=s,o=s;do(t.x<o.x||t.x===o.x&&t.y<o.y)&&(o=t),t=t.next;while(t!==s);return o}function dd(s,t,o,c,g,w,T,A){return(g-T)*(t-A)>=(s-T)*(w-A)&&(s-T)*(c-A)>=(o-T)*(t-A)&&(o-T)*(w-A)>=(g-T)*(c-A)}function ou(s,t,o,c,g,w,T,A){return!(s===T&&t===A)&&dd(s,t,o,c,g,w,T,A)}function ul(s,t){return s.next.i!==t.i&&s.prev.i!==t.i&&!function(o,c){let g=o;do{if(g.i!==o.i&&g.next.i!==o.i&&g.i!==c.i&&g.next.i!==c.i&&Sp(g,g.next,o,c))return!0;g=g.next}while(g!==o);return!1}(s,t)&&(mf(s,t)&&mf(t,s)&&function(o,c){let g=o,w=!1;const T=(o.x+c.x)/2,A=(o.y+c.y)/2;do g.y>A!=g.next.y>A&&g.next.y!==g.y&&T<(g.next.x-g.x)*(A-g.y)/(g.next.y-g.y)+g.x&&(w=!w),g=g.next;while(g!==o);return w}(s,t)&&(Ar(s.prev,s,t.prev)||Ar(s,t.prev,t))||lu(s,t)&&Ar(s.prev,s,s.next)>0&&Ar(t.prev,t,t.next)>0)}function Ar(s,t,o){return(t.y-s.y)*(o.x-t.x)-(t.x-s.x)*(o.y-t.y)}function lu(s,t){return s.x===t.x&&s.y===t.y}function Sp(s,t,o,c){const g=pf(Ar(s,t,o)),w=pf(Ar(s,t,c)),T=pf(Ar(o,c,s)),A=pf(Ar(o,c,t));return g!==w&&T!==A||!(g!==0||!di(s,o,t))||!(w!==0||!di(s,c,t))||!(T!==0||!di(o,s,c))||!(A!==0||!di(o,t,c))}function di(s,t,o){return t.x<=Math.max(s.x,o.x)&&t.x>=Math.min(s.x,o.x)&&t.y<=Math.max(s.y,o.y)&&t.y>=Math.min(s.y,o.y)}function pf(s){return s>0?1:s<0?-1:0}function mf(s,t){return Ar(s.prev,s,s.next)<0?Ar(s,t,s.next)>=0&&Ar(s,s.prev,t)>=0:Ar(s,t,s.prev)<0||Ar(s,s.next,t)<0}function Tp(s,t){const o=ya(s.i,s.x,s.y),c=ya(t.i,t.x,t.y),g=s.next,w=t.prev;return s.next=t,t.prev=s,o.next=g,g.prev=o,c.next=o,o.prev=c,w.next=c,c.prev=w,c}function Mp(s,t,o,c){const g=ya(s,t,o);return c?(g.next=c.next,g.prev=c,c.next.prev=g,c.next=g):(g.prev=g,g.next=g),g}function qn(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function ya(s,t,o){return{i:s,x:t,y:o,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class La{constructor(t,o){if(o>t)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=t,this._minGranularity=o}getGranularityForZoomLevel(t){return Math.max(Math.floor(this._baseZoomGranularity/(1<<t)),this._minGranularity,1)}}class gf{constructor(t){this.fill=t.fill,this.line=t.line,this.tile=t.tile,this.stencil=t.stencil,this.circle=t.circle}}gf.noSubdivision=new gf({fill:new La(0,0),line:new La(0,0),tile:new La(0,0),stencil:new La(0,0),circle:1}),Ot("SubdivisionGranularityExpression",La),Ot("SubdivisionGranularitySetting",gf);const rc=-32768,yf=32767;class Ap{constructor(t,o){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=t,this._granularityCellSize=Rt/t,this._canonical=o}_getKey(t,o){return(t+=32768)<<16|(o+=32768)<<0}_vertexToIndex(t,o){if(t<-32768||o<-32768||t>32767||o>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const c=0|Math.round(t),g=0|Math.round(o),w=this._getKey(c,g);if(this._vertexDictionary.has(w))return this._vertexDictionary.get(w);const T=this._vertexBuffer.length/2;return this._vertexDictionary.set(w,T),this._vertexBuffer.push(c,g),T}_subdivideTrianglesScanline(t){if(this._granularity<2)return function(g,w){const T=[];for(let A=0;A<w.length;A+=3){const I=w[A],k=w[A+1],N=w[A+2],V=g[2*I],q=g[2*I+1];(g[2*k]-V)*(g[2*N+1]-q)-(g[2*k+1]-q)*(g[2*N]-V)>0?(T.push(I),T.push(N),T.push(k)):(T.push(I),T.push(k),T.push(N))}return T}(this._vertexBuffer,t);const o=[],c=t.length;for(let g=0;g<c;g+=3){const w=[t[g+0],t[g+1],t[g+2]],T=[this._vertexBuffer[2*t[g+0]+0],this._vertexBuffer[2*t[g+0]+1],this._vertexBuffer[2*t[g+1]+0],this._vertexBuffer[2*t[g+1]+1],this._vertexBuffer[2*t[g+2]+0],this._vertexBuffer[2*t[g+2]+1]];let A=1/0,I=1/0,k=-1/0,N=-1/0;for(let ne=0;ne<3;ne++){const ce=T[2*ne],ge=T[2*ne+1];A=Math.min(A,ce),k=Math.max(k,ce),I=Math.min(I,ge),N=Math.max(N,ge)}if(A===k||I===N)continue;const V=Math.floor(A/this._granularityCellSize),q=Math.ceil(k/this._granularityCellSize),Y=Math.floor(I/this._granularityCellSize),Q=Math.ceil(N/this._granularityCellSize);if(V!==q||Y!==Q)for(let ne=Y;ne<Q;ne++){const ce=this._scanlineGenerateVertexRingForCellRow(ne,T,w);Jm(this._vertexBuffer,ce,o)}else o.push(...w)}return o}_scanlineGenerateVertexRingForCellRow(t,o,c){const g=t*this._granularityCellSize,w=g+this._granularityCellSize,T=[];for(let A=0;A<3;A++){const I=o[2*A],k=o[2*A+1],N=o[2*(A+1)%6],V=o[(2*(A+1)+1)%6],q=o[2*(A+2)%6],Y=o[(2*(A+2)+1)%6],Q=N-I,ne=V-k,ce=Q===0,ge=ne===0,Le=(g-k)/ne,ve=(w-k)/ne,H=Math.min(Le,ve),le=Math.max(Le,ve);if(!ge&&(H>=1||le<=0)||ge&&(k<g||k>w)){V>=g&&V<=w&&T.push(c[(A+1)%3]);continue}!ge&&H>0&&T.push(this._vertexToIndex(I+Q*H,k+ne*H));const Te=I+Q*Math.max(H,0),Ge=I+Q*Math.min(le,1);ce||this._generateIntraEdgeVertices(T,I,k,N,V,Te,Ge),!ge&&le<1&&T.push(this._vertexToIndex(I+Q*le,k+ne*le)),(ge||V>=g&&V<=w)&&T.push(c[(A+1)%3]),!ge&&(V<=g||V>=w)&&this._generateInterEdgeVertices(T,I,k,N,V,q,Y,Ge,g,w)}return T}_generateIntraEdgeVertices(t,o,c,g,w,T,A){const I=g-o,k=w-c,N=k===0,V=N?Math.min(o,g):Math.min(T,A),q=N?Math.max(o,g):Math.max(T,A),Y=Math.floor(V/this._granularityCellSize)+1,Q=Math.ceil(q/this._granularityCellSize)-1;if(N?o<g:T<A)for(let ne=Y;ne<=Q;ne++){const ce=ne*this._granularityCellSize;t.push(this._vertexToIndex(ce,c+k*(ce-o)/I))}else for(let ne=Q;ne>=Y;ne--){const ce=ne*this._granularityCellSize;t.push(this._vertexToIndex(ce,c+k*(ce-o)/I))}}_generateInterEdgeVertices(t,o,c,g,w,T,A,I,k,N){const V=w-c,q=T-g,Y=A-w,Q=(k-w)/Y,ne=(N-w)/Y,ce=Math.min(Q,ne),ge=Math.max(Q,ne),Le=g+q*ce;let ve=Math.floor(Math.min(Le,I)/this._granularityCellSize)+1,H=Math.ceil(Math.max(Le,I)/this._granularityCellSize)-1,le=I<Le;const Te=Y===0;if(Te&&(A===k||A===N))return;if(Te||ce>=1||ge<=0){const mt=c-A,Xe=T+(o-T)*Math.min((k-A)/mt,(N-A)/mt);ve=Math.floor(Math.min(Xe,I)/this._granularityCellSize)+1,H=Math.ceil(Math.max(Xe,I)/this._granularityCellSize)-1,le=I<Xe}const Ge=V>0?N:k;if(le)for(let mt=ve;mt<=H;mt++)t.push(this._vertexToIndex(mt*this._granularityCellSize,Ge));else for(let mt=H;mt>=ve;mt--)t.push(this._vertexToIndex(mt*this._granularityCellSize,Ge))}_generateOutline(t){const o=[];for(const c of t){const g=na(c,this._granularity,!0),w=this._pointArrayToIndices(g),T=[];for(let A=1;A<w.length;A++)T.push(w[A-1]),T.push(w[A]);o.push(T)}return o}_handlePoles(t){let o=!1,c=!1;this._canonical&&(this._canonical.y===0&&(o=!0),this._canonical.y===(1<<this._canonical.z)-1&&(c=!0)),(o||c)&&this._fillPoles(t,o,c)}_ensureNoPoleVertices(){const t=this._vertexBuffer;for(let o=0;o<t.length;o+=2){const c=t[o+1];c===rc&&(t[o+1]=-32767),c===yf&&(t[o+1]=32766)}}_generatePoleQuad(t,o,c,g,w,T){g>w!=(T===rc)?(t.push(o),t.push(c),t.push(this._vertexToIndex(g,T)),t.push(c),t.push(this._vertexToIndex(w,T)),t.push(this._vertexToIndex(g,T))):(t.push(c),t.push(o),t.push(this._vertexToIndex(g,T)),t.push(this._vertexToIndex(w,T)),t.push(c),t.push(this._vertexToIndex(g,T)))}_fillPoles(t,o,c){const g=this._vertexBuffer,w=Rt,T=t.length;for(let A=2;A<T;A+=3){const I=t[A-2],k=t[A-1],N=t[A],V=g[2*I],q=g[2*I+1],Y=g[2*k],Q=g[2*k+1],ne=g[2*N],ce=g[2*N+1];o&&(q===0&&Q===0&&this._generatePoleQuad(t,I,k,V,Y,rc),Q===0&&ce===0&&this._generatePoleQuad(t,k,N,Y,ne,rc),ce===0&&q===0&&this._generatePoleQuad(t,N,I,ne,V,rc)),c&&(q===w&&Q===w&&this._generatePoleQuad(t,I,k,V,Y,yf),Q===w&&ce===w&&this._generatePoleQuad(t,k,N,Y,ne,yf),ce===w&&q===w&&this._generatePoleQuad(t,N,I,ne,V,yf))}}_initializeVertices(t){for(let o=0;o<t.length;o+=2)this._vertexToIndex(t[o],t[o+1])}subdividePolygonInternal(t,o){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:c,holeIndices:g}=function(A){const I=[],k=[];for(const N of A)if(N.length!==0){N!==A[0]&&I.push(k.length/2);for(let V=0;V<N.length;V++)k.push(N[V].x),k.push(N[V].y)}return{flattened:k,holeIndices:I}}(t);let w;this._initializeVertices(c);try{const A=function(k,N,V=2){const q=N&&N.length,Y=q?N[0]*V:k.length;let Q=bp(k,0,Y,V,!0);const ne=[];if(!Q||Q.next===Q.prev)return ne;let ce,ge,Le;if(q&&(Q=function(ve,H,le,Te){const Ge=[];for(let mt=0,Xe=H.length;mt<Xe;mt++){const nt=bp(ve,H[mt]*Te,mt<Xe-1?H[mt+1]*Te:ve.length,Te,!1);nt===nt.next&&(nt.steiner=!0),Ge.push(wp(nt))}Ge.sort(rs);for(let mt=0;mt<Ge.length;mt++)le=Xm(Ge[mt],le);return le}(k,N,Q,V)),k.length>80*V){ce=1/0,ge=1/0;let ve=-1/0,H=-1/0;for(let le=V;le<Y;le+=V){const Te=k[le],Ge=k[le+1];Te<ce&&(ce=Te),Ge<ge&&(ge=Ge),Te>ve&&(ve=Te),Ge>H&&(H=Ge)}Le=Math.max(ve-ce,H-ge),Le=Le!==0?32767/Le:0}return ll(Q,ne,V,ce,ge,Le,0),ne}(c,g),I=this._convertIndices(c,A);w=this._subdivideTrianglesScanline(I)}catch(A){console.error(A)}let T=[];return o&&(T=this._generateOutline(t)),this._ensureNoPoleVertices(),this._handlePoles(w),{verticesFlattened:this._vertexBuffer,indicesTriangles:w,indicesLineList:T}}_convertIndices(t,o){const c=[];for(let g=0;g<o.length;g++)c.push(this._vertexToIndex(t[2*o[g]],t[2*o[g]+1]));return c}_pointArrayToIndices(t){const o=[];for(let c=0;c<t.length;c++){const g=t[c];o.push(this._vertexToIndex(g.x,g.y))}return o}}function ns(s,t,o,c=!0){return new Ap(o,t).subdividePolygonInternal(s,c)}function na(s,t,o=!1){if(!s||s.length<1)return[];if(s.length<2)return[];const c=s[0],g=s[s.length-1],w=o&&(c.x!==g.x||c.y!==g.y);if(t<2)return w?[...s,s[0]]:[...s];const T=Math.floor(Rt/t),A=[];A.push(new G(s[0].x,s[0].y));const I=s.length,k=w?I:I-1;for(let N=0;N<k;N++){const V=s[N],q=N<I-1?s[N+1]:s[0],Y=V.x,Q=V.y,ne=q.x,ce=q.y,ge=Y!==ne,Le=Q!==ce;if(!ge&&!Le)continue;const ve=ne-Y,H=ce-Q,le=Math.abs(ve),Te=Math.abs(H);let Ge=Y,mt=Q;for(;;){const nt=ve>0?(Math.floor(Ge/T)+1)*T:(Math.ceil(Ge/T)-1)*T,bt=H>0?(Math.floor(mt/T)+1)*T:(Math.ceil(mt/T)-1)*T,gt=Math.abs(Ge-nt),St=Math.abs(mt-bt),st=Math.abs(Ge-ne),Bt=Math.abs(mt-ce),Yt=ge?gt/le:Number.POSITIVE_INFINITY,qt=Le?St/Te:Number.POSITIVE_INFINITY;if((st<=gt||!ge)&&(Bt<=St||!Le))break;if(Yt<qt&&ge||!Le){Ge=nt,mt+=H*Yt;const jt=new G(Ge,Math.round(mt));A[A.length-1].x===jt.x&&A[A.length-1].y===jt.y||A.push(jt)}else{Ge+=ve*qt,mt=bt;const jt=new G(Math.round(Ge),mt);A[A.length-1].x===jt.x&&A[A.length-1].y===jt.y||A.push(jt)}}const Xe=new G(ne,ce);A[A.length-1].x===Xe.x&&A[A.length-1].y===Xe.y||A.push(Xe)}return A}function Jm(s,t,o){if(t.length===0)throw new Error("Subdivision vertex ring is empty.");let c=0,g=s[2*t[0]];for(let I=1;I<t.length;I++){const k=s[2*t[I]];k<g&&(g=k,c=I)}const w=t.length;let T=c,A=(T+1)%w;for(;;){const I=T-1>=0?T-1:w-1,k=(A+1)%w,N=s[2*t[I]],V=s[2*t[k]],q=s[2*t[T]],Y=s[2*t[T]+1],Q=s[2*t[A]+1];let ne=!1;if(N<V)ne=!0;else if(N>V)ne=!1;else{const ce=Q-Y,ge=-(s[2*t[A]]-q),Le=Y<Q?1:-1;((N-q)*ce+(s[2*t[I]+1]-Y)*ge)*Le>((V-q)*ce+(s[2*t[k]+1]-Y)*ge)*Le&&(ne=!0)}if(ne){const ce=t[I],ge=t[T],Le=t[A];ce!==ge&&ce!==Le&&ge!==Le&&o.push(Le,ge,ce),T--,T<0&&(T=w-1)}else{const ce=t[k],ge=t[T],Le=t[A];ce!==ge&&ce!==Le&&ge!==Le&&o.push(Le,ge,ce),A++,A>=w&&(A=0)}if(I===k)break}}function is(s,t,o,c,g,w,T,A,I){const k=g.length/2,N=T&&A&&I;if(k<tr.MAX_VERTEX_ARRAY_LENGTH){const V=t.prepareSegment(k,o,c),q=V.vertexLength;for(let ne=0;ne<w.length;ne+=3)c.emplaceBack(q+w[ne],q+w[ne+1],q+w[ne+2]);let Y,Q;V.vertexLength+=k,V.primitiveLength+=w.length/3,N&&(Q=T.prepareSegment(k,o,A),Y=Q.vertexLength,Q.vertexLength+=k);for(let ne=0;ne<g.length;ne+=2)s(g[ne],g[ne+1]);if(N)for(let ne=0;ne<I.length;ne++){const ce=I[ne];for(let ge=1;ge<ce.length;ge+=2)A.emplaceBack(Y+ce[ge-1],Y+ce[ge]);Q.primitiveLength+=ce.length/2}}else(function(V,q,Y,Q,ne,ce){const ge=[];for(let Te=0;Te<Q.length/2;Te++)ge.push(-1);const Le={count:0};let ve=0,H=V.getOrCreateLatestSegment(q,Y),le=H.vertexLength;for(let Te=2;Te<ne.length;Te+=3){const Ge=ne[Te-2],mt=ne[Te-1],Xe=ne[Te];let nt=ge[Ge]<ve,bt=ge[mt]<ve,gt=ge[Xe]<ve;H.vertexLength+((nt?1:0)+(bt?1:0)+(gt?1:0))>tr.MAX_VERTEX_ARRAY_LENGTH&&(H=V.createNewSegment(q,Y),ve=Le.count,nt=!0,bt=!0,gt=!0,le=0);const St=sh(ge,Q,ce,Le,Ge,nt,H),st=sh(ge,Q,ce,Le,mt,bt,H),Bt=sh(ge,Q,ce,Le,Xe,gt,H);Y.emplaceBack(le+St-ve,le+st-ve,le+Bt-ve),H.primitiveLength++}})(t,o,c,g,w,s),N&&function(V,q,Y,Q,ne,ce){const ge=[];for(let Te=0;Te<Q.length/2;Te++)ge.push(-1);const Le={count:0};let ve=0,H=V.getOrCreateLatestSegment(q,Y),le=H.vertexLength;for(let Te=0;Te<ne.length;Te++){const Ge=ne[Te];for(let mt=1;mt<ne[Te].length;mt+=2){const Xe=Ge[mt-1],nt=Ge[mt];let bt=ge[Xe]<ve,gt=ge[nt]<ve;H.vertexLength+((bt?1:0)+(gt?1:0))>tr.MAX_VERTEX_ARRAY_LENGTH&&(H=V.createNewSegment(q,Y),ve=Le.count,bt=!0,gt=!0,le=0);const St=sh(ge,Q,ce,Le,Xe,bt,H),st=sh(ge,Q,ce,Le,nt,gt,H);Y.emplaceBack(le+St-ve,le+st-ve),H.primitiveLength++}}}(T,o,A,g,I,s),t.forceNewSegmentOnNextPrepare(),T==null||T.forceNewSegmentOnNextPrepare()}function sh(s,t,o,c,g,w,T){if(w){const A=c.count;return o(t[2*g],t[2*g+1]),s[g]=c.count,c.count++,T.vertexLength++,A}return s[g]}class Gs{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ee,this.indexArray=new Tt,this.indexArray2=new pt,this.programConfigurations=new wo(t.layers,t.zoom),this.segments=new tr,this.segments2=new tr,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,c){this.hasPattern=Ju("fill",this.layers,o);const g=this.layers[0].layout.get("fill-sort-key"),w=!g.isConstant(),T=[];for(const{feature:A,id:I,index:k,sourceLayerIndex:N}of t){const V=this.layers[0]._featureFilter.needGeometry,q=Ms(A,V);if(!this.layers[0]._featureFilter.filter(new mr(this.zoom),q,c))continue;const Y=w?g.evaluate(q,{},c,o.availableImages):void 0,Q={id:I,properties:A.properties,type:A.type,sourceLayerIndex:N,index:k,geometry:V?q.geometry:Li(A),patterns:{},sortKey:Y};T.push(Q)}w&&T.sort((A,I)=>A.sortKey-I.sortKey);for(const A of T){const{geometry:I,index:k,sourceLayerIndex:N}=A;if(this.hasPattern){const V=ec("fill",this.layers,A,this.zoom,o);this.patternFeatures.push(V)}else this.addFeature(A,I,k,c,{},o.subdivisionGranularity);o.featureIndex.insert(t[k].feature,I,k,N,this.index)}}update(t,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,c)}addFeatures(t,o,c){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,o,c,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,xp),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,o,c,g,w,T){for(const A of Lc(o,500)){const I=ns(A,g,T.fill.getGranularityForZoomLevel(g.z)),k=this.layoutVertexArray;is((N,V)=>{k.emplaceBack(N,V)},this.segments,this.layoutVertexArray,this.indexArray,I.verticesFlattened,I.indicesTriangles,this.segments2,this.indexArray2,I.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,w,g)}}let nc,cl;Ot("FillBucket",Gs,{omit:["layers","patternFeatures"]});var Cp={get paint(){return cl=cl||new $i({"fill-antialias":new $t(se.paint_fill["fill-antialias"]),"fill-opacity":new Kt(se.paint_fill["fill-opacity"]),"fill-color":new Kt(se.paint_fill["fill-color"]),"fill-outline-color":new Kt(se.paint_fill["fill-outline-color"]),"fill-translate":new $t(se.paint_fill["fill-translate"]),"fill-translate-anchor":new $t(se.paint_fill["fill-translate-anchor"]),"fill-pattern":new Hl(se.paint_fill["fill-pattern"])})},get layout(){return nc=nc||new $i({"fill-sort-key":new Kt(se.layout_fill["fill-sort-key"])})}};class Ep extends Ea{constructor(t){super(t,Cp)}recalculate(t,o){super.recalculate(t,o);const c=this.paint._values["fill-outline-color"];c.value.kind==="constant"&&c.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Gs(t)}queryRadius(){return ld(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:t,geometry:o,transform:c,pixelsToTileUnits:g}){return sd(cf(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-c.bearingInRadians,g),o)}isTileClipped(){return!0}}const uu=Tn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),eg=Tn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:oh}=uu;var ic,lh,cu,Pp,pd,uh,Rp,ac={};function Ip(){if(lh)return ic;lh=1;var s=B();function t(g,w,T,A,I){this.properties={},this.extent=T,this.type=0,this._pbf=g,this._geometry=-1,this._keys=A,this._values=I,g.readFields(o,this,w)}function o(g,w,T){g==1?w.id=T.readVarint():g==2?function(A,I){for(var k=A.readVarint()+A.pos;A.pos<k;){var N=I._keys[A.readVarint()],V=I._values[A.readVarint()];I.properties[N]=V}}(T,w):g==3?w.type=T.readVarint():g==4&&(w._geometry=T.pos)}function c(g){for(var w,T,A=0,I=0,k=g.length,N=k-1;I<k;N=I++)A+=((T=g[N]).x-(w=g[I]).x)*(w.y+T.y);return A}return ic=t,t.types=["Unknown","Point","LineString","Polygon"],t.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var w,T=g.readVarint()+g.pos,A=1,I=0,k=0,N=0,V=[];g.pos<T;){if(I<=0){var q=g.readVarint();A=7&q,I=q>>3}if(I--,A===1||A===2)k+=g.readSVarint(),N+=g.readSVarint(),A===1&&(w&&V.push(w),w=[]),w.push(new s(k,N));else{if(A!==7)throw new Error("unknown command "+A);w&&w.push(w[0].clone())}}return w&&V.push(w),V},t.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var w=g.readVarint()+g.pos,T=1,A=0,I=0,k=0,N=1/0,V=-1/0,q=1/0,Y=-1/0;g.pos<w;){if(A<=0){var Q=g.readVarint();T=7&Q,A=Q>>3}if(A--,T===1||T===2)(I+=g.readSVarint())<N&&(N=I),I>V&&(V=I),(k+=g.readSVarint())<q&&(q=k),k>Y&&(Y=k);else if(T!==7)throw new Error("unknown command "+T)}return[N,q,V,Y]},t.prototype.toGeoJSON=function(g,w,T){var A,I,k=this.extent*Math.pow(2,T),N=this.extent*g,V=this.extent*w,q=this.loadGeometry(),Y=t.types[this.type];function Q(ge){for(var Le=0;Le<ge.length;Le++){var ve=ge[Le];ge[Le]=[360*(ve.x+N)/k-180,360/Math.PI*Math.atan(Math.exp((180-360*(ve.y+V)/k)*Math.PI/180))-90]}}switch(this.type){case 1:var ne=[];for(A=0;A<q.length;A++)ne[A]=q[A][0];Q(q=ne);break;case 2:for(A=0;A<q.length;A++)Q(q[A]);break;case 3:for(q=function(ge){var Le=ge.length;if(Le<=1)return[ge];for(var ve,H,le=[],Te=0;Te<Le;Te++){var Ge=c(ge[Te]);Ge!==0&&(H===void 0&&(H=Ge<0),H===Ge<0?(ve&&le.push(ve),ve=[ge[Te]]):ve.push(ge[Te]))}return ve&&le.push(ve),le}(q),A=0;A<q.length;A++)for(I=0;I<q[A].length;I++)Q(q[A][I])}q.length===1?q=q[0]:Y="Multi"+Y;var ce={type:"Feature",geometry:{type:Y,coordinates:q},properties:this.properties};return"id"in this&&(ce.id=this.id),ce},ic}function tg(){if(Pp)return cu;Pp=1;var s=Ip();function t(c,g){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(o,this,g),this.length=this._features.length}function o(c,g,w){c===15?g.version=w.readVarint():c===1?g.name=w.readString():c===5?g.extent=w.readVarint():c===2?g._features.push(w.pos):c===3?g._keys.push(w.readString()):c===4&&g._values.push(function(T){for(var A=null,I=T.readVarint()+T.pos;T.pos<I;){var k=T.readVarint()>>3;A=k===1?T.readString():k===2?T.readFloat():k===3?T.readDouble():k===4?T.readVarint64():k===5?T.readVarint():k===6?T.readSVarint():k===7?T.readBoolean():null}return A}(w))}return cu=t,t.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var g=this._pbf.readVarint()+this._pbf.pos;return new s(this._pbf,g,this.extent,this._keys,this._values)},cu}function as(){return Rp||(Rp=1,ac.VectorTile=function(){if(uh)return pd;uh=1;var s=tg();function t(o,c,g){if(o===3){var w=new s(g,g.readVarint()+g.pos);w.length&&(c[w.name]=w)}}return pd=function(o,c){this.layers=o.readFields(t,{},c)},pd}(),ac.VectorTileFeature=Ip(),ac.VectorTileLayer=tg()),ac}var sc=C(as());const hu=sc.VectorTileFeature.types,md=Math.pow(2,13);function fu(s,t,o,c,g,w,T,A){s.emplaceBack(t,o,2*Math.floor(c*md)+T,g*md*2,w*md*2,Math.round(A))}class hl{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Pe,this.centroidVertexArray=new _e,this.indexArray=new Tt,this.programConfigurations=new wo(t.layers,t.zoom),this.segments=new tr,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,c){this.features=[],this.hasPattern=Ju("fill-extrusion",this.layers,o);for(const{feature:g,id:w,index:T,sourceLayerIndex:A}of t){const I=this.layers[0]._featureFilter.needGeometry,k=Ms(g,I);if(!this.layers[0]._featureFilter.filter(new mr(this.zoom),k,c))continue;const N={id:w,sourceLayerIndex:A,index:T,geometry:I?k.geometry:Li(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(ec("fill-extrusion",this.layers,N,this.zoom,o)):this.addFeature(N,N.geometry,T,c,{},o.subdivisionGranularity),o.featureIndex.insert(g,N.geometry,T,A,this.index,!0)}}addFeatures(t,o,c){for(const g of this.features){const{geometry:w}=g;this.addFeature(g,w,g.index,o,c,t.subdivisionGranularity)}}update(t,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,oh),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,eg.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,o,c,g,w,T){for(const A of Lc(o,500)){const I={x:0,y:0,sampleCount:0},k=this.layoutVertexArray.length;this.processPolygon(I,g,t,A,T);const N=this.layoutVertexArray.length-k,V=Math.floor(I.x/I.sampleCount),q=Math.floor(I.y/I.sampleCount);for(let Y=0;Y<N;Y++)this.centroidVertexArray.emplaceBack(V,q)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,w,g)}processPolygon(t,o,c,g,w){if(g.length<1||gd(g[0]))return;for(const V of g)V.length!==0&&rg(t,V);const T={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},A=w.fill.getGranularityForZoomLevel(o.z),I=hu[c.type]==="Polygon";for(const V of g){if(V.length===0||gd(V))continue;const q=na(V,A,I);this._generateSideFaces(q,T)}if(!I)return;const k=ns(g,o,A,!1),N=this.layoutVertexArray;is((V,q)=>{fu(N,V,q,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,k.verticesFlattened,k.indicesTriangles)}_generateSideFaces(t,o){let c=0;for(let g=1;g<t.length;g++){const w=t[g],T=t[g-1];if(Dp(w,T))continue;o.segment.vertexLength+4>tr.MAX_VERTEX_ARRAY_LENGTH&&(o.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const A=w.sub(T)._perp()._unit(),I=T.dist(w);c+I>32768&&(c=0),fu(this.layoutVertexArray,w.x,w.y,A.x,A.y,0,0,c),fu(this.layoutVertexArray,w.x,w.y,A.x,A.y,0,1,c),c+=I,fu(this.layoutVertexArray,T.x,T.y,A.x,A.y,0,0,c),fu(this.layoutVertexArray,T.x,T.y,A.x,A.y,0,1,c);const k=o.segment.vertexLength;this.indexArray.emplaceBack(k,k+2,k+1),this.indexArray.emplaceBack(k+1,k+2,k+3),o.segment.vertexLength+=4,o.segment.primitiveLength+=2}}}function rg(s,t){for(let o=0;o<t.length;o++){const c=t[o];o===t.length-1&&t[0].x===c.x&&t[0].y===c.y||(s.x+=c.x,s.y+=c.y,s.sampleCount++)}}function Dp(s,t){return s.x===t.x&&(s.x<0||s.x>Rt)||s.y===t.y&&(s.y<0||s.y>Rt)}function gd(s){return s.every(t=>t.x<0)||s.every(t=>t.x>Rt)||s.every(t=>t.y<0)||s.every(t=>t.y>Rt)}let To;Ot("FillExtrusionBucket",hl,{omit:["layers","features"]});var ng={get paint(){return To=To||new $i({"fill-extrusion-opacity":new $t(se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Kt(se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new $t(se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new $t(se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Hl(se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Kt(se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Kt(se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new $t(se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class yd extends Ea{constructor(t){super(t,ng)}createBucket(t){return new hl(t)}queryRadius(){return ld(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:t,feature:o,featureState:c,geometry:g,transform:w,pixelsToTileUnits:T,pixelPosMatrix:A}){const I=cf(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-w.bearingInRadians,T),k=this.paint.get("fill-extrusion-height").evaluate(o,c),N=this.paint.get("fill-extrusion-base").evaluate(o,c),V=function(Y,Q,ne){const ce=[];for(const ge of Y){const Le=[ge.x,ge.y,0,1];Xt(Le,Le,Q),ce.push(new G(Le[0]/Le[3],Le[1]/Le[3]))}return ce}(I,A),q=function(Y,Q,ne,ce){const ge=[],Le=[],ve=ce[8]*Q,H=ce[9]*Q,le=ce[10]*Q,Te=ce[11]*Q,Ge=ce[8]*ne,mt=ce[9]*ne,Xe=ce[10]*ne,nt=ce[11]*ne;for(const bt of Y){const gt=[],St=[];for(const st of bt){const Bt=st.x,Yt=st.y,qt=ce[0]*Bt+ce[4]*Yt+ce[12],jt=ce[1]*Bt+ce[5]*Yt+ce[13],dr=ce[2]*Bt+ce[6]*Yt+ce[14],an=ce[3]*Bt+ce[7]*Yt+ce[15],Nn=dr+le,ni=an+Te,Ti=qt+Ge,_a=jt+mt,Mi=dr+Xe,cn=an+nt,Ai=new G((qt+ve)/ni,(jt+H)/ni);Ai.z=Nn/ni,gt.push(Ai);const Ci=new G(Ti/cn,_a/cn);Ci.z=Mi/cn,St.push(Ci)}ge.push(gt),Le.push(St)}return[ge,Le]}(g,N,k,A);return function(Y,Q,ne){let ce=1/0;sd(ne,Q)&&(ce=Gn(ne,Q[0]));for(let ge=0;ge<Q.length;ge++){const Le=Q[ge],ve=Y[ge];for(let H=0;H<Le.length-1;H++){const le=Le[H],Te=[le,Le[H+1],ve[H+1],ve[H],le];Yu(ne,Te)&&(ce=Math.min(ce,Gn(ne,Te)))}}return ce!==1/0&&ce}(q[0],q[1],V)}}function fl(s,t){return s.x*t.x+s.y*t.y}function Gn(s,t){if(s.length===1){let o=0;const c=t[o++];let g;for(;!g||c.equals(g);)if(g=t[o++],!g)return 1/0;for(;o<t.length;o++){const w=t[o],T=s[0],A=g.sub(c),I=w.sub(c),k=T.sub(c),N=fl(A,A),V=fl(A,I),q=fl(I,I),Y=fl(k,A),Q=fl(k,I),ne=N*q-V*V,ce=(q*Y-V*Q)/ne,ge=(N*Q-V*Y)/ne,Le=c.z*(1-ce-ge)+g.z*ce+w.z*ge;if(isFinite(Le))return Le}return 1/0}{let o=1/0;for(const c of t)o=Math.min(o,c.z);return o}}const s0=Tn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:o0}=s0,ig=Tn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:l0}=ig,u0=sc.VectorTileFeature.types,Qn=Math.cos(Math.PI/180*37.5),En=Math.pow(2,14)/.5;class jr{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new ze,this.layoutVertexArray2=new Ie,this.indexArray=new Tt,this.programConfigurations=new wo(t.layers,t.zoom),this.segments=new tr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,c){this.hasPattern=Ju("line",this.layers,o);const g=this.layers[0].layout.get("line-sort-key"),w=!g.isConstant(),T=[];for(const{feature:A,id:I,index:k,sourceLayerIndex:N}of t){const V=this.layers[0]._featureFilter.needGeometry,q=Ms(A,V);if(!this.layers[0]._featureFilter.filter(new mr(this.zoom),q,c))continue;const Y=w?g.evaluate(q,{},c):void 0,Q={id:I,properties:A.properties,type:A.type,sourceLayerIndex:N,index:k,geometry:V?q.geometry:Li(A),patterns:{},sortKey:Y};T.push(Q)}w&&T.sort((A,I)=>A.sortKey-I.sortKey);for(const A of T){const{geometry:I,index:k,sourceLayerIndex:N}=A;if(this.hasPattern){const V=ec("line",this.layers,A,this.zoom,o);this.patternFeatures.push(V)}else this.addFeature(A,I,k,c,{},o.subdivisionGranularity);o.featureIndex.insert(t[k].feature,I,k,N,this.index)}}update(t,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,c)}addFeatures(t,o,c){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,o,c,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,l0)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,o0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,o,c,g,w,T){const A=this.layers[0].layout,I=A.get("line-join").evaluate(t,{}),k=A.get("line-cap"),N=A.get("line-miter-limit"),V=A.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const q of o)this.addLine(q,t,I,k,N,V,g,T);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,w,g)}addLine(t,o,c,g,w,T,A,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,t=na(t,A?I.line.getGranularityForZoomLevel(A.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ve=0;ve<t.length-1;ve++)this.totalDistance+=t[ve].dist(t[ve+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const k=u0[o.type]==="Polygon";let N=t.length;for(;N>=2&&t[N-1].equals(t[N-2]);)N--;let V=0;for(;V<N-1&&t[V].equals(t[V+1]);)V++;if(N<(k?3:2))return;c==="bevel"&&(w=1.05);const q=this.overscaling<=16?15*Rt/(512*this.overscaling):0,Y=this.segments.prepareSegment(10*N,this.layoutVertexArray,this.indexArray);let Q,ne,ce,ge,Le;this.e1=this.e2=-1,k&&(Q=t[N-2],Le=t[V].sub(Q)._unit()._perp());for(let ve=V;ve<N;ve++){if(ce=ve===N-1?k?t[V+1]:void 0:t[ve+1],ce&&t[ve].equals(ce))continue;Le&&(ge=Le),Q&&(ne=Q),Q=t[ve],Le=ce?ce.sub(Q)._unit()._perp():ge,ge=ge||Le;let H=ge.add(Le);H.x===0&&H.y===0||H._unit();const le=ge.x*Le.x+ge.y*Le.y,Te=H.x*Le.x+H.y*Le.y,Ge=Te!==0?1/Te:1/0,mt=2*Math.sqrt(2-2*Te),Xe=Te<Qn&&ne&&ce,nt=ge.x*Le.y-ge.y*Le.x>0;if(Xe&&ve>V){const St=Q.dist(ne);if(St>2*q){const st=Q.sub(Q.sub(ne)._mult(q/St)._round());this.updateDistance(ne,st),this.addCurrentVertex(st,ge,0,0,Y),ne=st}}const bt=ne&&ce;let gt=bt?c:k?"butt":g;if(bt&&gt==="round"&&(Ge<T?gt="miter":Ge<=2&&(gt="fakeround")),gt==="miter"&&Ge>w&&(gt="bevel"),gt==="bevel"&&(Ge>2&&(gt="flipbevel"),Ge<w&&(gt="miter")),ne&&this.updateDistance(ne,Q),gt==="miter")H._mult(Ge),this.addCurrentVertex(Q,H,0,0,Y);else if(gt==="flipbevel"){if(Ge>100)H=Le.mult(-1);else{const St=Ge*ge.add(Le).mag()/ge.sub(Le).mag();H._perp()._mult(St*(nt?-1:1))}this.addCurrentVertex(Q,H,0,0,Y),this.addCurrentVertex(Q,H.mult(-1),0,0,Y)}else if(gt==="bevel"||gt==="fakeround"){const St=-Math.sqrt(Ge*Ge-1),st=nt?St:0,Bt=nt?0:St;if(ne&&this.addCurrentVertex(Q,ge,st,Bt,Y),gt==="fakeround"){const Yt=Math.round(180*mt/Math.PI/20);for(let qt=1;qt<Yt;qt++){let jt=qt/Yt;if(jt!==.5){const an=jt-.5;jt+=jt*an*(jt-1)*((1.0904+le*(le*(3.55645-1.43519*le)-3.2452))*an*an+(.848013+le*(.215638*le-1.06021)))}const dr=Le.sub(ge)._mult(jt)._add(ge)._unit()._mult(nt?-1:1);this.addHalfVertex(Q,dr.x,dr.y,!1,nt,0,Y)}}ce&&this.addCurrentVertex(Q,Le,-st,-Bt,Y)}else if(gt==="butt")this.addCurrentVertex(Q,H,0,0,Y);else if(gt==="square"){const St=ne?1:-1;this.addCurrentVertex(Q,H,St,St,Y)}else gt==="round"&&(ne&&(this.addCurrentVertex(Q,ge,0,0,Y),this.addCurrentVertex(Q,ge,1,1,Y,!0)),ce&&(this.addCurrentVertex(Q,Le,-1,-1,Y,!0),this.addCurrentVertex(Q,Le,0,0,Y)));if(Xe&&ve<N-1){const St=Q.dist(ce);if(St>2*q){const st=Q.add(ce.sub(Q)._mult(q/St)._round());this.updateDistance(Q,st),this.addCurrentVertex(st,Le,0,0,Y),Q=st}}}}addCurrentVertex(t,o,c,g,w,T=!1){const A=o.y*g-o.x,I=-o.y-o.x*g;this.addHalfVertex(t,o.x+o.y*c,o.y-o.x*c,T,!1,c,w),this.addHalfVertex(t,A,I,T,!0,-g,w),this.distance>En/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,o,c,g,w,T))}addHalfVertex({x:t,y:o},c,g,w,T,A,I){const k=.5*(this.lineClips?this.scaledDistance*(En-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(w?1:0),(o<<1)+(T?1:0),Math.round(63*c)+128,Math.round(63*g)+128,1+(A===0?0:A<0?-1:1)|(63&k)<<2,k>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const N=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,N,this.e2),I.primitiveLength++),T?this.e2=N:this.e1=N}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,o){this.distance+=t.dist(o),this.updateScaledDistance()}}let Jr,Pn;Ot("LineBucket",jr,{omit:["layers","patternFeatures"]});var za={get paint(){return Pn=Pn||new $i({"line-opacity":new Kt(se.paint_line["line-opacity"]),"line-color":new Kt(se.paint_line["line-color"]),"line-translate":new $t(se.paint_line["line-translate"]),"line-translate-anchor":new $t(se.paint_line["line-translate-anchor"]),"line-width":new Kt(se.paint_line["line-width"]),"line-gap-width":new Kt(se.paint_line["line-gap-width"]),"line-offset":new Kt(se.paint_line["line-offset"]),"line-blur":new Kt(se.paint_line["line-blur"]),"line-dasharray":new Qc(se.paint_line["line-dasharray"]),"line-pattern":new Hl(se.paint_line["line-pattern"]),"line-gradient":new rf(se.paint_line["line-gradient"])})},get layout(){return Jr=Jr||new $i({"line-cap":new $t(se.layout_line["line-cap"]),"line-join":new Kt(se.layout_line["line-join"]),"line-miter-limit":new $t(se.layout_line["line-miter-limit"]),"line-round-limit":new $t(se.layout_line["line-round-limit"]),"line-sort-key":new Kt(se.layout_line["line-sort-key"])})}};class dl extends Kt{possiblyEvaluate(t,o){return o=new mr(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(t,o)}evaluate(t,o,c,g){return o=Qr({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(t,o,c,g)}}let pl;class Lp extends Ea{constructor(t){super(t,za),this.gradientVersion=0,pl||(pl=new dl(za.paint.properties["line-width"].specification),pl.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const o=this.gradientExpression();this.stepInterpolant=!!function(c){return c._styleExpression!==void 0}(o)&&o._styleExpression.expression instanceof zs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,o){super.recalculate(t,o),this.paint._values["line-floorwidth"]=pl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new jr(t)}queryRadius(t){const o=t,c=Mo(Qu("line-width",this,o),Qu("line-gap-width",this,o)),g=Qu("line-offset",this,o);return c/2+Math.abs(g)+ld(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:t,feature:o,featureState:c,geometry:g,transform:w,pixelsToTileUnits:T}){const A=cf(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-w.bearingInRadians,T),I=T/2*Mo(this.paint.get("line-width").evaluate(o,c),this.paint.get("line-gap-width").evaluate(o,c)),k=this.paint.get("line-offset").evaluate(o,c);return k&&(g=function(N,V){const q=[];for(let Y=0;Y<N.length;Y++){const Q=N[Y],ne=[];for(let ce=0;ce<Q.length;ce++){const ge=Q[ce-1],Le=Q[ce],ve=Q[ce+1],H=ce===0?new G(0,0):Le.sub(ge)._unit()._perp(),le=ce===Q.length-1?new G(0,0):ve.sub(Le)._unit()._perp(),Te=H._add(le)._unit(),Ge=Te.x*le.x+Te.y*le.y;Ge!==0&&Te._mult(1/Ge),ne.push(Te._mult(V)._add(Le))}q.push(ne)}return q}(g,k*T)),function(N,V,q){for(let Y=0;Y<V.length;Y++){const Q=V[Y];if(N.length>=3){for(let ne=0;ne<Q.length;ne++)if(Jl(N,Q[ne]))return!0}if(Wm(N,Q,q))return!0}return!1}(A,g,I)}isTileClipped(){return!0}}function Mo(s,t){return t>0?t+2*s:s}const ri=Tn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),du=Tn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Tn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const oc=Tn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Tn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const _d=Tn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),As=Tn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ch(s,t,o){return s.sections.forEach(c=>{c.text=function(g,w,T){const A=w.layout.get("text-transform").evaluate(T,{});return A==="uppercase"?g=g.toLocaleUpperCase():A==="lowercase"&&(g=g.toLocaleLowerCase()),qr.applyArabicShaping&&(g=qr.applyArabicShaping(g)),g}(c.text,t,o)}),s}Tn([{name:"triangle",components:3,type:"Uint16"}]),Tn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Tn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Tn([{type:"Float32",name:"offsetX"}]),Tn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Tn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const ml={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Hs,_f,vd,Hn=24,hh={};function pu(){return Hs||(Hs=1,hh.read=function(s,t,o,c,g){var w,T,A=8*g-c-1,I=(1<<A)-1,k=I>>1,N=-7,V=o?g-1:0,q=o?-1:1,Y=s[t+V];for(V+=q,w=Y&(1<<-N)-1,Y>>=-N,N+=A;N>0;w=256*w+s[t+V],V+=q,N-=8);for(T=w&(1<<-N)-1,w>>=-N,N+=c;N>0;T=256*T+s[t+V],V+=q,N-=8);if(w===0)w=1-k;else{if(w===I)return T?NaN:1/0*(Y?-1:1);T+=Math.pow(2,c),w-=k}return(Y?-1:1)*T*Math.pow(2,w-c)},hh.write=function(s,t,o,c,g,w){var T,A,I,k=8*w-g-1,N=(1<<k)-1,V=N>>1,q=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,Y=c?0:w-1,Q=c?1:-1,ne=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(A=isNaN(t)?1:0,T=N):(T=Math.floor(Math.log(t)/Math.LN2),t*(I=Math.pow(2,-T))<1&&(T--,I*=2),(t+=T+V>=1?q/I:q*Math.pow(2,1-V))*I>=2&&(T++,I/=2),T+V>=N?(A=0,T=N):T+V>=1?(A=(t*I-1)*Math.pow(2,g),T+=V):(A=t*Math.pow(2,V-1)*Math.pow(2,g),T=0));g>=8;s[o+Y]=255&A,Y+=Q,A/=256,g-=8);for(T=T<<g|A,k+=g;k>0;s[o+Y]=255&T,Y+=Q,T/=256,k-=8);s[o+Y-Q]|=128*ne}),hh}function vf(){if(vd)return _f;vd=1,_f=t;var s=pu();function t(H){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(H)?H:new Uint8Array(H||0),this.pos=0,this.type=0,this.length=this.buf.length}t.Varint=0,t.Fixed64=1,t.Bytes=2,t.Fixed32=5;var o=4294967296,c=1/o,g=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function w(H){return H.type===t.Bytes?H.readVarint()+H.pos:H.pos+1}function T(H,le,Te){return Te?4294967296*le+(H>>>0):4294967296*(le>>>0)+(H>>>0)}function A(H,le,Te){var Ge=le<=16383?1:le<=2097151?2:le<=268435455?3:Math.floor(Math.log(le)/(7*Math.LN2));Te.realloc(Ge);for(var mt=Te.pos-1;mt>=H;mt--)Te.buf[mt+Ge]=Te.buf[mt]}function I(H,le){for(var Te=0;Te<H.length;Te++)le.writeVarint(H[Te])}function k(H,le){for(var Te=0;Te<H.length;Te++)le.writeSVarint(H[Te])}function N(H,le){for(var Te=0;Te<H.length;Te++)le.writeFloat(H[Te])}function V(H,le){for(var Te=0;Te<H.length;Te++)le.writeDouble(H[Te])}function q(H,le){for(var Te=0;Te<H.length;Te++)le.writeBoolean(H[Te])}function Y(H,le){for(var Te=0;Te<H.length;Te++)le.writeFixed32(H[Te])}function Q(H,le){for(var Te=0;Te<H.length;Te++)le.writeSFixed32(H[Te])}function ne(H,le){for(var Te=0;Te<H.length;Te++)le.writeFixed64(H[Te])}function ce(H,le){for(var Te=0;Te<H.length;Te++)le.writeSFixed64(H[Te])}function ge(H,le){return(H[le]|H[le+1]<<8|H[le+2]<<16)+16777216*H[le+3]}function Le(H,le,Te){H[Te]=le,H[Te+1]=le>>>8,H[Te+2]=le>>>16,H[Te+3]=le>>>24}function ve(H,le){return(H[le]|H[le+1]<<8|H[le+2]<<16)+(H[le+3]<<24)}return t.prototype={destroy:function(){this.buf=null},readFields:function(H,le,Te){for(Te=Te||this.length;this.pos<Te;){var Ge=this.readVarint(),mt=Ge>>3,Xe=this.pos;this.type=7&Ge,H(mt,le,this),this.pos===Xe&&this.skip(Ge)}return le},readMessage:function(H,le){return this.readFields(H,le,this.readVarint()+this.pos)},readFixed32:function(){var H=ge(this.buf,this.pos);return this.pos+=4,H},readSFixed32:function(){var H=ve(this.buf,this.pos);return this.pos+=4,H},readFixed64:function(){var H=ge(this.buf,this.pos)+ge(this.buf,this.pos+4)*o;return this.pos+=8,H},readSFixed64:function(){var H=ge(this.buf,this.pos)+ve(this.buf,this.pos+4)*o;return this.pos+=8,H},readFloat:function(){var H=s.read(this.buf,this.pos,!0,23,4);return this.pos+=4,H},readDouble:function(){var H=s.read(this.buf,this.pos,!0,52,8);return this.pos+=8,H},readVarint:function(H){var le,Te,Ge=this.buf;return le=127&(Te=Ge[this.pos++]),Te<128?le:(le|=(127&(Te=Ge[this.pos++]))<<7,Te<128?le:(le|=(127&(Te=Ge[this.pos++]))<<14,Te<128?le:(le|=(127&(Te=Ge[this.pos++]))<<21,Te<128?le:function(mt,Xe,nt){var bt,gt,St=nt.buf;if(bt=(112&(gt=St[nt.pos++]))>>4,gt<128||(bt|=(127&(gt=St[nt.pos++]))<<3,gt<128)||(bt|=(127&(gt=St[nt.pos++]))<<10,gt<128)||(bt|=(127&(gt=St[nt.pos++]))<<17,gt<128)||(bt|=(127&(gt=St[nt.pos++]))<<24,gt<128)||(bt|=(1&(gt=St[nt.pos++]))<<31,gt<128))return T(mt,bt,Xe);throw new Error("Expected varint not more than 10 bytes")}(le|=(15&(Te=Ge[this.pos]))<<28,H,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var H=this.readVarint();return H%2==1?(H+1)/-2:H/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var H=this.readVarint()+this.pos,le=this.pos;return this.pos=H,H-le>=12&&g?function(Te,Ge,mt){return g.decode(Te.subarray(Ge,mt))}(this.buf,le,H):function(Te,Ge,mt){for(var Xe="",nt=Ge;nt<mt;){var bt,gt,St,st=Te[nt],Bt=null,Yt=st>239?4:st>223?3:st>191?2:1;if(nt+Yt>mt)break;Yt===1?st<128&&(Bt=st):Yt===2?(192&(bt=Te[nt+1]))==128&&(Bt=(31&st)<<6|63&bt)<=127&&(Bt=null):Yt===3?(gt=Te[nt+2],(192&(bt=Te[nt+1]))==128&&(192&gt)==128&&((Bt=(15&st)<<12|(63&bt)<<6|63&gt)<=2047||Bt>=55296&&Bt<=57343)&&(Bt=null)):Yt===4&&(gt=Te[nt+2],St=Te[nt+3],(192&(bt=Te[nt+1]))==128&&(192&gt)==128&&(192&St)==128&&((Bt=(15&st)<<18|(63&bt)<<12|(63&gt)<<6|63&St)<=65535||Bt>=1114112)&&(Bt=null)),Bt===null?(Bt=65533,Yt=1):Bt>65535&&(Bt-=65536,Xe+=String.fromCharCode(Bt>>>10&1023|55296),Bt=56320|1023&Bt),Xe+=String.fromCharCode(Bt),nt+=Yt}return Xe}(this.buf,le,H)},readBytes:function(){var H=this.readVarint()+this.pos,le=this.buf.subarray(this.pos,H);return this.pos=H,le},readPackedVarint:function(H,le){if(this.type!==t.Bytes)return H.push(this.readVarint(le));var Te=w(this);for(H=H||[];this.pos<Te;)H.push(this.readVarint(le));return H},readPackedSVarint:function(H){if(this.type!==t.Bytes)return H.push(this.readSVarint());var le=w(this);for(H=H||[];this.pos<le;)H.push(this.readSVarint());return H},readPackedBoolean:function(H){if(this.type!==t.Bytes)return H.push(this.readBoolean());var le=w(this);for(H=H||[];this.pos<le;)H.push(this.readBoolean());return H},readPackedFloat:function(H){if(this.type!==t.Bytes)return H.push(this.readFloat());var le=w(this);for(H=H||[];this.pos<le;)H.push(this.readFloat());return H},readPackedDouble:function(H){if(this.type!==t.Bytes)return H.push(this.readDouble());var le=w(this);for(H=H||[];this.pos<le;)H.push(this.readDouble());return H},readPackedFixed32:function(H){if(this.type!==t.Bytes)return H.push(this.readFixed32());var le=w(this);for(H=H||[];this.pos<le;)H.push(this.readFixed32());return H},readPackedSFixed32:function(H){if(this.type!==t.Bytes)return H.push(this.readSFixed32());var le=w(this);for(H=H||[];this.pos<le;)H.push(this.readSFixed32());return H},readPackedFixed64:function(H){if(this.type!==t.Bytes)return H.push(this.readFixed64());var le=w(this);for(H=H||[];this.pos<le;)H.push(this.readFixed64());return H},readPackedSFixed64:function(H){if(this.type!==t.Bytes)return H.push(this.readSFixed64());var le=w(this);for(H=H||[];this.pos<le;)H.push(this.readSFixed64());return H},skip:function(H){var le=7&H;if(le===t.Varint)for(;this.buf[this.pos++]>127;);else if(le===t.Bytes)this.pos=this.readVarint()+this.pos;else if(le===t.Fixed32)this.pos+=4;else{if(le!==t.Fixed64)throw new Error("Unimplemented type: "+le);this.pos+=8}},writeTag:function(H,le){this.writeVarint(H<<3|le)},realloc:function(H){for(var le=this.length||16;le<this.pos+H;)le*=2;if(le!==this.length){var Te=new Uint8Array(le);Te.set(this.buf),this.buf=Te,this.length=le}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(H){this.realloc(4),Le(this.buf,H,this.pos),this.pos+=4},writeSFixed32:function(H){this.realloc(4),Le(this.buf,H,this.pos),this.pos+=4},writeFixed64:function(H){this.realloc(8),Le(this.buf,-1&H,this.pos),Le(this.buf,Math.floor(H*c),this.pos+4),this.pos+=8},writeSFixed64:function(H){this.realloc(8),Le(this.buf,-1&H,this.pos),Le(this.buf,Math.floor(H*c),this.pos+4),this.pos+=8},writeVarint:function(H){(H=+H||0)>268435455||H<0?function(le,Te){var Ge,mt;if(le>=0?(Ge=le%4294967296|0,mt=le/4294967296|0):(mt=~(-le/4294967296),4294967295^(Ge=~(-le%4294967296))?Ge=Ge+1|0:(Ge=0,mt=mt+1|0)),le>=18446744073709552e3||le<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Te.realloc(10),function(Xe,nt,bt){bt.buf[bt.pos++]=127&Xe|128,Xe>>>=7,bt.buf[bt.pos++]=127&Xe|128,Xe>>>=7,bt.buf[bt.pos++]=127&Xe|128,Xe>>>=7,bt.buf[bt.pos++]=127&Xe|128,bt.buf[bt.pos]=127&(Xe>>>=7)}(Ge,0,Te),function(Xe,nt){var bt=(7&Xe)<<4;nt.buf[nt.pos++]|=bt|((Xe>>>=3)?128:0),Xe&&(nt.buf[nt.pos++]=127&Xe|((Xe>>>=7)?128:0),Xe&&(nt.buf[nt.pos++]=127&Xe|((Xe>>>=7)?128:0),Xe&&(nt.buf[nt.pos++]=127&Xe|((Xe>>>=7)?128:0),Xe&&(nt.buf[nt.pos++]=127&Xe|((Xe>>>=7)?128:0),Xe&&(nt.buf[nt.pos++]=127&Xe)))))}(mt,Te)}(H,this):(this.realloc(4),this.buf[this.pos++]=127&H|(H>127?128:0),H<=127||(this.buf[this.pos++]=127&(H>>>=7)|(H>127?128:0),H<=127||(this.buf[this.pos++]=127&(H>>>=7)|(H>127?128:0),H<=127||(this.buf[this.pos++]=H>>>7&127))))},writeSVarint:function(H){this.writeVarint(H<0?2*-H-1:2*H)},writeBoolean:function(H){this.writeVarint(!!H)},writeString:function(H){H=String(H),this.realloc(4*H.length),this.pos++;var le=this.pos;this.pos=function(Ge,mt,Xe){for(var nt,bt,gt=0;gt<mt.length;gt++){if((nt=mt.charCodeAt(gt))>55295&&nt<57344){if(!bt){nt>56319||gt+1===mt.length?(Ge[Xe++]=239,Ge[Xe++]=191,Ge[Xe++]=189):bt=nt;continue}if(nt<56320){Ge[Xe++]=239,Ge[Xe++]=191,Ge[Xe++]=189,bt=nt;continue}nt=bt-55296<<10|nt-56320|65536,bt=null}else bt&&(Ge[Xe++]=239,Ge[Xe++]=191,Ge[Xe++]=189,bt=null);nt<128?Ge[Xe++]=nt:(nt<2048?Ge[Xe++]=nt>>6|192:(nt<65536?Ge[Xe++]=nt>>12|224:(Ge[Xe++]=nt>>18|240,Ge[Xe++]=nt>>12&63|128),Ge[Xe++]=nt>>6&63|128),Ge[Xe++]=63&nt|128)}return Xe}(this.buf,H,this.pos);var Te=this.pos-le;Te>=128&&A(le,Te,this),this.pos=le-1,this.writeVarint(Te),this.pos+=Te},writeFloat:function(H){this.realloc(4),s.write(this.buf,H,this.pos,!0,23,4),this.pos+=4},writeDouble:function(H){this.realloc(8),s.write(this.buf,H,this.pos,!0,52,8),this.pos+=8},writeBytes:function(H){var le=H.length;this.writeVarint(le),this.realloc(le);for(var Te=0;Te<le;Te++)this.buf[this.pos++]=H[Te]},writeRawMessage:function(H,le){this.pos++;var Te=this.pos;H(le,this);var Ge=this.pos-Te;Ge>=128&&A(Te,Ge,this),this.pos=Te-1,this.writeVarint(Ge),this.pos+=Ge},writeMessage:function(H,le,Te){this.writeTag(H,t.Bytes),this.writeRawMessage(le,Te)},writePackedVarint:function(H,le){le.length&&this.writeMessage(H,I,le)},writePackedSVarint:function(H,le){le.length&&this.writeMessage(H,k,le)},writePackedBoolean:function(H,le){le.length&&this.writeMessage(H,q,le)},writePackedFloat:function(H,le){le.length&&this.writeMessage(H,N,le)},writePackedDouble:function(H,le){le.length&&this.writeMessage(H,V,le)},writePackedFixed32:function(H,le){le.length&&this.writeMessage(H,Y,le)},writePackedSFixed32:function(H,le){le.length&&this.writeMessage(H,Q,le)},writePackedFixed64:function(H,le){le.length&&this.writeMessage(H,ne,le)},writePackedSFixed64:function(H,le){le.length&&this.writeMessage(H,ce,le)},writeBytesField:function(H,le){this.writeTag(H,t.Bytes),this.writeBytes(le)},writeFixed32Field:function(H,le){this.writeTag(H,t.Fixed32),this.writeFixed32(le)},writeSFixed32Field:function(H,le){this.writeTag(H,t.Fixed32),this.writeSFixed32(le)},writeFixed64Field:function(H,le){this.writeTag(H,t.Fixed64),this.writeFixed64(le)},writeSFixed64Field:function(H,le){this.writeTag(H,t.Fixed64),this.writeSFixed64(le)},writeVarintField:function(H,le){this.writeTag(H,t.Varint),this.writeVarint(le)},writeSVarintField:function(H,le){this.writeTag(H,t.Varint),this.writeSVarint(le)},writeStringField:function(H,le){this.writeTag(H,t.Bytes),this.writeString(le)},writeFloatField:function(H,le){this.writeTag(H,t.Fixed32),this.writeFloat(le)},writeDoubleField:function(H,le){this.writeTag(H,t.Fixed64),this.writeDouble(le)},writeBooleanField:function(H,le){this.writeVarintField(H,!!le)}},_f}var gl=C(vf());const lc=3;function zp(s,t,o){s===1&&o.readMessage(kp,t)}function kp(s,t,o){if(s===3){const{id:c,bitmap:g,width:w,height:T,left:A,top:I,advance:k}=o.readMessage(xf,{});t.push({id:c,bitmap:new nu({width:w+2*lc,height:T+2*lc},g),metrics:{width:w,height:T,left:A,top:I,advance:k}})}}function xf(s,t,o){s===1?t.id=o.readVarint():s===2?t.bitmap=o.readBytes():s===3?t.width=o.readVarint():s===4?t.height=o.readVarint():s===5?t.left=o.readSVarint():s===6?t.top=o.readSVarint():s===7&&(t.advance=o.readVarint())}const Op=lc;function ka(s){let t=0,o=0;for(const T of s)t+=T.w*T.h,o=Math.max(o,T.w);s.sort((T,A)=>A.h-T.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),o),h:1/0}];let g=0,w=0;for(const T of s)for(let A=c.length-1;A>=0;A--){const I=c[A];if(!(T.w>I.w||T.h>I.h)){if(T.x=I.x,T.y=I.y,w=Math.max(w,T.y+T.h),g=Math.max(g,T.x+T.w),T.w===I.w&&T.h===I.h){const k=c.pop();A<c.length&&(c[A]=k)}else T.h===I.h?(I.x+=T.w,I.w-=T.w):T.w===I.w?(I.y+=T.h,I.h-=T.h):(c.push({x:I.x+T.w,y:I.y,w:I.w-T.w,h:T.h}),I.y+=T.h,I.h-=T.h);break}}return{w:g,h:w,fill:t/(g*w)||0}}const ca=1;class ia{constructor(t,{pixelRatio:o,version:c,stretchX:g,stretchY:w,content:T,textFitWidth:A,textFitHeight:I}){this.paddedRect=t,this.pixelRatio=o,this.stretchX=g,this.stretchY=w,this.content=T,this.version=c,this.textFitWidth=A,this.textFitHeight=I}get tl(){return[this.paddedRect.x+ca,this.paddedRect.y+ca]}get br(){return[this.paddedRect.x+this.paddedRect.w-ca,this.paddedRect.y+this.paddedRect.h-ca]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ca)/this.pixelRatio,(this.paddedRect.h-2*ca)/this.pixelRatio]}}class Bp{constructor(t,o){const c={},g={};this.haveRenderCallbacks=[];const w=[];this.addImages(t,c,w),this.addImages(o,g,w);const{w:T,h:A}=ka(w),I=new Da({width:T||1,height:A||1});for(const k in t){const N=t[k],V=c[k].paddedRect;Da.copy(N.data,I,{x:0,y:0},{x:V.x+ca,y:V.y+ca},N.data)}for(const k in o){const N=o[k],V=g[k].paddedRect,q=V.x+ca,Y=V.y+ca,Q=N.data.width,ne=N.data.height;Da.copy(N.data,I,{x:0,y:0},{x:q,y:Y},N.data),Da.copy(N.data,I,{x:0,y:ne-1},{x:q,y:Y-1},{width:Q,height:1}),Da.copy(N.data,I,{x:0,y:0},{x:q,y:Y+ne},{width:Q,height:1}),Da.copy(N.data,I,{x:Q-1,y:0},{x:q-1,y:Y},{width:1,height:ne}),Da.copy(N.data,I,{x:0,y:0},{x:q+Q,y:Y},{width:1,height:ne})}this.image=I,this.iconPositions=c,this.patternPositions=g}addImages(t,o,c){for(const g in t){const w=t[g],T={x:0,y:0,w:w.data.width+2*ca,h:w.data.height+2*ca};c.push(T),o[g]=new ia(T,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(t,o){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const c in t.updatedImages)this.patchUpdatedImage(this.iconPositions[c],t.getImage(c),o),this.patchUpdatedImage(this.patternPositions[c],t.getImage(c),o)}patchUpdatedImage(t,o,c){if(!t||!o||t.version===o.version)return;t.version=o.version;const[g,w]=t.tl;c.update(o.data,void 0,{x:g,y:w})}}var Ao;Ot("ImagePosition",ia),Ot("ImageAtlas",Bp),y.al=void 0,(Ao=y.al||(y.al={}))[Ao.none=0]="none",Ao[Ao.horizontal=1]="horizontal",Ao[Ao.vertical=2]="vertical",Ao[Ao.horizontalOnly=3]="horizontalOnly";const bf=-17;class wf{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(t,o,c){const g=new wf;return g.scale=t||1,g.fontStack=o,g.verticalAlign=c||"bottom",g}static forImage(t,o){const c=new wf;return c.imageName=t,c.verticalAlign=o||"bottom",c}}class Oa{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,o){const c=new Oa;for(let g=0;g<t.sections.length;g++){const w=t.sections[g];w.image?c.addImageSection(w):c.addTextSection(w,o)}return c}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let o="";for(let c=0;c<t.length;c++){const g=t.charCodeAt(c+1)||null,w=t.charCodeAt(c-1)||null;o+=g&&Yc(g)&&!ml[t[c+1]]||w&&Yc(w)&&!ml[t[c-1]]||!ml[t[c]]?t[c]:ml[t[c]]}return o}(this.text)}trim(){let t=0;for(let c=0;c<this.text.length&&fh[this.text.charCodeAt(c)];c++)t++;let o=this.text.length;for(let c=this.text.length-1;c>=0&&c>=t&&fh[this.text.charCodeAt(c)];c--)o--;this.text=this.text.substring(t,o),this.sectionIndex=this.sectionIndex.slice(t,o)}substring(t,o){const c=new Oa;return c.text=this.text.substring(t,o),c.sectionIndex=this.sectionIndex.slice(t,o),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,o)=>Math.max(t,this.sections[o].scale),0)}getMaxImageSize(t){let o=0,c=0;for(let g=0;g<this.length();g++){const w=this.getSection(g);if(w.imageName){const T=t[w.imageName];if(!T)continue;const A=T.displaySize;o=Math.max(o,A[0]),c=Math.max(c,A[1])}}return{maxImageWidth:o,maxImageHeight:c}}addTextSection(t,o){this.text+=t.text,this.sections.push(wf.forText(t.scale,t.fontStack||o,t.verticalAlign));const c=this.sections.length-1;for(let g=0;g<t.text.length;++g)this.sectionIndex.push(c)}addImageSection(t){const o=t.image?t.image.name:"";if(o.length===0)return void Dr("Can't add FormattedSection with an empty image.");const c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(wf.forImage(o,t.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Dr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function uc(s,t,o,c,g,w,T,A,I,k,N,V,q,Y,Q){const ne=Oa.fromFeature(s,g);let ce;V===y.al.vertical&&ne.verticalizePunctuation();const{processBidirectionalText:ge,processStyledBidirectionalText:Le}=qr;if(ge&&ne.sections.length===1){ce=[];const le=ge(ne.toString(),Up(ne,k,w,t,c,Y));for(const Te of le){const Ge=new Oa;Ge.text=Te,Ge.sections=ne.sections;for(let mt=0;mt<Te.length;mt++)Ge.sectionIndex.push(0);ce.push(Ge)}}else if(Le){ce=[];const le=Le(ne.text,ne.sectionIndex,Up(ne,k,w,t,c,Y));for(const Te of le){const Ge=new Oa;Ge.text=Te[0],Ge.sectionIndex=Te[1],Ge.sections=ne.sections,ce.push(Ge)}}else ce=function(le,Te){const Ge=[],mt=le.text;let Xe=0;for(const nt of Te)Ge.push(le.substring(Xe,nt)),Xe=nt;return Xe<mt.length&&Ge.push(le.substring(Xe,mt.length)),Ge}(ne,Up(ne,k,w,t,c,Y));const ve=[],H={positionedLines:ve,text:ne.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:V,iconsInText:!1,verticalizable:!1};return function(le,Te,Ge,mt,Xe,nt,bt,gt,St,st,Bt,Yt){let qt=0,jt=0,dr=0,an=0;const Nn=gt==="right"?1:gt==="left"?0:.5,ni=Hn/Yt;let Ti=0;for(const cn of Xe){cn.trim();const Ai=cn.getMaxScale(),Ci={positionedGlyphs:[],lineOffset:0};le.positionedLines[Ti]=Ci;const ii=Ci.positionedGlyphs;let aa=0;if(!cn.length()){jt+=nt,++Ti;continue}const ss=og(mt,cn,ni);for(let Wi=0;Wi<cn.length();Wi++){const ai=cn.getSection(Wi),Wn=cn.getSectionIndex(Wi),si=cn.getCharCode(Wi),Fn=ph(St,Bt,si);let yn;if(ai.imageName){if(le.iconsInText=!0,ai.scale=ai.scale*ni,yn=lg(ai,Fn,Ai,ss,mt),!yn)continue;aa=Math.max(aa,yn.imageOffset)}else if(yn=bd(ai,si,Fn,ss,Te,Ge),!yn)continue;const{rect:Ys,metrics:xl,baselineOffset:r}=yn;ii.push({glyph:si,imageName:ai.imageName,x:qt,y:jt+r+bf,vertical:Fn,scale:ai.scale,fontStack:ai.fontStack,sectionIndex:Wn,metrics:xl,rect:Ys}),Fn?(le.verticalizable=!0,qt+=(ai.imageName?xl.advance:Hn)*ai.scale+st):qt+=xl.advance*ai.scale+st}ii.length!==0&&(dr=Math.max(qt-st,dr),ug(ii,0,ii.length-1,Nn)),qt=0,Ci.lineOffset=Math.max(aa,(Ai-1)*Hn);const Jn=nt*Ai+aa;jt+=Jn,an=Math.max(Jn,an),++Ti}const{horizontalAlign:_a,verticalAlign:Mi}=Vp(bt);(function(cn,Ai,Ci,ii,aa,ss,Jn,Wi,ai){const Wn=(Ai-Ci)*aa;let si=0;si=ss!==Jn?-Wi*ii-bf:-ii*ai*Jn+.5*Jn;for(const Fn of cn)for(const yn of Fn.positionedGlyphs)yn.x+=Wn,yn.y+=si})(le.positionedLines,Nn,_a,Mi,dr,an,nt,jt,Xe.length),le.top+=-Mi*jt,le.bottom=le.top+jt,le.left+=-_a*dr,le.right=le.left+dr}(H,t,o,c,ce,T,A,I,V,k,q,Q),!function(le){for(const Te of le)if(Te.positionedGlyphs.length!==0)return!1;return!0}(ve)&&H}const fh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},dh={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},ag={40:!0};function jp(s,t,o,c,g,w){if(t.imageName){const T=c[t.imageName];return T?T.displaySize[0]*t.scale*Hn/w+g:0}{const T=o[t.fontStack],A=T&&T[s];return A?A.metrics.advance*t.scale+g:0}}function Np(s,t,o,c){const g=Math.pow(s-t,2);return c?s<t?g/2:2*g:g+Math.abs(o)*o}function Fp(s,t,o){let c=0;return s===10&&(c-=1e4),o&&(c+=150),s!==40&&s!==65288||(c+=50),t!==41&&t!==65289||(c+=50),c}function xd(s,t,o,c,g,w){let T=null,A=Np(t,o,g,w);for(const I of c){const k=Np(t-I.x,o,g,w)+I.badness;k<=A&&(T=I,A=k)}return{index:s,x:t,priorBreak:T,badness:A}}function sg(s){return s?sg(s.priorBreak).concat(s.index):[]}function Up(s,t,o,c,g,w){if(!s)return[];const T=[],A=function(V,q,Y,Q,ne,ce){let ge=0;for(let Le=0;Le<V.length();Le++){const ve=V.getSection(Le);ge+=jp(V.getCharCode(Le),ve,Q,ne,q,ce)}return ge/Math.max(1,Math.ceil(ge/Y))}(s,t,o,c,g,w),I=s.text.indexOf("")>=0;let k=0;for(let V=0;V<s.length();V++){const q=s.getSection(V),Y=s.getCharCode(V);if(fh[Y]||(k+=jp(Y,q,c,g,t,w)),V<s.length()-1){const Q=!((N=Y)<11904)&&(!!Tr["CJK Compatibility Forms"](N)||!!Tr["CJK Compatibility"](N)||!!Tr["CJK Strokes"](N)||!!Tr["CJK Symbols and Punctuation"](N)||!!Tr["Enclosed CJK Letters and Months"](N)||!!Tr["Halfwidth and Fullwidth Forms"](N)||!!Tr["Ideographic Description Characters"](N)||!!Tr["Vertical Forms"](N)||tf.test(String.fromCodePoint(N)));(dh[Y]||Q||q.imageName||V!==s.length()-2&&ag[s.getCharCode(V+1)])&&T.push(xd(V+1,k,A,T,Fp(Y,s.getCharCode(V+1),Q&&I),!1))}}var N;return sg(xd(s.length(),k,A,T,0,!0))}function Vp(s){let t=.5,o=.5;switch(s){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:t,verticalAlign:o}}function og(s,t,o){const c=t.getMaxScale()*Hn,{maxImageWidth:g,maxImageHeight:w}=t.getMaxImageSize(s),T=Math.max(c,w*o);return{verticalLineContentWidth:Math.max(c,g*o),horizontalLineContentHeight:T}}function $p(s){switch(s){case"top":return 0;case"center":return .5;default:return 1}}function ph(s,t,o){return!(s===y.al.horizontal||!t&&!ws(o)||t&&(fh[o]||(c=o,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(c)))));var c}function bd(s,t,o,c,g,w){const T=w[s.fontStack],A=function(k,N,V,q){if(k&&k.rect)return k;const Y=N[V.fontStack],Q=Y&&Y[q];return Q?{rect:null,metrics:Q.metrics}:null}(T&&T[t],g,s,t);if(A===null)return null;let I;if(o)I=c.verticalLineContentWidth-s.scale*Hn;else{const k=$p(s.verticalAlign);I=(c.horizontalLineContentHeight-s.scale*Hn)*k}return{rect:A.rect,metrics:A.metrics,baselineOffset:I}}function lg(s,t,o,c,g){const w=g[s.imageName];if(!w)return null;const T=w.paddedRect,A=w.displaySize,I={width:A[0],height:A[1],left:ca,top:-3,advance:t?A[1]:A[0]};let k;if(t)k=c.verticalLineContentWidth-A[1]*s.scale;else{const N=$p(s.verticalAlign);k=(c.horizontalLineContentHeight-A[1]*s.scale)*N}return{rect:T,metrics:I,baselineOffset:k,imageOffset:(t?A[0]:A[1])*s.scale-Hn*o}}function ug(s,t,o,c){if(c===0)return;const g=s[o],w=(s[o].x+g.metrics.advance*g.scale)*c;for(let T=t;T<=o;T++)s[T].x-=w}function c0(s,t,o){const{horizontalAlign:c,verticalAlign:g}=Vp(o),w=t[0]-s.displaySize[0]*c,T=t[1]-s.displaySize[1]*g;return{image:s,top:T,bottom:T+s.displaySize[1],left:w,right:w+s.displaySize[0]}}function Zp(s){var t,o;let c=s.left,g=s.top,w=s.right-c,T=s.bottom-g;const A=(t=s.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",I=(o=s.image.textFitHeight)!==null&&o!==void 0?o:"stretchOrShrink",k=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(I==="proportional"){if(A==="stretchOnly"&&w/T<k||A==="proportional"){const N=Math.ceil(T*k);c*=N/w,w=N}}else if(A==="proportional"&&I==="stretchOnly"&&k!==0&&w/T>k){const N=Math.ceil(w/k);g*=N/T,T=N}return{x1:c,y1:g,x2:c+w,y2:g+T}}function cc(s,t,o,c,g,w){const T=s.image;let A;if(T.content){const ce=T.content,ge=T.pixelRatio||1;A=[ce[0]/ge,ce[1]/ge,T.displaySize[0]-ce[2]/ge,T.displaySize[1]-ce[3]/ge]}const I=t.left*w,k=t.right*w;let N,V,q,Y;o==="width"||o==="both"?(Y=g[0]+I-c[3],V=g[0]+k+c[1]):(Y=g[0]+(I+k-T.displaySize[0])/2,V=Y+T.displaySize[0]);const Q=t.top*w,ne=t.bottom*w;return o==="height"||o==="both"?(N=g[1]+Q-c[0],q=g[1]+ne+c[2]):(N=g[1]+(Q+ne-T.displaySize[1])/2,q=N+T.displaySize[1]),{image:T,top:N,right:V,bottom:q,left:Y,collisionPadding:A}}const mh=255,Yr=128,Co=mh*Yr;function cg(s,t){const{expression:o}=t;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new mr(s+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:c,interpolationType:g}=o;let w=0;for(;w<c.length&&c[w]<=s;)w++;w=Math.max(0,w-1);let T=w;for(;T<c.length&&c[T]<s+1;)T++;T=Math.min(c.length-1,T);const A=c[w],I=c[T];return o.kind==="composite"?{kind:"composite",minZoom:A,maxZoom:I,interpolationType:g}:{kind:"camera",minZoom:A,maxZoom:I,minSize:o.evaluate(new mr(A)),maxSize:o.evaluate(new mr(I)),interpolationType:g}}}function wd(s,t,o){let c="never";const g=s.get(t);return g?c=g:s.get(o)&&(c="always"),c}const h0=sc.VectorTileFeature.types,f0=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Sd(s,t,o,c,g,w,T,A,I,k,N,V,q){const Y=A?Math.min(Co,Math.round(A[0])):0,Q=A?Math.min(Co,Math.round(A[1])):0;s.emplaceBack(t,o,Math.round(32*c),Math.round(32*g),w,T,(Y<<1)+(I?1:0),Q,16*k,16*N,256*V,256*q)}function gh(s,t,o){s.emplaceBack(t.x,t.y,o),s.emplaceBack(t.x,t.y,o),s.emplaceBack(t.x,t.y,o),s.emplaceBack(t.x,t.y,o)}function yh(s){for(const t of s.sections)if(Rr(t.text))return!0;return!1}class Sf{constructor(t){this.layoutVertexArray=new He,this.indexArray=new Tt,this.programConfigurations=t,this.segments=new tr,this.dynamicLayoutVertexArray=new at,this.opacityVertexArray=new ot,this.hasVisibleVertices=!1,this.placedSymbolArray=new j}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,o,c,g){this.isEmpty()||(c&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ri.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,du.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,f0,!0),this.opacityVertexBuffer.itemSize=1),(c||g)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ot("SymbolBuffers",Sf);class _h{constructor(t,o,c){this.layoutVertexArray=new t,this.layoutAttributes=o,this.indexArray=new c,this.segments=new tr,this.collisionVertexArray=new It}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,oc.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ot("CollisionBuffers",_h);class mu{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(T=>T.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=cg(this.zoom,o["text-size"]),this.iconSizeData=cg(this.zoom,o["icon-size"]);const c=this.layers[0].layout,g=c.get("symbol-sort-key"),w=c.get("symbol-z-order");this.canOverlap=wd(c,"text-overlap","text-allow-overlap")!=="never"||wd(c,"icon-overlap","icon-allow-overlap")!=="never"||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey=w!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(w==="viewport-y"||w==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,c.get("symbol-placement")==="point"&&(this.writingModes=c.get("text-writing-mode").map(T=>y.al[T])),this.stateDependentLayerIds=this.layers.filter(T=>T.isStateDependent()).map(T=>T.id),this.sourceID=t.sourceID}createArrays(){this.text=new Sf(new wo(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new Sf(new wo(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new Z,this.lineVertexArray=new ee,this.symbolInstances=new $,this.textAnchorOffsets=new de}calculateGlyphDependencies(t,o,c,g,w){for(let T=0;T<t.length;T++)if(o[t.charCodeAt(T)]=!0,(c||g)&&w){const A=ml[t.charAt(T)];A&&(o[A.charCodeAt(0)]=!0)}}populate(t,o,c){const g=this.layers[0],w=g.layout,T=w.get("text-font"),A=w.get("text-field"),I=w.get("icon-image"),k=(A.value.kind!=="constant"||A.value.value instanceof Bi&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),N=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,V=w.get("symbol-sort-key");if(this.features=[],!k&&!N)return;const q=o.iconDependencies,Y=o.glyphDependencies,Q=o.availableImages,ne=new mr(this.zoom);for(const{feature:ce,id:ge,index:Le,sourceLayerIndex:ve}of t){const H=g._featureFilter.needGeometry,le=Ms(ce,H);if(!g._featureFilter.filter(ne,le,c))continue;let Te,Ge;if(H||(le.geometry=Li(ce)),k){const Xe=g.getValueAndResolveTokens("text-field",le,c,Q),nt=Bi.factory(Xe),bt=this.hasRTLText=this.hasRTLText||yh(nt);(!bt||qr.getRTLTextPluginStatus()==="unavailable"||bt&&qr.isParsed())&&(Te=ch(nt,g,le))}if(N){const Xe=g.getValueAndResolveTokens("icon-image",le,c,Q);Ge=Xe instanceof Xi?Xe:Xi.fromString(Xe)}if(!Te&&!Ge)continue;const mt=this.sortFeaturesByKey?V.evaluate(le,{},c):void 0;if(this.features.push({id:ge,text:Te,icon:Ge,index:Le,sourceLayerIndex:ve,geometry:le.geometry,properties:ce.properties,type:h0[ce.type],sortKey:mt}),Ge&&(q[Ge.name]=!0),Te){const Xe=T.evaluate(le,{},c).join(","),nt=w.get("text-rotation-alignment")!=="viewport"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(y.al.vertical)>=0;for(const bt of Te.sections)if(bt.image)q[bt.image.name]=!0;else{const gt=Fs(Te.toString()),St=bt.fontStack||Xe,st=Y[St]=Y[St]||{};this.calculateGlyphDependencies(bt.text,st,nt,this.allowVerticalPlacement,gt)}}}w.get("symbol-placement")==="line"&&(this.features=function(ce){const ge={},Le={},ve=[];let H=0;function le(Xe){ve.push(ce[Xe]),H++}function Te(Xe,nt,bt){const gt=Le[Xe];return delete Le[Xe],Le[nt]=gt,ve[gt].geometry[0].pop(),ve[gt].geometry[0]=ve[gt].geometry[0].concat(bt[0]),gt}function Ge(Xe,nt,bt){const gt=ge[nt];return delete ge[nt],ge[Xe]=gt,ve[gt].geometry[0].shift(),ve[gt].geometry[0]=bt[0].concat(ve[gt].geometry[0]),gt}function mt(Xe,nt,bt){const gt=bt?nt[0][nt[0].length-1]:nt[0][0];return`${Xe}:${gt.x}:${gt.y}`}for(let Xe=0;Xe<ce.length;Xe++){const nt=ce[Xe],bt=nt.geometry,gt=nt.text?nt.text.toString():null;if(!gt){le(Xe);continue}const St=mt(gt,bt),st=mt(gt,bt,!0);if(St in Le&&st in ge&&Le[St]!==ge[st]){const Bt=Ge(St,st,bt),Yt=Te(St,st,ve[Bt].geometry);delete ge[St],delete Le[st],Le[mt(gt,ve[Yt].geometry,!0)]=Yt,ve[Bt].geometry=null}else St in Le?Te(St,st,bt):st in ge?Ge(St,st,bt):(le(Xe),ge[St]=H-1,Le[st]=H-1)}return ve.filter(Xe=>Xe.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ce,ge)=>ce.sortKey-ge.sortKey)}update(t,o,c){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,o,this.layers,c),this.icon.programConfigurations.updatePaintArrays(t,o,this.layers,c))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,o){const c=this.lineVertexArray.length;if(t.segment!==void 0){let g=t.dist(o[t.segment+1]),w=t.dist(o[t.segment]);const T={};for(let A=t.segment+1;A<o.length;A++)T[A]={x:o[A].x,y:o[A].y,tileUnitDistanceFromAnchor:g},A<o.length-1&&(g+=o[A+1].dist(o[A]));for(let A=t.segment||0;A>=0;A--)T[A]={x:o[A].x,y:o[A].y,tileUnitDistanceFromAnchor:w},A>0&&(w+=o[A-1].dist(o[A]));for(let A=0;A<o.length;A++){const I=T[A];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(t,o,c,g,w,T,A,I,k,N,V,q){const Y=t.indexArray,Q=t.layoutVertexArray,ne=t.segments.prepareSegment(4*o.length,Q,Y,this.canOverlap?T.sortKey:void 0),ce=this.glyphOffsetArray.length,ge=ne.vertexLength,Le=this.allowVerticalPlacement&&A===y.al.vertical?Math.PI/2:0,ve=T.text&&T.text.sections;for(let H=0;H<o.length;H++){const{tl:le,tr:Te,bl:Ge,br:mt,tex:Xe,pixelOffsetTL:nt,pixelOffsetBR:bt,minFontScaleX:gt,minFontScaleY:St,glyphOffset:st,isSDF:Bt,sectionIndex:Yt}=o[H],qt=ne.vertexLength,jt=st[1];Sd(Q,I.x,I.y,le.x,jt+le.y,Xe.x,Xe.y,c,Bt,nt.x,nt.y,gt,St),Sd(Q,I.x,I.y,Te.x,jt+Te.y,Xe.x+Xe.w,Xe.y,c,Bt,bt.x,nt.y,gt,St),Sd(Q,I.x,I.y,Ge.x,jt+Ge.y,Xe.x,Xe.y+Xe.h,c,Bt,nt.x,bt.y,gt,St),Sd(Q,I.x,I.y,mt.x,jt+mt.y,Xe.x+Xe.w,Xe.y+Xe.h,c,Bt,bt.x,bt.y,gt,St),gh(t.dynamicLayoutVertexArray,I,Le),Y.emplaceBack(qt,qt+2,qt+1),Y.emplaceBack(qt+1,qt+2,qt+3),ne.vertexLength+=4,ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(st[0]),H!==o.length-1&&Yt===o[H+1].sectionIndex||t.programConfigurations.populatePaintArrays(Q.length,T,T.index,{},q,ve&&ve[Yt])}t.placedSymbolArray.emplaceBack(I.x,I.y,ce,this.glyphOffsetArray.length-ce,ge,k,N,I.segment,c?c[0]:0,c?c[1]:0,g[0],g[1],A,0,!1,0,V)}_addCollisionDebugVertex(t,o,c,g,w,T){return o.emplaceBack(0,0),t.emplaceBack(c.x,c.y,g,w,Math.round(T.x),Math.round(T.y))}addCollisionDebugVertices(t,o,c,g,w,T,A){const I=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),k=I.vertexLength,N=w.layoutVertexArray,V=w.collisionVertexArray,q=A.anchorX,Y=A.anchorY;this._addCollisionDebugVertex(N,V,T,q,Y,new G(t,o)),this._addCollisionDebugVertex(N,V,T,q,Y,new G(c,o)),this._addCollisionDebugVertex(N,V,T,q,Y,new G(c,g)),this._addCollisionDebugVertex(N,V,T,q,Y,new G(t,g)),I.vertexLength+=4;const Q=w.indexArray;Q.emplaceBack(k,k+1),Q.emplaceBack(k+1,k+2),Q.emplaceBack(k+2,k+3),Q.emplaceBack(k+3,k),I.primitiveLength+=4}addDebugCollisionBoxes(t,o,c,g){for(let w=t;w<o;w++){const T=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(T.x1,T.y1,T.x2,T.y2,g?this.textCollisionBox:this.iconCollisionBox,T.anchorPoint,c)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new _h(rt,_d.members,pt),this.iconCollisionBox=new _h(rt,_d.members,pt);for(let t=0;t<this.symbolInstances.length;t++){const o=this.symbolInstances.get(t);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(t,o,c,g,w,T,A,I,k){const N={};for(let V=o;V<c;V++){const q=t.get(V);N.textBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},N.textFeatureIndex=q.featureIndex;break}for(let V=g;V<w;V++){const q=t.get(V);N.verticalTextBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},N.verticalTextFeatureIndex=q.featureIndex;break}for(let V=T;V<A;V++){const q=t.get(V);N.iconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},N.iconFeatureIndex=q.featureIndex;break}for(let V=I;V<k;V++){const q=t.get(V);N.verticalIconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},N.verticalIconFeatureIndex=q.featureIndex;break}return N}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const c=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,o){const c=t.placedSymbolArray.get(o),g=c.vertexStartIndex+4*c.numGlyphs;for(let w=c.vertexStartIndex;w<g;w+=4)t.indexArray.emplaceBack(w,w+2,w+1),t.indexArray.emplaceBack(w+1,w+2,w+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(t),c=Math.cos(t),g=[],w=[],T=[];for(let A=0;A<this.symbolInstances.length;++A){T.push(A);const I=this.symbolInstances.get(A);g.push(0|Math.round(o*I.anchorX+c*I.anchorY)),w.push(I.featureIndex)}return T.sort((A,I)=>g[A]-g[I]||w[I]-w[A]),T}addToSortKeyRanges(t,o){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===o?c.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const c=this.symbolInstances.get(o);this.featureSortOrder.push(c.featureIndex),[c.rightJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.leftJustifiedTextSymbolIndex].forEach((g,w,T)=>{g>=0&&T.indexOf(g)===w&&this.addIndicesForPlacedSymbol(this.text,g)}),c.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,c.verticalPlacedTextSymbolIndex),c.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.placedIconSymbolIndex),c.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let gu,Ws;Ot("SymbolBucket",mu,{omit:["layers","collisionBoxArray","features","compareText"]}),mu.MAX_GLYPHS=65535,mu.addDynamicAttributes=gh;var hc={get paint(){return Ws=Ws||new $i({"icon-opacity":new Kt(se.paint_symbol["icon-opacity"]),"icon-color":new Kt(se.paint_symbol["icon-color"]),"icon-halo-color":new Kt(se.paint_symbol["icon-halo-color"]),"icon-halo-width":new Kt(se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Kt(se.paint_symbol["icon-halo-blur"]),"icon-translate":new $t(se.paint_symbol["icon-translate"]),"icon-translate-anchor":new $t(se.paint_symbol["icon-translate-anchor"]),"text-opacity":new Kt(se.paint_symbol["text-opacity"]),"text-color":new Kt(se.paint_symbol["text-color"],{runtimeType:Hr,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new Kt(se.paint_symbol["text-halo-color"]),"text-halo-width":new Kt(se.paint_symbol["text-halo-width"]),"text-halo-blur":new Kt(se.paint_symbol["text-halo-blur"]),"text-translate":new $t(se.paint_symbol["text-translate"]),"text-translate-anchor":new $t(se.paint_symbol["text-translate-anchor"])})},get layout(){return gu=gu||new $i({"symbol-placement":new $t(se.layout_symbol["symbol-placement"]),"symbol-spacing":new $t(se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new $t(se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Kt(se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new $t(se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new $t(se.layout_symbol["icon-allow-overlap"]),"icon-overlap":new $t(se.layout_symbol["icon-overlap"]),"icon-ignore-placement":new $t(se.layout_symbol["icon-ignore-placement"]),"icon-optional":new $t(se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new $t(se.layout_symbol["icon-rotation-alignment"]),"icon-size":new Kt(se.layout_symbol["icon-size"]),"icon-text-fit":new $t(se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new $t(se.layout_symbol["icon-text-fit-padding"]),"icon-image":new Kt(se.layout_symbol["icon-image"]),"icon-rotate":new Kt(se.layout_symbol["icon-rotate"]),"icon-padding":new Kt(se.layout_symbol["icon-padding"]),"icon-keep-upright":new $t(se.layout_symbol["icon-keep-upright"]),"icon-offset":new Kt(se.layout_symbol["icon-offset"]),"icon-anchor":new Kt(se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new $t(se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new $t(se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new $t(se.layout_symbol["text-rotation-alignment"]),"text-field":new Kt(se.layout_symbol["text-field"]),"text-font":new Kt(se.layout_symbol["text-font"]),"text-size":new Kt(se.layout_symbol["text-size"]),"text-max-width":new Kt(se.layout_symbol["text-max-width"]),"text-line-height":new $t(se.layout_symbol["text-line-height"]),"text-letter-spacing":new Kt(se.layout_symbol["text-letter-spacing"]),"text-justify":new Kt(se.layout_symbol["text-justify"]),"text-radial-offset":new Kt(se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new $t(se.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Kt(se.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Kt(se.layout_symbol["text-anchor"]),"text-max-angle":new $t(se.layout_symbol["text-max-angle"]),"text-writing-mode":new $t(se.layout_symbol["text-writing-mode"]),"text-rotate":new Kt(se.layout_symbol["text-rotate"]),"text-padding":new $t(se.layout_symbol["text-padding"]),"text-keep-upright":new $t(se.layout_symbol["text-keep-upright"]),"text-transform":new Kt(se.layout_symbol["text-transform"]),"text-offset":new Kt(se.layout_symbol["text-offset"]),"text-allow-overlap":new $t(se.layout_symbol["text-allow-overlap"]),"text-overlap":new $t(se.layout_symbol["text-overlap"]),"text-ignore-placement":new $t(se.layout_symbol["text-ignore-placement"]),"text-optional":new $t(se.layout_symbol["text-optional"])})}};class hg{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:Cr,this.defaultValue=t}evaluate(t){if(t.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(t.formattedSection))return o.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ot("FormatSectionOverride",hg,{omit:["defaultValue"]});class Tf extends Ea{constructor(t){super(t,hc)}recalculate(t,o){if(super.recalculate(t,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const c=this.layout.get("text-writing-mode");if(c){const g=[];for(const w of c)g.indexOf(w)<0&&g.push(w);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,o,c,g){const w=this.layout.get(t).evaluate(o,{},c,g),T=this._unevaluatedLayout._values[t];return T.isDataDriven()||xi(T.value)||!w?w:function(A,I){return I.replace(/{([^{}]+)}/g,(k,N)=>A&&N in A?String(A[N]):"")}(o.properties,w)}createBucket(t){return new mu(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of hc.paint.overridableProperties){if(!Tf.hasPaintOverride(this.layout,t))continue;const o=this.paint.get(t),c=new hg(o),g=new Vc(c,o.property.specification);let w=null;w=o.value.kind==="constant"||o.value.kind==="source"?new fo("source",g):new Ul("composite",g,o.value.zoomStops),this.paint._values[t]=new Ss(o.property,w,o.parameters)}}_handleOverridablePaintPropertyUpdate(t,o,c){return!(!this.layout||o.isDataDriven()||c.isDataDriven())&&Tf.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,o){const c=t.get("text-field"),g=hc.paint.properties[o];let w=!1;const T=A=>{for(const I of A)if(g.overrides&&g.overrides.hasOverride(I))return void(w=!0)};if(c.value.kind==="constant"&&c.value.value instanceof Bi)T(c.value.value.sections);else if(c.value.kind==="source"){const A=k=>{w||(k instanceof ba&&Sn(k.value)===yi?T(k.value.sections):k instanceof Iu?T(k.sections):k.eachChild(A))},I=c.value;I._styleExpression&&A(I._styleExpression.expression)}return w}}let qp;var fg={get paint(){return qp=qp||new $i({"background-color":new $t(se.paint_background["background-color"]),"background-pattern":new Qc(se.paint_background["background-pattern"]),"background-opacity":new $t(se.paint_background["background-opacity"])})}};class d0 extends Ea{constructor(t){super(t,fg)}}let Td;var dg={get paint(){return Td=Td||new $i({"raster-opacity":new $t(se.paint_raster["raster-opacity"]),"raster-hue-rotate":new $t(se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new $t(se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new $t(se.paint_raster["raster-brightness-max"]),"raster-saturation":new $t(se.paint_raster["raster-saturation"]),"raster-contrast":new $t(se.paint_raster["raster-contrast"]),"raster-resampling":new $t(se.paint_raster["raster-resampling"]),"raster-fade-duration":new $t(se.paint_raster["raster-fade-duration"])})}};class pg extends Ea{constructor(t){super(t,dg)}}class p0 extends Ea{constructor(t){super(t,{}),this.onAdd=o=>{this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)},this.onRemove=o=>{this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Gp{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Hp={once:!0},Wp=63710088e-1;class yu{constructor(t,o){if(isNaN(t)||isNaN(o))throw new Error(`Invalid LngLat object: (${t}, ${o})`);if(this.lng=+t,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new yu(ir(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const o=Math.PI/180,c=this.lat*o,g=t.lat*o,w=Math.sin(c)*Math.sin(g)+Math.cos(c)*Math.cos(g)*Math.cos((t.lng-this.lng)*o);return Wp*Math.acos(Math.min(w,1))}static convert(t){if(t instanceof yu)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new yu(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new yu(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const vh=2*Math.PI*Wp;function mg(s){return vh*Math.cos(s*Math.PI/180)}function Kp(s){return(180+s)/360}function Xr(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function Md(s,t){return s/mg(t)}function xh(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function Ad(s,t){return s*mg(xh(t))}class bh{constructor(t,o,c=0){this.x=+t,this.y=+o,this.z=+c}static fromLngLat(t,o=0){const c=yu.convert(t);return new bh(Kp(c.lng),Xr(c.lat),Md(o,c.lat))}toLngLat(){return new yu(360*this.x-180,xh(this.y))}toAltitude(){return Ad(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/vh*(t=xh(this.y),1/Math.cos(t*Math.PI/180));var t}}function Cd(s,t,o){var c=2*Math.PI*6378137/256/Math.pow(2,o);return[s*c-2*Math.PI*6378137/2,t*c-2*Math.PI*6378137/2]}class fc{constructor(t,o,c){if(!function(g,w,T){return!(g<0||g>25||T<0||T>=Math.pow(2,g)||w<0||w>=Math.pow(2,g))}(t,o,c))throw new Error(`x=${o}, y=${c}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=o,this.y=c,this.key=dc(0,t,t,o,c)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,o,c){const g=(T=this.y,A=this.z,I=Cd(256*(w=this.x),256*(T=Math.pow(2,A)-T-1),A),k=Cd(256*(w+1),256*(T+1),A),I[0]+","+I[1]+","+k[0]+","+k[1]);var w,T,A,I,k;const N=function(V,q,Y){let Q,ne="";for(let ce=V;ce>0;ce--)Q=1<<ce-1,ne+=(q&Q?1:0)+(Y&Q?2:0);return ne}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(c==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,N).replace(/{bbox-epsg-3857}/g,g)}isChildOf(t){const o=this.z-t.z;return o>0&&t.x===this.x>>o&&t.y===this.y>>o}getTilePoint(t){const o=Math.pow(2,this.z);return new G((t.x*o-this.x)*Rt,(t.y*o-this.y)*Rt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Mf{constructor(t,o){this.wrap=t,this.canonical=o,this.key=dc(t,o.z,o.z,o.x,o.y)}}class Gi{constructor(t,o,c,g,w){if(this.terrainRttPosMatrix32f=null,t<c)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${c}`);this.overscaledZ=t,this.wrap=o,this.canonical=new fc(c,+g,+w),this.key=dc(o,t,c,g,w)}clone(){return new Gi(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-t;return t>this.canonical.z?new Gi(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Gi(t,this.wrap,t,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(t,o){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-t;return t>this.canonical.z?dc(this.wrap*+o,t,this.canonical.z,this.canonical.x,this.canonical.y):dc(this.wrap*+o,t,t,this.canonical.x>>c,this.canonical.y>>c)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const o=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>o&&t.canonical.y===this.canonical.y>>o}children(t){if(this.overscaledZ>=t)return[new Gi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,c=2*this.canonical.x,g=2*this.canonical.y;return[new Gi(o,this.wrap,o,c,g),new Gi(o,this.wrap,o,c+1,g),new Gi(o,this.wrap,o,c,g+1),new Gi(o,this.wrap,o,c+1,g+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Gi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Gi(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Mf(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new bh(t.x-this.wrap,t.y))}}function dc(s,t,o,c,g){(s*=2)<0&&(s=-1*s-1);const w=1<<o;return(w*w*s+w*g+c).toString(36)+o.toString(36)+t.toString(36)}Ot("CanonicalTileID",fc),Ot("OverscaledTileID",Gi,{omit:["terrainRttPosMatrix32f"]});class gg{constructor(t,o,c,g=1,w=1,T=1,A=0){if(this.uid=t,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(c&&!["mapbox","terrarium","custom"].includes(c))return void Dr(`"${c}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=o.height;const I=this.dim=o.height-2;switch(this.data=new Uint32Array(o.data.buffer),c){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=w,this.blueFactor=T,this.baseShift=A;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let k=0;k<I;k++)this.data[this._idx(-1,k)]=this.data[this._idx(0,k)],this.data[this._idx(I,k)]=this.data[this._idx(I-1,k)],this.data[this._idx(k,-1)]=this.data[this._idx(k,0)],this.data[this._idx(k,I)]=this.data[this._idx(k,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let k=0;k<I;k++)for(let N=0;N<I;N++){const V=this.get(k,N);V>this.max&&(this.max=V),V<this.min&&(this.min=V)}}get(t,o){const c=new Uint8Array(this.data.buffer),g=4*this._idx(t,o);return this.unpack(c[g],c[g+1],c[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,o){if(t<-1||t>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(t+1)}unpack(t,o,c){return t*this.redFactor+o*this.greenFactor+c*this.blueFactor-this.baseShift}getPixels(){return new Da({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,o,c){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let g=o*this.dim,w=o*this.dim+this.dim,T=c*this.dim,A=c*this.dim+this.dim;switch(o){case-1:g=w-1;break;case 1:w=g+1}switch(c){case-1:T=A-1;break;case 1:A=T+1}const I=-o*this.dim,k=-c*this.dim;for(let N=T;N<A;N++)for(let V=g;V<w;V++)this.data[this._idx(V,N)]=t.data[this._idx(V+I,N+k)]}}Ot("DEMData",gg);class yg{constructor(t){this._stringToNumber={},this._numberToString=[];for(let o=0;o<t.length;o++){const c=t[o];this._stringToNumber[c]=o,this._numberToString[o]=c}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class Yp{constructor(t,o,c,g,w){this.type="Feature",this._vectorTileFeature=t,t._z=o,t._x=c,t._y=g,this.properties=t.properties,this.id=w}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(t[o]=this[o]);return t}}class Xp{constructor(t,o){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new dn(Rt,16,0),this.grid3D=new dn(Rt,16,0),this.featureIndexArray=new me,this.promoteId=o}insert(t,o,c,g,w,T){const A=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,g,w);const I=T?this.grid3D:this.grid;for(let k=0;k<o.length;k++){const N=o[k],V=[1/0,1/0,-1/0,-1/0];for(let q=0;q<N.length;q++){const Y=N[q];V[0]=Math.min(V[0],Y.x),V[1]=Math.min(V[1],Y.y),V[2]=Math.max(V[2],Y.x),V[3]=Math.max(V[3],Y.y)}V[0]<Rt&&V[1]<Rt&&V[2]>=0&&V[3]>=0&&I.insert(A,V[0],V[1],V[2],V[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new sc.VectorTile(new gl(this.rawTileData)).layers,this.sourceLayerCoder=new yg(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,o,c,g){this.loadVTLayers();const w=t.params,T=Rt/t.tileSize/t.scale,A=Ka(w.filter),I=t.queryGeometry,k=t.queryPadding*T,N=gn(I),V=this.grid.query(N.minX-k,N.minY-k,N.maxX+k,N.maxY+k),q=gn(t.cameraQueryGeometry),Y=this.grid3D.query(q.minX-k,q.minY-k,q.maxX+k,q.maxY+k,(ce,ge,Le,ve)=>function(H,le,Te,Ge,mt){for(const nt of H)if(le<=nt.x&&Te<=nt.y&&Ge>=nt.x&&mt>=nt.y)return!0;const Xe=[new G(le,Te),new G(le,mt),new G(Ge,mt),new G(Ge,Te)];if(H.length>2){for(const nt of Xe)if(Jl(H,nt))return!0}for(let nt=0;nt<H.length-1;nt++)if(il(H[nt],H[nt+1],Xe))return!0;return!1}(t.cameraQueryGeometry,ce-k,ge-k,Le+k,ve+k));for(const ce of Y)V.push(ce);V.sort(Qp);const Q={};let ne;for(let ce=0;ce<V.length;ce++){const ge=V[ce];if(ge===ne)continue;ne=ge;const Le=this.featureIndexArray.get(ge);let ve=null;this.loadMatchingFeature(Q,Le.bucketIndex,Le.sourceLayerIndex,Le.featureIndex,A,w.layers,w.availableImages,o,c,g,(H,le,Te)=>(ve||(ve=Li(H)),le.queryIntersectsFeature({queryGeometry:I,feature:H,featureState:Te,geometry:ve,zoom:this.z,transform:t.transform,pixelsToTileUnits:T,pixelPosMatrix:t.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:t.getElevation})))}return Q}loadMatchingFeature(t,o,c,g,w,T,A,I,k,N,V){const q=this.bucketLayerIDs[o];if(T&&!q.some(ce=>T.has(ce)))return;const Y=this.sourceLayerCoder.decode(c),Q=this.vtLayers[Y].feature(g);if(w.needGeometry){const ce=Ms(Q,!0);if(!w.filter(new mr(this.tileID.overscaledZ),ce,this.tileID.canonical))return}else if(!w.filter(new mr(this.tileID.overscaledZ),Q))return;const ne=this.getId(Q,Y);for(let ce=0;ce<q.length;ce++){const ge=q[ce];if(T&&!T.has(ge))continue;const Le=I[ge];if(!Le)continue;let ve={};ne&&N&&(ve=N.getState(Le.sourceLayer||"_geojsonTileLayer",ne));const H=Qr({},k[ge]);H.paint=Af(H.paint,Le.paint,Q,ve,A),H.layout=Af(H.layout,Le.layout,Q,ve,A);const le=!V||V(Q,Le,ve);if(!le)continue;const Te=new Yp(Q,this.z,this.x,this.y,ne);Te.layer=H;let Ge=t[ge];Ge===void 0&&(Ge=t[ge]=[]),Ge.push({featureIndex:g,feature:Te,intersectionZ:le})}}lookupSymbolFeatures(t,o,c,g,w,T,A,I){const k={};this.loadVTLayers();const N=Ka(w);for(const V of t)this.loadMatchingFeature(k,c,g,V,N,T,A,I,o);return k}hasLayer(t){for(const o of this.bucketLayerIDs)for(const c of o)if(t===c)return!0;return!1}getId(t,o){var c;let g=t.id;return this.promoteId&&(g=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof g=="boolean"&&(g=Number(g)),g===void 0&&(!((c=t.properties)===null||c===void 0)&&c.cluster)&&this.promoteId&&(g=Number(t.properties.cluster_id))),g}}function Af(s,t,o,c,g){return en(s,(w,T)=>{const A=t instanceof In?t.get(T):null;return A&&A.evaluate?A.evaluate(o,c,g):A})}function gn(s){let t=1/0,o=1/0,c=-1/0,g=-1/0;for(const w of s)t=Math.min(t,w.x),o=Math.min(o,w.y),c=Math.max(c,w.x),g=Math.max(g,w.y);return{minX:t,minY:o,maxX:c,maxY:g}}function Qp(s,t){return t-s}function Hi(s,t,o,c,g){const w=[];for(let T=0;T<s.length;T++){const A=s[T];let I;for(let k=0;k<A.length-1;k++){let N=A[k],V=A[k+1];N.x<t&&V.x<t||(N.x<t?N=new G(t,N.y+(t-N.x)/(V.x-N.x)*(V.y-N.y))._round():V.x<t&&(V=new G(t,N.y+(t-N.x)/(V.x-N.x)*(V.y-N.y))._round()),N.y<o&&V.y<o||(N.y<o?N=new G(N.x+(o-N.y)/(V.y-N.y)*(V.x-N.x),o)._round():V.y<o&&(V=new G(N.x+(o-N.y)/(V.y-N.y)*(V.x-N.x),o)._round()),N.x>=c&&V.x>=c||(N.x>=c?N=new G(c,N.y+(c-N.x)/(V.x-N.x)*(V.y-N.y))._round():V.x>=c&&(V=new G(c,N.y+(c-N.x)/(V.x-N.x)*(V.y-N.y))._round()),N.y>=g&&V.y>=g||(N.y>=g?N=new G(N.x+(g-N.y)/(V.y-N.y)*(V.x-N.x),g)._round():V.y>=g&&(V=new G(N.x+(g-N.y)/(V.y-N.y)*(V.x-N.x),g)._round()),I&&N.equals(I[I.length-1])||(I=[N],w.push(I)),I.push(V)))))}}return w}Ot("FeatureIndex",Xp,{omit:["rawTileData","sourceLayerCoder"]});class _u extends G{constructor(t,o,c,g){super(t,o),this.angle=c,g!==void 0&&(this.segment=g)}clone(){return new _u(this.x,this.y,this.angle,this.segment)}}function Ed(s,t,o,c,g){if(t.segment===void 0||o===0)return!0;let w=t,T=t.segment+1,A=0;for(;A>-o/2;){if(T--,T<0)return!1;A-=s[T].dist(w),w=s[T]}A+=s[T].dist(s[T+1]),T++;const I=[];let k=0;for(;A<o/2;){const N=s[T],V=s[T+1];if(!V)return!1;let q=s[T-1].angleTo(N)-N.angleTo(V);for(q=Math.abs((q+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:A,angleDelta:q}),k+=q;A-I[0].distance>c;)k-=I.shift().angleDelta;if(k>g)return!1;T++,A+=N.dist(V)}return!0}function Pd(s){let t=0;for(let o=0;o<s.length-1;o++)t+=s[o].dist(s[o+1]);return t}function Cf(s,t,o){return s?.6*t*o:0}function Jp(s,t){return Math.max(s?s.right-s.left:0,t?t.right-t.left:0)}function _g(s,t,o,c,g,w){const T=Cf(o,g,w),A=Jp(o,c)*w;let I=0;const k=Pd(s)/2;for(let N=0;N<s.length-1;N++){const V=s[N],q=s[N+1],Y=V.dist(q);if(I+Y>k){const Q=(k-I)/Y,ne=fn.number(V.x,q.x,Q),ce=fn.number(V.y,q.y,Q),ge=new _u(ne,ce,q.angleTo(V),N);return ge._round(),!T||Ed(s,ge,A,T,t)?ge:void 0}I+=Y}}function em(s,t,o,c,g,w,T,A,I){const k=Cf(c,w,T),N=Jp(c,g),V=N*T,q=s[0].x===0||s[0].x===I||s[0].y===0||s[0].y===I;return t-V<t/4&&(t=V+t/4),Rd(s,q?t/2*A%t:(N/2+2*w)*T*A%t,t,k,o,V,q,!1,I)}function Rd(s,t,o,c,g,w,T,A,I){const k=w/2,N=Pd(s);let V=0,q=t-o,Y=[];for(let Q=0;Q<s.length-1;Q++){const ne=s[Q],ce=s[Q+1],ge=ne.dist(ce),Le=ce.angleTo(ne);for(;q+o<V+ge;){q+=o;const ve=(q-V)/ge,H=fn.number(ne.x,ce.x,ve),le=fn.number(ne.y,ce.y,ve);if(H>=0&&H<I&&le>=0&&le<I&&q-k>=0&&q+k<=N){const Te=new _u(H,le,Le,Q);Te._round(),c&&!Ed(s,Te,w,c,g)||Y.push(Te)}}V+=ge}return A||Y.length||T||(Y=Rd(s,V/2,o,c,g,w,T,!0,I)),Y}Ot("Anchor",_u);const Ef=ca;function tm(s,t,o,c){const g=[],w=s.image,T=w.pixelRatio,A=w.paddedRect.w-2*Ef,I=w.paddedRect.h-2*Ef;let k={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};const N=w.stretchX||[[0,A]],V=w.stretchY||[[0,I]],q=(st,Bt)=>st+Bt[1]-Bt[0],Y=N.reduce(q,0),Q=V.reduce(q,0),ne=A-Y,ce=I-Q;let ge=0,Le=Y,ve=0,H=Q,le=0,Te=ne,Ge=0,mt=ce;if(w.content&&c){const st=w.content,Bt=st[2]-st[0],Yt=st[3]-st[1];(w.textFitWidth||w.textFitHeight)&&(k=Zp(s)),ge=Id(N,0,st[0]),ve=Id(V,0,st[1]),Le=Id(N,st[0],st[2]),H=Id(V,st[1],st[3]),le=st[0]-ge,Ge=st[1]-ve,Te=Bt-Le,mt=Yt-H}const Xe=k.x1,nt=k.y1,bt=k.x2-Xe,gt=k.y2-nt,St=(st,Bt,Yt,qt)=>{const jt=Dd(st.stretch-ge,Le,bt,Xe),dr=Ld(st.fixed-le,Te,st.stretch,Y),an=Dd(Bt.stretch-ve,H,gt,nt),Nn=Ld(Bt.fixed-Ge,mt,Bt.stretch,Q),ni=Dd(Yt.stretch-ge,Le,bt,Xe),Ti=Ld(Yt.fixed-le,Te,Yt.stretch,Y),_a=Dd(qt.stretch-ve,H,gt,nt),Mi=Ld(qt.fixed-Ge,mt,qt.stretch,Q),cn=new G(jt,an),Ai=new G(ni,an),Ci=new G(ni,_a),ii=new G(jt,_a),aa=new G(dr/T,Nn/T),ss=new G(Ti/T,Mi/T),Jn=t*Math.PI/180;if(Jn){const Wn=Math.sin(Jn),si=Math.cos(Jn),Fn=[si,-Wn,Wn,si];cn._matMult(Fn),Ai._matMult(Fn),ii._matMult(Fn),Ci._matMult(Fn)}const Wi=st.stretch+st.fixed,ai=Bt.stretch+Bt.fixed;return{tl:cn,tr:Ai,bl:ii,br:Ci,tex:{x:w.paddedRect.x+Ef+Wi,y:w.paddedRect.y+Ef+ai,w:Yt.stretch+Yt.fixed-Wi,h:qt.stretch+qt.fixed-ai},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:aa,pixelOffsetBR:ss,minFontScaleX:Te/T/bt,minFontScaleY:mt/T/gt,isSDF:o}};if(c&&(w.stretchX||w.stretchY)){const st=rm(N,ne,Y),Bt=rm(V,ce,Q);for(let Yt=0;Yt<st.length-1;Yt++){const qt=st[Yt],jt=st[Yt+1];for(let dr=0;dr<Bt.length-1;dr++)g.push(St(qt,Bt[dr],jt,Bt[dr+1]))}}else g.push(St({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:A+1},{fixed:0,stretch:I+1}));return g}function Id(s,t,o){let c=0;for(const g of s)c+=Math.max(t,Math.min(o,g[1]))-Math.max(t,Math.min(o,g[0]));return c}function rm(s,t,o){const c=[{fixed:-1,stretch:0}];for(const[g,w]of s){const T=c[c.length-1];c.push({fixed:g-T.stretch,stretch:T.stretch}),c.push({fixed:g-T.stretch,stretch:T.stretch+(w-g)})}return c.push({fixed:t+Ef,stretch:o}),c}function Dd(s,t,o,c){return s/t*o+c}function Ld(s,t,o,c){return s-t*o/c}class wh{constructor(t,o,c,g,w,T,A,I,k,N){var V;if(this.boxStartIndex=t.length,k){let q=T.top,Y=T.bottom;const Q=T.collisionPadding;Q&&(q-=Q[1],Y+=Q[3]);let ne=Y-q;ne>0&&(ne=Math.max(10,ne),this.circleDiameter=ne)}else{const q=!((V=T.image)===null||V===void 0)&&V.content&&(T.image.textFitWidth||T.image.textFitHeight)?Zp(T):{x1:T.left,y1:T.top,x2:T.right,y2:T.bottom};q.y1=q.y1*A-I[0],q.y2=q.y2*A+I[2],q.x1=q.x1*A-I[3],q.x2=q.x2*A+I[1];const Y=T.collisionPadding;if(Y&&(q.x1-=Y[0]*A,q.y1-=Y[1]*A,q.x2+=Y[2]*A,q.y2+=Y[3]*A),N){const Q=new G(q.x1,q.y1),ne=new G(q.x2,q.y1),ce=new G(q.x1,q.y2),ge=new G(q.x2,q.y2),Le=N*Math.PI/180;Q._rotate(Le),ne._rotate(Le),ce._rotate(Le),ge._rotate(Le),q.x1=Math.min(Q.x,ne.x,ce.x,ge.x),q.x2=Math.max(Q.x,ne.x,ce.x,ge.x),q.y1=Math.min(Q.y,ne.y,ce.y,ge.y),q.y2=Math.max(Q.y,ne.y,ce.y,ge.y)}t.emplaceBack(o.x,o.y,q.x1,q.y1,q.x2,q.y2,c,g,w)}this.boxEndIndex=t.length}}class nm{constructor(t=[],o=(c,g)=>c<g?-1:c>g?1:0){if(this.data=t,this.length=this.data.length,this.compare=o,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:o,compare:c}=this,g=o[t];for(;t>0;){const w=t-1>>1,T=o[w];if(c(g,T)>=0)break;o[t]=T,t=w}o[t]=g}_down(t){const{data:o,compare:c}=this,g=this.length>>1,w=o[t];for(;t<g;){let T=1+(t<<1);const A=T+1;if(A<this.length&&c(o[A],o[T])<0&&(T=A),c(o[T],w)>=0)break;o[t]=o[T],t=T}o[t]=w}}function m0(s,t=1,o=!1){let c=1/0,g=1/0,w=-1/0,T=-1/0;const A=s[0];for(let Y=0;Y<A.length;Y++){const Q=A[Y];(!Y||Q.x<c)&&(c=Q.x),(!Y||Q.y<g)&&(g=Q.y),(!Y||Q.x>w)&&(w=Q.x),(!Y||Q.y>T)&&(T=Q.y)}const I=Math.min(w-c,T-g);let k=I/2;const N=new nm([],g0);if(I===0)return new G(c,g);for(let Y=c;Y<w;Y+=I)for(let Q=g;Q<T;Q+=I)N.push(new ha(Y+k,Q+k,k,s));let V=function(Y){let Q=0,ne=0,ce=0;const ge=Y[0];for(let Le=0,ve=ge.length,H=ve-1;Le<ve;H=Le++){const le=ge[Le],Te=ge[H],Ge=le.x*Te.y-Te.x*le.y;ne+=(le.x+Te.x)*Ge,ce+=(le.y+Te.y)*Ge,Q+=3*Ge}return new ha(ne/Q,ce/Q,0,Y)}(s),q=N.length;for(;N.length;){const Y=N.pop();(Y.d>V.d||!V.d)&&(V=Y,o&&console.log("found best %d after %d probes",Math.round(1e4*Y.d)/1e4,q)),Y.max-V.d<=t||(k=Y.h/2,N.push(new ha(Y.p.x-k,Y.p.y-k,k,s)),N.push(new ha(Y.p.x+k,Y.p.y-k,k,s)),N.push(new ha(Y.p.x-k,Y.p.y+k,k,s)),N.push(new ha(Y.p.x+k,Y.p.y+k,k,s)),q+=4)}return o&&(console.log(`num probes: ${q}`),console.log(`best distance: ${V.d}`)),V.p}function g0(s,t){return t.max-s.max}function ha(s,t,o,c){this.p=new G(s,t),this.h=o,this.d=function(g,w){let T=!1,A=1/0;for(let I=0;I<w.length;I++){const k=w[I];for(let N=0,V=k.length,q=V-1;N<V;q=N++){const Y=k[N],Q=k[q];Y.y>g.y!=Q.y>g.y&&g.x<(Q.x-Y.x)*(g.y-Y.y)/(Q.y-Y.y)+Y.x&&(T=!T),A=Math.min(A,yp(g,Y,Q))}}return(T?1:-1)*Math.sqrt(A)}(this.p,c),this.max=this.d+this.h*Math.SQRT2}var zi;y.aB=void 0,(zi=y.aB||(y.aB={}))[zi.center=1]="center",zi[zi.left=2]="left",zi[zi.right=3]="right",zi[zi.top=4]="top",zi[zi.bottom=5]="bottom",zi[zi["top-left"]=6]="top-left",zi[zi["top-right"]=7]="top-right",zi[zi["bottom-left"]=8]="bottom-left",zi[zi["bottom-right"]=9]="bottom-right";const yl=7,Ba=Number.POSITIVE_INFINITY;function im(s,t){return t[1]!==Ba?function(o,c,g){let w=0,T=0;switch(c=Math.abs(c),g=Math.abs(g),o){case"top-right":case"top-left":case"top":T=g-yl;break;case"bottom-right":case"bottom-left":case"bottom":T=-g+yl}switch(o){case"top-right":case"bottom-right":case"right":w=-c;break;case"top-left":case"bottom-left":case"left":w=c}return[w,T]}(s,t[0],t[1]):function(o,c){let g=0,w=0;c<0&&(c=0);const T=c/Math.SQRT2;switch(o){case"top-right":case"top-left":w=T-yl;break;case"bottom-right":case"bottom-left":w=-T+yl;break;case"bottom":w=-c+yl;break;case"top":w=c-yl}switch(o){case"top-right":case"bottom-right":g=-T;break;case"top-left":case"bottom-left":g=T;break;case"left":g=c;break;case"right":g=-c}return[g,w]}(s,t[0])}function Pf(s,t,o){var c;const g=s.layout,w=(c=g.get("text-variable-anchor-offset"))===null||c===void 0?void 0:c.evaluate(t,{},o);if(w){const A=w.values,I=[];for(let k=0;k<A.length;k+=2){const N=I[k]=A[k],V=A[k+1].map(q=>q*Hn);N.startsWith("top")?V[1]-=yl:N.startsWith("bottom")&&(V[1]+=yl),I[k+1]=V}return new ui(I)}const T=g.get("text-variable-anchor");if(T){let A;A=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(t,{},o)*Hn,Ba]:g.get("text-offset").evaluate(t,{},o).map(k=>k*Hn);const I=[];for(const k of T)I.push(k,im(k,A));return new ui(I)}return null}function Ks(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function y0(s,t,o,c,g,w,T,A,I,k,N,V){let q=w.textMaxSize.evaluate(t,{});q===void 0&&(q=T);const Y=s.layers[0].layout,Q=Y.get("icon-offset").evaluate(t,{},N),ne=pc(o.horizontal),ce=T/24,ge=s.tilePixelRatio*ce,Le=s.tilePixelRatio*q/24,ve=s.tilePixelRatio*A,H=s.tilePixelRatio*Y.get("symbol-spacing"),le=Y.get("text-padding")*s.tilePixelRatio,Te=function(Yt,qt,jt,dr=1){const an=Yt.get("icon-padding").evaluate(qt,{},jt),Nn=an&&an.values;return[Nn[0]*dr,Nn[1]*dr,Nn[2]*dr,Nn[3]*dr]}(Y,t,N,s.tilePixelRatio),Ge=Y.get("text-max-angle")/180*Math.PI,mt=Y.get("text-rotation-alignment")!=="viewport"&&Y.get("symbol-placement")!=="point",Xe=Y.get("icon-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",nt=Y.get("symbol-placement"),bt=H/2,gt=Y.get("icon-text-fit");let St;c&&gt!=="none"&&(s.allowVerticalPlacement&&o.vertical&&(St=cc(c,o.vertical,gt,Y.get("icon-text-fit-padding"),Q,ce)),ne&&(c=cc(c,ne,gt,Y.get("icon-text-fit-padding"),Q,ce)));const st=N?V.line.getGranularityForZoomLevel(N.z):1,Bt=(Yt,qt)=>{qt.x<0||qt.x>=Rt||qt.y<0||qt.y>=Rt||function(jt,dr,an,Nn,ni,Ti,_a,Mi,cn,Ai,Ci,ii,aa,ss,Jn,Wi,ai,Wn,si,Fn,yn,Ys,xl,r,l){const d=jt.addToLineVertexArray(dr,an);let b,E,L,W,ue=0,Me=0,Ne=0,dt=0,Mt=-1,et=-1;const lt={};let Qt=wi("");if(jt.allowVerticalPlacement&&Nn.vertical){const va=Mi.layout.get("text-rotate").evaluate(yn,{},r)+90;L=new wh(cn,dr,Ai,Ci,ii,Nn.vertical,aa,ss,Jn,va),_a&&(W=new wh(cn,dr,Ai,Ci,ii,_a,ai,Wn,Jn,va))}if(ni){const va=Mi.layout.get("icon-rotate").evaluate(yn,{}),Xs=Mi.layout.get("icon-text-fit")!=="none",Df=tm(ni,va,xl,Xs),bl=_a?tm(_a,va,xl,Xs):void 0;E=new wh(cn,dr,Ai,Ci,ii,ni,ai,Wn,!1,va),ue=4*Df.length;const Lf=jt.iconSizeData;let bu=null;Lf.kind==="source"?(bu=[Yr*Mi.layout.get("icon-size").evaluate(yn,{})],bu[0]>Co&&Dr(`${jt.layerIds[0]}: Value for "icon-size" is >= ${mh}. Reduce your "icon-size".`)):Lf.kind==="composite"&&(bu=[Yr*Ys.compositeIconSizes[0].evaluate(yn,{},r),Yr*Ys.compositeIconSizes[1].evaluate(yn,{},r)],(bu[0]>Co||bu[1]>Co)&&Dr(`${jt.layerIds[0]}: Value for "icon-size" is >= ${mh}. Reduce your "icon-size".`)),jt.addSymbols(jt.icon,Df,bu,Fn,si,yn,y.al.none,dr,d.lineStartIndex,d.lineLength,-1,r),Mt=jt.icon.placedSymbolArray.length-1,bl&&(Me=4*bl.length,jt.addSymbols(jt.icon,bl,bu,Fn,si,yn,y.al.vertical,dr,d.lineStartIndex,d.lineLength,-1,r),et=jt.icon.placedSymbolArray.length-1)}const xr=Object.keys(Nn.horizontal);for(const va of xr){const Xs=Nn.horizontal[va];if(!b){Qt=wi(Xs.text);const bl=Mi.layout.get("text-rotate").evaluate(yn,{},r);b=new wh(cn,dr,Ai,Ci,ii,Xs,aa,ss,Jn,bl)}const Df=Xs.positionedLines.length===1;if(Ne+=vg(jt,dr,Xs,Ti,Mi,Jn,yn,Wi,d,Nn.vertical?y.al.horizontal:y.al.horizontalOnly,Df?xr:[va],lt,Mt,Ys,r),Df)break}Nn.vertical&&(dt+=vg(jt,dr,Nn.vertical,Ti,Mi,Jn,yn,Wi,d,y.al.vertical,["vertical"],lt,et,Ys,r));const oi=b?b.boxStartIndex:jt.collisionBoxArray.length,Ze=b?b.boxEndIndex:jt.collisionBoxArray.length,Be=L?L.boxStartIndex:jt.collisionBoxArray.length,Qe=L?L.boxEndIndex:jt.collisionBoxArray.length,_t=E?E.boxStartIndex:jt.collisionBoxArray.length,Gt=E?E.boxEndIndex:jt.collisionBoxArray.length,$r=W?W.boxStartIndex:jt.collisionBoxArray.length,rr=W?W.boxEndIndex:jt.collisionBoxArray.length;let Jt=-1;const pi=(va,Xs)=>va&&va.circleDiameter?Math.max(va.circleDiameter,Xs):Xs;Jt=pi(b,Jt),Jt=pi(L,Jt),Jt=pi(E,Jt),Jt=pi(W,Jt);const rn=Jt>-1?1:0;rn&&(Jt*=l/Hn),jt.glyphOffsetArray.length>=mu.MAX_GLYPHS&&Dr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),yn.sortKey!==void 0&&jt.addToSortKeyRanges(jt.symbolInstances.length,yn.sortKey);const xu=Pf(Mi,yn,r),[_0,EM]=function(va,Xs){const Df=va.length,bl=Xs==null?void 0:Xs.values;if((bl==null?void 0:bl.length)>0)for(let Lf=0;Lf<bl.length;Lf+=2){const bu=bl[Lf+1];va.emplaceBack(y.aB[bl[Lf]],bu[0],bu[1])}return[Df,va.length]}(jt.textAnchorOffsets,xu);jt.symbolInstances.emplaceBack(dr.x,dr.y,lt.right>=0?lt.right:-1,lt.center>=0?lt.center:-1,lt.left>=0?lt.left:-1,lt.vertical||-1,Mt,et,Qt,oi,Ze,Be,Qe,_t,Gt,$r,rr,Ai,Ne,dt,ue,Me,rn,0,aa,Jt,_0,EM)}(s,qt,Yt,o,c,g,St,s.layers[0],s.collisionBoxArray,t.index,t.sourceLayerIndex,s.index,ge,[le,le,le,le],mt,I,ve,Te,Xe,Q,t,w,k,N,T)};if(nt==="line")for(const Yt of Hi(t.geometry,0,0,Rt,Rt)){const qt=na(Yt,st),jt=em(qt,H,Ge,o.vertical||ne,c,24,Le,s.overscaling,Rt);for(const dr of jt)ne&&xg(s,ne.text,bt,dr)||Bt(qt,dr)}else if(nt==="line-center"){for(const Yt of t.geometry)if(Yt.length>1){const qt=na(Yt,st),jt=_g(qt,Ge,o.vertical||ne,c,24,Le);jt&&Bt(qt,jt)}}else if(t.type==="Polygon")for(const Yt of Lc(t.geometry,0)){const qt=m0(Yt,16);Bt(na(Yt[0],st,!0),new _u(qt.x,qt.y,0))}else if(t.type==="LineString")for(const Yt of t.geometry){const qt=na(Yt,st);Bt(qt,new _u(qt[0].x,qt[0].y,0))}else if(t.type==="Point")for(const Yt of t.geometry)for(const qt of Yt)Bt([qt],new _u(qt.x,qt.y,0))}function vg(s,t,o,c,g,w,T,A,I,k,N,V,q,Y,Q){const ne=function(Le,ve,H,le,Te,Ge,mt,Xe){const nt=le.layout.get("text-rotate").evaluate(Ge,{})*Math.PI/180,bt=[];for(const gt of ve.positionedLines)for(const St of gt.positionedGlyphs){if(!St.rect)continue;const st=St.rect||{};let Bt=Op+1,Yt=!0,qt=1,jt=0;const dr=(Te||Xe)&&St.vertical,an=St.metrics.advance*St.scale/2;if(Xe&&ve.verticalizable&&(jt=gt.lineOffset/2-(St.imageName?-(Hn-St.metrics.width*St.scale)/2:(St.scale-1)*Hn)),St.imageName){const Wn=mt[St.imageName];Yt=Wn.sdf,qt=Wn.pixelRatio,Bt=ca/qt}const Nn=Te?[St.x+an,St.y]:[0,0];let ni=Te?[0,0]:[St.x+an+H[0],St.y+H[1]-jt],Ti=[0,0];dr&&(Ti=ni,ni=[0,0]);const _a=St.metrics.isDoubleResolution?2:1,Mi=(St.metrics.left-Bt)*St.scale-an+ni[0],cn=(-St.metrics.top-Bt)*St.scale+ni[1],Ai=Mi+st.w/_a*St.scale/qt,Ci=cn+st.h/_a*St.scale/qt,ii=new G(Mi,cn),aa=new G(Ai,cn),ss=new G(Mi,Ci),Jn=new G(Ai,Ci);if(dr){const Wn=new G(-an,an-bf),si=-Math.PI/2,Fn=Hn/2-an,yn=new G(5-bf-Fn,-(St.imageName?Fn:0)),Ys=new G(...Ti);ii._rotateAround(si,Wn)._add(yn)._add(Ys),aa._rotateAround(si,Wn)._add(yn)._add(Ys),ss._rotateAround(si,Wn)._add(yn)._add(Ys),Jn._rotateAround(si,Wn)._add(yn)._add(Ys)}if(nt){const Wn=Math.sin(nt),si=Math.cos(nt),Fn=[si,-Wn,Wn,si];ii._matMult(Fn),aa._matMult(Fn),ss._matMult(Fn),Jn._matMult(Fn)}const Wi=new G(0,0),ai=new G(0,0);bt.push({tl:ii,tr:aa,bl:ss,br:Jn,tex:st,writingMode:ve.writingMode,glyphOffset:Nn,sectionIndex:St.sectionIndex,isSDF:Yt,pixelOffsetTL:Wi,pixelOffsetBR:ai,minFontScaleX:0,minFontScaleY:0})}return bt}(0,o,A,g,w,T,c,s.allowVerticalPlacement),ce=s.textSizeData;let ge=null;ce.kind==="source"?(ge=[Yr*g.layout.get("text-size").evaluate(T,{})],ge[0]>Co&&Dr(`${s.layerIds[0]}: Value for "text-size" is >= ${mh}. Reduce your "text-size".`)):ce.kind==="composite"&&(ge=[Yr*Y.compositeTextSizes[0].evaluate(T,{},Q),Yr*Y.compositeTextSizes[1].evaluate(T,{},Q)],(ge[0]>Co||ge[1]>Co)&&Dr(`${s.layerIds[0]}: Value for "text-size" is >= ${mh}. Reduce your "text-size".`)),s.addSymbols(s.text,ne,ge,A,w,T,k,t,I.lineStartIndex,I.lineLength,q,Q);for(const Le of N)V[Le]=s.text.placedSymbolArray.length-1;return 4*ne.length}function pc(s){for(const t in s)return s[t];return null}function xg(s,t,o,c){const g=s.compareText;if(t in g){const w=g[t];for(let T=w.length-1;T>=0;T--)if(c.dist(w[T])<o)return!0}else g[t]=[];return g[t].push(c),!1}const bg=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class am{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,c]=new Uint8Array(t,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=c>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const w=bg[15&c];if(!w)throw new Error("Unrecognized array type.");const[T]=new Uint16Array(t,2,1),[A]=new Uint32Array(t,4,1);return new am(A,T,w,t)}constructor(t,o=64,c=Float64Array,g){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=c,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const w=bg.indexOf(this.ArrayType),T=2*t*this.ArrayType.BYTES_PER_ELEMENT,A=t*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-A%8)%8;if(w<0)throw new Error(`Unexpected typed array class: ${c}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+A+I,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+T+A+I),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+A+I,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+w]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=t)}add(t,o){const c=this._pos>>1;return this.ids[c]=c,this.coords[this._pos++]=t,this.coords[this._pos++]=o,c}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return sm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,o,c,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:T,nodeSize:A}=this,I=[0,w.length-1,0],k=[];for(;I.length;){const N=I.pop()||0,V=I.pop()||0,q=I.pop()||0;if(V-q<=A){for(let ce=q;ce<=V;ce++){const ge=T[2*ce],Le=T[2*ce+1];ge>=t&&ge<=c&&Le>=o&&Le<=g&&k.push(w[ce])}continue}const Y=q+V>>1,Q=T[2*Y],ne=T[2*Y+1];Q>=t&&Q<=c&&ne>=o&&ne<=g&&k.push(w[Y]),(N===0?t<=Q:o<=ne)&&(I.push(q),I.push(Y-1),I.push(1-N)),(N===0?c>=Q:g>=ne)&&(I.push(Y+1),I.push(V),I.push(1-N))}return k}within(t,o,c){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:w,nodeSize:T}=this,A=[0,g.length-1,0],I=[],k=c*c;for(;A.length;){const N=A.pop()||0,V=A.pop()||0,q=A.pop()||0;if(V-q<=T){for(let ce=q;ce<=V;ce++)Sg(w[2*ce],w[2*ce+1],t,o)<=k&&I.push(g[ce]);continue}const Y=q+V>>1,Q=w[2*Y],ne=w[2*Y+1];Sg(Q,ne,t,o)<=k&&I.push(g[Y]),(N===0?t-c<=Q:o-c<=ne)&&(A.push(q),A.push(Y-1),A.push(1-N)),(N===0?t+c>=Q:o+c>=ne)&&(A.push(Y+1),A.push(V),A.push(1-N))}return I}}function sm(s,t,o,c,g,w){if(g-c<=o)return;const T=c+g>>1;wg(s,t,T,c,g,w),sm(s,t,o,c,T-1,1-w),sm(s,t,o,T+1,g,1-w)}function wg(s,t,o,c,g,w){for(;g>c;){if(g-c>600){const k=g-c+1,N=o-c+1,V=Math.log(k),q=.5*Math.exp(2*V/3),Y=.5*Math.sqrt(V*q*(k-q)/k)*(N-k/2<0?-1:1);wg(s,t,o,Math.max(c,Math.floor(o-N*q/k+Y)),Math.min(g,Math.floor(o+(k-N)*q/k+Y)),w)}const T=t[2*o+w];let A=c,I=g;for(Rf(s,t,c,o),t[2*g+w]>T&&Rf(s,t,c,g);A<I;){for(Rf(s,t,A,I),A++,I--;t[2*A+w]<T;)A++;for(;t[2*I+w]>T;)I--}t[2*c+w]===T?Rf(s,t,c,I):(I++,Rf(s,t,I,g)),I<=o&&(c=I+1),o<=I&&(g=I-1)}}function Rf(s,t,o,c){om(s,o,c),om(t,2*o,2*c),om(t,2*o+1,2*c+1)}function om(s,t,o){const c=s[t];s[t]=s[o],s[o]=c}function Sg(s,t,o,c){const g=s-o,w=t-c;return g*g+w*w}var zd;y.cm=void 0,(zd=y.cm||(y.cm={})).create="create",zd.load="load",zd.fullLoad="fullLoad";let _l=null,vl=[];const kd=1e3/60,lm="loadTime",vu="fullLoadTime",If={mark(s){performance.mark(s)},frame(s){const t=s;_l!=null&&vl.push(t-_l),_l=t},clearMetrics(){_l=null,vl=[],performance.clearMeasures(lm),performance.clearMeasures(vu);for(const s in y.cm)performance.clearMarks(y.cm[s])},getPerformanceMetrics(){performance.measure(lm,y.cm.create,y.cm.load),performance.measure(vu,y.cm.create,y.cm.fullLoad);const s=performance.getEntriesByName(lm)[0].duration,t=performance.getEntriesByName(vu)[0].duration,o=vl.length,c=1/(vl.reduce((w,T)=>w+T,0)/o/1e3),g=vl.filter(w=>w>kd).reduce((w,T)=>w+(T-kd)/kd,0);return{loadTime:s,fullLoadTime:t,fps:c,percentDroppedFrames:g/(o+g)*100,totalFrames:o}}};y.$=bh,y.A=ke,y.B=fn,y.C=mr,y.D=$t,y.E=be,y.F=vs,y.G=function(s){if(Un==null){const t=s.navigator?s.navigator.userAgent:null;Un=!!s.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Un},y.H=class{constructor(s,t){this.target=s,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Gp(()=>this.process()),this.subscription=xt(this.target,"message",o=>this.receive(o),!1),this.globalScope=Kn(self)?s:window}registerMessageHandler(s,t){this.messageHandlers[s]=t}sendAsync(s,t){return new Promise((o,c)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10),w=t?xt(t.signal,"abort",()=>{w==null||w.unsubscribe(),delete this.resolveRejects[g];const I={id:g,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(I)},Hp):null;this.resolveRejects[g]={resolve:I=>{w==null||w.unsubscribe(),o(I)},reject:I=>{w==null||w.unsubscribe(),c(I)}};const T=[],A=Object.assign(Object.assign({},s),{id:g,sourceMapId:this.mapId,origin:location.origin,data:Qo(s.data,T)});this.target.postMessage(A,{transfer:T})})}receive(s){const t=s.data,o=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[o];const c=this.abortControllers[o];return delete this.abortControllers[o],void(c&&c.abort())}if(Kn(self)||t.mustQueue)return this.tasks[o]=t,this.taskQueue.push(o),void this.invoker.trigger();this.processTask(o,t)}}process(){if(this.taskQueue.length===0)return;const s=this.taskQueue.shift(),t=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(s,t)}processTask(s,t){return u(this,void 0,void 0,function*(){if(t.type==="<response>"){const g=this.resolveRejects[s];return delete this.resolveRejects[s],g?void(t.error?g.reject(Qa(t.error)):g.resolve(Qa(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const o=Qa(t.data),c=new AbortController;this.abortControllers[s]=c;try{const g=yield this.messageHandlers[t.type](t.sourceMapId,o,c);this.completeTask(s,null,g)}catch(g){this.completeTask(s,g)}})}completeTask(s,t,o){const c=[];delete this.abortControllers[s];const g={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?Qo(t):null,data:Qo(o,c)};this.target.postMessage(g,{transfer:c})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},y.I=ia,y.J=zn,y.K=function(){var s=new ke(16);return ke!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},y.L=function(s,t,o){var c,g,w,T,A,I,k,N,V,q,Y,Q,ne=o[0],ce=o[1],ge=o[2];return t===s?(s[12]=t[0]*ne+t[4]*ce+t[8]*ge+t[12],s[13]=t[1]*ne+t[5]*ce+t[9]*ge+t[13],s[14]=t[2]*ne+t[6]*ce+t[10]*ge+t[14],s[15]=t[3]*ne+t[7]*ce+t[11]*ge+t[15]):(g=t[1],w=t[2],T=t[3],A=t[4],I=t[5],k=t[6],N=t[7],V=t[8],q=t[9],Y=t[10],Q=t[11],s[0]=c=t[0],s[1]=g,s[2]=w,s[3]=T,s[4]=A,s[5]=I,s[6]=k,s[7]=N,s[8]=V,s[9]=q,s[10]=Y,s[11]=Q,s[12]=c*ne+A*ce+V*ge+t[12],s[13]=g*ne+I*ce+q*ge+t[13],s[14]=w*ne+k*ce+Y*ge+t[14],s[15]=T*ne+N*ce+Q*ge+t[15]),s},y.M=function(s,t,o){var c=o[0],g=o[1],w=o[2];return s[0]=t[0]*c,s[1]=t[1]*c,s[2]=t[2]*c,s[3]=t[3]*c,s[4]=t[4]*g,s[5]=t[5]*g,s[6]=t[6]*g,s[7]=t[7]*g,s[8]=t[8]*w,s[9]=t[9]*w,s[10]=t[10]*w,s[11]=t[11]*w,s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},y.N=function(s,t,o){var c=t[0],g=t[1],w=t[2],T=t[3],A=t[4],I=t[5],k=t[6],N=t[7],V=t[8],q=t[9],Y=t[10],Q=t[11],ne=t[12],ce=t[13],ge=t[14],Le=t[15],ve=o[0],H=o[1],le=o[2],Te=o[3];return s[0]=ve*c+H*A+le*V+Te*ne,s[1]=ve*g+H*I+le*q+Te*ce,s[2]=ve*w+H*k+le*Y+Te*ge,s[3]=ve*T+H*N+le*Q+Te*Le,s[4]=(ve=o[4])*c+(H=o[5])*A+(le=o[6])*V+(Te=o[7])*ne,s[5]=ve*g+H*I+le*q+Te*ce,s[6]=ve*w+H*k+le*Y+Te*ge,s[7]=ve*T+H*N+le*Q+Te*Le,s[8]=(ve=o[8])*c+(H=o[9])*A+(le=o[10])*V+(Te=o[11])*ne,s[9]=ve*g+H*I+le*q+Te*ce,s[10]=ve*w+H*k+le*Y+Te*ge,s[11]=ve*T+H*N+le*Q+Te*Le,s[12]=(ve=o[12])*c+(H=o[13])*A+(le=o[14])*V+(Te=o[15])*ne,s[13]=ve*g+H*I+le*q+Te*ce,s[14]=ve*w+H*k+le*Y+Te*ge,s[15]=ve*T+H*N+le*Q+Te*Le,s},y.O=function(s,t){const o={};for(let c=0;c<t.length;c++){const g=t[c];g in s&&(o[g]=s[g])}return o},y.P=G,y.Q=yu,y.R=Da,y.S=Xr,y.T=$s,y.U=Kp,y.V=pe,y.W=xe,y.X=Re,y.Y=Gi,y.Z=Rt,y._=u,y.a=Rn,y.a$=function(s,t,o){var c=Math.sin(o),g=Math.cos(o),w=t[4],T=t[5],A=t[6],I=t[7],k=t[8],N=t[9],V=t[10],q=t[11];return t!==s&&(s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[4]=w*g+k*c,s[5]=T*g+N*c,s[6]=A*g+V*c,s[7]=I*g+q*c,s[8]=k*g-w*c,s[9]=N*g-T*c,s[10]=V*g-A*c,s[11]=q*g-I*c,s},y.a0=25,y.a1=fc,y.a2=s=>{const t=window.document.createElement("video");return t.muted=!0,new Promise(o=>{t.onloadstart=()=>{o(t)};for(const c of s){const g=window.document.createElement("source");tn(c)||(t.crossOrigin="Anonymous"),g.src=c,t.appendChild(g)}})},y.a3=Je,y.a4=function(){return br++},y.a5=P,y.a6=mu,y.a7=Ka,y.a8=Ms,y.a9=Yp,y.aA=function(s,t,o,c,g=!1){if(!o[0]&&!o[1])return[0,0];const w=g?c==="map"?-s.bearingInRadians:0:c==="viewport"?s.bearingInRadians:0;if(w){const T=Math.sin(w),A=Math.cos(w);o=[o[0]*A-o[1]*T,o[0]*T+o[1]*A]}return[g?o[0]:fr(t,o[0],s.zoom),g?o[1]:fr(t,o[1],s.zoom)]},y.aC=wd,y.aD=Ks,y.aE=Vp,y.aF=am,y.aG=Tn,y.aH=gf,y.aI=_e,y.aJ=tr,y.aK=Tt,y.aL=ir,y.aM=Et,y.aN=Ad,y.aO=function(s,t,o){return s[0]=t[0]*o,s[1]=t[1]*o,s[2]=t[2]*o,s},y.aP=function(s,t,o){return s[0]=t[0]+o[0],s[1]=t[1]+o[1],s[2]=t[2]+o[2],s},y.aQ=function(s){var t=new ke(3);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},y.aR=function(s,t,o){return s[0]=t[0]*o[0],s[1]=t[1]*o[1],s[2]=t[2]*o[2],s[3]=t[3]*o[3],s},y.aS=function(s,t,o){return s[0]=t[0]-o[0],s[1]=t[1]-o[1],s[2]=t[2]-o[2],s},y.aT=function(s,t){var o=t[0],c=t[1],g=t[2],w=o*o+c*c+g*g;return w>0&&(w=1/Math.sqrt(w)),s[0]=t[0]*w,s[1]=t[1]*w,s[2]=t[2]*w,s},y.aU=function(s,t,o){var c=t[0],g=t[1],w=t[2],T=o[0],A=o[1],I=o[2];return s[0]=g*I-w*A,s[1]=w*T-c*I,s[2]=c*A-g*T,s},y.aV=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]},y.aW=Mf,y.aX=dc,y.aY=function(s,t,o,c,g){var w,T=1/Math.tan(t/2);return s[0]=T/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=T,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,g!=null&&g!==1/0?(s[10]=(g+c)*(w=1/(c-g)),s[14]=2*g*c*w):(s[10]=-1,s[14]=-2*c),s},y.aZ=function(s){var t=new ke(16);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},y.a_=function(s,t,o){var c=Math.sin(o),g=Math.cos(o),w=t[0],T=t[1],A=t[2],I=t[3],k=t[4],N=t[5],V=t[6],q=t[7];return t!==s&&(s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=w*g+k*c,s[1]=T*g+N*c,s[2]=A*g+V*c,s[3]=I*g+q*c,s[4]=k*g-w*c,s[5]=N*g-T*c,s[6]=V*g-A*c,s[7]=q*g-I*c,s},y.aa=function(s){const t={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,c,g,w)=>{const T=g||w;return t[c]=!T||T.toLowerCase(),""}),t["max-age"]){const o=parseInt(t["max-age"],10);isNaN(o)?delete t["max-age"]:t["max-age"]=o}return t},y.ab=function(s){return s*Math.PI/180},y.ac=function(s){return Math.pow(2,s)},y.ad=Ke,y.ae=er,y.af=85.051129,y.ag=Md,y.ah=function(s){return Math.log(s)/Math.LN2},y.ai=function(s){var t=s[0],o=s[1];return t*t+o*o},y.aj=function(s,t){const o=[];for(const c in s)c in t||o.push(c);return o},y.ak=function(s,t){let o=0,c=0;if(s.kind==="constant")c=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:g,minZoom:w,maxZoom:T}=s,A=g?er(Ui.interpolationFactor(g,t,w,T),0,1):0;s.kind==="camera"?c=fn.number(s.minSize,s.maxSize,A):o=A}return{uSizeT:o,uSize:c}},y.am=function(s,{uSize:t,uSizeT:o},{lowerSize:c,upperSize:g}){return s.kind==="source"?c/Yr:s.kind==="composite"?fn.number(c/Yr,g/Yr,o):t},y.an=function(s,t){var o=t[0],c=t[1],g=t[2],w=t[3],T=t[4],A=t[5],I=t[6],k=t[7],N=t[8],V=t[9],q=t[10],Y=t[11],Q=t[12],ne=t[13],ce=t[14],ge=t[15],Le=o*A-c*T,ve=o*I-g*T,H=o*k-w*T,le=c*I-g*A,Te=c*k-w*A,Ge=g*k-w*I,mt=N*ne-V*Q,Xe=N*ce-q*Q,nt=N*ge-Y*Q,bt=V*ce-q*ne,gt=V*ge-Y*ne,St=q*ge-Y*ce,st=Le*St-ve*gt+H*bt+le*nt-Te*Xe+Ge*mt;return st?(s[0]=(A*St-I*gt+k*bt)*(st=1/st),s[1]=(g*gt-c*St-w*bt)*st,s[2]=(ne*Ge-ce*Te+ge*le)*st,s[3]=(q*Te-V*Ge-Y*le)*st,s[4]=(I*nt-T*St-k*Xe)*st,s[5]=(o*St-g*nt+w*Xe)*st,s[6]=(ce*H-Q*Ge-ge*ve)*st,s[7]=(N*Ge-q*H+Y*ve)*st,s[8]=(T*gt-A*nt+k*mt)*st,s[9]=(c*nt-o*gt-w*mt)*st,s[10]=(Q*Te-ne*H+ge*Le)*st,s[11]=(V*H-N*Te-Y*Le)*st,s[12]=(A*Xe-T*bt-I*mt)*st,s[13]=(o*bt-c*Xe+g*mt)*st,s[14]=(ne*ve-Q*le-ce*Le)*st,s[15]=(N*le-V*ve+q*Le)*st,s):null},y.ao=Ct,y.ap=function(s){return Math.hypot(s[0],s[1])},y.aq=function(s){return s[0]=0,s[1]=0,s},y.ar=function(s,t,o){return s[0]=t[0]*o,s[1]=t[1]*o,s},y.as=gh,y.at=Xt,y.au=function(s,t,o,c){const g=t.y-s.y,w=t.x-s.x,T=c.y-o.y,A=c.x-o.x,I=T*w-A*g;if(I===0)return null;const k=(A*(s.y-o.y)-T*(s.x-o.x))/I;return new G(s.x+k*w,s.y+k*g)},y.av=Hi,y.aw=Yu,y.ax=function(s){let t=1/0,o=1/0,c=-1/0,g=-1/0;for(const w of s)t=Math.min(t,w.x),o=Math.min(o,w.y),c=Math.max(c,w.x),g=Math.max(g,w.y);return[t,o,c,g]},y.ay=Hn,y.az=fr,y.b=Yn,y.b$=function(s,t){var o=s[0],c=s[1],g=s[2],w=s[3],T=s[4],A=s[5],I=s[6],k=s[7],N=s[8],V=s[9],q=s[10],Y=s[11],Q=s[12],ne=s[13],ce=s[14],ge=s[15],Le=t[0],ve=t[1],H=t[2],le=t[3],Te=t[4],Ge=t[5],mt=t[6],Xe=t[7],nt=t[8],bt=t[9],gt=t[10],St=t[11],st=t[12],Bt=t[13],Yt=t[14],qt=t[15];return Math.abs(o-Le)<=Se*Math.max(1,Math.abs(o),Math.abs(Le))&&Math.abs(c-ve)<=Se*Math.max(1,Math.abs(c),Math.abs(ve))&&Math.abs(g-H)<=Se*Math.max(1,Math.abs(g),Math.abs(H))&&Math.abs(w-le)<=Se*Math.max(1,Math.abs(w),Math.abs(le))&&Math.abs(T-Te)<=Se*Math.max(1,Math.abs(T),Math.abs(Te))&&Math.abs(A-Ge)<=Se*Math.max(1,Math.abs(A),Math.abs(Ge))&&Math.abs(I-mt)<=Se*Math.max(1,Math.abs(I),Math.abs(mt))&&Math.abs(k-Xe)<=Se*Math.max(1,Math.abs(k),Math.abs(Xe))&&Math.abs(N-nt)<=Se*Math.max(1,Math.abs(N),Math.abs(nt))&&Math.abs(V-bt)<=Se*Math.max(1,Math.abs(V),Math.abs(bt))&&Math.abs(q-gt)<=Se*Math.max(1,Math.abs(q),Math.abs(gt))&&Math.abs(Y-St)<=Se*Math.max(1,Math.abs(Y),Math.abs(St))&&Math.abs(Q-st)<=Se*Math.max(1,Math.abs(Q),Math.abs(st))&&Math.abs(ne-Bt)<=Se*Math.max(1,Math.abs(ne),Math.abs(Bt))&&Math.abs(ce-Yt)<=Se*Math.max(1,Math.abs(ce),Math.abs(Yt))&&Math.abs(ge-qt)<=Se*Math.max(1,Math.abs(ge),Math.abs(qt))},y.b0=function(){const s=new Float32Array(16);return Ke(s),s},y.b1=function(){const s=new Float64Array(16);return Ke(s),s},y.b2=function(){return new Float64Array(16)},y.b3=function(s,t,o){const c=new Float64Array(4);return function(g,w,T,A){var I=.5*Math.PI/180;w*=I,T*=I,A*=I;var k=Math.sin(w),N=Math.cos(w),V=Math.sin(T),q=Math.cos(T),Y=Math.sin(A),Q=Math.cos(A);g[0]=k*q*Q-N*V*Y,g[1]=N*V*Q+k*q*Y,g[2]=N*q*Y-k*V*Q,g[3]=N*q*Q+k*V*Y}(c,s,t-90,o),c},y.b4=function(s,t,o,c){var g,w,T,A,I,k=t[0],N=t[1],V=t[2],q=t[3],Y=o[0],Q=o[1],ne=o[2],ce=o[3];return(w=k*Y+N*Q+V*ne+q*ce)<0&&(w=-w,Y=-Y,Q=-Q,ne=-ne,ce=-ce),1-w>Se?(g=Math.acos(w),T=Math.sin(g),A=Math.sin((1-c)*g)/T,I=Math.sin(c*g)/T):(A=1-c,I=c),s[0]=A*k+I*Y,s[1]=A*N+I*Q,s[2]=A*V+I*ne,s[3]=A*q+I*ce,s},y.b5=function(s){const t=new Float64Array(9);var o,c,g,w,T,A,I,k,N,V,q,Y,Q,ne,ce,ge,Le,ve;V=(g=(c=s)[0])*(I=g+g),q=(w=c[1])*I,Q=(T=c[2])*I,ne=T*(k=w+w),ge=(A=c[3])*I,Le=A*k,ve=A*(N=T+T),(o=t)[0]=1-(Y=w*k)-(ce=T*N),o[3]=q-ve,o[6]=Q+Le,o[1]=q+ve,o[4]=1-V-ce,o[7]=ne-ge,o[2]=Q-Le,o[5]=ne+ge,o[8]=1-V-Y;const H=Et(-Math.asin(er(t[2],-1,1)));let le,Te;return Math.hypot(t[5],t[8])<.001?(le=0,Te=-Et(Math.atan2(t[3],t[4]))):(le=Et(t[5]===0&&t[8]===0?0:Math.atan2(t[5],t[8])),Te=Et(t[1]===0&&t[0]===0?0:Math.atan2(t[1],t[0]))),{roll:le,pitch:H+90,bearing:Te}},y.b6=function(s,t){return s.roll==t.roll&&s.pitch==t.pitch&&s.bearing==t.bearing},y.b7=cr,y.b8=xo,y.b9=rc,y.bA=function(s){if(s.type==="custom")return new p0(s);switch(s.type){case"background":return new d0(s);case"circle":return new tu(s);case"fill":return new Ep(s);case"fill-extrusion":return new yd(s);case"heatmap":return new _p(s);case"hillshade":return new df(s);case"line":return new Lp(s);case"raster":return new pg(s);case"symbol":return new Tf(s)}},y.bB=ln,y.bC=function(s,t){if(!s)return[{command:"setStyle",args:[t]}];let o=[];try{if(!Ce(s.version,t.version))return[{command:"setStyle",args:[t]}];Ce(s.center,t.center)||o.push({command:"setCenter",args:[t.center]}),Ce(s.centerAltitude,t.centerAltitude)||o.push({command:"setCenterAltitude",args:[t.centerAltitude]}),Ce(s.zoom,t.zoom)||o.push({command:"setZoom",args:[t.zoom]}),Ce(s.bearing,t.bearing)||o.push({command:"setBearing",args:[t.bearing]}),Ce(s.pitch,t.pitch)||o.push({command:"setPitch",args:[t.pitch]}),Ce(s.roll,t.roll)||o.push({command:"setRoll",args:[t.roll]}),Ce(s.sprite,t.sprite)||o.push({command:"setSprite",args:[t.sprite]}),Ce(s.glyphs,t.glyphs)||o.push({command:"setGlyphs",args:[t.glyphs]}),Ce(s.transition,t.transition)||o.push({command:"setTransition",args:[t.transition]}),Ce(s.light,t.light)||o.push({command:"setLight",args:[t.light]}),Ce(s.terrain,t.terrain)||o.push({command:"setTerrain",args:[t.terrain]}),Ce(s.sky,t.sky)||o.push({command:"setSky",args:[t.sky]}),Ce(s.projection,t.projection)||o.push({command:"setProjection",args:[t.projection]});const c={},g=[];(function(T,A,I,k){let N;for(N in A=A||{},T=T||{})Object.prototype.hasOwnProperty.call(T,N)&&(Object.prototype.hasOwnProperty.call(A,N)||Fe(N,I,k));for(N in A)Object.prototype.hasOwnProperty.call(A,N)&&(Object.prototype.hasOwnProperty.call(T,N)?Ce(T[N],A[N])||(T[N].type==="geojson"&&A[N].type==="geojson"&&Pt(T,A,N)?Ue(I,{command:"setGeoJSONSourceData",args:[N,A[N].data]}):ft(N,A,I,k)):qe(N,A,I))})(s.sources,t.sources,g,c);const w=[];s.layers&&s.layers.forEach(T=>{"source"in T&&c[T.source]?o.push({command:"removeLayer",args:[T.id]}):w.push(T)}),o=o.concat(g),function(T,A,I){A=A||[];const k=(T=T||[]).map(Ft),N=A.map(Ft),V=T.reduce(lr,{}),q=A.reduce(lr,{}),Y=k.slice(),Q=Object.create(null);let ne,ce,ge,Le,ve;for(let H=0,le=0;H<k.length;H++)ne=k[H],Object.prototype.hasOwnProperty.call(q,ne)?le++:(Ue(I,{command:"removeLayer",args:[ne]}),Y.splice(Y.indexOf(ne,le),1));for(let H=0,le=0;H<N.length;H++)ne=N[N.length-1-H],Y[Y.length-1-H]!==ne&&(Object.prototype.hasOwnProperty.call(V,ne)?(Ue(I,{command:"removeLayer",args:[ne]}),Y.splice(Y.lastIndexOf(ne,Y.length-le),1)):le++,Le=Y[Y.length-H],Ue(I,{command:"addLayer",args:[q[ne],Le]}),Y.splice(Y.length-H,0,ne),Q[ne]=!0);for(let H=0;H<N.length;H++)if(ne=N[H],ce=V[ne],ge=q[ne],!Q[ne]&&!Ce(ce,ge))if(Ce(ce.source,ge.source)&&Ce(ce["source-layer"],ge["source-layer"])&&Ce(ce.type,ge.type)){for(ve in At(ce.layout,ge.layout,I,ne,null,"setLayoutProperty"),At(ce.paint,ge.paint,I,ne,null,"setPaintProperty"),Ce(ce.filter,ge.filter)||Ue(I,{command:"setFilter",args:[ne,ge.filter]}),Ce(ce.minzoom,ge.minzoom)&&Ce(ce.maxzoom,ge.maxzoom)||Ue(I,{command:"setLayerZoomRange",args:[ne,ge.minzoom,ge.maxzoom]}),ce)Object.prototype.hasOwnProperty.call(ce,ve)&&ve!=="layout"&&ve!=="paint"&&ve!=="filter"&&ve!=="metadata"&&ve!=="minzoom"&&ve!=="maxzoom"&&(ve.indexOf("paint.")===0?At(ce[ve],ge[ve],I,ne,ve.slice(6),"setPaintProperty"):Ce(ce[ve],ge[ve])||Ue(I,{command:"setLayerProperty",args:[ne,ve,ge[ve]]}));for(ve in ge)Object.prototype.hasOwnProperty.call(ge,ve)&&!Object.prototype.hasOwnProperty.call(ce,ve)&&ve!=="layout"&&ve!=="paint"&&ve!=="filter"&&ve!=="metadata"&&ve!=="minzoom"&&ve!=="maxzoom"&&(ve.indexOf("paint.")===0?At(ce[ve],ge[ve],I,ne,ve.slice(6),"setPaintProperty"):Ce(ce[ve],ge[ve])||Ue(I,{command:"setLayerProperty",args:[ne,ve,ge[ve]]}))}else Ue(I,{command:"removeLayer",args:[ne]}),Le=Y[Y.lastIndexOf(ne)+1],Ue(I,{command:"addLayer",args:[ge,Le]})}(w,t.layers,o)}catch(c){console.warn("Unable to compute style diff:",c),o=[{command:"setStyle",args:[t]}]}return o},y.bD=function(s){const t=[],o=s.id;return o===void 0&&t.push({message:`layers.${o}: missing required property "id"`}),s.render===void 0&&t.push({message:`layers.${o}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&t.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),t},y.bE=function s(t,o){if(Array.isArray(t)){if(!Array.isArray(o)||t.length!==o.length)return!1;for(let c=0;c<t.length;c++)if(!s(t[c],o[c]))return!1;return!0}if(typeof t=="object"&&t!==null&&o!==null){if(typeof o!="object"||Object.keys(t).length!==Object.keys(o).length)return!1;for(const c in t)if(!s(t[c],o[c]))return!1;return!0}return t===o},y.bF=en,y.bG=Fr,y.bH=class extends es{constructor(s,t){super(s,t),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},y.bI=Zi,y.bJ=class extends es{constructor(s,t){super(s,t),this.current=qs}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let t=1;t<16;t++)if(s[t]!==this.current[t]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},y.bK=bo,y.bL=class extends es{constructor(s,t){super(s,t),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},y.bM=class extends es{constructor(s,t){super(s,t),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},y.bN=it,y.bO=function(s,t){var o=Math.sin(t),c=Math.cos(t);return s[0]=c,s[1]=o,s[2]=0,s[3]=-o,s[4]=c,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},y.bP=function(s,t,o){var c=t[0],g=t[1],w=t[2];return s[0]=c*o[0]+g*o[3]+w*o[6],s[1]=c*o[1]+g*o[4]+w*o[7],s[2]=c*o[2]+g*o[5]+w*o[8],s},y.bQ=function(s,t,o,c,g,w,T){var A=1/(t-o),I=1/(c-g),k=1/(w-T);return s[0]=-2*A,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*I,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*k,s[11]=0,s[12]=(t+o)*A,s[13]=(g+c)*I,s[14]=(T+w)*k,s[15]=1,s},y.bR=class extends vo{},y.bS=As,y.bT=class extends Wu{},y.bU=ff,y.bV=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},y.bW=sl,y.bX=function(s,t,o){var c=t[0],g=t[1],w=t[2],T=o[3]*c+o[7]*g+o[11]*w+o[15];return s[0]=(o[0]*c+o[4]*g+o[8]*w+o[12])/(T=T||1),s[1]=(o[1]*c+o[5]*g+o[9]*w+o[13])/T,s[2]=(o[2]*c+o[6]*g+o[10]*w+o[14])/T,s},y.bY=class extends Ra{},y.bZ=class extends m{},y.b_=function(s,t){return s[0]===t[0]&&s[1]===t[1]&&s[2]===t[2]&&s[3]===t[3]&&s[4]===t[4]&&s[5]===t[5]&&s[6]===t[6]&&s[7]===t[7]&&s[8]===t[8]&&s[9]===t[9]&&s[10]===t[10]&&s[11]===t[11]&&s[12]===t[12]&&s[13]===t[13]&&s[14]===t[14]&&s[15]===t[15]},y.ba=yf,y.bb=La,y.bc=wt,y.bd=Zt,y.be=ei,y.bf=function(s,t,o,c,g){return wt(c,g,er((s-t)/(o-t),0,1))},y.bg=De,y.bh=function(){return new Float64Array(3)},y.bi=function(s,t,o,c){return s[0]=t[0]+o[0]*c,s[1]=t[1]+o[1]*c,s[2]=t[2]+o[2]*c,s},y.bj=nr,y.bk=function(){return new Float64Array(4)},y.bl=function(s,t,o,c){var g=[],w=[];return g[0]=t[0]-o[0],g[1]=t[1]-o[1],g[2]=t[2]-o[2],w[0]=g[0]*Math.cos(c)-g[1]*Math.sin(c),w[1]=g[0]*Math.sin(c)+g[1]*Math.cos(c),w[2]=g[2],s[0]=w[0]+o[0],s[1]=w[1]+o[1],s[2]=w[2]+o[2],s},y.bm=function(s,t,o,c){var g=[],w=[];return g[0]=t[0]-o[0],g[1]=t[1]-o[1],g[2]=t[2]-o[2],w[0]=g[0],w[1]=g[1]*Math.cos(c)-g[2]*Math.sin(c),w[2]=g[1]*Math.sin(c)+g[2]*Math.cos(c),s[0]=w[0]+o[0],s[1]=w[1]+o[1],s[2]=w[2]+o[2],s},y.bn=function(s,t,o,c){var g=[],w=[];return g[0]=t[0]-o[0],g[1]=t[1]-o[1],g[2]=t[2]-o[2],w[0]=g[2]*Math.sin(c)+g[0]*Math.cos(c),w[1]=g[1],w[2]=g[2]*Math.cos(c)-g[0]*Math.sin(c),s[0]=w[0]+o[0],s[1]=w[1]+o[1],s[2]=w[2]+o[2],s},y.bo=ht,y.bp=function(s,t,o){var c=Math.sin(o),g=Math.cos(o),w=t[0],T=t[1],A=t[2],I=t[3],k=t[8],N=t[9],V=t[10],q=t[11];return t!==s&&(s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=w*g-k*c,s[1]=T*g-N*c,s[2]=A*g-V*c,s[3]=I*g-q*c,s[8]=w*c+k*g,s[9]=T*c+N*g,s[10]=A*c+V*g,s[11]=I*c+q*g,s},y.bq=function(s,t){const o=De(s,360),c=De(t,360),g=c-o,w=c>o?g-360:g+360;return Math.abs(g)<Math.abs(w)?g:w},y.br=function(s){return s[0]=0,s[1]=0,s[2]=0,s},y.bs=function(s,t,o,c){const g=Math.sqrt(s*s+t*t),w=Math.sqrt(o*o+c*c);s/=g,t/=g,o/=w,c/=w;const T=Math.acos(s*o+t*c);return-t*o+s*c>0?T:-T},y.bt=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]+s[3]},y.bu=Wp,y.bv=function(s,t){const o=De(s,2*Math.PI),c=De(t,2*Math.PI);return Math.min(Math.abs(o-c),Math.abs(o-c+2*Math.PI),Math.abs(o-c-2*Math.PI))},y.bw=function(){const s={},t=se.$version;for(const o in se.$root){const c=se.$root[o];if(c.required){let g=null;g=o==="version"?t:c.type==="array"?[]:{},g!=null&&(s[o]=g)}}return s},y.bx=Ns,y.by=Ri,y.bz=function(s){s=s.slice();const t=Object.create(null);for(let o=0;o<s.length;o++)t[s[o].id]=s[o];for(let o=0;o<s.length;o++)"ref"in s[o]&&(s[o]=Ve(s[o],t[s[o].ref]));return s},y.c=Zr,y.c0=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},y.c1=s=>s.type==="symbol",y.c2=s=>s.type==="circle",y.c3=s=>s.type==="heatmap",y.c4=s=>s.type==="line",y.c5=s=>s.type==="fill",y.c6=s=>s.type==="fill-extrusion",y.c7=s=>s.type==="hillshade",y.c8=s=>s.type==="raster",y.c9=s=>s.type==="background",y.cA=sc,y.cB=gl,y.cC=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},y.cD=function(s,t,o,c,g){return u(this,void 0,void 0,function*(){if(xe())try{return yield Re(s,t,o,c,g)}catch{}return function(w,T,A,I,k){const N=w.width,V=w.height;We&&vt||(We=new OffscreenCanvas(N,V),vt=We.getContext("2d",{willReadFrequently:!0})),We.width=N,We.height=V,vt.drawImage(w,0,0,N,V);const q=vt.getImageData(T,A,I,k);return vt.clearRect(0,0,N,V),q.data}(s,t,o,c,g)})},y.cE=gg,y.cF=C,y.cG=B,y.cH=as,y.cI=vf,y.cJ=gs,y.cK=qr,y.ca=s=>s.type==="custom",y.cb=Ht,y.cc=function(s,t,o){const c=Nt(t.x-o.x,t.y-o.y),g=Nt(s.x-o.x,s.y-o.y);var w,T;return Et(Math.atan2(c[0]*g[1]-c[1]*g[0],(w=c)[0]*(T=g)[0]+w[1]*T[1]))},y.cd=zt,y.ce=function(s,t){return ur[t]&&(s instanceof MouseEvent||s instanceof WheelEvent)},y.cf=function(s,t){return Ut[t]&&"touches"in s},y.cg=function(s){return Ut[s]||ur[s]},y.ch=function(s,t,o){var c=t[0],g=t[1];return s[0]=o[0]*c+o[4]*g+o[12],s[1]=o[1]*c+o[5]*g+o[13],s},y.ci=function(s,t){const{x:o,y:c}=bh.fromLngLat(t);return!(s<0||s>25||c<0||c>=1||o<0||o>=1)},y.cj=function(s,t){return s[0]=t[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=t[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=t[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},y.ck=class extends Pa{},y.cl=If,y.cn=function(s){return s.message===_r},y.co=Pi,y.cp=function(s,t){Rn.REGISTERED_PROTOCOLS[s]=t},y.cq=function(s){delete Rn.REGISTERED_PROTOCOLS[s]},y.cr=function(s,t){const o={};for(let g=0;g<s.length;g++){const w=t&&t[s[g].id]||ma(s[g]);t&&(t[s[g].id]=w);let T=o[w];T||(T=o[w]=[]),T.push(s[g])}const c=[];for(const g in o)c.push(o[g]);return c},y.cs=Ot,y.ct=yg,y.cu=Xp,y.cv=Bp,y.cw=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=Rt/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const t=s.bucket.layers[0],o=t.layout,c=t._unevaluatedLayout._values,g={layoutIconSize:c["icon-size"].possiblyEvaluate(new mr(s.bucket.zoom+1),s.canonical),layoutTextSize:c["text-size"].possiblyEvaluate(new mr(s.bucket.zoom+1),s.canonical),textMaxSize:c["text-size"].possiblyEvaluate(new mr(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:k,maxZoom:N}=s.bucket.textSizeData;g.compositeTextSizes=[c["text-size"].possiblyEvaluate(new mr(k),s.canonical),c["text-size"].possiblyEvaluate(new mr(N),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:k,maxZoom:N}=s.bucket.iconSizeData;g.compositeIconSizes=[c["icon-size"].possiblyEvaluate(new mr(k),s.canonical),c["icon-size"].possiblyEvaluate(new mr(N),s.canonical)]}const w=o.get("text-line-height")*Hn,T=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point",A=o.get("text-keep-upright"),I=o.get("text-size");for(const k of s.bucket.features){const N=o.get("text-font").evaluate(k,{},s.canonical).join(","),V=I.evaluate(k,{},s.canonical),q=g.layoutTextSize.evaluate(k,{},s.canonical),Y=g.layoutIconSize.evaluate(k,{},s.canonical),Q={horizontal:{},vertical:void 0},ne=k.text;let ce,ge=[0,0];if(ne){const H=ne.toString(),le=o.get("text-letter-spacing").evaluate(k,{},s.canonical)*Hn,Te=Jo(H)?le:0,Ge=o.get("text-anchor").evaluate(k,{},s.canonical),mt=Pf(t,k,s.canonical);if(!mt){const gt=o.get("text-radial-offset").evaluate(k,{},s.canonical);ge=gt?im(Ge,[gt*Hn,Ba]):o.get("text-offset").evaluate(k,{},s.canonical).map(St=>St*Hn)}let Xe=T?"center":o.get("text-justify").evaluate(k,{},s.canonical);const nt=o.get("symbol-placement")==="point"?o.get("text-max-width").evaluate(k,{},s.canonical)*Hn:1/0,bt=()=>{s.bucket.allowVerticalPlacement&&Fs(H)&&(Q.vertical=uc(ne,s.glyphMap,s.glyphPositions,s.imagePositions,N,nt,w,Ge,"left",Te,ge,y.al.vertical,!0,q,V))};if(!T&&mt){const gt=new Set;if(Xe==="auto")for(let st=0;st<mt.values.length;st+=2)gt.add(Ks(mt.values[st]));else gt.add(Xe);let St=!1;for(const st of gt)if(!Q.horizontal[st])if(St)Q.horizontal[st]=Q.horizontal[0];else{const Bt=uc(ne,s.glyphMap,s.glyphPositions,s.imagePositions,N,nt,w,"center",st,Te,ge,y.al.horizontal,!1,q,V);Bt&&(Q.horizontal[st]=Bt,St=Bt.positionedLines.length===1)}bt()}else{Xe==="auto"&&(Xe=Ks(Ge));const gt=uc(ne,s.glyphMap,s.glyphPositions,s.imagePositions,N,nt,w,Ge,Xe,Te,ge,y.al.horizontal,!1,q,V);gt&&(Q.horizontal[Xe]=gt),bt(),Fs(H)&&T&&A&&(Q.vertical=uc(ne,s.glyphMap,s.glyphPositions,s.imagePositions,N,nt,w,Ge,Xe,Te,ge,y.al.vertical,!1,q,V))}}let Le=!1;if(k.icon&&k.icon.name){const H=s.imageMap[k.icon.name];H&&(ce=c0(s.imagePositions[k.icon.name],o.get("icon-offset").evaluate(k,{},s.canonical),o.get("icon-anchor").evaluate(k,{},s.canonical)),Le=!!H.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=Le:s.bucket.sdfIcons!==Le&&Dr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(H.pixelRatio!==s.bucket.pixelRatio||o.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const ve=pc(Q.horizontal)||Q.vertical;s.bucket.iconsInText=!!ve&&ve.iconsInText,(ve||ce)&&y0(s.bucket,k,Q,ce,s.imageMap,g,q,Y,ge,Le,s.canonical,s.subdivisionGranularity)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},y.cx=jr,y.cy=Gs,y.cz=hl,y.d=tn,y.e=Qr,y.f=s=>u(void 0,void 0,void 0,function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(t)}catch(o){throw new Error(`Could not load image because of ${o.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),y.g=Vn,y.h=s=>new Promise((t,o)=>{const c=new Image;c.onload=()=>{t(c),URL.revokeObjectURL(c.src),c.onload=null,window.requestAnimationFrame(()=>{c.src=we})},c.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(s)],{type:"image/png"});c.src=s.byteLength?URL.createObjectURL(g):we}),y.i=Kn,y.j=(s,t)=>nn(Qr(s,{type:"json"}),t),y.k=he,y.l=ae,y.m=nn,y.n=(s,t)=>nn(Qr(s,{type:"arrayBuffer"}),t),y.o=function(s){return new gl(s).readFields(zp,[])},y.p=ka,y.q=nu,y.r=$i,y.s=xt,y.t=Xa,y.u=Tr,y.v=se,y.w=Dr,y.x=bs,y.y=Xn,y.z=function([s,t,o]){return t+=90,t*=Math.PI/180,o*=Math.PI/180,{x:s*Math.cos(t)*Math.sin(o),y:s*Math.sin(t)*Math.sin(o),z:s*Math.cos(o)}}}),_("worker",["./shared"],function(y){class u{constructor(ie){this.keyCache={},ie&&this.replace(ie)}replace(ie){this._layerConfigs={},this._layers={},this.update(ie,[])}update(ie,ae){for(const be of ie){this._layerConfigs[be.id]=be;const se=this._layers[be.id]=y.bA(be);se._featureFilter=y.a7(se.filter),this.keyCache[be.id]&&delete this.keyCache[be.id]}for(const be of ae)delete this.keyCache[be],delete this._layerConfigs[be],delete this._layers[be];this.familiesBySource={};const he=y.cr(Object.values(this._layerConfigs),this.keyCache);for(const be of he){const se=be.map(Fe=>this._layers[Fe.id]),Oe=se[0];if(Oe.visibility==="none")continue;const Ve=Oe.source||"";let Ce=this.familiesBySource[Ve];Ce||(Ce=this.familiesBySource[Ve]={});const Ue=Oe.sourceLayer||"_geojsonTileLayer";let qe=Ce[Ue];qe||(qe=Ce[Ue]=[]),qe.push(se)}}}class C{constructor(ie){const ae={},he=[];for(const Ve in ie){const Ce=ie[Ve],Ue=ae[Ve]={};for(const qe in Ce){const Fe=Ce[+qe];if(!Fe||Fe.bitmap.width===0||Fe.bitmap.height===0)continue;const ft={x:0,y:0,w:Fe.bitmap.width+2,h:Fe.bitmap.height+2};he.push(ft),Ue[qe]={rect:ft,metrics:Fe.metrics}}}const{w:be,h:se}=y.p(he),Oe=new y.q({width:be||1,height:se||1});for(const Ve in ie){const Ce=ie[Ve];for(const Ue in Ce){const qe=Ce[+Ue];if(!qe||qe.bitmap.width===0||qe.bitmap.height===0)continue;const Fe=ae[Ve][Ue].rect;y.q.copy(qe.bitmap,Oe,{x:0,y:0},{x:Fe.x+1,y:Fe.y+1},qe.bitmap)}}this.image=Oe,this.positions=ae}}y.cs("GlyphAtlas",C);class R{constructor(ie){this.tileID=new y.Y(ie.tileID.overscaledZ,ie.tileID.wrap,ie.tileID.canonical.z,ie.tileID.canonical.x,ie.tileID.canonical.y),this.uid=ie.uid,this.zoom=ie.zoom,this.pixelRatio=ie.pixelRatio,this.tileSize=ie.tileSize,this.source=ie.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ie.showCollisionBoxes,this.collectResourceTiming=!!ie.collectResourceTiming,this.returnDependencies=!!ie.returnDependencies,this.promoteId=ie.promoteId,this.inFlightDependencies=[]}parse(ie,ae,he,be,se){return y._(this,void 0,void 0,function*(){this.status="parsing",this.data=ie,this.collisionBoxArray=new y.a5;const Oe=new y.ct(Object.keys(ie.layers).sort()),Ve=new y.cu(this.tileID,this.promoteId);Ve.bucketLayerIDs=[];const Ce={},Ue={featureIndex:Ve,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:he,subdivisionGranularity:se},qe=ae.familiesBySource[this.source];for(const tt in qe){const yt=ie.layers[tt];if(!yt)continue;yt.version===1&&y.w(`Vector tile source "${this.source}" layer "${tt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const kt=Oe.encode(tt),Hr=[];for(let $n=0;$n<yt.length;$n++){const sn=yt.feature($n),ar=Ve.getId(sn,tt);Hr.push({feature:sn,id:ar,index:$n,sourceLayerIndex:kt})}for(const $n of qe[tt]){const sn=$n[0];sn.source!==this.source&&y.w(`layer.source = ${sn.source} does not equal this.source = ${this.source}`),sn.minzoom&&this.zoom<Math.floor(sn.minzoom)||sn.maxzoom&&this.zoom>=sn.maxzoom||sn.visibility!=="none"&&(O($n,this.zoom,he),(Ce[sn.id]=sn.createBucket({index:Ve.bucketLayerIDs.length,layers:$n,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:kt,sourceID:this.source})).populate(Hr,Ue,this.tileID.canonical),Ve.bucketLayerIDs.push($n.map(ar=>ar.id)))}}const Fe=y.bF(Ue.glyphDependencies,tt=>Object.keys(tt).map(Number));this.inFlightDependencies.forEach(tt=>tt==null?void 0:tt.abort()),this.inFlightDependencies=[];let ft=Promise.resolve({});if(Object.keys(Fe).length){const tt=new AbortController;this.inFlightDependencies.push(tt),ft=be.sendAsync({type:"GG",data:{stacks:Fe,source:this.source,tileID:this.tileID,type:"glyphs"}},tt)}const Pt=Object.keys(Ue.iconDependencies);let At=Promise.resolve({});if(Pt.length){const tt=new AbortController;this.inFlightDependencies.push(tt),At=be.sendAsync({type:"GI",data:{icons:Pt,source:this.source,tileID:this.tileID,type:"icons"}},tt)}const Ft=Object.keys(Ue.patternDependencies);let lr=Promise.resolve({});if(Ft.length){const tt=new AbortController;this.inFlightDependencies.push(tt),lr=be.sendAsync({type:"GI",data:{icons:Ft,source:this.source,tileID:this.tileID,type:"patterns"}},tt)}const[Je,Wt,vr]=yield Promise.all([ft,At,lr]),Ur=new C(Je),Cr=new y.cv(Wt,vr);for(const tt in Ce){const yt=Ce[tt];yt instanceof y.a6?(O(yt.layers,this.zoom,he),y.cw({bucket:yt,glyphMap:Je,glyphPositions:Ur.positions,imageMap:Wt,imagePositions:Cr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Ue.subdivisionGranularity})):yt.hasPattern&&(yt instanceof y.cx||yt instanceof y.cy||yt instanceof y.cz)&&(O(yt.layers,this.zoom,he),yt.addFeatures(Ue,this.tileID.canonical,Cr.patternPositions))}return this.status="done",{buckets:Object.values(Ce).filter(tt=>!tt.isEmpty()),featureIndex:Ve,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ur.image,imageAtlas:Cr,glyphMap:this.returnDependencies?Je:null,iconMap:this.returnDependencies?Wt:null,glyphPositions:this.returnDependencies?Ur.positions:null}})}}function O(je,ie,ae){const he=new y.C(ie);for(const be of je)be.recalculate(he,ae)}class B{constructor(ie,ae,he){this.actor=ie,this.layerIndex=ae,this.availableImages=he,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ie,ae){return y._(this,void 0,void 0,function*(){const he=yield y.n(ie.request,ae);try{return{vectorTile:new y.cA.VectorTile(new y.cB(he.data)),rawData:he.data,cacheControl:he.cacheControl,expires:he.expires}}catch(be){const se=new Uint8Array(he.data);let Oe=`Unable to parse the tile at ${ie.request.url}, `;throw Oe+=se[0]===31&&se[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${be.message}`,new Error(Oe)}})}loadTile(ie){return y._(this,void 0,void 0,function*(){const ae=ie.uid,he=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new y.cC(ie.request),be=new R(ie);this.loading[ae]=be;const se=new AbortController;be.abort=se;try{const Oe=yield this.loadVectorTile(ie,se);if(delete this.loading[ae],!Oe)return null;const Ve=Oe.rawData,Ce={};Oe.expires&&(Ce.expires=Oe.expires),Oe.cacheControl&&(Ce.cacheControl=Oe.cacheControl);const Ue={};if(he){const Fe=he.finish();Fe&&(Ue.resourceTiming=JSON.parse(JSON.stringify(Fe)))}be.vectorTile=Oe.vectorTile;const qe=be.parse(Oe.vectorTile,this.layerIndex,this.availableImages,this.actor,ie.subdivisionGranularity);this.loaded[ae]=be,this.fetching[ae]={rawTileData:Ve,cacheControl:Ce,resourceTiming:Ue};try{const Fe=yield qe;return y.e({rawTileData:Ve.slice(0)},Fe,Ce,Ue)}finally{delete this.fetching[ae]}}catch(Oe){throw delete this.loading[ae],be.status="done",this.loaded[ae]=be,Oe}})}reloadTile(ie){return y._(this,void 0,void 0,function*(){const ae=ie.uid;if(!this.loaded||!this.loaded[ae])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const he=this.loaded[ae];if(he.showCollisionBoxes=ie.showCollisionBoxes,he.status==="parsing"){const be=yield he.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,ie.subdivisionGranularity);let se;if(this.fetching[ae]){const{rawTileData:Oe,cacheControl:Ve,resourceTiming:Ce}=this.fetching[ae];delete this.fetching[ae],se=y.e({rawTileData:Oe.slice(0)},be,Ve,Ce)}else se=be;return se}if(he.status==="done"&&he.vectorTile)return he.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,ie.subdivisionGranularity)})}abortTile(ie){return y._(this,void 0,void 0,function*(){const ae=this.loading,he=ie.uid;ae&&ae[he]&&ae[he].abort&&(ae[he].abort.abort(),delete ae[he])})}removeTile(ie){return y._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ie.uid]&&delete this.loaded[ie.uid]})}}class z{constructor(){this.loaded={}}loadTile(ie){return y._(this,void 0,void 0,function*(){const{uid:ae,encoding:he,rawImageData:be,redFactor:se,greenFactor:Oe,blueFactor:Ve,baseShift:Ce}=ie,Ue=be.width+2,qe=be.height+2,Fe=y.b(be)?new y.R({width:Ue,height:qe},yield y.cD(be,-1,-1,Ue,qe)):be,ft=new y.cE(ae,Fe,he,se,Oe,Ve,Ce);return this.loaded=this.loaded||{},this.loaded[ae]=ft,ft})}removeTile(ie){const ae=this.loaded,he=ie.uid;ae&&ae[he]&&delete ae[he]}}var F,G,te=function(){if(G)return F;function je(ae,he){if(ae.length!==0){ie(ae[0],he);for(var be=1;be<ae.length;be++)ie(ae[be],!he)}}function ie(ae,he){for(var be=0,se=0,Oe=0,Ve=ae.length,Ce=Ve-1;Oe<Ve;Ce=Oe++){var Ue=(ae[Oe][0]-ae[Ce][0])*(ae[Ce][1]+ae[Oe][1]),qe=be+Ue;se+=Math.abs(be)>=Math.abs(Ue)?be-qe+Ue:Ue-qe+be,be=qe}be+se>=0!=!!he&&ae.reverse()}return G=1,F=function ae(he,be){var se,Oe=he&&he.type;if(Oe==="FeatureCollection")for(se=0;se<he.features.length;se++)ae(he.features[se],be);else if(Oe==="GeometryCollection")for(se=0;se<he.geometries.length;se++)ae(he.geometries[se],be);else if(Oe==="Feature")ae(he.geometry,be);else if(Oe==="Polygon")je(he.coordinates,be);else if(Oe==="MultiPolygon")for(se=0;se<he.coordinates.length;se++)je(he.coordinates[se],be);return he}}(),K=y.cF(te);const X=y.cA.VectorTileFeature.prototype.toGeoJSON;class ye{constructor(ie){this._feature=ie,this.extent=y.Z,this.type=ie.type,this.properties=ie.tags,"id"in ie&&!isNaN(ie.id)&&(this.id=parseInt(ie.id,10))}loadGeometry(){if(this._feature.type===1){const ie=[];for(const ae of this._feature.geometry)ie.push([new y.P(ae[0],ae[1])]);return ie}{const ie=[];for(const ae of this._feature.geometry){const he=[];for(const be of ae)he.push(new y.P(be[0],be[1]));ie.push(he)}return ie}}toGeoJSON(ie,ae,he){return X.call(this,ie,ae,he)}}class pe{constructor(ie){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=y.Z,this.length=ie.length,this._features=ie}feature(ie){return new ye(this._features[ie])}}var xe,Se,ke,it={exports:{}},Ke=function(){if(ke)return it.exports;ke=1;var je=y.cI(),ie=function(){if(Se)return xe;Se=1;var qe=y.cG(),Fe=y.cH().VectorTileFeature;function ft(At,Ft){this.options=Ft||{},this.features=At,this.length=At.length}function Pt(At,Ft){this.id=typeof At.id=="number"?At.id:void 0,this.type=At.type,this.rawGeometry=At.type===1?[At.geometry]:At.geometry,this.properties=At.tags,this.extent=Ft||4096}return xe=ft,ft.prototype.feature=function(At){return new Pt(this.features[At],this.options.extent)},Pt.prototype.loadGeometry=function(){var At=this.rawGeometry;this.geometry=[];for(var Ft=0;Ft<At.length;Ft++){for(var lr=At[Ft],Je=[],Wt=0;Wt<lr.length;Wt++)Je.push(new qe(lr[Wt][0],lr[Wt][1]));this.geometry.push(Je)}return this.geometry},Pt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var At=this.geometry,Ft=1/0,lr=-1/0,Je=1/0,Wt=-1/0,vr=0;vr<At.length;vr++)for(var Ur=At[vr],Cr=0;Cr<Ur.length;Cr++){var tt=Ur[Cr];Ft=Math.min(Ft,tt.x),lr=Math.max(lr,tt.x),Je=Math.min(Je,tt.y),Wt=Math.max(Wt,tt.y)}return[Ft,Je,lr,Wt]},Pt.prototype.toGeoJSON=Fe.prototype.toGeoJSON,xe}();function ae(qe){var Fe=new je;return function(ft,Pt){for(var At in ft.layers)Pt.writeMessage(3,he,ft.layers[At])}(qe,Fe),Fe.finish()}function he(qe,Fe){var ft;Fe.writeVarintField(15,qe.version||1),Fe.writeStringField(1,qe.name||""),Fe.writeVarintField(5,qe.extent||4096);var Pt={keys:[],values:[],keycache:{},valuecache:{}};for(ft=0;ft<qe.length;ft++)Pt.feature=qe.feature(ft),Fe.writeMessage(2,be,Pt);var At=Pt.keys;for(ft=0;ft<At.length;ft++)Fe.writeStringField(3,At[ft]);var Ft=Pt.values;for(ft=0;ft<Ft.length;ft++)Fe.writeMessage(4,Ue,Ft[ft])}function be(qe,Fe){var ft=qe.feature;ft.id!==void 0&&Fe.writeVarintField(1,ft.id),Fe.writeMessage(2,se,qe),Fe.writeVarintField(3,ft.type),Fe.writeMessage(4,Ce,ft)}function se(qe,Fe){var ft=qe.feature,Pt=qe.keys,At=qe.values,Ft=qe.keycache,lr=qe.valuecache;for(var Je in ft.properties){var Wt=ft.properties[Je],vr=Ft[Je];if(Wt!==null){vr===void 0&&(Pt.push(Je),Ft[Je]=vr=Pt.length-1),Fe.writeVarint(vr);var Ur=typeof Wt;Ur!=="string"&&Ur!=="boolean"&&Ur!=="number"&&(Wt=JSON.stringify(Wt));var Cr=Ur+":"+Wt,tt=lr[Cr];tt===void 0&&(At.push(Wt),lr[Cr]=tt=At.length-1),Fe.writeVarint(tt)}}}function Oe(qe,Fe){return(Fe<<3)+(7&qe)}function Ve(qe){return qe<<1^qe>>31}function Ce(qe,Fe){for(var ft=qe.loadGeometry(),Pt=qe.type,At=0,Ft=0,lr=ft.length,Je=0;Je<lr;Je++){var Wt=ft[Je],vr=1;Pt===1&&(vr=Wt.length),Fe.writeVarint(Oe(1,vr));for(var Ur=Pt===3?Wt.length-1:Wt.length,Cr=0;Cr<Ur;Cr++){Cr===1&&Pt!==1&&Fe.writeVarint(Oe(2,Ur-1));var tt=Wt[Cr].x-At,yt=Wt[Cr].y-Ft;Fe.writeVarint(Ve(tt)),Fe.writeVarint(Ve(yt)),At+=tt,Ft+=yt}Pt===3&&Fe.writeVarint(Oe(7,1))}}function Ue(qe,Fe){var ft=typeof qe;ft==="string"?Fe.writeStringField(1,qe):ft==="boolean"?Fe.writeBooleanField(7,qe):ft==="number"&&(qe%1!=0?Fe.writeDoubleField(3,qe):qe<0?Fe.writeSVarintField(6,qe):Fe.writeVarintField(5,qe))}return it.exports=ae,it.exports.fromVectorTileJs=ae,it.exports.fromGeojsonVt=function(qe,Fe){Fe=Fe||{};var ft={};for(var Pt in qe)ft[Pt]=new ie(qe[Pt].features,Fe),ft[Pt].name=Pt,ft[Pt].version=Fe.version,ft[Pt].extent=Fe.extent;return ae({layers:ft})},it.exports.GeoJSONWrapper=ie,it.exports}(),Ye=y.cF(Ke);const ht={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:je=>je},Lt=Math.fround||(sr=new Float32Array(1),je=>(sr[0]=+je,sr[0]));var sr;const nr=3,Xt=5,or=6;class Ct{constructor(ie){this.options=Object.assign(Object.create(ht),ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ie){const{log:ae,minZoom:he,maxZoom:be}=this.options;ae&&console.time("total time");const se=`prepare ${ie.length} points`;ae&&console.time(se),this.points=ie;const Oe=[];for(let Ce=0;Ce<ie.length;Ce++){const Ue=ie[Ce];if(!Ue.geometry)continue;const[qe,Fe]=Ue.geometry.coordinates,ft=Lt(fr(qe)),Pt=Lt(De(Fe));Oe.push(ft,Pt,1/0,Ce,-1,1),this.options.reduce&&Oe.push(0)}let Ve=this.trees[be+1]=this._createTree(Oe);ae&&console.timeEnd(se);for(let Ce=be;Ce>=he;Ce--){const Ue=+Date.now();Ve=this.trees[Ce]=this._createTree(this._cluster(Ve,Ce)),ae&&console.log("z%d: %d clusters in %dms",Ce,Ve.numItems,+Date.now()-Ue)}return ae&&console.timeEnd("total time"),this}getClusters(ie,ae){let he=((ie[0]+180)%360+360)%360-180;const be=Math.max(-90,Math.min(90,ie[1]));let se=ie[2]===180?180:((ie[2]+180)%360+360)%360-180;const Oe=Math.max(-90,Math.min(90,ie[3]));if(ie[2]-ie[0]>=360)he=-180,se=180;else if(he>se){const Fe=this.getClusters([he,be,180,Oe],ae),ft=this.getClusters([-180,be,se,Oe],ae);return Fe.concat(ft)}const Ve=this.trees[this._limitZoom(ae)],Ce=Ve.range(fr(he),De(Oe),fr(se),De(be)),Ue=Ve.data,qe=[];for(const Fe of Ce){const ft=this.stride*Fe;qe.push(Ue[ft+Xt]>1?Nt(Ue,ft,this.clusterProps):this.points[Ue[ft+nr]])}return qe}getChildren(ie){const ae=this._getOriginId(ie),he=this._getOriginZoom(ie),be="No cluster with the specified id.",se=this.trees[he];if(!se)throw new Error(be);const Oe=se.data;if(ae*this.stride>=Oe.length)throw new Error(be);const Ve=this.options.radius/(this.options.extent*Math.pow(2,he-1)),Ce=se.within(Oe[ae*this.stride],Oe[ae*this.stride+1],Ve),Ue=[];for(const qe of Ce){const Fe=qe*this.stride;Oe[Fe+4]===ie&&Ue.push(Oe[Fe+Xt]>1?Nt(Oe,Fe,this.clusterProps):this.points[Oe[Fe+nr]])}if(Ue.length===0)throw new Error(be);return Ue}getLeaves(ie,ae,he){const be=[];return this._appendLeaves(be,ie,ae=ae||10,he=he||0,0),be}getTile(ie,ae,he){const be=this.trees[this._limitZoom(ie)],se=Math.pow(2,ie),{extent:Oe,radius:Ve}=this.options,Ce=Ve/Oe,Ue=(he-Ce)/se,qe=(he+1+Ce)/se,Fe={features:[]};return this._addTileFeatures(be.range((ae-Ce)/se,Ue,(ae+1+Ce)/se,qe),be.data,ae,he,se,Fe),ae===0&&this._addTileFeatures(be.range(1-Ce/se,Ue,1,qe),be.data,se,he,se,Fe),ae===se-1&&this._addTileFeatures(be.range(0,Ue,Ce/se,qe),be.data,-1,he,se,Fe),Fe.features.length?Fe:null}getClusterExpansionZoom(ie){let ae=this._getOriginZoom(ie)-1;for(;ae<=this.options.maxZoom;){const he=this.getChildren(ie);if(ae++,he.length!==1)break;ie=he[0].properties.cluster_id}return ae}_appendLeaves(ie,ae,he,be,se){const Oe=this.getChildren(ae);for(const Ve of Oe){const Ce=Ve.properties;if(Ce&&Ce.cluster?se+Ce.point_count<=be?se+=Ce.point_count:se=this._appendLeaves(ie,Ce.cluster_id,he,be,se):se<be?se++:ie.push(Ve),ie.length===he)break}return se}_createTree(ie){const ae=new y.aF(ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let he=0;he<ie.length;he+=this.stride)ae.add(ie[he],ie[he+1]);return ae.finish(),ae.data=ie,ae}_addTileFeatures(ie,ae,he,be,se,Oe){for(const Ve of ie){const Ce=Ve*this.stride,Ue=ae[Ce+Xt]>1;let qe,Fe,ft;if(Ue)qe=Rt(ae,Ce,this.clusterProps),Fe=ae[Ce],ft=ae[Ce+1];else{const Ft=this.points[ae[Ce+nr]];qe=Ft.properties;const[lr,Je]=Ft.geometry.coordinates;Fe=fr(lr),ft=De(Je)}const Pt={type:1,geometry:[[Math.round(this.options.extent*(Fe*se-he)),Math.round(this.options.extent*(ft*se-be))]],tags:qe};let At;At=Ue||this.options.generateId?ae[Ce+nr]:this.points[ae[Ce+nr]].id,At!==void 0&&(Pt.id=At),Oe.features.push(Pt)}}_limitZoom(ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+ie),this.options.maxZoom+1))}_cluster(ie,ae){const{radius:he,extent:be,reduce:se,minPoints:Oe}=this.options,Ve=he/(be*Math.pow(2,ae)),Ce=ie.data,Ue=[],qe=this.stride;for(let Fe=0;Fe<Ce.length;Fe+=qe){if(Ce[Fe+2]<=ae)continue;Ce[Fe+2]=ae;const ft=Ce[Fe],Pt=Ce[Fe+1],At=ie.within(Ce[Fe],Ce[Fe+1],Ve),Ft=Ce[Fe+Xt];let lr=Ft;for(const Je of At){const Wt=Je*qe;Ce[Wt+2]>ae&&(lr+=Ce[Wt+Xt])}if(lr>Ft&&lr>=Oe){let Je,Wt=ft*Ft,vr=Pt*Ft,Ur=-1;const Cr=((Fe/qe|0)<<5)+(ae+1)+this.points.length;for(const tt of At){const yt=tt*qe;if(Ce[yt+2]<=ae)continue;Ce[yt+2]=ae;const kt=Ce[yt+Xt];Wt+=Ce[yt]*kt,vr+=Ce[yt+1]*kt,Ce[yt+4]=Cr,se&&(Je||(Je=this._map(Ce,Fe,!0),Ur=this.clusterProps.length,this.clusterProps.push(Je)),se(Je,this._map(Ce,yt)))}Ce[Fe+4]=Cr,Ue.push(Wt/lr,vr/lr,1/0,Cr,-1,lr),se&&Ue.push(Ur)}else{for(let Je=0;Je<qe;Je++)Ue.push(Ce[Fe+Je]);if(lr>1)for(const Je of At){const Wt=Je*qe;if(!(Ce[Wt+2]<=ae)){Ce[Wt+2]=ae;for(let vr=0;vr<qe;vr++)Ue.push(Ce[Wt+vr])}}}}return Ue}_getOriginId(ie){return ie-this.points.length>>5}_getOriginZoom(ie){return(ie-this.points.length)%32}_map(ie,ae,he){if(ie[ae+Xt]>1){const Oe=this.clusterProps[ie[ae+or]];return he?Object.assign({},Oe):Oe}const be=this.points[ie[ae+nr]].properties,se=this.options.map(be);return he&&se===be?Object.assign({},se):se}}function Nt(je,ie,ae){return{type:"Feature",id:je[ie+nr],properties:Rt(je,ie,ae),geometry:{type:"Point",coordinates:[(he=je[ie],360*(he-.5)),wt(je[ie+1])]}};var he}function Rt(je,ie,ae){const he=je[ie+Xt],be=he>=1e4?`${Math.round(he/1e3)}k`:he>=1e3?Math.round(he/100)/10+"k":he,se=je[ie+or],Oe=se===-1?{}:Object.assign({},ae[se]);return Object.assign(Oe,{cluster:!0,cluster_id:je[ie+nr],point_count:he,point_count_abbreviated:be})}function fr(je){return je/360+.5}function De(je){const ie=Math.sin(je*Math.PI/180),ae=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return ae<0?0:ae>1?1:ae}function wt(je){const ie=(180-360*je)*Math.PI/180;return 360*Math.atan(Math.exp(ie))/Math.PI-90}function Zt(je,ie,ae,he){let be=he;const se=ie+(ae-ie>>1);let Oe,Ve=ae-ie;const Ce=je[ie],Ue=je[ie+1],qe=je[ae],Fe=je[ae+1];for(let ft=ie+3;ft<ae;ft+=3){const Pt=Ht(je[ft],je[ft+1],Ce,Ue,qe,Fe);if(Pt>be)Oe=ft,be=Pt;else if(Pt===be){const At=Math.abs(ft-se);At<Ve&&(Oe=ft,Ve=At)}}be>he&&(Oe-ie>3&&Zt(je,ie,Oe,he),je[Oe+2]=be,ae-Oe>3&&Zt(je,Oe,ae,he))}function Ht(je,ie,ae,he,be,se){let Oe=be-ae,Ve=se-he;if(Oe!==0||Ve!==0){const Ce=((je-ae)*Oe+(ie-he)*Ve)/(Oe*Oe+Ve*Ve);Ce>1?(ae=be,he=se):Ce>0&&(ae+=Oe*Ce,he+=Ve*Ce)}return Oe=je-ae,Ve=ie-he,Oe*Oe+Ve*Ve}function zt(je,ie,ae,he){const be={id:je??null,type:ie,geometry:ae,tags:he,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ie==="Point"||ie==="MultiPoint"||ie==="LineString")er(be,ae);else if(ie==="Polygon")er(be,ae[0]);else if(ie==="MultiLineString")for(const se of ae)er(be,se);else if(ie==="MultiPolygon")for(const se of ae)er(be,se[0]);return be}function er(je,ie){for(let ae=0;ae<ie.length;ae+=3)je.minX=Math.min(je.minX,ie[ae]),je.minY=Math.min(je.minY,ie[ae+1]),je.maxX=Math.max(je.maxX,ie[ae]),je.maxY=Math.max(je.maxY,ie[ae+1])}function ir(je,ie,ae,he){if(!ie.geometry)return;const be=ie.geometry.coordinates;if(be&&be.length===0)return;const se=ie.geometry.type,Oe=Math.pow(ae.tolerance/((1<<ae.maxZoom)*ae.extent),2);let Ve=[],Ce=ie.id;if(ae.promoteId?Ce=ie.properties[ae.promoteId]:ae.generateId&&(Ce=he||0),se==="Point")Qr(be,Ve);else if(se==="MultiPoint")for(const Ue of be)Qr(Ue,Ve);else if(se==="LineString")br(be,Ve,Oe,!1);else if(se==="MultiLineString"){if(ae.lineMetrics){for(const Ue of be)Ve=[],br(Ue,Ve,Oe,!1),je.push(zt(Ce,"LineString",Ve,ie.properties));return}en(be,Ve,Oe,!1)}else if(se==="Polygon")en(be,Ve,Oe,!0);else{if(se!=="MultiPolygon"){if(se==="GeometryCollection"){for(const Ue of ie.geometry.geometries)ir(je,{id:Ce,geometry:Ue,properties:ie.properties},ae,he);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Ue of be){const qe=[];en(Ue,qe,Oe,!0),Ve.push(qe)}}je.push(zt(Ce,se,Ve,ie.properties))}function Qr(je,ie){ie.push(Fr(je[0]),ln(je[1]),0)}function br(je,ie,ae,he){let be,se,Oe=0;for(let Ce=0;Ce<je.length;Ce++){const Ue=Fr(je[Ce][0]),qe=ln(je[Ce][1]);ie.push(Ue,qe,0),Ce>0&&(Oe+=he?(be*qe-Ue*se)/2:Math.sqrt(Math.pow(Ue-be,2)+Math.pow(qe-se,2))),be=Ue,se=qe}const Ve=ie.length-3;ie[2]=1,Zt(ie,0,Ve,ae),ie[Ve+2]=1,ie.size=Math.abs(Oe),ie.start=0,ie.end=ie.size}function en(je,ie,ae,he){for(let be=0;be<je.length;be++){const se=[];br(je[be],se,ae,he),ie.push(se)}}function Fr(je){return je/360+.5}function ln(je){const ie=Math.sin(je*Math.PI/180),ae=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return ae<0?0:ae>1?1:ae}function Ln(je,ie,ae,he,be,se,Oe,Ve){if(he/=ie,se>=(ae/=ie)&&Oe<he)return je;if(Oe<ae||se>=he)return null;const Ce=[];for(const Ue of je){const qe=Ue.geometry;let Fe=Ue.type;const ft=be===0?Ue.minX:Ue.minY,Pt=be===0?Ue.maxX:Ue.maxY;if(ft>=ae&&Pt<he){Ce.push(Ue);continue}if(Pt<ae||ft>=he)continue;let At=[];if(Fe==="Point"||Fe==="MultiPoint")Dr(qe,At,ae,he,be);else if(Fe==="LineString")pr(qe,At,ae,he,be,!1,Ve.lineMetrics);else if(Fe==="MultiLineString")Un(qe,At,ae,he,be,!1);else if(Fe==="Polygon")Un(qe,At,ae,he,be,!0);else if(Fe==="MultiPolygon")for(const Ft of qe){const lr=[];Un(Ft,lr,ae,he,be,!0),lr.length&&At.push(lr)}if(At.length){if(Ve.lineMetrics&&Fe==="LineString"){for(const Ft of At)Ce.push(zt(Ue.id,Fe,Ft,Ue.tags));continue}Fe!=="LineString"&&Fe!=="MultiLineString"||(At.length===1?(Fe="LineString",At=At[0]):Fe="MultiLineString"),Fe!=="Point"&&Fe!=="MultiPoint"||(Fe=At.length===3?"Point":"MultiPoint"),Ce.push(zt(Ue.id,Fe,At,Ue.tags))}}return Ce.length?Ce:null}function Dr(je,ie,ae,he,be){for(let se=0;se<je.length;se+=3){const Oe=je[se+be];Oe>=ae&&Oe<=he&&Yn(ie,je[se],je[se+1],je[se+2])}}function pr(je,ie,ae,he,be,se,Oe){let Ve=Kn(je);const Ce=be===0?we:Re;let Ue,qe,Fe=je.start;for(let lr=0;lr<je.length-3;lr+=3){const Je=je[lr],Wt=je[lr+1],vr=je[lr+2],Ur=je[lr+3],Cr=je[lr+4],tt=be===0?Je:Wt,yt=be===0?Ur:Cr;let kt=!1;Oe&&(Ue=Math.sqrt(Math.pow(Je-Ur,2)+Math.pow(Wt-Cr,2))),tt<ae?yt>ae&&(qe=Ce(Ve,Je,Wt,Ur,Cr,ae),Oe&&(Ve.start=Fe+Ue*qe)):tt>he?yt<he&&(qe=Ce(Ve,Je,Wt,Ur,Cr,he),Oe&&(Ve.start=Fe+Ue*qe)):Yn(Ve,Je,Wt,vr),yt<ae&&tt>=ae&&(qe=Ce(Ve,Je,Wt,Ur,Cr,ae),kt=!0),yt>he&&tt<=he&&(qe=Ce(Ve,Je,Wt,Ur,Cr,he),kt=!0),!se&&kt&&(Oe&&(Ve.end=Fe+Ue*qe),ie.push(Ve),Ve=Kn(je)),Oe&&(Fe+=Ue)}let ft=je.length-3;const Pt=je[ft],At=je[ft+1],Ft=be===0?Pt:At;Ft>=ae&&Ft<=he&&Yn(Ve,Pt,At,je[ft+2]),ft=Ve.length-3,se&&ft>=3&&(Ve[ft]!==Ve[0]||Ve[ft+1]!==Ve[1])&&Yn(Ve,Ve[0],Ve[1],Ve[2]),Ve.length&&ie.push(Ve)}function Kn(je){const ie=[];return ie.size=je.size,ie.start=je.start,ie.end=je.end,ie}function Un(je,ie,ae,he,be,se){for(const Oe of je)pr(Oe,ie,ae,he,be,se,!1)}function Yn(je,ie,ae,he){je.push(ie,ae,he)}function we(je,ie,ae,he,be,se){const Oe=(se-ie)/(he-ie);return Yn(je,se,ae+(be-ae)*Oe,1),Oe}function Re(je,ie,ae,he,be,se){const Oe=(se-ae)/(be-ae);return Yn(je,ie+(he-ie)*Oe,se,1),Oe}function We(je,ie){const ae=[];for(let he=0;he<je.length;he++){const be=je[he],se=be.type;let Oe;if(se==="Point"||se==="MultiPoint"||se==="LineString")Oe=vt(be.geometry,ie);else if(se==="MultiLineString"||se==="Polygon"){Oe=[];for(const Ve of be.geometry)Oe.push(vt(Ve,ie))}else if(se==="MultiPolygon"){Oe=[];for(const Ve of be.geometry){const Ce=[];for(const Ue of Ve)Ce.push(vt(Ue,ie));Oe.push(Ce)}}ae.push(zt(be.id,se,Oe,be.tags))}return ae}function vt(je,ie){const ae=[];ae.size=je.size,je.start!==void 0&&(ae.start=je.start,ae.end=je.end);for(let he=0;he<je.length;he+=3)ae.push(je[he]+ie,je[he+1],je[he+2]);return ae}function xt(je,ie){if(je.transformed)return je;const ae=1<<je.z,he=je.x,be=je.y;for(const se of je.features){const Oe=se.geometry,Ve=se.type;if(se.geometry=[],Ve===1)for(let Ce=0;Ce<Oe.length;Ce+=2)se.geometry.push(Et(Oe[Ce],Oe[Ce+1],ie,ae,he,be));else for(let Ce=0;Ce<Oe.length;Ce++){const Ue=[];for(let qe=0;qe<Oe[Ce].length;qe+=2)Ue.push(Et(Oe[Ce][qe],Oe[Ce][qe+1],ie,ae,he,be));se.geometry.push(Ue)}}return je.transformed=!0,je}function Et(je,ie,ae,he,be,se){return[Math.round(ae*(je*he-be)),Math.round(ae*(ie*he-se))]}function Ut(je,ie,ae,he,be){const se=ie===be.maxZoom?0:be.tolerance/((1<<ie)*be.extent),Oe={features:[],numPoints:0,numSimplified:0,numFeatures:je.length,source:null,x:ae,y:he,z:ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ve of je)ur(Oe,Ve,se,be);return Oe}function ur(je,ie,ae,he){const be=ie.geometry,se=ie.type,Oe=[];if(je.minX=Math.min(je.minX,ie.minX),je.minY=Math.min(je.minY,ie.minY),je.maxX=Math.max(je.maxX,ie.maxX),je.maxY=Math.max(je.maxY,ie.maxY),se==="Point"||se==="MultiPoint")for(let Ve=0;Ve<be.length;Ve+=3)Oe.push(be[Ve],be[Ve+1]),je.numPoints++,je.numSimplified++;else if(se==="LineString")_r(Oe,be,je,ae,!1,!1);else if(se==="MultiLineString"||se==="Polygon")for(let Ve=0;Ve<be.length;Ve++)_r(Oe,be[Ve],je,ae,se==="Polygon",Ve===0);else if(se==="MultiPolygon")for(let Ve=0;Ve<be.length;Ve++){const Ce=be[Ve];for(let Ue=0;Ue<Ce.length;Ue++)_r(Oe,Ce[Ue],je,ae,!0,Ue===0)}if(Oe.length){let Ve=ie.tags||null;if(se==="LineString"&&he.lineMetrics){Ve={};for(const Ue in ie.tags)Ve[Ue]=ie.tags[Ue];Ve.mapbox_clip_start=be.start/be.size,Ve.mapbox_clip_end=be.end/be.size}const Ce={geometry:Oe,type:se==="Polygon"||se==="MultiPolygon"?3:se==="LineString"||se==="MultiLineString"?2:1,tags:Ve};ie.id!==null&&(Ce.id=ie.id),je.features.push(Ce)}}function _r(je,ie,ae,he,be,se){const Oe=he*he;if(he>0&&ie.size<(be?Oe:he))return void(ae.numPoints+=ie.length/3);const Ve=[];for(let Ce=0;Ce<ie.length;Ce+=3)(he===0||ie[Ce+2]>Oe)&&(ae.numSimplified++,Ve.push(ie[Ce],ie[Ce+1])),ae.numPoints++;be&&function(Ce,Ue){let qe=0;for(let Fe=0,ft=Ce.length,Pt=ft-2;Fe<ft;Pt=Fe,Fe+=2)qe+=(Ce[Fe]-Ce[Pt])*(Ce[Fe+1]+Ce[Pt+1]);if(qe>0===Ue)for(let Fe=0,ft=Ce.length;Fe<ft/2;Fe+=2){const Pt=Ce[Fe],At=Ce[Fe+1];Ce[Fe]=Ce[ft-2-Fe],Ce[Fe+1]=Ce[ft-1-Fe],Ce[ft-2-Fe]=Pt,Ce[ft-1-Fe]=At}}(Ve,se),je.push(Ve)}const Zr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Rn{constructor(ie,ae){const he=(ae=this.options=function(se,Oe){for(const Ve in Oe)se[Ve]=Oe[Ve];return se}(Object.create(Zr),ae)).debug;if(he&&console.time("preprocess data"),ae.maxZoom<0||ae.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ae.promoteId&&ae.generateId)throw new Error("promoteId and generateId cannot be used together.");let be=function(se,Oe){const Ve=[];if(se.type==="FeatureCollection")for(let Ce=0;Ce<se.features.length;Ce++)ir(Ve,se.features[Ce],Oe,Ce);else ir(Ve,se.type==="Feature"?se:{geometry:se},Oe);return Ve}(ie,ae);this.tiles={},this.tileCoords=[],he&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ae.indexMaxZoom,ae.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),be=function(se,Oe){const Ve=Oe.buffer/Oe.extent;let Ce=se;const Ue=Ln(se,1,-1-Ve,Ve,0,-1,2,Oe),qe=Ln(se,1,1-Ve,2+Ve,0,-1,2,Oe);return(Ue||qe)&&(Ce=Ln(se,1,-Ve,1+Ve,0,-1,2,Oe)||[],Ue&&(Ce=We(Ue,1).concat(Ce)),qe&&(Ce=Ce.concat(We(qe,-1)))),Ce}(be,ae),be.length&&this.splitTile(be,0,0,0),he&&(be.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ie,ae,he,be,se,Oe,Ve){const Ce=[ie,ae,he,be],Ue=this.options,qe=Ue.debug;for(;Ce.length;){be=Ce.pop(),he=Ce.pop(),ae=Ce.pop(),ie=Ce.pop();const Fe=1<<ae,ft=Vn(ae,he,be);let Pt=this.tiles[ft];if(!Pt&&(qe>1&&console.time("creation"),Pt=this.tiles[ft]=Ut(ie,ae,he,be,Ue),this.tileCoords.push({z:ae,x:he,y:be}),qe)){qe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ae,he,be,Pt.numFeatures,Pt.numPoints,Pt.numSimplified),console.timeEnd("creation"));const kt=`z${ae}`;this.stats[kt]=(this.stats[kt]||0)+1,this.total++}if(Pt.source=ie,se==null){if(ae===Ue.indexMaxZoom||Pt.numPoints<=Ue.indexMaxPoints)continue}else{if(ae===Ue.maxZoom||ae===se)continue;if(se!=null){const kt=se-ae;if(he!==Oe>>kt||be!==Ve>>kt)continue}}if(Pt.source=null,ie.length===0)continue;qe>1&&console.time("clipping");const At=.5*Ue.buffer/Ue.extent,Ft=.5-At,lr=.5+At,Je=1+At;let Wt=null,vr=null,Ur=null,Cr=null,tt=Ln(ie,Fe,he-At,he+lr,0,Pt.minX,Pt.maxX,Ue),yt=Ln(ie,Fe,he+Ft,he+Je,0,Pt.minX,Pt.maxX,Ue);ie=null,tt&&(Wt=Ln(tt,Fe,be-At,be+lr,1,Pt.minY,Pt.maxY,Ue),vr=Ln(tt,Fe,be+Ft,be+Je,1,Pt.minY,Pt.maxY,Ue),tt=null),yt&&(Ur=Ln(yt,Fe,be-At,be+lr,1,Pt.minY,Pt.maxY,Ue),Cr=Ln(yt,Fe,be+Ft,be+Je,1,Pt.minY,Pt.maxY,Ue),yt=null),qe>1&&console.timeEnd("clipping"),Ce.push(Wt||[],ae+1,2*he,2*be),Ce.push(vr||[],ae+1,2*he,2*be+1),Ce.push(Ur||[],ae+1,2*he+1,2*be),Ce.push(Cr||[],ae+1,2*he+1,2*be+1)}}getTile(ie,ae,he){ie=+ie,ae=+ae,he=+he;const be=this.options,{extent:se,debug:Oe}=be;if(ie<0||ie>24)return null;const Ve=1<<ie,Ce=Vn(ie,ae=ae+Ve&Ve-1,he);if(this.tiles[Ce])return xt(this.tiles[Ce],se);Oe>1&&console.log("drilling down to z%d-%d-%d",ie,ae,he);let Ue,qe=ie,Fe=ae,ft=he;for(;!Ue&&qe>0;)qe--,Fe>>=1,ft>>=1,Ue=this.tiles[Vn(qe,Fe,ft)];return Ue&&Ue.source?(Oe>1&&(console.log("found parent tile z%d-%d-%d",qe,Fe,ft),console.time("drilling down")),this.splitTile(Ue.source,qe,Fe,ft,ie,ae,he),Oe>1&&console.timeEnd("drilling down"),this.tiles[Ce]?xt(this.tiles[Ce],se):null):null}}function Vn(je,ie,ae){return 32*((1<<je)*ae+ie)+je}function zn(je,ie){return ie?je.properties[ie]:je.id}function Pi(je,ie){if(je==null)return!0;if(je.type==="Feature")return zn(je,ie)!=null;if(je.type==="FeatureCollection"){const ae=new Set;for(const he of je.features){const be=zn(he,ie);if(be==null||ae.has(be))return!1;ae.add(be)}return!0}return!1}function Ri(je,ie){const ae=new Map;if(je!=null)if(je.type==="Feature")ae.set(zn(je,ie),je);else for(const he of je.features)ae.set(zn(he,ie),he);return ae}class nn extends B{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ie,ae){return y._(this,void 0,void 0,function*(){const he=ie.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const be=this._geoJSONIndex.getTile(he.z,he.x,he.y);if(!be)return null;const se=new pe(be.features);let Oe=Ye(se);return Oe.byteOffset===0&&Oe.byteLength===Oe.buffer.byteLength||(Oe=new Uint8Array(Oe)),{vectorTile:se,rawData:Oe.buffer}})}loadData(ie){return y._(this,void 0,void 0,function*(){var ae;(ae=this._pendingRequest)===null||ae===void 0||ae.abort();const he=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new y.cC(ie.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ie,this._pendingRequest),this._geoJSONIndex=ie.cluster?new Ct(function({superclusterOptions:Oe,clusterProperties:Ve}){if(!Ve||!Oe)return Oe;const Ce={},Ue={},qe={accumulated:null,zoom:0},Fe={properties:null},ft=Object.keys(Ve);for(const Pt of ft){const[At,Ft]=Ve[Pt],lr=y.cJ(Ft),Je=y.cJ(typeof At=="string"?[At,["accumulated"],["get",Pt]]:At);Ce[Pt]=lr.value,Ue[Pt]=Je.value}return Oe.map=Pt=>{Fe.properties=Pt;const At={};for(const Ft of ft)At[Ft]=Ce[Ft].evaluate(qe,Fe);return At},Oe.reduce=(Pt,At)=>{Fe.properties=At;for(const Ft of ft)qe.accumulated=Pt[Ft],Pt[Ft]=Ue[Ft].evaluate(qe,Fe)},Oe}(ie)).load((yield this._pendingData).features):(be=yield this._pendingData,new Rn(be,ie.geojsonVtOptions)),this.loaded={};const se={};if(he){const Oe=he.finish();Oe&&(se.resourceTiming={},se.resourceTiming[ie.source]=JSON.parse(JSON.stringify(Oe)))}return se}catch(se){if(delete this._pendingRequest,y.cn(se))return{abandoned:!0};throw se}var be})}getData(){return y._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ie){const ae=this.loaded;return ae&&ae[ie.uid]?super.reloadTile(ie):this.loadTile(ie)}loadAndProcessGeoJSON(ie,ae){return y._(this,void 0,void 0,function*(){let he=yield this.loadGeoJSON(ie,ae);if(delete this._pendingRequest,typeof he!="object")throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(K(he,!0),ie.filter){const be=y.cJ(ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(be.result==="error")throw new Error(be.value.map(Oe=>`${Oe.key}: ${Oe.message}`).join(", "));he={type:"FeatureCollection",features:he.features.filter(Oe=>be.value.evaluate({zoom:0},Oe))}}return he})}loadGeoJSON(ie,ae){return y._(this,void 0,void 0,function*(){const{promoteId:he}=ie;if(ie.request){const be=yield y.j(ie.request,ae);return this._dataUpdateable=Pi(be.data,he)?Ri(be.data,he):void 0,be.data}if(typeof ie.data=="string")try{const be=JSON.parse(ie.data);return this._dataUpdateable=Pi(be,he)?Ri(be,he):void 0,be}catch{throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`)}if(!ie.dataDiff)throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ie.source}`);return function(be,se,Oe){var Ve,Ce,Ue,qe;if(se.removeAll&&be.clear(),se.remove)for(const Fe of se.remove)be.delete(Fe);if(se.add)for(const Fe of se.add){const ft=zn(Fe,Oe);ft!=null&&be.set(ft,Fe)}if(se.update)for(const Fe of se.update){let ft=be.get(Fe.id);if(ft==null)continue;const Pt=!Fe.removeAllProperties&&(((Ve=Fe.removeProperties)===null||Ve===void 0?void 0:Ve.length)>0||((Ce=Fe.addOrUpdateProperties)===null||Ce===void 0?void 0:Ce.length)>0);if((Fe.newGeometry||Fe.removeAllProperties||Pt)&&(ft=Object.assign({},ft),be.set(Fe.id,ft),Pt&&(ft.properties=Object.assign({},ft.properties))),Fe.newGeometry&&(ft.geometry=Fe.newGeometry),Fe.removeAllProperties)ft.properties={};else if(((Ue=Fe.removeProperties)===null||Ue===void 0?void 0:Ue.length)>0)for(const At of Fe.removeProperties)Object.prototype.hasOwnProperty.call(ft.properties,At)&&delete ft.properties[At];if(((qe=Fe.addOrUpdateProperties)===null||qe===void 0?void 0:qe.length)>0)for(const{key:At,value:Ft}of Fe.addOrUpdateProperties)ft.properties[At]=Ft}}(this._dataUpdateable,ie.dataDiff,he),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ie){return y._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ie){return this._geoJSONIndex.getClusterExpansionZoom(ie.clusterId)}getClusterChildren(ie){return this._geoJSONIndex.getChildren(ie.clusterId)}getClusterLeaves(ie){return this._geoJSONIndex.getLeaves(ie.clusterId,ie.limit,ie.offset)}}class tn{constructor(ie){this.self=ie,this.actor=new y.H(ie),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ae,he)=>{if(this.externalWorkerSourceTypes[ae])throw new Error(`Worker source with name "${ae}" already registered.`);this.externalWorkerSourceTypes[ae]=he},this.self.addProtocol=y.cp,this.self.removeProtocol=y.cq,this.self.registerRTLTextPlugin=ae=>{y.cK.setMethods(ae)},this.actor.registerMessageHandler("LDT",(ae,he)=>this._getDEMWorkerSource(ae,he.source).loadTile(he)),this.actor.registerMessageHandler("RDT",(ae,he)=>y._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ae,he.source).removeTile(he)})),this.actor.registerMessageHandler("GCEZ",(ae,he)=>y._(this,void 0,void 0,function*(){return this._getWorkerSource(ae,he.type,he.source).getClusterExpansionZoom(he)})),this.actor.registerMessageHandler("GCC",(ae,he)=>y._(this,void 0,void 0,function*(){return this._getWorkerSource(ae,he.type,he.source).getClusterChildren(he)})),this.actor.registerMessageHandler("GCL",(ae,he)=>y._(this,void 0,void 0,function*(){return this._getWorkerSource(ae,he.type,he.source).getClusterLeaves(he)})),this.actor.registerMessageHandler("LD",(ae,he)=>this._getWorkerSource(ae,he.type,he.source).loadData(he)),this.actor.registerMessageHandler("GD",(ae,he)=>this._getWorkerSource(ae,he.type,he.source).getData()),this.actor.registerMessageHandler("LT",(ae,he)=>this._getWorkerSource(ae,he.type,he.source).loadTile(he)),this.actor.registerMessageHandler("RT",(ae,he)=>this._getWorkerSource(ae,he.type,he.source).reloadTile(he)),this.actor.registerMessageHandler("AT",(ae,he)=>this._getWorkerSource(ae,he.type,he.source).abortTile(he)),this.actor.registerMessageHandler("RMT",(ae,he)=>this._getWorkerSource(ae,he.type,he.source).removeTile(he)),this.actor.registerMessageHandler("RS",(ae,he)=>y._(this,void 0,void 0,function*(){if(!this.workerSources[ae]||!this.workerSources[ae][he.type]||!this.workerSources[ae][he.type][he.source])return;const be=this.workerSources[ae][he.type][he.source];delete this.workerSources[ae][he.type][he.source],be.removeSource!==void 0&&be.removeSource(he)})),this.actor.registerMessageHandler("RM",ae=>y._(this,void 0,void 0,function*(){delete this.layerIndexes[ae],delete this.availableImages[ae],delete this.workerSources[ae],delete this.demWorkerSources[ae]})),this.actor.registerMessageHandler("SR",(ae,he)=>y._(this,void 0,void 0,function*(){this.referrer=he})),this.actor.registerMessageHandler("SRPS",(ae,he)=>this._syncRTLPluginState(ae,he)),this.actor.registerMessageHandler("IS",(ae,he)=>y._(this,void 0,void 0,function*(){this.self.importScripts(he)})),this.actor.registerMessageHandler("SI",(ae,he)=>this._setImages(ae,he)),this.actor.registerMessageHandler("UL",(ae,he)=>y._(this,void 0,void 0,function*(){this._getLayerIndex(ae).update(he.layers,he.removedIds)})),this.actor.registerMessageHandler("SL",(ae,he)=>y._(this,void 0,void 0,function*(){this._getLayerIndex(ae).replace(he)}))}_setImages(ie,ae){return y._(this,void 0,void 0,function*(){this.availableImages[ie]=ae;for(const he in this.workerSources[ie]){const be=this.workerSources[ie][he];for(const se in be)be[se].availableImages=ae}})}_syncRTLPluginState(ie,ae){return y._(this,void 0,void 0,function*(){return yield y.cK.syncState(ae,this.self.importScripts)})}_getAvailableImages(ie){let ae=this.availableImages[ie];return ae||(ae=[]),ae}_getLayerIndex(ie){let ae=this.layerIndexes[ie];return ae||(ae=this.layerIndexes[ie]=new u),ae}_getWorkerSource(ie,ae,he){if(this.workerSources[ie]||(this.workerSources[ie]={}),this.workerSources[ie][ae]||(this.workerSources[ie][ae]={}),!this.workerSources[ie][ae][he]){const be={sendAsync:(se,Oe)=>(se.targetMapId=ie,this.actor.sendAsync(se,Oe))};switch(ae){case"vector":this.workerSources[ie][ae][he]=new B(be,this._getLayerIndex(ie),this._getAvailableImages(ie));break;case"geojson":this.workerSources[ie][ae][he]=new nn(be,this._getLayerIndex(ie),this._getAvailableImages(ie));break;default:this.workerSources[ie][ae][he]=new this.externalWorkerSourceTypes[ae](be,this._getLayerIndex(ie),this._getAvailableImages(ie))}}return this.workerSources[ie][ae][he]}_getDEMWorkerSource(ie,ae){return this.demWorkerSources[ie]||(this.demWorkerSources[ie]={}),this.demWorkerSources[ie][ae]||(this.demWorkerSources[ie][ae]=new z),this.demWorkerSources[ie][ae]}}return y.i(self)&&(self.worker=new tn(self)),tn}),_("index",["exports","./shared"],function(y,u){var C="5.4.0";function R(){var v=new u.A(4);return u.A!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v}let O,B;const z={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(v,e,i){const h=requestAnimationFrame(x=>{m(),e(x)}),{unsubscribe:m}=u.s(v.signal,"abort",()=>{m(),cancelAnimationFrame(h),i(u.c())},!1)},frameAsync(v){return new Promise((e,i)=>{this.frame(v,e,i)})},getImageData(v,e=0){return this.getImageCanvasContext(v).getImageData(-e,-e,v.width+2*e,v.height+2*e)},getImageCanvasContext(v){const e=window.document.createElement("canvas"),i=e.getContext("2d",{willReadFrequently:!0});if(!i)throw new Error("failed to create canvas 2d context");return e.width=v.width,e.height=v.height,i.drawImage(v,0,0,v.width,v.height),i},resolveURL:v=>(O||(O=document.createElement("a")),O.href=v,O.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(B==null&&(B=matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}};class F{static testProp(e){if(!F.docStyle)return e[0];for(let i=0;i<e.length;i++)if(e[i]in F.docStyle)return e[i];return e[0]}static create(e,i,h){const m=window.document.createElement(e);return i!==void 0&&(m.className=i),h&&h.appendChild(m),m}static createNS(e,i){return window.document.createElementNS(e,i)}static disableDrag(){F.docStyle&&F.selectProp&&(F.userSelect=F.docStyle[F.selectProp],F.docStyle[F.selectProp]="none")}static enableDrag(){F.docStyle&&F.selectProp&&(F.docStyle[F.selectProp]=F.userSelect)}static setTransform(e,i){e.style[F.transformProp]=i}static addEventListener(e,i,h,m={}){e.addEventListener(i,h,"passive"in m?m:m.capture)}static removeEventListener(e,i,h,m={}){e.removeEventListener(i,h,"passive"in m?m:m.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",F.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",F.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",F.suppressClickInternal,!0)},0)}static getScale(e){const i=e.getBoundingClientRect();return{x:i.width/e.offsetWidth||1,y:i.height/e.offsetHeight||1,boundingClientRect:i}}static getPoint(e,i,h){const m=i.boundingClientRect;return new u.P((h.clientX-m.left)/i.x-e.clientLeft,(h.clientY-m.top)/i.y-e.clientTop)}static mousePos(e,i){const h=F.getScale(e);return F.getPoint(e,h,i)}static touchPos(e,i){const h=[],m=F.getScale(e);for(let x=0;x<i.length;x++)h.push(F.getPoint(e,m,i[x]));return h}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}static sanitize(e){const i=new DOMParser().parseFromString(e,"text/html").body||document.createElement("body"),h=i.querySelectorAll("script");for(const m of h)m.remove();return F.clean(i),i.innerHTML}static isPossiblyDangerous(e,i){const h=i.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(e)||!h.includes("javascript:")&&!h.includes("data:"))||!!e.startsWith("on")||void 0}static clean(e){const i=e.children;for(const h of i)F.removeAttributes(h),F.clean(h)}static removeAttributes(e){for(const{name:i,value:h}of e.attributes)F.isPossiblyDangerous(i,h)&&e.removeAttribute(i)}}F.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,F.selectProp=F.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),F.transformProp=F.testProp(["transform","WebkitTransform"]);const G={supported:!1,testSupport:function(v){!X&&K&&(ye?pe(v):te=v)}};let te,K,X=!1,ye=!1;function pe(v){const e=v.createTexture();v.bindTexture(v.TEXTURE_2D,e);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,K),v.isContextLost())return;G.supported=!0}catch{}v.deleteTexture(e),X=!0}var xe;typeof document<"u"&&(K=document.createElement("img"),K.onload=()=>{te&&pe(te),te=null,ye=!0},K.onerror=()=>{X=!0,te=null},K.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let e,i,h,m;v.resetRequestQueue=()=>{e=[],i=0,h=0,m={}},v.addThrottleControl=D=>{const j=h++;return m[j]=D,j},v.removeThrottleControl=D=>{delete m[D],M()},v.getImage=(D,j,U=!0)=>new Promise(($,Z)=>{G.supported&&(D.headers||(D.headers={}),D.headers.accept="image/webp,*/*"),u.e(D,{type:"image"}),e.push({abortController:j,requestParameters:D,supportImageRefresh:U,state:"queued",onError:ee=>{Z(ee)},onSuccess:ee=>{$(ee)}}),M()});const x=D=>u._(this,void 0,void 0,function*(){D.state="running";const{requestParameters:j,supportImageRefresh:U,onError:$,onSuccess:Z,abortController:ee}=D,re=U===!1&&!u.i(self)&&!u.g(j.url)&&(!j.headers||Object.keys(j.headers).reduce((me,_e)=>me&&_e==="accept",!0));i++;const de=re?P(j,ee):u.m(j,ee);try{const me=yield de;delete D.abortController,D.state="completed",me.data instanceof HTMLImageElement||u.b(me.data)?Z(me):me.data&&Z({data:yield(fe=me.data,typeof createImageBitmap=="function"?u.f(fe):u.h(fe)),cacheControl:me.cacheControl,expires:me.expires})}catch(me){delete D.abortController,$(me)}finally{i--,M()}var fe}),M=()=>{const D=(()=>{for(const j of Object.keys(m))if(m[j]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let j=i;j<D&&e.length>0;j++){const U=e.shift();U.abortController.signal.aborted?j--:x(U)}},P=(D,j)=>new Promise((U,$)=>{const Z=new Image,ee=D.url,re=D.credentials;re&&re==="include"?Z.crossOrigin="use-credentials":(re&&re==="same-origin"||!u.d(ee))&&(Z.crossOrigin="anonymous"),j.signal.addEventListener("abort",()=>{Z.src="",$(u.c())}),Z.fetchPriority="high",Z.onload=()=>{Z.onerror=Z.onload=null,U({data:Z})},Z.onerror=()=>{Z.onerror=Z.onload=null,j.signal.aborted||$(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Z.src=ee})}(xe||(xe={})),xe.resetRequestQueue();class Se{constructor(e){this._transformRequestFn=e}transformRequest(e,i){return this._transformRequestFn&&this._transformRequestFn(e,i)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function ke(v){const e=[];if(typeof v=="string")e.push({id:"default",url:v});else if(v&&v.length>0){const i=[];for(const{id:h,url:m}of v){const x=`${h}${m}`;i.indexOf(x)===-1&&(i.push(x),e.push({id:h,url:m}))}}return e}function it(v,e,i){try{const h=new URL(v);return h.pathname+=`${e}${i}`,h.toString()}catch{throw new Error(`Invalid sprite URL "${v}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class Ke{constructor(e,i,h,m){this.context=e,this.format=h,this.texture=e.gl.createTexture(),this.update(i,m)}update(e,i,h){const{width:m,height:x}=e,M=!(this.size&&this.size[0]===m&&this.size[1]===x||h),{context:P}=this,{gl:D}=P;if(this.useMipmap=!!(i&&i.useMipmap),D.bindTexture(D.TEXTURE_2D,this.texture),P.pixelStoreUnpackFlipY.set(!1),P.pixelStoreUnpack.set(1),P.pixelStoreUnpackPremultiplyAlpha.set(this.format===D.RGBA&&(!i||i.premultiply!==!1)),M)this.size=[m,x],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||u.b(e)?D.texImage2D(D.TEXTURE_2D,0,this.format,this.format,D.UNSIGNED_BYTE,e):D.texImage2D(D.TEXTURE_2D,0,this.format,m,x,0,this.format,D.UNSIGNED_BYTE,e.data);else{const{x:j,y:U}=h||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||u.b(e)?D.texSubImage2D(D.TEXTURE_2D,0,j,U,D.RGBA,D.UNSIGNED_BYTE,e):D.texSubImage2D(D.TEXTURE_2D,0,j,U,m,x,D.RGBA,D.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&D.generateMipmap(D.TEXTURE_2D),P.pixelStoreUnpackFlipY.setDefault(),P.pixelStoreUnpack.setDefault(),P.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(e,i,h){const{context:m}=this,{gl:x}=m;x.bindTexture(x.TEXTURE_2D,this.texture),h!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=x.LINEAR),e!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,e),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,h||e),this.filter=e),i!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,i),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,i),this.wrap=i)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function Ye(v){const{userImage:e}=v;return!!(e&&e.render&&e.render())&&(v.data.replace(new Uint8Array(e.data.buffer)),!0)}class ht extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:i,promiseResolve:h}of this.requestors)h(this._getImagesForIds(i));this.requestors=[]}}getImage(e){const i=this.images[e];if(i&&!i.data&&i.spriteData){const h=i.spriteData;i.data=new u.R({width:h.width,height:h.height},h.context.getImageData(h.x,h.y,h.width,h.height).data),i.spriteData=null}return i}addImage(e,i){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,i)&&(this.images[e]=i)}_validate(e,i){let h=!0;const m=i.data||i.spriteData;return this._validateStretch(i.stretchX,m&&m.width)||(this.fire(new u.k(new Error(`Image "${e}" has invalid "stretchX" value`))),h=!1),this._validateStretch(i.stretchY,m&&m.height)||(this.fire(new u.k(new Error(`Image "${e}" has invalid "stretchY" value`))),h=!1),this._validateContent(i.content,i)||(this.fire(new u.k(new Error(`Image "${e}" has invalid "content" value`))),h=!1),h}_validateStretch(e,i){if(!e)return!0;let h=0;for(const m of e){if(m[0]<h||m[1]<m[0]||i<m[1])return!1;h=m[1]}return!0}_validateContent(e,i){if(!e)return!0;if(e.length!==4)return!1;const h=i.spriteData,m=h&&h.width||i.data.width,x=h&&h.height||i.data.height;return!(e[0]<0||m<e[0]||e[1]<0||x<e[1]||e[2]<0||m<e[2]||e[3]<0||x<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,i,h=!0){const m=this.getImage(e);if(h&&(m.data.width!==i.data.width||m.data.height!==i.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${i.data.width}x${i.data.height}).`);i.version=m.version+1,this.images[e]=i,this.updatedImages[e]=!0}removeImage(e){const i=this.images[e];delete this.images[e],delete this.patterns[e],i.userImage&&i.userImage.onRemove&&i.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise((i,h)=>{let m=!0;if(!this.isLoaded())for(const x of e)this.images[x]||(m=!1);this.isLoaded()||m?i(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:i})})}_getImagesForIds(e){const i={};for(const h of e){let m=this.getImage(h);m||(this.fire(new u.l("styleimagemissing",{id:h})),m=this.getImage(h)),m?i[h]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:u.w(`Image "${h}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return i}getPixelSize(){const{width:e,height:i}=this.atlasImage;return{width:e,height:i}}getPattern(e){const i=this.patterns[e],h=this.getImage(e);if(!h)return null;if(i&&i.position.version===h.version)return i.position;if(i)i.position.version=h.version;else{const m={w:h.data.width+2,h:h.data.height+2,x:0,y:0},x=new u.I(m,h);this.patterns[e]={bin:m,position:x}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const i=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ke(e,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const x in this.patterns)e.push(this.patterns[x].bin);const{w:i,h}=u.p(e),m=this.atlasImage;m.resize({width:i||1,height:h||1});for(const x in this.patterns){const{bin:M}=this.patterns[x],P=M.x+1,D=M.y+1,j=this.getImage(x).data,U=j.width,$=j.height;u.R.copy(j,m,{x:0,y:0},{x:P,y:D},{width:U,height:$}),u.R.copy(j,m,{x:0,y:$-1},{x:P,y:D-1},{width:U,height:1}),u.R.copy(j,m,{x:0,y:0},{x:P,y:D+$},{width:U,height:1}),u.R.copy(j,m,{x:U-1,y:0},{x:P-1,y:D},{width:1,height:$}),u.R.copy(j,m,{x:0,y:0},{x:P+U,y:D},{width:1,height:$})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const i of e){if(this.callbackDispatchedThisFrame[i])continue;this.callbackDispatchedThisFrame[i]=!0;const h=this.getImage(i);h||u.w(`Image with ID: "${i}" was not found`),Ye(h)&&this.updateImage(i,h)}}}const Lt=1e20;function sr(v,e,i,h,m,x,M,P,D){for(let j=e;j<e+h;j++)nr(v,i*x+j,x,m,M,P,D);for(let j=i;j<i+m;j++)nr(v,j*x+e,1,h,M,P,D)}function nr(v,e,i,h,m,x,M){x[0]=0,M[0]=-1e20,M[1]=Lt,m[0]=v[e];for(let P=1,D=0,j=0;P<h;P++){m[P]=v[e+P*i];const U=P*P;do{const $=x[D];j=(m[P]-m[$]+U-$*$)/(P-$)/2}while(j<=M[D]&&--D>-1);D++,x[D]=P,M[D]=j,M[D+1]=Lt}for(let P=0,D=0;P<h;P++){for(;M[D+1]<P;)D++;const j=x[D],U=P-j;v[e+P*i]=m[j]+U*U}}class Xt{constructor(e,i){this.requestManager=e,this.localIdeographFontFamily=i,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return u._(this,void 0,void 0,function*(){const i=[];for(const x in e)for(const M of e[x])i.push(this._getAndCacheGlyphsPromise(x,M));const h=yield Promise.all(i),m={};for(const{stack:x,id:M,glyph:P}of h)m[x]||(m[x]={}),m[x][M]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics};return m})}_getAndCacheGlyphsPromise(e,i){return u._(this,void 0,void 0,function*(){let h=this.entries[e];h||(h=this.entries[e]={glyphs:{},requests:{},ranges:{}});let m=h.glyphs[i];if(m!==void 0)return{stack:e,id:i,glyph:m};if(m=this._tinySDF(h,e,i),m)return h.glyphs[i]=m,{stack:e,id:i,glyph:m};const x=Math.floor(i/256);if(256*x>65535)throw new Error("glyphs > 65535 not supported");if(h.ranges[x])return{stack:e,id:i,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!h.requests[x]){const P=Xt.loadGlyphRange(e,x,this.url,this.requestManager);h.requests[x]=P}const M=yield h.requests[x];for(const P in M)this._doesCharSupportLocalGlyph(+P)||(h.glyphs[+P]=M[+P]);return h.ranges[x]=!0,{stack:e,id:i,glyph:M[i]||null}})}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(e))||u.u["CJK Unified Ideographs"](e)||u.u["Hangul Syllables"](e)||u.u.Hiragana(e)||u.u.Katakana(e)||u.u["CJK Symbols and Punctuation"](e)||u.u["Halfwidth and Fullwidth Forms"](e))}_tinySDF(e,i,h){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(h))return;let x=e.tinySDF;if(!x){let P="400";/bold/i.test(i)?P="900":/medium/i.test(i)?P="500":/light/i.test(i)&&(P="200"),x=e.tinySDF=new Xt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:P})}const M=x.draw(String.fromCharCode(h));return{id:h,bitmap:new u.q({width:M.width||60,height:M.height||60},M.data),metrics:{width:M.glyphWidth/2||24,height:M.glyphHeight/2||24,left:M.glyphLeft/2+.5||0,top:M.glyphTop/2-27.5||-8,advance:M.glyphAdvance/2||24,isDoubleResolution:!0}}}}Xt.loadGlyphRange=function(v,e,i,h){return u._(this,void 0,void 0,function*(){const m=256*e,x=m+255,M=h.transformRequest(i.replace("{fontstack}",v).replace("{range}",`${m}-${x}`),"Glyphs"),P=yield u.n(M,new AbortController);if(!P||!P.data)throw new Error(`Could not load glyph range. range: ${e}, ${m}-${x}`);const D={};for(const j of u.o(P.data))D[j.id]=j;return D})},Xt.TinySDF=class{constructor({fontSize:v=24,buffer:e=3,radius:i=8,cutoff:h=.25,fontFamily:m="sans-serif",fontWeight:x="normal",fontStyle:M="normal"}={}){this.buffer=e,this.cutoff=h,this.radius=i;const P=this.size=v+4*e,D=this._createCanvas(P),j=this.ctx=D.getContext("2d",{willReadFrequently:!0});j.font=`${M} ${x} ${v}px ${m}`,j.textBaseline="alphabetic",j.textAlign="left",j.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(v){const e=document.createElement("canvas");return e.width=e.height=v,e}draw(v){const{width:e,actualBoundingBoxAscent:i,actualBoundingBoxDescent:h,actualBoundingBoxLeft:m,actualBoundingBoxRight:x}=this.ctx.measureText(v),M=Math.ceil(i),P=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-m))),D=Math.min(this.size-this.buffer,M+Math.ceil(h)),j=P+2*this.buffer,U=D+2*this.buffer,$=Math.max(j*U,0),Z=new Uint8ClampedArray($),ee={data:Z,width:j,height:U,glyphWidth:P,glyphHeight:D,glyphTop:M,glyphLeft:0,glyphAdvance:e};if(P===0||D===0)return ee;const{ctx:re,buffer:de,gridInner:fe,gridOuter:me}=this;re.clearRect(de,de,P,D),re.fillText(v,de,de+M);const _e=re.getImageData(de,de,P,D);me.fill(Lt,0,$),fe.fill(0,0,$);for(let Ae=0;Ae<D;Ae++)for(let Ee=0;Ee<P;Ee++){const Pe=_e.data[4*(Ae*P+Ee)+3]/255;if(Pe===0)continue;const ze=(Ae+de)*j+Ee+de;if(Pe===1)me[ze]=0,fe[ze]=Lt;else{const Ie=.5-Pe;me[ze]=Ie>0?Ie*Ie:0,fe[ze]=Ie<0?Ie*Ie:0}}sr(me,0,0,j,U,j,this.f,this.v,this.z),sr(fe,de,de,P,D,j,this.f,this.v,this.z);for(let Ae=0;Ae<$;Ae++){const Ee=Math.sqrt(me[Ae])-Math.sqrt(fe[Ae]);Z[Ae]=Math.round(255-255*(Ee/this.radius+this.cutoff))}return ee}};class or{constructor(){this.specification=u.v.light.position}possiblyEvaluate(e,i){return u.z(e.expression.evaluate(i))}interpolate(e,i,h){return{x:u.B.number(e.x,i.x,h),y:u.B.number(e.y,i.y,h),z:u.B.number(e.z,i.z,h)}}}let Ct;class Nt extends u.E{constructor(e){super(),Ct=Ct||new u.r({anchor:new u.D(u.v.light.anchor),position:new or,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(Ct),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,i={}){if(!this._validate(u.t,e,i))for(const h in e){const m=e[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),m):this._transitionable.setValue(h,m)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,i,h){return(!h||h.validate!==!1)&&u.x(this,e.call(u.y,{value:i,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}const Rt=new u.r({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class fr extends u.E{constructor(e){super(),this._transitionable=new u.T(Rt),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.C(0))}setSky(e,i={}){if(!this._validate(u.F,e,i)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const h in e){const m=e[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),m):this._transitionable.setValue(h,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,i,h={}){return(h==null?void 0:h.validate)!==!1&&u.x(this,e.call(u.y,u.e({value:i,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class De{constructor(e,i){this.width=e,this.height=i,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,i){const h=e.join(",")+String(i);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(e,i)),this.dashEntry[h]}getDashRanges(e,i,h){const m=[];let x=e.length%2==1?-e[e.length-1]*h:0,M=e[0]*h,P=!0;m.push({left:x,right:M,isDash:P,zeroLength:e[0]===0});let D=e[0];for(let j=1;j<e.length;j++){P=!P;const U=e[j];x=D*h,D+=U,M=D*h,m.push({left:x,right:M,isDash:P,zeroLength:U===0})}return m}addRoundDash(e,i,h){const m=i/2;for(let x=-h;x<=h;x++){const M=this.width*(this.nextRow+h+x);let P=0,D=e[P];for(let j=0;j<this.width;j++){j/D.right>1&&(D=e[++P]);const U=Math.abs(j-D.left),$=Math.abs(j-D.right),Z=Math.min(U,$);let ee;const re=x/h*(m+1);if(D.isDash){const de=m-Math.abs(re);ee=Math.sqrt(Z*Z+de*de)}else ee=m-Math.sqrt(Z*Z+re*re);this.data[M+j]=Math.max(0,Math.min(255,ee+128))}}}addRegularDash(e){for(let P=e.length-1;P>=0;--P){const D=e[P],j=e[P+1];D.zeroLength?e.splice(P,1):j&&j.isDash===D.isDash&&(j.left=D.left,e.splice(P,1))}const i=e[0],h=e[e.length-1];i.isDash===h.isDash&&(i.left=h.left-this.width,h.right=i.right+this.width);const m=this.width*this.nextRow;let x=0,M=e[x];for(let P=0;P<this.width;P++){P/M.right>1&&(M=e[++x]);const D=Math.abs(P-M.left),j=Math.abs(P-M.right),U=Math.min(D,j);this.data[m+P]=Math.max(0,Math.min(255,(M.isDash?U:-U)+128))}}addDash(e,i){const h=i?7:0,m=2*h+1;if(this.nextRow+m>this.height)return u.w("LineAtlas out of space"),null;let x=0;for(let P=0;P<e.length;P++)x+=e[P];if(x!==0){const P=this.width/x,D=this.getDashRanges(e,this.width,P);i?this.addRoundDash(D,P,h):this.addRegularDash(D)}const M={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:x};return this.nextRow+=m,this.dirty=!0,M}bind(e){const i=e.gl;this.texture?(i.bindTexture(i.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,i.texSubImage2D(i.TEXTURE_2D,0,0,0,this.width,this.height,i.ALPHA,i.UNSIGNED_BYTE,this.data))):(this.texture=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.REPEAT),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.REPEAT),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texImage2D(i.TEXTURE_2D,0,i.ALPHA,this.width,this.height,0,i.ALPHA,i.UNSIGNED_BYTE,this.data))}}const wt="maplibre_preloaded_worker_pool";class Zt{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Zt.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.numActive()===0&&(this.workers.forEach(i=>{i.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[wt]}numActive(){return Object.keys(this.active).length}}const Ht=Math.floor(z.hardwareConcurrency/2);let zt,er;function ir(){return zt||(zt=new Zt),zt}Zt.workerCount=u.G(globalThis)?Math.max(Math.min(Ht,3),1):1;class Qr{constructor(e,i){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=i;const h=this.workerPool.acquire(i);for(let m=0;m<h.length;m++){const x=new u.H(h[m],i);x.name=`Worker ${m}`,this.actors.push(x)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,i){const h=[];for(const m of this.actors)h.push(m.sendAsync({type:e,data:i}));return Promise.all(h)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach(i=>{i.remove()}),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,i){for(const h of this.actors)h.registerMessageHandler(e,i)}}function br(){return er||(er=new Qr(ir(),u.J),er.registerMessageHandler("GR",(v,e,i)=>u.m(e,i))),er}function en(v,e){const i=u.K();return u.L(i,i,[1,1,0]),u.M(i,i,[.5*v.width,.5*v.height,1]),v.calculatePosMatrix?u.N(i,i,v.calculatePosMatrix(e.toUnwrapped())):i}function Fr(v,e,i,h,m,x,M){var P;const D=function(Z,ee,re){if(Z)for(const de of Z){const fe=ee[de];if(fe&&fe.source===re&&fe.type==="fill-extrusion")return!0}else for(const de in ee){const fe=ee[de];if(fe.source===re&&fe.type==="fill-extrusion")return!0}return!1}((P=m==null?void 0:m.layers)!==null&&P!==void 0?P:null,e,v.id),j=x.maxPitchScaleFactor(),U=v.tilesIn(h,j,D);U.sort(ln);const $=[];for(const Z of U)$.push({wrappedTileID:Z.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(e,i,v._state,Z.queryGeometry,Z.cameraQueryGeometry,Z.scale,m,x,j,en(v.transform,Z.tileID),M?(ee,re)=>M(Z.tileID,ee,re):void 0)});return function(Z,ee){for(const re in Z)for(const de of Z[re])Ln(de,ee);return Z}(function(Z){const ee={},re={};for(const de of Z){const fe=de.queryResults,me=de.wrappedTileID,_e=re[me]=re[me]||{};for(const Ae in fe){const Ee=fe[Ae],Pe=_e[Ae]=_e[Ae]||{},ze=ee[Ae]=ee[Ae]||[];for(const Ie of Ee)Pe[Ie.featureIndex]||(Pe[Ie.featureIndex]=!0,ze.push(Ie))}}return ee}($),v)}function ln(v,e){const i=v.tileID,h=e.tileID;return i.overscaledZ-h.overscaledZ||i.canonical.y-h.canonical.y||i.wrap-h.wrap||i.canonical.x-h.canonical.x}function Ln(v,e){const i=v.feature,h=e.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=h}function Dr(v,e,i){return u._(this,void 0,void 0,function*(){let h=v;if(v.url?h=(yield u.j(e.transformRequest(v.url,"Source"),i)).data:yield z.frameAsync(i),!h)return null;const m=u.O(u.e(h,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in h&&h.vector_layers&&(m.vectorLayerIds=h.vector_layers.map(x=>x.id)),m})}class pr{constructor(e,i){e&&(i?this.setSouthWest(e).setNorthEast(i):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof u.Q?new u.Q(e.lng,e.lat):u.Q.convert(e),this}setSouthWest(e){return this._sw=e instanceof u.Q?new u.Q(e.lng,e.lat):u.Q.convert(e),this}extend(e){const i=this._sw,h=this._ne;let m,x;if(e instanceof u.Q)m=e,x=e;else{if(!(e instanceof pr))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(pr.convert(e)):this.extend(u.Q.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(u.Q.convert(e)):this;if(m=e._sw,x=e._ne,!m||!x)return this}return i||h?(i.lng=Math.min(m.lng,i.lng),i.lat=Math.min(m.lat,i.lat),h.lng=Math.max(x.lng,h.lng),h.lat=Math.max(x.lat,h.lat)):(this._sw=new u.Q(m.lng,m.lat),this._ne=new u.Q(x.lng,x.lat)),this}getCenter(){return new u.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.Q(this.getWest(),this.getNorth())}getSouthEast(){return new u.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:i,lat:h}=u.Q.convert(e);let m=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&m}static convert(e){return e instanceof pr?e:e&&new pr(e)}static fromLngLat(e,i=0){const h=360*i/40075017,m=h/Math.cos(Math.PI/180*e.lat);return new pr(new u.Q(e.lng-m,e.lat-h),new u.Q(e.lng+m,e.lat+h))}adjustAntiMeridian(){const e=new u.Q(this._sw.lng,this._sw.lat),i=new u.Q(this._ne.lng,this._ne.lat);return new pr(e,e.lng>i.lng?new u.Q(i.lng+360,i.lat):i)}}class Kn{constructor(e,i,h){this.bounds=pr.convert(this.validateBounds(e)),this.minzoom=i||0,this.maxzoom=h||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const i=Math.pow(2,e.z),h=Math.floor(u.U(this.bounds.getWest())*i),m=Math.floor(u.S(this.bounds.getNorth())*i),x=Math.ceil(u.U(this.bounds.getEast())*i),M=Math.ceil(u.S(this.bounds.getSouth())*i);return e.x>=h&&e.x<x&&e.y>=m&&e.y<M}}class Un extends u.E{constructor(e,i,h,m){if(super(),this.id=e,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.O(i,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield Dr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(u.e(this,e),e.bounds&&(this.tileBounds=new Kn(e.bounds,this.minzoom,this.maxzoom)),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.l("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new u.k(e))}})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(e){return u._(this,void 0,void 0,function*(){const i=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h={request:this.map._requestManager.transformRequest(i,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};h.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(e.actor&&e.state!=="expired"){if(e.state==="loading")return new Promise((x,M)=>{e.reloadPromise={resolve:x,reject:M}})}else e.actor=this.dispatcher.getActor(),m="LT";e.abortController=new AbortController;try{const x=yield e.actor.sendAsync({type:m,data:h},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,x)}catch(x){if(delete e.abortController,e.aborted)return;if(x&&x.status!==404)throw x;this._afterTileLoadWorkerResponse(e,null)}})}_afterTileLoadWorkerResponse(e,i){if(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),i&&this.map._refreshExpiredTiles&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),e.reloadPromise){const h=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(h.resolve).catch(h.reject)}}abortTile(e){return u._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))})}unloadTile(e){return u._(this,void 0,void 0,function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Yn extends u.E{constructor(e,i,h,m){super(),this.id=e,this.dispatcher=h,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},i),u.e(this,u.O(i,["url","scheme","tileSize"]))}load(){return u._(this,arguments,void 0,function*(e=!1){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield Dr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,i&&(u.e(this,i),i.bounds&&(this.tileBounds=new Kn(i.bounds,this.minzoom,this.maxzoom)),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:e})))}catch(i){this._tileJSONRequest=null,this.fire(new u.k(i))}})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load(!0)}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}serialize(){return u.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return u._(this,void 0,void 0,function*(){const i=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const h=yield xe.getImage(this.map._requestManager.transformRequest(i,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(h&&h.data){this.map._refreshExpiredTiles&&h.cacheControl&&h.expires&&e.setExpiryData({cacheControl:h.cacheControl,expires:h.expires});const m=this.map.painter.context,x=m.gl,M=h.data;e.texture=this.map.painter.getTileTexture(M.width),e.texture?e.texture.update(M,{useMipmap:!0}):(e.texture=new Ke(m,M,x.RGBA,{useMipmap:!0}),e.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(h){if(delete e.abortController,e.aborted)e.state="unloaded";else if(h)throw e.state="errored",h}})}abortTile(e){return u._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)})}unloadTile(e){return u._(this,void 0,void 0,function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)})}hasTransition(){return!1}}class we extends Yn{constructor(e,i,h,m){super(e,i,h,m),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox",this.redFactor=i.redFactor,this.greenFactor=i.greenFactor,this.blueFactor=i.blueFactor,this.baseShift=i.baseShift}loadTile(e){return u._(this,void 0,void 0,function*(){const i=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h=this.map._requestManager.transformRequest(i,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const m=yield xe.getImage(h,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(m&&m.data){const x=m.data;this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&e.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const M=u.b(x)&&u.V()?x:yield this.readImageNow(x),P={type:this.type,uid:e.uid,source:this.id,rawImageData:M,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||e.state==="expired"){e.actor=this.dispatcher.getActor();const D=yield e.actor.sendAsync({type:"LDT",data:P});e.dem=D,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(m){if(delete e.abortController,e.aborted)e.state="unloaded";else if(m)throw e.state="errored",m}})}readImageNow(e){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.W()){const i=e.width+2,h=e.height+2;try{return new u.R({width:i,height:h},yield u.X(e,-1,-1,i,h))}catch{}}return z.getImageData(e,1)})}_getNeighboringTiles(e){const i=e.canonical,h=Math.pow(2,i.z),m=(i.x-1+h)%h,x=i.x===0?e.wrap-1:e.wrap,M=(i.x+1+h)%h,P=i.x+1===h?e.wrap+1:e.wrap,D={};return D[new u.Y(e.overscaledZ,x,i.z,m,i.y).key]={backfilled:!1},D[new u.Y(e.overscaledZ,P,i.z,M,i.y).key]={backfilled:!1},i.y>0&&(D[new u.Y(e.overscaledZ,x,i.z,m,i.y-1).key]={backfilled:!1},D[new u.Y(e.overscaledZ,e.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},D[new u.Y(e.overscaledZ,P,i.z,M,i.y-1).key]={backfilled:!1}),i.y+1<h&&(D[new u.Y(e.overscaledZ,x,i.z,m,i.y+1).key]={backfilled:!1},D[new u.Y(e.overscaledZ,e.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},D[new u.Y(e.overscaledZ,P,i.z,M,i.y+1).key]={backfilled:!1}),D}unloadTile(e){return u._(this,void 0,void 0,function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))})}}class Re extends u.E{constructor(e,i,h,m){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=h.getActor(),this.setEventedParent(m),this._data=i.data,this._options=u.e({},i),this._collectResourceTiming=i.collectResourceTiming,i.maxzoom!==void 0&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId,i.clusterMaxZoom!==void 0&&this.maxzoom<=i.clusterMaxZoom&&u.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${i.clusterMaxZoom}".`),this.workerOptions=u.e({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(i.buffer!==void 0?i.buffer:128),tolerance:this._pixelsToTileUnits(i.tolerance!==void 0?i.tolerance:.375),extent:u.Z,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:i.clusterMaxZoom!==void 0?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:u.Z,radius:this._pixelsToTileUnits(i.clusterRadius||50),log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(e){return e*(u.Z/this.tileSize)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return u._(this,void 0,void 0,function*(){const e=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})})}getCoordinatesFromGeometry(e){return e.type==="GeometryCollection"?e.geometries.map(i=>i.coordinates).flat(1/0):e.coordinates.flat(1/0)}getBounds(){return u._(this,void 0,void 0,function*(){const e=new pr,i=yield this.getData();let h;switch(i.type){case"FeatureCollection":h=i.features.map(m=>this.getCoordinatesFromGeometry(m.geometry)).flat(1/0);break;case"Feature":h=this.getCoordinatesFromGeometry(i.geometry);break;default:h=this.getCoordinatesFromGeometry(i)}if(h.length==0)return e;for(let m=0;m<h.length-1;m+=2)e.extend([h[m],h[m+1]]);return e})}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(e.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(e.clusterRadius)),e.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,i,h){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:i,offset:h}})}_updateWorkerData(e){return u._(this,void 0,void 0,function*(){const i=u.e({type:this.type},this.workerOptions);e?i.dataDiff=e:typeof this._data=="string"?(i.request=this.map._requestManager.transformRequest(z.resolveURL(this._data),"Source"),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.l("dataloading",{dataType:"source"}));try{const h=yield this.actor.sendAsync({type:"LD",data:i});if(this._pendingLoads--,this._removed||h.abandoned)return void this.fire(new u.l("dataabort",{dataType:"source"}));let m=null;h.resourceTiming&&h.resourceTiming[this.id]&&(m=h.resourceTiming[this.id].slice(0));const x={dataType:"source"};this._collectResourceTiming&&m&&m.length>0&&u.e(x,{resourceTiming:m}),this.fire(new u.l("data",Object.assign(Object.assign({},x),{sourceDataType:"metadata"}))),this.fire(new u.l("data",Object.assign(Object.assign({},x),{sourceDataType:"content"})))}catch(h){if(this._pendingLoads--,this._removed)return void this.fire(new u.l("dataabort",{dataType:"source"}));this.fire(new u.k(h))}})}loaded(){return this._pendingLoads===0}loadTile(e){return u._(this,void 0,void 0,function*(){const i=e.actor?"RT":"LT";e.actor=this.actor;const h={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};e.abortController=new AbortController;const m=yield this.actor.sendAsync({type:i,data:h},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(m,this.map.painter,i==="RT")})}abortTile(e){return u._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0})}unloadTile(e){return u._(this,void 0,void 0,function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class We extends u.E{constructor(e,i,h,m){super(),this.flippedWindingOrder=!1,this.id=e,this.dispatcher=h,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=i}load(e){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const i=yield xe.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,i&&i.data&&(this.image=i.data,e&&(this.coordinates=e),this._finishLoading())}catch(i){this._request=null,this._loaded=!0,this.fire(new u.k(i))}})}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const i=e.map(u.$.fromLngLat);var h;return this.tileID=function(m){let x=1/0,M=1/0,P=-1/0,D=-1/0;for(const Z of m)x=Math.min(x,Z.x),M=Math.min(M,Z.y),P=Math.max(P,Z.x),D=Math.max(D,Z.y);const j=Math.max(P-x,D-M),U=Math.max(0,Math.floor(-Math.log(j)/Math.LN2)),$=Math.pow(2,U);return new u.a1(U,Math.floor((x+P)/2*$),Math.floor((M+D)/2*$))}(i),this.terrainTileRanges=this._getOverlappingTileRanges(i),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=i.map(m=>this.tileID.getTilePoint(m)._round()),this.flippedWindingOrder=((h=this.tileCoords)[1].x-h[0].x)*(h[2].y-h[0].y)-(h[1].y-h[0].y)*(h[2].x-h[0].x)<0,this.fire(new u.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const e=this.map.painter.context,i=e.gl;this.texture||(this.texture=new Ke(e,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));let h=!1;for(const m in this.tiles){const x=this.tiles[m];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,h=!0)}h&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(e){let i=1/0,h=1/0,m=-1/0,x=-1/0;for(const P of e)i=Math.min(i,P.x),h=Math.min(h,P.y),m=Math.max(m,P.x),x=Math.max(x,P.y);const M={};for(let P=0;P<=u.a0;P++){const D=Math.pow(2,P),j=Math.floor(i*D),U=Math.floor(h*D),$=Math.floor(m*D),Z=Math.floor(x*D);M[P]={minTileX:j,minTileY:U,maxTileX:$,maxTileY:Z}}return M}}class vt extends We{constructor(e,i,h,m){super(e,i,h,m),this.roundZoom=!0,this.type="video",this.options=i}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const i of e.urls)this.urls.push(this.map._requestManager.transformRequest(i,"Source").url);try{const i=yield u.a2(this.urls);if(this._loaded=!0,!i)return;this.video=i,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(i){this.fire(new u.k(i))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const i=this.video.seekable;e<i.start(0)||e>i.end(0)?this.fire(new u.k(new u.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const e=this.map.painter.context,i=e.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new Ke(e,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));let h=!1;for(const m in this.tiles){const x=this.tiles[m];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,h=!0)}h&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class xt extends We{constructor(e,i,h,m){super(e,i,h,m),i.coordinates?Array.isArray(i.coordinates)&&i.coordinates.length===4&&!i.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(M=>typeof M!="number"))||this.fire(new u.k(new u.a3(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.k(new u.a3(`sources.${e}`,null,'missing required property "coordinates"'))),i.animate&&typeof i.animate!="boolean"&&this.fire(new u.k(new u.a3(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),i.canvas?typeof i.canvas=="string"||i.canvas instanceof HTMLCanvasElement||this.fire(new u.k(new u.a3(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.k(new u.a3(`sources.${e}`,null,'missing required property "canvas"'))),this.options=i,this.animate=i.animate===void 0||i.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const i=this.map.painter.context,h=i.gl;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ke(i,this.canvas,h.RGBA,{premultiply:!0});let m=!1;for(const x in this.tiles){const M=this.tiles[x];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture,m=!0)}m&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const Et={},Ut=v=>{switch(v){case"geojson":return Re;case"image":return We;case"raster":return Yn;case"raster-dem":return we;case"vector":return Un;case"video":return vt;case"canvas":return xt}return Et[v]},ur="RTLPluginLoaded";class _r extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=br()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch(i=>{throw this.status="error",i})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return u._(this,arguments,void 0,function*(i,h=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=z.resolveURL(i),!this.url)throw new Error(`requested url ${i} is invalid`);if(this.status==="unavailable"){if(!h)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.l(ur))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Zr=null;function Rn(){return Zr||(Zr=new _r),Zr}class Vn{constructor(e,i){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=u.a4(),this.uses=0,this.tileSize=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const i=e+this.timeAdded;i<this.fadeEndTime||(this.fadeEndTime=i)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,i,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(m,x){const M={};if(!x)return M;for(const P of m){const D=P.layerIds.map(j=>x.getLayer(j)).filter(Boolean);if(D.length!==0){P.layers=D,P.stateDependentLayerIds&&(P.stateDependentLayers=P.stateDependentLayerIds.map(j=>D.filter(U=>U.id===j)[0]));for(const j of D)M[j.id]=P}}return M}(e.buckets,i==null?void 0:i.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const x=this.buckets[m];if(x instanceof u.a6){if(this.hasSymbolBuckets=!0,!h)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const x=this.buckets[m];if(x instanceof u.a6&&x.hasRTLText){this.hasRTLText=!0,Rn().lazyLoad();break}}this.queryPadding=0;for(const m in this.buckets){const x=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(m).queryRadius(x))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new u.a5}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const h in this.buckets){const m=this.buckets[h];m.uploadPending()&&m.upload(e)}const i=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ke(e,this.imageAtlas.image,i.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ke(e,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,i,h,m,x,M,P,D,j,U,$){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:x,scale:M,tileSize:this.tileSize,pixelPosMatrix:U,transform:D,params:P,queryPadding:this.queryPadding*j,getElevation:$},e,i,h):{}}querySourceFeatures(e,i){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const m=h.loadVTLayers(),x=i&&i.sourceLayer?i.sourceLayer:"",M=m._geojsonTileLayer||m[x];if(!M)return;const P=u.a7(i&&i.filter),{z:D,x:j,y:U}=this.tileID.canonical,$={z:D,x:j,y:U};for(let Z=0;Z<M.length;Z++){const ee=M.feature(Z);if(P.needGeometry){const fe=u.a8(ee,!0);if(!P.filter(new u.C(this.tileID.overscaledZ),fe,this.tileID.canonical))continue}else if(!P.filter(new u.C(this.tileID.overscaledZ),ee))continue;const re=h.getId(ee,x),de=new u.a9(ee,D,j,U,re);de.tile=$,e.push(de)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const i=this.expirationTime;if(e.cacheControl){const h=u.aa(e.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const h=Date.now();let m=!1;if(this.expirationTime>h)m=!1;else if(i)if(this.expirationTime<i)m=!0;else{const x=this.expirationTime-i;x?this.expirationTime=h+Math.max(x,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,i){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0)return;const h=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!i.style.hasLayer(m))continue;const x=this.buckets[m],M=x.layers[0].sourceLayer||"_geojsonTileLayer",P=h[M],D=e[M];if(!P||!D||Object.keys(D).length===0)continue;x.update(D,P,this.imageAtlas&&this.imageAtlas.patternPositions||{});const j=i&&i.style&&i.style.getLayer(m);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<z.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=z.now()+e}setDependencies(e,i){const h={};for(const m of i)h[m]=!0;this.dependencies[e]=h}hasDependency(e,i){for(const h of e){const m=this.dependencies[h];if(m){for(const x of i)if(m[x])return!0}}return!1}}class zn{constructor(e,i){this.max=e,this.onRemove=i,this.reset()}reset(){for(const e in this.data)for(const i of this.data[e])i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value);return this.data={},this.order=[],this}add(e,i,h){const m=e.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const x={value:i,timeout:void 0};if(h!==void 0&&(x.timeout=setTimeout(()=>{this.remove(e,x)},h)),this.data[m].push(x),this.order.push(m),this.order.length>this.max){const M=this._getAndRemoveByKey(this.order[0]);M&&this.onRemove(M)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const i=this.data[e].shift();return i.timeout&&clearTimeout(i.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),i.value}getByKey(e){const i=this.data[e];return i?i[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,i){if(!this.has(e))return this;const h=e.wrapped().key,m=i===void 0?0:this.data[h].indexOf(i),x=this.data[h][m];return this.data[h].splice(m,1),x.timeout&&clearTimeout(x.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(x.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const i=this._getAndRemoveByKey(this.order[0]);i&&this.onRemove(i)}return this}filter(e){const i=[];for(const h in this.data)for(const m of this.data[h])e(m.value)||i.push(m);for(const h of i)this.remove(h.value.tileID,h)}}class Pi{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,i,h){const m=String(i);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][m]=this.stateChanges[e][m]||{},u.e(this.stateChanges[e][m],h),this.deletedStates[e]===null){this.deletedStates[e]={};for(const x in this.state[e])x!==m&&(this.deletedStates[e][x]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][m]===null){this.deletedStates[e][m]={};for(const x in this.state[e][m])h[x]||(this.deletedStates[e][m][x]=null)}else for(const x in h)this.deletedStates[e]&&this.deletedStates[e][m]&&this.deletedStates[e][m][x]===null&&delete this.deletedStates[e][m][x]}removeFeatureState(e,i,h){if(this.deletedStates[e]===null)return;const m=String(i);if(this.deletedStates[e]=this.deletedStates[e]||{},h&&i!==void 0)this.deletedStates[e][m]!==null&&(this.deletedStates[e][m]=this.deletedStates[e][m]||{},this.deletedStates[e][m][h]=null);else if(i!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][m])for(h in this.deletedStates[e][m]={},this.stateChanges[e][m])this.deletedStates[e][m][h]=null;else this.deletedStates[e][m]=null;else this.deletedStates[e]=null}getState(e,i){const h=String(i),m=u.e({},(this.state[e]||{})[h],(this.stateChanges[e]||{})[h]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const x=this.deletedStates[e][i];if(x===null)return{};for(const M in x)delete m[M]}return m}initializeTileState(e,i){e.setFeatureState(this.state,i)}coalesceChanges(e,i){const h={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const x={};for(const M in this.stateChanges[m])this.state[m][M]||(this.state[m][M]={}),u.e(this.state[m][M],this.stateChanges[m][M]),x[M]=this.state[m][M];h[m]=x}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const x={};if(this.deletedStates[m]===null)for(const M in this.state[m])x[M]={},this.state[m][M]={};else for(const M in this.deletedStates[m]){if(this.deletedStates[m][M]===null)this.state[m][M]={};else for(const P of Object.keys(this.deletedStates[m][M]))delete this.state[m][M][P];x[M]=this.state[m][M]}h[m]=h[m]||{},u.e(h[m],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const m in e)e[m].setFeatureState(h,i)}}const Ri=89.25;function nn(v,e){const i=u.ae(e.lat,-85.051129,u.af);return new u.P(u.U(e.lng)*v,u.S(i)*v)}function tn(v,e){return new u.$(e.x/v,e.y/v).toLngLat()}function je(v){return v.cameraToCenterDistance*Math.min(.85*Math.tan(u.ab(90-v.pitch)),Math.tan(u.ab(Ri-v.pitch)))}function ie(v,e){const i=v.canonical,h=e/u.ac(i.z),m=i.x+Math.pow(2,i.z)*v.wrap,x=u.ad(new Float64Array(16));return u.L(x,x,[m*h,i.y*h,0]),u.M(x,x,[h/u.Z,h/u.Z,1]),x}function ae(v,e,i,h,m){const x=u.$.fromLngLat(v,e),M=m*u.ag(1,v.lat),P=M*Math.cos(u.ab(i)),D=Math.sqrt(M*M-P*P),j=D*Math.sin(u.ab(-h)),U=D*Math.cos(u.ab(-h));return new u.$(x.x+j,x.y+U,x.z+P)}function he(v,e,i){const h=e.intersectsFrustum(v);if(!i)return h;const m=e.intersectsPlane(i);return h===0||m===0?0:h===2&&m===2?2:1}function be(v,e,i){let h=0;const m=(i-e)/10;for(let x=0;x<10;x++)h+=m*Math.pow(Math.cos(e+(x+.5)/10*(i-e)),v);return h}function se(v,e){return function(i,h,m,x,M){const P=2*((v-1)/u.ah(Math.cos(u.ab(Ri-M))/Math.cos(u.ab(Ri)))-1),D=Math.acos(m/x),j=2*be(P-1,0,u.ab(M/2)),U=Math.min(u.ab(Ri),D+u.ab(M/2)),$=be(P-1,Math.min(U,D-u.ab(M/2)),U),Z=Math.atan(h/m),ee=Math.hypot(h,m);let re=i;return re+=u.ah(x/ee/Math.max(.5,Math.cos(u.ab(M/2)))),re+=P*u.ah(Math.cos(Z))/2,re-=u.ah(Math.max(1,$/j/e))/2,re}}const Oe=se(9.314,3);function Ve(v,e){const i=(e.roundZoom?Math.round:Math.floor)(v.zoom+u.ah(v.tileSize/e.tileSize));return Math.max(0,i)}function Ce(v,e){const i=v.getCameraFrustum(),h=v.getClippingPlane(),m=v.screenPointToMercatorCoordinate(v.getCameraPoint()),x=u.$.fromLngLat(v.center,v.elevation);m.z=x.z+Math.cos(v.pitchInRadians)*v.cameraToCenterDistance/v.worldSize;const M=v.getCoveringTilesDetailsProvider(),P=M.allowVariableZoom(v,e),D=Ve(v,e),j=e.minzoom||0,U=e.maxzoom!==void 0?e.maxzoom:v.maxZoom,$=Math.min(Math.max(0,D),U),Z=Math.pow(2,$),ee=[Z*m.x,Z*m.y,0],re=[Z*x.x,Z*x.y,0],de=Math.hypot(x.x-m.x,x.y-m.y),fe=Math.abs(x.z-m.z),me=Math.hypot(de,fe),_e=Pe=>({zoom:0,x:0,y:0,wrap:Pe,fullyVisible:!1}),Ae=[],Ee=[];if(v.renderWorldCopies&&M.allowWorldCopies())for(let Pe=1;Pe<=3;Pe++)Ae.push(_e(-Pe)),Ae.push(_e(Pe));for(Ae.push(_e(0));Ae.length>0;){const Pe=Ae.pop(),ze=Pe.x,Ie=Pe.y;let $e=Pe.fullyVisible;const He={x:ze,y:Ie,z:Pe.zoom},at=M.getTileAABB(He,Pe.wrap,v.elevation,e);if(!$e){const Tt=he(i,at,h);if(Tt===0)continue;$e=Tt===2}const ot=M.distanceToTile2d(m.x,m.y,He,at);let rt=D;P&&(rt=(e.calculateTileZoom||Oe)(v.zoom+u.ah(v.tileSize/e.tileSize),ot,fe,me,v.fov)),rt=(e.roundZoom?Math.round:Math.floor)(rt),rt=Math.max(0,rt);const It=Math.min(rt,U);if(Pe.wrap=M.getWrap(x,He,Pe.wrap),Pe.zoom>=It){if(Pe.zoom<j)continue;const Tt=$-Pe.zoom,pt=ee[0]-.5-(ze<<Tt),Vt=ee[1]-.5-(Ie<<Tt),gr=e.reparseOverscaled?Math.max(Pe.zoom,rt):Pe.zoom;Ee.push({tileID:new u.Y(Pe.zoom===U?gr:Pe.zoom,Pe.wrap,Pe.zoom,ze,Ie),distanceSq:u.ai([re[0]-.5-ze,re[1]-.5-Ie]),tileDistanceToCamera:Math.sqrt(pt*pt+Vt*Vt)})}else for(let Tt=0;Tt<4;Tt++)Ae.push({zoom:Pe.zoom+1,x:(ze<<1)+Tt%2,y:(Ie<<1)+(Tt>>1),wrap:Pe.wrap,fullyVisible:$e})}return Ee.sort((Pe,ze)=>Pe.distanceSq-ze.distanceSq).map(Pe=>Pe.tileID)}class Ue extends u.E{constructor(e,i,h){super(),this.id=e,this.dispatcher=h,this.on("data",m=>this._dataHandler(m)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,x,M,P)=>{const D=new(Ut(x.type))(m,x,M,P);if(D.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${D.id}`);return D})(e,i,h,this),this._tiles={},this._cache=new zn(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Pi,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const i=this._tiles[e];if(i.state!=="loaded"&&i.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,i,h){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,i,h)}catch(m){e.state="errored",m.status!==404?this._source.fire(new u.k(m,{tile:e})):this.update(this.transform,this.terrain)}})}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new u.l("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const i in this._tiles){const h=this._tiles[i];h.upload(e),h.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(e=>e.tileID).sort(qe).map(e=>e.key)}getRenderableIds(e){const i=[];for(const h in this._tiles)this._isIdRenderable(h,e)&&i.push(this._tiles[h]);return e?i.sort((h,m)=>{const x=h.tileID,M=m.tileID,P=new u.P(x.canonical.x,x.canonical.y)._rotate(-this.transform.bearingInRadians),D=new u.P(M.canonical.x,M.canonical.y)._rotate(-this.transform.bearingInRadians);return x.overscaledZ-M.overscaledZ||D.y-P.y||D.x-P.x}).map(h=>h.tileID.key):i.map(h=>h.tileID).sort(qe).map(h=>h.key)}hasRenderableParent(e){const i=this.findLoadedParent(e,0);return!!i&&this._isIdRenderable(i.tileID.key)}_isIdRenderable(e,i){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(i||!this._tiles[e].holdingForFade())}reload(e){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)(e||this._tiles[i].state!=="errored")&&this._reloadTile(i,"reloading")}}_reloadTile(e,i){return u._(this,void 0,void 0,function*(){const h=this._tiles[e];h&&(h.state!=="loading"&&(h.state=i),yield this._loadTile(h,e,i))})}_tileLoaded(e,i,h){e.timeAdded=z.now(),h==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(i,e),this.getSource().type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new u.l("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const i=this.getRenderableIds();for(let m=0;m<i.length;m++){const x=i[m];if(e.neighboringTiles&&e.neighboringTiles[x]){const M=this.getTileByID(x);h(e,M),h(M,e)}}function h(m,x){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let M=x.tileID.canonical.x-m.tileID.canonical.x;const P=x.tileID.canonical.y-m.tileID.canonical.y,D=Math.pow(2,m.tileID.canonical.z),j=x.tileID.key;M===0&&P===0||Math.abs(P)>1||(Math.abs(M)>1&&(Math.abs(M+D)===1?M+=D:Math.abs(M-D)===1&&(M-=D)),x.dem&&m.dem&&(m.dem.backfillBorder(x.dem,M,P),m.neighboringTiles&&m.neighboringTiles[j]&&(m.neighboringTiles[j].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,i,h,m){for(const x in this._tiles){let M=this._tiles[x];if(m[x]||!M.hasData()||M.tileID.overscaledZ<=i||M.tileID.overscaledZ>h)continue;let P=M.tileID;for(;M&&M.tileID.overscaledZ>i+1;){const j=M.tileID.scaledTo(M.tileID.overscaledZ-1);M=this._tiles[j.key],M&&M.hasData()&&(P=j)}let D=P;for(;D.overscaledZ>i;)if(D=D.scaledTo(D.overscaledZ-1),e[D.key]||e[D.canonical.key]){m[P.key]=P;break}}}findLoadedParent(e,i){if(e.key in this._loadedParentTiles){const h=this._loadedParentTiles[e.key];return h&&h.tileID.overscaledZ>=i?h:null}for(let h=e.overscaledZ-1;h>=i;h--){const m=e.scaledTo(h),x=this._getLoadedTile(m);if(x)return x}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const i=this._tiles[e.key];return i&&i.hasData()?i:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const i=Math.ceil(e.width/this._source.tileSize)+1,h=Math.ceil(e.height/this._source.tileSize)+1,m=Math.floor(i*h*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(x)}handleWrapJump(e){const i=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,i){const h={};for(const m in this._tiles){const x=this._tiles[m];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+i),h[x.tileID.key]=x}this._tiles=h;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}_updateCoveredAndRetainedTiles(e,i,h,m,x,M){const P={},D={},j=Object.keys(e),U=z.now();for(const $ of j){const Z=e[$],ee=this._tiles[$];if(!ee||ee.fadeEndTime!==0&&ee.fadeEndTime<=U)continue;const re=this.findLoadedParent(Z,i),de=this.findLoadedSibling(Z),fe=re||de||null;fe&&(this._addTile(fe.tileID),P[fe.tileID.key]=fe.tileID),D[$]=Z}this._retainLoadedChildren(D,m,h,e);for(const $ in P)e[$]||(this._coveredTiles[$]=!0,e[$]=P[$]);if(M){const $={},Z={};for(const ee of x)this._tiles[ee.key].hasData()?$[ee.key]=ee:Z[ee.key]=ee;for(const ee in Z){const re=Z[ee].children(this._source.maxzoom);this._tiles[re[0].key]&&this._tiles[re[1].key]&&this._tiles[re[2].key]&&this._tiles[re[3].key]&&($[re[0].key]=e[re[0].key]=re[0],$[re[1].key]=e[re[1].key]=re[1],$[re[2].key]=e[re[2].key]=re[2],$[re[3].key]=e[re[3].key]=re[3],delete Z[ee])}for(const ee in Z){const re=Z[ee],de=this.findLoadedParent(re,this._source.minzoom),fe=this.findLoadedSibling(re),me=de||fe||null;if(me){$[me.tileID.key]=e[me.tileID.key]=me.tileID;for(const _e in $)$[_e].isChildOf(me.tileID)&&delete $[_e]}}for(const ee in this._tiles)$[ee]||(this._coveredTiles[ee]=!0)}}update(e,i){if(!this._sourceLoaded||this._paused)return;let h;this.transform=e,this.terrain=i,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(U=>new u.Y(U.canonical.z,U.wrap,U.canonical.z,U.canonical.x,U.canonical.y)):(h=Ce(e,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:i,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(h=h.filter(U=>this._source.hasTile(U)))):h=[];const m=Ve(e,this._source),x=Math.max(m-Ue.maxOverzooming,this._source.minzoom),M=Math.max(m+Ue.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const U={};for(const $ of h)if($.canonical.z>this._source.minzoom){const Z=$.scaledTo($.canonical.z-1);U[Z.key]=Z;const ee=$.scaledTo(Math.max(this._source.minzoom,Math.min($.canonical.z,5)));U[ee.key]=ee}h=h.concat(Object.values(U))}const P=h.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,P&&this.fire(new u.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const D=this._updateRetainedTiles(h,m);Fe(this._source.type)&&this._updateCoveredAndRetainedTiles(D,x,M,m,h,i);for(const U in D)this._tiles[U].clearFadeHold();const j=u.aj(this._tiles,D);for(const U of j){const $=this._tiles[U];$.hasSymbolBuckets&&!$.holdingForFade()?$.setHoldDuration(this.map._fadeDuration):$.hasSymbolBuckets&&!$.symbolFadeFinished()||this._removeTile(U)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,i){var h;const m={},x={},M=Math.max(i-Ue.maxOverzooming,this._source.minzoom),P=Math.max(i+Ue.maxUnderzooming,this._source.minzoom),D={};for(const j of e){const U=this._addTile(j);m[j.key]=j,U.hasData()||i<this._source.maxzoom&&(D[j.key]=j)}this._retainLoadedChildren(D,i,P,m);for(const j of e){let U=this._tiles[j.key];if(U.hasData())continue;if(i+1>this._source.maxzoom){const Z=j.children(this._source.maxzoom)[0],ee=this.getTile(Z);if(ee&&ee.hasData()){m[Z.key]=Z;continue}}else{const Z=j.children(this._source.maxzoom);if(m[Z[0].key]&&m[Z[1].key]&&m[Z[2].key]&&m[Z[3].key])continue}let $=U.wasRequested();for(let Z=j.overscaledZ-1;Z>=M;--Z){const ee=j.scaledTo(Z);if(x[ee.key])break;if(x[ee.key]=!0,U=this.getTile(ee),!U&&$&&(U=this._addTile(ee)),U){const re=U.hasData();if((re||!(!((h=this.map)===null||h===void 0)&&h.cancelPendingTileRequestsWhileZooming)||$)&&(m[ee.key]=ee),$=U.wasRequested(),re)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const i=[];let h,m=this._tiles[e].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){h=this._loadedParentTiles[m.key];break}i.push(m.key);const x=m.scaledTo(m.overscaledZ-1);if(h=this._getLoadedTile(x),h)break;m=x}for(const x of i)this._loadedParentTiles[x]=h}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const i=this._tiles[e].tileID,h=this._getLoadedTile(i);this._loadedSiblingTiles[i.key]=h}}_addTile(e){let i=this._tiles[e.key];if(i)return i;i=this._cache.getAndRemove(e),i&&(this._setTileReloadTimer(e.key,i),i.tileID=e,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,i)));const h=i;return i||(i=new Vn(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(i,e.key,i.state)),i.uses++,this._tiles[e.key]=i,h||this._source.fire(new u.l("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i}_setTileReloadTimer(e,i){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const h=i.getExpiryTimeout();h&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},h))}_removeTile(e){const i=this._tiles[e];i&&(i.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),i.uses>0||(i.hasData()&&i.state!=="reloading"?this._cache.add(i.tileID,i,i.getExpiryTimeout()):(i.aborted=!0,this._abortTile(i),this._unloadTile(i))))}_dataHandler(e){const i=e.sourceDataType;e.dataType==="source"&&i==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&e.dataType==="source"&&i==="content"&&(this.reload(e.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,i,h){const m=[],x=this.transform;if(!x)return m;const M=h?x.getCameraQueryGeometry(e):e,P=e.map(re=>x.screenPointToMercatorCoordinate(re,this.terrain)),D=M.map(re=>x.screenPointToMercatorCoordinate(re,this.terrain)),j=this.getIds();let U=1/0,$=1/0,Z=-1/0,ee=-1/0;for(const re of D)U=Math.min(U,re.x),$=Math.min($,re.y),Z=Math.max(Z,re.x),ee=Math.max(ee,re.y);for(let re=0;re<j.length;re++){const de=this._tiles[j[re]];if(de.holdingForFade())continue;const fe=x.getCoveringTilesDetailsProvider().allowWorldCopies()?de.tileID:de.tileID.unwrapTo(0),me=Math.pow(2,x.zoom-de.tileID.overscaledZ),_e=i*de.queryPadding*u.Z/de.tileSize/me,Ae=[fe.getTilePoint(new u.$(U,$)),fe.getTilePoint(new u.$(Z,ee))];if(Ae[0].x-_e<u.Z&&Ae[0].y-_e<u.Z&&Ae[1].x+_e>=0&&Ae[1].y+_e>=0){const Ee=P.map(ze=>fe.getTilePoint(ze)),Pe=D.map(ze=>fe.getTilePoint(ze));m.push({tile:de,tileID:fe,queryGeometry:Ee,cameraQueryGeometry:Pe,scale:me})}}return m}getVisibleCoordinates(e){const i=this.getRenderableIds(e).map(h=>this._tiles[h].tileID);return this.transform&&this.transform.populateCache(i),i}hasTransition(){if(this._source.hasTransition())return!0;if(Fe(this._source.type)){const e=z.now();for(const i in this._tiles)if(this._tiles[i].fadeEndTime>=e)return!0}return!1}setFeatureState(e,i,h){this._state.updateState(e=e||"_geojsonTileLayer",i,h)}removeFeatureState(e,i,h){this._state.removeFeatureState(e=e||"_geojsonTileLayer",i,h)}getFeatureState(e,i){return this._state.getState(e=e||"_geojsonTileLayer",i)}setDependencies(e,i,h){const m=this._tiles[e];m&&m.setDependencies(i,h)}reloadTilesForDependencies(e,i){for(const h in this._tiles)this._tiles[h].hasDependency(e,i)&&this._reloadTile(h,"reloading");this._cache.filter(h=>!h.hasDependency(e,i))}}function qe(v,e){const i=Math.abs(2*v.wrap)-+(v.wrap<0),h=Math.abs(2*e.wrap)-+(e.wrap<0);return v.overscaledZ-e.overscaledZ||h-i||e.canonical.y-v.canonical.y||e.canonical.x-v.canonical.x}function Fe(v){return v==="raster"||v==="image"||v==="video"}Ue.maxOverzooming=10,Ue.maxUnderzooming=3;class ft{constructor(e,i){this.reset(e,i)}reset(e,i){this.points=e||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(i||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=u.ae(e,0,1);let i=1,h=this._distances[i];const m=e*this.paddedLength+this.padding;for(;h<m&&i<this._distances.length;)h=this._distances[++i];const x=i-1,M=this._distances[x],P=h-M,D=P>0?(m-M)/P:0;return this.points[x].mult(1-D).add(this.points[i].mult(D))}}function Pt(v,e){let i=!0;return v==="always"||v!=="never"&&e!=="never"||(i=!1),i}class At{constructor(e,i,h){const m=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(e/h),this.yCellCount=Math.ceil(i/h);for(let M=0;M<this.xCellCount*this.yCellCount;M++)m.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=i,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/i,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,i,h,m,x){this._forEachCell(i,h,m,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(i),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(x)}insertCircle(e,i,h,m){this._forEachCell(i-m,h-m,i+m,h+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(i),this.circles.push(h),this.circles.push(m)}_insertBoxCell(e,i,h,m,x,M){this.boxCells[x].push(M)}_insertCircleCell(e,i,h,m,x,M){this.circleCells[x].push(M)}_query(e,i,h,m,x,M,P){if(h<0||e>this.width||m<0||i>this.height)return[];const D=[];if(e<=0&&i<=0&&this.width<=h&&this.height<=m){if(x)return[{key:null,x1:e,y1:i,x2:h,y2:m}];for(let j=0;j<this.boxKeys.length;j++)D.push({key:this.boxKeys[j],x1:this.bboxes[4*j],y1:this.bboxes[4*j+1],x2:this.bboxes[4*j+2],y2:this.bboxes[4*j+3]});for(let j=0;j<this.circleKeys.length;j++){const U=this.circles[3*j],$=this.circles[3*j+1],Z=this.circles[3*j+2];D.push({key:this.circleKeys[j],x1:U-Z,y1:$-Z,x2:U+Z,y2:$+Z})}}else this._forEachCell(e,i,h,m,this._queryCell,D,{hitTest:x,overlapMode:M,seenUids:{box:{},circle:{}}},P);return D}query(e,i,h,m){return this._query(e,i,h,m,!1,null)}hitTest(e,i,h,m,x,M){return this._query(e,i,h,m,!0,x,M).length>0}hitTestCircle(e,i,h,m,x){const M=e-h,P=e+h,D=i-h,j=i+h;if(P<0||M>this.width||j<0||D>this.height)return!1;const U=[];return this._forEachCell(M,D,P,j,this._queryCellCircle,U,{hitTest:!0,overlapMode:m,circle:{x:e,y:i,radius:h},seenUids:{box:{},circle:{}}},x),U.length>0}_queryCell(e,i,h,m,x,M,P,D){const{seenUids:j,hitTest:U,overlapMode:$}=P,Z=this.boxCells[x];if(Z!==null){const re=this.bboxes;for(const de of Z)if(!j.box[de]){j.box[de]=!0;const fe=4*de,me=this.boxKeys[de];if(e<=re[fe+2]&&i<=re[fe+3]&&h>=re[fe+0]&&m>=re[fe+1]&&(!D||D(me))&&(!U||!Pt($,me.overlapMode))&&(M.push({key:me,x1:re[fe],y1:re[fe+1],x2:re[fe+2],y2:re[fe+3]}),U))return!0}}const ee=this.circleCells[x];if(ee!==null){const re=this.circles;for(const de of ee)if(!j.circle[de]){j.circle[de]=!0;const fe=3*de,me=this.circleKeys[de];if(this._circleAndRectCollide(re[fe],re[fe+1],re[fe+2],e,i,h,m)&&(!D||D(me))&&(!U||!Pt($,me.overlapMode))){const _e=re[fe],Ae=re[fe+1],Ee=re[fe+2];if(M.push({key:me,x1:_e-Ee,y1:Ae-Ee,x2:_e+Ee,y2:Ae+Ee}),U)return!0}}}return!1}_queryCellCircle(e,i,h,m,x,M,P,D){const{circle:j,seenUids:U,overlapMode:$}=P,Z=this.boxCells[x];if(Z!==null){const re=this.bboxes;for(const de of Z)if(!U.box[de]){U.box[de]=!0;const fe=4*de,me=this.boxKeys[de];if(this._circleAndRectCollide(j.x,j.y,j.radius,re[fe+0],re[fe+1],re[fe+2],re[fe+3])&&(!D||D(me))&&!Pt($,me.overlapMode))return M.push(!0),!0}}const ee=this.circleCells[x];if(ee!==null){const re=this.circles;for(const de of ee)if(!U.circle[de]){U.circle[de]=!0;const fe=3*de,me=this.circleKeys[de];if(this._circlesCollide(re[fe],re[fe+1],re[fe+2],j.x,j.y,j.radius)&&(!D||D(me))&&!Pt($,me.overlapMode))return M.push(!0),!0}}}_forEachCell(e,i,h,m,x,M,P,D){const j=this._convertToXCellCoord(e),U=this._convertToYCellCoord(i),$=this._convertToXCellCoord(h),Z=this._convertToYCellCoord(m);for(let ee=j;ee<=$;ee++)for(let re=U;re<=Z;re++)if(x.call(this,e,i,h,m,this.xCellCount*re+ee,M,P,D))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,i,h,m,x,M){const P=m-e,D=x-i,j=h+M;return j*j>P*P+D*D}_circleAndRectCollide(e,i,h,m,x,M,P){const D=(M-m)/2,j=Math.abs(e-(m+D));if(j>D+h)return!1;const U=(P-x)/2,$=Math.abs(i-(x+U));if($>U+h)return!1;if(j<=D||$<=U)return!0;const Z=j-D,ee=$-U;return Z*Z+ee*ee<=h*h}}function Ft(v,e,i){const h=u.K();if(!v){const{vecSouth:$,vecEast:Z}=Je(e),ee=R();ee[0]=Z[0],ee[1]=Z[1],ee[2]=$[0],ee[3]=$[1],m=ee,(U=(M=(x=ee)[0])*(j=x[3])-(D=x[2])*(P=x[1]))&&(m[0]=j*(U=1/U),m[1]=-P*U,m[2]=-D*U,m[3]=M*U),h[0]=ee[0],h[1]=ee[1],h[4]=ee[2],h[5]=ee[3]}var m,x,M,P,D,j,U;return u.M(h,h,[1/i,1/i,1]),h}function lr(v,e,i,h){if(v){const m=u.K();if(!e){const{vecSouth:x,vecEast:M}=Je(i);m[0]=M[0],m[1]=M[1],m[4]=x[0],m[5]=x[1]}return u.M(m,m,[h,h,1]),m}return i.pixelsToClipSpaceMatrix}function Je(v){const e=Math.cos(v.rollInRadians),i=Math.sin(v.rollInRadians),h=Math.cos(v.pitchInRadians),m=Math.cos(v.bearingInRadians),x=Math.sin(v.bearingInRadians),M=u.ao();M[0]=-m*h*i-x*e,M[1]=-x*h*i+m*e;const P=u.ap(M);P<1e-9?u.aq(M):u.ar(M,M,1/P);const D=u.ao();D[0]=m*h*e-x*i,D[1]=x*h*e+m*i;const j=u.ap(D);return j<1e-9?u.aq(D):u.ar(D,D,1/j),{vecEast:D,vecSouth:M}}function Wt(v,e,i,h){let m;h?(m=[v,e,h(v,e),1],u.at(m,m,i)):(m=[v,e,0,1],Pr(m,m,i));const x=m[3];return{point:new u.P(m[0]/x,m[1]/x),signedDistanceFromCamera:x,isOccluded:!1}}function vr(v,e){return .5+v/e*.5}function Ur(v,e){return v.x>=-e[0]&&v.x<=e[0]&&v.y>=-e[1]&&v.y<=e[1]}function Cr(v,e,i,h,m,x,M,P,D,j,U,$,Z){const ee=i?v.textSizeData:v.iconSizeData,re=u.ak(ee,e.transform.zoom),de=[256/e.width*2+1,256/e.height*2+1],fe=i?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;fe.clear();const me=v.lineVertexArray,_e=i?v.text.placedSymbolArray:v.icon.placedSymbolArray,Ae=e.transform.width/e.transform.height;let Ee=!1;for(let Pe=0;Pe<_e.length;Pe++){const ze=_e.get(Pe);if(ze.hidden||ze.writingMode===u.al.vertical&&!Ee){wn(ze.numGlyphs,fe);continue}Ee=!1;const Ie=new u.P(ze.anchorX,ze.anchorY),$e={getElevation:Z,pitchedLabelPlaneMatrix:h,lineVertexArray:me,pitchWithMap:x,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:e.transform,tileAnchorPoint:Ie,unwrappedTileID:D,width:j,height:U,translation:$},He=Va(ze.anchorX,ze.anchorY,$e);if(!Ur(He.point,de)){wn(ze.numGlyphs,fe);continue}const at=vr(e.transform.cameraToCenterDistance,He.signedDistanceFromCamera),ot=u.am(ee,re,ze),rt=x?ot*e.transform.getPitchedTextCorrection(ze.anchorX,ze.anchorY,D)/at:ot*at,It=kt({projectionContext:$e,pitchedLabelPlaneMatrixInverse:m,symbol:ze,fontSize:rt,flip:!1,keepUpright:M,glyphOffsetArray:v.glyphOffsetArray,dynamicLayoutVertexArray:fe,aspectRatio:Ae,rotateToLine:P});Ee=It.useVertical,(It.notEnoughRoom||Ee||It.needsFlipping&&kt({projectionContext:$e,pitchedLabelPlaneMatrixInverse:m,symbol:ze,fontSize:rt,flip:!0,keepUpright:M,glyphOffsetArray:v.glyphOffsetArray,dynamicLayoutVertexArray:fe,aspectRatio:Ae,rotateToLine:P}).notEnoughRoom)&&wn(ze.numGlyphs,fe)}i?v.text.dynamicLayoutVertexBuffer.updateData(fe):v.icon.dynamicLayoutVertexBuffer.updateData(fe)}function tt(v,e,i,h,m,x,M,P){const D=x.glyphStartIndex+x.numGlyphs,j=x.lineStartIndex,U=x.lineStartIndex+x.lineLength,$=e.getoffsetX(x.glyphStartIndex),Z=e.getoffsetX(D-1),ee=Zn(v*$,i,h,m,x.segment,j,U,P,M);if(!ee)return null;const re=Zn(v*Z,i,h,m,x.segment,j,U,P,M);return re?P.projectionCache.anyProjectionOccluded?null:{first:ee,last:re}:null}function yt(v,e,i,h){return v===u.al.horizontal&&Math.abs(i.y-e.y)>Math.abs(i.x-e.x)*h?{useVertical:!0}:(v===u.al.vertical?e.y<i.y:e.x>i.x)?{needsFlipping:!0}:null}function kt(v){const{projectionContext:e,pitchedLabelPlaneMatrixInverse:i,symbol:h,fontSize:m,flip:x,keepUpright:M,glyphOffsetArray:P,dynamicLayoutVertexArray:D,aspectRatio:j,rotateToLine:U}=v,$=m/24,Z=h.lineOffsetX*$,ee=h.lineOffsetY*$;let re;if(h.numGlyphs>1){const de=h.glyphStartIndex+h.numGlyphs,fe=h.lineStartIndex,me=h.lineStartIndex+h.lineLength,_e=tt($,P,Z,ee,x,h,U,e);if(!_e)return{notEnoughRoom:!0};const Ae=ar(_e.first.point.x,_e.first.point.y,e,i),Ee=ar(_e.last.point.x,_e.last.point.y,e,i);if(M&&!x){const Pe=yt(h.writingMode,Ae,Ee,j);if(Pe)return Pe}re=[_e.first];for(let Pe=h.glyphStartIndex+1;Pe<de-1;Pe++)re.push(Zn($*P.getoffsetX(Pe),Z,ee,x,h.segment,fe,me,e,U));re.push(_e.last)}else{if(M&&!x){const fe=sn(e.tileAnchorPoint.x,e.tileAnchorPoint.y,e).point,me=h.lineStartIndex+h.segment+1,_e=new u.P(e.lineVertexArray.getx(me),e.lineVertexArray.gety(me)),Ae=sn(_e.x,_e.y,e),Ee=Ae.signedDistanceFromCamera>0?Ae.point:Hr(e.tileAnchorPoint,_e,fe,1,e),Pe=ar(fe.x,fe.y,e,i),ze=ar(Ee.x,Ee.y,e,i),Ie=yt(h.writingMode,Pe,ze,j);if(Ie)return Ie}const de=Zn($*P.getoffsetX(h.glyphStartIndex),Z,ee,x,h.segment,h.lineStartIndex,h.lineStartIndex+h.lineLength,e,U);if(!de||e.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};re=[de]}for(const de of re)u.as(D,de.point,de.angle);return{}}function Hr(v,e,i,h,m){const x=v.add(v.sub(e)._unit()),M=sn(x.x,x.y,m).point,P=i.sub(M);return i.add(P._mult(h/P.mag()))}function $n(v,e,i){const h=e.projectionCache;if(h.projections[v])return h.projections[v];const m=new u.P(e.lineVertexArray.getx(v),e.lineVertexArray.gety(v)),x=sn(m.x,m.y,e);if(x.signedDistanceFromCamera>0)return h.projections[v]=x.point,h.anyProjectionOccluded=h.anyProjectionOccluded||x.isOccluded,x.point;const M=v-i.direction;return Hr(i.distanceFromAnchor===0?e.tileAnchorPoint:new u.P(e.lineVertexArray.getx(M),e.lineVertexArray.gety(M)),m,i.previousVertex,i.absOffsetX-i.distanceFromAnchor+1,e)}function sn(v,e,i){const h=v+i.translation[0],m=e+i.translation[1];let x;return i.pitchWithMap?(x=Wt(h,m,i.pitchedLabelPlaneMatrix,i.getElevation),x.isOccluded=!1):(x=i.transform.projectTileCoordinates(h,m,i.unwrappedTileID,i.getElevation),x.point.x=(.5*x.point.x+.5)*i.width,x.point.y=(.5*-x.point.y+.5)*i.height),x}function ar(v,e,i,h){if(i.pitchWithMap){const m=[v,e,0,1];return u.at(m,m,h),i.transform.projectTileCoordinates(m[0]/m[3],m[1]/m[3],i.unwrappedTileID,i.getElevation).point}return{x:v/i.width*2-1,y:e/i.height*2-1}}function Va(v,e,i){return i.transform.projectTileCoordinates(v,e,i.unwrappedTileID,i.getElevation)}function yi(v,e,i){return v._unit()._perp()._mult(e*i)}function $a(v,e,i,h,m,x,M,P,D){if(P.projectionCache.offsets[v])return P.projectionCache.offsets[v];const j=i.add(e);if(v+D.direction<h||v+D.direction>=m)return P.projectionCache.offsets[v]=j,j;const U=$n(v+D.direction,P,D),$=yi(U.sub(i),M,D.direction),Z=i.add($),ee=U.add($);return P.projectionCache.offsets[v]=u.au(x,j,Z,ee)||j,P.projectionCache.offsets[v]}function Zn(v,e,i,h,m,x,M,P,D){const j=h?v-e:v+e;let U=j>0?1:-1,$=0;h&&(U*=-1,$=Math.PI),U<0&&($+=Math.PI);let Z,ee=U>0?x+m:x+m+1;P.projectionCache.cachedAnchorPoint?Z=P.projectionCache.cachedAnchorPoint:(Z=sn(P.tileAnchorPoint.x,P.tileAnchorPoint.y,P).point,P.projectionCache.cachedAnchorPoint=Z);let re,de,fe=Z,me=Z,_e=0,Ae=0;const Ee=Math.abs(j),Pe=[];let ze;for(;_e+Ae<=Ee;){if(ee+=U,ee<x||ee>=M)return null;_e+=Ae,me=fe,de=re;const He={absOffsetX:Ee,direction:U,distanceFromAnchor:_e,previousVertex:me};if(fe=$n(ee,P,He),i===0)Pe.push(me),ze=fe.sub(me);else{let at;const ot=fe.sub(me);at=ot.mag()===0?yi($n(ee+U,P,He).sub(fe),i,U):yi(ot,i,U),de||(de=me.add(at)),re=$a(ee,at,fe,x,M,de,i,P,He),Pe.push(de),ze=re.sub(de)}Ae=ze.mag()}const Ie=ze._mult((Ee-_e)/Ae)._add(de||me),$e=$+Math.atan2(fe.y-me.y,fe.x-me.x);return Pe.push(Ie),{point:Ie,angle:D?$e:0,path:Pe}}const sa=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function wn(v,e){for(let i=0;i<v;i++){const h=e.length;e.resize(h+4),e.float32.set(sa,3*h)}}function Pr(v,e,i){const h=e[0],m=e[1];return v[0]=i[0]*h+i[4]*m+i[12],v[1]=i[1]*h+i[5]*m+i[13],v[3]=i[3]*h+i[7]*m+i[15],v}const ut=100;class Js{constructor(e,i=new At(e.width+200,e.height+200,25),h=new At(e.width+200,e.height+200,25)){this.transform=e,this.grid=i,this.ignoredGrid=h,this.pitchFactor=Math.cos(e.pitch*Math.PI/180)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+ut,this.screenBottomBoundary=e.height+ut,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,i,h,m,x,M,P,D,j,U,$,Z){const ee=this.projectAndGetPerspectiveRatio(e.anchorPointX+D[0],e.anchorPointY+D[1],x,U,Z),re=h*ee.perspectiveRatio;let de;if(M||P)de=this._projectCollisionBox(e,re,m,x,M,P,D,ee,U,$,Z);else{const ze=ee.x+($?$.x*re:0),Ie=ee.y+($?$.y*re:0);de={allPointsOccluded:!1,box:[ze+e.x1*re,Ie+e.y1*re,ze+e.x2*re,Ie+e.y2*re]}}const[fe,me,_e,Ae]=de.box,Ee=M?de.allPointsOccluded:ee.isOccluded;let Pe=Ee;return Pe||(Pe=ee.perspectiveRatio<this.perspectiveRatioCutoff),Pe||(Pe=!this.isInsideGrid(fe,me,_e,Ae)),Pe||i!=="always"&&this.grid.hitTest(fe,me,_e,Ae,i,j)?{box:[fe,me,_e,Ae],placeable:!1,offscreen:!1,occluded:Ee}:{box:[fe,me,_e,Ae],placeable:!0,offscreen:this.isOffscreen(fe,me,_e,Ae),occluded:Ee}}placeCollisionCircles(e,i,h,m,x,M,P,D,j,U,$,Z,ee,re){const de=[],fe=new u.P(i.anchorX,i.anchorY),me=this.getPerspectiveRatio(fe.x,fe.y,M,re),_e=(j?x*this.transform.getPitchedTextCorrection(i.anchorX,i.anchorY,M)/me:x*me)/u.ay,Ae={getElevation:re,pitchedLabelPlaneMatrix:P,lineVertexArray:h,pitchWithMap:j,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:fe,unwrappedTileID:M,width:this.transform.width,height:this.transform.height,translation:ee},Ee=tt(_e,m,i.lineOffsetX*_e,i.lineOffsetY*_e,!1,i,!1,Ae);let Pe=!1,ze=!1,Ie=!0;if(Ee){const $e=.5*$*me+Z,He=new u.P(-100,-100),at=new u.P(this.screenRightBoundary,this.screenBottomBoundary),ot=new ft,rt=Ee.first,It=Ee.last;let Tt=[];for(let gr=rt.path.length-1;gr>=1;gr--)Tt.push(rt.path[gr]);for(let gr=1;gr<It.path.length;gr++)Tt.push(It.path[gr]);const pt=2.5*$e;if(j){const gr=this.projectPathToScreenSpace(Tt,Ae);Tt=gr.some(tr=>tr.signedDistanceFromCamera<=0)?[]:gr.map(tr=>tr.point)}let Vt=[];if(Tt.length>0){const gr=Tt[0].clone(),tr=Tt[0].clone();for(let pn=1;pn<Tt.length;pn++)gr.x=Math.min(gr.x,Tt[pn].x),gr.y=Math.min(gr.y,Tt[pn].y),tr.x=Math.max(tr.x,Tt[pn].x),tr.y=Math.max(tr.y,Tt[pn].y);Vt=gr.x>=He.x&&tr.x<=at.x&&gr.y>=He.y&&tr.y<=at.y?[Tt]:tr.x<He.x||gr.x>at.x||tr.y<He.y||gr.y>at.y?[]:u.av([Tt],He.x,He.y,at.x,at.y)}for(const gr of Vt){ot.reset(gr,.25*$e);let tr=0;tr=ot.length<=.5*$e?1:Math.ceil(ot.paddedLength/pt)+1;for(let pn=0;pn<tr;pn++){const Kr=pn/Math.max(tr-1,1),vn=ot.lerp(Kr),mn=vn.x+ut,Ir=vn.y+ut;de.push(mn,Ir,$e,0);const zr=mn-$e,Mn=Ir-$e,An=mn+$e,fi=Ir+$e;if(Ie=Ie&&this.isOffscreen(zr,Mn,An,fi),ze=ze||this.isInsideGrid(zr,Mn,An,fi),e!=="always"&&this.grid.hitTestCircle(mn,Ir,$e,e,U)&&(Pe=!0,!D))return{circles:[],offscreen:!1,collisionDetected:Pe}}}}return{circles:!D&&Pe||!ze||me<this.perspectiveRatioCutoff?[]:de,offscreen:Ie,collisionDetected:Pe}}projectPathToScreenSpace(e,i){const h=function(m,x){const M=u.K();return u.an(M,x.pitchedLabelPlaneMatrix),m.map(P=>{const D=Wt(P.x,P.y,M,x.getElevation),j=x.transform.projectTileCoordinates(D.point.x,D.point.y,x.unwrappedTileID,x.getElevation);return j.point.x=(.5*j.point.x+.5)*x.width,j.point.y=(.5*-j.point.y+.5)*x.height,j})}(e,i);return function(m){let x=0,M=0,P=0,D=0;for(let j=0;j<m.length;j++)m[j].isOccluded?(P=j+1,D=0):(D++,D>M&&(M=D,x=P));return m.slice(x,x+M)}(h)}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const i=[];let h=1/0,m=1/0,x=-1/0,M=-1/0;for(const U of e){const $=new u.P(U.x+ut,U.y+ut);h=Math.min(h,$.x),m=Math.min(m,$.y),x=Math.max(x,$.x),M=Math.max(M,$.y),i.push($)}const P=this.grid.query(h,m,x,M).concat(this.ignoredGrid.query(h,m,x,M)),D={},j={};for(const U of P){const $=U.key;if(D[$.bucketInstanceId]===void 0&&(D[$.bucketInstanceId]={}),D[$.bucketInstanceId][$.featureIndex])continue;const Z=[new u.P(U.x1,U.y1),new u.P(U.x2,U.y1),new u.P(U.x2,U.y2),new u.P(U.x1,U.y2)];u.aw(i,Z)&&(D[$.bucketInstanceId][$.featureIndex]=!0,j[$.bucketInstanceId]===void 0&&(j[$.bucketInstanceId]=[]),j[$.bucketInstanceId].push($.featureIndex))}return j}insertCollisionBox(e,i,h,m,x,M){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:x,collisionGroupID:M,overlapMode:i},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,i,h,m,x,M){const P=h?this.ignoredGrid:this.grid,D={bucketInstanceId:m,featureIndex:x,collisionGroupID:M,overlapMode:i};for(let j=0;j<e.length;j+=4)P.insertCircle(D,e[j],e[j+1],e[j+2])}projectAndGetPerspectiveRatio(e,i,h,m,x){if(x){let M;m?(M=[e,i,m(e,i),1],u.at(M,M,x)):(M=[e,i,0,1],Pr(M,M,x));const P=M[3];return{x:(M[0]/P+1)/2*this.transform.width+ut,y:(-M[1]/P+1)/2*this.transform.height+ut,perspectiveRatio:.5+this.transform.cameraToCenterDistance/P*.5,isOccluded:!1,signedDistanceFromCamera:P}}{const M=this.transform.projectTileCoordinates(e,i,h,m);return{x:(M.point.x+1)/2*this.transform.width+ut,y:(1-M.point.y)/2*this.transform.height+ut,perspectiveRatio:.5+this.transform.cameraToCenterDistance/M.signedDistanceFromCamera*.5,isOccluded:M.isOccluded,signedDistanceFromCamera:M.signedDistanceFromCamera}}}getPerspectiveRatio(e,i,h,m){const x=this.transform.projectTileCoordinates(e,i,h,m);return .5+this.transform.cameraToCenterDistance/x.signedDistanceFromCamera*.5}isOffscreen(e,i,h,m){return h<ut||e>=this.screenRightBoundary||m<ut||i>this.screenBottomBoundary}isInsideGrid(e,i,h,m){return h>=0&&e<this.gridRightBoundary&&m>=0&&i<this.gridBottomBoundary}getViewportMatrix(){const e=u.ad([]);return u.L(e,e,[-100,-100,0]),e}_projectCollisionBox(e,i,h,m,x,M,P,D,j,U,$){let Z=1,ee=0,re=0,de=1;const fe=e.anchorPointX+P[0],me=e.anchorPointY+P[1];if(M&&!x){const Tt=this.projectAndGetPerspectiveRatio(fe+1,me,m,j,$),pt=Tt.x-D.x,Vt=Math.atan((Tt.y-D.y)/pt)+(pt<0?Math.PI:0),gr=Math.sin(Vt),tr=Math.cos(Vt);Z=tr,ee=gr,re=-gr,de=tr}else if(!M&&x){const Tt=Je(this.transform);Z=Tt.vecEast[0],ee=Tt.vecEast[1],re=Tt.vecSouth[0],de=Tt.vecSouth[1]}let _e=D.x,Ae=D.y,Ee=i;x&&(_e=fe,Ae=me,Ee=Math.pow(2,-(this.transform.zoom-h.overscaledZ)),Ee*=this.transform.getPitchedTextCorrection(fe,me,m),U||(Ee*=u.ae(.5+D.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),U&&(_e+=Z*U.x*Ee+re*U.y*Ee,Ae+=ee*U.x*Ee+de*U.y*Ee);const Pe=e.x1*Ee,ze=e.x2*Ee,Ie=(Pe+ze)/2,$e=e.y1*Ee,He=e.y2*Ee,at=($e+He)/2,ot=[{offsetX:Pe,offsetY:$e},{offsetX:Ie,offsetY:$e},{offsetX:ze,offsetY:$e},{offsetX:ze,offsetY:at},{offsetX:ze,offsetY:He},{offsetX:Ie,offsetY:He},{offsetX:Pe,offsetY:He},{offsetX:Pe,offsetY:at}];let rt=[];for(const{offsetX:Tt,offsetY:pt}of ot)rt.push(new u.P(_e+Z*Tt+re*pt,Ae+ee*Tt+de*pt));let It=!1;if(x){const Tt=rt.map(pt=>this.projectAndGetPerspectiveRatio(pt.x,pt.y,m,j,$));It=Tt.some(pt=>!pt.isOccluded),rt=Tt.map(pt=>new u.P(pt.x,pt.y))}else It=!0;return{box:u.ax(rt),allPointsOccluded:!It}}}class Lo{constructor(e,i,h,m){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?i:-i))):m&&h?1:0,this.placed=h}isHidden(){return this.opacity===0&&!this.placed}}class wr{constructor(e,i,h,m,x){this.text=new Lo(e?e.text:null,i,h,x),this.icon=new Lo(e?e.icon:null,i,m,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class kn{constructor(e,i,h){this.text=e,this.icon=i,this.skipFade=h}}class _i{constructor(e,i,h,m,x){this.bucketInstanceId=e,this.featureIndex=i,this.sourceLayerIndex=h,this.bucketIndex=m,this.tileID=x}}class Rs{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const i=++this.maxGroupID;this.collisionGroups[e]={ID:i,predicate:h=>h.collisionGroupID===i}}return this.collisionGroups[e]}}function eo(v,e,i,h,m){const{horizontalAlign:x,verticalAlign:M}=u.aE(v);return new u.P(-(x-.5)*e+h[0]*m,-(M-.5)*i+h[1]*m)}class oa{constructor(e,i,h,m,x){this.transform=e.clone(),this.terrain=i,this.collisionIndex=new Js(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new Rs(m),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const i=this.terrain;return i?(h,m)=>i.getElevation(e,h,m):null}getBucketParts(e,i,h,m){const x=h.getBucket(i),M=h.latestFeatureIndex;if(!x||!M||i.id!==x.layerIds[0])return;const P=h.collisionBoxArray,D=x.layers[0].layout,j=x.layers[0].paint,U=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),$=h.tileSize/u.Z,Z=h.tileID.toUnwrapped(),ee=D.get("text-rotation-alignment")==="map",re=u.az(h,1,this.transform.zoom),de=u.aA(this.collisionIndex.transform,h,j.get("text-translate"),j.get("text-translate-anchor")),fe=u.aA(this.collisionIndex.transform,h,j.get("icon-translate"),j.get("icon-translate-anchor")),me=Ft(ee,this.transform,re);this.retainedQueryData[x.bucketInstanceId]=new _i(x.bucketInstanceId,M,x.sourceLayerIndex,x.index,h.tileID);const _e={bucket:x,layout:D,translationText:de,translationIcon:fe,unwrappedTileID:Z,pitchedLabelPlaneMatrix:me,scale:U,textPixelRatio:$,holdingForFade:h.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:u.ak(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(m)for(const Ae of x.sortKeyRanges){const{sortKey:Ee,symbolInstanceStart:Pe,symbolInstanceEnd:ze}=Ae;e.push({sortKey:Ee,symbolInstanceStart:Pe,symbolInstanceEnd:ze,parameters:_e})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:_e})}attemptAnchorPlacement(e,i,h,m,x,M,P,D,j,U,$,Z,ee,re,de,fe,me,_e,Ae,Ee){const Pe=u.aB[e.textAnchor],ze=[e.textOffset0,e.textOffset1],Ie=eo(Pe,h,m,ze,x),$e=this.collisionIndex.placeCollisionBox(i,Z,D,j,U,P,M,fe,$.predicate,Ae,Ie,Ee);if((!_e||this.collisionIndex.placeCollisionBox(_e,Z,D,j,U,P,M,me,$.predicate,Ae,Ie,Ee).placeable)&&$e.placeable){let He;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID].text&&(He=this.prevPlacement.variableOffsets[ee.crossTileID].anchor),ee.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ee.crossTileID]={textOffset:ze,width:h,height:m,anchor:Pe,textBoxScale:x,prevAnchor:He},this.markUsedJustification(re,Pe,ee,de),re.allowVerticalPlacement&&(this.markUsedOrientation(re,de,ee),this.placedOrientations[ee.crossTileID]=de),{shift:Ie,placedGlyphBoxes:$e}}}placeLayerBucketPart(e,i,h){const{bucket:m,layout:x,translationText:M,translationIcon:P,unwrappedTileID:D,pitchedLabelPlaneMatrix:j,textPixelRatio:U,holdingForFade:$,collisionBoxArray:Z,partiallyEvaluatedTextSize:ee,collisionGroup:re}=e.parameters,de=x.get("text-optional"),fe=x.get("icon-optional"),me=u.aC(x,"text-overlap","text-allow-overlap"),_e=me==="always",Ae=u.aC(x,"icon-overlap","icon-allow-overlap"),Ee=Ae==="always",Pe=x.get("text-rotation-alignment")==="map",ze=x.get("text-pitch-alignment")==="map",Ie=x.get("icon-text-fit")!=="none",$e=x.get("symbol-z-order")==="viewport-y",He=_e&&(Ee||!m.hasIconData()||fe),at=Ee&&(_e||!m.hasTextData()||de);!m.collisionArrays&&Z&&m.deserializeCollisionBoxes(Z);const ot=this.retainedQueryData[m.bucketInstanceId].tileID,rt=this._getTerrainElevationFunc(ot),It=this.transform.getFastPathSimpleProjectionMatrix(ot),Tt=(pt,Vt,gr)=>{var tr,pn;if(i[pt.crossTileID])return;if($)return void(this.placements[pt.crossTileID]=new kn(!1,!1,!1));let Kr=!1,vn=!1,mn=!0,Ir=null,zr={box:null,placeable:!1,offscreen:null,occluded:!1},Mn={placeable:!1},An=null,fi=null,wi=null,Ja=0,Zs=0,ra=0;Vt.textFeatureIndex?Ja=Vt.textFeatureIndex:pt.useRuntimeCollisionCircles&&(Ja=pt.featureIndex),Vt.verticalTextFeatureIndex&&(Zs=Vt.verticalTextFeatureIndex);const Ia=Vt.textBox;if(Ia){const Zi=Cn=>{let xn=u.al.horizontal;if(m.allowVerticalPlacement&&!Cn&&this.prevPlacement){const jn=this.prevPlacement.placedOrientations[pt.crossTileID];jn&&(this.placedOrientations[pt.crossTileID]=jn,xn=jn,this.markUsedOrientation(m,xn,pt))}return xn},qs=(Cn,xn)=>{if(m.allowVerticalPlacement&&pt.numVerticalGlyphVertices>0&&Vt.verticalTextBox){for(const jn of m.writingModes)if(jn===u.al.vertical?(zr=xn(),Mn=zr):zr=Cn(),zr&&zr.placeable)break}else zr=Cn()},ts=pt.textAnchorOffsetStartIndex,Ts=pt.textAnchorOffsetEndIndex;if(Ts===ts){const Cn=(xn,jn)=>{const Mr=this.collisionIndex.placeCollisionBox(xn,me,U,ot,D,ze,Pe,M,re.predicate,rt,void 0,It);return Mr&&Mr.placeable&&(this.markUsedOrientation(m,jn,pt),this.placedOrientations[pt.crossTileID]=jn),Mr};qs(()=>Cn(Ia,u.al.horizontal),()=>{const xn=Vt.verticalTextBox;return m.allowVerticalPlacement&&pt.numVerticalGlyphVertices>0&&xn?Cn(xn,u.al.vertical):{box:null,offscreen:null}}),Zi(zr&&zr.placeable)}else{let Cn=u.aB[(pn=(tr=this.prevPlacement)===null||tr===void 0?void 0:tr.variableOffsets[pt.crossTileID])===null||pn===void 0?void 0:pn.anchor];const xn=(Mr,Si,wo)=>{const ad=Mr.x2-Mr.x1,af=Mr.y2-Mr.y1,nh=pt.textBoxScale,sf=Ie&&Ae==="never"?Si:null;let Li=null,Ms=me==="never"?1:2,ih="never";Cn&&Ms++;for(let of=0;of<Ms;of++){for(let Ql=ts;Ql<Ts;Ql++){const Yu=m.textAnchorOffsets.get(Ql);if(Cn&&Yu.textAnchor!==Cn)continue;const Xu=this.attemptAnchorPlacement(Yu,Mr,ad,af,nh,Pe,ze,U,ot,D,re,ih,pt,m,wo,M,P,sf,rt);if(Xu&&(Li=Xu.placedGlyphBoxes,Li&&Li.placeable))return Kr=!0,Ir=Xu.shift,Li}Cn?Cn=null:ih=me}return h&&!Li&&(Li={box:this.collisionIndex.placeCollisionBox(Ia,"always",U,ot,D,ze,Pe,M,re.predicate,rt,void 0,It).box,offscreen:!1,placeable:!1,occluded:!1}),Li};qs(()=>xn(Ia,Vt.iconBox,u.al.horizontal),()=>{const Mr=Vt.verticalTextBox;return m.allowVerticalPlacement&&(!zr||!zr.placeable)&&pt.numVerticalGlyphVertices>0&&Mr?xn(Mr,Vt.verticalIconBox,u.al.vertical):{box:null,occluded:!0,offscreen:null}}),zr&&(Kr=zr.placeable,mn=zr.offscreen);const jn=Zi(zr&&zr.placeable);if(!Kr&&this.prevPlacement){const Mr=this.prevPlacement.variableOffsets[pt.crossTileID];Mr&&(this.variableOffsets[pt.crossTileID]=Mr,this.markUsedJustification(m,Mr.anchor,pt,jn))}}}if(An=zr,Kr=An&&An.placeable,mn=An&&An.offscreen,pt.useRuntimeCollisionCircles){const Zi=m.text.placedSymbolArray.get(pt.centerJustifiedTextSymbolIndex),qs=u.am(m.textSizeData,ee,Zi),ts=x.get("text-padding");fi=this.collisionIndex.placeCollisionCircles(me,Zi,m.lineVertexArray,m.glyphOffsetArray,qs,D,j,h,ze,re.predicate,pt.collisionCircleDiameter,ts,M,rt),fi.circles.length&&fi.collisionDetected&&!h&&u.w("Collisions detected, but collision boxes are not shown"),Kr=_e||fi.circles.length>0&&!fi.collisionDetected,mn=mn&&fi.offscreen}if(Vt.iconFeatureIndex&&(ra=Vt.iconFeatureIndex),Vt.iconBox){const Zi=qs=>this.collisionIndex.placeCollisionBox(qs,Ae,U,ot,D,ze,Pe,P,re.predicate,rt,Ie&&Ir?Ir:void 0,It);Mn&&Mn.placeable&&Vt.verticalIconBox?(wi=Zi(Vt.verticalIconBox),vn=wi.placeable):(wi=Zi(Vt.iconBox),vn=wi.placeable),mn=mn&&wi.offscreen}const es=de||pt.numHorizontalGlyphVertices===0&&pt.numVerticalGlyphVertices===0,xo=fe||pt.numIconVertices===0;es||xo?xo?es||(vn=vn&&Kr):Kr=vn&&Kr:vn=Kr=vn&&Kr;const bo=vn&&wi.placeable;if(Kr&&An.placeable&&this.collisionIndex.insertCollisionBox(An.box,me,x.get("text-ignore-placement"),m.bucketInstanceId,Mn&&Mn.placeable&&Zs?Zs:Ja,re.ID),bo&&this.collisionIndex.insertCollisionBox(wi.box,Ae,x.get("icon-ignore-placement"),m.bucketInstanceId,ra,re.ID),fi&&Kr&&this.collisionIndex.insertCollisionCircles(fi.circles,me,x.get("text-ignore-placement"),m.bucketInstanceId,Ja,re.ID),h&&this.storeCollisionData(m.bucketInstanceId,gr,Vt,An,wi,fi),pt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[pt.crossTileID]=new kn((Kr||He)&&!(An!=null&&An.occluded),(vn||at)&&!(wi!=null&&wi.occluded),mn||m.justReloaded),i[pt.crossTileID]=!0};if($e){if(e.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const pt=m.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Vt=pt.length-1;Vt>=0;--Vt){const gr=pt[Vt];Tt(m.symbolInstances.get(gr),m.collisionArrays[gr],gr)}}else for(let pt=e.symbolInstanceStart;pt<e.symbolInstanceEnd;pt++)Tt(m.symbolInstances.get(pt),m.collisionArrays[pt],pt);m.justReloaded=!1}storeCollisionData(e,i,h,m,x,M){if(h.textBox||h.iconBox){let P,D;this.collisionBoxArrays.has(e)?P=this.collisionBoxArrays.get(e):(P=new Map,this.collisionBoxArrays.set(e,P)),P.has(i)?D=P.get(i):(D={text:null,icon:null},P.set(i,D)),h.textBox&&(D.text=m.box),h.iconBox&&(D.icon=x.box)}if(M){let P=this.collisionCircleArrays[e];P===void 0&&(P=this.collisionCircleArrays[e]=[]);for(let D=0;D<M.circles.length;D+=4)P.push(M.circles[D+0]-ut),P.push(M.circles[D+1]-ut),P.push(M.circles[D+2]),P.push(M.collisionDetected?1:0)}}markUsedJustification(e,i,h,m){let x;x=m===u.al.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[u.aD(i)];const M=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];for(const P of M)P>=0&&(e.text.placedSymbolArray.get(P).crossTileID=x>=0&&P!==x?0:h.crossTileID)}markUsedOrientation(e,i,h){const m=i===u.al.horizontal||i===u.al.horizontalOnly?i:0,x=i===u.al.vertical?i:0,M=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];for(const P of M)e.text.placedSymbolArray.get(P).placedOrientation=m;h.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const i=this.prevPlacement;let h=!1;this.prevZoomAdjustment=i?i.zoomAdjustment(this.transform.zoom):0;const m=i?i.symbolFadeChange(e):1,x=i?i.opacities:{},M=i?i.variableOffsets:{},P=i?i.placedOrientations:{};for(const D in this.placements){const j=this.placements[D],U=x[D];U?(this.opacities[D]=new wr(U,m,j.text,j.icon),h=h||j.text!==U.text.placed||j.icon!==U.icon.placed):(this.opacities[D]=new wr(null,m,j.text,j.icon,j.skipFade),h=h||j.text||j.icon)}for(const D in x){const j=x[D];if(!this.opacities[D]){const U=new wr(j,m,!1,!1);U.isHidden()||(this.opacities[D]=U,h=h||j.text.placed||j.icon.placed)}}for(const D in M)this.variableOffsets[D]||!this.opacities[D]||this.opacities[D].isHidden()||(this.variableOffsets[D]=M[D]);for(const D in P)this.placedOrientations[D]||!this.opacities[D]||this.opacities[D].isHidden()||(this.placedOrientations[D]=P[D]);if(i&&i.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");h?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=i?i.lastPlacementChangeTime:e)}updateLayerOpacities(e,i){const h={};for(const m of i){const x=m.getBucket(e);x&&m.latestFeatureIndex&&e.id===x.layerIds[0]&&this.updateBucketOpacities(x,m.tileID,h,m.collisionBoxArray)}}updateBucketOpacities(e,i,h,m){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const x=e.layers[0],M=x.layout,P=new wr(null,0,!1,!1,!0),D=M.get("text-allow-overlap"),j=M.get("icon-allow-overlap"),U=x._unevaluatedLayout.hasValue("text-variable-anchor")||x._unevaluatedLayout.hasValue("text-variable-anchor-offset"),$=M.get("text-rotation-alignment")==="map",Z=M.get("text-pitch-alignment")==="map",ee=M.get("icon-text-fit")!=="none",re=new wr(null,0,D&&(j||!e.hasIconData()||M.get("icon-optional")),j&&(D||!e.hasTextData()||M.get("text-optional")),!0);!e.collisionArrays&&m&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(m);const de=(me,_e,Ae)=>{for(let Ee=0;Ee<_e/4;Ee++)me.opacityVertexArray.emplaceBack(Ae);me.hasVisibleVertices=me.hasVisibleVertices||Ae!==ds},fe=this.collisionBoxArrays.get(e.bucketInstanceId);for(let me=0;me<e.symbolInstances.length;me++){const _e=e.symbolInstances.get(me),{numHorizontalGlyphVertices:Ae,numVerticalGlyphVertices:Ee,crossTileID:Pe}=_e;let ze=this.opacities[Pe];h[Pe]?ze=P:ze||(ze=re,this.opacities[Pe]=ze),h[Pe]=!0;const Ie=_e.numIconVertices>0,$e=this.placedOrientations[_e.crossTileID],He=$e===u.al.vertical,at=$e===u.al.horizontal||$e===u.al.horizontalOnly;if(Ae>0||Ee>0){const rt=Tc(ze.text);de(e.text,Ae,He?ds:rt),de(e.text,Ee,at?ds:rt);const It=ze.text.isHidden();[_e.rightJustifiedTextSymbolIndex,_e.centerJustifiedTextSymbolIndex,_e.leftJustifiedTextSymbolIndex].forEach(Vt=>{Vt>=0&&(e.text.placedSymbolArray.get(Vt).hidden=It||He?1:0)}),_e.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(_e.verticalPlacedTextSymbolIndex).hidden=It||at?1:0);const Tt=this.variableOffsets[_e.crossTileID];Tt&&this.markUsedJustification(e,Tt.anchor,_e,$e);const pt=this.placedOrientations[_e.crossTileID];pt&&(this.markUsedJustification(e,"left",_e,pt),this.markUsedOrientation(e,pt,_e))}if(Ie){const rt=Tc(ze.icon),It=!(ee&&_e.verticalPlacedIconSymbolIndex&&He);_e.placedIconSymbolIndex>=0&&(de(e.icon,_e.numIconVertices,It?rt:ds),e.icon.placedSymbolArray.get(_e.placedIconSymbolIndex).hidden=ze.icon.isHidden()),_e.verticalPlacedIconSymbolIndex>=0&&(de(e.icon,_e.numVerticalIconVertices,It?ds:rt),e.icon.placedSymbolArray.get(_e.verticalPlacedIconSymbolIndex).hidden=ze.icon.isHidden())}const ot=fe&&fe.has(me)?fe.get(me):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const rt=e.collisionArrays[me];if(rt){let It=new u.P(0,0);if(rt.textBox||rt.verticalTextBox){let Tt=!0;if(U){const pt=this.variableOffsets[Pe];pt?(It=eo(pt.anchor,pt.width,pt.height,pt.textOffset,pt.textBoxScale),$&&It._rotate(Z?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Tt=!1}if(rt.textBox||rt.verticalTextBox){let pt;rt.textBox&&(pt=He),rt.verticalTextBox&&(pt=at),to(e.textCollisionBox.collisionVertexArray,ze.text.placed,!Tt||pt,ot.text,It.x,It.y)}}if(rt.iconBox||rt.verticalIconBox){const Tt=!!(!at&&rt.verticalIconBox);let pt;rt.iconBox&&(pt=Tt),rt.verticalIconBox&&(pt=!Tt),to(e.iconCollisionBox.collisionVertexArray,ze.icon.placed,pt,ot.icon,ee?It.x:0,ee?It.y:0)}}}}if(e.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);e.bucketInstanceId in this.collisionCircleArrays&&(e.collisionCircleArray=this.collisionCircleArrays[e.bucketInstanceId],delete this.collisionCircleArrays[e.bucketInstanceId])}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,i){const h=this.zoomAtLastRecencyCheck===i?1-this.zoomAdjustment(i):1;return this.zoomAtLastRecencyCheck=i,this.commitTime+this.fadeDuration*h>e}setStale(){this.stale=!0}}function to(v,e,i,h,m,x){h&&h.length!==0||(h=[0,0,0,0]);const M=h[0]-ut,P=h[1]-ut,D=h[2]-ut,j=h[3]-ut;v.emplaceBack(e?1:0,i?1:0,m||0,x||0,M,P),v.emplaceBack(e?1:0,i?1:0,m||0,x||0,D,P),v.emplaceBack(e?1:0,i?1:0,m||0,x||0,D,j),v.emplaceBack(e?1:0,i?1:0,m||0,x||0,M,j)}const wc=Math.pow(2,25),Sc=Math.pow(2,24),Is=Math.pow(2,17),fa=Math.pow(2,16),Ih=Math.pow(2,9),Dh=Math.pow(2,8),El=Math.pow(2,1);function Tc(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const e=v.placed?1:0,i=Math.floor(127*v.opacity);return i*wc+e*Sc+i*Is+e*fa+i*Ih+e*Dh+i*El+e}const ds=0;class Lh{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,i,h,m,x){const M=this._bucketParts;for(;this._currentTileIndex<e.length;)if(i.getBucketParts(M,m,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort((P,D)=>P.sortKey-D.sortKey));this._currentPartIndex<M.length;)if(i.placeLayerBucketPart(M[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,x())return!0;return!1}}class Yi{constructor(e,i,h,m,x,M,P,D){this.placement=new oa(e,i,M,P,D),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(e,i,h){const m=z.now(),x=()=>!this._forceFullPlacement&&z.now()-m>2;for(;this._currentPlacementIndex>=0;){const M=i[e[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=P)&&(!M.maxzoom||M.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new Lh(M)),this._inProgressLayer.continuePlacement(h[M.source],this.placement,this._showCollisionBoxes,M,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const ro=512/u.Z/2;class zo{constructor(e,i,h){this.tileID=e,this.bucketInstanceId=h,this._symbolsByKey={};const m=new Map;for(let x=0;x<i.length;x++){const M=i.get(x),P=M.key,D=m.get(P);D?D.push(M):m.set(P,[M])}for(const[x,M]of m){const P={positions:M.map(D=>({x:Math.floor(D.anchorX*ro),y:Math.floor(D.anchorY*ro)})),crossTileIDs:M.map(D=>D.crossTileID)};if(P.positions.length>128){const D=new u.aF(P.positions.length,16,Uint16Array);for(const{x:j,y:U}of P.positions)D.add(j,U);D.finish(),delete P.positions,P.index=D}this._symbolsByKey[x]=P}}getScaledCoordinates(e,i){const{x:h,y:m,z:x}=this.tileID.canonical,{x:M,y:P,z:D}=i.canonical,j=ro/Math.pow(2,D-x),U=(P*u.Z+e.anchorY)*j,$=m*u.Z*ro;return{x:Math.floor((M*u.Z+e.anchorX)*j-h*u.Z*ro),y:Math.floor(U-$)}}findMatches(e,i,h){const m=this.tileID.canonical.z<i.canonical.z?1:Math.pow(2,this.tileID.canonical.z-i.canonical.z);for(let x=0;x<e.length;x++){const M=e.get(x);if(M.crossTileID)continue;const P=this._symbolsByKey[M.key];if(!P)continue;const D=this.getScaledCoordinates(M,i);if(P.index){const j=P.index.range(D.x-m,D.y-m,D.x+m,D.y+m).sort();for(const U of j){const $=P.crossTileIDs[U];if(!h[$]){h[$]=!0,M.crossTileID=$;break}}}else if(P.positions)for(let j=0;j<P.positions.length;j++){const U=P.positions[j],$=P.crossTileIDs[j];if(Math.abs(U.x-D.x)<=m&&Math.abs(U.y-D.y)<=m&&!h[$]){h[$]=!0,M.crossTileID=$;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:e})=>e)}}class Mc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Pl{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const i=Math.round((e-this.lng)/360);if(i!==0)for(const h in this.indexes){const m=this.indexes[h],x={};for(const M in m){const P=m[M];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+i),x[P.tileID.key]=P}this.indexes[h]=x}this.lng=e}addBucket(e,i,h){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===i.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let x=0;x<i.symbolInstances.length;x++)i.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const m=this.usedCrossTileIDs[e.overscaledZ];for(const x in this.indexes){const M=this.indexes[x];if(Number(x)>e.overscaledZ)for(const P in M){const D=M[P];D.tileID.isChildOf(e)&&D.findMatches(i.symbolInstances,e,m)}else{const P=M[e.scaledTo(Number(x)).key];P&&P.findMatches(i.symbolInstances,e,m)}}for(let x=0;x<i.symbolInstances.length;x++){const M=i.symbolInstances.get(x);M.crossTileID||(M.crossTileID=h.generate(),m[M.crossTileID]=!0)}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new zo(e,i.symbolInstances,i.bucketInstanceId),!0}removeBucketCrossTileIDs(e,i){for(const h of i.getCrossTileIDsLists())for(const m of h)delete this.usedCrossTileIDs[e][m]}removeStaleBuckets(e){let i=!1;for(const h in this.indexes){const m=this.indexes[h];for(const x in m)e[m[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,m[x]),delete m[x],i=!0)}return i}}class ps{constructor(){this.layerIndexes={},this.crossTileIDs=new Mc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,i,h){let m=this.layerIndexes[e.id];m===void 0&&(m=this.layerIndexes[e.id]=new Pl);let x=!1;const M={};m.handleWrapJump(h);for(const P of i){const D=P.getBucket(e);D&&e.id===D.layerIds[0]&&(D.bucketInstanceId||(D.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(P.tileID,D,this.crossTileIDs)&&(x=!0),M[D.bucketInstanceId]=!0)}return m.removeStaleBuckets(M)&&(x=!0),x}pruneUnusedLayers(e){const i={};e.forEach(h=>{i[h]=!0});for(const h in this.layerIndexes)i[h]||delete this.layerIndexes[h]}}var ko="void main() {fragColor=vec4(1.0);}";const cr={prelude:Or(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Or("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Or("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Or(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Or(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Or(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Or(ko,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Or(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Or(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Or("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Or("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Or("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Or(ko,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Or(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Or(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Or(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Or(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Or(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Or(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Or(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Or(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Or(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Or(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Or(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Or(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Or(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Or(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Or("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Or("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Or("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Or("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Or(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Or("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Or(v,e){const i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=e.match(/in ([\w]+) ([\w]+)/g),m=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=x?x.concat(m):m,P={};return{fragmentSource:v=v.replace(i,(D,j,U,$,Z)=>(P[Z]=!0,j==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
in ${U} ${$} ${Z};
#else
uniform ${U} ${$} u_${Z};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Z}
    ${U} ${$} ${Z} = u_${Z};
#endif
`)),vertexSource:e=e.replace(i,(D,j,U,$,Z)=>{const ee=$==="float"?"vec2":"vec4",re=Z.match(/color/)?"color":ee;return P[Z]?j==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${U} ${ee} a_${Z};
out ${U} ${$} ${Z};
#else
uniform ${U} ${$} u_${Z};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = a_${Z};
#else
    ${U} ${$} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = unpack_mix_${re}(a_${Z}, u_${Z}_t);
#else
    ${U} ${$} ${Z} = u_${Z};
#endif
`:j==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${U} ${ee} a_${Z};
#else
uniform ${U} ${$} u_${Z};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${U} ${$} ${Z} = a_${Z};
#else
    ${U} ${$} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${U} ${$} ${Z} = unpack_mix_${re}(a_${Z}, u_${Z}_t);
#else
    ${U} ${$} ${Z} = u_${Z};
#endif
`}),staticAttributes:h,staticUniforms:M}}class Oo{constructor(e,i,h){this.vertexBuffer=e,this.indexBuffer=i,this.segments=h}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Za=u.aG([{name:"a_pos",type:"Int16",components:2}]);const Bi="#define PROJECTION_MERCATOR",ji="mercator";class On{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return ji}get shaderDefine(){return Bi}get shaderPreludeCode(){return cr.projectionMercator}get vertexShaderPreludeCode(){return cr.projectionMercator.vertexSource}get subdivisionGranularity(){return u.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(e){}getMeshFromTileID(e,i,h,m,x){if(this._cachedMesh)return this._cachedMesh;const M=new u.aI;M.emplaceBack(0,0),M.emplaceBack(u.Z,0),M.emplaceBack(0,u.Z),M.emplaceBack(u.Z,u.Z);const P=e.createVertexBuffer(M,Za.members),D=u.aJ.simpleSegment(0,0,4,2),j=new u.aK;j.emplaceBack(1,0,2),j.emplaceBack(1,2,3);const U=e.createIndexBuffer(j);return this._cachedMesh=new Oo(P,U,D),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(e){}}class no{constructor(e=0,i=0,h=0,m=0){if(isNaN(e)||e<0||isNaN(i)||i<0||isNaN(h)||h<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=i,this.left=h,this.right=m}interpolate(e,i,h){return i.top!=null&&e.top!=null&&(this.top=u.B.number(e.top,i.top,h)),i.bottom!=null&&e.bottom!=null&&(this.bottom=u.B.number(e.bottom,i.bottom,h)),i.left!=null&&e.left!=null&&(this.left=u.B.number(e.left,i.left,h)),i.right!=null&&e.right!=null&&(this.right=u.B.number(e.right,i.right,h)),this}getCenter(e,i){const h=u.ae((this.left+e-this.right)/2,0,e),m=u.ae((this.top+i-this.bottom)/2,0,i);return new u.P(h,m)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new no(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function ui(v,e){if(!v.renderWorldCopies||v.lngRange)return;const i=e.lng-v.center.lng;e.lng+=i>180?-360:i<-180?360:0}function Xi(v){return Math.max(0,Math.floor(v))}class ei{constructor(e,i,h,m,x,M){this._callbacks=e,this._tileSize=512,this._renderWorldCopies=M===void 0||!!M,this._minZoom=i||0,this._maxZoom=h||22,this._minPitch=m??0,this._maxPitch=x??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new u.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Xi(this._zoom),this._scale=u.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new no,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(e,i,h){this._latRange=e.latRange,this._lngRange=e.lngRange,this._width=e.width,this._height=e.height,this._center=e.center,this._elevation=e.elevation,this._minElevationForCurrentTile=e.minElevationForCurrentTile,this._zoom=e.zoom,this._tileZoom=Xi(this._zoom),this._scale=u.ac(this._zoom),this._bearingInRadians=e.bearingInRadians,this._fovInRadians=e.fovInRadians,this._pitchInRadians=e.pitchInRadians,this._rollInRadians=e.rollInRadians,this._unmodified=e.unmodified,this._edgeInsets=new no(e.padding.top,e.padding.bottom,e.padding.left,e.padding.right),this._minZoom=e.minZoom,this._maxZoom=e.maxZoom,this._minPitch=e.minPitch,this._maxPitch=e.maxPitch,this._renderWorldCopies=e.renderWorldCopies,this._cameraToCenterDistance=e.cameraToCenterDistance,this._nearZ=e.nearZ,this._farZ=e.farZ,this._autoCalculateNearFarZ=!h&&e.autoCalculateNearFarZ,i&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(e){this._minElevationForCurrentTile=e}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(e){this._minZoom!==e&&(this._minZoom=e,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(e){this._minPitch!==e&&(this._minPitch=e,this.setPitch(Math.max(this.pitch,e)))}get maxPitch(){return this._maxPitch}setMaxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.setPitch(Math.min(this.pitch,e)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(e){const i=u.aL(e,-180,180)*Math.PI/180;var h,m,x,M,P,D,j,U,$;this._bearingInRadians!==i&&(this._unmodified=!1,this._bearingInRadians=i,this._calcMatrices(),this._rotationMatrix=R(),h=this._rotationMatrix,x=-this._bearingInRadians,M=(m=this._rotationMatrix)[0],P=m[1],D=m[2],j=m[3],U=Math.sin(x),$=Math.cos(x),h[0]=M*$+D*U,h[1]=P*$+j*U,h[2]=M*-U+D*$,h[3]=P*-U+j*$)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(e){const i=u.ae(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==i&&(this._unmodified=!1,this._pitchInRadians=i,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(e){const i=e/180*Math.PI;this._rollInRadians!==i&&(this._unmodified=!1,this._rollInRadians=i,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return u.aM(this._fovInRadians)}setFov(e){e=u.ae(e,.1,150),this.fov!==e&&(this._unmodified=!1,this._fovInRadians=u.ab(e),this._calcMatrices())}get zoom(){return this._zoom}setZoom(e){const i=this.getConstrained(this._center,e).zoom;this._zoom!==i&&(this._unmodified=!1,this._zoom=i,this._tileZoom=Math.max(0,Math.floor(i)),this._scale=u.ac(i),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(e,i){this._autoCalculateNearFarZ=!1,this._nearZ=e,this._farZ=i,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,i,h){this._unmodified=!1,this._edgeInsets.interpolate(e,i,h),this._constrain(),this._calcMatrices()}resize(e,i,h=!0){this._width=e,this._height=i,h&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new pr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(e){e?(this._lngRange=[e.getWest(),e.getEast()],this._latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,u.af])}getConstrained(e,i){return this._callbacks.getConstrained(e,i)}getCameraQueryGeometry(e,i){if(i.length===1)return[i[0],e];{let h=e.x,m=e.y,x=e.x,M=e.y;for(const P of i)h=Math.min(h,P.x),m=Math.min(m,P.y),x=Math.max(x,P.x),M=Math.max(M,P.y);return[new u.P(h,m),new u.P(x,m),new u.P(x,M),new u.P(h,M),new u.P(h,m)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:i,zoom:h}=this.getConstrained(this.center,this.zoom);this.setCenter(i),this.setZoom(h),this._unmodified=e,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let e=u.ad(new Float64Array(16));u.M(e,e,[this._width/2,-this._height/2,1]),u.L(e,e,[1,-1,0]),this._clipSpaceToPixelsMatrix=e,e=u.ad(new Float64Array(16)),u.M(e,e,[1,-1,1]),u.L(e,e,[-1,-1,0]),u.M(e,e,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=e,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(e,i,h,m){const x=h!==void 0?h:this.bearing,M=m=m!==void 0?m:this.pitch,P=u.$.fromLngLat(e,i),D=-Math.cos(u.ab(M)),j=Math.sin(u.ab(M)),U=j*Math.sin(u.ab(x)),$=-j*Math.cos(u.ab(x));let Z=this.elevation;const ee=i-Z;let re;D*ee>=0||Math.abs(D)<.1?(re=1e4,Z=i+re*D):re=-ee/D;let de,fe,me=u.aN(1,P.y),_e=0;do{if(_e+=1,_e>10)break;fe=re/me,de=new u.$(P.x+U*fe,P.y+$*fe),me=1/de.meterInMercatorCoordinateUnits()}while(Math.abs(re-fe*me)>1e-12);return{center:de.toLngLat(),elevation:Z,zoom:u.ah(this.height/2/Math.tan(this.fovInRadians/2)/fe/this.tileSize)}}recalculateZoomAndCenter(e){if(this.elevation-e==0)return;const i=u.ag(1,this.center.lat)*this.worldSize,h=this.cameraToCenterDistance/i,m=u.$.fromLngLat(this.center,this.elevation),x=ae(this.center,this.elevation,this.pitch,this.bearing,h);this._elevation=e;const M=this.calculateCenterFromCameraLngLatAlt(x.toLngLat(),u.aN(x.z,m.y),this.bearing,this.pitch);this._elevation=M.elevation,this._center=M.center,this.setZoom(M.zoom)}getCameraPoint(){const e=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(e*Math.sin(this.rollInRadians),e*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const e=u.ag(1,this.center.lat)*this.worldSize;return ae(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/e).toLngLat()}getMercatorTileCoordinates(e){if(!e)return[0,0,1,1];const i=e.canonical.z>=0?1<<e.canonical.z:Math.pow(2,e.canonical.z);return[e.canonical.x/i,e.canonical.y/i,1/i/u.Z,1/i/u.Z]}}class da{constructor(e,i){this.min=e,this.max=i,this.center=u.aO([],u.aP([],this.min,this.max),.5)}quadrant(e){const i=[e%2==0,e<2],h=u.aQ(this.min),m=u.aQ(this.max);for(let x=0;x<i.length;x++)h[x]=i[x]?this.min[x]:this.center[x],m[x]=i[x]?this.center[x]:this.max[x];return m[2]=this.max[2],new da(h,m)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersectsFrustum(e){let i=!0;for(let h=0;h<e.planes.length;h++){const m=this.intersectsPlane(e.planes[h]);if(m===0)return 0;m===1&&(i=!1)}return i?2:e.aabb.min[0]>this.max[0]||e.aabb.min[1]>this.max[1]||e.aabb.min[2]>this.max[2]||e.aabb.max[0]<this.min[0]||e.aabb.max[1]<this.min[1]||e.aabb.max[2]<this.min[2]?0:1}intersectsPlane(e){let i=e[3],h=e[3];for(let m=0;m<3;m++)e[m]>0?(i+=e[m]*this.min[m],h+=e[m]*this.max[m]):(h+=e[m]*this.min[m],i+=e[m]*this.max[m]);return i>=0?2:h<0?0:1}}class Rl{distanceToTile2d(e,i,h,m){const x=m.distanceX([e,i]),M=m.distanceY([e,i]);return Math.hypot(x,M)}getWrap(e,i,h){return h}getTileAABB(e,i,h,m){var x,M;let P=h,D=h;if(m.terrain){const U=new u.Y(e.z,i,e.z,e.x,e.y),$=m.terrain.getMinMaxElevation(U);P=(x=$.minElevation)!==null&&x!==void 0?x:h,D=(M=$.maxElevation)!==null&&M!==void 0?M:h}const j=1<<e.z;return new da([i+e.x/j,e.y/j,P],[i+(e.x+1)/j,(e.y+1)/j,D])}allowVariableZoom(e,i){const h=e.fov*(Math.abs(Math.cos(e.rollInRadians))*e.height+Math.abs(Math.sin(e.rollInRadians))*e.width)/e.height,m=u.ae(78.5-h/2,0,60);return!!i.terrain||e.pitch>m}allowWorldCopies(){return!0}recalculateCache(){}}class Sn{constructor(e,i,h){this.points=e,this.planes=i,this.aabb=h}static fromInvProjectionMatrix(e,i=1,h=0){const m=Math.pow(2,h),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(j=>{const U=1/(j=u.at([],j,e))[3]/i*m;return u.aR(j,j,[U,U,1/j[3],U])}),M=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(j=>{const U=u.aS([],x[j[0]],x[j[1]]),$=u.aS([],x[j[2]],x[j[1]]),Z=u.aT([],u.aU([],U,$)),ee=-u.aV(Z,x[j[1]]);return Z.concat(ee)}),P=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],D=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const j of x)for(let U=0;U<3;U++)P[U]=Math.min(P[U],j[U]),D[U]=Math.max(D[U],j[U]);return new Sn(x,M,new da(P,D))}}class qa{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,i,h){return this._helper.interpolatePadding(e,i,h)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,i,h=!0){this._helper.resize(e,i,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,i){this._helper.overrideNearFarZ(e,i)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e,i){}constructor(e,i,h,m,x){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new ei({calcMatrices:()=>{this._calcMatrices()},getConstrained:(M,P)=>this.getConstrained(M,P)},e,i,h,m,x),this._coveringTilesDetailsProvider=new Rl}clone(){const e=new qa;return e.apply(this),e}apply(e,i,h){this._helper.apply(e,i,h)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(e){const i=[new u.aW(0,e)];if(this._helper._renderWorldCopies){const h=this.screenPointToMercatorCoordinate(new u.P(0,0)),m=this.screenPointToMercatorCoordinate(new u.P(this._helper._width,0)),x=this.screenPointToMercatorCoordinate(new u.P(this._helper._width,this._helper._height)),M=this.screenPointToMercatorCoordinate(new u.P(0,this._helper._height)),P=Math.floor(Math.min(h.x,m.x,x.x,M.x)),D=Math.floor(Math.max(h.x,m.x,x.x,M.x)),j=1;for(let U=P-j;U<=D+j;U++)U!==0&&i.push(new u.aW(U,e))}return i}getCameraFrustum(){return Sn.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){const i=this.screenPointToLocation(this.centerPoint,e),h=e?e.getElevationForLngLatZoom(i,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(h)}setLocationAtPoint(e,i){const h=u.ag(this.elevation,this.center.lat),m=this.screenPointToMercatorCoordinateAtZ(i,h),x=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,h),M=u.$.fromLngLat(e),P=new u.$(M.x-(m.x-x.x),M.y-(m.y-x.y));this.setCenter(P==null?void 0:P.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(e,i){return i?this.coordinatePoint(u.$.fromLngLat(e),i.getElevationForLngLatZoom(e,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(u.$.fromLngLat(e))}screenPointToLocation(e,i){var h;return(h=this.screenPointToMercatorCoordinate(e,i))===null||h===void 0?void 0:h.toLngLat()}screenPointToMercatorCoordinate(e,i){if(i){const h=i.pointCoordinate(e);if(h!=null)return h}return this.screenPointToMercatorCoordinateAtZ(e)}screenPointToMercatorCoordinateAtZ(e,i){const h=i||0,m=[e.x,e.y,0,1],x=[e.x,e.y,1,1];u.at(m,m,this._pixelMatrixInverse),u.at(x,x,this._pixelMatrixInverse);const M=m[3],P=x[3],D=m[1]/M,j=x[1]/P,U=m[2]/M,$=x[2]/P,Z=U===$?0:(h-U)/($-U);return new u.$(u.B.number(m[0]/M,x[0]/P,Z)/this.worldSize,u.B.number(D,j,Z)/this.worldSize,h)}coordinatePoint(e,i=0,h=this._pixelMatrix){const m=[e.x*this.worldSize,e.y*this.worldSize,i,1];return u.at(m,m,h),new u.P(m[0]/m[3],m[1]/m[3])}getBounds(){const e=Math.max(0,this._helper._height/2-je(this));return new pr().extend(this.screenPointToLocation(new u.P(0,e))).extend(this.screenPointToLocation(new u.P(this._helper._width,e))).extend(this.screenPointToLocation(new u.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new u.P(0,this._helper._height)))}isPointOnMapSurface(e,i){return i?i.pointCoordinate(e)!=null:e.y>this.height/2-je(this)}calculatePosMatrix(e,i=!1,h){var m;const x=(m=e.key)!==null&&m!==void 0?m:u.aX(e.wrap,e.canonical.z,e.canonical.z,e.canonical.x,e.canonical.y),M=i?this._alignedPosMatrixCache:this._posMatrixCache;if(M.has(x)){const j=M.get(x);return h?j.f32:j.f64}const P=ie(e,this.worldSize);u.N(P,i?this._alignedProjMatrix:this._viewProjMatrix,P);const D={f64:P,f32:new Float32Array(P)};return M.set(x,D),h?D.f32:D.f64}calculateFogMatrix(e){const i=e.key,h=this._fogMatrixCacheF32;if(h.has(i))return h.get(i);const m=ie(e,this.worldSize);return u.N(m,this._fogMatrix,m),h.set(i,new Float32Array(m)),h.get(i)}getConstrained(e,i){i=u.ae(+i,this.minZoom,this.maxZoom);const h={center:new u.Q(e.lng,e.lat),zoom:i};let m=this._helper._lngRange;this._helper._renderWorldCopies||m!==null||(m=[-179.9999999999,180-1e-10]);const x=this.tileSize*u.ac(h.zoom);let M=0,P=x,D=0,j=x,U=0,$=0;const{x:Z,y:ee}=this.size;if(this._helper._latRange){const Ae=this._helper._latRange;M=u.S(Ae[1])*x,P=u.S(Ae[0])*x,P-M<ee&&(U=ee/(P-M))}m&&(D=u.aL(u.U(m[0])*x,0,x),j=u.aL(u.U(m[1])*x,0,x),j<D&&(j+=x),j-D<Z&&($=Z/(j-D)));const{x:re,y:de}=nn(x,e);let fe,me;const _e=Math.max($||0,U||0);if(_e){const Ae=new u.P($?(j+D)/2:re,U?(P+M)/2:de);return h.center=tn(x,Ae).wrap(),h.zoom+=u.ah(_e),h}if(this._helper._latRange){const Ae=ee/2;de-Ae<M&&(me=M+Ae),de+Ae>P&&(me=P-Ae)}if(m){const Ae=(D+j)/2;let Ee=re;this._helper._renderWorldCopies&&(Ee=u.aL(re,Ae-x/2,Ae+x/2));const Pe=Z/2;Ee-Pe<D&&(fe=D+Pe),Ee+Pe>j&&(fe=j-Pe)}if(fe!==void 0||me!==void 0){const Ae=new u.P(fe??re,me??de);h.center=tn(x,Ae).wrap()}return h}calculateCenterFromCameraLngLatAlt(e,i,h,m){return this._helper.calculateCenterFromCameraLngLatAlt(e,i,h,m)}_calculateNearFarZIfNeeded(e,i,h){if(!this._helper.autoCalculateNearFarZ)return;const m=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),x=e-m*this._helper._pixelPerMeter/Math.cos(i),M=m<0?x:e,P=Math.PI/2+this.pitchInRadians,D=u.ab(this.fov)*(Math.abs(Math.cos(u.ab(this.roll)))*this.height+Math.abs(Math.sin(u.ab(this.roll)))*this.width)/this.height*(.5+h.y/this.height),j=Math.sin(D)*M/Math.sin(u.ae(Math.PI-P-D,.01,Math.PI-.01)),U=je(this),$=Math.atan(U/this._helper.cameraToCenterDistance),Z=u.ab(.75),ee=$>Z?2*$*(.5+h.y/(2*U)):Z,re=Math.sin(ee)*M/Math.sin(u.ae(Math.PI-P-ee,.01,Math.PI-.01)),de=Math.min(j,re);this._helper._farZ=1.01*(Math.cos(Math.PI/2-i)*de+M),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const e=this.centerOffset,i=nn(this.worldSize,this.center),h=i.x,m=i.y;this._helper._pixelPerMeter=u.ag(1,this.center.lat)*this.worldSize;const x=u.ab(Math.min(this.pitch,Ri)),M=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(x));let P;this._calculateNearFarZIfNeeded(M,x,e),P=new Float64Array(16),u.aY(P,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),u.an(this._invProjMatrix,P),P[8]=2*-e.x/this._helper._width,P[9]=2*e.y/this._helper._height,this._projectionMatrix=u.aZ(P),u.M(P,P,[1,-1,1]),u.L(P,P,[0,0,-this._helper.cameraToCenterDistance]),u.a_(P,P,-this.rollInRadians),u.a$(P,P,this.pitchInRadians),u.a_(P,P,-this.bearingInRadians),u.L(P,P,[-h,-m,0]),this._mercatorMatrix=u.M([],P,[this.worldSize,this.worldSize,this.worldSize]),u.M(P,P,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=u.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,P),u.L(P,P,[0,0,-this.elevation]),this._viewProjMatrix=P,this._invViewProjMatrix=u.an([],P);const D=[0,0,-1,1];u.at(D,D,this._invViewProjMatrix),this._cameraPosition=[D[0]/D[3],D[1]/D[3],D[2]/D[3]],this._fogMatrix=new Float64Array(16),u.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,M,this._helper._farZ),this._fogMatrix[8]=2*-e.x/this.width,this._fogMatrix[9]=2*e.y/this.height,u.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),u.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),u.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),u.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),u.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),u.L(this._fogMatrix,this._fogMatrix,[-h,-m,0]),u.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),u.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=u.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,P);const j=this._helper._width%2/2,U=this._helper._height%2/2,$=Math.cos(this.bearingInRadians),Z=Math.sin(-this.bearingInRadians),ee=h-Math.round(h)+$*j+Z*U,re=m-Math.round(m)+$*U+Z*j,de=new Float64Array(P);if(u.L(de,de,[ee>.5?ee-1:ee,re>.5?re-1:re,0]),this._alignedProjMatrix=de,P=u.an(new Float64Array(16),this._pixelMatrix),!P)throw new Error("failed to invert matrix");this._pixelMatrixInverse=P,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const e=this.screenPointToMercatorCoordinate(new u.P(0,0)),i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return u.at(i,i,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const e=u.ag(1,this.center.lat)*this.worldSize;return ae(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/e).toLngLat()}lngLatToCameraDepth(e,i){const h=u.$.fromLngLat(e),m=[h.x*this.worldSize,h.y*this.worldSize,i,1];return u.at(m,m,this._viewProjMatrix),m[2]/m[3]}getProjectionData(e){const{overscaledTileID:i,aligned:h,applyTerrainMatrix:m}=e,x=this._helper.getMercatorTileCoordinates(i),M=i?this.calculatePosMatrix(i,h,!0):null;let P;return P=i&&i.terrainRttPosMatrix32f&&m?i.terrainRttPosMatrix32f:M||u.b0(),{mainMatrix:P,tileMercatorCoords:x,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:P}}isLocationOccluded(e){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(e,i,h){return 1}transformLightDirection(e){return u.aQ(e)}getRayDirectionFromPixel(e){throw new Error("Not implemented.")}projectTileCoordinates(e,i,h,m){const x=this.calculatePosMatrix(h);let M;m?(M=[e,i,m(e,i),1],u.at(M,M,x)):(M=[e,i,0,1],Pr(M,M,x));const P=M[3];return{point:new u.P(M[0]/P,M[1]/P),signedDistanceFromCamera:P,isOccluded:!1}}populateCache(e){for(const i of e)this.calculatePosMatrix(i)}getMatrixForModel(e,i){const h=u.$.fromLngLat(e,i),m=h.meterInMercatorCoordinateUnits(),x=u.b1();return u.L(x,x,[h.x,h.y,h.z]),u.a_(x,x,Math.PI),u.a$(x,x,Math.PI/2),u.M(x,x,[-m,m,m]),x}getProjectionDataForCustomLayer(e=!0){const i=new u.Y(0,0,0,0,0),h=this.getProjectionData({overscaledTileID:i,applyGlobeMatrix:e}),m=ie(i,this.worldSize);u.N(m,this._viewProjMatrix,m),h.tileMercatorCoords=[0,0,1,1];const x=[u.Z,u.Z,this.worldSize/this._helper.pixelsPerMeter],M=u.b2();return u.M(M,m,x),h.fallbackMatrix=M,h.mainMatrix=M,h}getFastPathSimpleProjectionMatrix(e){return this.calculatePosMatrix(e)}}function ba(){u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Bo(v){if(v.useSlerp)if(v.k<1){const e=u.b3(v.startEulerAngles.roll,v.startEulerAngles.pitch,v.startEulerAngles.bearing),i=u.b3(v.endEulerAngles.roll,v.endEulerAngles.pitch,v.endEulerAngles.bearing),h=new Float64Array(4);u.b4(h,e,i,v.k);const m=u.b5(h);v.tr.setRoll(m.roll),v.tr.setPitch(m.pitch),v.tr.setBearing(m.bearing)}else v.tr.setRoll(v.endEulerAngles.roll),v.tr.setPitch(v.endEulerAngles.pitch),v.tr.setBearing(v.endEulerAngles.bearing);else v.tr.setRoll(u.B.number(v.startEulerAngles.roll,v.endEulerAngles.roll,v.k)),v.tr.setPitch(u.B.number(v.startEulerAngles.pitch,v.endEulerAngles.pitch,v.k)),v.tr.setBearing(u.B.number(v.startEulerAngles.bearing,v.endEulerAngles.bearing,v.k))}function Ni(v,e,i,h,m){const x=m.padding,M=nn(m.worldSize,i.getNorthWest()),P=nn(m.worldSize,i.getNorthEast()),D=nn(m.worldSize,i.getSouthEast()),j=nn(m.worldSize,i.getSouthWest()),U=u.ab(-h),$=M.rotate(U),Z=P.rotate(U),ee=D.rotate(U),re=j.rotate(U),de=new u.P(Math.max($.x,Z.x,re.x,ee.x),Math.max($.y,Z.y,re.y,ee.y)),fe=new u.P(Math.min($.x,Z.x,re.x,ee.x),Math.min($.y,Z.y,re.y,ee.y)),me=de.sub(fe),_e=(m.width-(x.left+x.right+e.left+e.right))/me.x,Ae=(m.height-(x.top+x.bottom+e.top+e.bottom))/me.y;if(Ae<0||_e<0)return void ba();const Ee=Math.min(u.ah(m.scale*Math.min(_e,Ae)),v.maxZoom),Pe=u.P.convert(v.offset),ze=new u.P((e.left-e.right)/2,(e.top-e.bottom)/2).rotate(u.ab(h)),Ie=Pe.add(ze).mult(m.scale/u.ac(Ee));return{center:tn(m.worldSize,M.add(D).div(2).sub(Ie)),zoom:Ee,bearing:h}}class wa{get useGlobeControls(){return!1}handlePanInertia(e,i){return{easingOffset:e,easingCenter:i.center}}handleMapControlsRollPitchBearingZoom(e,i){e.bearingDelta&&i.setBearing(i.bearing+e.bearingDelta),e.pitchDelta&&i.setPitch(i.pitch+e.pitchDelta),e.rollDelta&&i.setRoll(i.roll+e.rollDelta),e.zoomDelta&&i.setZoom(i.zoom+e.zoomDelta)}handleMapControlsPan(e,i,h){e.around.distSqr(i.centerPoint)<.01||i.setLocationAtPoint(h,e.around)}cameraForBoxAndBearing(e,i,h,m,x){return Ni(e,i,h,m,x)}handleJumpToCenterZoom(e,i){e.zoom!==(i.zoom!==void 0?+i.zoom:e.zoom)&&e.setZoom(+i.zoom),i.center!==void 0&&e.setCenter(u.Q.convert(i.center))}handleEaseTo(e,i){const h=e.zoom,m=e.padding,x={roll:e.roll,pitch:e.pitch,bearing:e.bearing},M={roll:i.roll===void 0?e.roll:i.roll,pitch:i.pitch===void 0?e.pitch:i.pitch,bearing:i.bearing===void 0?e.bearing:i.bearing},P=i.zoom!==void 0,D=!e.isPaddingEqual(i.padding);let j=!1;const U=P?+i.zoom:e.zoom;let $=e.centerPoint.add(i.offsetAsPoint);const Z=e.screenPointToLocation($),{center:ee,zoom:re}=e.getConstrained(u.Q.convert(i.center||Z),U??h);ui(e,ee);const de=nn(e.worldSize,Z),fe=nn(e.worldSize,ee).sub(de),me=u.ac(re-h);return j=re!==h,{easeFunc:_e=>{if(j&&e.setZoom(u.B.number(h,re,_e)),u.b6(x,M)||Bo({startEulerAngles:x,endEulerAngles:M,tr:e,k:_e,useSlerp:x.roll!=M.roll}),D&&(e.interpolatePadding(m,i.padding,_e),$=e.centerPoint.add(i.offsetAsPoint)),i.around)e.setLocationAtPoint(i.around,i.aroundPoint);else{const Ae=u.ac(e.zoom-h),Ee=re>h?Math.min(2,me):Math.max(.5,me),Pe=Math.pow(Ee,1-_e),ze=tn(e.worldSize,de.add(fe.mult(_e*Pe)).mult(Ae));e.setLocationAtPoint(e.renderWorldCopies?ze.wrap():ze,$)}},isZooming:j,elevationCenter:ee}}handleFlyTo(e,i){const h=i.zoom!==void 0,m=e.zoom,x=e.getConstrained(u.Q.convert(i.center||i.locationAtOffset),h?+i.zoom:m),M=x.center,P=x.zoom;ui(e,M);const D=nn(e.worldSize,i.locationAtOffset),j=nn(e.worldSize,M).sub(D),U=j.mag(),$=u.ac(P-m);let Z;if(i.minZoom!==void 0){const ee=Math.min(+i.minZoom,m,P),re=e.getConstrained(M,ee).zoom;Z=u.ac(re-m)}return{easeFunc:(ee,re,de,fe)=>{e.setZoom(ee===1?P:m+u.ah(re));const me=ee===1?M:tn(e.worldSize,D.add(j.mult(de)).mult(re));e.setLocationAtPoint(e.renderWorldCopies?me.wrap():me,fe)},scaleOfZoom:$,targetCenter:M,scaleOfMinZoom:Z,pixelPathLength:U}}}class Wr{constructor(e,i,h){this.blendFunction=e,this.blendColor=i,this.mask=h}}Wr.Replace=[1,0],Wr.disabled=new Wr(Wr.Replace,u.b7.transparent,[!1,!1,!1,!1]),Wr.unblended=new Wr(Wr.Replace,u.b7.transparent,[!0,!0,!0,!0]),Wr.alphaBlended=new Wr([1,771],u.b7.transparent,[!0,!0,!0,!0]);const Il=2305;class Vr{constructor(e,i,h){this.enable=e,this.mode=i,this.frontFace=h}}Vr.disabled=new Vr(!1,1029,Il),Vr.backCCW=new Vr(!0,1029,Il),Vr.frontCCW=new Vr(!0,1028,Il);class hr{constructor(e,i,h){this.func=e,this.mask=i,this.range=h}}hr.ReadOnly=!1,hr.ReadWrite=!0,hr.disabled=new hr(519,hr.ReadOnly,[0,1]);const Ds=7680;class Lr{constructor(e,i,h,m,x,M){this.test=e,this.ref=i,this.mask=h,this.fail=m,this.depthFail=x,this.pass=M}}Lr.disabled=new Lr({func:519,mask:0},0,0,Ds,Ds,Ds);const vi=new WeakMap;function Ii(v){var e;if(vi.has(v))return vi.get(v);{const i=(e=v.getParameter(v.VERSION))===null||e===void 0?void 0:e.startsWith("WebGL 2.0");return vi.set(v,i),i}}class Ls{get awaitingQuery(){return!!this._readbackQueue}constructor(e){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=e;const i=e.context,h=i.gl;this._texFormat=h.RGBA,this._texType=h.UNSIGNED_BYTE;const m=new u.aI;m.emplaceBack(-1,-1),m.emplaceBack(2,-1),m.emplaceBack(-1,2);const x=new u.aK;x.emplaceBack(0,1,2),this._fullscreenTriangle=new Oo(i.createVertexBuffer(m,Za.members),i.createIndexBuffer(x),u.aJ.simpleSegment(0,0,m.length,x.length)),this._resultBuffer=new Uint8Array(4),i.activeTexture.set(h.TEXTURE1);const M=h.createTexture();h.bindTexture(h.TEXTURE_2D,M),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texImage2D(h.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=i.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(M),Ii(h)&&(this._pbo=h.createBuffer(),h.bindBuffer(h.PIXEL_PACK_BUFFER,this._pbo),h.bufferData(h.PIXEL_PACK_BUFFER,4,h.STREAM_READ),h.bindBuffer(h.PIXEL_PACK_BUFFER,null))}destroy(){const e=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),e.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(e,i){const h=this._updateCount;return this._readbackQueue?h>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():h>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(e,i),this._updateCount++,this._measuredError}_bindFramebuffer(){const e=this._cachedRenderContext.context,i=e.gl;e.activeTexture.set(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,this._fbo.colorAttachment.get()),e.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(e,i){const h=this._cachedRenderContext.context,m=h.gl;if(this._bindFramebuffer(),h.viewport.set([0,0,this._texWidth,this._texHeight]),h.clear({color:u.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(h,m.TRIANGLES,hr.disabled,Lr.disabled,Wr.unblended,Vr.disabled,((x,M)=>({u_input:x,u_output_expected:M}))(e,i),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Ii(m)){m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.readBuffer(m.COLOR_ATTACHMENT0),m.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),m.bindBuffer(m.PIXEL_PACK_BUFFER,null);const x=m.fenceSync(m.SYNC_GPU_COMMANDS_COMPLETE,0);m.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:x}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const e=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Ii(e)){const i=e.clientWaitSync(this._readbackQueue.sync,0,0);if(i===e.WAIT_FAILED)return u.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(i===e.TIMEOUT_EXPIRED)return;e.bindBuffer(e.PIXEL_PACK_BUFFER,this._pbo),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),e.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ls._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(e){let i=0;return i+=e[0]/256,i+=e[1]/65536,i+=e[2]/16777216,e[3]<127&&(i=-i),i/128}}const io=u.Z/128;function Ac(v,e){const i=v.granularity!==void 0?Math.max(v.granularity,1):1,h=i+(v.generateBorders?2:0),m=i+(v.extendToNorthPole||v.generateBorders?1:0)+(v.extendToSouthPole||v.generateBorders?1:0),x=h+1,M=m+1,P=v.generateBorders?-1:0,D=v.generateBorders||v.extendToNorthPole?-1:0,j=i+(v.generateBorders?1:0),U=i+(v.generateBorders||v.extendToSouthPole?1:0),$=x*M,Z=h*m*6,ee=x*M>65536;if(ee&&e==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const re=ee||e==="32bit",de=new Int16Array(2*$);let fe=0;for(let Ae=D;Ae<=U;Ae++)for(let Ee=P;Ee<=j;Ee++){let Pe=Ee/i*u.Z;Ee===-1&&(Pe=-64),Ee===i+1&&(Pe=u.Z+io);let ze=Ae/i*u.Z;Ae===-1&&(ze=v.extendToNorthPole?u.b9:-64),Ae===i+1&&(ze=v.extendToSouthPole?u.ba:u.Z+io),de[fe++]=Pe,de[fe++]=ze}const me=re?new Uint32Array(Z):new Uint16Array(Z);let _e=0;for(let Ae=0;Ae<m;Ae++)for(let Ee=0;Ee<h;Ee++){const Pe=Ee+1+Ae*x,ze=Ee+(Ae+1)*x,Ie=Ee+1+(Ae+1)*x;me[_e++]=Ee+Ae*x,me[_e++]=ze,me[_e++]=Pe,me[_e++]=Pe,me[_e++]=ze,me[_e++]=Ie}return{vertices:de.buffer.slice(0),indices:me.buffer.slice(0),uses32bitIndices:re}}const ao=new u.aH({fill:new u.bb(128,2),line:new u.bb(512,0),tile:new u.bb(128,32),stencil:new u.bb(128,1),circle:3});class jo{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return cr.projectionGlobe}get vertexShaderPreludeCode(){return cr.projectionMercator.vertexSource}get subdivisionGranularity(){return ao}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(e){this._errorMeasurement||(this._errorMeasurement=new Ls(e));const i=u.S(this._errorQueryLatitudeDegrees),h=2*Math.atan(Math.exp(Math.PI-i*Math.PI*2))-.5*Math.PI,m=this._errorMeasurement.updateErrorLoop(i,h),x=z.now();m!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=m,this._errorMeasurementLastChangeTime=x);const M=Math.min(Math.max((x-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=u.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,u.bd(M))}_getMeshKey(e){return`${e.granularity.toString(36)}_${e.generateBorders?"b":""}${e.extendToNorthPole?"n":""}${e.extendToSouthPole?"s":""}`}getMeshFromTileID(e,i,h,m,x){const M=(x==="stencil"?ao.stencil:ao.tile).getGranularityForZoomLevel(i.z);return this._getMesh(e,{granularity:M,generateBorders:h,extendToNorthPole:i.y===0&&m,extendToSouthPole:i.y===(1<<i.z)-1&&m})}_getMesh(e,i){const h=this._getMeshKey(i);if(h in this._tileMeshCache)return this._tileMeshCache[h];const m=function(x,M){const P=Ac(M,"16bit"),D=u.aI.deserialize({arrayBuffer:P.vertices,length:P.vertices.byteLength/2/2}),j=u.aK.deserialize({arrayBuffer:P.indices,length:P.indices.byteLength/2/3});return new Oo(x.createVertexBuffer(D,Za.members),x.createIndexBuffer(j),u.aJ.simpleSegment(0,0,D.length,j.length))}(e,i);return this._tileMeshCache[h]=m,m}recalculate(e){}hasTransition(){const e=z.now();let i=!1;return i=i||(e-this._errorMeasurementLastChangeTime)/1e3<.7,i=i||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,i}setErrorQueryLatitudeDegrees(e){this._errorQueryLatitudeDegrees=e}}const zs=new u.r({type:new u.D(u.v.projection.type)});class Cu extends u.E{constructor(e){super(),this._transitionable=new u.T(zs),this.setProjection(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.C(0)),this._mercatorProjection=new On,this._verticalPerspectiveProjection=new jo}get transitionState(){const e=this.properties.get("type");if(typeof e=="string"&&e==="mercator")return 0;if(typeof e=="string"&&e==="vertical-perspective")return 1;if(e instanceof u.be){if(e.from==="vertical-perspective"&&e.to==="mercator")return 1-e.transition;if(e.from==="mercator"&&e.to==="vertical-perspective")return e.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(e){this._mercatorProjection.updateGPUdependent(e),this._verticalPerspectiveProjection.updateGPUdependent(e)}getMeshFromTileID(e,i,h,m,x){return this.currentProjection.getMeshFromTileID(e,i,h,m,x)}setProjection(e){this._transitionable.setValue("type",(e==null?void 0:e.type)||"mercator")}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}setErrorQueryLatitudeDegrees(e){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(e),this._mercatorProjection.setErrorQueryLatitudeDegrees(e)}}function Eu(v){const e=Cc(v.worldSize,v.center.lat);return 2*Math.PI*e}function Dl(v,e,i,h,m){const x=1/(1<<m),M=e/u.Z*x+h*x,P=u.bg((v/u.Z*x+i*x)*Math.PI*2+Math.PI,2*Math.PI),D=2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI,j=Math.cos(D),U=new Float64Array(3);return U[0]=Math.sin(P)*j,U[1]=Math.sin(D),U[2]=Math.cos(P)*j,U}function Fi(v){return function(e,i){const h=Math.cos(i),m=new Float64Array(3);return m[0]=Math.sin(e)*h,m[1]=Math.sin(i),m[2]=Math.cos(e)*h,m}(v.lng*Math.PI/180,v.lat*Math.PI/180)}function Cc(v,e){return v/(2*Math.PI)/Math.cos(e*Math.PI/180)}function Ui(v){const e=Math.asin(v[1])/Math.PI*180,i=Math.sqrt(v[0]*v[0]+v[2]*v[2]);if(i>1e-6){const h=v[0]/i,m=Math.acos(v[2]/i),x=(h>0?m:-m)/Math.PI*180;return new u.Q(u.aL(x,-180,180),e)}return new u.Q(0,e)}function Ll(v){return Math.cos(v*Math.PI/180)}function fn(v,e){const i=Ll(v),h=Ll(e);return u.ah(h/i)}function Pu(v,e){const i=v.rotate(e.bearingInRadians),h=e.zoom+fn(e.center.lat,0),m=u.bc(1/Ll(e.center.lat),1/Ll(Math.min(Math.abs(e.center.lat),60)),u.bf(h,7,3,0,1)),x=360/Eu({worldSize:e.worldSize,center:{lat:e.center.lat}});return new u.Q(e.center.lng-i.x*x*m,u.ae(e.center.lat+i.y*x,-85.051129,u.af))}function Ec(v){const e=.5*v,i=Math.sin(e),h=Math.cos(e);return Math.log(i+h)-Math.log(h-i)}function zh(v,e,i,h){const m=v.lat+i*h;if(Math.abs(i)>1){const x=(Math.sign(v.lat+i)!==Math.sign(v.lat)?-Math.abs(v.lat):Math.abs(v.lat))*Math.PI/180,M=Math.abs(v.lat+i)*Math.PI/180,P=Ec(x+h*(M-x)),D=Ec(x),j=Ec(M);return new u.Q(v.lng+e*((P-D)/(j-D)),m)}return new u.Q(v.lng+e*h,m)}class No{constructor(e){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=e}recalculateCache(){if(!this._hadAnyChanges)return;const e=this._cachePrevious;this._cachePrevious=this._cache,this._cache=e,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(e,i,h,m){const x=`${e.z}_${e.x}_${e.y}`,M=this._cache.get(x);if(M)return M;const P=this._cachePrevious.get(x);if(P)return this._cache.set(x,P),P;const D=this._aabbFactory(e,i,h,m);return this._cache.set(x,D),this._hadAnyChanges=!0,D}}function Pc(v,e,i){const h=v-e;return h<0?-h:Math.max(0,h-i)}function kh(v,e,i,h,m){const x=v-i;let M;return M=x<0?Math.min(-x,1+x-m):x>1?Math.min(Math.max(x-m,0),1-x):0,Math.max(M,Pc(e,h,m))}class fp{constructor(){this._aabbCache=new No(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(e,i,h,m){const x=1<<h.z,M=1/x,P=h.x/x,D=h.y/x;let j=2;return j=Math.min(j,kh(e,i,P,D,M)),j=Math.min(j,kh(e,i,P+.5,-D-M,M)),j=Math.min(j,kh(e,i,P+.5,2-D-M,M)),j}getWrap(e,i,h){const m=1<<i.z,x=1/m,M=i.x/m,P=Pc(e.x,M,x),D=Pc(e.x,M-1,x),j=Pc(e.x,M+1,x),U=Math.min(P,D,j);return U===j?1:U===D?-1:0}allowVariableZoom(e,i){return Ve(e,i)>4}allowWorldCopies(){return!1}getTileAABB(e,i,h,m){return this._aabbCache.getTileAABB(e,i,h,m)}_computeTileAABB(e,i,h,m){if(e.z<=0)return new da([-1,-1,-1],[1,1,1]);if(e.z===1)return new da([e.x===0?-1:0,e.y===0?0:-1,-1],[e.x===0?0:1,e.y===0?1:0,1]);{const x=[Dl(0,0,e.x,e.y,e.z),Dl(u.Z,0,e.x,e.y,e.z),Dl(u.Z,u.Z,e.x,e.y,e.z),Dl(0,u.Z,e.x,e.y,e.z)],M=[1,1,1],P=[-1,-1,-1];for(const D of x)for(let j=0;j<3;j++)M[j]=Math.min(M[j],D[j]),P[j]=Math.max(P[j],D[j]);if(e.y===0||e.y===(1<<e.z)-1){const D=[0,e.y===0?1:-1,0];for(let j=0;j<3;j++)M[j]=Math.min(M[j],D[j]),P[j]=Math.max(P[j],D[j])}return new da(M,P)}}}class Rc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,i,h){return this._helper.interpolatePadding(e,i,h)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,i){this._helper.resize(e,i)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,i){this._helper.overrideNearFarZ(e,i)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e){}constructor(){this._cachedClippingPlane=u.bk(),this._projectionMatrix=u.b1(),this._globeViewProjMatrix32f=u.b0(),this._globeViewProjMatrixNoCorrection=u.b1(),this._globeViewProjMatrixNoCorrectionInverted=u.b1(),this._globeProjMatrixInverted=u.b1(),this._cameraPosition=u.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new ei({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,i)=>this.getConstrained(e,i)}),this._coveringTilesDetailsProvider=new fp}clone(){const e=new Rc;return e.apply(this),e}apply(e,i){this._globeLatitudeErrorCorrectionRadians=i||0,this._helper.apply(e)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const e=u.bh();return e[0]=this._cameraPosition[0],e[1]=this._cameraPosition[1],e[2]=this._cameraPosition[2],e}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(e){const{overscaledTileID:i,applyGlobeMatrix:h}=e,m=this._helper.getMercatorTileCoordinates(i);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:m,clippingPlane:this._cachedClippingPlane,projectionTransition:h?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(e){const i=this.pitchInRadians,h=this.cameraToCenterDistance/e,m=Math.sin(i)*h,x=Math.cos(i)*h+1,M=1/Math.sqrt(m*m+x*x)*1;let P=-m,D=x;const j=Math.sqrt(P*P+D*D);P/=j,D/=j;const U=[0,P,D];u.bl(U,U,[0,0,0],-this.bearingInRadians),u.bm(U,U,[0,0,0],-1*this.center.lat*Math.PI/180),u.bn(U,U,[0,0,0],this.center.lng*Math.PI/180);const $=1/u.bo(U);return u.aO(U,U,$),[...U,-M*$]}isLocationOccluded(e){return!this.isSurfacePointVisible(Fi(e))}transformLightDirection(e){const i=this._helper._center.lng*Math.PI/180,h=this._helper._center.lat*Math.PI/180,m=Math.cos(h),x=[Math.sin(i)*m,Math.sin(h),Math.cos(i)*m],M=[x[2],0,-x[0]],P=[0,0,0];u.aU(P,M,x),u.aT(M,M),u.aT(P,P);const D=[0,0,0];return u.aT(D,[M[0]*e[0]+P[0]*e[1]+x[0]*e[2],M[1]*e[0]+P[1]*e[1]+x[1]*e[2],M[2]*e[0]+P[2]*e[1]+x[2]*e[2]]),D}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(e,i,h){const m=function(P,D,j){const U=1/(1<<j.z);return new u.$(P/u.Z*U+j.x*U,D/u.Z*U+j.y*U)}(e,i,h.canonical),x=(M=m.y,[u.bg(m.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI]);var M;return this.getCircleRadiusCorrection()/Math.cos(x[1])}projectTileCoordinates(e,i,h,m){const x=h.canonical,M=Dl(e,i,x.x,x.y,x.z),P=1+(m?m(e,i):0)/u.bu,D=[M[0]*P,M[1]*P,M[2]*P,1];u.at(D,D,this._globeViewProjMatrixNoCorrection);const j=this._cachedClippingPlane,U=j[0]*M[0]+j[1]*M[1]+j[2]*M[2]+j[3]<0;return{point:new u.P(D[0]/D[3],D[1]/D[3]),signedDistanceFromCamera:D[3],isOccluded:U}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const e=Cc(this.worldSize,this.center.lat),i=u.b2(),h=u.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*e),u.aY(i,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const m=this.centerOffset;i[8]=2*-m.x/this._helper._width,i[9]=2*m.y/this._helper._height,this._projectionMatrix=u.aZ(i),this._globeProjMatrixInverted=u.b2(),u.an(this._globeProjMatrixInverted,i),u.L(i,i,[0,0,-this.cameraToCenterDistance]),u.a_(i,i,this.rollInRadians),u.a$(i,i,-this.pitchInRadians),u.a_(i,i,this.bearingInRadians),u.L(i,i,[0,0,-e]);const x=u.bh();x[0]=e,x[1]=e,x[2]=e,u.a$(h,i,this.center.lat*Math.PI/180),u.bp(h,h,-this.center.lng*Math.PI/180),u.M(h,h,x),this._globeViewProjMatrixNoCorrection=h,u.a$(i,i,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),u.bp(i,i,-this.center.lng*Math.PI/180),u.M(i,i,x),this._globeViewProjMatrix32f=new Float32Array(i),this._globeViewProjMatrixNoCorrectionInverted=u.b2(),u.an(this._globeViewProjMatrixNoCorrectionInverted,h);const M=u.bh();this._cameraPosition=u.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/e,u.bl(this._cameraPosition,this._cameraPosition,M,-this.rollInRadians),u.bm(this._cameraPosition,this._cameraPosition,M,this.pitchInRadians),u.bl(this._cameraPosition,this._cameraPosition,M,-this.bearingInRadians),u.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),u.bm(this._cameraPosition,this._cameraPosition,M,-this.center.lat*Math.PI/180),u.bn(this._cameraPosition,this._cameraPosition,M,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(e);const P=u.aZ(this._globeViewProjMatrixNoCorrectionInverted);u.M(P,P,[1,1,-1]),this._cachedFrustum=Sn.fromInvProjectionMatrix(P)}calculateFogMatrix(e){u.w("calculateFogMatrix is not supported on globe projection.");const i=u.b2();return u.ad(i),i}getVisibleUnwrappedCoordinates(e){return[new u.aW(0,e)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){e&&u.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,i){if(!this._globeViewProjMatrixNoCorrection)return 1;const h=Fi(e);u.aO(h,h,1+i/u.bu);const m=u.bk();return u.at(m,[h[0],h[1],h[2],1],this._globeViewProjMatrixNoCorrection),m[2]/m[3]}populateCache(e){}getBounds(){const e=.5*this.width,i=.5*this.height,h=[new u.P(0,0),new u.P(e,0),new u.P(this.width,0),new u.P(this.width,i),new u.P(this.width,this.height),new u.P(e,this.height),new u.P(0,this.height),new u.P(0,i)],m=[];for(const $ of h)m.push(this.unprojectScreenPoint($));let x=0,M=0,P=0,D=0;const j=this.center;for(const $ of m){const Z=u.bq(j.lng,$.lng),ee=u.bq(j.lat,$.lat);Z<M&&(M=Z),Z>x&&(x=Z),ee<D&&(D=ee),ee>P&&(P=ee)}const U=[j.lng+M,j.lat+D,j.lng+x,j.lat+P];return this.isSurfacePointOnScreen([0,1,0])&&(U[3]=90,U[0]=-180,U[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(U[1]=-90,U[0]=-180,U[2]=180),new pr(U)}getConstrained(e,i){const h=u.ae(e.lat,-85.051129,u.af),m=u.ae(+i,this.minZoom+fn(0,h),this.maxZoom);return{center:new u.Q(e.lng,h),zoom:m}}calculateCenterFromCameraLngLatAlt(e,i,h,m){return this._helper.calculateCenterFromCameraLngLatAlt(e,i,h,m)}setLocationAtPoint(e,i){const h=Fi(this.unprojectScreenPoint(i)),m=Fi(e),x=u.bh();u.br(x);const M=u.bh();u.bn(M,h,x,-this.center.lng*Math.PI/180),u.bm(M,M,x,this.center.lat*Math.PI/180);const P=m[0]*m[0]+m[2]*m[2],D=M[0]*M[0];if(P<D)return;const j=Math.sqrt(P-D),U=-j,$=u.bs(m[0],m[2],M[0],j),Z=u.bs(m[0],m[2],M[0],U),ee=u.bh();u.bn(ee,m,x,-$);const re=u.bs(ee[1],ee[2],M[1],M[2]),de=u.bh();u.bn(de,m,x,-Z);const fe=u.bs(de[1],de[2],M[1],M[2]),me=.5*Math.PI,_e=re>=-me&&re<=me,Ae=fe>=-me&&fe<=me;let Ee,Pe;if(_e&&Ae){const He=this.center.lng*Math.PI/180,at=this.center.lat*Math.PI/180;u.bv($,He)+u.bv(re,at)<u.bv(Z,He)+u.bv(fe,at)?(Ee=$,Pe=re):(Ee=Z,Pe=fe)}else if(_e)Ee=$,Pe=re;else{if(!Ae)return;Ee=Z,Pe=fe}const ze=Ee/Math.PI*180,Ie=Pe/Math.PI*180,$e=this.center.lat;this.setCenter(new u.Q(ze,u.ae(Ie,-90,90))),this.setZoom(this.zoom+fn($e,this.center.lat))}locationToScreenPoint(e,i){const h=Fi(e);if(i){const m=i.getElevationForLngLatZoom(e,this._helper._tileZoom);u.aO(h,h,1+m/u.bu)}return this._projectSurfacePointToScreen(h)}_projectSurfacePointToScreen(e){const i=u.bk();return u.at(i,[...e,1],this._globeViewProjMatrixNoCorrection),i[0]/=i[3],i[1]/=i[3],new u.P((.5*i[0]+.5)*this.width,(.5*-i[1]+.5)*this.height)}screenPointToMercatorCoordinate(e,i){if(i){const h=i.pointCoordinate(e);if(h)return h}return u.$.fromLngLat(this.unprojectScreenPoint(e))}screenPointToLocation(e,i){var h;return(h=this.screenPointToMercatorCoordinate(e,i))===null||h===void 0?void 0:h.toLngLat()}isPointOnMapSurface(e,i){const h=this._cameraPosition,m=this.getRayDirectionFromPixel(e);return!!this.rayPlanetIntersection(h,m)}getRayDirectionFromPixel(e){const i=u.bk();i[0]=e.x/this.width*2-1,i[1]=-1*(e.y/this.height*2-1),i[2]=1,i[3]=1,u.at(i,i,this._globeViewProjMatrixNoCorrectionInverted),i[0]/=i[3],i[1]/=i[3],i[2]/=i[3];const h=u.bh();h[0]=i[0]-this._cameraPosition[0],h[1]=i[1]-this._cameraPosition[1],h[2]=i[2]-this._cameraPosition[2];const m=u.bh();return u.aT(m,h),m}isSurfacePointVisible(e){const i=this._cachedClippingPlane;return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]+i[3]>=0}isSurfacePointOnScreen(e){if(!this.isSurfacePointVisible(e))return!1;const i=u.bk();return u.at(i,[...e,1],this._globeViewProjMatrixNoCorrection),i[0]/=i[3],i[1]/=i[3],i[2]/=i[3],i[0]>-1&&i[0]<1&&i[1]>-1&&i[1]<1&&i[2]>-1&&i[2]<1}rayPlanetIntersection(e,i){const h=u.aV(e,i),m=u.bh(),x=u.bh();u.aO(x,i,h),u.aS(m,e,x);const M=1-u.aV(m,m);if(M<0)return null;const P=u.aV(e,e)-1,D=-h+(h<0?1:-1)*Math.sqrt(M),j=P/D,U=D;return{tMin:Math.min(j,U),tMax:Math.max(j,U)}}unprojectScreenPoint(e){const i=this._cameraPosition,h=this.getRayDirectionFromPixel(e),m=this.rayPlanetIntersection(i,h);if(m){const U=u.bh();u.aP(U,i,[h[0]*m.tMin,h[1]*m.tMin,h[2]*m.tMin]);const $=u.bh();return u.aT($,U),Ui($)}const x=this._cachedClippingPlane,M=x[0]*h[0]+x[1]*h[1]+x[2]*h[2],P=-u.bt(x,i)/M,D=u.bh();if(P>0)u.aP(D,i,[h[0]*P,h[1]*P,h[2]*P]);else{const U=u.bh();u.aP(U,i,[2*h[0],2*h[1],2*h[2]]);const $=u.bt(this._cachedClippingPlane,U);u.aS(D,U,[this._cachedClippingPlane[0]*$,this._cachedClippingPlane[1]*$,this._cachedClippingPlane[2]*$])}const j=function(U){const $=u.bh();return $[0]=U[0]*-U[3],$[1]=U[1]*-U[3],$[2]=U[2]*-U[3],{center:$,radius:Math.sqrt(1-U[3]*U[3])}}(x);return Ui(function(U,$,Z){const ee=u.bh();u.aS(ee,Z,U);const re=u.bh();return u.bi(re,U,ee,$/u.bj(ee)),re}(j.center,j.radius,D))}getMatrixForModel(e,i){const h=u.Q.convert(e),m=1/u.bu,x=u.b1();return u.bp(x,x,h.lng/180*Math.PI),u.a$(x,x,-h.lat/180*Math.PI),u.L(x,x,[0,0,1+i/u.bu]),u.a$(x,x,.5*Math.PI),u.M(x,x,[m,m,m]),x}getProjectionDataForCustomLayer(e=!0){const i=this.getProjectionData({overscaledTileID:new u.Y(0,0,0,0,0),applyGlobeMatrix:e});return i.tileMercatorCoords=[0,0,1,1],i}getFastPathSimpleProjectionMatrix(e){}}class zl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,i,h){return this._helper.interpolatePadding(e,i,h)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,i,h=!0){this._helper.resize(e,i,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,i){this._helper.overrideNearFarZ(e,i)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(e,i){this._globeness=e,this._globeLatitudeErrorCorrectionRadians=i,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new ei({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,i)=>this.getConstrained(e,i)}),this._globeness=1,this._mercatorTransform=new qa,this._verticalPerspectiveTransform=new Rc}clone(){const e=new zl;return e._globeness=this._globeness,e._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,e.apply(this),e}apply(e){this._helper.apply(e),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(e){const i=this._mercatorTransform.getProjectionData(e),h=this._verticalPerspectiveTransform.getProjectionData(e);return{mainMatrix:this.isGlobeRendering?h.mainMatrix:i.mainMatrix,clippingPlane:h.clippingPlane,tileMercatorCoords:h.tileMercatorCoords,projectionTransition:e.applyGlobeMatrix?this._globeness:0,fallbackMatrix:i.fallbackMatrix}}isLocationOccluded(e){return this.currentTransform.isLocationOccluded(e)}transformLightDirection(e){return this.currentTransform.transformLightDirection(e)}getPixelScale(){return u.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return u.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(e,i,h){const m=this._mercatorTransform.getPitchedTextCorrection(e,i,h),x=this._verticalPerspectiveTransform.getPitchedTextCorrection(e,i,h);return u.bc(m,x,this._globeness)}projectTileCoordinates(e,i,h,m){return this.currentTransform.projectTileCoordinates(e,i,h,m)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(e){return this.currentTransform.calculateFogMatrix(e)}getVisibleUnwrappedCoordinates(e){return this.currentTransform.getVisibleUnwrappedCoordinates(e)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(e){this._mercatorTransform.recalculateZoomAndCenter(e),this._verticalPerspectiveTransform.recalculateZoomAndCenter(e)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,i){return this.currentTransform.lngLatToCameraDepth(e,i)}populateCache(e){this._mercatorTransform.populateCache(e),this._verticalPerspectiveTransform.populateCache(e)}getBounds(){return this.currentTransform.getBounds()}getConstrained(e,i){return this.currentTransform.getConstrained(e,i)}calculateCenterFromCameraLngLatAlt(e,i,h,m){return this._helper.calculateCenterFromCameraLngLatAlt(e,i,h,m)}setLocationAtPoint(e,i){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(e,i),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(e,i),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(e,i){return this.currentTransform.locationToScreenPoint(e,i)}screenPointToMercatorCoordinate(e,i){return this.currentTransform.screenPointToMercatorCoordinate(e,i)}screenPointToLocation(e,i){return this.currentTransform.screenPointToLocation(e,i)}isPointOnMapSurface(e,i){return this.currentTransform.isPointOnMapSurface(e,i)}getRayDirectionFromPixel(e){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(e)}getMatrixForModel(e,i){return this.currentTransform.getMatrixForModel(e,i)}getProjectionDataForCustomLayer(e=!0){const i=this._mercatorTransform.getProjectionDataForCustomLayer(e);if(!this.isGlobeRendering)return i;const h=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(e);return h.fallbackMatrix=i.mainMatrix,h}getFastPathSimpleProjectionMatrix(e){return this.currentTransform.getFastPathSimpleProjectionMatrix(e)}}class Ga{get useGlobeControls(){return!0}handlePanInertia(e,i){const h=Pu(e,i);return Math.abs(h.lng-i.center.lng)>180&&(h.lng=i.center.lng+179.5*Math.sign(h.lng-i.center.lng)),{easingCenter:h,easingOffset:new u.P(0,0)}}handleMapControlsRollPitchBearingZoom(e,i){const h=e.around,m=i.screenPointToLocation(h);e.bearingDelta&&i.setBearing(i.bearing+e.bearingDelta),e.pitchDelta&&i.setPitch(i.pitch+e.pitchDelta),e.rollDelta&&i.setRoll(i.roll+e.rollDelta);const x=i.zoom;e.zoomDelta&&i.setZoom(i.zoom+e.zoomDelta);const M=i.zoom-x;if(M===0)return;const P=u.bq(i.center.lng,m.lng),D=P/(Math.abs(P/180)+1),j=u.bq(i.center.lat,m.lat),U=i.getRayDirectionFromPixel(h),$=i.cameraPosition,Z=-1*u.aV($,U),ee=u.bh();u.aP(ee,$,[U[0]*Z,U[1]*Z,U[2]*Z]);const re=u.bo(ee)-1,de=Math.exp(.5*-Math.max(re-.3,0)),fe=Cc(i.worldSize,i.center.lat)/Math.min(i.width,i.height),me=u.bf(fe,.9,.5,1,.25),_e=(1-u.ac(-M))*Math.min(de,me),Ae=i.center.lat,Ee=i.zoom,Pe=new u.Q(i.center.lng+D*_e,u.ae(i.center.lat+j*_e,-85.051129,u.af));i.setLocationAtPoint(m,h);const ze=i.center,Ie=u.bf(Math.abs(P),45,85,0,1),$e=u.bf(fe,.75,.35,0,1),He=Math.pow(Math.max(Ie,$e),.25),at=u.bq(ze.lng,Pe.lng),ot=u.bq(ze.lat,Pe.lat);i.setCenter(new u.Q(ze.lng+at*He,ze.lat+ot*He).wrap()),i.setZoom(Ee+fn(Ae,i.center.lat))}handleMapControlsPan(e,i,h){if(!e.panDelta)return;const m=i.center.lat,x=i.zoom;i.setCenter(Pu(e.panDelta,i).wrap()),i.setZoom(x+fn(m,i.center.lat))}cameraForBoxAndBearing(e,i,h,m,x){const M=Ni(e,i,h,m,x),P=i.left/x.width*2-1,D=(x.width-i.right)/x.width*2-1,j=i.top/x.height*-2+1,U=(x.height-i.bottom)/x.height*-2+1,$=u.bq(h.getWest(),h.getEast())<0,Z=$?h.getEast():h.getWest(),ee=$?h.getWest():h.getEast(),re=Math.max(h.getNorth(),h.getSouth()),de=Math.min(h.getNorth(),h.getSouth()),fe=Z+.5*u.bq(Z,ee),me=re+.5*u.bq(re,de),_e=x.clone();_e.setCenter(M.center),_e.setBearing(M.bearing),_e.setPitch(0),_e.setRoll(0),_e.setZoom(M.zoom);const Ae=_e.modelViewProjectionMatrix,Ee=[Fi(h.getNorthWest()),Fi(h.getNorthEast()),Fi(h.getSouthWest()),Fi(h.getSouthEast()),Fi(new u.Q(ee,me)),Fi(new u.Q(Z,me)),Fi(new u.Q(fe,re)),Fi(new u.Q(fe,de))],Pe=Fi(M.center);let ze=Number.POSITIVE_INFINITY;for(const Ie of Ee)P<0&&(ze=Ga.getLesserNonNegativeNonNull(ze,Ga.solveVectorScale(Ie,Pe,Ae,"x",P))),D>0&&(ze=Ga.getLesserNonNegativeNonNull(ze,Ga.solveVectorScale(Ie,Pe,Ae,"x",D))),j>0&&(ze=Ga.getLesserNonNegativeNonNull(ze,Ga.solveVectorScale(Ie,Pe,Ae,"y",j))),U<0&&(ze=Ga.getLesserNonNegativeNonNull(ze,Ga.solveVectorScale(Ie,Pe,Ae,"y",U)));if(Number.isFinite(ze)&&ze!==0)return M.zoom=_e.zoom+u.ah(ze),M;ba()}handleJumpToCenterZoom(e,i){const h=e.center.lat,m=e.getConstrained(i.center?u.Q.convert(i.center):e.center,e.zoom).center;e.setCenter(m.wrap());const x=i.zoom!==void 0?+i.zoom:e.zoom+fn(h,m.lat);e.zoom!==x&&e.setZoom(x)}handleEaseTo(e,i){const h=e.zoom,m=e.center,x=e.padding,M={roll:e.roll,pitch:e.pitch,bearing:e.bearing},P={roll:i.roll===void 0?e.roll:i.roll,pitch:i.pitch===void 0?e.pitch:i.pitch,bearing:i.bearing===void 0?e.bearing:i.bearing},D=i.zoom!==void 0,j=!e.isPaddingEqual(i.padding);let U=!1;const $=i.center?u.Q.convert(i.center):m,Z=e.getConstrained($,h).center;ui(e,Z);const ee=e.clone();ee.setCenter(Z),ee.setZoom(D?+i.zoom:h+fn(m.lat,$.lat)),ee.setBearing(i.bearing);const re=new u.P(u.ae(e.centerPoint.x+i.offsetAsPoint.x,0,e.width),u.ae(e.centerPoint.y+i.offsetAsPoint.y,0,e.height));ee.setLocationAtPoint(Z,re);const de=(i.offset&&i.offsetAsPoint.mag())>0?ee.center:Z,fe=D?+i.zoom:h+fn(m.lat,de.lat),me=h+fn(m.lat,0),_e=fe+fn(de.lat,0),Ae=u.bq(m.lng,de.lng),Ee=u.bq(m.lat,de.lat),Pe=u.ac(_e-me);return U=fe!==h,{easeFunc:ze=>{if(u.b6(M,P)||Bo({startEulerAngles:M,endEulerAngles:P,tr:e,k:ze,useSlerp:M.roll!=P.roll}),j&&e.interpolatePadding(x,i.padding,ze),i.around)u.w("Easing around a point is not supported under globe projection."),e.setLocationAtPoint(i.around,i.aroundPoint);else{const Ie=_e>me?Math.min(2,Pe):Math.max(.5,Pe),$e=Math.pow(Ie,1-ze),He=zh(m,Ae,Ee,ze*$e);e.setCenter(He.wrap())}if(U){const Ie=u.B.number(me,_e,ze)+fn(0,e.center.lat);e.setZoom(Ie)}},isZooming:U,elevationCenter:de}}handleFlyTo(e,i){const h=i.zoom!==void 0,m=e.center,x=e.zoom,M=e.padding,P=!e.isPaddingEqual(i.padding),D=e.getConstrained(u.Q.convert(i.center||i.locationAtOffset),x).center,j=h?+i.zoom:e.zoom+fn(e.center.lat,D.lat),U=e.clone();U.setCenter(D),U.setZoom(j),U.setBearing(i.bearing);const $=new u.P(u.ae(e.centerPoint.x+i.offsetAsPoint.x,0,e.width),u.ae(e.centerPoint.y+i.offsetAsPoint.y,0,e.height));U.setLocationAtPoint(D,$);const Z=U.center;ui(e,Z);const ee=function(Ee,Pe,ze){const Ie=Fi(Pe),$e=Fi(ze),He=u.aV(Ie,$e),at=Math.acos(He),ot=Eu(Ee);return at/(2*Math.PI)*ot}(e,m,Z),re=x+fn(m.lat,0),de=j+fn(Z.lat,0),fe=u.ac(de-re);let me;if(typeof i.minZoom=="number"){const Ee=+i.minZoom+fn(Z.lat,0),Pe=Math.min(Ee,re,de)+fn(0,Z.lat),ze=e.getConstrained(Z,Pe).zoom+fn(Z.lat,0);me=u.ac(ze-re)}const _e=u.bq(m.lng,Z.lng),Ae=u.bq(m.lat,Z.lat);return{easeFunc:(Ee,Pe,ze,Ie)=>{const $e=zh(m,_e,Ae,ze);P&&e.interpolatePadding(M,i.padding,Ee);const He=Ee===1?Z:$e;e.setCenter(He.wrap());const at=re+u.ah(Pe);e.setZoom(Ee===1?j:at+fn(0,He.lat))},scaleOfZoom:fe,targetCenter:Z,scaleOfMinZoom:me,pixelPathLength:ee}}static solveVectorScale(e,i,h,m,x){const M=m==="x"?[h[0],h[4],h[8],h[12]]:[h[1],h[5],h[9],h[13]],P=[h[3],h[7],h[11],h[15]],D=e[0]*M[0]+e[1]*M[1]+e[2]*M[2],j=e[0]*P[0]+e[1]*P[1]+e[2]*P[2],U=i[0]*M[0]+i[1]*M[1]+i[2]*M[2],$=i[0]*P[0]+i[1]*P[1]+i[2]*P[2];return U+x*j===D+x*$||P[3]*(D-U)+M[3]*($-j)+D*$==U*j?null:(U+M[3]-x*$-x*P[3])/(U-D-x*$+x*j)}static getLesserNonNegativeNonNull(e,i){return i!==null&&i>=0&&i<e?i:e}}class Ru{constructor(e){this._globe=e,this._mercatorCameraHelper=new wa,this._verticalPerspectiveCameraHelper=new Ga}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(e,i){return this.currentHelper.handlePanInertia(e,i)}handleMapControlsRollPitchBearingZoom(e,i){return this.currentHelper.handleMapControlsRollPitchBearingZoom(e,i)}handleMapControlsPan(e,i,h){this.currentHelper.handleMapControlsPan(e,i,h)}cameraForBoxAndBearing(e,i,h,m,x){return this.currentHelper.cameraForBoxAndBearing(e,i,h,m,x)}handleJumpToCenterZoom(e,i){this.currentHelper.handleJumpToCenterZoom(e,i)}handleEaseTo(e,i){return this.currentHelper.handleEaseTo(e,i)}handleFlyTo(e,i){return this.currentHelper.handleFlyTo(e,i)}}const kl=(v,e)=>u.x(v,e&&e.filter(i=>i.identifier!=="source.canvas")),Iu=u.bw();class Du extends u.E{constructor(e,i={}){super(),this._rtlPluginLoaded=()=>{for(const h in this.sourceCaches){const m=this.sourceCaches[h].getSource().type;m!=="vector"&&m!=="geojson"||this.sourceCaches[h].reload()}},this.map=e,this.dispatcher=new Qr(ir(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",(h,m)=>this.getGlyphs(h,m)),this.dispatcher.registerMessageHandler("GI",(h,m)=>this.getImages(h,m)),this.imageManager=new ht,this.imageManager.setEventedParent(this),this.glyphManager=new Xt(e._requestManager,i.localIdeographFontFamily),this.lineAtlas=new De(256,512),this.crossTileSymbolIndex=new ps,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.by()),Rn().on(ur,this._rtlPluginLoaded),this.on("data",h=>{if(h.dataType!=="source"||h.sourceDataType!=="metadata")return;const m=this.sourceCaches[h.sourceId];if(!m)return;const x=m.getSource();if(x&&x.vectorLayerIds)for(const M in this._layers){const P=this._layers[M];P.source===x.id&&this._validateLayer(P)}})}loadURL(e,i={},h){this.fire(new u.l("dataloading",{dataType:"style"})),i.validate=typeof i.validate!="boolean"||i.validate;const m=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const x=this._loadStyleRequest;u.j(m,this._loadStyleRequest).then(M=>{this._loadStyleRequest=null,this._load(M.data,i,h)}).catch(M=>{this._loadStyleRequest=null,M&&!x.signal.aborted&&this.fire(new u.k(M))})}loadJSON(e,i={},h){this.fire(new u.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,z.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,i.validate=i.validate!==!1,this._load(e,i,h)}).catch(()=>{})}loadEmpty(){this.fire(new u.l("dataloading",{dataType:"style"})),this._load(Iu,{validate:!1})}_load(e,i,h){var m,x;const M=i.transformStyle?i.transformStyle(h,e):e;if(!i.validate||!kl(this,u.y(M))){this._loaded=!0,this.stylesheet=M;for(const P in M.sources)this.addSource(P,M.sources[P],{validate:!1});M.sprite?this._loadSprite(M.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(M.glyphs),this._createLayers(),this.light=new Nt(this.stylesheet.light),this._setProjectionInternal(((m=this.stylesheet.projection)===null||m===void 0?void 0:m.type)||"mercator"),this.sky=new fr(this.stylesheet.sky),this.map.setTerrain((x=this.stylesheet.terrain)!==null&&x!==void 0?x:null),this.fire(new u.l("data",{dataType:"style"})),this.fire(new u.l("style.load"))}}_createLayers(){const e=u.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map(i=>i.id),this._layers={},this._serializedLayers=null;for(const i of e){const h=u.bA(i);h.setEventedParent(this,{layer:{id:i.id}}),this._layers[i.id]=h}}_loadSprite(e,i=!1,h=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(x,M,P,D){return u._(this,void 0,void 0,function*(){const j=ke(x),U=P>1?"@2x":"",$={},Z={};for(const{id:ee,url:re}of j){const de=M.transformRequest(it(re,U,".json"),"SpriteJSON");$[ee]=u.j(de,D);const fe=M.transformRequest(it(re,U,".png"),"SpriteImage");Z[ee]=xe.getImage(fe,D)}return yield Promise.all([...Object.values($),...Object.values(Z)]),function(ee,re){return u._(this,void 0,void 0,function*(){const de={};for(const fe in ee){de[fe]={};const me=z.getImageCanvasContext((yield re[fe]).data),_e=(yield ee[fe]).data;for(const Ae in _e){const{width:Ee,height:Pe,x:ze,y:Ie,sdf:$e,pixelRatio:He,stretchX:at,stretchY:ot,content:rt,textFitWidth:It,textFitHeight:Tt}=_e[Ae];de[fe][Ae]={data:null,pixelRatio:He,sdf:$e,stretchX:at,stretchY:ot,content:rt,textFitWidth:It,textFitHeight:Tt,spriteData:{width:Ee,height:Pe,x:ze,y:Ie,context:me}}}}return de})}($,Z)})}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(x=>{if(this._spriteRequest=null,x)for(const M in x){this._spritesImagesIds[M]=[];const P=this._spritesImagesIds[M]?this._spritesImagesIds[M].filter(D=>!(D in x)):[];for(const D of P)this.imageManager.removeImage(D),this._changedImages[D]=!0;for(const D in x[M]){const j=M==="default"?D:`${M}:${D}`;this._spritesImagesIds[M].push(j),j in this.imageManager.images?this.imageManager.updateImage(j,x[M][D],!1):this.imageManager.addImage(j,x[M][D]),i&&(this._changedImages[j]=!0)}}}).catch(x=>{this._spriteRequest=null,m=x,this.fire(new u.k(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),i&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"})),h&&h(m)})}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}_validateLayer(e){const i=this.sourceCaches[e.source];if(!i)return;const h=e.sourceLayer;if(!h)return;const m=i.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(h)===-1)&&this.fire(new u.k(new Error(`Source layer "${h}" does not exist on source "${m.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,i=!1){const h=this._serializedAllLayers();if(!e||e.length===0)return Object.values(i?u.bB(h):h);const m=[];for(const x of e)if(h[x]){const M=i?u.bB(h[x]):h[x];m.push(M)}return m}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const i=Object.keys(this._layers);for(const h of i){const m=this._layers[h];m.type!=="custom"&&(e[h]=m.serialize())}return e}hasTransitions(){var e,i,h;if(!((e=this.light)===null||e===void 0)&&e.hasTransition()||!((i=this.sky)===null||i===void 0)&&i.hasTransition()||!((h=this.projection)===null||h===void 0)&&h.hasTransition())return!0;for(const m in this.sourceCaches)if(this.sourceCaches[m].hasTransition())return!0;for(const m in this._layers)if(this._layers[m].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const i=this._changed;if(i){const m=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(m.length||x.length)&&this._updateWorkerLayers(m,x);for(const M in this._updatedSources){const P=this._updatedSources[M];if(P==="reload")this._reloadSource(M);else{if(P!=="clear")throw new Error(`Invalid action ${P}`);this._clearSource(M)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const M in this._updatedPaintProps)this._layers[M].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const h={};for(const m in this.sourceCaches){const x=this.sourceCaches[m];h[m]=x.used,x.used=!1}for(const m of this._order){const x=this._layers[m];x.recalculate(e,this._availableImages),!x.isHidden(e.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const m in h){const x=this.sourceCaches[m];!!h[m]!=!!x.used&&x.fire(new u.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(e),this.sky.recalculate(e),this.projection.recalculate(e),this.z=e.zoom,i&&this.fire(new u.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,i){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:i})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,i={}){var h;this._checkLoaded();const m=this.serialize();if(e=i.transformStyle?i.transformStyle(m,e):e,((h=i.validate)===null||h===void 0||h)&&kl(this,u.y(e)))return!1;(e=u.bB(e)).layers=u.bz(e.layers);const x=u.bC(m,e),M=this._getOperationsToPerform(x);if(M.unimplemented.length>0)throw new Error(`Unimplemented: ${M.unimplemented.join(", ")}.`);if(M.operations.length===0)return!1;for(const P of M.operations)P();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const i=[],h=[];for(const m of e)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":i.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":i.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":i.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":i.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":i.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":i.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":i.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":i.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":i.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":i.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":i.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":i.push(()=>this.setSprite.apply(this,m.args));break;case"setTerrain":i.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setSky":i.push(()=>this.setSky.apply(this,m.args));break;case"setProjection":this.setProjection.apply(this,m.args);break;case"setTransition":i.push(()=>{});break;default:h.push(m.command)}return{operations:i,unimplemented:h}}addImage(e,i){if(this.getImage(e))return this.fire(new u.k(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,i),this._afterImageUpdated(e)}updateImage(e,i){this.imageManager.updateImage(e,i)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new u.k(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,i,h={}){if(this._checkLoaded(),this.sourceCaches[e]!==void 0)throw new Error(`Source "${e}" already exists.`);if(!i.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(i).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(u.y.source,`sources.${e}`,i,null,h))return;this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);const m=this.sourceCaches[e]=new Ue(e,i,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:e})),m.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error("There is no source with this ID");for(const h in this._layers)if(this._layers[h].source===e)return this.fire(new u.k(new Error(`Source "${e}" cannot be removed while layer "${h}" is using it.`)));const i=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],i.fire(new u.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),i.setEventedParent(null),i.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,i){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error(`There is no source with this ID=${e}`);const h=this.sourceCaches[e].getSource();if(h.type!=="geojson")throw new Error(`geojsonSource.type is ${h.type}, which is !== 'geojson`);h.setData(i),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,i,h={}){this._checkLoaded();const m=e.id;if(this.getLayer(m))return void this.fire(new u.k(new Error(`Layer "${m}" already exists on this map.`)));let x;if(e.type==="custom"){if(kl(this,u.bD(e)))return;x=u.bA(e)}else{if("source"in e&&typeof e.source=="object"&&(this.addSource(m,e.source),e=u.bB(e),e=u.e(e,{source:m})),this._validate(u.y.layer,`layers.${m}`,e,{arrayIndex:-1},h))return;x=u.bA(e),this._validateLayer(x),x.setEventedParent(this,{layer:{id:m}})}const M=i?this._order.indexOf(i):this._order.length;if(i&&M===-1)this.fire(new u.k(new Error(`Cannot add layer "${m}" before non-existing layer "${i}".`)));else{if(this._order.splice(M,0,m),this._layerOrderChanged=!0,this._layers[m]=x,this._removedLayers[m]&&x.source&&x.type!=="custom"){const P=this._removedLayers[m];delete this._removedLayers[m],P.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(e,i){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new u.k(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===i)return;const h=this._order.indexOf(e);this._order.splice(h,1);const m=i?this._order.indexOf(i):this._order.length;i&&m===-1?this.fire(new u.k(new Error(`Cannot move layer "${e}" before non-existing layer "${i}".`))):(this._order.splice(m,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const i=this._layers[e];if(!i)return void this.fire(new u.k(new Error(`Cannot remove non-existing layer "${e}".`)));i.setEventedParent(null);const h=this._order.indexOf(e);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=i,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],i.onRemove&&i.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,i,h){this._checkLoaded();const m=this.getLayer(e);m?m.minzoom===i&&m.maxzoom===h||(i!=null&&(m.minzoom=i),h!=null&&(m.maxzoom=h),this._updateLayer(m)):this.fire(new u.k(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,i,h={}){this._checkLoaded();const m=this.getLayer(e);if(m){if(!u.bE(m.filter,i))return i==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(u.y.filter,`layers.${m.id}.filter`,i,null,h)||(m.filter=u.bB(i),this._updateLayer(m)))}else this.fire(new u.k(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return u.bB(this.getLayer(e).filter)}setLayoutProperty(e,i,h,m={}){this._checkLoaded();const x=this.getLayer(e);x?u.bE(x.getLayoutProperty(i),h)||(x.setLayoutProperty(i,h,m),this._updateLayer(x)):this.fire(new u.k(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,i){const h=this.getLayer(e);if(h)return h.getLayoutProperty(i);this.fire(new u.k(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,i,h,m={}){this._checkLoaded();const x=this.getLayer(e);x?u.bE(x.getPaintProperty(i),h)||(x.setPaintProperty(i,h,m)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new u.k(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,i){return this.getLayer(e).getPaintProperty(i)}setFeatureState(e,i){this._checkLoaded();const h=e.source,m=e.sourceLayer,x=this.sourceCaches[h];if(x===void 0)return void this.fire(new u.k(new Error(`The source '${h}' does not exist in the map's style.`)));const M=x.getSource().type;M==="geojson"&&m?this.fire(new u.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):M!=="vector"||m?(e.id===void 0&&this.fire(new u.k(new Error("The feature id parameter must be provided."))),x.setFeatureState(m,e.id,i)):this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,i){this._checkLoaded();const h=e.source,m=this.sourceCaches[h];if(m===void 0)return void this.fire(new u.k(new Error(`The source '${h}' does not exist in the map's style.`)));const x=m.getSource().type,M=x==="vector"?e.sourceLayer:void 0;x!=="vector"||M?i&&typeof e.id!="string"&&typeof e.id!="number"?this.fire(new u.k(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(M,e.id,i):this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const i=e.source,h=e.sourceLayer,m=this.sourceCaches[i];if(m!==void 0)return m.getSource().type!=="vector"||h?(e.id===void 0&&this.fire(new u.k(new Error("The feature id parameter must be provided."))),m.getFeatureState(h,e.id)):void this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.k(new Error(`The source '${i}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=u.bF(this.sourceCaches,x=>x.serialize()),i=this._serializeByIds(this._order,!0),h=this.map.getTerrain()||void 0,m=this.stylesheet;return u.bG({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,projection:m.projection,sources:e,layers:i,terrain:h},x=>x!==void 0)}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&this.sourceCaches[e.source].getSource().type!=="raster"&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const i=M=>this._layers[M].type==="fill-extrusion",h={},m=[];for(let M=this._order.length-1;M>=0;M--){const P=this._order[M];if(i(P)){h[P]=M;for(const D of e){const j=D[P];if(j)for(const U of j)m.push(U)}}}m.sort((M,P)=>P.intersectionZ-M.intersectionZ);const x=[];for(let M=this._order.length-1;M>=0;M--){const P=this._order[M];if(i(P))for(let D=m.length-1;D>=0;D--){const j=m[D].feature;if(h[j.layer.id]<M)break;x.push(j),m.pop()}else for(const D of e){const j=D[P];if(j)for(const U of j)x.push(U.feature)}}return x}queryRenderedFeatures(e,i,h){i&&i.filter&&this._validate(u.y.filter,"queryRenderedFeatures.filter",i.filter,null,i);const m={};if(i&&i.layers){if(!(Array.isArray(i.layers)||i.layers instanceof Set))return this.fire(new u.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const j of i.layers){const U=this._layers[j];if(!U)return this.fire(new u.k(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];m[U.source]=!0}}const x=[];i.availableImages=this._availableImages;const M=this._serializedAllLayers(),P=i.layers instanceof Set?i.layers:Array.isArray(i.layers)?new Set(i.layers):null,D=Object.assign(Object.assign({},i),{layers:P});for(const j in this.sourceCaches)i.layers&&!m[j]||x.push(Fr(this.sourceCaches[j],this._layers,M,e,D,h,this.map.terrain?(U,$,Z)=>this.map.terrain.getElevation(U,$,Z):void 0));return this.placement&&x.push(function(j,U,$,Z,ee,re,de){const fe={},me=re.queryRenderedSymbols(Z),_e=[];for(const Ae of Object.keys(me).map(Number))_e.push(de[Ae]);_e.sort(ln);for(const Ae of _e){const Ee=Ae.featureIndex.lookupSymbolFeatures(me[Ae.bucketInstanceId],U,Ae.bucketIndex,Ae.sourceLayerIndex,ee.filter,ee.layers,ee.availableImages,j);for(const Pe in Ee){const ze=fe[Pe]=fe[Pe]||[],Ie=Ee[Pe];Ie.sort(($e,He)=>{const at=Ae.featureSortOrder;if(at){const ot=at.indexOf($e.featureIndex);return at.indexOf(He.featureIndex)-ot}return He.featureIndex-$e.featureIndex});for(const $e of Ie)ze.push($e)}}return function(Ae,Ee,Pe){for(const ze in Ae)for(const Ie of Ae[ze])Ln(Ie,Pe[Ee[ze].source]);return Ae}(fe,j,$)}(this._layers,M,this.sourceCaches,e,D,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(e,i){i&&i.filter&&this._validate(u.y.filter,"querySourceFeatures.filter",i.filter,null,i);const h=this.sourceCaches[e];return h?function(m,x){const M=m.getRenderableIds().map(j=>m.getTileByID(j)),P=[],D={};for(let j=0;j<M.length;j++){const U=M[j],$=U.tileID.canonical.key;D[$]||(D[$]=!0,U.querySourceFeatures(P,x))}return P}(h,i):[]}getLight(){return this.light.getLight()}setLight(e,i={}){this._checkLoaded();const h=this.light.getLight();let m=!1;for(const M in e)if(!u.bE(e[M],h[M])){m=!0;break}if(!m)return;const x={now:z.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,i),this.light.updateTransitions(x)}getProjection(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.projection}setProjection(e){if(this._checkLoaded(),this.projection){if(this.projection.name===e.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=e,this._setProjectionInternal(e.type)}getSky(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.sky}setSky(e,i={}){this._checkLoaded();const h=this.getSky();let m=!1;if(!e&&!h)return;if(e&&!h)m=!0;else if(!e&&h)m=!0;else for(const M in e)if(!u.bE(e[M],h[M])){m=!0;break}if(!m)return;const x={now:z.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,i),this.sky.updateTransitions(x)}_setProjectionInternal(e){const i=function(h){if(Array.isArray(h)){const m=new Cu({type:h});return{projection:m,transform:new zl,cameraHelper:new Ru(m)}}switch(h){case"mercator":return{projection:new On,transform:new qa,cameraHelper:new wa};case"globe":{const m=new Cu({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:m,transform:new zl,cameraHelper:new Ru(m)}}case"vertical-perspective":return{projection:new jo,transform:new Rc,cameraHelper:new Ga};default:return u.w(`Unknown projection name: ${h}. Falling back to mercator projection.`),{projection:new On,transform:new qa,cameraHelper:new wa}}}(e);this.projection=i.projection,this.map.migrateProjection(i.transform,i.cameraHelper);for(const h in this.sourceCaches)this.sourceCaches[h].reload()}_validate(e,i,h,m,x={}){return(!x||x.validate!==!1)&&kl(this,e.call(u.y,u.e({key:i,style:this.serialize(),value:h,styleSpec:u.v},m)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Rn().off(ur,this._rtlPluginLoaded);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this.sourceCaches){const h=this.sourceCaches[i];h.setEventedParent(null),h.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const i in this.sourceCaches)this.sourceCaches[i].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,i,h,m,x=!1){let M=!1,P=!1;const D={};for(const j of this._order){const U=this._layers[j];if(U.type!=="symbol")continue;if(!D[U.source]){const Z=this.sourceCaches[U.source];D[U.source]=Z.getRenderableIds(!0).map(ee=>Z.getTileByID(ee)).sort((ee,re)=>re.tileID.overscaledZ-ee.tileID.overscaledZ||(ee.tileID.isLessThan(re.tileID)?-1:1))}const $=this.crossTileSymbolIndex.addLayer(U,D[U.source],e.center.lng);M=M||$}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||h===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(z.now(),e.zoom))&&(this.pauseablePlacement=new Yi(e,this.map.terrain,this._order,x,i,h,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,D),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(z.now()),P=!0),M&&this.pauseablePlacement.placement.setStale()),P||M)for(const j of this._order){const U=this._layers[j];U.type==="symbol"&&this.placement.updateLayerOpacities(U,D[U.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(z.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,i){return u._(this,void 0,void 0,function*(){const h=yield this.imageManager.getImages(i.icons);this._updateTilesForChangedImages();const m=this.sourceCaches[i.source];return m&&m.setDependencies(i.tileID.key,i.type,i.icons),h})}getGlyphs(e,i){return u._(this,void 0,void 0,function*(){const h=yield this.glyphManager.getGlyphs(i.stacks),m=this.sourceCaches[i.source];return m&&m.setDependencies(i.tileID.key,i.type,[""]),h})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,i={}){this._checkLoaded(),e&&this._validate(u.y.glyphs,"glyphs",e,null,i)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,i,h={},m){this._checkLoaded();const x=[{id:e,url:i}],M=[...ke(this.stylesheet.sprite),...x];this._validate(u.y.sprite,"sprite",M,null,h)||(this.stylesheet.sprite=M,this._loadSprite(x,!0,m))}removeSprite(e){this._checkLoaded();const i=ke(this.stylesheet.sprite);if(i.find(h=>h.id===e)){if(this._spritesImagesIds[e])for(const h of this._spritesImagesIds[e])this.imageManager.removeImage(h),this._changedImages[h]=!0;i.splice(i.findIndex(h=>h.id===e),1),this.stylesheet.sprite=i.length>0?i:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}else this.fire(new u.k(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return ke(this.stylesheet.sprite)}setSprite(e,i={},h){this._checkLoaded(),e&&this._validate(u.y.sprite,"sprite",e,null,i)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,h):(this._unloadSprite(),h&&h(null)))}}var Oh=u.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ms{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,i,h,m,x,M,P,D,j){this.context=e;let U=this.boundPaintVertexBuffers.length!==m.length;for(let $=0;!U&&$<m.length;$++)this.boundPaintVertexBuffers[$]!==m[$]&&(U=!0);!this.vao||this.boundProgram!==i||this.boundLayoutVertexBuffer!==h||U||this.boundIndexBuffer!==x||this.boundVertexOffset!==M||this.boundDynamicVertexBuffer!==P||this.boundDynamicVertexBuffer2!==D||this.boundDynamicVertexBuffer3!==j?this.freshBind(i,h,m,x,M,P,D,j):(e.bindVertexArray.set(this.vao),P&&P.bind(),x&&x.dynamicDraw&&x.bind(),D&&D.bind(),j&&j.bind())}freshBind(e,i,h,m,x,M,P,D){const j=e.numAttributes,U=this.context,$=U.gl;this.vao&&this.destroy(),this.vao=U.createVertexArray(),U.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=i,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=m,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=M,this.boundDynamicVertexBuffer2=P,this.boundDynamicVertexBuffer3=D,i.enableAttributes($,e);for(const Z of h)Z.enableAttributes($,e);M&&M.enableAttributes($,e),P&&P.enableAttributes($,e),D&&D.enableAttributes($,e),i.bind(),i.setVertexAttribPointers($,e,x);for(const Z of h)Z.bind(),Z.setVertexAttribPointers($,e,x);M&&(M.bind(),M.setVertexAttribPointers($,e,x)),m&&m.bind(),P&&(P.bind(),P.setVertexAttribPointers($,e,x)),D&&(D.bind(),D.setVertexAttribPointers($,e,x)),U.currentNumAttributes=j}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const dp=(v,e,i,h,m)=>({u_texture:0,u_ele_delta:v,u_fog_matrix:e,u_fog_color:i?i.properties.get("fog-color"):u.b7.white,u_fog_ground_blend:i?i.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:m?0:i?i.calculateFogBlendOpacity(h):0,u_horizon_color:i?i.properties.get("horizon-color"):u.b7.white,u_horizon_fog_blend:i?i.properties.get("horizon-fog-blend"):1,u_is_globe_mode:m?1:0}),Bh={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function so(v){const e=[];for(let i=0;i<v.length;i++){if(v[i]===null)continue;const h=v[i].split(" ");e.push(h.pop())}return e}class Lu{constructor(e,i,h,m,x,M,P,D){const j=e.gl;this.program=j.createProgram();const U=so(i.staticAttributes),$=h?h.getBinderAttributes():[],Z=U.concat($),ee=cr.prelude.staticUniforms?so(cr.prelude.staticUniforms):[],re=P.staticUniforms?so(P.staticUniforms):[],de=i.staticUniforms?so(i.staticUniforms):[],fe=h?h.getBinderUniforms():[],me=ee.concat(re).concat(de).concat(fe),_e=[];for(const He of me)_e.indexOf(He)<0&&_e.push(He);const Ae=h?h.defines():[];Ii(j)&&Ae.unshift("#version 300 es"),x&&Ae.push("#define OVERDRAW_INSPECTOR;"),M&&Ae.push("#define TERRAIN3D;"),D&&Ae.push(D);let Ee=Ae.concat(cr.prelude.fragmentSource,P.fragmentSource,i.fragmentSource).join(`
`),Pe=Ae.concat(cr.prelude.vertexSource,P.vertexSource,i.vertexSource).join(`
`);Ii(j)||(Ee=function(He){return He.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Ee),Pe=function(He){return He.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Pe));const ze=j.createShader(j.FRAGMENT_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(ze,Ee),j.compileShader(ze),!j.getShaderParameter(ze,j.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${j.getShaderInfoLog(ze)}`);j.attachShader(this.program,ze);const Ie=j.createShader(j.VERTEX_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(Ie,Pe),j.compileShader(Ie),!j.getShaderParameter(Ie,j.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${j.getShaderInfoLog(Ie)}`);j.attachShader(this.program,Ie),this.attributes={};const $e={};this.numAttributes=Z.length;for(let He=0;He<this.numAttributes;He++)Z[He]&&(j.bindAttribLocation(this.program,He,Z[He]),this.attributes[Z[He]]=He);if(j.linkProgram(this.program),!j.getProgramParameter(this.program,j.LINK_STATUS))throw new Error(`Program failed to link: ${j.getProgramInfoLog(this.program)}`);j.deleteShader(Ie),j.deleteShader(ze);for(let He=0;He<_e.length;He++){const at=_e[He];if(at&&!$e[at]){const ot=j.getUniformLocation(this.program,at);ot&&($e[at]=ot)}}this.fixedUniforms=m(e,$e),this.terrainUniforms=((He,at)=>({u_depth:new u.bH(He,at.u_depth),u_terrain:new u.bH(He,at.u_terrain),u_terrain_dim:new u.b8(He,at.u_terrain_dim),u_terrain_matrix:new u.bJ(He,at.u_terrain_matrix),u_terrain_unpack:new u.bK(He,at.u_terrain_unpack),u_terrain_exaggeration:new u.b8(He,at.u_terrain_exaggeration)}))(e,$e),this.projectionUniforms=((He,at)=>({u_projection_matrix:new u.bJ(He,at.u_projection_matrix),u_projection_tile_mercator_coords:new u.bK(He,at.u_projection_tile_mercator_coords),u_projection_clipping_plane:new u.bK(He,at.u_projection_clipping_plane),u_projection_transition:new u.b8(He,at.u_projection_transition),u_projection_fallback_matrix:new u.bJ(He,at.u_projection_fallback_matrix)}))(e,$e),this.binderUniforms=h?h.getUniforms(e,$e):[]}draw(e,i,h,m,x,M,P,D,j,U,$,Z,ee,re,de,fe,me,_e,Ae){const Ee=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(h),e.setStencilMode(m),e.setColorMode(x),e.setCullFace(M),D){e.activeTexture.set(Ee.TEXTURE2),Ee.bindTexture(Ee.TEXTURE_2D,D.depthTexture),e.activeTexture.set(Ee.TEXTURE3),Ee.bindTexture(Ee.TEXTURE_2D,D.texture);for(const ze in this.terrainUniforms)this.terrainUniforms[ze].set(D[ze])}if(j)for(const ze in j)this.projectionUniforms[Bh[ze]].set(j[ze]);if(P)for(const ze in this.fixedUniforms)this.fixedUniforms[ze].set(P[ze]);fe&&fe.setUniforms(e,this.binderUniforms,re,{zoom:de});let Pe=0;switch(i){case Ee.LINES:Pe=2;break;case Ee.TRIANGLES:Pe=3;break;case Ee.LINE_STRIP:Pe=1}for(const ze of ee.get()){const Ie=ze.vaos||(ze.vaos={});(Ie[U]||(Ie[U]=new ms)).bind(e,this,$,fe?fe.getPaintVertexBuffers():[],Z,ze.vertexOffset,me,_e,Ae),Ee.drawElements(i,ze.primitiveLength*Pe,Ee.UNSIGNED_SHORT,ze.primitiveOffset*Pe*2)}}}function Hf(v,e,i){const h=1/u.az(i,1,e.transform.tileZoom),m=Math.pow(2,i.tileID.overscaledZ),x=i.tileSize*Math.pow(2,e.transform.tileZoom)/m,M=x*(i.tileID.canonical.x+i.tileID.wrap*m),P=x*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[h,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[M>>16,P>>16],u_pixel_coord_lower:[65535&M,65535&P]}}const zu=(v,e,i,h)=>{const m=v.style.light,x=m.properties.get("position"),M=[x.x,x.y,x.z],P=u.bN();m.properties.get("anchor")==="viewport"&&u.bO(P,v.transform.bearingInRadians),u.bP(M,M,P);const D=v.transform.transformLightDirection(M),j=m.properties.get("color");return{u_lightpos:M,u_lightpos_globe:D,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[j.r,j.g,j.b],u_vertical_gradient:+e,u_opacity:i,u_fill_translate:h}},jh=(v,e,i,h,m,x,M)=>u.e(zu(v,e,i,h),Hf(x,v,M),{u_height_factor:-Math.pow(2,m.overscaledZ)/M.tileSize/8}),Ha=(v,e,i,h)=>u.e(Hf(e,v,i),{u_fill_translate:h}),pp=(v,e)=>({u_world:v,u_fill_translate:e}),Nh=(v,e,i,h,m)=>u.e(Ha(v,e,i,m),{u_world:h}),Wf=(v,e,i,h,m)=>{const x=v.transform;let M,P,D=0;if(i.paint.get("circle-pitch-alignment")==="map"){const j=u.az(e,1,x.zoom);M=!0,P=[j,j],D=j/(u.Z*Math.pow(2,e.tileID.overscaledZ))*2*Math.PI*m}else M=!1,P=x.pixelsToGLUnits;return{u_camera_to_center_distance:x.cameraToCenterDistance,u_scale_with_map:+(i.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+M,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:P,u_globe_extrude_scale:D,u_translate:h}},Fh=v=>({u_pixel_extrude_scale:[1/v.width,1/v.height]}),Ic=v=>({u_viewport_size:[v.width,v.height]}),Dc=(v,e=1)=>({u_color:v,u_overlay:0,u_overlay_scale:e}),oo=(v,e,i,h)=>{const m=u.az(v,1,e)/(u.Z*Math.pow(2,v.tileID.overscaledZ))*2*Math.PI*h;return{u_extrude_scale:u.az(v,1,e),u_intensity:i,u_globe_extrude_scale:m}},Uh=(v,e,i,h)=>{const m=u.K();u.bQ(m,0,v.width,v.height,0,0,1);const x=v.context.gl;return{u_matrix:m,u_world:[x.drawingBufferWidth,x.drawingBufferHeight],u_image:i,u_color_ramp:h,u_opacity:e.paint.get("heatmap-opacity")}},Kf=(v,e,i)=>{const h=i.paint.get("hillshade-shadow-color"),m=i.paint.get("hillshade-highlight-color"),x=i.paint.get("hillshade-accent-color");let M=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);return i.paint.get("hillshade-illumination-anchor")==="viewport"&&(M+=v.transform.bearingInRadians),{u_image:0,u_latrange:Vh(0,e.tileID),u_light:[i.paint.get("hillshade-exaggeration"),M],u_shadow:h,u_highlight:m,u_accent:x}},Fo=(v,e)=>{const i=e.stride,h=u.K();return u.bQ(h,0,u.Z,-8192,0,0,1),u.L(h,h,[0,-8192,0]),{u_matrix:h,u_image:1,u_dimension:[i,i],u_zoom:v.overscaledZ,u_unpack:e.getUnpackVector()}};function Vh(v,e){const i=Math.pow(2,e.canonical.z),h=e.canonical.y;return[new u.$(0,h/i).toLngLat().lat,new u.$(0,(h+1)/i).toLngLat().lat]}const ku=(v,e,i,h)=>{const m=v.transform;return{u_translation:$h(v,e,i),u_ratio:h/u.az(e,1,m.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},ks=(v,e,i,h,m)=>u.e(ku(v,e,i,h),{u_image:0,u_image_height:m}),Ou=(v,e,i,h,m)=>{const x=v.transform,M=Bu(e,x);return{u_translation:$h(v,e,i),u_texsize:e.imageAtlasTexture.size,u_ratio:h/u.az(e,1,x.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[M,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},Lc=(v,e,i,h,m,x)=>{const M=v.lineAtlas,P=Bu(e,v.transform),D=i.layout.get("line-cap")==="round",j=M.getDash(m.from,D),U=M.getDash(m.to,D),$=j.width*x.fromScale,Z=U.width*x.toScale;return u.e(ku(v,e,i,h),{u_patternscale_a:[P/$,-j.height/2],u_patternscale_b:[P/Z,-U.height/2],u_sdfgamma:M.width/(256*Math.min($,Z)*v.pixelRatio)/2,u_image:0,u_tex_y_a:j.y,u_tex_y_b:U.y,u_mix:x.t})};function Bu(v,e){return 1/u.az(v,1,e.tileZoom)}function $h(v,e,i){return u.aA(v.transform,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}const Zh=(v,e,i,h,m)=>{return{u_tl_parent:v,u_scale_parent:e,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*h.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:h.paint.get("raster-brightness-min"),u_brightness_high:h.paint.get("raster-brightness-max"),u_saturation_factor:(M=h.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(x=h.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:zc(h.paint.get("raster-hue-rotate")),u_coords_top:[m[0].x,m[0].y,m[1].x,m[1].y],u_coords_bottom:[m[3].x,m[3].y,m[2].x,m[2].y]};var x,M};function zc(v){v*=Math.PI/180;const e=Math.sin(v),i=Math.cos(v);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}const ju=(v,e,i,h,m,x,M,P,D,j,U,$,Z)=>{const ee=M.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:ee.cameraToCenterDistance,u_pitch:ee.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:ee.width/ee.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_label_plane_matrix:P,u_coord_matrix:D,u_is_text:+U,u_pitch_with_map:+h,u_is_along_line:m,u_is_variable_anchor:x,u_texsize:$,u_texture:0,u_translation:j,u_pitched_scale:Z}},Nu=(v,e,i,h,m,x,M,P,D,j,U,$,Z,ee)=>{const re=M.transform;return u.e(ju(v,e,i,h,m,x,M,P,D,j,U,$,ee),{u_gamma_scale:h?Math.cos(re.pitch*Math.PI/180)*re.cameraToCenterDistance:1,u_device_pixel_ratio:M.pixelRatio,u_is_halo:1})},qh=(v,e,i,h,m,x,M,P,D,j,U,$,Z)=>u.e(Nu(v,e,i,h,m,x,M,P,D,j,!0,U,0,Z),{u_texsize_icon:$,u_texture_icon:1}),Fu=(v,e)=>({u_opacity:v,u_color:e}),Os=(v,e,i,h,m)=>u.e(function(x,M,P,D){const j=P.imageManager.getPattern(x.from.toString()),U=P.imageManager.getPattern(x.to.toString()),{width:$,height:Z}=P.imageManager.getPixelSize(),ee=Math.pow(2,D.tileID.overscaledZ),re=D.tileSize*Math.pow(2,P.transform.tileZoom)/ee,de=re*(D.tileID.canonical.x+D.tileID.wrap*ee),fe=re*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:j.tl,u_pattern_br_a:j.br,u_pattern_tl_b:U.tl,u_pattern_br_b:U.br,u_texsize:[$,Z],u_mix:M.t,u_pattern_size_a:j.displaySize,u_pattern_size_b:U.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/u.az(D,1,P.transform.tileZoom),u_pixel_coord_upper:[de>>16,fe>>16],u_pixel_coord_lower:[65535&de,65535&fe]}}(i,m,e,h),{u_opacity:v}),kc=(v,e)=>{},Gh={fillExtrusion:(v,e)=>({u_lightpos:new u.bL(v,e.u_lightpos),u_lightpos_globe:new u.bL(v,e.u_lightpos_globe),u_lightintensity:new u.b8(v,e.u_lightintensity),u_lightcolor:new u.bL(v,e.u_lightcolor),u_vertical_gradient:new u.b8(v,e.u_vertical_gradient),u_opacity:new u.b8(v,e.u_opacity),u_fill_translate:new u.bM(v,e.u_fill_translate)}),fillExtrusionPattern:(v,e)=>({u_lightpos:new u.bL(v,e.u_lightpos),u_lightpos_globe:new u.bL(v,e.u_lightpos_globe),u_lightintensity:new u.b8(v,e.u_lightintensity),u_lightcolor:new u.bL(v,e.u_lightcolor),u_vertical_gradient:new u.b8(v,e.u_vertical_gradient),u_height_factor:new u.b8(v,e.u_height_factor),u_opacity:new u.b8(v,e.u_opacity),u_fill_translate:new u.bM(v,e.u_fill_translate),u_image:new u.bH(v,e.u_image),u_texsize:new u.bM(v,e.u_texsize),u_pixel_coord_upper:new u.bM(v,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(v,e.u_pixel_coord_lower),u_scale:new u.bL(v,e.u_scale),u_fade:new u.b8(v,e.u_fade)}),fill:(v,e)=>({u_fill_translate:new u.bM(v,e.u_fill_translate)}),fillPattern:(v,e)=>({u_image:new u.bH(v,e.u_image),u_texsize:new u.bM(v,e.u_texsize),u_pixel_coord_upper:new u.bM(v,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(v,e.u_pixel_coord_lower),u_scale:new u.bL(v,e.u_scale),u_fade:new u.b8(v,e.u_fade),u_fill_translate:new u.bM(v,e.u_fill_translate)}),fillOutline:(v,e)=>({u_world:new u.bM(v,e.u_world),u_fill_translate:new u.bM(v,e.u_fill_translate)}),fillOutlinePattern:(v,e)=>({u_world:new u.bM(v,e.u_world),u_image:new u.bH(v,e.u_image),u_texsize:new u.bM(v,e.u_texsize),u_pixel_coord_upper:new u.bM(v,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(v,e.u_pixel_coord_lower),u_scale:new u.bL(v,e.u_scale),u_fade:new u.b8(v,e.u_fade),u_fill_translate:new u.bM(v,e.u_fill_translate)}),circle:(v,e)=>({u_camera_to_center_distance:new u.b8(v,e.u_camera_to_center_distance),u_scale_with_map:new u.bH(v,e.u_scale_with_map),u_pitch_with_map:new u.bH(v,e.u_pitch_with_map),u_extrude_scale:new u.bM(v,e.u_extrude_scale),u_device_pixel_ratio:new u.b8(v,e.u_device_pixel_ratio),u_globe_extrude_scale:new u.b8(v,e.u_globe_extrude_scale),u_translate:new u.bM(v,e.u_translate)}),collisionBox:(v,e)=>({u_pixel_extrude_scale:new u.bM(v,e.u_pixel_extrude_scale)}),collisionCircle:(v,e)=>({u_viewport_size:new u.bM(v,e.u_viewport_size)}),debug:(v,e)=>({u_color:new u.bI(v,e.u_color),u_overlay:new u.bH(v,e.u_overlay),u_overlay_scale:new u.b8(v,e.u_overlay_scale)}),depth:kc,clippingMask:kc,heatmap:(v,e)=>({u_extrude_scale:new u.b8(v,e.u_extrude_scale),u_intensity:new u.b8(v,e.u_intensity),u_globe_extrude_scale:new u.b8(v,e.u_globe_extrude_scale)}),heatmapTexture:(v,e)=>({u_matrix:new u.bJ(v,e.u_matrix),u_world:new u.bM(v,e.u_world),u_image:new u.bH(v,e.u_image),u_color_ramp:new u.bH(v,e.u_color_ramp),u_opacity:new u.b8(v,e.u_opacity)}),hillshade:(v,e)=>({u_image:new u.bH(v,e.u_image),u_latrange:new u.bM(v,e.u_latrange),u_light:new u.bM(v,e.u_light),u_shadow:new u.bI(v,e.u_shadow),u_highlight:new u.bI(v,e.u_highlight),u_accent:new u.bI(v,e.u_accent)}),hillshadePrepare:(v,e)=>({u_matrix:new u.bJ(v,e.u_matrix),u_image:new u.bH(v,e.u_image),u_dimension:new u.bM(v,e.u_dimension),u_zoom:new u.b8(v,e.u_zoom),u_unpack:new u.bK(v,e.u_unpack)}),line:(v,e)=>({u_translation:new u.bM(v,e.u_translation),u_ratio:new u.b8(v,e.u_ratio),u_device_pixel_ratio:new u.b8(v,e.u_device_pixel_ratio),u_units_to_pixels:new u.bM(v,e.u_units_to_pixels)}),lineGradient:(v,e)=>({u_translation:new u.bM(v,e.u_translation),u_ratio:new u.b8(v,e.u_ratio),u_device_pixel_ratio:new u.b8(v,e.u_device_pixel_ratio),u_units_to_pixels:new u.bM(v,e.u_units_to_pixels),u_image:new u.bH(v,e.u_image),u_image_height:new u.b8(v,e.u_image_height)}),linePattern:(v,e)=>({u_translation:new u.bM(v,e.u_translation),u_texsize:new u.bM(v,e.u_texsize),u_ratio:new u.b8(v,e.u_ratio),u_device_pixel_ratio:new u.b8(v,e.u_device_pixel_ratio),u_image:new u.bH(v,e.u_image),u_units_to_pixels:new u.bM(v,e.u_units_to_pixels),u_scale:new u.bL(v,e.u_scale),u_fade:new u.b8(v,e.u_fade)}),lineSDF:(v,e)=>({u_translation:new u.bM(v,e.u_translation),u_ratio:new u.b8(v,e.u_ratio),u_device_pixel_ratio:new u.b8(v,e.u_device_pixel_ratio),u_units_to_pixels:new u.bM(v,e.u_units_to_pixels),u_patternscale_a:new u.bM(v,e.u_patternscale_a),u_patternscale_b:new u.bM(v,e.u_patternscale_b),u_sdfgamma:new u.b8(v,e.u_sdfgamma),u_image:new u.bH(v,e.u_image),u_tex_y_a:new u.b8(v,e.u_tex_y_a),u_tex_y_b:new u.b8(v,e.u_tex_y_b),u_mix:new u.b8(v,e.u_mix)}),raster:(v,e)=>({u_tl_parent:new u.bM(v,e.u_tl_parent),u_scale_parent:new u.b8(v,e.u_scale_parent),u_buffer_scale:new u.b8(v,e.u_buffer_scale),u_fade_t:new u.b8(v,e.u_fade_t),u_opacity:new u.b8(v,e.u_opacity),u_image0:new u.bH(v,e.u_image0),u_image1:new u.bH(v,e.u_image1),u_brightness_low:new u.b8(v,e.u_brightness_low),u_brightness_high:new u.b8(v,e.u_brightness_high),u_saturation_factor:new u.b8(v,e.u_saturation_factor),u_contrast_factor:new u.b8(v,e.u_contrast_factor),u_spin_weights:new u.bL(v,e.u_spin_weights),u_coords_top:new u.bK(v,e.u_coords_top),u_coords_bottom:new u.bK(v,e.u_coords_bottom)}),symbolIcon:(v,e)=>({u_is_size_zoom_constant:new u.bH(v,e.u_is_size_zoom_constant),u_is_size_feature_constant:new u.bH(v,e.u_is_size_feature_constant),u_size_t:new u.b8(v,e.u_size_t),u_size:new u.b8(v,e.u_size),u_camera_to_center_distance:new u.b8(v,e.u_camera_to_center_distance),u_pitch:new u.b8(v,e.u_pitch),u_rotate_symbol:new u.bH(v,e.u_rotate_symbol),u_aspect_ratio:new u.b8(v,e.u_aspect_ratio),u_fade_change:new u.b8(v,e.u_fade_change),u_label_plane_matrix:new u.bJ(v,e.u_label_plane_matrix),u_coord_matrix:new u.bJ(v,e.u_coord_matrix),u_is_text:new u.bH(v,e.u_is_text),u_pitch_with_map:new u.bH(v,e.u_pitch_with_map),u_is_along_line:new u.bH(v,e.u_is_along_line),u_is_variable_anchor:new u.bH(v,e.u_is_variable_anchor),u_texsize:new u.bM(v,e.u_texsize),u_texture:new u.bH(v,e.u_texture),u_translation:new u.bM(v,e.u_translation),u_pitched_scale:new u.b8(v,e.u_pitched_scale)}),symbolSDF:(v,e)=>({u_is_size_zoom_constant:new u.bH(v,e.u_is_size_zoom_constant),u_is_size_feature_constant:new u.bH(v,e.u_is_size_feature_constant),u_size_t:new u.b8(v,e.u_size_t),u_size:new u.b8(v,e.u_size),u_camera_to_center_distance:new u.b8(v,e.u_camera_to_center_distance),u_pitch:new u.b8(v,e.u_pitch),u_rotate_symbol:new u.bH(v,e.u_rotate_symbol),u_aspect_ratio:new u.b8(v,e.u_aspect_ratio),u_fade_change:new u.b8(v,e.u_fade_change),u_label_plane_matrix:new u.bJ(v,e.u_label_plane_matrix),u_coord_matrix:new u.bJ(v,e.u_coord_matrix),u_is_text:new u.bH(v,e.u_is_text),u_pitch_with_map:new u.bH(v,e.u_pitch_with_map),u_is_along_line:new u.bH(v,e.u_is_along_line),u_is_variable_anchor:new u.bH(v,e.u_is_variable_anchor),u_texsize:new u.bM(v,e.u_texsize),u_texture:new u.bH(v,e.u_texture),u_gamma_scale:new u.b8(v,e.u_gamma_scale),u_device_pixel_ratio:new u.b8(v,e.u_device_pixel_ratio),u_is_halo:new u.bH(v,e.u_is_halo),u_translation:new u.bM(v,e.u_translation),u_pitched_scale:new u.b8(v,e.u_pitched_scale)}),symbolTextAndIcon:(v,e)=>({u_is_size_zoom_constant:new u.bH(v,e.u_is_size_zoom_constant),u_is_size_feature_constant:new u.bH(v,e.u_is_size_feature_constant),u_size_t:new u.b8(v,e.u_size_t),u_size:new u.b8(v,e.u_size),u_camera_to_center_distance:new u.b8(v,e.u_camera_to_center_distance),u_pitch:new u.b8(v,e.u_pitch),u_rotate_symbol:new u.bH(v,e.u_rotate_symbol),u_aspect_ratio:new u.b8(v,e.u_aspect_ratio),u_fade_change:new u.b8(v,e.u_fade_change),u_label_plane_matrix:new u.bJ(v,e.u_label_plane_matrix),u_coord_matrix:new u.bJ(v,e.u_coord_matrix),u_is_text:new u.bH(v,e.u_is_text),u_pitch_with_map:new u.bH(v,e.u_pitch_with_map),u_is_along_line:new u.bH(v,e.u_is_along_line),u_is_variable_anchor:new u.bH(v,e.u_is_variable_anchor),u_texsize:new u.bM(v,e.u_texsize),u_texsize_icon:new u.bM(v,e.u_texsize_icon),u_texture:new u.bH(v,e.u_texture),u_texture_icon:new u.bH(v,e.u_texture_icon),u_gamma_scale:new u.b8(v,e.u_gamma_scale),u_device_pixel_ratio:new u.b8(v,e.u_device_pixel_ratio),u_is_halo:new u.bH(v,e.u_is_halo),u_translation:new u.bM(v,e.u_translation),u_pitched_scale:new u.b8(v,e.u_pitched_scale)}),background:(v,e)=>({u_opacity:new u.b8(v,e.u_opacity),u_color:new u.bI(v,e.u_color)}),backgroundPattern:(v,e)=>({u_opacity:new u.b8(v,e.u_opacity),u_image:new u.bH(v,e.u_image),u_pattern_tl_a:new u.bM(v,e.u_pattern_tl_a),u_pattern_br_a:new u.bM(v,e.u_pattern_br_a),u_pattern_tl_b:new u.bM(v,e.u_pattern_tl_b),u_pattern_br_b:new u.bM(v,e.u_pattern_br_b),u_texsize:new u.bM(v,e.u_texsize),u_mix:new u.b8(v,e.u_mix),u_pattern_size_a:new u.bM(v,e.u_pattern_size_a),u_pattern_size_b:new u.bM(v,e.u_pattern_size_b),u_scale_a:new u.b8(v,e.u_scale_a),u_scale_b:new u.b8(v,e.u_scale_b),u_pixel_coord_upper:new u.bM(v,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(v,e.u_pixel_coord_lower),u_tile_units_to_pixels:new u.b8(v,e.u_tile_units_to_pixels)}),terrain:(v,e)=>({u_texture:new u.bH(v,e.u_texture),u_ele_delta:new u.b8(v,e.u_ele_delta),u_fog_matrix:new u.bJ(v,e.u_fog_matrix),u_fog_color:new u.bI(v,e.u_fog_color),u_fog_ground_blend:new u.b8(v,e.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.b8(v,e.u_fog_ground_blend_opacity),u_horizon_color:new u.bI(v,e.u_horizon_color),u_horizon_fog_blend:new u.b8(v,e.u_horizon_fog_blend),u_is_globe_mode:new u.b8(v,e.u_is_globe_mode)}),terrainDepth:(v,e)=>({u_ele_delta:new u.b8(v,e.u_ele_delta)}),terrainCoords:(v,e)=>({u_texture:new u.bH(v,e.u_texture),u_terrain_coords_id:new u.b8(v,e.u_terrain_coords_id),u_ele_delta:new u.b8(v,e.u_ele_delta)}),projectionErrorMeasurement:(v,e)=>({u_input:new u.b8(v,e.u_input),u_output_expected:new u.b8(v,e.u_output_expected)}),atmosphere:(v,e)=>({u_sun_pos:new u.bL(v,e.u_sun_pos),u_atmosphere_blend:new u.b8(v,e.u_atmosphere_blend),u_globe_position:new u.bL(v,e.u_globe_position),u_globe_radius:new u.b8(v,e.u_globe_radius),u_inv_proj_matrix:new u.bJ(v,e.u_inv_proj_matrix)}),sky:(v,e)=>({u_sky_color:new u.bI(v,e.u_sky_color),u_horizon_color:new u.bI(v,e.u_horizon_color),u_horizon:new u.bM(v,e.u_horizon),u_horizon_normal:new u.bM(v,e.u_horizon_normal),u_sky_horizon_blend:new u.b8(v,e.u_sky_horizon_blend),u_sky_blend:new u.b8(v,e.u_sky_blend)})};class Hh{constructor(e,i,h){this.context=e;const m=e.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!h,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,i.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete i.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const i=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),i.bufferSubData(i.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Yf={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Qi{constructor(e,i,h,m){this.length=i.length,this.attributes=h,this.itemSize=i.bytesPerElement,this.dynamicDraw=m,this.context=e;const x=e.gl;this.buffer=x.createBuffer(),e.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,i.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete i.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const i=this.context.gl;this.bind(),i.bufferSubData(i.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,i){for(let h=0;h<this.attributes.length;h++){const m=i.attributes[this.attributes[h].name];m!==void 0&&e.enableVertexAttribArray(m)}}setVertexAttribPointers(e,i,h){for(let m=0;m<this.attributes.length;m++){const x=this.attributes[m],M=i.attributes[x.name];M!==void 0&&e.vertexAttribPointer(M,x.components,e[Yf[x.type]],!1,this.itemSize,x.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Sr{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Oc extends Sr{getDefault(){return u.b7.transparent}set(e){const i=this.current;(e.r!==i.r||e.g!==i.g||e.b!==i.b||e.a!==i.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Xf extends Sr{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class Qf extends Sr{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class Jf extends Sr{getDefault(){return[!0,!0,!0,!0]}set(e){const i=this.current;(e[0]!==i[0]||e[1]!==i[1]||e[2]!==i[2]||e[3]!==i[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Wh extends Sr{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class ed extends Sr{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class mp extends Sr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const i=this.current;(e.func!==i.func||e.ref!==i.ref||e.mask!==i.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Uo extends Sr{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const i=this.current;(e[0]!==i[0]||e[1]!==i[1]||e[2]!==i[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Ol extends Sr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;e?i.enable(i.STENCIL_TEST):i.disable(i.STENCIL_TEST),this.current=e,this.dirty=!1}}class lo extends Sr{getDefault(){return[0,1]}set(e){const i=this.current;(e[0]!==i[0]||e[1]!==i[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class Bl extends Sr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;e?i.enable(i.DEPTH_TEST):i.disable(i.DEPTH_TEST),this.current=e,this.dirty=!1}}class Bc extends Sr{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class pa extends Sr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;e?i.enable(i.BLEND):i.disable(i.BLEND),this.current=e,this.dirty=!1}}class Wa extends Sr{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const i=this.current;(e[0]!==i[0]||e[1]!==i[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class la extends Sr{getDefault(){return u.b7.transparent}set(e){const i=this.current;(e.r!==i.r||e.g!==i.g||e.b!==i.b||e.a!==i.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Kh extends Sr{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class uo extends Sr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;e?i.enable(i.CULL_FACE):i.disable(i.CULL_FACE),this.current=e,this.dirty=!1}}class jc extends Sr{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class co extends Sr{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class Uu extends Sr{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class Nc extends Sr{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class Vu extends Sr{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const i=this.current;(e[0]!==i[0]||e[1]!==i[1]||e[2]!==i[2]||e[3]!==i[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Fc extends Sr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;i.bindFramebuffer(i.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class Yh extends Sr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;i.bindRenderbuffer(i.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Vo extends Sr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;i.bindTexture(i.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class $o extends Sr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;i.bindBuffer(i.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Sa extends Sr{getDefault(){return null}set(e){const i=this.gl;i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class ua extends Sr{getDefault(){return null}set(e){var i;if(e===this.current&&!this.dirty)return;const h=this.gl;Ii(h)?h.bindVertexArray(e):(i=h.getExtension("OES_vertex_array_object"))===null||i===void 0||i.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class Er extends Sr{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class jl extends Sr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class Uc extends Sr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Zo extends Sr{constructor(e,i){super(e),this.context=e,this.parent=i}getDefault(){return null}}class qo extends Zo{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const i=this.gl;i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class ho extends Zo{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const i=this.gl;i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class td extends Zo{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const i=this.gl;i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e),this.current=e,this.dirty=!1}}const Nl="Framebuffer is not complete";class Fl{constructor(e,i,h,m,x){this.context=e,this.width=i,this.height=h;const M=e.gl,P=this.framebuffer=M.createFramebuffer();if(this.colorAttachment=new qo(e,P),m)this.depthAttachment=x?new td(e,P):new ho(e,P);else if(x)throw new Error("Stencil cannot be set without depth");if(M.checkFramebufferStatus(M.FRAMEBUFFER)!==M.FRAMEBUFFER_COMPLETE)throw new Error(Nl)}destroy(){const e=this.context.gl,i=this.colorAttachment.get();if(i&&e.deleteTexture(i),this.depthAttachment){const h=this.depthAttachment.get();h&&e.deleteRenderbuffer(h)}e.deleteFramebuffer(this.framebuffer)}}class Vc{constructor(e){var i,h;if(this.gl=e,this.clearColor=new Oc(this),this.clearDepth=new Xf(this),this.clearStencil=new Qf(this),this.colorMask=new Jf(this),this.depthMask=new Wh(this),this.stencilMask=new ed(this),this.stencilFunc=new mp(this),this.stencilOp=new Uo(this),this.stencilTest=new Ol(this),this.depthRange=new lo(this),this.depthTest=new Bl(this),this.depthFunc=new Bc(this),this.blend=new pa(this),this.blendFunc=new Wa(this),this.blendColor=new la(this),this.blendEquation=new Kh(this),this.cullFace=new uo(this),this.cullFaceSide=new jc(this),this.frontFace=new co(this),this.program=new Uu(this),this.activeTexture=new Nc(this),this.viewport=new Vu(this),this.bindFramebuffer=new Fc(this),this.bindRenderbuffer=new Yh(this),this.bindTexture=new Vo(this),this.bindVertexBuffer=new $o(this),this.bindElementBuffer=new Sa(this),this.bindVertexArray=new ua(this),this.pixelStoreUnpack=new Er(this),this.pixelStoreUnpackPremultiplyAlpha=new jl(this),this.pixelStoreUnpackFlipY=new Uc(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),Ii(e)){this.HALF_FLOAT=e.HALF_FLOAT;const m=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(i=e.RGBA16F)!==null&&i!==void 0?i:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(h=e.RGB16F)!==null&&h!==void 0?h:m==null?void 0:m.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const m=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,i){return new Hh(this,e,i)}createVertexBuffer(e,i,h){return new Qi(this,e,i,h)}createRenderbuffer(e,i,h){const m=this.gl,x=m.createRenderbuffer();return this.bindRenderbuffer.set(x),m.renderbufferStorage(m.RENDERBUFFER,e,i,h),this.bindRenderbuffer.set(null),x}createFramebuffer(e,i,h,m){return new Fl(this,e,i,h,m)}clear({color:e,depth:i,stencil:h}){const m=this.gl;let x=0;e&&(x|=m.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),i!==void 0&&(x|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),h!==void 0&&(x|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(h),this.stencilMask.set(255)),m.clear(x)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){u.bE(e.blendFunction,Wr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return Ii(this.gl)?this.gl.createVertexArray():(e=this.gl.getExtension("OES_vertex_array_object"))===null||e===void 0?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var i;return Ii(this.gl)?this.gl.deleteVertexArray(e):(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}let xi;function gs(v,e,i,h,m){const x=v.context,M=v.transform,P=x.gl,D=v.useProgram("collisionBox"),j=[];let U=0,$=0;for(let me=0;me<h.length;me++){const _e=h[me],Ae=e.getTile(_e).getBucket(i);if(!Ae)continue;const Ee=m?Ae.textCollisionBox:Ae.iconCollisionBox,Pe=Ae.collisionCircleArray;Pe.length>0&&(j.push({circleArray:Pe,circleOffset:$,coord:_e}),U+=Pe.length/4,$=U),Ee&&D.draw(x,P.LINES,hr.disabled,Lr.disabled,v.colorModeForRenderPass(),Vr.disabled,Fh(v.transform),v.style.map.terrain&&v.style.map.terrain.getTerrainData(_e),M.getProjectionData({overscaledTileID:_e,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),i.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,null,v.transform.zoom,null,null,Ee.collisionVertexBuffer)}if(!m||!j.length)return;const Z=v.useProgram("collisionCircle"),ee=new u.bR;ee.resize(4*U),ee._trim();let re=0;for(const me of j)for(let _e=0;_e<me.circleArray.length/4;_e++){const Ae=4*_e,Ee=me.circleArray[Ae+0],Pe=me.circleArray[Ae+1],ze=me.circleArray[Ae+2],Ie=me.circleArray[Ae+3];ee.emplace(re++,Ee,Pe,ze,Ie,0),ee.emplace(re++,Ee,Pe,ze,Ie,1),ee.emplace(re++,Ee,Pe,ze,Ie,2),ee.emplace(re++,Ee,Pe,ze,Ie,3)}(!xi||xi.length<2*U)&&(xi=function(me){const _e=2*me,Ae=new u.bT;Ae.resize(_e),Ae._trim();for(let Ee=0;Ee<_e;Ee++){const Pe=6*Ee;Ae.uint16[Pe+0]=4*Ee+0,Ae.uint16[Pe+1]=4*Ee+1,Ae.uint16[Pe+2]=4*Ee+2,Ae.uint16[Pe+3]=4*Ee+2,Ae.uint16[Pe+4]=4*Ee+3,Ae.uint16[Pe+5]=4*Ee+0}return Ae}(U));const de=x.createIndexBuffer(xi,!0),fe=x.createVertexBuffer(ee,u.bS.members,!0);for(const me of j){const _e=Ic(v.transform);Z.draw(x,P.TRIANGLES,hr.disabled,Lr.disabled,v.colorModeForRenderPass(),Vr.disabled,_e,v.style.map.terrain&&v.style.map.terrain.getTerrainData(me.coord),null,i.id,fe,de,u.aJ.simpleSegment(0,2*me.circleOffset,me.circleArray.length,me.circleArray.length/2),null,v.transform.zoom,null,null,null)}fe.destroy(),de.destroy()}const fo=u.ad(new Float32Array(16));function Ul(v,e,i,h,m,x){const{horizontalAlign:M,verticalAlign:P}=u.aE(v);return new u.P((-(M-.5)*e/m+h[0])*x,(-(P-.5)*i/m+h[1])*x)}function $u(v,e,i,h,m,x){const M=e.tileAnchorPoint.add(new u.P(e.translation[0],e.translation[1]));if(e.pitchWithMap){let P=h.mult(x);i||(P=P.rotate(-m));const D=M.add(P);return Wt(D.x,D.y,e.pitchedLabelPlaneMatrix,e.getElevation).point}if(i){const P=sn(e.tileAnchorPoint.x+1,e.tileAnchorPoint.y,e).point.sub(v),D=Math.atan(P.y/P.x)+(P.x<0?Math.PI:0);return v.add(h.rotate(D))}return v.add(h)}function Ji(v,e,i,h,m,x,M,P,D,j,U,$){const Z=v.text.placedSymbolArray,ee=v.text.dynamicLayoutVertexArray,re=v.icon.dynamicLayoutVertexArray,de={};ee.clear();for(let fe=0;fe<Z.length;fe++){const me=Z.get(fe),_e=me.hidden||!me.crossTileID||v.allowVerticalPlacement&&!me.placedOrientation?null:h[me.crossTileID];if(_e){const Ae=new u.P(me.anchorX,me.anchorY),Ee={getElevation:$,width:m.width,height:m.height,pitchedLabelPlaneMatrix:x,pitchWithMap:i,transform:m,tileAnchorPoint:Ae,translation:j,unwrappedTileID:U},Pe=i?Va(Ae.x,Ae.y,Ee):sn(Ae.x,Ae.y,Ee),ze=vr(m.cameraToCenterDistance,Pe.signedDistanceFromCamera);let Ie=u.am(v.textSizeData,P,me)*ze/u.ay;i&&(Ie*=v.tilePixelRatio/M);const{width:$e,height:He,anchor:at,textOffset:ot,textBoxScale:rt}=_e,It=Ul(at,$e,He,ot,rt,Ie),Tt=m.getPitchedTextCorrection(Ae.x+j[0],Ae.y+j[1],U),pt=$u(Pe.point,Ee,e,It,-m.bearingInRadians,Tt),Vt=v.allowVerticalPlacement&&me.placedOrientation===u.al.vertical?Math.PI/2:0;for(let gr=0;gr<me.numGlyphs;gr++)u.as(ee,pt,Vt);D&&me.associatedIconIndex>=0&&(de[me.associatedIconIndex]={shiftedAnchor:pt,angle:Vt})}else wn(me.numGlyphs,ee)}if(D){re.clear();const fe=v.icon.placedSymbolArray;for(let me=0;me<fe.length;me++){const _e=fe.get(me);if(_e.hidden)wn(_e.numGlyphs,re);else{const Ae=de[me];if(Ae)for(let Ee=0;Ee<_e.numGlyphs;Ee++)u.as(re,Ae.shiftedAnchor,Ae.angle);else wn(_e.numGlyphs,re)}}v.icon.dynamicLayoutVertexBuffer.updateData(re)}v.text.dynamicLayoutVertexBuffer.updateData(ee)}function ea(v,e,i){return i.iconsInText&&e?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function ys(v,e,i,h,m,x,M,P,D,j,U,$,Z){const ee=v.context,re=ee.gl,de=v.transform,fe=P==="map",me=D==="map",_e=P!=="viewport"&&i.layout.get("symbol-placement")!=="point",Ae=fe&&!me&&!_e,Ee=!i.layout.get("symbol-sort-key").isConstant();let Pe=!1;const ze=v.getDepthModeForSublayer(0,hr.ReadOnly),Ie=i._unevaluatedLayout.hasValue("text-variable-anchor")||i._unevaluatedLayout.hasValue("text-variable-anchor-offset"),$e=[],He=de.getCircleRadiusCorrection();for(const at of h){const ot=e.getTile(at),rt=ot.getBucket(i);if(!rt)continue;const It=m?rt.text:rt.icon;if(!It||!It.segments.get().length||!It.hasVisibleVertices)continue;const Tt=It.programConfigurations.get(i.id),pt=m||rt.sdfIcons,Vt=m?rt.textSizeData:rt.iconSizeData,gr=me||de.pitch!==0,tr=v.useProgram(ea(pt,m,rt),Tt),pn=u.ak(Vt,de.zoom),Kr=v.style.map.terrain&&v.style.map.terrain.getTerrainData(at);let vn,mn,Ir,zr,Mn=[0,0],An=null;if(m)mn=ot.glyphAtlasTexture,Ir=re.LINEAR,vn=ot.glyphAtlasTexture.size,rt.iconsInText&&(Mn=ot.imageAtlasTexture.size,An=ot.imageAtlasTexture,zr=gr||v.options.rotating||v.options.zooming||Vt.kind==="composite"||Vt.kind==="camera"?re.LINEAR:re.NEAREST);else{const Cn=i.layout.get("icon-size").constantOr(0)!==1||rt.iconsNeedLinear;mn=ot.imageAtlasTexture,Ir=pt||v.options.rotating||v.options.zooming||Cn||gr?re.LINEAR:re.NEAREST,vn=ot.imageAtlasTexture.size}const fi=u.az(ot,1,v.transform.zoom),wi=Ft(fe,v.transform,fi),Ja=u.K();u.an(Ja,wi);const Zs=lr(me,fe,v.transform,fi),ra=u.aA(de,ot,x,M),Ia=de.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),es=Ie&&rt.hasTextData(),xo=i.layout.get("icon-text-fit")!=="none"&&es&&rt.hasIconData();if(_e){const Cn=v.style.map.terrain?(jn,Mr)=>v.style.map.terrain.getElevation(at,jn,Mr):null,xn=i.layout.get("text-rotation-alignment")==="map";Cr(rt,v,m,wi,Ja,me,j,xn,at.toUnwrapped(),de.width,de.height,ra,Cn)}const bo=m&&Ie||xo,Zi=_e||bo?fo:me?wi:v.transform.clipSpaceToPixelsMatrix,qs=pt&&i.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ts;ts=pt?rt.iconsInText?qh(Vt.kind,pn,Ae,me,_e,bo,v,Zi,Zs,ra,vn,Mn,He):Nu(Vt.kind,pn,Ae,me,_e,bo,v,Zi,Zs,ra,m,vn,0,He):ju(Vt.kind,pn,Ae,me,_e,bo,v,Zi,Zs,ra,m,vn,He);const Ts={program:tr,buffers:It,uniformValues:ts,projectionData:Ia,atlasTexture:mn,atlasTextureIcon:An,atlasInterpolation:Ir,atlasInterpolationIcon:zr,isSDF:pt,hasHalo:qs};if(Ee&&rt.canOverlap){Pe=!0;const Cn=It.segments.get();for(const xn of Cn)$e.push({segments:new u.aJ([xn]),sortKey:xn.sortKey,state:Ts,terrainData:Kr})}else $e.push({segments:It.segments,sortKey:0,state:Ts,terrainData:Kr})}Pe&&$e.sort((at,ot)=>at.sortKey-ot.sortKey);for(const at of $e){const ot=at.state;if(ee.activeTexture.set(re.TEXTURE0),ot.atlasTexture.bind(ot.atlasInterpolation,re.CLAMP_TO_EDGE),ot.atlasTextureIcon&&(ee.activeTexture.set(re.TEXTURE1),ot.atlasTextureIcon&&ot.atlasTextureIcon.bind(ot.atlasInterpolationIcon,re.CLAMP_TO_EDGE)),ot.isSDF){const rt=ot.uniformValues;ot.hasHalo&&(rt.u_is_halo=1,_s(ot.buffers,at.segments,i,v,ot.program,ze,U,$,rt,ot.projectionData,at.terrainData)),rt.u_is_halo=0}_s(ot.buffers,at.segments,i,v,ot.program,ze,U,$,ot.uniformValues,ot.projectionData,at.terrainData)}}function _s(v,e,i,h,m,x,M,P,D,j,U){const $=h.context;m.draw($,$.gl.TRIANGLES,x,M,P,Vr.backCCW,D,U,j,i.id,v.layoutVertexBuffer,v.indexBuffer,e,i.paint,h.transform.zoom,v.programConfigurations.get(i.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function Ka(v,e,i,h,m){const x=v.context,M=x.gl,P=Lr.disabled,D=new Wr([M.ONE,M.ONE],u.b7.transparent,[!0,!0,!0,!0]),j=e.getBucket(i);if(!j)return;const U=h.key;let $=i.heatmapFbos.get(U);$||($=$c(x,e.tileSize,e.tileSize),i.heatmapFbos.set(U,$)),x.bindFramebuffer.set($.framebuffer),x.viewport.set([0,0,e.tileSize,e.tileSize]),x.clear({color:u.b7.transparent});const Z=j.programConfigurations.get(i.id),ee=v.useProgram("heatmap",Z,!m),re=v.transform.getProjectionData({overscaledTileID:e.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),de=v.style.map.terrain.getTerrainData(h);ee.draw(x,M.TRIANGLES,hr.disabled,P,D,Vr.disabled,oo(e,v.transform.zoom,i.paint.get("heatmap-intensity"),1),de,re,i.id,j.layoutVertexBuffer,j.indexBuffer,j.segments,i.paint,v.transform.zoom,Z)}function Go(v,e,i,h,m){const x=v.context,M=x.gl,P=v.transform;x.setColorMode(v.colorModeForRenderPass());const D=Ho(x,e),j=i.key,U=e.heatmapFbos.get(j);if(!U)return;x.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,U.colorAttachment.get()),x.activeTexture.set(M.TEXTURE1),D.bind(M.LINEAR,M.CLAMP_TO_EDGE);const $=P.getProjectionData({overscaledTileID:i,applyTerrainMatrix:m,applyGlobeMatrix:!h});v.useProgram("heatmapTexture").draw(x,M.TRIANGLES,hr.disabled,Lr.disabled,v.colorModeForRenderPass(),Vr.disabled,Uh(v,e,0,1),null,$,e.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments,e.paint,P.zoom),U.destroy(),e.heatmapFbos.delete(j)}function $c(v,e,i){var h,m;const x=v.gl,M=x.createTexture();x.bindTexture(x.TEXTURE_2D,M),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.LINEAR);const P=(h=v.HALF_FLOAT)!==null&&h!==void 0?h:x.UNSIGNED_BYTE,D=(m=v.RGBA16F)!==null&&m!==void 0?m:x.RGBA;x.texImage2D(x.TEXTURE_2D,0,D,e,i,0,x.RGBA,P,null);const j=v.createFramebuffer(e,i,!1,!1);return j.colorAttachment.set(M),j}function Ho(v,e){return e.colorRampTexture||(e.colorRampTexture=new Ke(v,e.colorRamp,v.gl.RGBA)),e.colorRampTexture}function Vl(v,e,i,h,m){if(!i||!h||!h.imageAtlas)return;const x=h.imageAtlas.patternPositions;let M=x[i.to.toString()],P=x[i.from.toString()];if(!M&&P&&(M=P),!P&&M&&(P=M),!M||!P){const D=m.getPaintProperty(e);M=x[D],P=x[D]}M&&P&&v.setConstantPatternPositions(M,P)}function Di(v,e,i,h,m,x,M,P){const D=v.context.gl,j="fill-pattern",U=i.paint.get(j),$=U&&U.constantOr(1),Z=i.getCrossfadeParameters();let ee,re,de,fe,me;const _e=v.transform,Ae=i.paint.get("fill-translate"),Ee=i.paint.get("fill-translate-anchor");M?(re=$&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ee=D.LINES):(re=$?"fillPattern":"fill",ee=D.TRIANGLES);const Pe=U.constantOr(null);for(const ze of h){const Ie=e.getTile(ze);if($&&!Ie.patternsLoaded())continue;const $e=Ie.getBucket(i);if(!$e)continue;const He=$e.programConfigurations.get(i.id),at=v.useProgram(re,He),ot=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ze);$&&(v.context.activeTexture.set(D.TEXTURE0),Ie.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),He.updatePaintBuffers(Z)),Vl(He,j,Pe,Ie,i);const rt=_e.getProjectionData({overscaledTileID:ze,applyGlobeMatrix:!P,applyTerrainMatrix:!0}),It=u.aA(_e,Ie,Ae,Ee);if(M){fe=$e.indexBuffer2,me=$e.segments2;const pt=[D.drawingBufferWidth,D.drawingBufferHeight];de=re==="fillOutlinePattern"&&$?Nh(v,Z,Ie,pt,It):pp(pt,It)}else fe=$e.indexBuffer,me=$e.segments,de=$?Ha(v,Z,Ie,It):{u_fill_translate:It};let Tt;if(v.renderPass==="translucent"&&P){const[pt]=v.getStencilConfigForOverlapAndUpdateStencilID(h);Tt=pt[ze.overscaledZ]}else Tt=v.stencilModeForClipping(ze);at.draw(v.context,ee,m,Tt,x,Vr.backCCW,de,ot,rt,i.id,$e.layoutVertexBuffer,fe,me,i.paint,v.transform.zoom,He)}}function ti(v,e,i,h,m,x,M,P){const D=v.context,j=D.gl,U="fill-extrusion-pattern",$=i.paint.get(U),Z=$.constantOr(1),ee=i.getCrossfadeParameters(),re=i.paint.get("fill-extrusion-opacity"),de=$.constantOr(null),fe=v.transform;for(const me of h){const _e=e.getTile(me),Ae=_e.getBucket(i);if(!Ae)continue;const Ee=v.style.map.terrain&&v.style.map.terrain.getTerrainData(me),Pe=Ae.programConfigurations.get(i.id),ze=v.useProgram(Z?"fillExtrusionPattern":"fillExtrusion",Pe);Z&&(v.context.activeTexture.set(j.TEXTURE0),_e.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),Pe.updatePaintBuffers(ee));const Ie=fe.getProjectionData({overscaledTileID:me,applyGlobeMatrix:!P,applyTerrainMatrix:!0});Vl(Pe,U,de,_e,i);const $e=u.aA(fe,_e,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),He=i.paint.get("fill-extrusion-vertical-gradient"),at=Z?jh(v,He,re,$e,me,ee,_e):zu(v,He,re,$e);ze.draw(D,D.gl.TRIANGLES,m,x,M,Vr.backCCW,at,Ee,Ie,i.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,i.paint,v.transform.zoom,Pe,v.style.map.terrain&&Ae.centroidVertexBuffer)}}function Br(v,e,i,h,m,x,M,P,D){var j;const U=v.style.projection,$=v.context,Z=v.transform,ee=$.gl,re=v.useProgram("hillshade"),de=!v.options.moving;for(const fe of h){const me=e.getTile(fe),_e=me.fbo;if(!_e)continue;const Ae=U.getMeshFromTileID($,fe.canonical,P,!0,"raster"),Ee=(j=v.style.map.terrain)===null||j===void 0?void 0:j.getTerrainData(fe);$.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,_e.colorAttachment.get());const Pe=Z.getProjectionData({overscaledTileID:fe,aligned:de,applyGlobeMatrix:!D,applyTerrainMatrix:!0});re.draw($,ee.TRIANGLES,x,m[fe.overscaledZ],M,Vr.backCCW,Kf(v,me,i),Ee,Pe,i.id,Ae.vertexBuffer,Ae.indexBuffer,Ae.segments)}}const ta=[new u.P(0,0),new u.P(u.Z,0),new u.P(u.Z,u.Z),new u.P(0,u.Z)];function ma(v,e,i,h,m,x,M,P,D=!1,j=!1){const U=h[h.length-1].overscaledZ,$=v.context,Z=$.gl,ee=v.useProgram("raster"),re=v.transform,de=v.style.projection,fe=v.colorModeForRenderPass(),me=!v.options.moving;for(const _e of h){const Ae=v.getDepthModeForSublayer(_e.overscaledZ-U,i.paint.get("raster-opacity")===1?hr.ReadWrite:hr.ReadOnly,Z.LESS),Ee=e.getTile(_e);Ee.registerFadeDuration(i.paint.get("raster-fade-duration"));const Pe=e.findLoadedParent(_e,0),ze=e.findLoadedSibling(_e),Ie=Zc(Ee,Pe||ze||null,e,i,v.transform,v.style.map.terrain);let $e,He;const at=i.paint.get("raster-resampling")==="nearest"?Z.NEAREST:Z.LINEAR;$.activeTexture.set(Z.TEXTURE0),Ee.texture.bind(at,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),$.activeTexture.set(Z.TEXTURE1),Pe?(Pe.texture.bind(at,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),$e=Math.pow(2,Pe.tileID.overscaledZ-Ee.tileID.overscaledZ),He=[Ee.tileID.canonical.x*$e%1,Ee.tileID.canonical.y*$e%1]):Ee.texture.bind(at,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),Ee.texture.useMipmap&&$.extTextureFilterAnisotropic&&v.transform.pitch>20&&Z.texParameterf(Z.TEXTURE_2D,$.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,$.extTextureFilterAnisotropicMax);const ot=v.style.map.terrain&&v.style.map.terrain.getTerrainData(_e),rt=re.getProjectionData({overscaledTileID:_e,aligned:me,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),It=Zh(He||[0,0],$e||1,Ie,i,P),Tt=de.getMeshFromTileID($,_e.canonical,x,M,"raster");ee.draw($,Z.TRIANGLES,Ae,m?m[_e.overscaledZ]:Lr.disabled,fe,D?Vr.frontCCW:Vr.backCCW,It,ot,rt,i.id,Tt.vertexBuffer,Tt.indexBuffer,Tt.segments)}}function Zc(v,e,i,h,m,x){const M=h.paint.get("raster-fade-duration");if(!x&&M>0){const P=z.now(),D=(P-v.timeAdded)/M,j=e?(P-e.timeAdded)/M:-1,U=i.getSource(),$=Ve(m,{tileSize:U.tileSize,roundZoom:U.roundZoom}),Z=!e||Math.abs(e.tileID.overscaledZ-$)>Math.abs(v.tileID.overscaledZ-$),ee=Z&&v.refreshedUponExpiration?1:u.ae(Z?D:1-j,0,1);return v.refreshedUponExpiration&&D>=1&&(v.refreshedUponExpiration=!1),e?{opacity:1,mix:1-ee}:{opacity:ee,mix:0}}return{opacity:1,mix:0}}const un=new u.b7(1,0,0,1),po=new u.b7(0,1,0,1),ga=new u.b7(0,0,1,1),Wo=new u.b7(1,0,1,1),Ko=new u.b7(0,1,1,1);function Yo(v,e,i,h){Bs(v,0,e+i/2,v.transform.width,i,h)}function Ya(v,e,i,h){Bs(v,e-i/2,0,i,v.transform.height,h)}function Bs(v,e,i,h,m,x){const M=v.context,P=M.gl;P.enable(P.SCISSOR_TEST),P.scissor(e*v.pixelRatio,i*v.pixelRatio,h*v.pixelRatio,m*v.pixelRatio),M.clear({color:x}),P.disable(P.SCISSOR_TEST)}function Zu(v,e,i){const h=v.context,m=h.gl,x=v.useProgram("debug"),M=hr.disabled,P=Lr.disabled,D=v.colorModeForRenderPass(),j="$debug",U=v.style.map.terrain&&v.style.map.terrain.getTerrainData(i);h.activeTexture.set(m.TEXTURE0);const $=e.getTileByID(i.key).latestRawTileData,Z=Math.floor(($&&$.byteLength||0)/1024),ee=e.getTile(i).tileSize,re=512/Math.min(ee,512)*(i.overscaledZ/v.transform.zoom)*.5;let de=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(de+=` => ${i.overscaledZ}`),function(me,_e){me.initDebugOverlayCanvas();const Ae=me.debugOverlayCanvas,Ee=me.context.gl,Pe=me.debugOverlayCanvas.getContext("2d");Pe.clearRect(0,0,Ae.width,Ae.height),Pe.shadowColor="white",Pe.shadowBlur=2,Pe.lineWidth=1.5,Pe.strokeStyle="white",Pe.textBaseline="top",Pe.font="bold 36px Open Sans, sans-serif",Pe.fillText(_e,5,5),Pe.strokeText(_e,5,5),me.debugOverlayTexture.update(Ae),me.debugOverlayTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE)}(v,`${de} ${Z}kB`);const fe=v.transform.getProjectionData({overscaledTileID:i,applyGlobeMatrix:!0,applyTerrainMatrix:!0});x.draw(h,m.TRIANGLES,M,P,Wr.alphaBlended,Vr.disabled,Dc(u.b7.transparent,re),null,fe,j,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),x.draw(h,m.LINE_STRIP,M,P,D,Vr.disabled,Dc(u.b7.red),U,fe,j,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function qc(v,e,i,h){const{isRenderingGlobe:m}=h,x=v.context,M=x.gl,P=v.transform,D=v.colorModeForRenderPass(),j=v.getDepthModeFor3D(),U=v.useProgram("terrain");x.bindFramebuffer.set(null),x.viewport.set([0,0,v.width,v.height]);for(const $ of i){const Z=e.getTerrainMesh($.tileID),ee=v.renderToTexture.getTexture($),re=e.getTerrainData($.tileID);x.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,ee.texture);const de=e.getMeshFrameDelta(P.zoom),fe=P.calculateFogMatrix($.tileID.toUnwrapped()),me=dp(de,fe,v.style.sky,P.pitch,m),_e=P.getProjectionData({overscaledTileID:$.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});U.draw(x,M.TRIANGLES,j,Lr.disabled,D,Vr.backCCW,me,re,_e,"terrain",Z.vertexBuffer,Z.indexBuffer,Z.segments)}}function $l(v,e){if(!e.mesh){const i=new u.aI;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(1,1),i.emplaceBack(-1,1);const h=new u.aK;h.emplaceBack(0,1,2),h.emplaceBack(0,2,3),e.mesh=new Oo(v.createVertexBuffer(i,Za.members),v.createIndexBuffer(h),u.aJ.simpleSegment(0,0,i.length,h.length))}return e.mesh}class Xh{constructor(e,i){this.context=new Vc(e),this.transform=i,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ue.maxUnderzooming+Ue.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ps}resize(e,i,h){if(this.width=Math.floor(e*h),this.height=Math.floor(i*h),this.pixelRatio=h,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const e=this.context,i=new u.aI;i.emplaceBack(0,0),i.emplaceBack(u.Z,0),i.emplaceBack(0,u.Z),i.emplaceBack(u.Z,u.Z),this.tileExtentBuffer=e.createVertexBuffer(i,Za.members),this.tileExtentSegments=u.aJ.simpleSegment(0,0,4,2);const h=new u.aI;h.emplaceBack(0,0),h.emplaceBack(u.Z,0),h.emplaceBack(0,u.Z),h.emplaceBack(u.Z,u.Z),this.debugBuffer=e.createVertexBuffer(h,Za.members),this.debugSegments=u.aJ.simpleSegment(0,0,4,5);const m=new u.bY;m.emplaceBack(0,0,0,0),m.emplaceBack(u.Z,0,u.Z,0),m.emplaceBack(0,u.Z,0,u.Z),m.emplaceBack(u.Z,u.Z,u.Z,u.Z),this.rasterBoundsBuffer=e.createVertexBuffer(m,Oh.members),this.rasterBoundsSegments=u.aJ.simpleSegment(0,0,4,2);const x=new u.aI;x.emplaceBack(0,0),x.emplaceBack(u.Z,0),x.emplaceBack(0,u.Z),x.emplaceBack(u.Z,u.Z),this.rasterBoundsBufferPosOnly=e.createVertexBuffer(x,Za.members),this.rasterBoundsSegmentsPosOnly=u.aJ.simpleSegment(0,0,4,5);const M=new u.aI;M.emplaceBack(0,0),M.emplaceBack(1,0),M.emplaceBack(0,1),M.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(M,Za.members),this.viewportSegments=u.aJ.simpleSegment(0,0,4,2);const P=new u.bZ;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(P);const D=new u.aK;D.emplaceBack(1,0,2),D.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(D);const j=this.context.gl;this.stencilClearMode=new Lr({func:j.ALWAYS,mask:0},0,255,j.ZERO,j.ZERO,j.ZERO),this.tileExtentMesh=new Oo(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const e=this.context,i=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const h=u.K();u.bQ(h,0,this.width,this.height,0,0,1),u.M(h,h,[i.drawingBufferWidth,i.drawingBufferHeight,0]);const m={mainMatrix:h,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:h};this.useProgram("clippingMask",null,!0).draw(e,i.TRIANGLES,hr.disabled,this.stencilClearMode,Wr.disabled,Vr.disabled,null,null,m,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,i,h){if(this.currentStencilSource===e.source||!e.isTileClipped()||!i||!i.length)return;this.currentStencilSource=e.source,this.nextStencilID+i.length>256&&this.clearStencil();const m=this.context;m.setColorMode(Wr.disabled),m.setDepthMode(hr.disabled);const x={};for(const M of i)x[M.key]=this.nextStencilID++;this._renderTileMasks(x,i,h,!0),this._renderTileMasks(x,i,h,!1),this._tileClippingMaskIDs=x}_renderTileMasks(e,i,h,m){const x=this.context,M=x.gl,P=this.style.projection,D=this.transform,j=this.useProgram("clippingMask");for(const U of i){const $=e[U.key],Z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(U),ee=P.getMeshFromTileID(this.context,U.canonical,m,!0,"stencil"),re=D.getProjectionData({overscaledTileID:U,applyGlobeMatrix:!0,applyTerrainMatrix:!0});j.draw(x,M.TRIANGLES,hr.disabled,new Lr({func:M.ALWAYS,mask:0},$,255,M.KEEP,M.KEEP,M.REPLACE),Wr.disabled,h?Vr.disabled:Vr.backCCW,null,Z,re,"$clipping",ee.vertexBuffer,ee.indexBuffer,ee.segments)}}_renderTilesDepthBuffer(){const e=this.context,i=e.gl,h=this.style.projection,m=this.transform,x=this.useProgram("depth"),M=this.getDepthModeFor3D(),P=Ce(m,{tileSize:m.tileSize});for(const D of P){const j=this.style.map.terrain&&this.style.map.terrain.getTerrainData(D),U=h.getMeshFromTileID(this.context,D.canonical,!0,!0,"raster"),$=m.getProjectionData({overscaledTileID:D,applyGlobeMatrix:!0,applyTerrainMatrix:!0});x.draw(e,i.TRIANGLES,M,Lr.disabled,Wr.disabled,Vr.backCCW,null,j,$,"$clipping",U.vertexBuffer,U.indexBuffer,U.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,i=this.context.gl;return new Lr({func:i.NOTEQUAL,mask:255},e,255,i.KEEP,i.KEEP,i.REPLACE)}stencilModeForClipping(e){const i=this.context.gl;return new Lr({func:i.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,i.KEEP,i.KEEP,i.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(e){const i=this.context.gl,h=e.sort((M,P)=>P.overscaledZ-M.overscaledZ),m=h[h.length-1].overscaledZ,x=h[0].overscaledZ-m+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const M={};for(let P=0;P<x;P++)M[P+m]=new Lr({func:i.GEQUAL,mask:255},P+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=x,[M,h]}return[{[m]:Lr.disabled},h]}stencilConfigForOverlapTwoPass(e){const i=this.context.gl,h=e.sort((M,P)=>P.overscaledZ-M.overscaledZ),m=h[h.length-1].overscaledZ,x=h[0].overscaledZ-m+1;if(this.clearStencil(),x>1){const M={},P={};for(let D=0;D<x;D++)M[D+m]=new Lr({func:i.GREATER,mask:255},x+1+D,255,i.KEEP,i.KEEP,i.REPLACE),P[D+m]=new Lr({func:i.GREATER,mask:255},1+D,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID=2*x+1,[M,P,h]}return this.nextStencilID=3,[{[m]:new Lr({func:i.GREATER,mask:255},2,255,i.KEEP,i.KEEP,i.REPLACE)},{[m]:new Lr({func:i.GREATER,mask:255},1,255,i.KEEP,i.KEEP,i.REPLACE)},h]}colorModeForRenderPass(){const e=this.context.gl;return this._showOverdrawInspector?new Wr([e.CONSTANT_COLOR,e.ONE],new u.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Wr.unblended:Wr.alphaBlended}getDepthModeForSublayer(e,i,h){if(!this.opaquePassEnabledForLayer())return hr.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new hr(h||this.context.gl.LEQUAL,i,[m,m])}getDepthModeFor3D(){return new hr(this.context.gl.LEQUAL,hr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,i){var h,m;this.style=e,this.options=i,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(z.now()),this.imageManager.beginFrame();const x=this.style._order,M=this.style.sourceCaches,P={},D={},j={},U={isRenderingToTexture:!1,isRenderingGlobe:((h=e.projection)===null||h===void 0?void 0:h.transitionState)>0};for(const Z in M){const ee=M[Z];ee.used&&ee.prepare(this.context),P[Z]=ee.getVisibleCoordinates(!1),D[Z]=P[Z].slice().reverse(),j[Z]=ee.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Z=0;Z<x.length;Z++)if(this.style._layers[x[Z]].is3D()){this.opaquePassCutoff=Z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Z of x){const ee=this.style._layers[Z];if(!ee.hasOffscreenPass()||ee.isHidden(this.transform.zoom))continue;const re=D[ee.source];(ee.type==="custom"||re.length)&&this.renderLayer(this,M[ee.source],ee,re,U)}if((m=this.style.projection)===null||m===void 0||m.updateGPUdependent({context:this.context,useProgram:Z=>this.useProgram(Z)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?u.b7.black:u.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Z,ee){const re=Z.context,de=re.gl,fe=((ze,Ie,$e)=>{const He=Math.cos(Ie.rollInRadians),at=Math.sin(Ie.rollInRadians),ot=je(Ie),rt=Ie.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ze.properties.get("sky-color"),u_horizon_color:ze.properties.get("horizon-color"),u_horizon:[(Ie.width/2-ot*at)*$e,(Ie.height/2+ot*He)*$e],u_horizon_normal:[-at,He],u_sky_horizon_blend:ze.properties.get("sky-horizon-blend")*Ie.height/2*$e,u_sky_blend:rt}})(ee,Z.style.map.transform,Z.pixelRatio),me=new hr(de.LEQUAL,hr.ReadWrite,[0,1]),_e=Lr.disabled,Ae=Z.colorModeForRenderPass(),Ee=Z.useProgram("sky"),Pe=$l(re,ee);Ee.draw(re,de.TRIANGLES,me,_e,Ae,Vr.disabled,fe,null,void 0,"sky",Pe.vertexBuffer,Pe.indexBuffer,Pe.segments)}(this,this.style.sky),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=x.length-1;this.currentLayer>=0;this.currentLayer--){const Z=this.style._layers[x[this.currentLayer]],ee=M[Z.source],re=P[Z.source];this._renderTileClippingMasks(Z,re,!1),this.renderLayer(this,ee,Z,re,U)}this.renderPass="translucent";let $=!1;for(this.currentLayer=0;this.currentLayer<x.length;this.currentLayer++){const Z=this.style._layers[x[this.currentLayer]],ee=M[Z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Z,U))continue;this.opaquePassEnabledForLayer()||$||($=!0,U.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const re=(Z.type==="symbol"?j:D)[Z.source];this._renderTileClippingMasks(Z,P[Z.source],!1),this.renderLayer(this,ee,Z,re,U)}if(U.isRenderingGlobe&&function(Z,ee,re){const de=Z.context,fe=de.gl,me=Z.useProgram("atmosphere"),_e=new hr(fe.LEQUAL,hr.ReadOnly,[0,1]),Ae=Z.transform,Ee=function(rt,It){const Tt=rt.properties.get("position"),pt=[-Tt.x,-Tt.y,-Tt.z],Vt=u.ad(new Float64Array(16));return rt.properties.get("anchor")==="map"&&(u.a_(Vt,Vt,It.rollInRadians),u.a$(Vt,Vt,-It.pitchInRadians),u.a_(Vt,Vt,It.bearingInRadians),u.a$(Vt,Vt,It.center.lat*Math.PI/180),u.bp(Vt,Vt,-It.center.lng*Math.PI/180)),u.bX(pt,pt,Vt),pt}(re,Z.transform),Pe=Ae.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ze=ee.properties.get("atmosphere-blend")*Pe.projectionTransition;if(ze===0)return;const Ie=Cc(Ae.worldSize,Ae.center.lat),$e=Ae.inverseProjectionMatrix,He=new Float64Array(4);He[3]=1,u.at(He,He,Ae.modelViewProjectionMatrix),He[0]/=He[3],He[1]/=He[3],He[2]/=He[3],He[3]=1,u.at(He,He,$e),He[0]/=He[3],He[1]/=He[3],He[2]/=He[3],He[3]=1;const at=((rt,It,Tt,pt,Vt)=>({u_sun_pos:rt,u_atmosphere_blend:It,u_globe_position:Tt,u_globe_radius:pt,u_inv_proj_matrix:Vt}))(Ee,ze,[He[0],He[1],He[2]],Ie,$e),ot=$l(de,ee);me.draw(de,fe.TRIANGLES,_e,Lr.disabled,Wr.alphaBlended,Vr.disabled,at,null,null,"atmosphere",ot.vertexBuffer,ot.indexBuffer,ot.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Z=function(ee,re){let de=null;const fe=Object.values(ee._layers).flatMap(Ee=>Ee.source&&!Ee.isHidden(re)?[ee.sourceCaches[Ee.source]]:[]),me=fe.filter(Ee=>Ee.getSource().type==="vector"),_e=fe.filter(Ee=>Ee.getSource().type!=="vector"),Ae=Ee=>{(!de||de.getSource().maxzoom<Ee.getSource().maxzoom)&&(de=Ee)};return me.forEach(Ee=>Ae(Ee)),de||_e.forEach(Ee=>Ae(Ee)),de}(this.style,this.transform.zoom);Z&&function(ee,re,de){for(let fe=0;fe<de.length;fe++)Zu(ee,re,de[fe])}(this,Z,Z.getVisibleCoordinates())}this.options.showPadding&&function(Z){const ee=Z.transform.padding;Yo(Z,Z.transform.height-(ee.top||0),3,un),Yo(Z,ee.bottom||0,3,po),Ya(Z,ee.left||0,3,ga),Ya(Z,Z.transform.width-(ee.right||0),3,Wo);const re=Z.transform.centerPoint;(function(de,fe,me,_e){Bs(de,fe-1,me-10,2,20,_e),Bs(de,fe-10,me-1,20,2,_e)})(Z,re.x,Z.transform.height-re.y,Ko)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const i=this.terrainFacilitator.matrix,h=this.transform.modelViewProjectionMatrix;let m=this.terrainFacilitator.dirty;m||(m=e?!u.b_(i,h):!u.b$(i,h)),m||(m=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),m&&(u.c0(i,h),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(x,M){const P=x.context,D=P.gl,j=x.transform,U=Wr.unblended,$=new hr(D.LEQUAL,hr.ReadWrite,[0,1]),Z=M.sourceCache.getRenderableTiles(),ee=x.useProgram("terrainDepth");P.bindFramebuffer.set(M.getFramebuffer("depth").framebuffer),P.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),P.clear({color:u.b7.transparent,depth:1});for(const re of Z){const de=M.getTerrainMesh(re.tileID),fe=M.getTerrainData(re.tileID),me=j.getProjectionData({overscaledTileID:re.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),_e={u_ele_delta:M.getMeshFrameDelta(j.zoom)};ee.draw(P,D.TRIANGLES,$,Lr.disabled,U,Vr.backCCW,_e,fe,me,"terrain",de.vertexBuffer,de.indexBuffer,de.segments)}P.bindFramebuffer.set(null),P.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain),function(x,M){const P=x.context,D=P.gl,j=x.transform,U=Wr.unblended,$=new hr(D.LEQUAL,hr.ReadWrite,[0,1]),Z=M.getCoordsTexture(),ee=M.sourceCache.getRenderableTiles(),re=x.useProgram("terrainCoords");P.bindFramebuffer.set(M.getFramebuffer("coords").framebuffer),P.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),P.clear({color:u.b7.transparent,depth:1}),M.coordsIndex=[];for(const de of ee){const fe=M.getTerrainMesh(de.tileID),me=M.getTerrainData(de.tileID);P.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,Z.texture);const _e={u_terrain_coords_id:(255-M.coordsIndex.length)/255,u_texture:0,u_ele_delta:M.getMeshFrameDelta(j.zoom)},Ae=j.getProjectionData({overscaledTileID:de.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});re.draw(P,D.TRIANGLES,$,Lr.disabled,U,Vr.backCCW,_e,me,Ae,"terrain",fe.vertexBuffer,fe.indexBuffer,fe.segments),M.coordsIndex.push(de.tileID.key)}P.bindFramebuffer.set(null),P.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain))}renderLayer(e,i,h,m,x){h.isHidden(this.transform.zoom)||(h.type==="background"||h.type==="custom"||(m||[]).length)&&(this.id=h.id,u.c1(h)?function(M,P,D,j,U,$){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=$,ee=Lr.disabled,re=M.colorModeForRenderPass();(D._unevaluatedLayout.hasValue("text-variable-anchor")||D._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(de,fe,me,_e,Ae,Ee,Pe,ze,Ie){const $e=fe.transform,He=fe.style.map.terrain,at=Ae==="map",ot=Ee==="map";for(const rt of de){const It=_e.getTile(rt),Tt=It.getBucket(me);if(!Tt||!Tt.text||!Tt.text.segments.get().length)continue;const pt=u.ak(Tt.textSizeData,$e.zoom),Vt=u.az(It,1,fe.transform.zoom),gr=Ft(at,fe.transform,Vt),tr=me.layout.get("icon-text-fit")!=="none"&&Tt.hasIconData();if(pt){const pn=Math.pow(2,$e.zoom-It.tileID.overscaledZ),Kr=He?(vn,mn)=>He.getElevation(rt,vn,mn):null;Ji(Tt,at,ot,Ie,$e,gr,pn,pt,tr,u.aA($e,It,Pe,ze),rt.toUnwrapped(),Kr)}}}(j,M,D,P,D.layout.get("text-rotation-alignment"),D.layout.get("text-pitch-alignment"),D.paint.get("text-translate"),D.paint.get("text-translate-anchor"),U),D.paint.get("icon-opacity").constantOr(1)!==0&&ys(M,P,D,j,!1,D.paint.get("icon-translate"),D.paint.get("icon-translate-anchor"),D.layout.get("icon-rotation-alignment"),D.layout.get("icon-pitch-alignment"),D.layout.get("icon-keep-upright"),ee,re,Z),D.paint.get("text-opacity").constantOr(1)!==0&&ys(M,P,D,j,!0,D.paint.get("text-translate"),D.paint.get("text-translate-anchor"),D.layout.get("text-rotation-alignment"),D.layout.get("text-pitch-alignment"),D.layout.get("text-keep-upright"),ee,re,Z),P.map.showCollisionBoxes&&(gs(M,P,D,j,!0),gs(M,P,D,j,!1))}(e,i,h,m,this.style.placement.variableOffsets,x):u.c2(h)?function(M,P,D,j,U){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:$}=U,Z=D.paint.get("circle-opacity"),ee=D.paint.get("circle-stroke-width"),re=D.paint.get("circle-stroke-opacity"),de=!D.layout.get("circle-sort-key").isConstant();if(Z.constantOr(1)===0&&(ee.constantOr(1)===0||re.constantOr(1)===0))return;const fe=M.context,me=fe.gl,_e=M.transform,Ae=M.getDepthModeForSublayer(0,hr.ReadOnly),Ee=Lr.disabled,Pe=M.colorModeForRenderPass(),ze=[],Ie=_e.getCircleRadiusCorrection();for(let $e=0;$e<j.length;$e++){const He=j[$e],at=P.getTile(He),ot=at.getBucket(D);if(!ot)continue;const rt=D.paint.get("circle-translate"),It=D.paint.get("circle-translate-anchor"),Tt=u.aA(_e,at,rt,It),pt=ot.programConfigurations.get(D.id),Vt=M.useProgram("circle",pt),gr=ot.layoutVertexBuffer,tr=ot.indexBuffer,pn=M.style.map.terrain&&M.style.map.terrain.getTerrainData(He),Kr={programConfiguration:pt,program:Vt,layoutVertexBuffer:gr,indexBuffer:tr,uniformValues:Wf(M,at,D,Tt,Ie),terrainData:pn,projectionData:_e.getProjectionData({overscaledTileID:He,applyGlobeMatrix:!$,applyTerrainMatrix:!0})};if(de){const vn=ot.segments.get();for(const mn of vn)ze.push({segments:new u.aJ([mn]),sortKey:mn.sortKey,state:Kr})}else ze.push({segments:ot.segments,sortKey:0,state:Kr})}de&&ze.sort(($e,He)=>$e.sortKey-He.sortKey);for(const $e of ze){const{programConfiguration:He,program:at,layoutVertexBuffer:ot,indexBuffer:rt,uniformValues:It,terrainData:Tt,projectionData:pt}=$e.state;at.draw(fe,me.TRIANGLES,Ae,Ee,Pe,Vr.backCCW,It,Tt,pt,D.id,ot,rt,$e.segments,D.paint,M.transform.zoom,He)}}(e,i,h,m,x):u.c3(h)?function(M,P,D,j,U){if(D.paint.get("heatmap-opacity")===0)return;const $=M.context,{isRenderingToTexture:Z,isRenderingGlobe:ee}=U;if(M.style.map.terrain){for(const re of j){const de=P.getTile(re);P.hasRenderableParent(re)||(M.renderPass==="offscreen"?Ka(M,de,D,re,ee):M.renderPass==="translucent"&&Go(M,D,re,Z,ee))}$.viewport.set([0,0,M.width,M.height])}else M.renderPass==="offscreen"?function(re,de,fe,me){const _e=re.context,Ae=_e.gl,Ee=re.transform,Pe=Lr.disabled,ze=new Wr([Ae.ONE,Ae.ONE],u.b7.transparent,[!0,!0,!0,!0]);(function(Ie,$e,He){const at=Ie.gl;Ie.activeTexture.set(at.TEXTURE1),Ie.viewport.set([0,0,$e.width/4,$e.height/4]);let ot=He.heatmapFbos.get(u.bU);ot?(at.bindTexture(at.TEXTURE_2D,ot.colorAttachment.get()),Ie.bindFramebuffer.set(ot.framebuffer)):(ot=$c(Ie,$e.width/4,$e.height/4),He.heatmapFbos.set(u.bU,ot))})(_e,re,fe),_e.clear({color:u.b7.transparent});for(let Ie=0;Ie<me.length;Ie++){const $e=me[Ie];if(de.hasRenderableParent($e))continue;const He=de.getTile($e),at=He.getBucket(fe);if(!at)continue;const ot=at.programConfigurations.get(fe.id),rt=re.useProgram("heatmap",ot),It=Ee.getProjectionData({overscaledTileID:$e,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Tt=Ee.getCircleRadiusCorrection();rt.draw(_e,Ae.TRIANGLES,hr.disabled,Pe,ze,Vr.backCCW,oo(He,Ee.zoom,fe.paint.get("heatmap-intensity"),Tt),null,It,fe.id,at.layoutVertexBuffer,at.indexBuffer,at.segments,fe.paint,Ee.zoom,ot)}_e.viewport.set([0,0,re.width,re.height])}(M,P,D,j):M.renderPass==="translucent"&&function(re,de){const fe=re.context,me=fe.gl;fe.setColorMode(re.colorModeForRenderPass());const _e=de.heatmapFbos.get(u.bU);_e&&(fe.activeTexture.set(me.TEXTURE0),me.bindTexture(me.TEXTURE_2D,_e.colorAttachment.get()),fe.activeTexture.set(me.TEXTURE1),Ho(fe,de).bind(me.LINEAR,me.CLAMP_TO_EDGE),re.useProgram("heatmapTexture").draw(fe,me.TRIANGLES,hr.disabled,Lr.disabled,re.colorModeForRenderPass(),Vr.disabled,Uh(re,de,0,1),null,null,de.id,re.viewportBuffer,re.quadTriangleIndexBuffer,re.viewportSegments,de.paint,re.transform.zoom))}(M,D)}(e,i,h,m,x):u.c4(h)?function(M,P,D,j,U){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:$}=U,Z=D.paint.get("line-opacity"),ee=D.paint.get("line-width");if(Z.constantOr(1)===0||ee.constantOr(1)===0)return;const re=M.getDepthModeForSublayer(0,hr.ReadOnly),de=M.colorModeForRenderPass(),fe=D.paint.get("line-dasharray"),me=D.paint.get("line-pattern"),_e=me.constantOr(1),Ae=D.paint.get("line-gradient"),Ee=D.getCrossfadeParameters(),Pe=_e?"linePattern":fe?"lineSDF":Ae?"lineGradient":"line",ze=M.context,Ie=ze.gl,$e=M.transform;let He=!0;for(const at of j){const ot=P.getTile(at);if(_e&&!ot.patternsLoaded())continue;const rt=ot.getBucket(D);if(!rt)continue;const It=rt.programConfigurations.get(D.id),Tt=M.context.program.get(),pt=M.useProgram(Pe,It),Vt=He||pt.program!==Tt,gr=M.style.map.terrain&&M.style.map.terrain.getTerrainData(at),tr=me.constantOr(null);if(tr&&ot.imageAtlas){const Ir=ot.imageAtlas,zr=Ir.patternPositions[tr.to.toString()],Mn=Ir.patternPositions[tr.from.toString()];zr&&Mn&&It.setConstantPatternPositions(zr,Mn)}const pn=$e.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),Kr=$e.getPixelScale(),vn=_e?Ou(M,ot,D,Kr,Ee):fe?Lc(M,ot,D,Kr,fe,Ee):Ae?ks(M,ot,D,Kr,rt.lineClipsArray.length):ku(M,ot,D,Kr);if(_e)ze.activeTexture.set(Ie.TEXTURE0),ot.imageAtlasTexture.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE),It.updatePaintBuffers(Ee);else if(fe&&(Vt||M.lineAtlas.dirty))ze.activeTexture.set(Ie.TEXTURE0),M.lineAtlas.bind(ze);else if(Ae){const Ir=rt.gradients[D.id];let zr=Ir.texture;if(D.gradientVersion!==Ir.version){let Mn=256;if(D.stepInterpolant){const An=P.getSource().maxzoom,fi=at.canonical.z===An?Math.ceil(1<<M.transform.maxZoom-at.canonical.z):1;Mn=u.ae(u.bV(rt.maxLineLength/u.Z*1024*fi),256,ze.maxTextureSize)}Ir.gradient=u.bW({expression:D.gradientExpression(),evaluationKey:"lineProgress",resolution:Mn,image:Ir.gradient||void 0,clips:rt.lineClipsArray}),Ir.texture?Ir.texture.update(Ir.gradient):Ir.texture=new Ke(ze,Ir.gradient,Ie.RGBA),Ir.version=D.gradientVersion,zr=Ir.texture}ze.activeTexture.set(Ie.TEXTURE0),zr.bind(D.stepInterpolant?Ie.NEAREST:Ie.LINEAR,Ie.CLAMP_TO_EDGE)}let mn;if($){const[Ir]=M.getStencilConfigForOverlapAndUpdateStencilID(j);mn=Ir[at.overscaledZ]}else mn=M.stencilModeForClipping(at);pt.draw(ze,Ie.TRIANGLES,re,mn,de,Vr.disabled,vn,gr,pn,D.id,rt.layoutVertexBuffer,rt.indexBuffer,rt.segments,D.paint,M.transform.zoom,It,rt.layoutVertexBuffer2),He=!1}}(e,i,h,m,x):u.c5(h)?function(M,P,D,j,U){const $=D.paint.get("fill-color"),Z=D.paint.get("fill-opacity");if(Z.constantOr(1)===0)return;const{isRenderingToTexture:ee}=U,re=M.colorModeForRenderPass(),de=D.paint.get("fill-pattern"),fe=M.opaquePassEnabledForLayer()&&!de.constantOr(1)&&$.constantOr(u.b7.transparent).a===1&&Z.constantOr(0)===1?"opaque":"translucent";if(M.renderPass===fe){const me=M.getDepthModeForSublayer(1,M.renderPass==="opaque"?hr.ReadWrite:hr.ReadOnly);Di(M,P,D,j,me,re,!1,ee)}if(M.renderPass==="translucent"&&D.paint.get("fill-antialias")){const me=M.getDepthModeForSublayer(D.getPaintProperty("fill-outline-color")?2:0,hr.ReadOnly);Di(M,P,D,j,me,re,!0,ee)}}(e,i,h,m,x):u.c6(h)?function(M,P,D,j,U){const $=D.paint.get("fill-extrusion-opacity");if($===0)return;const{isRenderingToTexture:Z}=U;if(M.renderPass==="translucent"){const ee=new hr(M.context.gl.LEQUAL,hr.ReadWrite,M.depthRangeFor3D);if($!==1||D.paint.get("fill-extrusion-pattern").constantOr(1))ti(M,P,D,j,ee,Lr.disabled,Wr.disabled,Z),ti(M,P,D,j,ee,M.stencilModeFor3D(),M.colorModeForRenderPass(),Z);else{const re=M.colorModeForRenderPass();ti(M,P,D,j,ee,Lr.disabled,re,Z)}}}(e,i,h,m,x):u.c7(h)?function(M,P,D,j,U){if(M.renderPass!=="offscreen"&&M.renderPass!=="translucent")return;const{isRenderingToTexture:$}=U,Z=M.context,ee=M.style.projection.useSubdivision,re=M.getDepthModeForSublayer(0,hr.ReadOnly),de=M.colorModeForRenderPass();if(M.renderPass==="offscreen")(function(fe,me,_e,Ae,Ee,Pe,ze){const Ie=fe.context,$e=Ie.gl;for(const He of _e){const at=me.getTile(He),ot=at.dem;if(!ot||!ot.data||!at.needsHillshadePrepare)continue;const rt=ot.dim,It=ot.stride,Tt=ot.getPixels();if(Ie.activeTexture.set($e.TEXTURE1),Ie.pixelStoreUnpackPremultiplyAlpha.set(!1),at.demTexture=at.demTexture||fe.getTileTexture(It),at.demTexture){const Vt=at.demTexture;Vt.update(Tt,{premultiply:!1}),Vt.bind($e.NEAREST,$e.CLAMP_TO_EDGE)}else at.demTexture=new Ke(Ie,Tt,$e.RGBA,{premultiply:!1}),at.demTexture.bind($e.NEAREST,$e.CLAMP_TO_EDGE);Ie.activeTexture.set($e.TEXTURE0);let pt=at.fbo;if(!pt){const Vt=new Ke(Ie,{width:rt,height:rt,data:null},$e.RGBA);Vt.bind($e.LINEAR,$e.CLAMP_TO_EDGE),pt=at.fbo=Ie.createFramebuffer(rt,rt,!0,!1),pt.colorAttachment.set(Vt.texture)}Ie.bindFramebuffer.set(pt.framebuffer),Ie.viewport.set([0,0,rt,rt]),fe.useProgram("hillshadePrepare").draw(Ie,$e.TRIANGLES,Ee,Pe,ze,Vr.disabled,Fo(at.tileID,ot),null,null,Ae.id,fe.rasterBoundsBuffer,fe.quadTriangleIndexBuffer,fe.rasterBoundsSegments),at.needsHillshadePrepare=!1}})(M,P,j,D,re,Lr.disabled,de),Z.viewport.set([0,0,M.width,M.height]);else if(M.renderPass==="translucent")if(ee){const[fe,me,_e]=M.stencilConfigForOverlapTwoPass(j);Br(M,P,D,_e,fe,re,de,!1,$),Br(M,P,D,_e,me,re,de,!0,$)}else{const[fe,me]=M.getStencilConfigForOverlapAndUpdateStencilID(j);Br(M,P,D,me,fe,re,de,!1,$)}}(e,i,h,m,x):u.c8(h)?function(M,P,D,j,U){if(M.renderPass!=="translucent"||D.paint.get("raster-opacity")===0||!j.length)return;const{isRenderingToTexture:$}=U,Z=P.getSource(),ee=M.style.projection.useSubdivision;if(Z instanceof We)ma(M,P,D,j,null,!1,!1,Z.tileCoords,Z.flippedWindingOrder,$);else if(ee){const[re,de,fe]=M.stencilConfigForOverlapTwoPass(j);ma(M,P,D,fe,re,!1,!0,ta,!1,$),ma(M,P,D,fe,de,!0,!0,ta,!1,$)}else{const[re,de]=M.getStencilConfigForOverlapAndUpdateStencilID(j);ma(M,P,D,de,re,!1,!0,ta,!1,$)}}(e,i,h,m,x):u.c9(h)?function(M,P,D,j,U){const $=D.paint.get("background-color"),Z=D.paint.get("background-opacity");if(Z===0)return;const{isRenderingToTexture:ee}=U,re=M.context,de=re.gl,fe=M.style.projection,me=M.transform,_e=me.tileSize,Ae=D.paint.get("background-pattern");if(M.isPatternMissing(Ae))return;const Ee=!Ae&&$.a===1&&Z===1&&M.opaquePassEnabledForLayer()?"opaque":"translucent";if(M.renderPass!==Ee)return;const Pe=Lr.disabled,ze=M.getDepthModeForSublayer(0,Ee==="opaque"?hr.ReadWrite:hr.ReadOnly),Ie=M.colorModeForRenderPass(),$e=M.useProgram(Ae?"backgroundPattern":"background"),He=j||Ce(me,{tileSize:_e,terrain:M.style.map.terrain});Ae&&(re.activeTexture.set(de.TEXTURE0),M.imageManager.bind(M.context));const at=D.getCrossfadeParameters();for(const ot of He){const rt=me.getProjectionData({overscaledTileID:ot,applyGlobeMatrix:!ee,applyTerrainMatrix:!0}),It=Ae?Os(Z,M,Ae,{tileID:ot,tileSize:_e},at):Fu(Z,$),Tt=M.style.map.terrain&&M.style.map.terrain.getTerrainData(ot),pt=fe.getMeshFromTileID(re,ot.canonical,!1,!0,"raster");$e.draw(re,de.TRIANGLES,ze,Pe,Ie,Vr.backCCW,It,Tt,rt,D.id,pt.vertexBuffer,pt.indexBuffer,pt.segments)}}(e,0,h,m,x):u.ca(h)&&function(M,P,D,j){const{isRenderingGlobe:U}=j,$=M.context,Z=D.implementation,ee=M.style.projection,re=M.transform,de=re.getProjectionDataForCustomLayer(U),fe={farZ:re.farZ,nearZ:re.nearZ,fov:re.fov*Math.PI/180,modelViewProjectionMatrix:re.modelViewProjectionMatrix,projectionMatrix:re.projectionMatrix,shaderData:{variantName:ee.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ee.shaderPreludeCode.vertexSource}`,define:ee.shaderDefine},defaultProjectionData:de},me=Z.renderingMode?Z.renderingMode:"2d";if(M.renderPass==="offscreen"){const _e=Z.prerender;_e&&(M.setCustomLayerDefaults(),$.setColorMode(M.colorModeForRenderPass()),_e.call(Z,$.gl,fe),$.setDirty(),M.setBaseState())}else if(M.renderPass==="translucent"){M.setCustomLayerDefaults(),$.setColorMode(M.colorModeForRenderPass()),$.setStencilMode(Lr.disabled);const _e=me==="3d"?M.getDepthModeFor3D():M.getDepthModeForSublayer(0,hr.ReadOnly);$.setDepthMode(_e),Z.render($.gl,fe),$.setDirty(),M.setBaseState(),$.bindFramebuffer.set(null)}}(e,0,h,x))}saveTileTexture(e){const i=this._tileTextures[e.size[0]];i?i.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const i=this._tileTextures[e];return i&&i.length>0?i.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const i=this.imageManager.getPattern(e.from.toString()),h=this.imageManager.getPattern(e.to.toString());return!i||!h}useProgram(e,i,h=!1){this.cache=this.cache||{};const m=!!this.style.map.terrain,x=this.style.projection,M=e+(i?i.cacheKey:"")+`/${h?ji:x.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(m?"/terrain":"");return this.cache[M]||(this.cache[M]=new Lu(this.context,cr[e],i,Gh[e],this._showOverdrawInspector,m,h?cr.projectionMercator:x.shaderPreludeCode,h?Bi:x.shaderDefine)),this.cache[M]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ke(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:i}=this.context.gl;return this.width!==e||this.height!==i}}function Xo(v,e){let i,h=!1,m=null,x=null;const M=()=>{m=null,h&&(v.apply(x,i),m=setTimeout(M,e),h=!1)};return(...P)=>(h=!0,x=this,i=P,m||M(),m)}class Gc{constructor(e){this._getCurrentHash=()=>{const i=window.location.hash.replace("#","");if(this._hashName){let h;return i.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(h=m)}),(h&&h[1]||"").split("/")}return i.split("/")},this._onHashChange=()=>{const i=this._getCurrentHash();if(!this._isValidHash(i))return!1;const h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:h,pitch:+(i[4]||0)}),!0},this._updateHashUnthrottled=()=>{const i=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,i)},this._removeHash=()=>{const i=this._getCurrentHash();if(i.length===0)return;const h=i.join("/");let m=h;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${h}`);let x=window.location.hash.replace(m,"");x.startsWith("#&")?x=x.slice(0,1)+x.slice(2):x==="#"&&(x="");let M=window.location.href.replace(/(#.+)?$/,x);M=M.replace("&&","&"),window.history.replaceState(window.history.state,null,M)},this._updateHash=Xo(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const i=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,m=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,m),M=Math.round(i.lng*x)/x,P=Math.round(i.lat*x)/x,D=this._map.getBearing(),j=this._map.getPitch();let U="";if(U+=e?`/${M}/${P}/${h}`:`${h}/${P}/${M}`,(D||j)&&(U+="/"+Math.round(10*D)/10),j&&(U+=`/${Math.round(j)}`),this._hashName){const $=this._hashName;let Z=!1;const ee=window.location.hash.slice(1).split("&").map(re=>{const de=re.split("=")[0];return de===$?(Z=!0,`${de}=${U}`):re}).filter(re=>re);return Z||ee.push(`${$}=${U}`),`#${ee.join("&")}`}return`#${U}`}_isValidHash(e){if(e.length<3||e.some(isNaN))return!1;try{new u.Q(+e[2],+e[1])}catch{return!1}const i=+e[0],h=+(e[3]||0),m=+(e[4]||0);return i>=this._map.getMinZoom()&&i<=this._map.getMaxZoom()&&h>=-180&&h<=180&&m>=this._map.getMinPitch()&&m<=this._map.getMaxPitch()}}const Vi={linearity:.3,easing:u.cb(0,0,.3,1)},Zl=u.e({deceleration:2500,maxSpeed:1400},Vi),qu=u.e({deceleration:20,maxSpeed:1400},Vi),ql=u.e({deceleration:1e3,maxSpeed:360},Vi),Gu=u.e({deceleration:1e3,maxSpeed:90},Vi),Qh=u.e({deceleration:1e3,maxSpeed:360},Vi);class Jh{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:z.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,i=z.now();for(;e.length>0&&i-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const i={zoom:0,bearing:0,pitch:0,roll:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)i.zoom+=x.zoomDelta||0,i.bearing+=x.bearingDelta||0,i.pitch+=x.pitchDelta||0,i.roll+=x.rollDelta||0,x.panDelta&&i.pan._add(x.panDelta),x.around&&(i.around=x.around),x.pinchAround&&(i.pinchAround=x.pinchAround);const h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(i.pan.mag()){const x=js(i.pan.mag(),h,u.e({},Zl,e||{})),M=i.pan.mult(x.amount/i.pan.mag()),P=this._map.cameraHelper.handlePanInertia(M,this._map.transform);m.center=P.easingCenter,m.offset=P.easingOffset,Ta(m,x)}if(i.zoom){const x=js(i.zoom,h,qu);m.zoom=this._map.transform.zoom+x.amount,Ta(m,x)}if(i.bearing){const x=js(i.bearing,h,ql);m.bearing=this._map.transform.bearing+u.ae(x.amount,-179,179),Ta(m,x)}if(i.pitch){const x=js(i.pitch,h,Gu);m.pitch=this._map.transform.pitch+x.amount,Ta(m,x)}if(i.roll){const x=js(i.roll,h,Qh);m.roll=this._map.transform.roll+u.ae(x.amount,-179,179),Ta(m,x)}if(m.zoom||m.bearing){const x=i.pinchAround===void 0?i.around:i.pinchAround;m.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),u.e(m,{noMoveStart:!0})}}function Ta(v,e){(!v.duration||v.duration<e.duration)&&(v.duration=e.duration,v.easing=e.easing)}function js(v,e,i){const{maxSpeed:h,linearity:m,deceleration:x}=i,M=u.ae(v*m/(e/1e3),-h,h),P=Math.abs(M)/(x*m);return{easing:i.easing,duration:1e3*P,amount:M*(P/2)}}class ci extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,i,h,m={}){h=h instanceof MouseEvent?h:new MouseEvent(e,h);const x=F.mousePos(i.getCanvas(),h),M=i.unproject(x);super(e,u.e({point:x,lngLat:M,originalEvent:h},m)),this._defaultPrevented=!1,this.target=i}}class bi extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,i,h){const m=e==="touchend"?h.changedTouches:h.touches,x=F.touchPos(i.getCanvasContainer(),m),M=x.map(D=>i.unproject(D)),P=x.reduce((D,j,U,$)=>D.add(j.div($.length)),new u.P(0,0));super(e,{points:x,point:P,lngLats:M,lngLat:i.unproject(P),originalEvent:h}),this._defaultPrevented=!1}}class Ma extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,i,h){super(e,{originalEvent:h}),this._defaultPrevented=!1}}class Hc{constructor(e,i){this._map=e,this._clickTolerance=i.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new Ma(e.type,this._map,e))}mousedown(e,i){return this._mousedownPos=i,this._firePreventable(new ci(e.type,this._map,e))}mouseup(e){this._map.fire(new ci(e.type,this._map,e))}click(e,i){this._mousedownPos&&this._mousedownPos.dist(i)>=this._clickTolerance||this._map.fire(new ci(e.type,this._map,e))}dblclick(e){return this._firePreventable(new ci(e.type,this._map,e))}mouseover(e){this._map.fire(new ci(e.type,this._map,e))}mouseout(e){this._map.fire(new ci(e.type,this._map,e))}touchstart(e){return this._firePreventable(new bi(e.type,this._map,e))}touchmove(e){this._map.fire(new bi(e.type,this._map,e))}touchend(e){this._map.fire(new bi(e.type,this._map,e))}touchcancel(e){this._map.fire(new bi(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Aa{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new ci(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ci("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new ci(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Xn{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.screenPointToLocation(u.P.convert(e),this._map.terrain)}}class Xa{constructor(e,i){this._map=e,this._tr=new Xn(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=i.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,i){this.isEnabled()&&e.shiftKey&&e.button===0&&(F.disableDrag(),this._startPos=this._lastPos=i,this._active=!0)}mousemoveWindow(e,i){if(!this._active)return;const h=i;if(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=h,this._box||(this._box=F.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const x=Math.min(m.x,h.x),M=Math.max(m.x,h.x),P=Math.min(m.y,h.y),D=Math.max(m.y,h.y);F.setTransform(this._box,`translate(${x}px,${P}px)`),this._box.style.width=M-x+"px",this._box.style.height=D-P+"px"}mouseupWindow(e,i){if(!this._active||e.button!==0)return;const h=this._startPos,m=i;if(this.reset(),F.suppressClick(),h.x!==m.x||h.y!==m.y)return this._map.fire(new u.l("boxzoomend",{originalEvent:e})),{cameraAnimation:x=>x.fitScreenCoordinates(h,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(F.remove(this._box),this._box=null),F.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,i){return this._map.fire(new u.l(e,{originalEvent:i}))}}function vs(v,e){if(v.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${e.length}`);const i={};for(let h=0;h<v.length;h++)i[v[h].identifier]=e[h];return i}class rd{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,i,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=e.timeStamp),h.length===this.numTouches&&(this.centroid=function(m){const x=new u.P(0,0);for(const M of m)x._add(M);return x.div(m.length)}(i),this.touches=vs(h,i)))}touchmove(e,i,h){if(this.aborted||!this.centroid)return;const m=vs(h,i);for(const x in this.touches){const M=m[x];(!M||M.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(e,i,h){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class xs{constructor(e){this.singleTap=new rd(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,i,h){this.singleTap.touchstart(e,i,h)}touchmove(e,i,h){this.singleTap.touchmove(e,i,h)}touchend(e,i,h){const m=this.singleTap.touchend(e,i,h);if(m){const x=e.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(m)<30;if(x&&M||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class bs{constructor(e){this._tr=new Xn(e),this._zoomIn=new xs({numTouches:1,numTaps:2}),this._zoomOut=new xs({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,i,h){this._zoomIn.touchstart(e,i,h),this._zoomOut.touchstart(e,i,h)}touchmove(e,i,h){this._zoomIn.touchmove(e,i,h),this._zoomOut.touchmove(e,i,h)}touchend(e,i,h){const m=this._zoomIn.touchend(e,i,h),x=this._zoomOut.touchend(e,i,h),M=this._tr;return m?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:M.zoom+1,around:M.unproject(m)},{originalEvent:e})}):x?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:M.zoom-1,around:M.unproject(x)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dn{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const i=this._moveFunction(...e);if(i.bearingDelta||i.pitchDelta||i.rollDelta||i.around||i.panDelta)return this._active=!0,i}dragStart(e,i){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=Array.isArray(i)?i[0]:i,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,i){if(!this.isEnabled())return;const h=this._lastPoint;if(!h)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const m=Array.isArray(i)?i[0]:i;return!this._moved&&m.dist(h)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(h,m))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&F.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Ca={0:1,2:2};class Ot{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const i=F.mouseButton(e);this._eventButton=i}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(i,h){const m=Ca[h];return i.buttons===void 0||(i.buttons&m)!==m}(e,this._eventButton)}isValidEndEvent(e){return F.mouseButton(e)===this._eventButton}}class nd{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return e.targetTouches.length===1}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}class ef{constructor(e=new Ot({checkCorrectEvent:()=>!0}),i=new nd){this.mouseMoveStateManager=e,this.oneFingerTouchMoveStateManager=i}_executeRelevantHandler(e,i,h){return e instanceof MouseEvent?i(e):typeof TouchEvent<"u"&&e instanceof TouchEvent?h(e):void 0}startMove(e){this._executeRelevantHandler(e,i=>this.mouseMoveStateManager.startMove(i),i=>this.oneFingerTouchMoveStateManager.startMove(i))}endMove(e){this._executeRelevantHandler(e,i=>this.mouseMoveStateManager.endMove(i),i=>this.oneFingerTouchMoveStateManager.endMove(i))}isValidStartEvent(e){return this._executeRelevantHandler(e,i=>this.mouseMoveStateManager.isValidStartEvent(i),i=>this.oneFingerTouchMoveStateManager.isValidStartEvent(i))}isValidMoveEvent(e){return this._executeRelevantHandler(e,i=>this.mouseMoveStateManager.isValidMoveEvent(i),i=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(i))}isValidEndEvent(e){return this._executeRelevantHandler(e,i=>this.mouseMoveStateManager.isValidEndEvent(i),i=>this.oneFingerTouchMoveStateManager.isValidEndEvent(i))}}const Bn=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=e=>{e.preventDefault()}};class Qo{constructor(e,i){this._clickTolerance=e.clickTolerance||1,this._map=i,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,i,h){return this._calculateTransform(e,i,h)}touchmove(e,i,h){if(this._active){if(!this._shouldBePrevented(h.length))return e.preventDefault(),this._calculateTransform(e,i,h);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,i,h){this._calculateTransform(e,i,h),this._active&&this._shouldBePrevented(h.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,i,h){h.length>0&&(this._active=!0);const m=vs(h,i),x=new u.P(0,0),M=new u.P(0,0);let P=0;for(const j in m){const U=m[j],$=this._touches[j];$&&(x._add(U),M._add(U.sub($)),P++,m[j]=U)}if(this._touches=m,this._shouldBePrevented(P)||!M.mag())return;const D=M.div(P);return this._sum._add(D),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(P),panDelta:D}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qa{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,i,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([i[0],i[1]]))}touchmove(e,i,h){if(!this._firstTwoTouches)return;e.preventDefault();const[m,x]=this._firstTwoTouches,M=Ns(h,i,m),P=Ns(h,i,x);if(!M||!P)return;const D=this._aroundCenter?null:M.add(P).div(2);return this._move([M,P],D,e)}touchend(e,i,h){if(!this._firstTwoTouches)return;const[m,x]=this._firstTwoTouches,M=Ns(h,i,m),P=Ns(h,i,x);M&&P||(this._active&&F.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ns(v,e,i){for(let h=0;h<v.length;h++)if(v[h].identifier===i)return e[h]}function Tr(v,e){return Math.log(v/e)/Math.LN2}class Fs extends Qa{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,i){const h=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Tr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Tr(this._distance,h),pinchAround:i}}}function Jo(v,e){return 180*v.angleWith(e)/Math.PI}class Wc extends Qa{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,i,h){const m=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Jo(this._vector,m),pinchAround:i}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const i=25/(Math.PI*this._minDiameter)*360,h=Jo(e,this._startVector);return Math.abs(h)<i}}function Kc(v){return Math.abs(v.y)>Math.abs(v.x)}class id extends Qa{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,i,h){super.touchstart(e,i,h),this._currentTouchCount=h.length}_start(e){this._lastPoints=e,Kc(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,i,h){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const m=e[0].sub(this._lastPoints[0]),x=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,x,h.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(m.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(e,i,h){if(this._valid!==void 0)return this._valid;const m=e.mag()>=2,x=i.mag()>=2;if(!m&&!x)return;if(!m||!x)return this._firstMove===void 0&&(this._firstMove=h),h-this._firstMove<100&&void 0;const M=e.y>0==i.y>0;return Kc(e)&&Kc(i)&&M}}const tf={panStep:100,bearingStep:15,pitchStep:10};class ws{constructor(e){this._tr=new Xn(e);const i=tf;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let i=0,h=0,m=0,x=0,M=0;switch(e.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:e.shiftKey?h=-1:(e.preventDefault(),x=-1);break;case 39:e.shiftKey?h=1:(e.preventDefault(),x=1);break;case 38:e.shiftKey?m=1:(e.preventDefault(),M=-1);break;case 40:e.shiftKey?m=-1:(e.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(h=0,m=0),{cameraAnimation:P=>{const D=this._tr;P.easeTo({duration:300,easeId:"keyboardHandler",easing:Yc,zoom:i?Math.round(D.zoom)+i*(e.shiftKey?2:1):D.zoom,bearing:D.bearing+h*this._bearingStep,pitch:D.pitch+m*this._pitchStep,offset:[-x*this._panStep,-M*this._panStep],center:D.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Yc(v){return v*(2-v)}const Hu=4.000244140625;class Xc{constructor(e,i){this._onTimeout=h=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(h)},this._map=e,this._tr=new Xn(e),this._triggerRenderFrame=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let i=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const h=z.now(),m=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,i!==0&&i%Hu==0?this._type="wheel":i!==0&&Math.abs(i)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(m*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),e.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=e,this._delta-=i,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const i=F.mousePos(this._map.getCanvas(),e),h=this._tr;this._aroundPoint=this._aroundCenter?h.transform.locationToScreenPoint(u.Q.convert(h.center)):i,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const e=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const P=e.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=P),typeof this._targetZoom=="number"&&(this._targetZoom+=P)}if(this._delta!==0){const P=this._type==="wheel"&&Math.abs(this._delta)>Hu?this._wheelZoomRate:this._defaultZoomRate;let D=2/(1+Math.exp(-Math.abs(this._delta*P)));this._delta<0&&D!==0&&(D=1/D);const j=typeof this._targetZoom!="number"?e.scale:u.ac(this._targetZoom);this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,u.ah(j*D))),this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const i=typeof this._targetZoom!="number"?e.zoom:this._targetZoom,h=this._startZoom,m=this._easing;let x,M=!1;if(this._type==="wheel"&&h&&m){const P=z.now()-this._lastWheelEventTime,D=Math.min((P+5)/200,1),j=m(D);x=u.B.number(h,i,j),D<1?this._frameId||(this._frameId=!0):M=!0}else x=i,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=x,{noInertia:!0,needsRenderFrame:!M,zoomDelta:x-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let i=u.cd;if(this._prevEase){const h=this._prevEase,m=(z.now()-h.start)/h.duration,x=h.easing(m+.01)-h.easing(m),M=.27/Math.sqrt(x*x+1e-4)*.01,P=Math.sqrt(.0729-M*M);i=u.cb(M,P,.25,1)}return this._prevEase={start:z.now(),duration:e,easing:i},i}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Us{constructor(e,i){this._clickZoom=e,this._tapZoom=i}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Rr{constructor(e){this._tr=new Xn(e),this.reset()}reset(){this._active=!1}dblclick(e,i){return e.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(i)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qr{constructor(){this._tap=new xs({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,i,h){if(!this._swipePoint)if(this._tapTime){const m=i[0],x=e.timeStamp-this._tapTime<500,M=this._tapPoint.dist(m)<30;x&&M?h.length>0&&(this._swipePoint=m,this._swipeTouch=h[0].identifier):this.reset()}else this._tap.touchstart(e,i,h)}touchmove(e,i,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;const m=i[0],x=m.y-this._swipePoint.y;return this._swipePoint=m,e.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(e,i,h)}touchend(e,i,h){if(this._tapTime)this._swipePoint&&h.length===0&&this.reset();else{const m=this._tap.touchend(e,i,h);m&&(this._tapTime=e.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mr{constructor(e,i,h){this._el=e,this._mousePan=i,this._touchPan=h}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class mo{constructor(e,i,h,m){this._pitchWithRotate=e.pitchWithRotate,this._rollEnabled=e.rollEnabled,this._mouseRotate=i,this._mousePitch=h,this._mouseRoll=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Vs{constructor(e,i,h,m){this._el=e,this._touchZoom=i,this._touchRotate=h,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class $s{constructor(e,i){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=e,this._options=i,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=F.create("div","maplibregl-cooperative-gesture-screen",e);let i=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(i=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const h=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=i,this._container.appendChild(m);const x=document.createElement("div");x.className="maplibregl-mobile-message",x.textContent=h,this._container.appendChild(x),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(F.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,i){this._enabled&&(this._map.fire(new u.l("cooperativegestureprevented",{gestureType:e,originalEvent:i})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const go=v=>v.zoom||v.drag||v.roll||v.pitch||v.rotate;class Gl extends u.l{}function yo(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta||v.rollDelta}class Ss{constructor(e,i){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,x)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const M=m.type==="renderFrame"?void 0:m,P={needsRenderFrame:!1},D={},j={};for(const{handlerName:Z,handler:ee,allowed:re}of this._handlers){if(!ee.isEnabled())continue;let de;if(this._blockedByActive(j,re,Z))ee.reset();else if(ee[x||m.type]){if(u.ce(m,x||m.type)){const fe=F.mousePos(this._map.getCanvas(),m);de=ee[x||m.type](m,fe)}else if(u.cf(m,x||m.type)){const fe=this._getMapTouches(m.touches),me=F.touchPos(this._map.getCanvas(),fe);de=ee[x||m.type](m,me,fe)}else u.cg(x||m.type)||(de=ee[x||m.type](m));this.mergeHandlerResult(P,D,de,Z,M),de&&de.needsRenderFrame&&this._triggerRenderFrame()}(de||ee.isActive())&&(j[Z]=ee)}const U={};for(const Z in this._previousActiveHandlers)j[Z]||(U[Z]=M);this._previousActiveHandlers=j,(Object.keys(U).length||yo(P))&&(this._changes.push([P,D,U]),this._triggerRenderFrame()),(Object.keys(j).length||yo(P))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:$}=P;$&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],$(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Jh(e),this._bearingSnap=i.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(i);const h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,x,M]of this._listeners)F.addEventListener(m,x,m===document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(const[e,i,h]of this._listeners)F.removeEventListener(e,i,e===document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(e){const i=this._map,h=i.getCanvasContainer();this._add("mapEvent",new Hc(i,e));const m=i.boxZoom=new Xa(i,e);this._add("boxZoom",m),e.interactive&&e.boxZoom&&m.enable();const x=i.cooperativeGestures=new $s(i,e.cooperativeGestures);this._add("cooperativeGestures",x),e.cooperativeGestures&&x.enable();const M=new bs(i),P=new Rr(i);i.doubleClickZoom=new Us(P,M),this._add("tapZoom",M),this._add("clickZoom",P),e.interactive&&e.doubleClickZoom&&i.doubleClickZoom.enable();const D=new qr;this._add("tapDragZoom",D);const j=i.touchPitch=new id(i);this._add("touchPitch",j),e.interactive&&e.touchPitch&&i.touchPitch.enable(e.touchPitch);const U=()=>i.project(i.getCenter()),$=function({enable:Ee,clickTolerance:Pe,aroundCenter:ze=!0,minPixelCenterThreshold:Ie=100,rotateDegreesPerPixelMoved:$e=.8},He){const at=new Ot({checkCorrectEvent:ot=>F.mouseButton(ot)===0&&ot.ctrlKey||F.mouseButton(ot)===2&&!ot.ctrlKey});return new dn({clickTolerance:Pe,move:(ot,rt)=>{const It=He();if(ze&&Math.abs(It.y-ot.y)>Ie)return{bearingDelta:u.cc(new u.P(ot.x,rt.y),rt,It)};let Tt=(rt.x-ot.x)*$e;return ze&&rt.y<It.y&&(Tt=-Tt),{bearingDelta:Tt}},moveStateManager:at,enable:Ee,assignEvents:Bn})}(e,U),Z=function({enable:Ee,clickTolerance:Pe,pitchDegreesPerPixelMoved:ze=-.5}){const Ie=new Ot({checkCorrectEvent:$e=>F.mouseButton($e)===0&&$e.ctrlKey||F.mouseButton($e)===2});return new dn({clickTolerance:Pe,move:($e,He)=>({pitchDelta:(He.y-$e.y)*ze}),moveStateManager:Ie,enable:Ee,assignEvents:Bn})}(e),ee=function({enable:Ee,clickTolerance:Pe,rollDegreesPerPixelMoved:ze=.3},Ie){const $e=new Ot({checkCorrectEvent:He=>F.mouseButton(He)===2&&He.ctrlKey});return new dn({clickTolerance:Pe,move:(He,at)=>{const ot=Ie();let rt=(at.x-He.x)*ze;return at.y<ot.y&&(rt=-rt),{rollDelta:rt}},moveStateManager:$e,enable:Ee,assignEvents:Bn})}(e,U);i.dragRotate=new mo(e,$,Z,ee),this._add("mouseRotate",$,["mousePitch"]),this._add("mousePitch",Z,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ee,["mousePitch"]),e.interactive&&e.dragRotate&&i.dragRotate.enable();const re=function({enable:Ee,clickTolerance:Pe}){const ze=new Ot({checkCorrectEvent:Ie=>F.mouseButton(Ie)===0&&!Ie.ctrlKey});return new dn({clickTolerance:Pe,move:(Ie,$e)=>({around:$e,panDelta:$e.sub(Ie)}),activateOnStart:!0,moveStateManager:ze,enable:Ee,assignEvents:Bn})}(e),de=new Qo(e,i);i.dragPan=new mr(h,re,de),this._add("mousePan",re),this._add("touchPan",de,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&i.dragPan.enable(e.dragPan);const fe=new Wc,me=new Fs;i.touchZoomRotate=new Vs(h,me,fe,D),this._add("touchRotate",fe,["touchPan","touchZoom"]),this._add("touchZoom",me,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&i.touchZoomRotate.enable(e.touchZoomRotate);const _e=i.scrollZoom=new Xc(i,()=>this._triggerRenderFrame());this._add("scrollZoom",_e,["mousePan"]),e.interactive&&e.scrollZoom&&i.scrollZoom.enable(e.scrollZoom);const Ae=i.keyboard=new ws(i);this._add("keyboard",Ae),e.interactive&&e.keyboard&&i.keyboard.enable(),this._add("blockableMapEvent",new Aa(i))}_add(e,i,h){this._handlers.push({handlerName:e,handler:i,allowed:h}),this._handlersById[e]=i}stop(e){if(!this._updatingCamera){for(const{handler:i}of this._handlers)i.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!go(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,i,h){for(const m in e)if(m!==h&&(!i||i.indexOf(m)<0))return!0;return!1}_getMapTouches(e){const i=[];for(const h of e)this._el.contains(h.target)&&i.push(h);return i}mergeHandlerResult(e,i,h,m,x){if(!h)return;u.e(e,h);const M={handlerName:m,originalEvent:h.originalEvent||x};h.zoomDelta!==void 0&&(i.zoom=M),h.panDelta!==void 0&&(i.drag=M),h.rollDelta!==void 0&&(i.roll=M),h.pitchDelta!==void 0&&(i.pitch=M),h.bearingDelta!==void 0&&(i.rotate=M)}_applyChanges(){const e={},i={},h={};for(const[m,x,M]of this._changes)m.panDelta&&(e.panDelta=(e.panDelta||new u.P(0,0))._add(m.panDelta)),m.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+m.pitchDelta),m.rollDelta&&(e.rollDelta=(e.rollDelta||0)+m.rollDelta),m.around!==void 0&&(e.around=m.around),m.pinchAround!==void 0&&(e.pinchAround=m.pinchAround),m.noInertia&&(e.noInertia=m.noInertia),u.e(i,x),u.e(h,M);this._updateMapTransform(e,i,h),this._changes=[]}_updateMapTransform(e,i,h){const m=this._map,x=m._getTransformForUpdate(),M=m.terrain;if(!(yo(e)||M&&this._terrainMovement))return this._fireEvents(i,h,!0);m._stop(!0);let{panDelta:P,zoomDelta:D,bearingDelta:j,pitchDelta:U,rollDelta:$,around:Z,pinchAround:ee}=e;ee!==void 0&&(Z=ee),Z=Z||m.transform.centerPoint,M&&!x.isPointOnMapSurface(Z)&&(Z=x.centerPoint);const re={panDelta:P,zoomDelta:D,rollDelta:$,pitchDelta:U,bearingDelta:j,around:Z};this._map.cameraHelper.useGlobeControls&&!x.isPointOnMapSurface(Z)&&(Z=x.centerPoint);const de=Z.distSqr(x.centerPoint)<.01?x.center:x.screenPointToLocation(P?Z.sub(P):Z);M?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(re,x),this._terrainMovement||!i.drag&&!i.zoom?i.drag&&this._terrainMovement?x.setCenter(x.screenPointToLocation(x.centerPoint.sub(P))):this._map.cameraHelper.handleMapControlsPan(re,x,de):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(re,x,de))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(re,x),this._map.cameraHelper.handleMapControlsPan(re,x,de)),m._applyUpdatedTransform(x),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(i,h,!0)}_fireEvents(e,i,h){const m=go(this._eventsInProgress),x=go(e),M={};for(const $ in e){const{originalEvent:Z}=e[$];this._eventsInProgress[$]||(M[`${$}start`]=Z),this._eventsInProgress[$]=e[$]}!m&&x&&this._fireEvent("movestart",x.originalEvent);for(const $ in M)this._fireEvent($,M[$]);x&&this._fireEvent("move",x.originalEvent);for(const $ in e){const{originalEvent:Z}=e[$];this._fireEvent($,Z)}const P={};let D;for(const $ in this._eventsInProgress){const{handlerName:Z,originalEvent:ee}=this._eventsInProgress[$];this._handlersById[Z].isActive()||(delete this._eventsInProgress[$],D=i[Z]||ee,P[`${$}end`]=D)}for(const $ in P)this._fireEvent($,P[$]);const j=go(this._eventsInProgress),U=(m||x)&&!j;if(U&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const $=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&$.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform($)}if(h&&U){this._updatingCamera=!0;const $=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=ee=>ee!==0&&-this._bearingSnap<ee&&ee<this._bearingSnap;!$||!$.essential&&z.prefersReducedMotion?(this._map.fire(new u.l("moveend",{originalEvent:D})),Z(this._map.getBearing())&&this._map.resetNorth()):(Z($.bearing||this._map.getBearing())&&($.bearing=0),$.freezeElevation=!0,this._map.easeTo($,{originalEvent:D})),this._updatingCamera=!1}}_fireEvent(e,i){this._map.fire(new u.l(e,i?{originalEvent:i}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new Gl("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class In extends u.E{constructor(e,i,h){super(),this._renderFrameCallback=()=>{const m=Math.min((z.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=h.bearingSnap,this.cameraHelper=i,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(e,i){e.apply(this.transform),this.transform=e,this.cameraHelper=i}getCenter(){return new u.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(e,i){return this.jumpTo({center:e},i)}getCenterElevation(){return this.transform.elevation}setCenterElevation(e,i){return this.jumpTo({elevation:e},i),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(e){this._centerClampedToGround=e}panBy(e,i,h){return e=u.P.convert(e).mult(-1),this.panTo(this.transform.center,u.e({offset:e},i),h)}panTo(e,i,h){return this.easeTo(u.e({center:e},i),h)}getZoom(){return this.transform.zoom}setZoom(e,i){return this.jumpTo({zoom:e},i),this}zoomTo(e,i,h){return this.easeTo(u.e({zoom:e},i),h)}zoomIn(e,i){return this.zoomTo(this.getZoom()+1,e,i),this}zoomOut(e,i){return this.zoomTo(this.getZoom()-1,e,i),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(e,i){return e!=this.transform.fov&&(this.transform.setFov(e),this.fire(new u.l("movestart",i)).fire(new u.l("move",i)).fire(new u.l("moveend",i))),this}getBearing(){return this.transform.bearing}setBearing(e,i){return this.jumpTo({bearing:e},i),this}getPadding(){return this.transform.padding}setPadding(e,i){return this.jumpTo({padding:e},i),this}rotateTo(e,i,h){return this.easeTo(u.e({bearing:e},i),h)}resetNorth(e,i){return this.rotateTo(0,u.e({duration:1e3},e),i),this}resetNorthPitch(e,i){return this.easeTo(u.e({bearing:0,pitch:0,roll:0,duration:1e3},e),i),this}snapToNorth(e,i){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,i):this}getPitch(){return this.transform.pitch}setPitch(e,i){return this.jumpTo({pitch:e},i),this}getRoll(){return this.transform.roll}setRoll(e,i){return this.jumpTo({roll:e},i),this}cameraForBounds(e,i){e=pr.convert(e).adjustAntiMeridian();const h=i&&i.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),h,i)}_cameraForBoxAndBearing(e,i,h,m){const x={top:0,bottom:0,right:0,left:0};if(typeof(m=u.e({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const j=m.padding;m.padding={top:j,bottom:j,right:j,left:j}}const M=u.e(x,m.padding);m.padding=M;const P=this.transform,D=new pr(e,i);return this.cameraHelper.cameraForBoxAndBearing(m,M,D,h,P)}fitBounds(e,i,h){return this._fitInternal(this.cameraForBounds(e,i),i,h)}fitScreenCoordinates(e,i,h,m,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(u.P.convert(e)),this.transform.screenPointToLocation(u.P.convert(i)),h,m),m,x)}_fitInternal(e,i,h){return e?(delete(i=u.e(e,i)).padding,i.linear?this.easeTo(i,h):this.flyTo(i,h)):this}jumpTo(e,i){this.stop();const h=this._getTransformForUpdate();let m=!1,x=!1,M=!1;const P=h.zoom;this.cameraHelper.handleJumpToCenterZoom(h,e);const D=h.zoom!==P;return"elevation"in e&&h.elevation!==+e.elevation&&h.setElevation(+e.elevation),"bearing"in e&&h.bearing!==+e.bearing&&(m=!0,h.setBearing(+e.bearing)),"pitch"in e&&h.pitch!==+e.pitch&&(x=!0,h.setPitch(+e.pitch)),"roll"in e&&h.roll!==+e.roll&&(M=!0,h.setRoll(+e.roll)),e.padding==null||h.isPaddingEqual(e.padding)||h.setPadding(e.padding),this._applyUpdatedTransform(h),this.fire(new u.l("movestart",i)).fire(new u.l("move",i)),D&&this.fire(new u.l("zoomstart",i)).fire(new u.l("zoom",i)).fire(new u.l("zoomend",i)),m&&this.fire(new u.l("rotatestart",i)).fire(new u.l("rotate",i)).fire(new u.l("rotateend",i)),x&&this.fire(new u.l("pitchstart",i)).fire(new u.l("pitch",i)).fire(new u.l("pitchend",i)),M&&this.fire(new u.l("rollstart",i)).fire(new u.l("roll",i)).fire(new u.l("rollend",i)),this.fire(new u.l("moveend",i))}calculateCameraOptionsFromTo(e,i,h,m=0){const x=u.$.fromLngLat(e,i),M=u.$.fromLngLat(h,m),P=M.x-x.x,D=M.y-x.y,j=M.z-x.z,U=Math.hypot(P,D,j);if(U===0)throw new Error("Can't calculate camera options with same From and To");const $=Math.hypot(P,D),Z=u.ah(this.transform.cameraToCenterDistance/U/this.transform.tileSize),ee=180*Math.atan2(P,-D)/Math.PI;let re=180*Math.acos($/U)/Math.PI;return re=j<0?90-re:90+re,{center:M.toLngLat(),elevation:m,zoom:Z,pitch:re,bearing:ee}}calculateCameraOptionsFromCameraLngLatAltRotation(e,i,h,m,x){const M=this.transform.calculateCenterFromCameraLngLatAlt(e,i,h,m);return{center:M.center,elevation:M.elevation,zoom:M.zoom,bearing:h,pitch:m,roll:x}}easeTo(e,i){this._stop(!1,e.easeId),((e=u.e({offset:[0,0],duration:500,easing:u.cd},e)).animate===!1||!e.essential&&z.prefersReducedMotion)&&(e.duration=0);const h=this._getTransformForUpdate(),m=this.getBearing(),x=h.pitch,M=h.roll,P="bearing"in e?this._normalizeBearing(e.bearing,m):m,D="pitch"in e?+e.pitch:x,j="roll"in e?this._normalizeBearing(e.roll,M):M,U="padding"in e?e.padding:h.padding,$=u.P.convert(e.offset);let Z,ee;e.around&&(Z=u.Q.convert(e.around),ee=h.locationToScreenPoint(Z));const re={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},de=this.cameraHelper.handleEaseTo(h,{bearing:P,pitch:D,roll:j,padding:U,around:Z,aroundPoint:ee,offsetAsPoint:$,offset:e.offset,zoom:e.zoom,center:e.center});return this._rotating=this._rotating||m!==P,this._pitching=this._pitching||D!==x,this._rolling=this._rolling||j!==M,this._padding=!h.isPaddingEqual(U),this._zooming=this._zooming||de.isZooming,this._easeId=e.easeId,this._prepareEase(i,e.noMoveStart,re),this.terrain&&this._prepareElevation(de.elevationCenter),this._ease(fe=>{de.easeFunc(fe),this.terrain&&!e.freezeElevation&&this._updateElevation(fe),this._applyUpdatedTransform(h),this._fireMoveEvents(i)},fe=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(i,fe)},e),this}_prepareEase(e,i,h={}){this._moving=!0,i||h.moving||this.fire(new u.l("movestart",e)),this._zooming&&!h.zooming&&this.fire(new u.l("zoomstart",e)),this._rotating&&!h.rotating&&this.fire(new u.l("rotatestart",e)),this._pitching&&!h.pitching&&this.fire(new u.l("pitchstart",e)),this._rolling&&!h.rolling&&this.fire(new u.l("rollstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const i=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&i!==this._elevationTarget){const h=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(h-(i-(h*e+this._elevationStart))/(1-e)),this._elevationTarget=i}this.transform.setElevation(u.B.number(this._elevationStart,this._elevationTarget,e))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){if(!this.terrain&&e.elevation>=0&&e.pitch<=90)return{};const i=e.getCameraLngLat(),h=e.getCameraAltitude(),m=this.terrain?this.terrain.getElevationForLngLatZoom(i,e.zoom):0;if(h<m){const x=this.calculateCameraOptionsFromTo(i,m,e.center,e.elevation);return{pitch:x.pitch,zoom:x.zoom}}return{}}_applyUpdatedTransform(e){const i=[];if(i.push(m=>this._elevateCameraIfInsideTerrain(m)),this.transformCameraUpdate&&i.push(m=>this.transformCameraUpdate(m)),!i.length)return;const h=e.clone();for(const m of i){const x=h.clone(),{center:M,zoom:P,roll:D,pitch:j,bearing:U,elevation:$}=m(x);M&&x.setCenter(M),$!==void 0&&x.setElevation($),P!==void 0&&x.setZoom(P),D!==void 0&&x.setRoll(D),j!==void 0&&x.setPitch(j),U!==void 0&&x.setBearing(U),h.apply(x)}this.transform.apply(h)}_fireMoveEvents(e){this.fire(new u.l("move",e)),this._zooming&&this.fire(new u.l("zoom",e)),this._rotating&&this.fire(new u.l("rotate",e)),this._pitching&&this.fire(new u.l("pitch",e)),this._rolling&&this.fire(new u.l("roll",e))}_afterEase(e,i){if(this._easeId&&i&&this._easeId===i)return;delete this._easeId;const h=this._zooming,m=this._rotating,x=this._pitching,M=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,h&&this.fire(new u.l("zoomend",e)),m&&this.fire(new u.l("rotateend",e)),x&&this.fire(new u.l("pitchend",e)),M&&this.fire(new u.l("rollend",e)),this.fire(new u.l("moveend",e))}flyTo(e,i){if(!e.essential&&z.prefersReducedMotion){const rt=u.O(e,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(rt,i)}this.stop(),e=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.cd},e);const h=this._getTransformForUpdate(),m=h.bearing,x=h.pitch,M=h.roll,P=h.padding,D="bearing"in e?this._normalizeBearing(e.bearing,m):m,j="pitch"in e?+e.pitch:x,U="roll"in e?this._normalizeBearing(e.roll,M):M,$="padding"in e?e.padding:h.padding,Z=u.P.convert(e.offset);let ee=h.centerPoint.add(Z);const re=h.screenPointToLocation(ee),de=this.cameraHelper.handleFlyTo(h,{bearing:D,pitch:j,roll:U,padding:$,locationAtOffset:re,offsetAsPoint:Z,center:e.center,minZoom:e.minZoom,zoom:e.zoom});let fe=e.curve;const me=Math.max(h.width,h.height),_e=me/de.scaleOfZoom,Ae=de.pixelPathLength;typeof de.scaleOfMinZoom=="number"&&(fe=Math.sqrt(me/de.scaleOfMinZoom/Ae*2));const Ee=fe*fe;function Pe(rt){const It=(_e*_e-me*me+(rt?-1:1)*Ee*Ee*Ae*Ae)/(2*(rt?_e:me)*Ee*Ae);return Math.log(Math.sqrt(It*It+1)-It)}function ze(rt){return(Math.exp(rt)-Math.exp(-rt))/2}function Ie(rt){return(Math.exp(rt)+Math.exp(-rt))/2}const $e=Pe(!1);let He=function(rt){return Ie($e)/Ie($e+fe*rt)},at=function(rt){return me*((Ie($e)*(ze(It=$e+fe*rt)/Ie(It))-ze($e))/Ee)/Ae;var It},ot=(Pe(!0)-$e)/fe;if(Math.abs(Ae)<2e-6||!isFinite(ot)){if(Math.abs(me-_e)<1e-6)return this.easeTo(e,i);const rt=_e<me?-1:1;ot=Math.abs(Math.log(_e/me))/fe,at=()=>0,He=It=>Math.exp(rt*fe*It)}return e.duration="duration"in e?+e.duration:1e3*ot/("screenSpeed"in e?+e.screenSpeed/fe:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=m!==D,this._pitching=j!==x,this._rolling=U!==M,this._padding=!h.isPaddingEqual($),this._prepareEase(i,!1),this.terrain&&this._prepareElevation(de.targetCenter),this._ease(rt=>{const It=rt*ot,Tt=1/He(It),pt=at(It);this._rotating&&h.setBearing(u.B.number(m,D,rt)),this._pitching&&h.setPitch(u.B.number(x,j,rt)),this._rolling&&h.setRoll(u.B.number(M,U,rt)),this._padding&&(h.interpolatePadding(P,$,rt),ee=h.centerPoint.add(Z)),de.easeFunc(rt,Tt,pt,ee),this.terrain&&!e.freezeElevation&&this._updateElevation(rt),this._applyUpdatedTransform(h),this._fireMoveEvents(i)},()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(i)},e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,i){var h;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,i)}return e||(h=this.handlers)===null||h===void 0||h.stop(!1),this}_ease(e,i,h){h.animate===!1||h.duration===0?(e(1),i()):(this._easeStart=z.now(),this._easeOptions=h,this._onEaseFrame=e,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,i){e=u.aL(e,-180,180);const h=Math.abs(e-i);return Math.abs(e-360-i)<h&&(e-=360),Math.abs(e+360-i)<h&&(e+=360),e}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(u.Q.convert(e),this.transform.tileZoom):null}}const $t={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Kt{constructor(e=$t){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=i=>{!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"&&i.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=F.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=F.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=F.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){F.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,i){const h=this._map._getUIString(`AttributionControl.${i}`);e.title=h,e.setAttribute("aria-label",h)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const i=this._map.style.sourceCaches;for(const m in i){const x=i[m];if(x.used||x.usedForTerrain){const M=x.getSource();M.attribution&&e.indexOf(M.attribution)<0&&e.push(M.attribution)}}e=e.filter(m=>String(m).trim()),e.sort((m,x)=>m.length-x.length),e=e.filter((m,x)=>{for(let M=x+1;M<e.length;M++)if(e[M].indexOf(m)>=0)return!1;return!0});const h=e.join(" | ");h!==this._attribHTML&&(this._attribHTML=h,e.length?(this._innerContainer.innerHTML=F.sanitize(h),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Hl{constructor(e={}){this._updateCompact=()=>{const i=this._container.children;if(i.length){const h=i[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&h.classList.add("maplibregl-compact"):h.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=F.create("div","maplibregl-ctrl");const i=F.create("a","maplibregl-ctrl-logo");return i.target="_blank",i.rel="noopener nofollow",i.href="https://maplibre.org/",i.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),i.setAttribute("rel","noopener nofollow"),this._container.appendChild(i),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){F.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Qc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const i=++this._id;return this._queue.push({callback:e,id:i,cancelled:!1}),i}remove(e){const i=this._currentlyRunning,h=i?this._queue.concat(i):this._queue;for(const m of h)if(m.id===e)return void(m.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const i=this._currentlyRunning=this._queue;this._queue=[];for(const h of i)if(!h.cancelled&&(h.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var rf=u.aG([{name:"a_pos3d",type:"Int16",components:3}]);class $i extends u.E{constructor(e){super(),this._lastTilesetChange=z.now(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=e._source.tileSize*2**this.deltaZoom,e.usedForTerrain=!0,e.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,i){this.sourceCache.update(e,i),this._renderableTilesKeys=[];const h={};for(const m of Ce(e,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:i,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))h[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.terrainRttPosMatrix32f=new Float64Array(16),u.bQ(m.terrainRttPosMatrix32f,0,u.Z,u.Z,0,0,1),this._tiles[m.key]=new Vn(m,this.tileSize),this._lastTilesetChange=z.now());for(const m in this._tiles)h[m]||delete this._tiles[m]}freeRtt(e){for(const i in this._tiles){const h=this._tiles[i];(!e||h.tileID.equals(e)||h.tileID.isChildOf(e)||e.isChildOf(h.tileID))&&(h.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(e=>this.getTileByID(e))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e,i){return i?this._getTerrainCoordsForTileRanges(e,i):this._getTerrainCoordsForRegularTile(e)}_getTerrainCoordsForRegularTile(e){const i={};for(const h of this._renderableTilesKeys){const m=this._tiles[h].tileID,x=e.clone(),M=u.b2();if(m.canonical.equals(e.canonical))u.bQ(M,0,u.Z,u.Z,0,0,1);else if(m.canonical.isChildOf(e.canonical)){const P=m.canonical.z-e.canonical.z,D=m.canonical.x-(m.canonical.x>>P<<P),j=m.canonical.y-(m.canonical.y>>P<<P),U=u.Z>>P;u.bQ(M,0,U,U,0,0,1),u.L(M,M,[-D*U,-j*U,0])}else{if(!e.canonical.isChildOf(m.canonical))continue;{const P=e.canonical.z-m.canonical.z,D=e.canonical.x-(e.canonical.x>>P<<P),j=e.canonical.y-(e.canonical.y>>P<<P),U=u.Z>>P;u.bQ(M,0,u.Z,u.Z,0,0,1),u.L(M,M,[D*U,j*U,0]),u.M(M,M,[1/2**P,1/2**P,0])}}x.terrainRttPosMatrix32f=new Float32Array(M),i[h]=x}return i}_getTerrainCoordsForTileRanges(e,i){const h={};for(const m of this._renderableTilesKeys){const x=this._tiles[m].tileID;if(!this._isWithinTileRanges(x,i))continue;const M=e.clone(),P=u.b2();if(x.canonical.z===e.canonical.z){const D=e.canonical.x-x.canonical.x,j=e.canonical.y-x.canonical.y;u.bQ(P,0,u.Z,u.Z,0,0,1),u.L(P,P,[D*u.Z,j*u.Z,0])}else if(x.canonical.z>e.canonical.z){const D=x.canonical.z-e.canonical.z,j=x.canonical.x-(x.canonical.x>>D<<D),U=x.canonical.y-(x.canonical.y>>D<<D),$=e.canonical.x-(x.canonical.x>>D),Z=e.canonical.y-(x.canonical.y>>D),ee=u.Z>>D;u.bQ(P,0,ee,ee,0,0,1),u.L(P,P,[-j*ee+$*u.Z,-U*ee+Z*u.Z,0])}else{const D=e.canonical.z-x.canonical.z,j=e.canonical.x-(e.canonical.x>>D<<D),U=e.canonical.y-(e.canonical.y>>D<<D),$=(e.canonical.x>>D)-x.canonical.x,Z=(e.canonical.y>>D)-x.canonical.y,ee=u.Z<<D;u.bQ(P,0,ee,ee,0,0,1),u.L(P,P,[j*u.Z+$*ee,U*u.Z+Z*ee,0])}M.terrainRttPosMatrix32f=new Float32Array(P),h[m]=M}return h}getSourceTile(e,i){const h=this.sourceCache._source;let m=e.overscaledZ-this.deltaZoom;if(m>h.maxzoom&&(m=h.maxzoom),m<h.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(m).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!x||!x.dem)&&i)for(;m>=h.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(e.scaledTo(m--).key);return x}anyTilesAfterTime(e=Date.now()){return this._lastTilesetChange>=e}_isWithinTileRanges(e,i){return i[e.canonical.z]&&e.canonical.x>=i[e.canonical.z].minTileX&&e.canonical.x<=i[e.canonical.z].maxTileX&&e.canonical.y>=i[e.canonical.z].minTileY&&e.canonical.y<=i[e.canonical.z].maxTileY}}class Jc{constructor(e,i,h){this._meshCache={},this.painter=e,this.sourceCache=new $i(i),this.options=h,this.exaggeration=typeof h.exaggeration=="number"?h.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,i,h,m=u.Z){var x;if(!(i>=0&&i<m&&h>=0&&h<m))return 0;const M=this.getTerrainData(e),P=(x=M.tile)===null||x===void 0?void 0:x.dem;if(!P)return 0;const D=u.ch([],[i/m*u.Z,h/m*u.Z],M.u_terrain_matrix),j=[D[0]*P.dim,D[1]*P.dim],U=Math.floor(j[0]),$=Math.floor(j[1]),Z=j[0]-U,ee=j[1]-$;return P.get(U,$)*(1-Z)*(1-ee)+P.get(U+1,$)*Z*(1-ee)+P.get(U,$+1)*(1-Z)*ee+P.get(U+1,$+1)*Z*ee}getElevationForLngLatZoom(e,i){if(!u.ci(i,e.wrap()))return 0;const{tileID:h,mercatorX:m,mercatorY:x}=this._getOverscaledTileIDFromLngLatZoom(e,i);return this.getElevation(h,m%u.Z,x%u.Z,u.Z)}getElevation(e,i,h,m=u.Z){return this.getDEMElevation(e,i,h,m)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const m=this.painter.context,x=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ke(m,x,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ke(m,new u.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.ad([])}const i=this.sourceCache.getSourceTile(e,!0);if(i&&i.dem&&(!i.demTexture||i.needsTerrainPrepare)){const m=this.painter.context;i.demTexture=this.painter.getTileTexture(i.dem.stride),i.demTexture?i.demTexture.update(i.dem.getPixels(),{premultiply:!1}):i.demTexture=new Ke(m,i.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),i.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),i.needsTerrainPrepare=!1}const h=i&&i+i.tileID.key+e.key;if(h&&!this._demMatrixCache[h]){const m=this.sourceCache.sourceCache._source.maxzoom;let x=e.canonical.z-i.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=m?x=e.canonical.z-m:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const M=e.canonical.x-(e.canonical.x>>x<<x),P=e.canonical.y-(e.canonical.y>>x<<x),D=u.cj(new Float64Array(16),[1/(u.Z<<x),1/(u.Z<<x),0]);u.L(D,D,[M*u.Z,P*u.Z,0]),this._demMatrixCache[e.key]={matrix:D,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:i&&i.dem&&i.dem.dim||1,u_terrain_matrix:h?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:i&&i.dem&&i.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(i&&i.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:i}}getFramebuffer(e){const i=this.painter,h=i.width/devicePixelRatio,m=i.height/devicePixelRatio;return!this._fbo||this._fbo.width===h&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ke(i.context,{width:h,height:m,data:null},i.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(i.context.gl.NEAREST,i.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ke(i.context,{width:h,height:m,data:null},i.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(i.context.gl.NEAREST,i.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=i.context.createFramebuffer(h,m,!0,!1),this._fbo.depthAttachment.set(i.context.createRenderbuffer(i.context.gl.DEPTH_COMPONENT16,h,m))),this._fbo.colorAttachment.set(e==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const i=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,M=0;x<this._coordsTextureSize;x++)for(let P=0;P<this._coordsTextureSize;P++,M+=4)i[M+0]=255&P,i[M+1]=255&x,i[M+2]=P>>8<<4|x>>8,i[M+3]=0;const h=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(i.buffer)),m=new Ke(e,h,e.gl.RGBA,{premultiply:!1});return m.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const i=new Uint8Array(4),h=this.painter.context,m=h.gl,x=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),M=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),P=Math.round(this.painter.height/devicePixelRatio);h.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(x,P-M-1,1,1,m.RGBA,m.UNSIGNED_BYTE,i),h.bindFramebuffer.set(null);const D=i[0]+(i[2]>>4<<8),j=i[1]+((15&i[2])<<8),U=this.coordsIndex[255-i[3]],$=U&&this.sourceCache.getTileByID(U);if(!$)return null;const Z=this._coordsTextureSize,ee=(1<<$.tileID.canonical.z)*Z;return new u.$(($.tileID.canonical.x*Z+D)/ee+$.tileID.wrap,($.tileID.canonical.y*Z+j)/ee,this.getElevation($.tileID,D,j,Z))}depthAtPoint(e){const i=new Uint8Array(4),h=this.painter.context,m=h.gl;return h.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,i),h.bindFramebuffer.set(null),(i[0]/16777216+i[1]/65536+i[2]/256+i[3])/256}getTerrainMesh(e){var i;const h=((i=this.painter.style.projection)===null||i===void 0?void 0:i.transitionState)>0,m=h&&e.canonical.y===0,x=h&&e.canonical.y===(1<<e.canonical.z)-1,M=`m_${m?"n":""}_${x?"s":""}`;if(this._meshCache[M])return this._meshCache[M];const P=this.painter.context,D=new u.ck,j=new u.aK,U=this.meshSize,$=u.Z/U,Z=U*U;for(let Ie=0;Ie<=U;Ie++)for(let $e=0;$e<=U;$e++)D.emplaceBack($e*$,Ie*$,0);for(let Ie=0;Ie<Z;Ie+=U+1)for(let $e=0;$e<U;$e++)j.emplaceBack($e+Ie,U+$e+Ie+1,U+$e+Ie+2),j.emplaceBack($e+Ie,U+$e+Ie+2,$e+Ie+1);const ee=D.length,re=ee+(U+1),de=(U+1)*U,fe=m?u.b9:0,me=m?0:1,_e=x?u.ba:u.Z,Ae=x?0:1;for(let Ie=0;Ie<=U;Ie++)D.emplaceBack(Ie*$,fe,me);for(let Ie=0;Ie<=U;Ie++)D.emplaceBack(Ie*$,_e,Ae);for(let Ie=0;Ie<U;Ie++)j.emplaceBack(de+Ie,re+Ie,re+Ie+1),j.emplaceBack(de+Ie,re+Ie+1,de+Ie+1),j.emplaceBack(0+Ie,ee+Ie+1,ee+Ie),j.emplaceBack(0+Ie,0+Ie+1,ee+Ie+1);const Ee=D.length,Pe=Ee+2*(U+1);for(const Ie of[0,1])for(let $e=0;$e<=U;$e++)for(const He of[0,1])D.emplaceBack(Ie*u.Z,$e*$,He);for(let Ie=0;Ie<2*U;Ie+=2)j.emplaceBack(Ee+Ie,Ee+Ie+1,Ee+Ie+3),j.emplaceBack(Ee+Ie,Ee+Ie+3,Ee+Ie+2),j.emplaceBack(Pe+Ie,Pe+Ie+3,Pe+Ie+1),j.emplaceBack(Pe+Ie,Pe+Ie+2,Pe+Ie+3);const ze=new Oo(P.createVertexBuffer(D,rf.members),P.createIndexBuffer(j),u.aJ.simpleSegment(0,0,D.length,j.length));return this._meshCache[M]=ze,ze}getMeshFrameDelta(e){return 2*Math.PI*u.bu/Math.pow(2,Math.max(e,0))/5}getMinTileElevationForLngLatZoom(e,i){var h;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(e,i);return(h=this.getMinMaxElevation(m).minElevation)!==null&&h!==void 0?h:0}getMinMaxElevation(e){const i=this.getTerrainData(e).tile,h={minElevation:null,maxElevation:null};return i&&i.dem&&(h.minElevation=i.dem.min*this.exaggeration,h.maxElevation=i.dem.max*this.exaggeration),h}_getOverscaledTileIDFromLngLatZoom(e,i){const h=u.$.fromLngLat(e.wrap()),m=(1<<i)*u.Z,x=h.x*m,M=h.y*m,P=Math.floor(x/u.Z),D=Math.floor(M/u.Z);return{tileID:new u.Y(i,0,i,P,D),mercatorX:x,mercatorY:M}}}class Ea{constructor(e,i,h){this._context=e,this._size=i,this._tileSize=h,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const i=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),h=new Ke(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return h.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),i.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),i.colorAttachment.set(h.texture),{id:e,fbo:i,texture:h,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(i=>e.id!==i),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const i of this._recentlyUsed)if(!this._objects[i].inUse)return this._objects[i];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(e=>!e.inUse)===!1}}const hi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Dn{constructor(e,i){this.painter=e,this.terrain=i,this.pool=new Ea(e.context,30,i.sourceCache.tileSize*i.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,i){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter(h=>!e._layers[h].isHidden(i)),this._coordsAscending={};for(const h in e.sourceCaches){this._coordsAscending[h]={};const m=e.sourceCaches[h].getVisibleCoordinates(),x=e.sourceCaches[h].getSource(),M=x instanceof We?x.terrainTileRanges:null;for(const P of m){const D=this.terrain.sourceCache.getTerrainCoords(P,M);for(const j in D)this._coordsAscending[h][j]||(this._coordsAscending[h][j]=[]),this._coordsAscending[h][j].push(D[j])}}this._coordsAscendingStr={};for(const h of e._order){const m=e._layers[h],x=m.source;if(hi[m.type]&&!this._coordsAscendingStr[x]){this._coordsAscendingStr[x]={};for(const M in this._coordsAscending[x])this._coordsAscendingStr[x][M]=this._coordsAscending[x][M].map(P=>P.key).sort().join()}}for(const h of this._renderableTiles)for(const m in this._coordsAscendingStr){const x=this._coordsAscendingStr[m][h.tileID.key];x&&x!==h.rttCoords[m]&&(h.rtt=[])}}renderLayer(e,i){if(e.isHidden(this.painter.transform.zoom))return!1;const h=Object.assign(Object.assign({},i),{isRenderingToTexture:!0}),m=e.type,x=this.painter,M=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(hi[m]&&(this._prevType&&hi[this._prevType]||this._stacks.push([]),this._prevType=m,this._stacks[this._stacks.length-1].push(e.id),!M))return!0;if(hi[this._prevType]||hi[m]&&M){this._prevType=m;const P=this._stacks.length-1,D=this._stacks[P]||[];for(const j of this._renderableTiles){if(this.pool.isFull()&&(qc(this.painter,this.terrain,this._rttTiles,h),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(j),j.rtt[P]){const $=this.pool.getObjectForId(j.rtt[P].id);if($.stamp===j.rtt[P].stamp){this.pool.useObject($);continue}}const U=this.pool.getOrCreateFreeObject();this.pool.useObject(U),this.pool.stampObject(U),j.rtt[P]={id:U.id,stamp:U.stamp},x.context.bindFramebuffer.set(U.fbo.framebuffer),x.context.clear({color:u.b7.transparent,stencil:0}),x.currentStencilSource=void 0;for(let $=0;$<D.length;$++){const Z=x.style._layers[D[$]],ee=Z.source?this._coordsAscending[Z.source][j.tileID.key]:[j.tileID];x.context.viewport.set([0,0,U.fbo.width,U.fbo.height]),x._renderTileClippingMasks(Z,ee,!0),x.renderLayer(x,x.style.sourceCaches[Z.source],Z,ee,h),Z.source&&(j.rttCoords[Z.source]=this._coordsAscendingStr[Z.source][j.tileID.key])}}return qc(this.painter,this.terrain,this._rttTiles,h),this._rttTiles=[],this.pool.freeAllObjects(),hi[m]}return!1}}const _n={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Tn=C,Wl={hash:!1,interactive:!0,bearingSnap:7,attributionControl:$t,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},el={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Pa{constructor(e,i,h=!1){this.mousedown=x=>{this.startMove(x,F.mousePos(this.element,x)),F.addEventListener(window,"mousemove",this.mousemove),F.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=x=>{this.move(x,F.mousePos(this.element,x))},this.mouseup=x=>{this._rotatePitchHanlder.dragEnd(x),this.offTemp()},this.touchstart=x=>{x.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=F.touchPos(this.element,x.targetTouches)[0],this.startMove(x,this._startPos),F.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.addEventListener(window,"touchend",this.touchend))},this.touchmove=x=>{x.targetTouches.length!==1?this.reset():(this._lastPos=F.touchPos(this.element,x.targetTouches)[0],this.move(x,this._lastPos))},this.touchend=x=>{x.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=i;const m=new ef;this._rotatePitchHanlder=new dn({clickTolerance:3,move:(x,M)=>{const P=i.getBoundingClientRect(),D=new u.P((P.bottom-P.top)/2,(P.right-P.left)/2);return{bearingDelta:u.cc(new u.P(x.x,M.y),M,D),pitchDelta:h?-.5*(M.y-x.y):void 0}},moveStateManager:m,enable:!0,assignEvents:()=>{}}),this.map=e,F.addEventListener(i,"mousedown",this.mousedown),F.addEventListener(i,"touchstart",this.touchstart,{passive:!1}),F.addEventListener(i,"touchcancel",this.reset)}startMove(e,i){this._rotatePitchHanlder.dragStart(e,i),F.disableDrag()}move(e,i){const h=this.map,{bearingDelta:m,pitchDelta:x}=this._rotatePitchHanlder.dragMove(e,i)||{};m&&h.setBearing(h.getBearing()+m),x&&h.setPitch(h.getPitch()+x)}off(){const e=this.element;F.removeEventListener(e,"mousedown",this.mousedown),F.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),F.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.removeEventListener(window,"touchend",this.touchend),F.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){F.enableDrag(),F.removeEventListener(window,"mousemove",this.mousemove),F.removeEventListener(window,"mouseup",this.mouseup),F.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.removeEventListener(window,"touchend",this.touchend)}}let Ra;function Kl(v,e,i,h=!1){if(h||!i.getCoveringTilesDetailsProvider().allowWorldCopies())return v==null?void 0:v.wrap();const m=new u.Q(v.lng,v.lat);if(v=new u.Q(v.lng,v.lat),e){const x=new u.Q(v.lng-360,v.lat),M=new u.Q(v.lng+360,v.lat),P=i.locationToScreenPoint(v).distSqr(e);i.locationToScreenPoint(x).distSqr(e)<P?v=x:i.locationToScreenPoint(M).distSqr(e)<P&&(v=M)}for(;Math.abs(v.lng-i.center.lng)>180;){const x=i.locationToScreenPoint(v);if(x.x>=0&&x.y>=0&&x.x<=i.width&&x.y<=i.height)break;v.lng>i.center.lng?v.lng-=360:v.lng+=360}return v.lng!==m.lng&&i.isPointOnMapSurface(i.locationToScreenPoint(v))?v:m}const tl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function rl(v,e,i){const h=v.classList;for(const m in tl)h.remove(`maplibregl-${i}-anchor-${m}`);h.add(`maplibregl-${i}-anchor-${e}`)}class Yl extends u.E{constructor(e){if(super(),this._onKeyPress=i=>{const h=i.code,m=i.charCode||i.keyCode;h!=="Space"&&h!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=i=>{const h=i.originalEvent.target,m=this._element;this._popup&&(h===m||m.contains(h))&&this.togglePopup()},this._update=i=>{if(!this._map)return;const h=this._map.loaded()&&!this._map.isMoving();((i==null?void 0:i.type)==="terrain"||(i==null?void 0:i.type)==="render"&&!h)&&this._map.once("render",this._update),this._lngLat=Kl(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let x="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?x="rotateX(0deg)":this._pitchAlignment==="map"&&(x=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||i&&i.type!=="moveend"||(this._pos=this._pos.round()),F.setTransform(this._element,`${tl[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${x} ${m}`),z.frameAsync(new AbortController).then(()=>{this._updateOpacity(i&&i.type==="moveend")}).catch(()=>{})},this._onMove=i=>{if(!this._isDragging){const h=this._clickTolerance||this._map._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=h}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.l("dragstart"))),this.fire(new u.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.l("dragend")),this._state="inactive"},this._addDragHandler=i=>{this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._offset),this._pointerdownPos=i.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment!=="auto"?e.pitchAlignment:this._rotationAlignment,this.setOpacity(e==null?void 0:e.opacity,e==null?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=u.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=F.create("div");const i=F.createNS("http://www.w3.org/2000/svg","svg"),h=41,m=27;i.setAttributeNS(null,"display","block"),i.setAttributeNS(null,"height",`${h}px`),i.setAttributeNS(null,"width",`${m}px`),i.setAttributeNS(null,"viewBox",`0 0 ${m} ${h}`);const x=F.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const M=F.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"fill-rule","nonzero");const P=F.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"transform","translate(3.0, 29.0)"),P.setAttributeNS(null,"fill","#000000");const D=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const me of D){const _e=F.createNS("http://www.w3.org/2000/svg","ellipse");_e.setAttributeNS(null,"opacity","0.04"),_e.setAttributeNS(null,"cx","10.5"),_e.setAttributeNS(null,"cy","5.80029008"),_e.setAttributeNS(null,"rx",me.rx),_e.setAttributeNS(null,"ry",me.ry),P.appendChild(_e)}const j=F.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"fill",this._color);const U=F.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),j.appendChild(U);const $=F.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"opacity","0.25"),$.setAttributeNS(null,"fill","#000000");const Z=F.createNS("http://www.w3.org/2000/svg","path");Z.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),$.appendChild(Z);const ee=F.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ee.setAttributeNS(null,"fill","#FFFFFF");const re=F.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(8.0, 8.0)");const de=F.createNS("http://www.w3.org/2000/svg","circle");de.setAttributeNS(null,"fill","#000000"),de.setAttributeNS(null,"opacity","0.25"),de.setAttributeNS(null,"cx","5.5"),de.setAttributeNS(null,"cy","5.5"),de.setAttributeNS(null,"r","5.4999962");const fe=F.createNS("http://www.w3.org/2000/svg","circle");fe.setAttributeNS(null,"fill","#FFFFFF"),fe.setAttributeNS(null,"cx","5.5"),fe.setAttributeNS(null,"cy","5.5"),fe.setAttributeNS(null,"r","5.4999962"),re.appendChild(de),re.appendChild(fe),M.appendChild(P),M.appendChild(j),M.appendChild($),M.appendChild(ee),M.appendChild(re),i.appendChild(M),i.setAttributeNS(null,"height",h*this._scale+"px"),i.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(i),this._offset=u.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",i=>{i.preventDefault()}),this._element.addEventListener("mousedown",i=>{i.preventDefault()}),rl(this._element,this._anchor,"marker"),e&&e.className)for(const i of e.className.split(" "))this._element.classList.add(i);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),e.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),F.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=u.Q.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const m=Math.abs(13.5)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var i,h;if(!(!((i=this._map)===null||i===void 0)&&i.terrain)){const $=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==$&&(this._element.style.opacity=$))}if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const m=this._map,x=m.terrain.depthAtPoint(this._pos),M=m.terrain.getElevationForLngLatZoom(this._lngLat,m.transform.tileZoom);if(m.transform.lngLatToCameraDepth(this._lngLat,M)-x<.006)return void(this._element.style.opacity=this._opacity);const P=-this._offset.y/m.transform.pixelsPerMeter,D=Math.sin(m.getPitch()*Math.PI/180)*P,j=m.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),U=m.transform.lngLatToCameraDepth(this._lngLat,M+D)-j>.006;!((h=this._popup)===null||h===void 0)&&h.isOpen()&&U&&this._popup.remove(),this._element.style.opacity=U?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=u.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&e!=="auto"?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,i){return(this._opacity===void 0||e===void 0&&i===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),e!==void 0&&(this._opacity=e),i!==void 0&&(this._opacityWhenCovered=i),this._map&&this._updateOpacity(!0),this}}const eh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let nl=0,_o=!1;const th={maxWidth:100,unit:"metric"};function Xl(v,e,i){const h=i&&i.maxWidth||100,m=v._container.clientHeight/2,x=v._container.clientWidth/2,M=v.unproject([x-h/2,m]),P=v.unproject([x+h/2,m]),D=Math.round(v.project(P).x-v.project(M).x),j=Math.min(h,D,v._container.clientWidth),U=M.distanceTo(P);if(i&&i.unit==="imperial"){const $=3.2808*U;$>5280?vo(e,j,$/5280,v._getUIString("ScaleControl.Miles")):vo(e,j,$,v._getUIString("ScaleControl.Feet"))}else i&&i.unit==="nautical"?vo(e,j,U/1852,v._getUIString("ScaleControl.NauticalMiles")):U>=1e3?vo(e,j,U/1e3,v._getUIString("ScaleControl.Kilometers")):vo(e,j,U,v._getUIString("ScaleControl.Meters"))}function vo(v,e,i,h){const m=function(x){const M=Math.pow(10,`${Math.floor(x)}`.length-1);let P=x/M;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:function(D){const j=Math.pow(10,Math.ceil(-Math.log(D)/Math.LN10));return Math.round(D*j)/j}(P),M*P}(i);v.style.width=e*(m/i)+"px",v.innerHTML=`${m}&nbsp;${h}`}const nf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Wu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ku(v){if(v){if(typeof v=="number"){const e=Math.round(Math.abs(v)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,v),"top-left":new u.P(e,e),"top-right":new u.P(-e,e),bottom:new u.P(0,-v),"bottom-left":new u.P(e,-e),"bottom-right":new u.P(-e,-e),left:new u.P(v,0),right:new u.P(-v,0)}}if(v instanceof u.P||Array.isArray(v)){const e=u.P.convert(v);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:u.P.convert(v.center||[0,0]),top:u.P.convert(v.top||[0,0]),"top-left":u.P.convert(v["top-left"]||[0,0]),"top-right":u.P.convert(v["top-right"]||[0,0]),bottom:u.P.convert(v.bottom||[0,0]),"bottom-left":u.P.convert(v["bottom-left"]||[0,0]),"bottom-right":u.P.convert(v["bottom-right"]||[0,0]),left:u.P.convert(v.left||[0,0]),right:u.P.convert(v.right||[0,0])}}return Ku(new u.P(0,0))}const rh=C;y.AJAXError=u.co,y.Event=u.l,y.Evented=u.E,y.LngLat=u.Q,y.MercatorCoordinate=u.$,y.Point=u.P,y.addProtocol=u.cp,y.config=u.a,y.removeProtocol=u.cq,y.AttributionControl=Kt,y.BoxZoomHandler=Xa,y.CanvasSource=xt,y.CooperativeGesturesHandler=$s,y.DoubleClickZoomHandler=Us,y.DragPanHandler=mr,y.DragRotateHandler=mo,y.EdgeInsets=no,y.FullscreenControl=class extends u.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var e;let i=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((e=i==null?void 0:i.shadowRoot)===null||e===void 0)&&e.fullscreenElement;)i=i.shadowRoot.fullscreenElement;i===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){F.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=F.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);F.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},y.GeoJSONSource=Re,y.GeolocateControl=class extends u.E{constructor(v){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new u.l("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.l("geolocate",e)),this._finish()}},this._updateCamera=e=>{const i=new u.Q(e.coords.longitude,e.coords.latitude),h=e.coords.accuracy,m=this._map.getBearing(),x=u.e({bearing:m},this.options.fitBoundsOptions),M=pr.fromLngLat(i,h);this._map.fitBounds(M,x,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const i=new u.Q(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(this.options.trackUserLocation)if(e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(e.code===3&&_o)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.l("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=F.create("button","maplibregl-ctrl-geolocate",this._container),F.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(e===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=F.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Yl({element:this._dotElement}),this._circleElement=F.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Yl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.l("trackuserlocationend")),this.fire(new u.l("userlocationlostfocus")))})}},this.options=u.e({},eh,v)}onAdd(v){return this._map=v,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return u._(this,arguments,void 0,function*(e=!1){if(Ra!==void 0&&!e)return Ra;if(window.navigator.permissions===void 0)return Ra=!!window.navigator.geolocation,Ra;try{Ra=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ra=!!window.navigator.geolocation}return Ra})}().then(e=>this._finishSetupUI(e)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),F.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,nl=0,_o=!1}_isOutOfMapMaxBounds(v){const e=this._map.getMaxBounds(),i=v.coords;return e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),e=v.getSouthEast(),i=v.getNorthEast(),h=e.distanceTo(i),m=Math.ceil(this._accuracy/(h/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":nl--,_o=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.l("trackuserlocationstart")),this.fire(new u.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),nl++,nl>1?(v={maximumAge:6e5,timeout:0},_o=!0):(v=this.options.positionOptions,_o=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},y.GlobeControl=class{constructor(){this._toggleProjection=()=>{var v;const e=(v=this._map.getProjection())===null||v===void 0?void 0:v.type;this._map.setProjection(e!=="mercator"&&e?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var v;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((v=this._map.getProjection())===null||v===void 0?void 0:v.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(v){return this._map=v,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=F.create("button","maplibregl-ctrl-globe",this._container),F.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){F.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},y.Hash=Gc,y.ImageSource=We,y.KeyboardHandler=ws,y.LngLatBounds=pr,y.LogoControl=Hl,y.Map=class extends In{constructor(v){var e,i;u.cl.mark(u.cm.create);const h=Object.assign(Object.assign(Object.assign({},Wl),v),{canvasContextAttributes:Object.assign(Object.assign({},Wl.canvasContextAttributes),v.canvasContextAttributes)});if(h.minZoom!=null&&h.maxZoom!=null&&h.minZoom>h.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(h.minPitch!=null&&h.maxPitch!=null&&h.minPitch>h.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(h.minPitch!=null&&h.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(h.maxPitch!=null&&h.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const m=new qa,x=new wa;if(h.minZoom!==void 0&&m.setMinZoom(h.minZoom),h.maxZoom!==void 0&&m.setMaxZoom(h.maxZoom),h.minPitch!==void 0&&m.setMinPitch(h.minPitch),h.maxPitch!==void 0&&m.setMaxPitch(h.maxPitch),h.renderWorldCopies!==void 0&&m.setRenderWorldCopies(h.renderWorldCopies),super(m,x,{bearingSnap:h.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Qc,this._controls=[],this._mapId=u.a4(),this._contextLost=P=>{P.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.l("webglcontextlost",{originalEvent:P}))},this._contextRestored=P=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.l("webglcontextrestored",{originalEvent:P}))},this._onMapScroll=P=>{if(P.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=h.interactive,this._maxTileCacheSize=h.maxTileCacheSize,this._maxTileCacheZoomLevels=h.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},h.canvasContextAttributes),this._trackResize=h.trackResize===!0,this._bearingSnap=h.bearingSnap,this._centerClampedToGround=h.centerClampedToGround,this._refreshExpiredTiles=h.refreshExpiredTiles===!0,this._fadeDuration=h.fadeDuration,this._crossSourceCollisions=h.crossSourceCollisions===!0,this._collectResourceTiming=h.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},_n),h.locale),this._clickTolerance=h.clickTolerance,this._overridePixelRatio=h.pixelRatio,this._maxCanvasSize=h.maxCanvasSize,this.transformCameraUpdate=h.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=h.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=xe.addThrottleControl(()=>this.isMoving()),this._requestManager=new Se(h.transformRequest),typeof h.container=="string"){if(this._container=document.getElementById(h.container),!this._container)throw new Error(`Container '${h.container}' not found.`)}else{if(!(h.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=h.container}if(h.maxBounds&&this.setMaxBounds(h.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let P=!1;const D=Xo(j=>{this._trackResize&&!this._removed&&(this.resize(j),this.redraw())},50);this._resizeObserver=new ResizeObserver(j=>{P?D(j):P=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Ss(this,h),this._hash=h.hash&&new Gc(typeof h.hash=="string"&&h.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:h.center,elevation:h.elevation,zoom:h.zoom,bearing:h.bearing,pitch:h.pitch,roll:h.roll}),h.bounds&&(this.resize(),this.fitBounds(h.bounds,u.e({},h.fitBoundsOptions,{duration:0}))));const M=typeof h.style=="string"||((i=(e=h.style)===null||e===void 0?void 0:e.projection)===null||i===void 0?void 0:i.type)!=="globe";this.resize(null,M),this._localIdeographFontFamily=h.localIdeographFontFamily,this._validateStyle=h.validateStyle,h.style&&this.setStyle(h.style,{localIdeographFontFamily:h.localIdeographFontFamily}),h.attributionControl&&this.addControl(new Kt(typeof h.attributionControl=="boolean"?void 0:h.attributionControl)),h.maplibreLogo&&this.addControl(new Hl,h.logoPosition),this.on("style.load",()=>{if(M||this._resizeTransform(),this.transform.unmodified){const P=u.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(P)}}),this.on("data",P=>{this._update(P.dataType==="style"),this.fire(new u.l(`${P.dataType}data`,P))}),this.on("dataloading",P=>{this.fire(new u.l(`${P.dataType}dataloading`,P))}),this.on("dataabort",P=>{this.fire(new u.l("sourcedataabort",P))})}_getMapId(){return this._mapId}addControl(v,e){if(e===void 0&&(e=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new u.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const i=v.onAdd(this);this._controls.push(v);const h=this._controlPositions[e];return e.indexOf("bottom")!==-1?h.insertBefore(i,h.firstChild):h.appendChild(i),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new u.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const e=this._controls.indexOf(v);return e>-1&&this._controls.splice(e,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,e,i,h){return h==null&&this.terrain&&(h=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,e,i,h)}resize(v,e=!0){const[i,h]=this._containerDimensions(),m=this._getClampedPixelRatio(i,h);if(this._resizeCanvas(i,h,m),this.painter.resize(i,h,m),this.painter.overLimit()){const M=this.painter.context.gl;this._maxCanvasSize=[M.drawingBufferWidth,M.drawingBufferHeight];const P=this._getClampedPixelRatio(i,h);this._resizeCanvas(i,h,P),this.painter.resize(i,h,P)}this._resizeTransform(e);const x=!this._moving;return x&&(this.stop(),this.fire(new u.l("movestart",v)).fire(new u.l("move",v))),this.fire(new u.l("resize",v)),x&&this.fire(new u.l("moveend",v)),this}_resizeTransform(v=!0){var e;const[i,h]=this._containerDimensions();this.transform.resize(i,h,v),(e=this._requestedCameraState)===null||e===void 0||e.resize(i,h,v)}_getClampedPixelRatio(v,e){const{0:i,1:h}=this._maxCanvasSize,m=this.getPixelRatio(),x=v*m,M=e*m;return Math.min(x>i?i/x:1,M>h?h/M:1)*m}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(pr.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.setMinZoom(v),this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.setMaxZoom(v),this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.setMinPitch(v),this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(v>=this.transform.minPitch)return this.transform.setMaxPitch(v),this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.setRenderWorldCopies(v),this._update()}project(v){return this.transform.locationToScreenPoint(u.Q.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.screenPointToLocation(u.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,e,i){if(v==="mouseenter"||v==="mouseover"){let h=!1;return{layers:e,listener:i,delegates:{mousemove:x=>{const M=e.filter(D=>this.getLayer(D)),P=M.length!==0?this.queryRenderedFeatures(x.point,{layers:M}):[];P.length?h||(h=!0,i.call(this,new ci(v,this,x.originalEvent,{features:P}))):h=!1},mouseout:()=>{h=!1}}}}if(v==="mouseleave"||v==="mouseout"){let h=!1;return{layers:e,listener:i,delegates:{mousemove:M=>{const P=e.filter(D=>this.getLayer(D));(P.length!==0?this.queryRenderedFeatures(M.point,{layers:P}):[]).length?h=!0:h&&(h=!1,i.call(this,new ci(v,this,M.originalEvent)))},mouseout:M=>{h&&(h=!1,i.call(this,new ci(v,this,M.originalEvent)))}}}}{const h=m=>{const x=e.filter(P=>this.getLayer(P)),M=x.length!==0?this.queryRenderedFeatures(m.point,{layers:x}):[];M.length&&(m.features=M,i.call(this,m),delete m.features)};return{layers:e,listener:i,delegates:{[v]:h}}}}_saveDelegatedListener(v,e){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(e)}_removeDelegatedListener(v,e,i){if(!this._delegatedListeners||!this._delegatedListeners[v])return;const h=this._delegatedListeners[v];for(let m=0;m<h.length;m++){const x=h[m];if(x.listener===i&&x.layers.length===e.length&&x.layers.every(M=>e.includes(M))){for(const M in x.delegates)this.off(M,x.delegates[M]);return void h.splice(m,1)}}}on(v,e,i){if(i===void 0)return super.on(v,e);const h=typeof e=="string"?[e]:e,m=this._createDelegatedListener(v,h,i);this._saveDelegatedListener(v,m);for(const x in m.delegates)this.on(x,m.delegates[x]);return{unsubscribe:()=>{this._removeDelegatedListener(v,h,i)}}}once(v,e,i){if(i===void 0)return super.once(v,e);const h=typeof e=="string"?[e]:e,m=this._createDelegatedListener(v,h,i);for(const x in m.delegates){const M=m.delegates[x];m.delegates[x]=(...P)=>{this._removeDelegatedListener(v,h,i),M(...P)}}this._saveDelegatedListener(v,m);for(const x in m.delegates)this.once(x,m.delegates[x]);return this}off(v,e,i){return i===void 0?super.off(v,e):(this._removeDelegatedListener(v,typeof e=="string"?[e]:e,i),this)}queryRenderedFeatures(v,e){if(!this.style)return[];let i;const h=v instanceof u.P||Array.isArray(v),m=h?v:[[0,0],[this.transform.width,this.transform.height]];if(e=e||(h?{}:v)||{},m instanceof u.P||typeof m[0]=="number")i=[u.P.convert(m)];else{const x=u.P.convert(m[0]),M=u.P.convert(m[1]);i=[x,new u.P(M.x,x.y),M,new u.P(x.x,M.y),x]}return this.style.queryRenderedFeatures(i,e,this.transform)}querySourceFeatures(v,e){return this.style.querySourceFeatures(v,e)}setStyle(v,e){return(e=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(v,e))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const e=this._locale[v];if(e==null)throw new Error(`Missing UI string '${v}'`);return e}_updateStyle(v,e){var i,h;if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,e));const m=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new Du(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,e,m):this.style.loadJSON(v,e,m),this):((h=(i=this.style)===null||i===void 0?void 0:i.projection)===null||h===void 0||h.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Du(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,e){if(typeof v=="string"){const i=this._requestManager.transformRequest(v,"Style");u.j(i,new AbortController).then(h=>{this._updateDiff(h.data,e)}).catch(h=>{h&&this.fire(new u.k(h))})}else typeof v=="object"&&this._updateDiff(v,e)}_updateDiff(v,e){try{this.style.setState(v,e)&&this._update(!0)}catch(i){u.w(`Unable to perform style diff: ${i.message||i.error||i}.  Rebuilding the style from scratch.`),this._updateStyle(v,e)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(v,e){return this._lazyInitEmptyStyle(),this.style.addSource(v,e),this._update(!0)}isSourceLoaded(v){const e=this.style&&this.style.sourceCaches[v];if(e!==void 0)return e.loaded();this.fire(new u.k(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const e=this.style.sourceCaches[v.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&e.reload();for(const i in this.style._layers){const h=this.style._layers[i];h.type==="hillshade"&&h.source===v.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Jc(this.painter,e,v),this.painter.renderToTexture=new Dn(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=i=>{var h;i.dataType==="style"?this.terrain.sourceCache.freeRtt():i.dataType==="source"&&i.tile&&(i.sourceId!==v.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((h=i.source)===null||h===void 0?void 0:h.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(i.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new u.l("terrain",{terrain:v})),this}getTerrain(){var v,e;return(e=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&e!==void 0?e:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const e in v){const i=v[e]._tiles;for(const h in i){const m=i[h];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}setSourceTileLodParams(v,e,i){if(i){const h=this.getSource(i);if(!h)throw new Error(`There is no source with ID "${i}", cannot set LOD parameters`);h.calculateTileZoom=se(Math.max(1,v),Math.max(1,e))}else for(const h in this.style.sourceCaches)this.style.sourceCaches[h].getSource().calculateTileZoom=se(Math.max(1,v),Math.max(1,e));return this._update(!0),this}addImage(v,e,i={}){const{pixelRatio:h=1,sdf:m=!1,stretchX:x,stretchY:M,content:P,textFitWidth:D,textFitHeight:j}=i;if(this._lazyInitEmptyStyle(),!(e instanceof HTMLImageElement||u.b(e))){if(e.width===void 0||e.height===void 0)return this.fire(new u.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:U,height:$,data:Z}=e,ee=e;return this.style.addImage(v,{data:new u.R({width:U,height:$},new Uint8Array(Z)),pixelRatio:h,stretchX:x,stretchY:M,content:P,textFitWidth:D,textFitHeight:j,sdf:m,version:0,userImage:ee}),ee.onAdd&&ee.onAdd(this,v),this}}{const{width:U,height:$,data:Z}=z.getImageData(e);this.style.addImage(v,{data:new u.R({width:U,height:$},Z),pixelRatio:h,stretchX:x,stretchY:M,content:P,textFitWidth:D,textFitHeight:j,sdf:m,version:0})}}updateImage(v,e){const i=this.style.getImage(v);if(!i)return this.fire(new u.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const h=e instanceof HTMLImageElement||u.b(e)?z.getImageData(e):e,{width:m,height:x,data:M}=h;if(m===void 0||x===void 0)return this.fire(new u.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==i.data.width||x!==i.data.height)return this.fire(new u.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const P=!(e instanceof HTMLImageElement||u.b(e));return i.data.replace(M,P),this.style.updateImage(v,i),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new u.k(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return xe.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,e){return this._lazyInitEmptyStyle(),this.style.addLayer(v,e),this._update(!0)}moveLayer(v,e){return this.style.moveLayer(v,e),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,e,i){return this.style.setLayerZoomRange(v,e,i),this._update(!0)}setFilter(v,e,i={}){return this.style.setFilter(v,e,i),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,e,i,h={}){return this.style.setPaintProperty(v,e,i,h),this._update(!0)}getPaintProperty(v,e){return this.style.getPaintProperty(v,e)}setLayoutProperty(v,e,i,h={}){return this.style.setLayoutProperty(v,e,i,h),this._update(!0)}getLayoutProperty(v,e){return this.style.getLayoutProperty(v,e)}setGlyphs(v,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,e,i={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,e,i,h=>{h||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,e,i=>{i||this._update(!0)}),this}setLight(v,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(v,e={}){return this._lazyInitEmptyStyle(),this.style.setSky(v,e),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,e){return this.style.setFeatureState(v,e),this._update()}removeFeatureState(v,e){return this.style.removeFeatureState(v,e),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,e=0;return this._container&&(v=this._container.clientWidth||400,e=this._container.clientHeight||300),[v,e]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const e=this._canvasContainer=F.create("div","maplibregl-canvas-container",v);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=F.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const i=this._containerDimensions(),h=this._getClampedPixelRatio(i[0],i[1]);this._resizeCanvas(i[0],i[1],h);const m=this._controlContainer=F.create("div","maplibregl-control-container",v),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(M=>{x[M]=F.create("div",`maplibregl-ctrl-${M} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,e,i){this._canvas.width=Math.floor(i*v),this._canvas.height=Math.floor(i*e),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const v=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let e=null;this._canvas.addEventListener("webglcontextcreationerror",h=>{e={requestedAttributes:v},h&&(e.statusMessage=h.statusMessage,e.type=h.type)},{once:!0});let i=null;if(i=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,v):this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v),!i){const h="Failed to initialize WebGL";throw e?(e.message=h,new Error(JSON.stringify(e))):new Error(h)}this.painter=new Xh(i,this.transform),G.testSupport(i)}migrateProjection(v,e){super.migrateProjection(v,e),this.painter.transform=v,this.fire(new u.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){var e,i,h,m,x;const M=this._idleTriggered?this._fadeDuration:0,P=((e=this.style.projection)===null||e===void 0?void 0:e.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let D=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const $=this.transform.zoom,Z=z.now();this.style.zoomHistory.update($,Z);const ee=new u.C($,{now:Z,fadeDuration:M,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),re=ee.crossFadingFactor();re===1&&re===this._crossFadingFactor||(D=!0,this._crossFadingFactor=re),this.style.update(ee)}const j=((i=this.style.projection)===null||i===void 0?void 0:i.transitionState)>0!==P;(h=this.style.projection)===null||h===void 0||h.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((m=this.style.projection)===null||m===void 0?void 0:m.transitionState,(x=this.style.projection)===null||x===void 0?void 0:x.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||j)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,M,this._crossSourceCollisions,j),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:M,showPadding:this.showPadding}),this.fire(new u.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.cl.mark(u.cm.load),this.fire(new u.l("load"))),this.style&&(this.style.hasTransitions()||D)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const U=this._sourcesDirty||this._styleDirty||this._placementDirty;return U||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.l("idle")),!this._loaded||this._fullyLoaded||U||(this._fullyLoaded=!0,u.cl.mark(u.cm.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),xe.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e!=null&&e.loseContext&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),F.remove(this._canvasContainer),F.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),u.cl.clearMetrics(),this._removed=!0,this.fire(new u.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,z.frame(this._frameRequest,v=>{u.cl.frame(v),this._frameRequest=null;try{this._render(v)}catch(e){if(!u.cn(e)&&!function(i){return i.message===Nl}(e))throw e}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return Tn}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(v){return this._lazyInitEmptyStyle(),this.style.setProjection(v),this._update(!0)}},y.MapMouseEvent=ci,y.MapTouchEvent=bi,y.MapWheelEvent=Ma,y.Marker=Yl,y.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const e=this._map.getZoom(),i=e===this._map.getMaxZoom(),h=e===this._map.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(e,i)=>{const h=this._map._getUIString(`NavigationControl.${i}`);e.title=h,e.setAttribute("aria-label",h)},this.options=u.e({},el,v),this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),F.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),F.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=F.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Pa(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){F.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,e){const i=F.create("button",v,this._container);return i.type="button",i.addEventListener("click",e),i}},y.Popup=class extends u.E{constructor(v){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&F.remove(this._content),this._container&&(F.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.l("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=F.create("div","maplibregl-popup",this._map.getContainer()),this._tip=F.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const M of this.options.className.split(" "))this._container.classList.add(M);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Kl(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!e)return;const i=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationToScreenPoint(this._lngLat));let h=this.options.anchor;const m=Ku(this.options.offset);if(!h){const M=this._container.offsetWidth,P=this._container.offsetHeight;let D;D=i.y+m.bottom.y<P?["top"]:i.y>this._map.transform.height-P?["bottom"]:[],i.x<M/2?D.push("left"):i.x>this._map.transform.width-M/2&&D.push("right"),h=D.length===0?"bottom":D.join("-")}let x=i.add(m[h]);this.options.subpixelPositioning||(x=x.round()),F.setTransform(this._container,`${tl[h]} translate(${x.x}px,${x.y}px)`),rl(this._container,h,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(nf),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=u.Q.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const e=document.createDocumentFragment(),i=document.createElement("body");let h;for(i.innerHTML=v;h=i.firstChild,h;)e.appendChild(h);return this.setDOMContent(e)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=F.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=F.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(Wu);v&&v.focus()}},y.RasterDEMTileSource=we,y.RasterTileSource=Yn,y.ScaleControl=class{constructor(v){this._onMove=()=>{Xl(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,Xl(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},th),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){F.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},y.ScrollZoomHandler=Xc,y.Style=Du,y.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=F.create("button","maplibregl-ctrl-terrain",this._container),F.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){F.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},y.TwoFingersTouchPitchHandler=id,y.TwoFingersTouchRotateHandler=Wc,y.TwoFingersTouchZoomHandler=Fs,y.TwoFingersTouchZoomRotateHandler=Vs,y.VectorTileSource=Un,y.VideoSource=vt,y.addSourceType=(v,e)=>u._(void 0,void 0,void 0,function*(){if(Ut(v))throw new Error(`A source type called "${v}" already exists.`);((i,h)=>{Et[i]=h})(v,e)}),y.clearPrewarmedResources=function(){const v=zt;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(wt),zt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},y.createTileMesh=Ac,y.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},y.getRTLTextPluginStatus=function(){return Rn().getRTLTextPluginStatus()},y.getVersion=function(){return rh},y.getWorkerCount=function(){return Zt.workerCount},y.getWorkerUrl=function(){return u.a.WORKER_URL},y.importScriptInWorkers=function(v){return br().broadcast("IS",v)},y.prewarm=function(){ir().acquire(wt)},y.setMaxParallelImageRequests=function(v){u.a.MAX_PARALLEL_IMAGE_REQUESTS=v},y.setRTLTextPlugin=function(v,e){return Rn().setRTLTextPlugin(v,e)},y.setWorkerCount=function(v){Zt.workerCount=v},y.setWorkerUrl=function(v){u.a.WORKER_URL=v}});var S=f;return S})}(R_)),R_.exports}var nz=rz();const cs=bv(nz);function iz(n){const a={},f={},p={};for(const _ in n)if(_.startsWith("on"))a[_]=n[_];else if(MM.includes(_))f[_]=n[_];else if(TM.includes(_))p[_]=n[_];else if(!_.startsWith("initial")&&_!=="container"&&_!=="style")throw Error(`unknown map option key ${_}`);return[p,a,f]}function qm(n,a){const f={},p={};for(const _ in n){if(a!=null&&a.includes(_)){p[_]=n[_];continue}if(_.startsWith("on"))f[_]=n[_];else{const S=_.startsWith("initial")?_[7].toLowerCase()+_.substring(8):_;if(p[S])throw new Error(`duplicate key ${S}`);p[S]=n[_]}}return[p,f]}function Gm(n,a){return Object.keys(n).filter(p=>n[p]in a).sort()}function tp(n,a){if(n===a)return!0;if(!n||!a)return!1;if(Array.isArray(n)){if(!Array.isArray(a)||n.length!==a.length)return!1;for(let f=0;f<n.length;f++)if(!tp(n[f],a[f]))return!1;return!0}else if(Array.isArray(a))return!1;if(typeof n=="object"&&typeof a=="object"){const f=Object.keys(n),p=Object.keys(a);if(f.length!==p.length)return!1;for(const _ of f)if(!Object.prototype.hasOwnProperty.call(a,_)||!tp(n[_],a[_]))return!1;return!0}return!1}function az(n,a){const f=Array.isArray(n)?n[0]:n?n.x:0,p=Array.isArray(n)?n[1]:n?n.y:0,_=Array.isArray(a)?a[0]:a?a.x:0,S=Array.isArray(a)?a[1]:a?a.y:0;return f===_&&p===S}function a0(n,a,f){a.forEach(p=>{p!==""&&f.indexOf(p)===-1&&n.classList.remove(p)}),f.forEach(p=>{p!==""&&(a.indexOf(p)===-1||!n.classList.contains(p))&&n.classList.add(p)})}function sz(n,a,f,p){n.forEach(_=>{_!==""&&a.indexOf(_)===-1&&p(_)}),a.forEach(_=>{_!==""&&n.indexOf(_)===-1&&f(_)})}function oz(){const n="abcdefghijklmnopqrstuvwxyz0123456789";let a="";for(let f=0;f<8;f++){const p=Math.floor(Math.random()*n.length);a+=n[p]}return a}var m2={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mouseout:"onMouseOut",mousemove:"onMouseMove",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",click:"onClick",dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchcancel:"onTouchCancel",touchmove:"onTouchMove",movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd",wheel:"onWheel",resize:"onResize",remove:"onRemove",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",webglcontextlost:"onWebglContextLost",webglcontextrestored:"onWebglContextRestored",load:"onLoad",render:"onRender",idle:"onIdle",error:"onError",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",dataloading:"onDataLoading",styledataloading:"onStyleDataLoading",sourcedataloading:"onSourceDataLoading",tiledataloading:"onTileDataLoading",styleimagemissing:"onStyleImageMissing",dataabort:"onDataAbort",sourcedataabort:"onSourceDataAbort",terrain:"onTerrain"},TM=["maxBounds","minZoom","maxZoom","minPitch","maxPitch","renderWorldCopies","pixelRatio","centerClampedToGround"],MM=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch","cooperativeGestures"],g2="https://demotiles.maplibre.org/style.json",lz=class{constructor({mapStyle:n=g2,padding:a},f,p){bn(this,"reactiveOptions",{});bn(this,"handlerOptions",{});bn(this,"eventNames",[]);bn(this,"callbacks");bn(this,"_map");bn(this,"padding");bn(this,"mapStyle");bn(this,"controlledSources",{});bn(this,"controlledLayers",{});bn(this,"controlledTerrain",null);bn(this,"_onStyleError",n=>{n.error.name!=="AbortError"&&console.error(n.error)});bn(this,"_onMapEvent",n=>{var p,_;const a=n.type,f=m2[a];this.callbacks[f]?(_=(p=this.callbacks)[f])==null||_.call(p,n):console.info("not managed RMap event",a,n)});this.mapStyle=n,this.padding=a;const[_,S]=qm(f);this.callbacks=S;const y={..._,container:p,style:n},u=new cs.Map(y);u.style.on("error",this._onStyleError),a&&u.setPadding(a),this._map=u,this._updateCallbacks(S)}setProps({mapStyle:n=g2,styleDiffing:a=!0,styleTransformStyle:f,padding:p},_){const[S,y,u]=iz(_);this._updateCallbacks(y),this._updateStyle(n,{diff:a,transformStyle:f}),this._updateReactiveOptions(S,{padding:p}),this._updateHandlers(u)}getControlledTerrain(){return this.controlledTerrain}setControlledTerrain(n){this.controlledTerrain=n}getControlledLayer(n){return this.controlledLayers[n]??null}setControlledLayer(n,a){a?this.controlledLayers[n]=a:delete this.controlledLayers[n]}getControlledSource(n){return this.controlledSources[n]??null}setControlledSource(n,a){a?this.controlledSources[n]=a:delete this.controlledSources[n]}_updateStyle(n,a){const f=this.mapStyle;n!==f&&(this.mapStyle=n,this._map.setStyle(n,{diff:a.diff,transformStyle:(p,_)=>{const S=p?Object.fromEntries(Object.entries(p==null?void 0:p.sources).filter(([C])=>C in this.controlledSources)):{},y=p?p.layers.filter(C=>C.id in this.controlledLayers):[],u={..._,sources:{..._.sources,...S},layers:[..._.layers,...y],terrain:this.controlledTerrain?p==null?void 0:p.terrain:_.terrain};return a.transformStyle?a.transformStyle(p,u):u}}))}_updateReactiveOptions(n,{padding:a}){const f=this.reactiveOptions;this.reactiveOptions=n;for(const p of TM)if(p in n&&!tp(f[p],n[p])){const _=`set${p[0].toUpperCase()}${p.substring(1)}`;this._map[_](n[p])}a&&!tp(this.padding,a)&&this._map.setPadding(a),this.padding=a}_updateCallbacks(n={}){this.callbacks=n;const a=Gm(m2,n);this.eventNames.join("-")!==a.join("-")&&(sz(this.eventNames,a,f=>this._map.on(f,this._onMapEvent),f=>this._map.off(f,this._onMapEvent)),this.eventNames=a)}_updateHandlers(n){const a=this.handlerOptions;this.handlerOptions=n;for(const f of MM){const p=n[f]??!0,_=a[f]??!0;tp(p,_)||(p?this._map[f].enable(p):this._map[f].disable())}}get map(){return this._map}destroy(){this._updateCallbacks(),this._map.remove()}},V0=typeof window<"u"?oe.useLayoutEffect:oe.useEffect,uz=class{constructor(){bn(this,"_maps",{});bn(this,"_listeners",{})}add(n,a){var f;this._maps[n]=a,(f=this._listeners[n])==null||f.forEach(([p,_])=>{p||_(!0)})}remove(n){var a;delete this._maps[n],(a=this._listeners[n])==null||a.forEach(([f,p])=>{f&&p(!1)})}get(n){return n?this._maps[n]??null:null}addListener(n,a){this._listeners[n]?this._listeners[n].push(a):this._listeners[n]=[a];const f=!!this._maps[n];a[0]!==f&&a[1](f)}removeListener(n,[,a]){this._listeners[n]=this._listeners[n].filter(([,f])=>f!==a)}},xv=oe.createContext(null),AM=oe.createContext(null),y2={height:"100%"},cz=oe.forwardRef(function({children:a,style:f,id:p,className:_,onMounted:S,mapStyle:y,styleDiffing:u,styleTransformStyle:C,padding:R,...O},B){const z=oe.useRef(null),F=oe.useRef(!0),G=oe.useRef(p??oz());if(p&&p!==G.current)throw new Error(`RMap id should not change. "${p}" "${G.current}". If you defined id as const string add a "key" prop to your RMap component`);const te=G.current,K=oe.useContext(xv),X=oe.useRef();!K&&!X.current&&(X.current=new uz);const ye=K?K.current:X.current,[,pe]=oe.useState(0);V0(()=>{const Se=ye.get(te);if(Se)F.current?Se.setProps({mapStyle:y,padding:R,styleDiffing:u,styleTransformStyle:C},O):F.current=!0;else{const ke=new lz({mapStyle:y,styleDiffing:u,padding:R},O,z.current);ye.add(te,ke),S&&S(ke.map),pe(it=>it+1),F.current=!1}}),V0(()=>()=>{const Se=ye.get(te);Se&&(Se.destroy(),ye.remove(te))},[]),oe.useImperativeHandle(B,()=>{var Se;return((Se=ye.get(te))==null?void 0:Se.map)||null},[te,ye]),V0(()=>{if(!_)return;const Se=z.current;return _.split(" ").map(ke=>Se.classList.add(ke)),()=>void _.split(" ").map(ke=>Se.classList.remove(ke))},[_]);const xe=oe.useMemo(()=>({position:"relative",width:"100%",height:"100%",...f}),[f]);return J.jsx("div",{ref:z,id:te,style:xe,children:ye.get(te)&&J.jsx(AM.Provider,{value:te,children:K?J.jsx("div",{className:"maplibregl-children",style:y2,children:a}):J.jsx(xv.Provider,{value:X,children:J.jsx("div",{className:"maplibregl-children",style:y2,children:a})})})})});function px(n){const a=oe.useContext(xv),p=oe.useContext(AM),_=(a==null?void 0:a.current.get(p))??null,S=oe.useState(_!==null);if(!(a!=null&&a.current))throw new Error("use useMapManager in components inside <RMap /> or inside <RMapContextProvider />");if(!p)throw new Error("provide an id to useMap or use inside <RMap />");return oe.useEffect(()=>{const y=a.current;if(!y)throw new Error("mapManagers can't disappear");return y.addListener(p,S),()=>{y.removeListener(p,S)}},[p,a,S,_]),_}function Hm(n){var a;return((a=px())==null?void 0:a.map)??null}var _2={dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",click:"onClick"};oe.memo(oe.forwardRef(function(a,f){var Ke;const{longitude:p,latitude:_,children:S,...y}=a,u=Hm(),[C,R]=qm(y),O=oe.useRef(C),B=oe.useRef();B.current=R;const z=oe.useMemo(()=>{const Ye={...C,element:S?document.createElement("div"):void 0},ht=new cs.Marker(Ye);return ht.setLngLat([p,_]),ht},[]),F=Gm(_2,R).join("-");oe.useEffect(()=>{function Ye(Lt){var Xt,or,Ct;const sr=Lt.type,nr=_2[sr];(Xt=B.current)!=null&&Xt[nr]?(Ct=(or=B.current)[nr])==null||Ct.call(or,Lt):console.info("not managed RMarker event",sr,Lt)}const ht=F.split("-");return ht.forEach(Lt=>{Lt==="click"?z.getElement().addEventListener("click",Ye):z.on(Lt,Ye)}),()=>{ht.forEach(Lt=>{Lt==="click"?z.getElement().removeEventListener("click",Ye):z.off(Lt,Ye)})}},[F,z]),oe.useEffect(()=>(z.addTo(u),()=>void z.remove()),[]);const{className:G,offset:te,draggable:K,clickTolerance:X=0,rotation:ye,rotationAlignment:pe,subpixelPositioning:xe=!1,pitchAlignment:Se,opacity:ke,opacityWhenCovered:it}=C;return oe.useImperativeHandle(f,()=>z,[z]),O.current.className!==G&&a0(z._element,((Ke=O.current.className)==null?void 0:Ke.split(" "))||[],(G==null?void 0:G.split(" "))||[]),(z.getLngLat().lng!==p||z.getLngLat().lat!==_)&&z.setLngLat([p,_]),te&&!az(z.getOffset(),te)&&z.setOffset(te),z.isDraggable()!==K&&z.setDraggable(K),z._clickTolerance!==X&&(z._clickTolerance=X),z.getRotation()!==ye&&z.setRotation(ye),z.getRotationAlignment()!==pe&&z.setRotationAlignment(pe),z.getPitchAlignment()!==Se&&z.setPitchAlignment(Se),(z._opacity!==ke||z._opacityWhenCovered!==it)&&z.setOpacity(ke,it),z.setSubpixelPositioning&&z._subpixelPositioning!==xe&&z.setSubpixelPositioning(xe),O.current=C,S?q_.createPortal(S,z.getElement()):null}));var $0={map_click:"onMapClick",map_move:"onMapMove"};oe.memo(oe.forwardRef(function(a,f){var ye;const{longitude:p,latitude:_,children:S,...y}=a,u=Hm(),[C,R]=qm(y),O=oe.useRef(null),B=oe.useRef(C),z=oe.useRef();z.current=R;const F=oe.useMemo(()=>document.createElement("div"),[]);O.current||(O.current=new cs.Popup({...C,closeButton:!1,closeOnClick:!1,closeOnMove:!1}),p!==void 0&&_!==void 0&&O.current.setLngLat([p,_]));const G=Gm($0,R).join("-");oe.useEffect(()=>{function pe(ke){var Ye,ht,Lt;const it=ke.type,Ke=$0[it]||$0[`map_${it}`];(Ye=z.current)!=null&&Ye[Ke]?(Lt=(ht=z.current)[Ke])==null||Lt.call(ht,ke):console.info("not managed RPopup event",it,ke)}if(G==="")return;const xe=G.split("-"),Se=O.current;return xe.forEach(ke=>{ke.startsWith("map_")?u.on(ke.substring(4),pe):Se.on(ke,pe)}),()=>{xe.forEach(ke=>{ke.startsWith("map_")?u.off(ke.substring(4),pe):Se.off(ke,pe)})}},[G,u]),oe.useEffect(()=>(O.current.setDOMContent(F).addTo(u),()=>void O.current.remove()),[F,u]);const{offset:te,maxWidth:K="240px",className:X}=C;return oe.useImperativeHandle(f,()=>O.current,[O]),O.current.isOpen()&&(p!==void 0&&_!==void 0&&(O.current.getLngLat().lng!==p||O.current.getLngLat().lat!==_)&&O.current.setLngLat([p,_]),te&&!tp(O.current.options.offset,te)&&O.current.setOffset(te),B.current.className!==X&&a0(F,((ye=B.current.className)==null?void 0:ye.split(" "))||[],(X==null?void 0:X.split(" "))||[]),O.current.getMaxWidth()!==K&&O.current.setMaxWidth(K)),B.current=C,q_.createPortal(S,F)}));var v2={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mouseout:"onMouseOut",mousemove:"onMouseMove",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",click:"onClick",dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchcancel:"onTouchCancel",touchmove:"onTouchMove"};function hz(n,a,f){var p;if((p=n.style)!=null&&p._loaded&&(a.type==="background"||a.type==="custom"||a.source&&n.getSource(a.source)))return n.addLayer(a,f&&n.getLayer(f)?f:void 0),n.getLayer(a.id)}function fz(n,{beforeId:a,...f},{beforeId:p,..._}){var u,C;if(_.type==="custom"||f.type==="custom")return;p!==a&&n.moveLayer(f.id,a),f.type!=="background"&&f.type!=="custom"&&_.filter!==f.filter&&n.setFilter(f.id,f.filter);const S=_,y=f;if(S.layout!==y.layout){if(y.layout)for(const R of Object.keys(y.layout))y.layout[R]!==((u=S.layout)==null?void 0:u[R])&&n.setLayoutProperty(f.id,R,y.layout[R]);for(const R in S.layout)Object.prototype.hasOwnProperty.call(y.layout,R)||n.setLayoutProperty(f.id,R,void 0)}if(S.paint!==y.paint){if(y.paint)for(const R of Object.keys(y.paint))y.paint[R]!==((C=S.paint)==null?void 0:C[R])&&n.setPaintProperty(f.id,R,y.paint[R]);for(const R in S.paint)Object.prototype.hasOwnProperty.call(y.paint,R)||n.setPaintProperty(f.id,R,void 0)}(S.minzoom!==y.minzoom||S.maxzoom!==y.maxzoom)&&y.minzoom&&y.maxzoom&&n.setLayerZoomRange(f.id,y.minzoom,y.maxzoom)}oe.memo(oe.forwardRef(function(a,f){var X;const{beforeId:p,..._}=a,[S,y]=qm(_,["onAdd"]),u=S.id,C=px();if(!C)throw new Error("use <RLayer /> component inside <RMap />");const R=C.map,O=oe.useRef(u);if(u!==O.current)throw new Error(`RLayer id should not change. "${u}" "${O.current}". If you defined id as const string add a "key" prop to your RLayer component`);const B=C.getControlledLayer(u)??a,[,z]=oe.useState(0),F=oe.useCallback(()=>z(ye=>ye+1),[]);if(a.type!==B.type)throw new Error(`RLayer type should not change. "${a.type}" "${B.type}"`);const G=oe.useRef();G.current=y,oe.useEffect(()=>(R.on("styledata",F),R.style&&R.style._loaded&&F(),()=>{R.off("styledata",F),R.style&&R.style._loaded&&R.getLayer(u)&&R.removeLayer(u),C==null||C.setControlledLayer(u,null)}),[R,u,C,F]);const te=Gm(v2,y).join("-");oe.useEffect(()=>{function ye(xe){var it,Ke,Ye;const Se=xe.type,ke=v2[Se];(it=G.current)!=null&&it[ke]?(Ye=(Ke=G.current)[ke])==null||Ye.call(Ke,xe):console.info("not managed RLayer event",Se,xe)}const pe=te.split("-");return pe.forEach(xe=>{R.on(xe,u,ye)}),()=>{pe.forEach(xe=>{R.off(xe,u,ye)})}},[te,u,R]);let K=((X=R.style)==null?void 0:X._loaded)&&R.getLayer(u);return K?fz(R,a,B):(K=hz(R,S,p),K&&R.off("styledata",F)),oe.useImperativeHandle(f,()=>K||null,[K]),C.setControlledLayer(u,a),null}));function dz(n,a,f){var p;if((p=n.style)!=null&&p._loaded)return n.addSource(a,f),n.getSource(a)}function pz(n,a,f){switch(a.type){case"image":{const p=f,_=a;p.url!==_.url&&n.updateImage({url:_.url,coordinates:_.coordinates}),p.coordinates!==_.coordinates&&n.setCoordinates(_.coordinates);break}case"video":{const p=f,_=a;p.coordinates!==_.coordinates&&n.setCoordinates(_.coordinates);break}case"geojson":{const p=f,_=a;p.data!==_.data&&n.setData(_.data),(p.cluster!==_.cluster||p.clusterMaxZoom!==_.clusterMaxZoom||p.clusterRadius!==_.clusterRadius)&&n.setClusterOptions({cluster:_.cluster,clusterMaxZoom:_.clusterMaxZoom,clusterRadius:_.clusterRadius});break}case"raster":case"raster-dem":case"vector":{const p=f,_=a;p.tiles!==_.tiles&&_.tiles&&n.setTiles(_.tiles),p.url!==_.url&&_.url&&n.setUrl(_.url);break}}}oe.memo(oe.forwardRef(function(a,f){var F;const{id:p,..._}=a,S=px(),y=S.map,u=oe.useRef(p);if(p!==u.current)throw new Error(`RSource id should not change. "${p}" "${u.current}". If you defined id as const string add a "key" prop to your RSource component`);const{id:C,...R}=S.getControlledSource(p)??a;if(_.type!==R.type)throw new Error(`RSource type should not change. "${_.type}" "${R.type}"`);const[,O]=oe.useState(0),B=oe.useCallback(()=>void setTimeout(()=>O(G=>G+1),0),[]);oe.useEffect(()=>(y.on("styledata",B),y.style&&y.style._loaded&&B(),()=>{var G;if(y.off("styledata",B),y.style&&y.getSource(p)){const te=(G=y.getStyle())==null?void 0:G.layers;if(te)for(const K of te)K.type!=="background"&&K.type!=="custom"&&K.source===p&&y.removeLayer(K.id);y.removeSource(p)}S==null||S.setControlledSource(p,null)}),[y,p,S,B]);let z=((F=y.style)==null?void 0:F._loaded)&&y.getSource(p);return z?pz(z,_,R):(z=dz(y,p,_),z&&y.off("styledata",B)),oe.useImperativeHandle(f,()=>z||null,[z]),S.setControlledSource(p,a),null}));function Mh(n,a){this.x=n,this.y=a}Mh.prototype={clone(){return new Mh(this.x,this.y)},add(n){return this.clone()._add(n)},sub(n){return this.clone()._sub(n)},multByPoint(n){return this.clone()._multByPoint(n)},divByPoint(n){return this.clone()._divByPoint(n)},mult(n){return this.clone()._mult(n)},div(n){return this.clone()._div(n)},rotate(n){return this.clone()._rotate(n)},rotateAround(n,a){return this.clone()._rotateAround(n,a)},matMult(n){return this.clone()._matMult(n)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(n){return this.x===n.x&&this.y===n.y},dist(n){return Math.sqrt(this.distSqr(n))},distSqr(n){const a=n.x-this.x,f=n.y-this.y;return a*a+f*f},angle(){return Math.atan2(this.y,this.x)},angleTo(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith(n){return this.angleWithSep(n.x,n.y)},angleWithSep(n,a){return Math.atan2(this.x*a-this.y*n,this.x*n+this.y*a)},_matMult(n){const a=n[0]*this.x+n[1]*this.y,f=n[2]*this.x+n[3]*this.y;return this.x=a,this.y=f,this},_add(n){return this.x+=n.x,this.y+=n.y,this},_sub(n){return this.x-=n.x,this.y-=n.y,this},_mult(n){return this.x*=n,this.y*=n,this},_div(n){return this.x/=n,this.y/=n,this},_multByPoint(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint(n){return this.x/=n.x,this.y/=n.y,this},_unit(){return this._div(this.mag()),this},_perp(){const n=this.y;return this.y=this.x,this.x=-n,this},_rotate(n){const a=Math.cos(n),f=Math.sin(n),p=a*this.x-f*this.y,_=f*this.x+a*this.y;return this.x=p,this.y=_,this},_rotateAround(n,a){const f=Math.cos(n),p=Math.sin(n),_=a.x+f*(this.x-a.x)-p*(this.y-a.y),S=a.y+p*(this.x-a.x)+f*(this.y-a.y);return this.x=_,this.y=S,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:Mh};Mh.convert=function(n){if(n instanceof Mh)return n;if(Array.isArray(n))return new Mh(+n[0],+n[1]);if(n.x!==void 0&&n.y!==void 0)return new Mh(+n.x,+n.y);throw new Error("Expected [x, y] or {x, y} point format")};var on,Of=(on=class{static testProp(a){if(!on.docStyle)return a[0];for(let f=0;f<a.length;f++)if(a[f]in on.docStyle)return a[f];return a[0]}static create(a,f,p){const _=window.document.createElement(a);return f!==void 0&&(_.className=f),p&&p.appendChild(_),_}static createNS(a,f){return window.document.createElementNS(a,f)}static disableDrag(){on.docStyle&&on.selectProp&&(on.userSelect=on.docStyle[on.selectProp],on.docStyle[on.selectProp]="none")}static enableDrag(){on.docStyle&&on.selectProp&&(on.docStyle[on.selectProp]=on.userSelect)}static setTransform(a,f){a.style[on.transformProp]=f}static addEventListener(a,f,p,_={}){"passive"in _?a.addEventListener(f,p,_):a.addEventListener(f,p,_.capture)}static removeEventListener(a,f,p,_={}){"passive"in _?a.removeEventListener(f,p,_):a.removeEventListener(f,p,_.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",on.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",on.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",on.suppressClickInternal,!0)},0)}static getScale(a){const f=a.getBoundingClientRect();return{x:f.width/a.offsetWidth||1,y:f.height/a.offsetHeight||1,boundingClientRect:f}}static getPoint(a,f,p){const _=f.boundingClientRect;return new Mh((p.clientX-_.left)/f.x-a.clientLeft,(p.clientY-_.top)/f.y-a.clientTop)}static mousePos(a,f){const p=on.getScale(a);return on.getPoint(a,p,f)}static touchPos(a,f){const p=[],_=on.getScale(a);for(let S=0;S<f.length;S++)p.push(on.getPoint(a,_,f[S]));return p}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}},bn(on,"docStyle",typeof window<"u"&&window.document&&window.document.documentElement.style),bn(on,"userSelect"),bn(on,"selectProp",on.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"])),bn(on,"transformProp",on.testProp(["transform","WebkitTransform"])),on),x2="#ffe64b",b2=50,mz=class extends cs.Marker{constructor(a){a??(a={}),a.element=Of.create("div","maplibregl-gradient-marker"),a.className&&a.element.classList.add(a.className);super(a);bn(this,"_interactive");bn(this,"_shape");bn(this,"_icon");bn(this,"_height",b2);bn(this,"_text");bn(this,"_circleElement",null);bn(this,"_iconElement",null);bn(this,"_textElement",null);bn(this,"_markerElement");bn(this,"_onActive",()=>{this._map.getContainer().addEventListener("mouseup",this._onInactive,{once:!0}),this._map.getContainer().addEventListener("touchend",this._onInactive,{once:!0}),this._element.classList.add("active")});bn(this,"_onInactive",()=>{this._element.classList.remove("active")});this._draggable&&this._element.classList.add("draggable"),this._interactive=a&&a.interactive===!1?!1:"pending",this._shape=(a&&a.shape)??"pin",this._color=(a&&a.color)??x2,this._icon=a&&a.icon,this._text=a&&a.text,this._defaultMarker=!0,this._element.setAttribute("aria-label","Map marker"),this._element.setAttribute("tabindex","0"),this.setScale(this._scale),this.setColor(this._color),this._markerElement=Of.create("div","marker"),this.setShape(this._shape),this._text?this.setText(this._text):this._icon&&this.setIcon(this._icon);const f=Of.create("div","target");this._element.appendChild(this._markerElement),this._element.appendChild(f)}addTo(a){return cs.Marker.prototype.addTo.apply(this,[a]),this._interactive==="pending"&&this.setInteractive(!0),this}setInteractive(a=!0){this._interactive!==a&&(this._interactive=a,a?this._element.dataset.interactive="":delete this._element.dataset.interactive,a?(this._element.addEventListener("mousedown",this._onActive),this._element.addEventListener("touchstart",this._onActive)):(this._element.removeEventListener("mousedown",this._onInactive),this._element.removeEventListener("touchstart",this._onInactive)))}getInteractive(){return this._interactive}remove(){return this._map&&this.setInteractive(!1),cs.Marker.prototype.remove.apply(this),this}setIcon(a){var f,p;return this.resetIconText(),this._icon=a,a?(this._circleElement=Of.create("div","circle",this._markerElement),typeof a=="string"?(this._iconElement=Of.create("i",a,this._markerElement),this._iconElement.className=a||""):typeof a=="function"?(this._iconElement=a(),(f=this._markerElement)==null||f.append(this._iconElement)):(this._iconElement=a,(p=this._markerElement)==null||p.append(a)),this):this}getIcon(){return this._icon}resetIconText(){var a,f,p;(a=this._circleElement)==null||a.remove(),(f=this._iconElement)==null||f.remove(),(p=this._textElement)==null||p.remove(),this._circleElement=null,this._iconElement=null,this._textElement=null}setText(a){return this.resetIconText(),this._text=a,a?(this._circleElement=Of.create("div","circle",this._markerElement),this._textElement=Of.create("div","text",this._markerElement),this._textElement.innerText=a,this):this}getText(){return this._text}setColor(a){return this._color=a||x2,this._element.style.setProperty("--marker-color",this._color),this}getColor(){return this._color}setScale(a=1,f=b2){return this._scale=a,this._height=f*this._scale,this._element.style.setProperty("--marker-scale",a.toString()),this}getScale(){return this._scale}setShape(a){return this._shape=a||"pin",this._anchor=this._shape==="pin"?"bottom":"center",this._element.dataset.shape=this._shape,this._update(),this}getShape(){return this._shape}setDraggable(a){return cs.Marker.prototype.setDraggable.apply(this,[a]),this._element.classList.toggle("draggable",a),this}},w2={dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",click:"onClick"},gz=oe.memo(oe.forwardRef(function(a,f){var sr;const{longitude:p,latitude:_,...S}=a,y=Hm(),[u,C]=qm(S),R=oe.useRef(u),O=oe.useRef();O.current=C;const B=oe.useMemo(()=>{const nr=new mz({...u,anchor:"bottom"});return nr.setLngLat([p,_]),nr},[]),z=Gm(w2,C).join("-");oe.useEffect(()=>{function nr(or){var Rt,fr,De;const Ct=or.type,Nt=w2[Ct];(Rt=O.current)!=null&&Rt[Nt]?(De=(fr=O.current)[Nt])==null||De.call(fr,or):console.info("not managed RGradientMarker event",Ct,or)}const Xt=z.split("-");return Xt.forEach(or=>{or==="click"?B.getElement().addEventListener("click",nr):B.on(or,nr)}),()=>{Xt.forEach(or=>{or==="click"?B.getElement().removeEventListener("click",nr):B.off(or,nr)})}},[z,B]),oe.useEffect(()=>(B.addTo(y),()=>void B.remove()),[]);const{scale:F,color:G,text:te,icon:K,interactive:X,className:ye,draggable:pe,clickTolerance:xe=0,rotation:Se,rotationAlignment:ke,subpixelPositioning:it=!1,pitchAlignment:Ke,shape:Ye,opacity:ht,opacityWhenCovered:Lt}=u;return oe.useImperativeHandle(f,()=>B,[B]),R.current.className!==ye&&a0(B._element,((sr=R.current.className)==null?void 0:sr.split(" "))||[],(ye==null?void 0:ye.split(" "))||[]),B.getInteractive()!==X&&B.setInteractive(X),B.getShape()!==Ye&&B.setShape(Ye),(B.getLngLat().lng!==p||B.getLngLat().lat!==_)&&B.setLngLat([p,_]),B.isDraggable()!==pe&&B.setDraggable(pe),B._clickTolerance!==xe&&(B._clickTolerance=xe),B.getRotation()!==Se&&B.setRotation(Se),B.getRotationAlignment()!==ke&&B.setRotationAlignment(ke),B.getPitchAlignment()!==Ke&&B.setPitchAlignment(Ke),(B._opacity!==ht||B._opacityWhenCovered!==Lt)&&B.setOpacity(ht,Lt),B.setSubpixelPositioning&&B._subpixelPositioning!==it&&B.setSubpixelPositioning(it),B.getColor()!==G&&B.setColor(G),B.getScale()!==F&&B.setScale(F),B.getText()!==te&&B.setText(te),B.getIcon()!==K&&B.setIcon(K),R.current=u,null}));function CM({position:n,className:a="maplibregl-ctrl maplibregl-ctrl-group"}){var S;const f=Hm(),p=oe.useRef(),_=oe.useRef({className:a});if(!p.current){const y=document.createElement("div");y.className=a,p.current=y}return oe.useEffect(()=>{const y=p.current;if(y&&!y.parentElement){const u=f._controlPositions[n];if(!u)throw new Error(`Unable to add control, position ${n} doesn't exists`);n.indexOf("bottom")!==-1?u.insertBefore(y,u.firstChild):u.appendChild(y)}return()=>{p.current&&p.current.remove()}},[f,n]),_.current.className!==a&&a0(p.current,((S=_.current.className)==null?void 0:S.split(" "))||[],(a==null?void 0:a.split(" "))||[]),_.current={className:a},{container:p.current}}function yz({height:n=27}){const[a,f]=oe.useState("25s");return J.jsxs("svg",{width:n*21/27,height:n,viewBox:"-10.5 -10.5 21 27",fill:"none",version:"1.1",id:"svg3",xmlns:"http://www.w3.org/2000/svg",onMouseEnter:()=>f("2s"),onMouseLeave:()=>f("25s"),children:[J.jsx("path",{fill:"#82b4fe",fillRule:"evenodd",d:"m 0.04378077,-7.0160133 c -3.95934197,-0.025693 -7.19979577,2.9709105 -7.22395607,6.67957072 -0.021351,3.28396108 1.6024867,4.88716988 3.3609363,6.62322508 1.2259466,1.2102943 2.5172339,2.4851233 3.36206037,4.4390285 0.056993,0.04631 0.095121,0.07722 0.1114948,0.09183 a 0.41450831,0.41450831 0 0 0 0.2727553,0.103225 0.41515047,0.41515047 0 0 0 0.2741963,-0.09961 c 0.00438,-0.0039 0.012527,-0.0074 0.022479,-0.01165 0.027304,-0.01171 0.068791,-0.02955 0.090222,-0.0789 C 1.1559887,8.7954149 2.4656545,7.5377628 3.7164045,6.3367792 5.4974902,4.626493 7.158975,3.0309869 7.1802478,-0.24301718 7.2043965,-3.9517594 4.0032063,-6.9901745 0.04378537,-7.016023 Z m -0.06903,10.6235008 C 1.9352357,3.6202595 3.5351559,2.0173639 3.5480768,0.02733852 3.5610008,-1.9626869 1.9821136,-3.5862858 0.02154667,-3.5990486 -1.9390213,-3.6118206 -3.5388592,-2.0089214 -3.5518634,-0.01889648 -3.5647874,1.9711289 -1.9858982,3.5947246 -0.02533123,3.6074875 Z"}),J.jsx("path",{fill:"currentColor",d:"m -2.4911489,12.068709 c -0.3270955,-0.0022 -0.5946317,0.359604 -0.5975214,0.807906 l -0.014767,2.269118 c -0.00295,0.448302 0.2598305,0.813445 0.587006,0.815611 l 5.0075702,0.03259 c 0.3270965,0.0022 0.5946306,-0.359606 0.5975218,-0.807909 l 0.014775,-2.269117 c 0.00304,-0.44838 -0.259831,-0.813523 -0.5870064,-0.815609 z"}),J.jsxs("g",{children:[J.jsx("circle",{cx:"0",cy:"0",r:"2",fill:"currentColor",id:"circle1"}),J.jsxs("g",{stroke:"currentColor",strokeWidth:"1",fill:"none",id:"g3",children:[J.jsx("ellipse",{rx:"10",ry:"4.5",id:"ellipse1",cx:"0",cy:"0"}),J.jsx("ellipse",{rx:"10",ry:"4.5",transform:"rotate(60)",id:"ellipse2",cx:"0",cy:"0"}),J.jsx("ellipse",{rx:"10",ry:"4.5",transform:"rotate(120)",id:"ellipse3",cx:"0",cy:"0"})]}),J.jsx("animateTransform",{attributeName:"transform",type:"rotate",dur:a,values:"0 0 0;360 0 0;",repeatCount:"indefinite"})]})]})}oe.memo(function({position:a="bottom-left"}){const{container:f}=CM({position:a,className:"maplibregl-ctrl maplibregl-ctrl-mrc-logo"});return q_.createPortal(J.jsx("a",{target:"_blank",rel:"noopener nofollow",href:"https://maplibre-react-components.pentatrion.com","aria-label":"MapLibre React components logo",children:J.jsx(yz,{height:30})}),f)});function _z(n){const a=oe.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return a.current=n,oe.useCallback((...f)=>{var p;return(p=a.current)==null?void 0:p.call(a,...f)},[a])}function Rh({position:n="top-right",factory:a,onRemove:f}){const p=Hm(),_=oe.useMemo(()=>a(p),[p]),S=_z(f||null);return oe.useEffect(()=>(p.hasControl(_)||p.addControl(_,n),()=>{S&&S(p),p.hasControl(_)&&p.removeControl(_)}),[p,_,S,n]),_}oe.memo(oe.forwardRef(function({position:a="bottom-right",...f},p){const _=Rh({position:a,factory:()=>new cs.AttributionControl(f)});return oe.useImperativeHandle(p,()=>_),null}));oe.memo(oe.forwardRef(function({position:a="top-right",...f},p){const _=Rh({position:a,factory:()=>new cs.FullscreenControl(f)});return oe.useImperativeHandle(p,()=>_),null}));oe.memo(oe.forwardRef(function({position:a="top-right",...f},p){const _=Rh({position:a,factory:()=>new cs.GeolocateControl(f)});return oe.useImperativeHandle(p,()=>_),null}));oe.memo(oe.forwardRef(function({position:a="top-right"},f){const p=Rh({position:a,factory:()=>new cs.GlobeControl});return oe.useImperativeHandle(f,()=>p),null}));oe.memo(oe.forwardRef(function({position:a="bottom-left",...f},p){const _=Rh({position:a,factory:()=>new cs.LogoControl(f)});return oe.useImperativeHandle(p,()=>_),null}));oe.memo(oe.forwardRef(function({position:a="top-right",...f},p){const _=Rh({position:a,factory:()=>new cs.NavigationControl(f)});return oe.useImperativeHandle(p,()=>_),null}));oe.memo(oe.forwardRef(function({position:a="bottom-left",...f},p){const _=Rh({position:a,factory:()=>new cs.ScaleControl(f)});return oe.useImperativeHandle(p,()=>_),null}));oe.memo(oe.forwardRef(function({position:a="top-right",...f},p){const _=Rh({position:a,factory:()=>new cs.TerrainControl(f)});return oe.useImperativeHandle(p,()=>_),null}));function vz(){const{currentTour:n}=Au(),a=oe.useRef(null),[f,p]=oe.useState(!1),_=n.locations.map(F=>F.coordinates),S=[Math.min(..._.map(F=>F[0])),Math.min(..._.map(F=>F[1]))],y=[Math.max(..._.map(F=>F[0])),Math.max(..._.map(F=>F[1]))],u=[S,y],C=S[0]===y[0]&&S[1]===y[1],R=()=>{a.current&&(C?(a.current.setCenter(S),a.current.setZoom(10)):a.current.fitBounds(u,{padding:{top:50,bottom:50,left:50,right:50},duration:1e3}),p(!1))},O=()=>{if(a.current){const F=a.current.getBounds(),G=F.getSouthWest().lng===S[0]&&F.getSouthWest().lat===S[1]&&F.getNorthEast().lng===y[0]&&F.getNorthEast().lat===y[1];p(!G)}},B=()=>{if(a.current){const F=a.current.getZoom();a.current.easeTo({zoom:F+1,duration:500})}},z=()=>{if(a.current){const F=a.current.getZoom();a.current.easeTo({zoom:F-1,duration:500})}};return J.jsxs("section",{className:"relative overflow-hidden",children:[J.jsx("div",{className:"h-[500px]",id:"map",children:J.jsxs(cz,{ref:a,initialCenter:C?S:[13.388,52.517],className:"maplibregl-theme-modern",minZoom:2,initialZoom:C?10:8,scrollZoom:!1,initialAttributionControl:!1,mapStyle:"/mapStyle/light.json",initialBounds:C?void 0:u,initialFitBoundsOptions:{padding:{top:100,bottom:50,left:100,right:100}},onMove:O,onZoom:O,children:[n.locations.map((F,G)=>J.jsx(gz,{text:F.day,color:"#57534d",longitude:F.coordinates[0],latitude:F.coordinates[1]},G*3)),J.jsx(xz,{})]})}),J.jsxs("div",{className:"absolute top-5 right-5 z-10 flex flex-col gap-2",children:[J.jsx("button",{onClick:B,className:"rounded-full bg-white p-3 shadow-md hover:bg-gray-100",title:"Zoom In",children:J.jsx(mL,{className:"text-gray-700",size:16})}),J.jsx("button",{onClick:z,className:"rounded-full bg-white p-3 shadow-md hover:bg-gray-100",title:"Zoom Out",children:J.jsx(pL,{className:"text-gray-700",size:16})})]}),f&&J.jsx("button",{onClick:R,className:"absolute right-5 bottom-5 z-10 rounded-full bg-white p-3 shadow-md hover:bg-gray-100",title:"Reset Map View",children:J.jsx(gL,{className:"text-gray-700",size:16})})]})}function xz(){const{container:n}=CM({position:"bottom-left"});return q_.createPortal(J.jsx("div",{className:"rounded bg-stone-700 p-2",children:J.jsx("p",{className:"font-semibold text-white",children:"Number represents Day"})}),n)}var x_={},S2;function bz(){if(S2)return x_;S2=1,Object.defineProperty(x_,"__esModule",{value:!0});var n=T2(),a=V_(),f=function(){return f=Object.assign||function(z){for(var F,G=1,te=arguments.length;G<te;G++)for(var K in F=arguments[G])Object.prototype.hasOwnProperty.call(F,K)&&(z[K]=F[K]);return z},f.apply(this,arguments)};function p(z,F,G){for(var te,K=0,X=F.length;K<X;K++)!te&&K in F||(te||(te=Array.prototype.slice.call(F,0,K)),te[K]=F[K]);return z.concat(te||Array.prototype.slice.call(F))}function _(z){var F=z.size,G=F===void 0?25:F,te=z.SVGstrokeColor,K=te===void 0?"currentColor":te,X=z.SVGstorkeWidth,ye=X===void 0?0:X,pe=z.SVGclassName,xe=pe===void 0?"star-svg":pe,Se=z.SVGstyle;return n.jsx("svg",f({className:xe,style:Se,stroke:K,fill:"currentColor",strokeWidth:ye,viewBox:"0 0 24 24",width:G,height:G,xmlns:"http://www.w3.org/2000/svg"},{children:n.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}))}function S(z,F){switch(F.type){case"PointerMove":return f(f({},z),{hoverValue:F.payload,hoverIndex:F.index});case"PointerLeave":return f(f({},z),{ratingValue:z.ratingValue,hoverIndex:0,hoverValue:null});case"MouseClick":return f(f({},z),{valueIndex:z.hoverIndex,ratingValue:F.payload});default:return z}}var y="style-module_starRatingWrap__q-lJC",u="style-module_simpleStarRating__nWUxf",C="style-module_fillIcons__6---A",R="style-module_emptyIcons__Bg-FZ",O="style-module_tooltip__tKc3i";function B(){return typeof window<"u"&&window.matchMedia("(pointer: coarse)").matches||"ontouchstart"in window||typeof navigator<"u"&&navigator.maxTouchPoints>0}return function(z,F){F===void 0&&(F={});var G=F.insertAt;if(typeof document<"u"){var te=document.head||document.getElementsByTagName("head")[0],K=document.createElement("style");K.type="text/css",G==="top"&&te.firstChild?te.insertBefore(K,te.firstChild):te.appendChild(K),K.styleSheet?K.styleSheet.cssText=z:K.appendChild(document.createTextNode(z))}}(".style-module_starRatingWrap__q-lJC{display:inline-block;touch-action:none}.style-module_simpleStarRating__nWUxf{display:inline-block;overflow:hidden;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap}.style-module_fillIcons__6---A{display:inline-block;overflow:hidden;position:absolute;top:0;white-space:nowrap}.style-module_emptyIcons__Bg-FZ{display:inline-block}.style-module_tooltip__tKc3i{background-color:#333;border-radius:5px;color:#fff;display:inline-block;padding:5px 15px;vertical-align:middle}"),x_.Rating=function(z){var F,G,te=z.onClick,K=z.onPointerMove,X=z.onPointerEnter,ye=z.onPointerLeave,pe=z.initialValue,xe=pe===void 0?0:pe,Se=z.iconsCount,ke=Se===void 0?5:Se,it=z.size,Ke=it===void 0?40:it,Ye=z.readonly,ht=Ye!==void 0&&Ye,Lt=z.rtl,sr=Lt!==void 0&&Lt,nr=z.customIcons,Xt=nr===void 0?[]:nr,or=z.allowFraction,Ct=or!==void 0&&or,Nt=z.style,Rt=z.className,fr=Rt===void 0?"react-simple-star-rating":Rt,De=z.transition,wt=De!==void 0&&De,Zt=z.allowHover,Ht=Zt===void 0||Zt,zt=z.disableFillHover,er=zt!==void 0&&zt,ir=z.fillIcon,Qr=ir===void 0?null:ir,br=z.fillColor,en=br===void 0?"#ffbc0b":br,Fr=z.fillColorArray,ln=Fr===void 0?[]:Fr,Ln=z.fillStyle,Dr=z.fillClassName,pr=Dr===void 0?"filled-icons":Dr,Kn=z.emptyIcon,Un=Kn===void 0?null:Kn,Yn=z.emptyColor,we=Yn===void 0?"#cccccc":Yn,Re=z.emptyStyle,We=z.emptyClassName,vt=We===void 0?"empty-icons":We,xt=z.allowTitleTag,Et=xt===void 0||xt,Ut=z.showTooltip,ur=Ut!==void 0&&Ut,_r=z.tooltipDefaultText,Zr=_r===void 0?"Your Rate":_r,Rn=z.tooltipArray,Vn=Rn===void 0?[]:Rn,zn=z.tooltipStyle,Pi=z.tooltipClassName,Ri=Pi===void 0?"react-simple-star-rating-tooltip":Pi,nn=z.SVGclassName,tn=nn===void 0?"star-svg":nn,je=z.titleSeparator,ie=je===void 0?"out of":je,ae=z.SVGstyle,he=z.SVGstorkeWidth,be=he===void 0?0:he,se=z.SVGstrokeColor,Oe=se===void 0?"currentColor":se,Ve=a.useReducer(S,{hoverIndex:0,valueIndex:0,ratingValue:xe,hoverValue:null}),Ce=Ve[0],Ue=Ce.ratingValue,qe=Ce.hoverValue,Fe=Ce.hoverIndex,ft=Ce.valueIndex,Pt=Ve[1];a.useEffect(function(){xe&&Pt({type:"MouseClick",payload:0})},[xe]);var At=a.useMemo(function(){return Ct?2*ke:ke},[Ct,ke]),Ft=a.useMemo(function(){return xe>At?0:Ct||Math.floor(xe)===xe?Math.round(xe/ke*100):2*Math.ceil(xe)*10},[Ct,xe,ke,At]),lr=a.useMemo(function(){return(Ct?2*xe-1:xe-1)||0},[Ct,xe]),Je=a.useCallback(function(yt){return ke%2!=0?yt/2/10:yt*ke/100},[ke]),Wt=function(yt){for(var kt=yt.clientX,Hr=yt.currentTarget.children[0].getBoundingClientRect(),$n=Hr.left,sn=Hr.right,ar=Hr.width,Va=sr?sn-kt:kt-$n,yi=At,$a=Math.round(ar/At),Zn=0;Zn<=At;Zn+=1)if(Va<=$a*Zn){yi=Zn===0&&Va<$a?0:Zn;break}var sa=yi-1;yi>0&&(Pt({type:"PointerMove",payload:100*yi/At,index:sa}),K&&qe&&K(Je(qe),sa,yt))},vr=function(yt){qe&&(Pt({type:"MouseClick",payload:qe}),te&&te(Je(qe),Fe,yt))},Ur=a.useMemo(function(){if(Ht){if(er){var yt=Ue&&Ue||Ft;return qe&&qe>yt?qe:yt}return qe&&qe||Ue&&Ue||Ft}return Ue&&Ue||Ft},[Ht,er,qe,Ue,Ft]);a.useEffect(function(){Vn.length>At&&console.error("tooltipArray Array length is bigger then Icons Count length.")},[Vn.length,At]);var Cr=a.useCallback(function(yt){return qe&&yt[Fe]||Ue&&yt[ft]||xe&&yt[lr]},[qe,Fe,Ue,ft,xe,lr]),tt=a.useMemo(function(){return qe&&Je(qe)||Ue&&Je(Ue)||xe&&Je(Ft)},[qe,Je,Ue,xe,Ft]);return n.jsxs("span",f({className:y,style:{direction:"".concat(sr?"rtl":"ltr")}},{children:[n.jsxs("span",f({className:"".concat(u," ").concat(fr),style:f({cursor:ht?"":"pointer"},Nt),onPointerMove:ht?void 0:Wt,onPointerEnter:ht?void 0:function(yt){X&&X(yt),B()&&Wt(yt)},onPointerLeave:ht?void 0:function(yt){B()&&vr(),Pt({type:"PointerLeave"}),ye&&ye(yt)},onClick:ht?void 0:vr,"aria-hidden":"true"},{children:[n.jsx("span",f({className:"".concat(R," ").concat(vt),style:f({color:we},Re)},{children:p([],Array(ke)).map(function(yt,kt){var Hr;return n.jsx(a.Fragment,{children:((Hr=Xt[kt])===null||Hr===void 0?void 0:Hr.icon)||Un||n.jsx(_,{SVGclassName:tn,SVGstyle:ae,SVGstorkeWidth:be,SVGstrokeColor:Oe,size:Ke})},kt)})})),n.jsx("span",f({className:"".concat(C," ").concat(pr),style:f((F={},F[sr?"right":"left"]=0,F.color=Cr(ln)||en,F.transition=wt?"width .2s ease, color .2s ease":"",F.width="".concat(Ur,"%"),F),Ln),title:Et?"".concat(tt," ").concat(ie," ").concat(ke):void 0},{children:p([],Array(ke)).map(function(yt,kt){var Hr;return n.jsx(a.Fragment,{children:((Hr=Xt[kt])===null||Hr===void 0?void 0:Hr.icon)||Qr||n.jsx(_,{SVGclassName:tn,SVGstyle:ae,SVGstorkeWidth:be,SVGstrokeColor:Oe,size:Ke})},kt)})}))]})),ur&&n.jsx("span",f({className:"".concat(O," ").concat(Ri),style:f((G={},G[sr?"marginRight":"marginLeft"]=20,G),zn)},{children:(Vn.length>0?Cr(Vn):tt)||Zr}))]}))},x_}var wz=bz();function Sz({photo:n,userName:a,review:f,ratings:p}){return J.jsxs("div",{className:"flex min-h-[300px] min-w-[350px] flex-col items-center justify-between space-y-10 rounded bg-white p-10 shadow-lg md:max-w-[350px]",children:[J.jsxs("div",{className:"space-y-5",children:[J.jsxs("div",{className:"flex items-center gap-5",children:[J.jsx("img",{className:"text-natours size-10 rounded-full shadow",src:n}),J.jsx("p",{className:"font-semibold text-stone-600",children:a})]}),J.jsx("div",{children:J.jsx("p",{className:"text-stone-800/50",children:f})})]}),J.jsx("div",{children:J.jsx(wz.Rating,{initialValue:Math.round(p),size:25,className:"",readonly:!0,fillColor:"#55c57a"})})]})}function Tz(){const{currentTour:n}=Au();return J.jsxs("section",{className:"natours-gradient flex flex-col items-center justify-center space-y-5 overflow-hidden",children:[J.jsxs("div",{className:"mt-8 flex flex-col items-center",children:[J.jsx("p",{className:"text-2xl font-semibold text-white/80",children:"User Reviews!"}),J.jsxs("p",{className:"text-2xl font-semibold text-white",children:[n.ratingsAverage," / 5"]})]}),J.jsx("div",{className:"flex min-h-[40vh] w-full gap-10 overflow-x-auto px-10 py-5 pb-15",children:n.reviews.length===0?J.jsx("p",{className:"mx-auto text-2xl font-bold text-white md:text-3xl",children:"No reviews found!"}):n.reviews.map(a=>J.jsx(Sz,{ratings:a.rating,userName:a.user.name,photo:`/img/users/${a.user.photo}`,review:a.review},a._id))})]})}function Mz(){const{slug:n}=gA();console.log(n);const{tours:a,currentTour:f,loading:p,getCurrentTour:_,getAllTours:S}=Au();return console.log(f),oe.useEffect(()=>{async function y(){a.length||await S(),await _(n)}y()},[n]),p?J.jsx("div",{className:"flex h-[calc(100vh-10vh)] items-center justify-center",children:J.jsx(Io,{className:"size-12",color:"green"})}):Object.keys(f).length===0?J.jsxs("div",{className:"flex h-[calc(100vh-10vh)] flex-col items-center justify-center gap-3",children:[J.jsx(Io,{className:"size-12",color:"green"}),J.jsx("p",{className:"text-stone-600 md:text-xl",children:"Loading Tour. . ."})]}):J.jsxs(J.Fragment,{children:[J.jsx(KL,{}),J.jsx(ez,{}),J.jsx(HL,{}),J.jsx(vz,{}),J.jsx(Tz,{}),J.jsx(GL,{})]})}function Az({tour:n}){function a(f){return f?f.charAt(0).toUpperCase()+f.slice(1):""}return J.jsx("section",{className:"m-7 flex items-center justify-center",children:J.jsxs("div",{className:"max-w-[388px] overflow-clip rounded bg-white shadow-lg",children:[J.jsxs("div",{className:"relative",children:[J.jsxs("div",{className:"img-clip",children:[J.jsx("div",{className:"bg-natours/30 absolute h-full w-full"}),J.jsx("img",{src:`/img/tours/${n.imageCover}`,alt:"scenic image",className:"min-h-[250px] min-w-[350px]"})]}),J.jsx("h3",{className:"absolute right-5 bottom-6",children:J.jsx("span",{className:"natours-gradient-t px-3 py-2 text-2xl font-light text-white shadow-md lg:text-2xl",children:n.name})})]}),J.jsxs("div",{className:"space-y-5 p-8",children:[J.jsxs("div",{className:"space-y-4",children:[J.jsxs("p",{className:"font-semibold text-stone-600",children:[a(n.difficulty)," - ",n.duration," Days Tour"]}),J.jsx("p",{className:"font text-stone-800/50 italic",children:n.summary})]}),J.jsxs("div",{className:"mt-10 grid grid-cols-2 gap-7",children:[J.jsxs("div",{className:"flex items-center gap-2",children:[J.jsx(bM,{className:"text-natours size-7"}),J.jsx("p",{className:"text-stone-800/50",children:n.startLocation.description})]}),J.jsxs("div",{className:"flex items-center gap-2",children:[J.jsx(pM,{className:"text-natours size-7"}),J.jsx("p",{className:"text-stone-800/50",children:new Date(n.startDates[0]).toLocaleString("en-US",{month:"short",year:"numeric"})})]}),J.jsxs("div",{className:"flex items-center gap-2",children:[J.jsx(WL,{className:"text-natours size-7"}),J.jsxs("p",{className:"text-stone-800/50",children:[n.locations.length," Stops"]})]}),J.jsxs("div",{className:"flex items-center gap-2",children:[J.jsx(wM,{className:"text-natours size-7"}),J.jsxs("p",{className:"text-stone-800/50",children:[n.maxGroupSize," People"]})]})]})]}),J.jsxs("div",{className:"flex w-full items-center border-t border-stone-600/30 bg-stone-400/10 p-8",children:[J.jsxs("div",{className:"w-1/2 justify-baseline",children:[J.jsxs("p",{className:"text-lg font-bold text-stone-600",children:["$",n.price,J.jsx("span",{className:"ml-1 text-sm font-medium text-stone-800/50",children:"Per person"})]}),J.jsxs("p",{className:"text-lg font-bold text-stone-600",children:[n.ratingsAverage,J.jsx("span",{className:"ml-1 text-sm font-medium text-stone-800/50",children:"Ratings"})]})]}),J.jsx("div",{className:"flex w-1/2 items-center justify-center",children:J.jsx(Es,{to:`/tour/${n.slug}`,className:"btn-primary px-8 py-3 shadow-md",state:{tour:n},children:"Details"})})]})]})})}function Cz(){const{loading:n,error:a,tours:f,getAllTours:p}=Au();return oe.useEffect(function(){async function _(){await p()}_()},[]),J.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center lg:grid lg:grid-cols-2 lg:items-center xl:grid-cols-3",children:[n&&J.jsx("div",{className:"flex h-[calc(100vh-10vh)] items-center justify-center",children:J.jsx(Io,{className:"size-12",color:`
        green`})}),!n&&a&&J.jsx("p",{children:a}),!n&&!a&&f.map(_=>J.jsx(Az,{tour:_},_.id))]})}function Ez(){return J.jsxs("div",{className:"flex h-[calc(100vh-10vh)] flex-col items-center justify-center space-y-4",children:[J.jsxs("p",{className:"flex gap-3 text-5xl font-bold text-red-400",children:[J.jsx("span",{children:J.jsx(vL,{})}),"404!"]}),J.jsx("p",{className:"text-2xl font-semibold text-red-400",children:"Page Not Found"})]})}function Z0({children:n}){const{isAuthenticated:a}=Cl();return a?n:J.jsx(RA,{to:"/login",replace:!0})}function Pz(){const{loading:n,sendOtp:a,error:f,resetError:p,isAuthenticated:_}=Cl(),S=Ml(),{emailTyped:y}=S.state||"",[u,C]=oe.useState(!1),[R,O]=oe.useState(""),B=bc();oe.useEffect(function(){if(_)return B("/account");p(),y&&O(y.trim())},[y]);async function z(){if(!e0.isEmail(R))return Gr.error("Please enter valid email address!"),C(!0);await a(R)&&B("/forgot-password/verify-otp",{state:{emailTyped:R}})}return J.jsx("section",{className:"my-auto flex w-full flex-col md:items-center",children:J.jsxs(hs.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},className:"mx-5 my-14 flex flex-col justify-between space-y-8 rounded-lg bg-white px-5 py-7 shadow-lg md:min-w-[600px] md:p-13 md:shadow-xl",children:[J.jsxs("div",{className:"flex items-center gap-3 space-y-1",children:[J.jsx(mM,{className:"text-natours m-0 size-7",onClick:()=>B(-1)}),J.jsx("h1",{className:"natours-gradient-text text-2xl font-bold",children:"Send Verification Code."})]}),J.jsxs("div",{className:"flex flex-col space-y-3",children:[J.jsx("div",{children:J.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Enter your Email Address."})}),J.jsx("input",{type:"text",className:`input-natours w-full text-stone-600 ${u?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"you@example.com",value:R,onChange:F=>{O(F.target.value.trim()),C(!1)}})]}),J.jsx("p",{className:"font-semibold text-red-400",children:f}),f&&J.jsx(Es,{to:"/forgot-password/verify-otp",className:"text-natours font-semibold",state:{emailTyped:R},children:"Already Have an Otp? Click here"}),J.jsx("div",{children:J.jsx(hs.button,{whileTap:{scale:.7},transition:{type:"keyframes",duration:.01},className:"btn-primary w-1/2 py-3 md:w-1/3",onClick:z,children:n?J.jsx(Io,{}):"Send OTP"})})]})})}const Rz=({length:n,onOtpSubmit:a})=>{const[f,p]=oe.useState(new Array(n).fill("")),_=oe.useRef([]);oe.useEffect(()=>{_.current[0]&&_.current[0].focus()},[]);const S=(C,R)=>{const O=C.target.value;if(isNaN(O))return;const B=[...f];B[R]=O.substring(O.length-1),p(B),O&&R<n-1&&_.current[R+1]&&_.current[R+1].focus();const z=B.join("");a(z)},y=(C,R)=>{if(C.key==="Backspace"){const O=[...f];O[R]="",p(O),R>0&&_.current[R-1]&&_.current[R-1].focus()}},u=C=>{_.current[C]&&_.current[C].focus()};return J.jsx("div",{className:"flex justify-between gap-2",children:f.map((C,R)=>J.jsx("input",{ref:O=>_.current[R]=O,value:C,onChange:O=>S(O,R),onKeyDown:O=>y(O,R),onClick:()=>u(R),type:"text",maxLength:"1",className:"border-natours focus:ring-natours h-10 w-10 rounded bg-stone-200/70 text-center font-bold text-stone-700 outline-none focus:ring-3 md:h-14 md:w-14"},R))})};function Iz(){const[n,a]=oe.useState(""),{error:f,loading:p,verifyOtp:_,resetError:S,isAuthenticated:y}=Cl(),u=bc(),C=Ml(),{emailTyped:R}=C.state||"";console.log(R),oe.useEffect(function(){if(y)return u("/account");if(S(),!R)return u("/forgot-password/send-otp")},[R,u]);function O(z){a(z)}async function B(){if(S(),n.length<6||!n)return Gr.error("Please Provide 6 digits otp!");await _(n,R)&&u("/forgot-password/reset-password",{state:{emailTyped:R}})}return J.jsx("section",{className:"my-auto flex w-full flex-col md:items-center",children:J.jsxs(hs.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},className:"mx-5 my-14 flex flex-col justify-between space-y-8 rounded-lg bg-white px-5 py-7 shadow-lg md:min-w-[600px] md:p-13 md:shadow-xl",children:[J.jsxs("div",{className:"flex items-center gap-3 space-y-1",children:[J.jsx(mM,{className:"text-natours m-0 size-7",onClick:()=>u(-1)}),J.jsx("h1",{className:"natours-gradient-text text-2xl font-bold",children:"Verify your OTP"})]}),J.jsxs("div",{className:"flex flex-col space-y-5",children:[J.jsx("div",{children:J.jsx("label",{htmlFor:"email",className:"font-semibold text-stone-600",children:"Enter your Otp"})}),J.jsx(Rz,{length:6,onOtpSubmit:O})]}),J.jsx("p",{className:"font-semibold text-red-400",children:f}),J.jsx("div",{children:J.jsx(hs.button,{whileTap:{scale:.8},transition:{type:"keyframes",duration:.01},className:"btn-primary w-1/2 py-3 md:w-1/3",onClick:B,children:p?J.jsx(Io,{}):"Verify"})})]})})}function Dz(){const{error:n,loading:a,resetPassword:f,resetError:p}=Cl(),[_,S]=oe.useState(""),[y,u]=oe.useState(""),[C,R]=oe.useState(!1),[O,B]=oe.useState(!1),z=Ml(),{emailTyped:F}=z.state||"",G=bc();oe.useEffect(function(){if(p(),!F)return G("/forgot-password/send-otp")},[F,G]);function te(X,ye){let pe=!0;return X?X.length<8?(R(!0),Gr.error("Password must be at least 8 characters."),pe=!1):R(!1):(R(!0),Gr.error("Password is required."),pe=!1),ye?ye!==X?(B(!0),Gr.error("Passwords do not match."),pe=!1):B(!1):(B(!0),Gr.error("Confirm Password id required"),pe=!1),pe}async function K(){if(!te(_,y))return;await f(F,_,y)&&G("/login")}return J.jsx("section",{className:"my-auto flex w-full flex-col md:items-center",children:J.jsxs(hs.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},className:"mx-5 my-14 flex flex-col justify-between space-y-8 rounded-lg bg-white px-5 py-7 shadow-lg md:min-w-[600px] md:p-13 md:shadow-xl",children:[J.jsx("div",{className:"flex items-center gap-3 space-y-1",children:J.jsx("h1",{className:"natours-gradient-text text-2xl font-bold",children:"Change your password"})}),J.jsxs("div",{className:"flex flex-col space-y-3",children:[J.jsx("label",{htmlFor:"password",className:"font-semibold text-stone-600",children:"New Password"}),J.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${C?"border-3 border-red-400 focus:ring-0":""}`,placeholder:"",name:"password",value:_,onChange:X=>{R(!1),S(X.target.value.trim())}})]}),J.jsxs("div",{className:"flex flex-col space-y-3",children:[J.jsx("label",{htmlFor:"confirm-password",className:"font-semibold text-stone-600",children:"Confirm Password"}),J.jsx("input",{type:"password",className:`input-natours w-full text-stone-600 ${O?"border-3 border-red-400 focus:ring-0":""}`,placeholder:" ",name:"confirmPassword",value:y,onChange:X=>{B(!1),u(X.target.value.trim())}})]}),J.jsx("p",{className:"font-semibold text-red-400",children:n}),J.jsxs("div",{className:"flex gap-3",children:[J.jsx(hs.button,{whileTap:{scale:.8},transition:{type:"keyframes",duration:.01},className:"btn-primary w-1/2 px-4 py-3 text-xl",onClick:K,children:a?J.jsx(Io,{}):"Save"}),J.jsx(hs.button,{whileTap:{scale:.8},transition:{type:"keyframes",duration:.01},className:"border-natours w-1/2 rounded-full border-3 font-bold text-stone-800",onClick:()=>G("/login"),children:"cancel"})]})]})})}function Lz(){return J.jsx(zP,{children:J.jsx(DL,{children:J.jsx(rC,{children:J.jsx(DA,{children:J.jsxs(os,{path:"/",element:J.jsx(SL,{}),children:[J.jsx(os,{index:!0,element:J.jsx(fC,{})}),J.jsx(os,{path:"login",element:J.jsx(Y4,{})}),J.jsxs(os,{path:"forgot-password",children:[J.jsx(os,{index:!0,path:"send-otp",element:J.jsx(Pz,{})}),J.jsx(os,{path:"verify-otp",element:J.jsx(Iz,{})}),J.jsx(os,{path:"reset-password",element:J.jsx(Dz,{})})]}),J.jsx(os,{path:"signup",element:J.jsx(X4,{})}),J.jsx(os,{path:"tours",element:J.jsx(Cz,{})}),J.jsx(os,{path:"tour/:slug",element:J.jsx(Mz,{})}),J.jsxs(os,{path:"account",element:J.jsx(Z0,{children:J.jsx(EL,{})}),children:[J.jsx(os,{index:!0,element:J.jsx(Z0,{children:J.jsx(CL,{})})}),J.jsx(os,{path:"my-bookings",element:J.jsx(Z0,{children:J.jsx(PL,{})})})]}),J.jsx(os,{path:"*",element:J.jsx(Ez,{})})]})})})})})}jM.createRoot(document.getElementById("root")).render(J.jsx(oe.StrictMode,{children:J.jsx(Lz,{})}));
